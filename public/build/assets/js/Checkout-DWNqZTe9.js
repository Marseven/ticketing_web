import{aw as Ie,J as Fe,H as Ne,Z as Ve,D as qe,b as l,d as s,e as o,i as c,g as v,q as A,t as i,h as R,A as P,j as le,f as N,v as j,L as se,F as ae,k as ie,n as U,$ as de,U as ue,c as k,r as p,o as Te,a as Ae,B as je,N as Ue}from"./vue-vendor-wiowK_YT.js";import{u as De}from"./events-BiwlR7Rs.js";import{_ as Re,P as Oe,u as Le,b as me,g as ce}from"./account-CYVf-4X6.js";import"./vendor-14XLBY50.js";import"./pinia-vendor-xH9DYcoO.js";const ze={name:"Checkout",components:{PhoneInput:Oe,ExclamationCircleIcon:qe,PhotoIcon:Ve,MapPinIcon:Ne,ClockIcon:Fe,ArrowTopRightOnSquareIcon:Ie},setup(){const X=je(),e=Ue(),G=De(),t=Le(),h=k(()=>t.isAuthenticated),S=k(()=>t.user),d=p(null),V=p(!0),q=p(""),M=p(!1),f=p(""),C=p(""),E=p(null),n=p(new Date),Q=p({days:0,hours:0,minutes:0,seconds:0}),O=p(!1),T=p(90),w=p(null),_=p(null),I=p(""),x=p(null),F=p(null),a=p({quantity:1,ticketTypeId:"",paymentMethod:"",phoneNumber:"",cardNumber:"",expiryDate:"",cvv:"",guestName:"",guestPhone:""}),Z=p(!1),ve=k(()=>{if(Z.value||!d.value)return null;let r=d.value.image||d.value.image_url||d.value.image_file;return console.log("Checkout - Image URL:",r),!r||r.trim()===""?null:r.startsWith("http://")||r.startsWith("https://")?r:r.startsWith("/")?window.location.origin+r:r.includes("/")?r:`${window.location.origin}/storage/images/events/${r}`}),be=k(()=>!d.value?.schedules||d.value.schedules.length===0?"Date √† confirmer":new Date(d.value.schedules[0].starts_at).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).toUpperCase()),pe=k(()=>!d.value?.schedules||d.value.schedules.length===0?"Heure √† confirmer":new Date(d.value.schedules[0].starts_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})),D=k(()=>!d.value?.schedules||d.value.schedules.length===0?null:new Date(d.value.schedules[0].starts_at)),L=k(()=>D.value?new Date>D.value:!1),W=k(()=>{if(!D.value)return null;const r=D.value.getTime()-n.value.getTime();if(r<=0)return{days:0,hours:0,minutes:0,seconds:0,expired:!0};const u=Math.floor(r/(1e3*60*60*24)),y=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(r%(1e3*60*60)/(1e3*60)),g=Math.floor(r%(1e3*60)/1e3);return{days:u,hours:y,minutes:m,seconds:g,expired:!1}}),J=k(()=>!d.value?.ticket_types||L.value?[]:d.value.ticket_types.filter(r=>{if(r.remaining_quantity!==void 0&&r.remaining_quantity!==null)return r.remaining_quantity>0;if(r.available_quantity!==void 0&&r.available_quantity!==null){const u=r.sold_quantity||0;return r.available_quantity-u>0}return r.available_quantity===null?!0:r.quantity-(r.sold||0)>0})),ye=k(()=>!L.value&&J.value.length>0),z=k(()=>{if(!a.value.quantity||!a.value.ticketTypeId)return 0;const r=J.value.find(u=>u.id==a.value.ticketTypeId);return r?r.price*a.value.quantity:0}),Y=k(()=>!a.value.quantity||!a.value.ticketTypeId||!a.value.paymentMethod||!h.value&&!a.value.guestName?!1:a.value.paymentMethod==="airtel"||a.value.paymentMethod==="moov"?!!a.value.phoneNumber&&!C.value:(a.value.paymentMethod==="visa",!0)),xe=r=>new Intl.NumberFormat("fr-FR").format(r),ge=r=>{if(r.remaining_quantity!==void 0&&r.remaining_quantity!==null)return r.remaining_quantity>0?`${r.remaining_quantity} disponibles`:"√âpuis√©";if(r.available_quantity===null)return"Illimit√©";if(r.available_quantity!==void 0&&r.available_quantity!==null){const y=r.available_quantity-(r.sold_quantity||0);return y>0?`${y} disponibles`:"√âpuis√©"}const u=r.quantity-(r.sold||0);return u>0?`${u} disponibles`:"√âpuis√©"},fe=()=>d.value?d.value.category&&typeof d.value.category=="object"&&d.value.category.name?d.value.category.name.toUpperCase():d.value.category&&typeof d.value.category=="string"?d.value.category.toUpperCase():d.value.category_name&&typeof d.value.category_name=="string"?d.value.category_name.toUpperCase():"√âV√âNEMENT":"√âV√âNEMENT",$=async()=>{const r=X.params.eventSlug;if(!r){q.value="ID d'√©v√©nement manquant",V.value=!1;return}try{V.value=!0,q.value="";const u=await G.fetchEvent(r);d.value=u.event,d.value?.ticket_types&&d.value.ticket_types.length===1&&(a.value.ticketTypeId=d.value.ticket_types[0].id),he()}catch(u){q.value=u.message||"Erreur lors du chargement de l'√©v√©nement"}finally{V.value=!1}},ee=()=>{const r=W.value;r&&(Q.value={days:r.days,hours:r.hours,minutes:r.minutes,seconds:r.seconds})},he=()=>{E.value&&clearInterval(E.value),n.value=new Date,ee(),E.value=setInterval(()=>{n.value=new Date,ee(),W.value?.expired&&clearInterval(E.value)},1e3),console.log("Checkout - Compte √† rebours d√©marr√©")},we=()=>{const r=a.value.phoneNumber,u=a.value.paymentMethod;if(C.value="",!!r){if(u==="airtel"){const y=["074","076","077"];r.length===9&&/^[0-9]+$/.test(r)&&y.some(g=>r.startsWith(g))||(C.value="Le num√©ro Airtel Money doit faire 9 chiffres et commencer par 074, 076 ou 077")}if(u==="moov"){const y=["060","062","065","066"];r.length===9&&/^[0-9]+$/.test(r)&&y.some(g=>r.startsWith(g))||(C.value="Le num√©ro Moov Money doit faire 9 chiffres et commencer par 060, 062, 065 ou 066")}}},_e=r=>{a.value.paymentMethod=r,a.value.phoneNumber="",a.value.cardNumber="",a.value.expiryDate="",a.value.cvv="",C.value=""},ke=async()=>{try{if(M.value=!0,f.value="",L.value)throw new Error("Impossible d'acheter des tickets pour un √©v√©nement termin√©");if(!Y.value)throw new Error("Veuillez remplir tous les champs requis");if(a.value.paymentMethod==="airtel"||a.value.paymentMethod==="moov")await te();else if(a.value.paymentMethod==="visa")await oe();else throw new Error("M√©thode de paiement non support√©e")}catch(r){if(console.error("Erreur lors du processus d'achat:",r),r.response?.data?.message)f.value=r.response.data.message;else if(r.response?.data?.errors){const u=r.response.data.errors,y=[];for(const[m,g]of Object.entries(u)){const b={guest_name:"Nom complet",guest_email:"Email",guest_phone:"T√©l√©phone",ticket_type_id:"Type de ticket",quantity:"Quantit√©",phone:"Num√©ro de t√©l√©phone",amount:"Montant"}[m]||m;g.forEach(B=>{B==="validation.required"?y.push(`Le champ ${b} est requis`):y.push(B)})}f.value=y.join(". ")}else f.value=r.message||"Erreur lors du traitement de l'achat"}finally{M.value=!1}},te=async()=>{try{let r;if(F.value)r=F.value,console.log("‚ôªÔ∏è R√©utilisation de la commande existante:",r.reference);else{const g={event_slug:d.value.slug,ticket_type_id:a.value.ticketTypeId,quantity:a.value.quantity,guest_name:h.value?S.value.name:a.value.guestName,guest_phone:h.value?S.value.phone:a.value.guestPhone||null,guest_email:h.value?S.value.email:"guest@primea.ga"},b=h.value?await me.createOrder(g):await ce.createGuestOrder(g);if(!b.data.success)throw new Error(b.data.message||"Erreur lors de la cr√©ation de l'achat");r=b.data.data.order,F.value=r,console.log("‚úÖ Nouvelle commande cr√©√©e:",r.reference)}const u={order_id:r.id,gateway:a.value.paymentMethod==="airtel"?"airtelmoney":"moovmoney",phone:a.value.phoneNumber,amount:z.value},m=await(await fetch("/api/v1/payments/initiate",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(u)})).json();if(!m.success)throw new Error(m.message||"Erreur lors de l'initiation du paiement");if(m.data?.bill_id){const b=await(await fetch("/api/v1/payments/push-ussd",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({payment_id:m.data.payment.id,bill_id:m.data.bill_id,phone:a.value.phoneNumber,gateway:a.value.paymentMethod==="airtel"?"airtelmoney":"moovmoney"})})).json();if(b.success)re({payment_id:m.data.payment.id,reference:r.reference,phone:a.value.phoneNumber,gateway:a.value.paymentMethod==="airtel"?"airtelmoney":"moovmoney",amount:z.value,bill_id:m.data.bill_id,payment_url:m.data.payment_url});else{console.error("‚ùå Push USSD √©chou√©:",{message:b.message,error_code:b.error_code,details:b.details,payment_id:m.data.payment.id,bill_id:m.data.bill_id,phone:a.value.phoneNumber,gateway:a.value.paymentMethod});const B=b.details?`${b.message}
D√©tails: ${b.details}`:b.message||"Erreur lors de l'envoi du push USSD";throw new Error(B)}}else throw new Error("Erreur lors de la cr√©ation de la facture E-Billing")}catch(r){throw console.error("Erreur E-Billing:",r),r}},oe=async()=>{try{let r;if(F.value)r=F.value,console.log("‚ôªÔ∏è R√©utilisation de la commande existante:",r.reference);else{const g={event_slug:d.value.slug,ticket_type_id:a.value.ticketTypeId,quantity:a.value.quantity,guest_name:h.value?S.value.name:a.value.guestName,guest_phone:h.value?S.value.phone:a.value.guestPhone||null,guest_email:h.value?S.value.email:"guest@primea.ga"},b=h.value?await me.createOrder(g):await ce.createGuestOrder(g);if(!b.data.success)throw new Error(b.data.message||"Erreur lors de la cr√©ation de l'achat");r=b.data.data.order,F.value=r,console.log("‚úÖ Nouvelle commande cr√©√©e:",r.reference)}const u={order_id:r.id,gateway:"ORABANK_NG",amount:z.value},m=await(await fetch("/api/v1/payments/initiate",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(u)})).json();if(m.success&&m.data?.redirect_url)window.location.href=m.data.redirect_url;else throw new Error(m.message||"Erreur lors de l'initiation du paiement Visa/Mastercard")}catch(r){throw console.error("Erreur ORABANK:",r),r}},re=r=>{O.value=!0,T.value=90,I.value="pending",x.value=r,H(),K(r.payment_id)},H=()=>{w.value&&clearInterval(w.value),w.value=setInterval(()=>{T.value--,T.value<=0&&(clearInterval(w.value),clearInterval(_.value),I.value="expired")},1e3)},K=r=>{_.value&&clearInterval(_.value),_.value=setInterval(async()=>{try{const u=await fetch(`/api/v1/payments/${r}/status`,{headers:{Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`}});if(u.ok){const m=(await u.json()).data?.payment?.status;m==="success"||m==="successful"?(I.value="successful",clearInterval(_.value),clearInterval(w.value),setTimeout(()=>{e.push(`/ticket-success?reference=${x.value.reference}`)},2e3)):(m==="failed"||m==="cancelled"||m==="expired")&&(I.value=m,clearInterval(_.value),clearInterval(w.value),setTimeout(()=>{ne()},3e3))}}catch(u){console.error("Erreur lors de la v√©rification du statut:",u)}},3e3)},ne=()=>{O.value=!1,T.value=90,I.value="",x.value=null,F.value=null,w.value&&clearInterval(w.value),_.value&&clearInterval(_.value)},Se=async()=>{if(x.value)try{M.value=!0;const r=await fetch("/api/v1/payments/push-ussd",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("token")||""}`},body:JSON.stringify({payment_id:x.value.payment_id,phone:x.value.phone,gateway:x.value.gateway})});if(r.ok)T.value=90,I.value="pending",H(),K(x.value.payment_id);else{const u=await r.json();f.value=u.message||"Erreur lors du renvoi du push"}}catch{f.value="Erreur de connexion"}finally{M.value=!1}},Pe=()=>{if(!x.value?.payment_url||!x.value?.bill_id){console.error("URL de paiement manquante");return}const r=`${x.value.payment_url}?invoice=${x.value.bill_id}`;window.location.href=r},Ce=()=>{O.value=!1,T.value=90,I.value="",x.value=null,w.value&&clearInterval(w.value),_.value&&clearInterval(_.value),a.value.paymentMethod="",a.value.phoneNumber="",console.log("üîÑ Changement d'op√©rateur - Commande conserv√©e:",F.value?.reference)},Me=r=>{const u=Math.floor(r/60),y=r%60;return`${u}:${y.toString().padStart(2,"0")}`},Ee=r=>r?r.replace(/(\d{3})(\d{2})(\d{2})(\d{2})/,"$1 $2 $3 $4"):"";return Te(()=>{$(),h.value&&S.value&&(a.value.guestName=S.value.name||"",a.value.guestPhone=S.value.phone||"")}),Ae(()=>{E.value&&clearInterval(E.value),w.value&&clearInterval(w.value),_.value&&clearInterval(_.value)}),{isAuthenticated:h,currentUser:S,event:d,eventLoading:V,eventError:q,loading:M,error:f,phoneError:C,countdown:Q,orderForm:a,totalAmount:z,isFormValid:Y,formatEventDate:be,eventTime:pe,eventDate:D,isEventPassed:L,timeUntilEvent:W,availableTicketTypes:J,canPurchaseTickets:ye,formatPrice:xe,getAvailableQuantityText:ge,getCategoryName:fe,loadEvent:$,validatePhoneNumber:we,selectPaymentMethod:_e,processOrder:ke,ussdPushActive:O,ussdCountdown:T,paymentStatus:I,currentPayment:x,startUSSDPush:re,startUSSDCountdown:H,startPaymentPolling:K,cancelUSSDPush:ne,retryUSSDPush:Se,payViaWebPage:Pe,changeOperator:Ce,formatCountdown:Me,formatPhoneForDisplay:Ee,processEBillingPayment:te,processOrabankPayment:oe,eventImageUrl:ve,handleImageError:()=>{console.warn("Checkout - Erreur de chargement de l'image"),Z.value=!0}}}},Be={class:"checkout-page min-h-screen font-primea"},We={class:"hidden md:block bg-gray-50 min-h-screen"},Je={class:"container mx-auto px-4 py-12"},He={class:"max-w-4xl mx-auto"},Ke={key:0,class:"text-center py-8"},Xe={key:1,class:"text-center py-8"},Ge={class:"bg-red-50 border border-red-200 rounded-primea-xl p-8"},Qe={class:"text-red-600 mb-4"},Ze={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},Ye={class:"space-y-8"},$e={class:"bg-white rounded-primea-xl shadow-primea overflow-hidden"},et={class:"relative h-64"},tt=["src","alt"],ot={key:1,class:"w-full h-full bg-primea-gradient flex items-center justify-center"},rt={class:"absolute inset-0 p-6 text-white flex flex-col justify-end"},nt={class:"bg-primea-yellow text-primea-blue px-3 py-1 rounded-primea text-sm font-bold w-fit mb-2"},lt={class:"text-2xl font-bold mb-2"},st={class:"text-white/90"},at={class:"p-6"},it={class:"space-y-3"},dt={class:"flex items-center gap-3"},ut={class:"text-gray-700"},mt={class:"flex items-center gap-3"},ct={class:"text-gray-700"},vt={class:"bg-white rounded-primea-xl shadow-primea p-6"},bt={class:"text-lg font-bold text-primea-blue mb-4 text-center"},pt={key:0,class:"text-center"},yt={class:"bg-red-50 border border-red-200 rounded-primea-lg p-4"},xt={key:1,class:"flex justify-center space-x-2"},gt={key:0,class:"text-center bg-gray-100 border-2 border-primea-blue rounded-primea-lg p-4 min-w-[70px]"},ft={class:"text-2xl font-bold text-primea-blue"},ht={class:"text-center bg-gray-100 border-2 border-primea-blue rounded-primea-lg p-4 min-w-[70px]"},wt={class:"text-2xl font-bold text-primea-blue"},_t={class:"text-center bg-gray-100 border-2 border-primea-blue rounded-primea-lg p-4 min-w-[70px]"},kt={class:"text-2xl font-bold text-primea-blue"},St={class:"text-center bg-gray-100 border-2 border-primea-blue rounded-primea-lg p-4 min-w-[70px]"},Pt={class:"text-2xl font-bold text-primea-blue"},Ct={class:"bg-white rounded-primea-xl shadow-primea p-8"},Mt={class:"text-2xl font-bold text-primea-blue mb-6"},Et={key:0,class:"bg-red-50 border border-red-200 rounded-primea-lg p-6 text-center"},It=["disabled"],Ft=["value"],Nt={key:0,class:"text-sm text-red-600 mt-1"},Vt={key:0,class:"bg-primea-blue/5 rounded-primea-xl p-6 space-y-4"},qt={key:1,class:"bg-primea-blue/5 rounded-primea-xl p-6"},Tt={class:"flex justify-between items-center"},At={class:"text-3xl font-bold text-primea-blue"},jt={class:"grid grid-cols-3 gap-4 mb-6"},Ut={key:0},Dt=["for"],Rt=["id","placeholder"],Ot={key:0,class:"mt-2 text-sm text-red-600"},Lt={key:1,class:"mt-2 text-sm text-gray-500"},zt={key:1,class:"space-y-4"},Bt={class:"bg-blue-50 border border-blue-200 rounded-primea-lg p-4 text-center"},Wt=["disabled"],Jt={key:2,class:"bg-red-50 border-2 border-red-200 rounded-primea-lg p-4"},Ht={class:"text-red-600 text-sm"},Kt={key:3,class:"bg-blue-50 border-2 border-blue-200 rounded-primea-xl p-6"},Xt={class:"text-center"},Gt={key:0,class:"space-y-4"},Qt={class:"text-blue-700 mb-4"},Zt={class:"font-semibold"},Yt={class:"bg-white border border-blue-200 rounded-primea-lg p-4 mb-4"},$t={class:"text-3xl font-bold text-blue-600 mb-2"},eo={class:"w-full bg-blue-200 rounded-full h-2 mt-3"},to={class:"text-blue-600 text-sm mb-4"},oo={class:"font-semibold"},ro={class:"flex flex-col sm:flex-row gap-3 justify-center"},no=["disabled"],lo={key:0},so={key:1},ao=["disabled"],io={key:1,class:"space-y-4"},uo={key:2,class:"space-y-4"},mo={class:"text-red-700 mb-4"},co={class:"flex flex-col sm:flex-row gap-3 justify-center"},vo=["disabled"],bo={key:0,class:"flex items-center justify-center"},po={key:1},yo={class:"text-center pt-4"},xo={class:"md:hidden bg-white min-h-screen"},go={class:"max-w-md mx-auto"},fo={key:0,class:"flex justify-center py-12 px-4"},ho={key:1,class:"px-4"},wo={class:"bg-red-50 border border-red-200 rounded-xl p-6 text-center"},_o={class:"text-red-600 mb-4"},ko={key:2,class:"px-4 pb-24"},So={class:"bg-white rounded-xl shadow-md overflow-hidden mb-6"},Po={class:"relative h-48"},Co=["src","alt"],Mo={key:1,class:"w-full h-full bg-gradient-to-br from-blue-900 to-blue-800 flex items-center justify-center"},Eo={key:2,class:"absolute top-3 right-3 px-3 py-2 text-white"},Io={class:"text-right"},Fo={style:{"font-size":"14px","font-weight":"900","font-family":"Inter","word-wrap":"break-word","letter-spacing":"1px"}},No={class:"absolute bottom-0 left-0 right-0 p-4 text-white"},Vo={class:"text-lg font-bold"},qo={class:"flex items-center gap-1 text-sm text-white/90"},To={class:"flex items-center justify-between gap-1"},Ao={class:"flex items-center gap-1 text-sm text-white/90"},jo={key:0,class:"bg-red-50 border border-red-200 rounded-xl p-6 text-center mb-6"},Uo=["disabled"],Do=["value"],Ro={key:0,class:"bg-blue-50 rounded-xl p-4 space-y-4"},Oo={key:1,class:"bg-blue-50 rounded-xl p-4"},Lo={class:"flex justify-between items-center"},zo={class:"text-2xl font-bold text-blue-900"},Bo={class:"grid grid-cols-3 gap-3 mb-4"},Wo={key:0},Jo={class:"block text-sm font-semibold text-blue-900 mb-2"},Ho=["placeholder"],Ko={key:0,class:"mt-1 text-sm text-red-600"},Xo={key:1,class:"bg-blue-50 rounded-xl p-4 text-center"},Go={key:2,class:"bg-red-50 border-2 border-red-200 rounded-xl p-4"},Qo={class:"text-red-600 text-sm"},Zo={key:3,class:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6"},Yo={class:"text-center space-y-4"},$o={key:0},er={class:"text-blue-700 text-sm mb-4"},tr={class:"bg-white rounded-xl p-4 mb-4"},or={class:"text-2xl font-bold text-blue-600"},rr={class:"w-full bg-blue-200 rounded-full h-2 mt-3"},nr={class:"space-y-2"},lr=["disabled"],sr=["disabled"],ar={key:1},ir={key:2},dr={class:"text-red-700 text-sm mb-4"},ur={class:"space-y-2"},mr=["disabled"],cr={key:0,class:"flex items-center justify-center"},vr={key:1},br={class:"text-center pt-4"};function pr(X,e,G,t,h,S){const d=A("ExclamationCircleIcon"),V=A("PhotoIcon"),q=A("MapPinIcon"),M=A("ClockIcon"),f=A("router-link"),C=A("PhoneInput"),E=A("ArrowTopRightOnSquareIcon");return s(),l("div",Be,[o("div",We,[o("div",Je,[o("div",He,[e[75]||(e[75]=o("div",{class:"mb-12"},[o("div",{class:"text-center"},[o("h1",{class:"text-4xl font-bold text-primea-blue mb-4"},"Finaliser votre achat"),o("p",{class:"text-lg text-gray-600"},"S√©lectionnez vos tickets et proc√©dez au paiement")])],-1)),t.eventLoading?(s(),l("div",Ke,[...e[36]||(e[36]=[o("div",{class:"animate-spin rounded-full h-32 w-32 border-b-2 border-primea-blue mx-auto"},null,-1),o("p",{class:"mt-4 text-gray-600"},"Chargement de l'√©v√©nement...",-1)])])):t.eventError?(s(),l("div",Xe,[o("div",Ge,[v(d,{class:"w-16 h-16 text-red-500 mx-auto mb-4"}),e[37]||(e[37]=o("h3",{class:"text-lg font-semibold text-red-800 mb-2"},"Erreur de chargement",-1)),o("p",Qe,i(t.eventError),1),o("button",{onClick:e[0]||(e[0]=(...n)=>t.loadEvent&&t.loadEvent(...n)),class:"bg-primea-blue text-white px-6 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200"}," R√©essayer ")])])):t.event?(s(),l("div",Ze,[o("div",Ye,[o("div",$e,[o("div",et,[t.eventImageUrl?(s(),l("img",{key:0,src:t.eventImageUrl,alt:t.event.title,class:"w-full h-full object-cover",onError:e[1]||(e[1]=(...n)=>t.handleImageError&&t.handleImageError(...n))},null,40,tt)):(s(),l("div",ot,[v(V,{class:"w-24 h-24 text-white/50"})])),e[38]||(e[38]=o("div",{class:"absolute inset-0 bg-primea-blue/60"},null,-1)),o("div",rt,[o("div",nt,i(t.getCategoryName()),1),o("h2",lt,i(t.event?.title||"Chargement..."),1),o("p",st,i(t.formatEventDate),1)])]),o("div",at,[o("div",it,[o("div",dt,[v(q,{class:"w-5 h-5 text-primea-blue"}),o("span",ut,i(t.event?.venue_name||"Lieu √† confirmer"),1)]),o("div",mt,[v(M,{class:"w-5 h-5 text-primea-blue"}),o("span",ct,i(t.eventTime),1)])])])]),o("div",vt,[o("h3",bt,i(t.isEventPassed?"√âv√©nement termin√©":"Temps restant pour l'√©v√©nement"),1),t.isEventPassed?(s(),l("div",pt,[o("div",yt,[v(d,{class:"w-12 h-12 text-red-500 mx-auto mb-2"}),e[39]||(e[39]=o("p",{class:"text-red-600 font-semibold"},"Cet √©v√©nement est termin√©",-1)),e[40]||(e[40]=o("p",{class:"text-red-500 text-sm"},"Les tickets ne sont plus disponibles",-1))])])):(s(),l("div",xt,[t.countdown.days>0?(s(),l("div",gt,[o("div",ft,i(t.countdown.days),1),e[41]||(e[41]=o("div",{class:"text-xs text-gray-600"},"JOURS",-1))])):c("",!0),o("div",ht,[o("div",wt,i(t.countdown.hours),1),e[42]||(e[42]=o("div",{class:"text-xs text-gray-600"},"HEURES",-1))]),o("div",_t,[o("div",kt,i(t.countdown.minutes),1),e[43]||(e[43]=o("div",{class:"text-xs text-gray-600"},"MIN",-1))]),o("div",St,[o("div",Pt,i(t.countdown.seconds),1),e[44]||(e[44]=o("div",{class:"text-xs text-gray-600"},"SEC",-1))])]))])]),o("div",Ct,[o("h3",Mt,i(t.isEventPassed?"Achat impossible":"Votre achat"),1),t.isEventPassed?(s(),l("div",Et,[v(d,{class:"w-16 h-16 text-red-500 mx-auto mb-4"}),e[46]||(e[46]=o("h4",{class:"text-lg font-semibold text-red-800 mb-2"},"√âv√©nement termin√©",-1)),e[47]||(e[47]=o("p",{class:"text-red-600 mb-4"},"Cet √©v√©nement s'est d√©j√† d√©roul√©. Il n'est plus possible d'acheter des tickets.",-1)),v(f,{to:"/events",class:"bg-primea-blue text-white px-6 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200"},{default:R(()=>[...e[45]||(e[45]=[P(" Voir d'autres √©v√©nements ",-1)])]),_:1})])):c("",!0),t.isEventPassed?c("",!0):(s(),l("form",{key:1,onSubmit:e[17]||(e[17]=le((...n)=>t.processOrder&&t.processOrder(...n),["prevent"])),class:"space-y-6"},[o("div",null,[e[48]||(e[48]=o("label",{class:"block text-sm font-semibold text-primea-blue mb-3"},"Nombre de tickets",-1)),N(o("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=n=>t.orderForm.quantity=n),min:"1",max:"10",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:border-primea-blue focus:outline-none transition-colors",required:""},null,512),[[j,t.orderForm.quantity]])]),o("div",null,[e[50]||(e[50]=o("label",{class:"block text-sm font-semibold text-primea-blue mb-3"},"Type de ticket",-1)),N(o("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>t.orderForm.ticketTypeId=n),class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:border-primea-blue focus:outline-none transition-colors appearance-none bg-white",required:"",disabled:t.eventLoading||t.availableTicketTypes.length===0},[e[49]||(e[49]=o("option",{value:""},"S√©lectionnez un type de ticket",-1)),(s(!0),l(ae,null,ie(t.availableTicketTypes,n=>(s(),l("option",{key:n.id,value:n.id},i(n.name)+" - "+i(t.formatPrice(n.price))+" FCFA ("+i(t.getAvailableQuantityText(n))+") ",9,Ft))),128))],8,It),[[se,t.orderForm.ticketTypeId]]),t.availableTicketTypes.length===0&&!t.eventLoading?(s(),l("div",Nt," Aucun ticket disponible pour cet √©v√©nement ")):c("",!0)]),t.isAuthenticated?c("",!0):(s(),l("div",Vt,[e[53]||(e[53]=o("h4",{class:"text-lg font-semibold text-primea-blue mb-4"},"Vos informations",-1)),o("div",null,[e[51]||(e[51]=o("label",{class:"block text-sm font-semibold text-primea-blue mb-2"},"Nom complet *",-1)),N(o("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=n=>t.orderForm.guestName=n),placeholder:"Votre nom complet",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:border-primea-blue focus:outline-none transition-colors",required:""},null,512),[[j,t.orderForm.guestName]])]),o("div",null,[e[52]||(e[52]=o("label",{class:"block text-sm font-semibold text-primea-blue mb-2"},"T√©l√©phone (optionnel)",-1)),v(C,{modelValue:t.orderForm.guestPhone,"onUpdate:modelValue":e[5]||(e[5]=n=>t.orderForm.guestPhone=n),id:"guest-phone",placeholder:"01 23 45 67",class:"w-full"},null,8,["modelValue"])])])),t.orderForm.quantity&&t.orderForm.ticketTypeId?(s(),l("div",qt,[o("div",Tt,[e[54]||(e[54]=o("span",{class:"text-lg font-semibold text-primea-blue"},"Total √† payer :",-1)),o("span",At,i(t.formatPrice(t.totalAmount))+" FCFA",1)])])):c("",!0),o("div",null,[e[63]||(e[63]=o("label",{class:"block text-sm font-semibold text-primea-blue mb-4"},"Moyen de paiement",-1)),o("div",jt,[o("button",{type:"button",onClick:e[6]||(e[6]=n=>t.selectPaymentMethod("airtel")),class:U(["p-4 rounded-primea-lg border-2 transition-all text-center flex flex-col items-center justify-center min-h-[80px]",t.orderForm.paymentMethod==="airtel"?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"])},[...e[55]||(e[55]=[o("img",{src:"/images/am.png",alt:"Airtel Money",class:"h-8 w-auto",onerror:"this.style.display='none'; this.nextElementSibling.style.display='block'"},null,-1),o("div",{class:"text-red-600 font-bold text-sm",style:{display:"none"}},"airtel money",-1)])],2),o("button",{type:"button",onClick:e[7]||(e[7]=n=>t.selectPaymentMethod("moov")),class:U(["p-4 rounded-primea-lg border-2 transition-all text-center flex flex-col items-center justify-center min-h-[80px]",t.orderForm.paymentMethod==="moov"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"])},[...e[56]||(e[56]=[o("img",{src:"/images/mm.png",alt:"Moov Money",class:"h-8 w-auto",onerror:"this.style.display='none'; this.nextElementSibling.style.display='block'"},null,-1),o("div",{class:"bg-orange-500 text-white px-2 py-1 rounded text-xs font-bold",style:{display:"none"}},"Moov Money",-1)])],2),o("button",{type:"button",onClick:e[8]||(e[8]=n=>t.selectPaymentMethod("visa")),class:U(["p-4 rounded-primea-lg border-2 transition-all text-center flex flex-col items-center justify-center min-h-[80px]",t.orderForm.paymentMethod==="visa"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"])},[...e[57]||(e[57]=[o("img",{src:"/images/vm.png",alt:"Visa",class:"h-8 w-auto",onerror:"this.style.display='none'; this.nextElementSibling.style.display='block'"},null,-1),o("div",{class:"text-blue-600 font-bold text-sm",style:{display:"none"}},"VISA",-1)])],2)]),t.orderForm.paymentMethod==="airtel"||t.orderForm.paymentMethod==="moov"?(s(),l("div",Ut,[o("label",{for:`payment-${t.orderForm.paymentMethod}`,class:"block text-sm font-semibold text-primea-blue mb-2"}," Num√©ro "+i(t.orderForm.paymentMethod==="airtel"?"Airtel Money":"Moov Money"),9,Dt),N(o("input",{id:`payment-${t.orderForm.paymentMethod}`,type:"tel","onUpdate:modelValue":e[9]||(e[9]=n=>t.orderForm.phoneNumber=n),placeholder:t.orderForm.paymentMethod==="airtel"?"074123456":"062123456",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:border-primea-blue focus:outline-none transition-colors font-primea",maxlength:9,pattern:"[0-9]{9}",required:"",onInput:e[10]||(e[10]=(...n)=>t.validatePhoneNumber&&t.validatePhoneNumber(...n))},null,40,Rt),[[j,t.orderForm.phoneNumber]]),t.phoneError?(s(),l("p",Ot,i(t.phoneError),1)):(s(),l("p",Lt,i(t.orderForm.paymentMethod==="airtel"?"Format: 074xxxxxx, 076xxxxxx ou 077xxxxxx":"Format: 060xxxxxx, 062xxxxxx, 065xxxxxx ou 066xxxxxx"),1))])):c("",!0),t.orderForm.paymentMethod==="visa"?(s(),l("div",zt,[o("div",Bt,[e[60]||(e[60]=o("p",{class:"text-blue-800 mb-4 font-semibold"},"Paiement Visa s√©curis√©",-1)),e[61]||(e[61]=o("p",{class:"text-blue-600 text-sm mb-4"},"Vous allez √™tre redirig√© vers notre partenaire de paiement s√©curis√©",-1)),o("button",{type:"submit",disabled:t.loading||!t.isFormValid,class:"bg-blue-600 text-white px-6 py-3 rounded-primea-lg font-semibold hover:bg-blue-700 transition-all duration-200 flex items-center justify-center gap-2 mx-auto disabled:opacity-50 disabled:cursor-not-allowed"},[e[58]||(e[58]=o("img",{src:"/images/visa-logo.png",alt:"Visa",class:"h-6 w-auto",onerror:"this.style.display='none'"},null,-1)),e[59]||(e[59]=P(" Proc√©der au paiement Visa ",-1)),v(E,{class:"w-4 h-4"})],8,Wt),e[62]||(e[62]=o("p",{class:"text-xs text-gray-500 mt-2"},"Paiement 100% s√©curis√© avec chiffrement SSL",-1))])])):c("",!0)]),t.error?(s(),l("div",Jt,[o("p",Ht,i(t.error),1)])):c("",!0),t.ussdPushActive?(s(),l("div",Kt,[o("div",Xt,[t.paymentStatus==="pending"?(s(),l("div",Gt,[e[68]||(e[68]=o("div",{class:"flex items-center justify-center mb-4"},[o("div",{class:"w-16 h-16 border-4 border-blue-300 border-t-blue-600 rounded-full animate-spin"})],-1)),e[69]||(e[69]=o("h4",{class:"text-xl font-bold text-blue-800 mb-2"},"Push envoy√© !",-1)),o("p",Qt,[e[64]||(e[64]=P(" Un push USSD a √©t√© envoy√© au num√©ro ",-1)),o("span",Zt,i(t.formatPhoneForDisplay(t.currentPayment?.phone)),1),e[65]||(e[65]=P(". Veuillez valider le paiement sur votre t√©l√©phone. ",-1))]),o("div",Yt,[o("div",$t,i(t.formatCountdown(t.ussdCountdown)),1),e[66]||(e[66]=o("div",{class:"text-sm text-blue-500"},"Temps restant pour valider",-1)),o("div",eo,[o("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-1000",style:de({width:t.ussdCountdown/90*100+"%"})},null,4)])]),o("p",to,[e[67]||(e[67]=P(" Montant: ",-1)),o("span",oo,i(t.formatPrice(t.totalAmount))+" FCFA",1)]),o("div",ro,[o("button",{onClick:e[11]||(e[11]=(...n)=>t.retryUSSDPush&&t.retryUSSDPush(...n)),disabled:t.loading||t.ussdCountdown>0,class:"bg-blue-600 text-white px-4 py-2 rounded-primea hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[t.loading?(s(),l("span",lo,"Envoi...")):(s(),l("span",so,"Renvoyer le push"))],8,no),t.currentPayment.payment_url&&t.currentPayment.bill_id?(s(),l("button",{key:0,onClick:e[12]||(e[12]=(...n)=>t.payViaWebPage&&t.payViaWebPage(...n)),class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-colors"}," Payer via page web ")):c("",!0),o("button",{onClick:e[13]||(e[13]=(...n)=>t.changeOperator&&t.changeOperator(...n)),disabled:t.ussdCountdown>0,class:"bg-gray-500 text-white px-4 py-2 rounded-primea hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Changer d'op√©rateur ",8,ao),o("button",{onClick:e[14]||(e[14]=(...n)=>t.cancelUSSDPush&&t.cancelUSSDPush(...n)),class:"bg-red-500 text-white px-4 py-2 rounded-primea hover:bg-red-600 transition-colors"}," Annuler ")])])):t.paymentStatus==="successful"?(s(),l("div",io,[...e[70]||(e[70]=[ue('<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-0eac2d70><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0eac2d70><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-0eac2d70></path></svg></div><h4 class="text-xl font-bold text-green-800 mb-2" data-v-0eac2d70>Paiement r√©ussi !</h4><p class="text-green-700 mb-4" data-v-0eac2d70>Votre paiement a √©t√© valid√© avec succ√®s.</p><p class="text-green-600 text-sm" data-v-0eac2d70>Redirection en cours vers votre ticket...</p>',4)])])):t.paymentStatus==="failed"||t.paymentStatus==="cancelled"||t.paymentStatus==="expired"?(s(),l("div",uo,[e[71]||(e[71]=o("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[o("svg",{class:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[72]||(e[72]=o("h4",{class:"text-xl font-bold text-red-800 mb-2"},"Paiement √©chou√©",-1)),o("p",mo,i(t.paymentStatus==="cancelled"?"Le paiement a √©t√© annul√©.":t.paymentStatus==="expired"?"Le d√©lai de paiement a expir√©.":"Le paiement a √©chou√©. Veuillez r√©essayer."),1),o("div",co,[o("button",{onClick:e[15]||(e[15]=(...n)=>t.retryUSSDPush&&t.retryUSSDPush(...n)),class:"bg-blue-600 text-white px-4 py-2 rounded-primea hover:bg-blue-700 transition-colors"}," R√©essayer "),o("button",{onClick:e[16]||(e[16]=(...n)=>t.changeOperator&&t.changeOperator(...n)),class:"bg-gray-500 text-white px-4 py-2 rounded-primea hover:bg-gray-600 transition-colors"}," Changer d'op√©rateur ")])])):c("",!0)])])):c("",!0),t.ussdPushActive?c("",!0):(s(),l("button",{key:4,type:"submit",disabled:t.loading||!t.isFormValid,class:"w-full bg-primea-blue text-white py-4 px-6 rounded-primea-lg text-lg font-bold hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 shadow-primea-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",style:{"background-color":"#272d63"}},[t.loading?(s(),l("span",bo,[...e[73]||(e[73]=[o("svg",{class:"w-6 h-6 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),o("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",class:"opacity-75"})],-1),P(" Traitement en cours... ",-1)])])):(s(),l("span",po,"Finaliser le paiement"))],8,vo)),o("div",yo,[v(f,{to:"/retrieve-ticket",class:"text-primea-blue hover:text-primea-yellow transition-colors underline"},{default:R(()=>[...e[74]||(e[74]=[P(" R√©cup√©rer mon ticket perdu ",-1)])]),_:1})])],32))])])):c("",!0)])])]),o("div",xo,[o("div",go,[t.eventLoading?(s(),l("div",fo,[...e[76]||(e[76]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-blue-900 border-t-yellow-500"},null,-1)])])):t.eventError?(s(),l("div",ho,[o("div",wo,[v(d,{class:"w-12 h-12 text-red-500 mx-auto mb-3"}),o("p",_o,i(t.eventError),1),o("button",{onClick:e[18]||(e[18]=(...n)=>t.loadEvent&&t.loadEvent(...n)),class:"bg-blue-900 text-white px-6 py-2 rounded-lg font-semibold"}," R√©essayer ")])])):t.event?(s(),l("div",ko,[o("div",So,[o("div",Po,[t.eventImageUrl?(s(),l("img",{key:0,src:t.eventImageUrl,alt:t.event.title,class:"w-full h-full object-cover",onError:e[19]||(e[19]=(...n)=>t.handleImageError&&t.handleImageError(...n))},null,40,Co)):(s(),l("div",Mo,[v(V,{class:"w-16 h-16 text-white/30"})])),e[80]||(e[80]=o("div",{class:"absolute inset-0 bg-blue-900/50"},null,-1)),t.isEventPassed?c("",!0):(s(),l("div",Eo,[o("div",Io,[e[77]||(e[77]=o("div",{style:{"font-size":"9px","font-weight":"900","margin-bottom":"2px"}},"Compte √† rebours",-1)),o("div",Fo,i(String(t.countdown.days).padStart(2,"0"))+" : "+i(String(t.countdown.hours).padStart(2,"0"))+" : "+i(String(t.countdown.minutes).padStart(2,"0"))+" : "+i(String(t.countdown.seconds).padStart(2,"0")),1),e[78]||(e[78]=o("div",{style:{"font-size":"7px","font-weight":"400","font-family":"monospace","word-wrap":"break-word","margin-top":"2px","letter-spacing":"0.5px"}}," JOUR(S) HRS MIN SEC ",-1))])])),o("div",No,[o("h2",Vo,i(t.event.title),1),o("div",qo,[v(M,{class:"w-4 h-4"}),o("span",null,i(t.formatEventDate),1)]),o("div",To,[o("div",Ao,[v(q,{class:"w-4 h-4"}),o("span",null,i(t.event.venue_name||"Lieu √† confirmer"),1)]),v(f,{to:`/events/${t.event.slug}`,class:"bg-yellow-500 text-blue-900 px-3 py-1.5 rounded-lg text-xs font-semibold hover:bg-yellow-400 transition-colors shadow-md"},{default:R(()=>[...e[79]||(e[79]=[P(" √Ä propos ",-1)])]),_:1},8,["to"])])])])]),t.isEventPassed?(s(),l("div",jo,[v(d,{class:"w-12 h-12 text-red-500 mx-auto mb-3"}),e[82]||(e[82]=o("h3",{class:"text-lg font-semibold text-red-800 mb-2"},"√âv√©nement termin√©",-1)),e[83]||(e[83]=o("p",{class:"text-red-600 text-sm mb-4"},"Cet √©v√©nement s'est d√©j√† d√©roul√©.",-1)),v(f,{to:"/events",class:"bg-blue-900 text-white px-6 py-2 rounded-lg inline-block"},{default:R(()=>[...e[81]||(e[81]=[P(" Voir d'autres √©v√©nements ",-1)])]),_:1})])):c("",!0),t.isEventPassed?c("",!0):(s(),l("form",{key:1,onSubmit:e[35]||(e[35]=le((...n)=>t.processOrder&&t.processOrder(...n),["prevent"])),class:"space-y-5 w-[76%] mx-auto"},[o("div",null,[e[85]||(e[85]=o("label",{class:"block text-sm font-semibold text-blue-900 mb-2"},"Type de ticket",-1)),N(o("select",{"onUpdate:modelValue":e[20]||(e[20]=n=>t.orderForm.ticketTypeId=n),required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-900 focus:outline-none bg-white text-base",disabled:t.availableTicketTypes.length===0},[e[84]||(e[84]=o("option",{value:""},"S√©lectionnez un type",-1)),(s(!0),l(ae,null,ie(t.availableTicketTypes,n=>(s(),l("option",{key:n.id,value:n.id},i(n.name)+" - "+i(t.formatPrice(n.price))+" XAF ",9,Do))),128))],8,Uo),[[se,t.orderForm.ticketTypeId]])]),o("div",null,[e[86]||(e[86]=o("label",{class:"block text-sm font-semibold text-blue-900 mb-2"},"Nombre de tickets",-1)),N(o("input",{type:"number","onUpdate:modelValue":e[21]||(e[21]=n=>t.orderForm.quantity=n),min:"1",max:"10",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-900 focus:outline-none text-base"},null,512),[[j,t.orderForm.quantity]])]),t.isAuthenticated?c("",!0):(s(),l("div",Ro,[e[89]||(e[89]=o("h4",{class:"text-sm font-semibold text-blue-900"},"Vos informations",-1)),o("div",null,[e[87]||(e[87]=o("label",{class:"block text-sm font-semibold text-blue-900 mb-2"},"Nom complet *",-1)),N(o("input",{type:"text","onUpdate:modelValue":e[22]||(e[22]=n=>t.orderForm.guestName=n),placeholder:"Votre nom",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-900 focus:outline-none text-base"},null,512),[[j,t.orderForm.guestName]])]),o("div",null,[e[88]||(e[88]=o("label",{class:"block text-sm font-semibold text-blue-900 mb-2"},"T√©l√©phone",-1)),v(C,{modelValue:t.orderForm.guestPhone,"onUpdate:modelValue":e[23]||(e[23]=n=>t.orderForm.guestPhone=n),placeholder:"01 23 45 67",class:"w-full"},null,8,["modelValue"])])])),t.orderForm.quantity&&t.orderForm.ticketTypeId?(s(),l("div",Oo,[o("div",Lo,[e[90]||(e[90]=o("span",{class:"font-semibold text-blue-900"},"Total:",-1)),o("span",zo,i(t.formatPrice(t.totalAmount))+" XAF",1)])])):c("",!0),o("div",null,[e[95]||(e[95]=o("label",{class:"block text-sm font-semibold text-blue-900 mb-3"},"Moyen de paiement",-1)),o("div",Bo,[o("button",{type:"button",onClick:e[24]||(e[24]=n=>t.selectPaymentMethod("airtel")),class:U(["p-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center",t.orderForm.paymentMethod==="airtel"?"border-red-500 bg-red-50":"border-gray-200"])},[...e[91]||(e[91]=[o("img",{src:"/images/am.png",alt:"Airtel",class:"h-8 w-auto",onerror:"this.style.display='none'"},null,-1),o("span",{class:"text-xs mt-1 font-semibold text-red-600"},"Airtel",-1)])],2),o("button",{type:"button",onClick:e[25]||(e[25]=n=>t.selectPaymentMethod("moov")),class:U(["p-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center",t.orderForm.paymentMethod==="moov"?"border-orange-500 bg-orange-50":"border-gray-200"])},[...e[92]||(e[92]=[o("img",{src:"/images/mm.png",alt:"Moov",class:"h-8 w-auto",onerror:"this.style.display='none'"},null,-1),o("span",{class:"text-xs mt-1 font-semibold text-orange-600"},"Moov",-1)])],2),o("button",{type:"button",onClick:e[26]||(e[26]=n=>t.selectPaymentMethod("visa")),class:U(["p-3 rounded-xl border-2 transition-all flex flex-col items-center justify-center",t.orderForm.paymentMethod==="visa"?"border-blue-500 bg-blue-50":"border-gray-200"])},[...e[93]||(e[93]=[o("img",{src:"/images/vm.png",alt:"Visa",class:"h-8 w-auto",onerror:"this.style.display='none'"},null,-1),o("span",{class:"text-xs mt-1 font-semibold text-blue-600"},"Visa",-1)])],2)]),t.orderForm.paymentMethod==="airtel"||t.orderForm.paymentMethod==="moov"?(s(),l("div",Wo,[o("label",Jo," Num√©ro "+i(t.orderForm.paymentMethod==="airtel"?"Airtel Money":"Moov Money"),1),N(o("input",{type:"tel","onUpdate:modelValue":e[27]||(e[27]=n=>t.orderForm.phoneNumber=n),required:"",maxlength:"9",pattern:"[0-9]{9}",placeholder:t.orderForm.paymentMethod==="airtel"?"074123456":"062123456",onInput:e[28]||(e[28]=(...n)=>t.validatePhoneNumber&&t.validatePhoneNumber(...n)),class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-blue-900 focus:outline-none text-base"},null,40,Ho),[[j,t.orderForm.phoneNumber]]),t.phoneError?(s(),l("p",Ko,i(t.phoneError),1)):c("",!0)])):c("",!0),t.orderForm.paymentMethod==="visa"?(s(),l("div",Xo,[...e[94]||(e[94]=[o("p",{class:"text-blue-800 font-semibold mb-2"},"Paiement Visa s√©curis√©",-1),o("p",{class:"text-blue-600 text-xs"},"Vous serez redirig√© vers notre partenaire de paiement",-1)])])):c("",!0)]),t.error?(s(),l("div",Go,[o("p",Qo,i(t.error),1)])):c("",!0),t.ussdPushActive?(s(),l("div",Zo,[o("div",Yo,[t.paymentStatus==="pending"?(s(),l("div",$o,[e[97]||(e[97]=o("div",{class:"w-12 h-12 border-4 border-blue-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"},null,-1)),e[98]||(e[98]=o("h4",{class:"text-lg font-bold text-blue-800 mb-2"},"Push envoy√© !",-1)),o("p",er," Validez le paiement sur votre t√©l√©phone au "+i(t.formatPhoneForDisplay(t.currentPayment?.phone)),1),o("div",tr,[o("div",or,i(t.formatCountdown(t.ussdCountdown)),1),e[96]||(e[96]=o("div",{class:"text-xs text-blue-500 mt-1"},"Temps restant",-1)),o("div",rr,[o("div",{class:"bg-blue-600 h-2 rounded-full transition-all",style:de({width:t.ussdCountdown/90*100+"%"})},null,4)])]),o("div",nr,[o("button",{onClick:e[29]||(e[29]=(...n)=>t.retryUSSDPush&&t.retryUSSDPush(...n)),disabled:t.loading||t.ussdCountdown>0,class:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold disabled:opacity-50"}," Renvoyer le push ",8,lr),t.currentPayment.payment_url?(s(),l("button",{key:0,onClick:e[30]||(e[30]=(...n)=>t.payViaWebPage&&t.payViaWebPage(...n)),class:"w-full bg-green-600 text-white px-4 py-3 rounded-lg font-semibold"}," Payer via page web ")):c("",!0),o("button",{onClick:e[31]||(e[31]=(...n)=>t.changeOperator&&t.changeOperator(...n)),disabled:t.ussdCountdown>0,class:"w-full bg-gray-500 text-white px-4 py-3 rounded-lg font-semibold disabled:opacity-50"}," Changer d'op√©rateur ",8,sr),o("button",{onClick:e[32]||(e[32]=(...n)=>t.cancelUSSDPush&&t.cancelUSSDPush(...n)),class:"w-full bg-red-500 text-white px-4 py-3 rounded-lg font-semibold"}," Annuler ")])])):t.paymentStatus==="successful"?(s(),l("div",ar,[...e[99]||(e[99]=[ue('<div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4" data-v-0eac2d70><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0eac2d70><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-0eac2d70></path></svg></div><h4 class="text-lg font-bold text-green-800 mb-2" data-v-0eac2d70>Paiement r√©ussi !</h4><p class="text-green-700 text-sm" data-v-0eac2d70>Redirection en cours...</p>',3)])])):t.paymentStatus==="failed"||t.paymentStatus==="cancelled"||t.paymentStatus==="expired"?(s(),l("div",ir,[e[100]||(e[100]=o("div",{class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[o("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),e[101]||(e[101]=o("h4",{class:"text-lg font-bold text-red-800 mb-2"},"Paiement √©chou√©",-1)),o("p",dr,i(t.paymentStatus==="cancelled"?"Paiement annul√©":t.paymentStatus==="expired"?"D√©lai expir√©":"Veuillez r√©essayer"),1),o("div",ur,[o("button",{onClick:e[33]||(e[33]=(...n)=>t.retryUSSDPush&&t.retryUSSDPush(...n)),class:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg font-semibold"}," R√©essayer "),o("button",{onClick:e[34]||(e[34]=(...n)=>t.changeOperator&&t.changeOperator(...n)),class:"w-full bg-gray-500 text-white px-4 py-3 rounded-lg font-semibold"}," Changer d'op√©rateur ")])])):c("",!0)])])):c("",!0),t.ussdPushActive?c("",!0):(s(),l("button",{key:4,type:"submit",disabled:t.loading||!t.isFormValid,class:"w-full bg-blue-900 text-white py-4 px-6 rounded-xl text-base font-bold hover:bg-yellow-500 hover:text-blue-900 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"},[t.loading?(s(),l("span",cr,[...e[102]||(e[102]=[o("svg",{class:"w-5 h-5 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24"},[o("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),o("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",class:"opacity-75"})],-1),P(" Traitement... ",-1)])])):(s(),l("span",vr,"Finaliser le paiement"))],8,mr)),o("div",br,[v(f,{to:"/retrieve-ticket",class:"text-blue-900 hover:text-yellow-500 text-sm font-semibold"},{default:R(()=>[...e[103]||(e[103]=[P(" R√©cup√©rer mon ticket perdu ",-1)])]),_:1})])],32))])):c("",!0)])])])}const _r=Re(ze,[["render",pr],["__scopeId","data-v-0eac2d70"]]);export{_r as default};
