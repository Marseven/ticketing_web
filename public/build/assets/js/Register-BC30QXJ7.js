import{b as c,d as f,e,j as y,i as V,f as m,A as a,v as b,g as x,q as h,a1 as k,t as X,h as _,r as g,o as q,N as C}from"./vue-vendor-DL4qlPdi.js";import{_ as z,P as A,u as M,c as j}from"./account-UXvY6J1o.js";import"./vendor-14XLBY50.js";import"./pinia-vendor-DSZd9EMP.js";const L={name:"Register",components:{PhoneInput:A},setup(){const d=C(),o=M(),p=g(!1),s=g(""),r=g({name:"",email:"",phone:"",phone_confirmation:"",password:"",password_confirmation:"",terms:!1});return q(()=>{if(o.isAuthenticated&&o.user)switch(o.user.access_level||"client"){case"admin":d.push("/admin/dashboard");break;case"organizer":d.push("/organizer/dashboard");break;default:d.push("/")}}),{form:r,loading:p,error:s,register:async()=>{if(s.value="",!r.value.name||r.value.name.trim().length<2){s.value="Le nom complet doit contenir au moins 2 caractères";return}if(!r.value.phone){s.value="Le numéro de téléphone est obligatoire";return}if(!r.value.phone_confirmation){s.value="La confirmation du numéro de téléphone est obligatoire";return}if(r.value.phone!==r.value.phone_confirmation){s.value="Les numéros de téléphone ne correspondent pas";return}if(!r.value.password||r.value.password.length<8){s.value="Le mot de passe doit contenir au moins 8 caractères";return}if(r.value.password!==r.value.password_confirmation){s.value="Les mots de passe ne correspondent pas";return}if(!r.value.terms){s.value="Vous devez accepter les conditions d'utilisation";return}p.value=!0;try{const l={name:r.value.name,email:r.value.email||void 0,phone:r.value.phone,password:r.value.password,password_confirmation:r.value.password_confirmation};(await j.register(l)).data.email_verification_required?d.push({name:"email-verification"}):d.push({name:"login",query:{message:"Inscription réussie ! Vous pouvez maintenant vous connecter."}})}catch(l){if(console.error("Erreur d'inscription:",l),l.response){const i=l.response.status,t=l.response.data;if(i===422)if(t.errors){const n=t.errors,u=[];if(n.name&&u.push(`Nom: ${n.name[0]}`),n.email&&u.push(`Email: ${n.email[0]}`),n.phone&&u.push(`Téléphone: ${n.phone[0]}`),n.password&&u.push(`Mot de passe: ${n.password[0]}`),u.length>0)s.value=u.join(" • ");else{const v=Object.values(n)[0];s.value=Array.isArray(v)?v[0]:v}}else t.message?s.value=t.message:s.value="Données invalides. Veuillez vérifier vos informations.";else i===409?s.value=t.message||"Cet email ou ce numéro de téléphone est déjà utilisé":i===429?s.value="Trop de tentatives. Veuillez réessayer dans quelques minutes.":i>=500?s.value="Erreur du serveur. Veuillez réessayer plus tard.":s.value=t.message||"Une erreur est survenue lors de l'inscription"}else l.request?s.value="Impossible de se connecter au serveur. Vérifiez votre connexion internet.":s.value=l.message||"Une erreur est survenue. Veuillez réessayer."}finally{p.value=!1}}}}},U={class:"register-page relative overflow-hidden min-h-screen bg-white md:bg-transparent"},D={class:"relative z-10 min-h-screen md:flex md:items-center md:justify-center px-4 py-8 md:py-12"},N={class:"max-w-md w-full mx-auto"},I={class:"bg-white md:bg-white/95 md:backdrop-blur-sm rounded-2xl md:rounded-3xl shadow-lg md:shadow-2xl p-6 md:p-8"},B={class:"flex items-start pt-2"},S={key:0,class:"bg-red-50 border-2 border-red-200 rounded-xl p-4"},E={class:"text-red-600 text-sm font-medium"},P=["disabled"],G={key:0,class:"flex items-center justify-center"},H={key:1},T={class:"text-center pt-4"},R={class:"text-sm text-gray-600"};function J(d,o,p,s,r,w){const l=h("PhoneInput"),i=h("router-link");return f(),c("div",U,[o[21]||(o[21]=e("div",{class:"hidden md:block absolute inset-0"},[e("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Événements",class:"w-full h-full object-cover opacity-40"}),e("div",{class:"absolute inset-0 bg-blue-900/60"})],-1)),e("div",D,[e("div",N,[o[20]||(o[20]=e("div",{class:"hidden md:block text-center mb-8 animate-fade-in"},[e("img",{src:"/images/logo_white.png",alt:"Logo",class:"h-16 mx-auto mb-6"})],-1)),e("div",I,[o[19]||(o[19]=e("div",{class:"text-center mb-6 md:mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-blue-900 mb-2"}," Créer un compte "),e("p",{class:"text-gray-600 text-sm md:text-base"}," Pour suivre vos achats de tickets ")],-1)),e("form",{class:"space-y-4 md:space-y-5",onSubmit:o[7]||(o[7]=y((...t)=>s.register&&s.register(...t),["prevent"]))},[e("div",null,[o[8]||(o[8]=e("label",{for:"name",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Nom complet "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=t=>s.form.name=t),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Votre nom complet"},null,512),[[b,s.form.name]])]),e("div",null,[o[9]||(o[9]=e("label",{for:"email",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Adresse email "),e("span",{class:"text-gray-400 text-xs font-normal"},"(optionnel)")],-1)),m(e("input",{id:"email","onUpdate:modelValue":o[1]||(o[1]=t=>s.form.email=t),type:"email",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"votre@email.com"},null,512),[[b,s.form.email]])]),e("div",null,[o[10]||(o[10]=e("label",{for:"phone",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Numéro de téléphone "),e("span",{class:"text-red-500"},"*")],-1)),x(l,{id:"phone",modelValue:s.form.phone,"onUpdate:modelValue":o[2]||(o[2]=t=>s.form.phone=t),placeholder:"XX XX XX XX",required:!0,"default-country":"GA"},null,8,["modelValue"])]),e("div",null,[o[11]||(o[11]=e("label",{for:"phone_confirmation",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Confirmer le numéro de téléphone "),e("span",{class:"text-red-500"},"*")],-1)),x(l,{id:"phone_confirmation",modelValue:s.form.phone_confirmation,"onUpdate:modelValue":o[3]||(o[3]=t=>s.form.phone_confirmation=t),placeholder:"XX XX XX XX",required:!0,"default-country":"GA"},null,8,["modelValue"])]),e("div",null,[o[12]||(o[12]=e("label",{for:"password",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{id:"password","onUpdate:modelValue":o[4]||(o[4]=t=>s.form.password=t),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Votre mot de passe"},null,512),[[b,s.form.password]])]),e("div",null,[o[13]||(o[13]=e("label",{for:"password_confirmation",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Confirmer le mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{id:"password_confirmation","onUpdate:modelValue":o[5]||(o[5]=t=>s.form.password_confirmation=t),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Confirmer votre mot de passe"},null,512),[[b,s.form.password_confirmation]])]),o[18]||(o[18]=e("div",{class:"text-xs text-gray-500"},[e("span",{class:"text-red-500"},"*"),a(" Champs obligatoires ")],-1)),e("div",B,[m(e("input",{id:"terms","onUpdate:modelValue":o[6]||(o[6]=t=>s.form.terms=t),type:"checkbox",required:"",class:"h-4 w-4 mt-0.5 text-blue-900 focus:ring-yellow-500 border-gray-300 rounded flex-shrink-0"},null,512),[[k,s.form.terms]]),o[14]||(o[14]=e("label",{for:"terms",class:"ml-2 block text-sm text-gray-700"},[a(" J'accepte les "),e("a",{href:"#",class:"text-blue-900 hover:text-yellow-500 font-semibold transition-colors"},"conditions d'utilisation"),a(" et la "),e("a",{href:"#",class:"text-blue-900 hover:text-yellow-500 font-semibold transition-colors"},"politique de confidentialité"),e("span",{class:"text-red-500"},"*")],-1))]),s.error?(f(),c("div",S,[e("p",E,X(s.error),1)])):V("",!0),e("button",{type:"submit",disabled:s.loading,class:"w-full bg-blue-900 text-white py-4 px-6 rounded-xl text-base md:text-lg font-bold transition-all duration-200 shadow-lg hover:bg-yellow-500 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-900 disabled:hover:text-white transform hover:scale-105 disabled:transform-none"},[s.loading?(f(),c("span",G,[...o[15]||(o[15]=[e("svg",{class:"animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a(" Inscription en cours... ",-1)])])):(f(),c("span",H,"Créer mon compte"))],8,P),e("div",T,[e("p",R,[o[17]||(o[17]=a(" Vous avez déjà un compte ? ",-1)),x(i,{to:"/login",class:"text-blue-900 hover:text-yellow-500 font-bold transition-colors duration-200 ml-1"},{default:_(()=>[...o[16]||(o[16]=[a(" Se connecter ",-1)])]),_:1})])])],32)])])])])}const K=z(L,[["render",J],["__scopeId","data-v-ed4dfb52"]]);export{K as default};
