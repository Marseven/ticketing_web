import{b as A,Y as ee,d as te,Z as ne,j as n,o as i,k as e,t as u,a1 as C,l as _,a2 as re,a3 as ke,g as me,O as xe,w as K,a4 as ae,a as oe,y as ye,N as Ee,e as Ce,a5 as je,G as N,H as W,q as X,p as B,n as F,D as E,E as z,F as le,P as Se,X as De,_ as Ve,J as ge,K as _e,a6 as ve,R as be,T as he,a7 as Ae,L as Ue,a8 as ze,u as we,W as de,a9 as pe,$ as ce,C as Ie,S as Pe}from"./vue-vendor-CDZB1Wme.js";import{_ as ie,u as $e}from"./account-SYOFlVBk.js";import{a as ue,S as P}from"./vendor-BvANJOFB.js";const R=ue.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}});R.interceptors.request.use(w=>{const m=localStorage.getItem("auth_token")||localStorage.getItem("token");return m&&(w.headers.Authorization=`Bearer ${m}`),w.headers["X-Requested-With"]="XMLHttpRequest",w},w=>Promise.reject(w));R.interceptors.response.use(w=>w,w=>(console.log("Erreur API:",w.response?.status,w.response?.data),w.response?.status===401?(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"):w.response?.status===419&&console.error("CSRF token mismatch. Vérifiez la configuration Sanctum."),Promise.reject(w)));const ql={getTicket(w){return R.get(`/tickets/${w}`)},retrieveTickets(w){return R.get(`/tickets/retrieve/${w}`)},validateTicket(w,m="validate"){return R.post("/tickets/validate",{qr_code:w,action:m})},searchTickets(w){const{reference:m,phone:I,email:d}=w;return m?this.getTicket(m):d||I?new Promise((D,p)=>{setTimeout(()=>{d?.includes("test")||I?.includes("123")||m?.includes("TKT")?D({data:{tickets:[{id:1,code:"TKT-2024-ABC123",status:"issued",event:{id:1,title:"L'OISEAU RARE",slug:"oiseau-rare",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",venue_name:"Entre Nous Bar"},ticket_type:{id:1,name:"Standard",description:"Accès standard"},buyer:{name:"John Doe",email:d||"john@example.com"},issued_at:"27/07/2025 10:00:00",used_at:null,schedule:{starts_at:"27/07/2025 20:00:00",ends_at:"27/07/2025 23:00:00",door_time:"27/07/2025 19:30:00"}}]}}):p(new Error("Aucun ticket trouvé avec ces informations"))},1500)}):Promise.reject(new Error("Veuillez fournir au moins un critère de recherche"))}},Ll={createGuestOrder(w){return ue.post("/api/guest/orders",w,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestOrder(w){return ue.get(`/api/guest/orders/${w}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestTicket(w){return ue.get(`/api/guest/tickets/${w}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},retrieveGuestTickets(w){return ue.get(`/api/guest/tickets/retrieve/${encodeURIComponent(w)}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}},q={getDashboardStats(){return R.get("/organizer/dashboard/stats")},getRecentEvents(){return R.get("/organizer/events/recent")},getNotifications(){return R.get("/organizer/notifications")},getEvents(w={}){return R.get("/organizer/events",{params:w})},createEvent(w){return R.post("/organizer/events",w)},createEventWithFile(w){return R.post("/organizer/events",w,{headers:{"Content-Type":"multipart/form-data"}})},updateEvent(w,m){return R.put(`/organizer/events/${w}`,m)},updateEventWithFile(w,m){return m.append("_method","PUT"),R.post(`/organizer/events/${w}`,m,{headers:{"Content-Type":"multipart/form-data"}})},getEvent(w){return R.get(`/organizer/events/${w}`)},getEventStats(w){return R.get(`/organizer/events/${w}/stats`)},getBalance(){return R.get("/organizer/balances")},getPaymentHistory(){return R.get("/organizer/payouts")},requestPayout(w){return R.post("/organizer/payouts",w)},getProfile(){return R.get("/organizer/profile")},updateProfile(w){return R.put("/organizer/profile",w)},uploadAvatar(w){return R.post("/organizer/profile/avatar",w,{headers:{"Content-Type":"multipart/form-data"}})},getCategories(){return R.get("/categories")},getVenues(){return R.get("/venues")}},Te={class:"organizer-dashboard min-h-screen"},Be={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Re={class:"mb-8"},Fe={class:"flex items-center justify-between"},Me={class:"flex items-center space-x-4"},Oe={class:"text-right"},qe={class:"text-sm font-semibold text-primea-blue font-primea"},Le={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},Ne=["src","alt"],Xe={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},We={class:"text-lg font-bold font-primea"},He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ge={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},Je={class:"flex items-center"},Ke={class:"p-2 bg-primea-blue/10 rounded-lg"},Qe={class:"ml-4"},Ze={class:"text-2xl font-bold text-primea-blue font-primea"},Ye={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},et={class:"flex items-center"},tt={class:"p-2 bg-green-100 rounded-lg"},st={class:"ml-4"},rt={class:"text-2xl font-bold text-green-600 font-primea"},ot={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},at={class:"flex items-center"},nt={class:"p-2 bg-primea-yellow/10 rounded-lg"},it={class:"ml-4"},lt={class:"text-2xl font-bold text-primea-yellow font-primea"},dt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},ut={class:"flex items-center"},mt={class:"p-2 bg-purple-100 rounded-lg"},pt={class:"ml-4"},ct={class:"text-2xl font-bold text-purple-600 font-primea"},gt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},ft={class:"lg:col-span-2"},bt={class:"bg-white rounded-primea shadow-primea p-6"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt={class:"bg-white rounded-primea shadow-primea p-6"},yt={class:"space-y-4"},_t={key:0,class:"text-center text-gray-500 py-8"},ht={class:"text-sm font-medium font-primea"},wt={class:"text-xs text-gray-600 mt-1"},$t={class:"text-xs text-gray-400 mt-2"},kt={class:"bg-white rounded-primea shadow-primea overflow-hidden"},Et={class:"p-6 border-b border-gray-200"},Ct={class:"flex items-center justify-between"},jt={key:0,class:"p-8 text-center text-gray-500"},St={key:1,class:"overflow-x-auto"},Dt={class:"w-full"},Vt={class:"divide-y divide-gray-200"},At={class:"px-6 py-4"},Ut={class:"text-sm font-medium text-gray-900 font-primea"},zt={class:"text-sm text-gray-500"},It={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Pt={class:"px-6 py-4"},Tt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Bt={class:"px-6 py-4 text-sm"},Rt={__name:"OrganizerDashboard",setup(w){const m=$e(),I=A(!1),d=ee({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),D=A([]),p=A([]),v=te(()=>{const S=m.user;return S?.name?S.name.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2):"U"}),U=te(()=>m.user?.avatar_url||null),l=async()=>{I.value=!0;try{const[S,h,M]=await Promise.all([q.getDashboardStats(),q.getRecentEvents(),q.getNotifications()]);Object.assign(d,S.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),D.value=h.data.data||[],p.value=M.data.data||[]}catch(S){console.error("Erreur lors du chargement du dashboard:",S),Object.assign(d,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),D.value=[],p.value=[]}finally{I.value=!1}},b=S=>new Intl.NumberFormat("fr-FR").format(S),V=S=>new Date(S).toLocaleDateString("fr-FR"),c=S=>new Date(S).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=S=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[S]||S,H=S=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[S]||"bg-gray-100 text-gray-800",G=S=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[S]||"border-gray-300";return ne(()=>{l()}),(S,h)=>{const M=oe("router-link");return i(),n("div",Te,[e("div",Be,[e("div",Re,[e("div",Fe,[h[1]||(h[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",Me,[e("div",Oe,[h[0]||(h[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",qe,u(V(new Date)),1)]),U.value?(i(),n("div",Le,[e("img",{src:U.value,alt:C(m).user?.name,class:"w-full h-full object-cover"},null,8,Ne)])):(i(),n("div",Xe,[e("span",We,u(v.value),1)]))])])]),e("div",He,[e("div",Ge,[e("div",Je,[e("div",Ke,[_(C(re),{class:"w-6 h-6 text-primea-blue"})]),e("div",Qe,[h[2]||(h[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",Ze,u(d.total_events),1)])])]),e("div",Ye,[e("div",et,[e("div",tt,[_(C(ke),{class:"w-6 h-6 text-green-600"})]),e("div",st,[h[3]||(h[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",rt,u(d.active_events),1)])])]),e("div",ot,[e("div",at,[e("div",nt,[_(C(me),{class:"w-6 h-6 text-primea-yellow"})]),e("div",it,[h[4]||(h[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",lt,u(d.tickets_sold),1)])])]),e("div",dt,[e("div",ut,[e("div",mt,[_(C(xe),{class:"w-6 h-6 text-purple-600"})]),e("div",pt,[h[5]||(h[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",ct,u(b(d.total_revenue))+" XAF",1)])])])]),e("div",gt,[e("div",ft,[e("div",bt,[h[10]||(h[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",vt,[_(M,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:K(()=>[_(C(ae),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),h[6]||(h[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),_(M,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:K(()=>[_(C(ye),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),h[7]||(h[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),_(M,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:K(()=>[_(C(Ee),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),h[8]||(h[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),_(M,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:K(()=>[_(C(Ce),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),h[9]||(h[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",xt,[h[12]||(h[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",yt,[p.value.length===0?(i(),n("div",_t,[_(C(je),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),h[11]||(h[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(i(!0),n(N,{key:1},W(p.value,T=>(i(),n("div",{key:T.id,class:X(["p-3 bg-gray-50 rounded-primea border-l-4",G(T.type)])},[e("p",ht,u(T.title),1),e("p",wt,u(T.message),1),e("p",$t,u(c(T.created_at)),1)],2))),128))])])]),e("div",kt,[e("div",Et,[e("div",Ct,[h[14]||(h[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),_(M,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:K(()=>[...h[13]||(h[13]=[B(" Voir tous ",-1)])]),_:1})])]),D.value.length===0?(i(),n("div",jt,[_(C(re),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),h[16]||(h[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),h[17]||(h[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),_(M,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:K(()=>[_(C(ae),{class:"w-4 h-4 mr-2"}),h[15]||(h[15]=B(" Créer un événement ",-1))]),_:1})])):(i(),n("div",St,[e("table",Dt,[h[19]||(h[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",Vt,[(i(!0),n(N,null,W(D.value,T=>(i(),n("tr",{key:T.id,class:"hover:bg-gray-50"},[e("td",At,[e("div",null,[e("p",Ut,u(T.title),1),e("p",zt,u(T.venue_name),1)])]),e("td",It,u(V(T.event_date)),1),e("td",Pt,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",H(T.status)])},u(L(T.status)),3)]),e("td",Tt,u(T.tickets_sold||0),1),e("td",Bt,[_(M,{to:{name:"organizer-event-detail",params:{slug:T.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:K(()=>[...h[18]||(h[18]=[B(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},Ft=ie(Rt,[["__scopeId","data-v-1685f411"]]),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Mt={name:"OrganizerEvents",components:{PlusIcon:ae,CalendarIcon:re},setup(){const w=ge(),m=A(""),I=A(""),d=A("grid"),D=A(!1),p=A([]),v=ee({current:1,total:1,perPage:15}),U=async()=>{D.value=!0;try{const g=(await q.getEvents({page:v.current,status:I.value,search:m.value})).data.data.events;p.value=g.data.map(s=>({...s,tickets_sold:s.tickets?.filter(t=>["issued","used"].includes(t.status)).length||0,total_tickets:s.ticket_types?.reduce((t,r)=>t+r.capacity,0)||0,revenue:s.tickets?.filter(t=>["issued","used"].includes(t.status)).reduce((t,r)=>t+(r.ticket_type?.price||0),0)||0,venue:s.venue?.name||"",date:s.event_date||s.schedules?.[0]?.starts_at,isFavorite:!1})),v.current=g.current_page,v.total=g.last_page,v.perPage=g.per_page}catch(o){console.error("Erreur chargement événements:",o),P.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{D.value=!1}},l=te(()=>{let o=[...p.value];if(m.value){const g=m.value.toLowerCase();o=o.filter(s=>s.title.toLowerCase().includes(g)||s.venue.toLowerCase().includes(g))}return I.value&&(o=o.filter(g=>g.status===I.value)),o}),b=te(()=>{const o=p.value.filter(r=>r.is_active&&r.status!=="cancelled").length,g=p.value.filter(r=>!r.is_active).length,s=p.value.reduce((r,f)=>r+(f.tickets_sold||0),0),t=p.value.reduce((r,f)=>r+(f.revenue||0),0);return{published:o,draft:g,totalTicketsSold:s,totalRevenue:t}}),V=o=>new Intl.NumberFormat("fr-FR").format(o),c=(o,g="full")=>{const s=new Date(o);return g==="short"?s.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):s.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},L=o=>o.is_active?o.status==="cancelled"?"bg-red-100 text-red-800":new Date(o.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",H=o=>o.is_active?o.status==="cancelled"?"Annulé":new Date(o.date)<new Date?"Terminé":"Actif":"Brouillon",G=o=>{o.isFavorite=!o.isFavorite},S=async o=>{try{const g={title:`${o.title} (Copie)`,description:o.description,event_date:o.date,venue_id:o.venue_id,category_id:o.category_id,is_active:!1};await q.createEvent(g),await U(),P.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{P.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},h=o=>{w.push({name:"organizer-event-edit",params:{slug:o.slug}})},M=async o=>{if((await P.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${o.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await U(),P.fire("Supprimé !","L'événement a été supprimé.","success")}catch{P.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};Ve([m,I],()=>{v.current=1,U()},{debounce:300});const T=o=>{v.current=o,U()},Z=o=>{if(!o)return!1;const g=o.image_url||o.image||o.image_file;return g&&g.trim()!==""},Q=(o,g="400")=>{let s=o.image_url||o.image||o.image_file;return console.log("Image URL pour événement:",o.title,"URL brute:",s),s&&s.trim()!==""?s.startsWith("http://")||s.startsWith("https://")?(console.log("URL complète détectée:",s),s):s.startsWith("/")?(s=window.location.origin+s,console.log("URL construite depuis chemin relatif:",s),s):(s.includes("/")||(s=`${window.location.origin}/storage/images/events/${s}`,console.log("URL construite depuis nom de fichier:",s)),s):(console.log("Aucune image trouvée pour:",o.title),"")},Y=o=>{console.log("Erreur de chargement d'image:",o.target.src),o.target.style.display="none"},y=o=>{console.log("Image chargée avec succès:",o.target.src)};return ne(()=>{U()}),{searchQuery:m,statusFilter:I,viewMode:d,loading:D,events:p,filteredEvents:l,stats:b,pagination:v,formatPrice:V,formatEventDate:c,getStatusClass:L,getStatusText:H,toggleFavorite:G,duplicateEvent:S,editEvent:h,deleteEvent:M,loadEvents:U,changePage:T,hasEventImage:Z,getEventImageUrl:Q,handleImageError:Y,handleImageLoad:y}}},Ot={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},qt={class:"bg-white shadow-sm border-b border-gray-200"},Lt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Nt={class:"flex items-center justify-between"},Xt={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Wt={class:"bg-white rounded-lg shadow-md p-6 mb-8"},Ht={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},Gt={class:"flex items-center space-x-4"},Jt={class:"relative"},Kt={class:"flex items-center space-x-4"},Qt={class:"text-sm text-gray-600"},Zt={class:"flex bg-gray-100 rounded-lg p-1"},Yt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},es={class:"text-center"},ts={class:"text-2xl font-bold text-blue-600"},ss={class:"text-center"},rs={class:"text-2xl font-bold text-yellow-600"},os={class:"text-center"},as={class:"text-2xl font-bold text-green-600"},ns={class:"text-center"},is={class:"text-2xl font-bold text-purple-600"},ls={key:0},ds={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},us={class:"relative"},ms=["src","alt"],ps={key:1,class:"w-full h-48 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},cs={class:"absolute top-4 left-4"},gs={class:"absolute top-4 right-4"},fs=["onClick"],bs={class:"p-6"},vs={class:"text-lg font-bold text-gray-800 mb-2"},xs={class:"text-gray-600 text-sm mb-4"},ys={class:"flex items-center justify-between mb-4"},_s={class:"text-sm text-gray-600 font-primea"},hs={class:"font-medium font-primea"},ws={class:"text-sm font-bold text-green-600 font-primea"},$s={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},ks={class:"flex space-x-2"},Es=["onClick"],Cs={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},js={class:"w-full"},Ss={class:"bg-white divide-y divide-gray-200"},Ds={class:"px-6 py-4 whitespace-nowrap"},Vs={class:"flex items-center"},As=["src","alt"],Us={key:1,class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center rounded-lg mr-4"},zs={class:"text-sm font-medium text-gray-900"},Is={class:"text-sm text-gray-500"},Ps={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Ts={class:"px-6 py-4 whitespace-nowrap"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Rs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},Fs={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Ms=["onClick"],Os=["onClick"],qs={key:1,class:"text-center py-16"},Ls={class:"text-gray-600 mb-6"},Ns={key:0},Xs={key:1},Ws={key:2,class:"mt-8 flex justify-center"},Hs={class:"flex items-center space-x-2"},Gs=["disabled"],Js=["onClick"],Ks={key:1,class:"px-2 text-gray-500"},Qs=["disabled"];function Zs(w,m,I,d,D,p){const v=oe("PlusIcon"),U=oe("router-link"),l=oe("CalendarIcon");return i(),n("div",Ot,[e("div",qt,[e("div",Lt,[e("div",Nt,[m[11]||(m[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),_(U,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:K(()=>[_(v,{class:"w-4 h-4 inline mr-2"}),m[10]||(m[10]=B(" Nouvel événement ",-1))]),_:1})])])]),e("div",Xt,[e("div",Wt,[e("div",Ht,[e("div",Gt,[e("div",Jt,[m[12]||(m[12]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),E(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=b=>d.searchQuery=b),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[z,d.searchQuery]])]),E(e("select",{"onUpdate:modelValue":m[1]||(m[1]=b=>d.statusFilter=b),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...m[13]||(m[13]=[Se('<option value="" data-v-d66d4597>Tous les statuts</option><option value="draft" data-v-d66d4597>Brouillons</option><option value="published" data-v-d66d4597>Publiés</option><option value="completed" data-v-d66d4597>Terminés</option><option value="cancelled" data-v-d66d4597>Annulés</option>',5)])],512),[[le,d.statusFilter]])]),e("div",Kt,[e("div",Qt,u(d.filteredEvents.length)+" événement"+u(d.filteredEvents.length>1?"s":""),1),e("div",Zt,[e("button",{onClick:m[2]||(m[2]=b=>d.viewMode="grid"),class:X(["px-3 py-2 rounded-lg transition-colors",d.viewMode==="grid"?"bg-white shadow-sm":""])},[...m[14]||(m[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:m[3]||(m[3]=b=>d.viewMode="list"),class:X(["px-3 py-2 rounded-lg transition-colors",d.viewMode==="list"?"bg-white shadow-sm":""])},[...m[15]||(m[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",Yt,[e("div",es,[e("p",ts,u(d.stats.published),1),m[16]||(m[16]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",ss,[e("p",rs,u(d.stats.draft),1),m[17]||(m[17]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",os,[e("p",as,u(d.stats.totalTicketsSold),1),m[18]||(m[18]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",ns,[e("p",is,u(d.formatPrice(d.stats.totalRevenue))+" XAF",1),m[19]||(m[19]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),d.filteredEvents.length>0?(i(),n("div",ls,[d.viewMode==="grid"?(i(),n("div",ds,[(i(!0),n(N,null,W(d.filteredEvents,b=>(i(),n("div",{key:b.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",us,[d.hasEventImage(b)?(i(),n("img",{key:0,src:d.getEventImageUrl(b),alt:b.title,class:"w-full h-48 object-cover",onError:m[4]||(m[4]=(...V)=>d.handleImageError&&d.handleImageError(...V)),onLoad:m[5]||(m[5]=(...V)=>d.handleImageLoad&&d.handleImageLoad(...V))},null,40,ms)):(i(),n("div",ps,[_(l,{class:"w-16 h-16 text-gray-400"})])),e("div",cs,[e("span",{class:X(["px-3 py-1 rounded-full text-xs font-semibold",d.getStatusClass(b.status)])},u(d.getStatusText(b.status)),3)]),e("div",gs,[e("button",{onClick:V=>d.toggleFavorite(b),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(i(),n("svg",{class:X(["w-4 h-4",b.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...m[20]||(m[20]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,fs)])]),e("div",bs,[e("h3",vs,u(b.title),1),e("p",xs,u(d.formatEventDate(b.date)),1),e("div",ys,[e("div",_s,[e("span",hs,u(b.tickets_sold||0),1),B(" / "+u(b.total_tickets||0)+" tickets vendus ",1)]),e("div",ws,u(d.formatPrice(b.revenue||0))+" XAF ",1)]),e("div",$s,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:De({width:`${Math.min((b.ticketsSold||0)/(b.totalTickets||100)*100,100)}%`})},null,4)]),e("div",ks,[_(U,{to:{name:"organizer-event-detail",params:{slug:b.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:K(()=>[...m[21]||(m[21]=[B(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:V=>d.duplicateEvent(b),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,Es)])])]))),128))])):(i(),n("div",Cs,[e("table",js,[m[23]||(m[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ss,[(i(!0),n(N,null,W(d.filteredEvents,b=>(i(),n("tr",{key:b.id,class:"hover:bg-gray-50"},[e("td",Ds,[e("div",Vs,[d.hasEventImage(b)?(i(),n("img",{key:0,src:d.getEventImageUrl(b,"60"),alt:b.title,class:"w-12 h-12 object-cover rounded-lg mr-4",onError:m[6]||(m[6]=(...V)=>d.handleImageError&&d.handleImageError(...V)),onLoad:m[7]||(m[7]=(...V)=>d.handleImageLoad&&d.handleImageLoad(...V))},null,40,As)):(i(),n("div",Us,[_(l,{class:"w-6 h-6 text-gray-400"})])),e("div",null,[e("div",zs,u(b.title),1),e("div",Is,u(b.venue),1)])])]),e("td",Ps,u(d.formatEventDate(b.date,"short")),1),e("td",Ts,[e("span",{class:X(["px-2 py-1 rounded-full text-xs font-medium font-primea",d.getStatusClass(b)])},u(d.getStatusText(b)),3)]),e("td",Bs,u(b.tickets_sold||0)+" / "+u(b.total_tickets||0),1),e("td",Rs,u(d.formatPrice(b.revenue||0))+" XAF ",1),e("td",Fs,[_(U,{to:{name:"organizer-event-detail",params:{slug:b.slug}},class:"text-blue-600 hover:text-blue-900"},{default:K(()=>[...m[22]||(m[22]=[B(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:V=>d.editEvent(b),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,Ms),e("button",{onClick:V=>d.deleteEvent(b),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Os)])]))),128))])])]))])):(i(),n("div",qs,[m[25]||(m[25]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),m[26]||(m[26]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",Ls,[d.searchQuery||d.statusFilter?(i(),n("span",Ns," Aucun événement ne correspond à vos critères de recherche. ")):(i(),n("span",Xs," Commencez par créer votre premier événement ! "))]),_(U,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:K(()=>[...m[24]||(m[24]=[B(" + Créer mon premier événement ",-1)])]),_:1})])),d.events.length>0&&d.pagination.total>1?(i(),n("div",Ws,[e("nav",Hs,[e("button",{onClick:m[8]||(m[8]=b=>d.changePage(d.pagination.current-1)),disabled:d.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,Gs),(i(!0),n(N,null,W(d.pagination.total,b=>(i(),n(N,{key:b},[b===1||b===d.pagination.total||b>=d.pagination.current-1&&b<=d.pagination.current+1?(i(),n("button",{key:0,onClick:V=>d.changePage(b),class:X(["px-3 py-2 text-sm font-medium rounded-lg font-primea",b===d.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},u(b),11,Js)):b===d.pagination.current-2||b===d.pagination.current+2?(i(),n("span",Ks," ... ")):F("",!0)],64))),128)),e("button",{onClick:m[9]||(m[9]=b=>d.changePage(d.pagination.current+1)),disabled:d.pagination.current===d.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,Qs)])])):F("",!0)])])}const Ys=ie(Mt,[["render",Zs],["__scopeId","data-v-d66d4597"]]),Xl=Object.freeze(Object.defineProperty({__proto__:null,default:Ys},Symbol.toStringTag,{value:"Module"})),er={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},tr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},sr={key:0,class:"flex justify-center items-center h-64"},rr={key:1,class:"text-center py-16"},or={class:"mb-4"},ar={class:"text-gray-600 mb-6"},nr={key:2},ir={class:"mb-8"},lr={class:"flex items-center justify-between"},dr={class:"flex items-center space-x-4"},ur={class:"text-3xl font-bold text-primea-blue font-primea"},mr={class:"flex items-center space-x-3"},pr={class:"flex space-x-2"},cr={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},gr={class:"bg-white rounded-primea shadow-primea p-6"},fr={class:"flex items-center"},br={class:"p-2 bg-blue-100 rounded-lg"},vr={class:"ml-4"},xr={class:"text-2xl font-bold text-blue-600 font-primea"},yr={class:"bg-white rounded-primea shadow-primea p-6"},_r={class:"flex items-center"},hr={class:"p-2 bg-green-100 rounded-lg"},wr={class:"ml-4"},$r={class:"text-2xl font-bold text-green-600 font-primea"},kr={class:"bg-white rounded-primea shadow-primea p-6"},Er={class:"flex items-center"},Cr={class:"p-2 bg-yellow-100 rounded-lg"},jr={class:"ml-4"},Sr={class:"text-2xl font-bold text-yellow-600 font-primea"},Dr={class:"bg-white rounded-primea shadow-primea p-6"},Vr={class:"flex items-center"},Ar={class:"p-2 bg-purple-100 rounded-lg"},Ur={class:"ml-4"},zr={class:"text-lg font-bold text-purple-600 font-primea"},Ir={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Pr={class:"lg:col-span-2 space-y-6"},Tr={class:"bg-white rounded-primea shadow-primea p-6"},Br={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rr={class:"mt-1 text-gray-900 font-primea"},Fr={class:"mt-1 text-gray-900 font-primea"},Mr={class:"mt-1 text-gray-900 font-primea"},Or={class:"md:col-span-2"},qr={class:"mt-1 text-gray-900 font-primea leading-relaxed"},Lr={class:"bg-white rounded-primea shadow-primea p-6"},Nr={key:0,class:"space-y-4"},Xr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Wr={class:"mt-1 text-gray-900 font-primea"},Hr={class:"mt-1 text-gray-900 font-primea"},Gr={class:"mt-1 text-gray-900 font-primea"},Jr={key:1,class:"text-center py-8 text-gray-500"},Kr={class:"bg-white rounded-primea shadow-primea p-6"},Qr={key:0,class:"space-y-4"},Zr={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},Yr={class:"md:col-span-2"},eo={class:"flex items-center justify-between mb-2"},to={class:"font-semibold text-gray-900 font-primea"},so={class:"text-gray-600 text-sm font-primea"},ro={class:"text-center"},oo={class:"text-lg font-bold text-primea-blue font-primea"},ao={class:"text-center"},no={class:"text-sm font-primea"},io={class:"font-medium text-gray-900"},lo={class:"font-medium text-gray-900"},uo={class:"text-xs text-gray-500 mt-1"},mo={key:1,class:"text-center py-8 text-gray-500"},po={class:"bg-white rounded-primea shadow-primea p-6"},co={key:0,class:"overflow-x-auto"},go={class:"w-full"},fo={class:"divide-y divide-gray-200"},bo={class:"px-4 py-3 text-sm text-gray-900 font-primea"},vo={class:"px-4 py-3 text-sm text-gray-900 font-primea"},xo={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},yo={class:"px-4 py-3 text-sm text-gray-500 font-primea"},_o={key:1,class:"text-center py-8 text-gray-500"},ho={class:"space-y-6"},wo={class:"bg-white rounded-primea shadow-primea p-6"},$o={class:"space-y-3"},ko={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Eo={class:"w-full h-48 rounded-primea overflow-hidden"},Co=["src","alt"],jo={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},So={class:"bg-white rounded-primea shadow-primea p-6"},Do={class:"space-y-3"},Vo={class:"flex items-center justify-between"},Ao={class:"flex items-center justify-between"},Uo={class:"flex items-center justify-between"},zo={class:"text-sm text-gray-600 font-primea"},Io={__name:"EventDetail",setup(w){const m=we(),I=ge(),d=A(!0),D=A(null),p=A(null),v=A([]),U=async()=>{d.value=!0,D.value=null;try{let t=m.params.slug,r;if(/^\d+$/.test(t))r=(await q.getEvent(t)).data.data;else try{const $=await q.getEvents();if(r=($.data.data.events.data||$.data.data.events).find(fe=>fe.slug===t),!r)throw new Error(`Événement avec le slug "${t}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${t}" non trouvé`)}if(!r)throw new Error("Événement introuvable");p.value={...r,venue_name:r.venue?.name||"Lieu non spécifié",venue_address:r.venue?.address||"",category_name:r.category?.name||"Non spécifiée",tickets_sold:r.tickets?.filter($=>["issued","used"].includes($.status)).length||0,total_revenue:r.tickets?.filter($=>["issued","used"].includes($.status)).reduce(($,O)=>$+(O.ticket_type?.price||0),0)||0,is_public:r.is_active||!1,sales_active:r.is_active||!1,ticket_types:r.ticket_types||r.ticketTypes||[]};const f=r.ticket_types||r.ticketTypes||[];f.length>0&&(p.value.ticket_types=f.map($=>({...$,sold:r.tickets?.filter(O=>O.ticket_type_id===$.id&&["issued","used"].includes(O.status)).length||0}))),p.value.tickets_sold>0?v.value=[{id:1,customer_name:"Kofi Asante",ticket_quantity:2,total_amount:p.value.ticket_types?.[0]?.price*2||5e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:2,customer_name:"Aminata Traore",ticket_quantity:1,total_amount:p.value.ticket_types?.[0]?.price||25e3,created_at:new Date(Date.now()-1728e5).toISOString()}]:v.value=[]}catch(t){console.error("Erreur lors du chargement de l'événement:",t),t.response?.status===404?D.value=`Événement avec l'identifiant "${m.params.slug}" non trouvé`:t.message?D.value=t.message:D.value="Erreur lors du chargement de l'événement"}finally{d.value=!1}},l=()=>{I.push({name:"organizer-event-edit",params:{slug:p.value.slug}})},b=async()=>{if((await P.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await q.updateEvent(p.value.id,{status:"published",is_active:!0}),p.value.status="published",p.value.is_active=!0,P.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(r){console.error("Erreur publication:",r),P.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},V=async()=>{const t=`${window.location.origin}/events/${p.value.slug}`;try{await navigator.clipboard.writeText(t),P.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{P.fire({title:"Lien de l'événement",html:`<input type="text" value="${t}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},c=()=>{const t=`/events/${p.value.slug}`;window.open(t,"_blank")},L=()=>{P.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},H=t=>new Intl.NumberFormat("fr-FR").format(t),G=t=>new Date(t).toLocaleDateString("fr-FR"),S=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=t=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[t]||t,M=t=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",T=t=>{const r=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return r==null?"Illimité":typeof r=="number"?new Intl.NumberFormat("fr-FR").format(r):r},Z=t=>{const r=t.sold||0,f=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return f==null||f<=0?0:Math.round(r/f*100)},Q=t=>{console.log("Erreur de chargement d'image:",t.target.src),t.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},Y=t=>{console.log("Image chargée avec succès:",t.target.src)},y=()=>{if(!p.value||!p.value.ticket_types)return"Non définie";const t=p.value.ticket_types.reduce((r,f)=>{const $=f.capacity||f.available_quantity||f.max_quantity||f.quantity||0;return r+(typeof $=="number"?$:0)},0);return t>0?new Intl.NumberFormat("fr-FR").format(t):"Non définie"},o=()=>{if(!p.value)return"Non définie";if(p.value.event_date&&p.value.event_date!=="Invalid Date")return G(p.value.event_date);if(p.value.schedules&&p.value.schedules.length>0){const t=p.value.schedules[0];if(t.starts_at)return G(t.starts_at)}return"Non définie"},g=()=>{if(!p.value)return!1;const t=p.value.image_url||p.value.image||p.value.image_file;return t&&t.trim()!==""},s=()=>{if(!p.value)return"";let t=p.value.image_url||p.value.image||p.value.image_file;return console.log("EventDetail - Image URL pour événement:",p.value.title,"URL brute:",t),t&&t.trim()!==""?t.startsWith("http://")||t.startsWith("https://")?(console.log("EventDetail - URL complète détectée:",t),t):t.startsWith("/")?(t=window.location.origin+t,console.log("EventDetail - URL construite depuis chemin relatif:",t),t):(t.includes("/")||(t=`${window.location.origin}/storage/images/events/${t}`,console.log("EventDetail - URL construite depuis nom de fichier:",t)),t):(console.log("EventDetail - Aucune image trouvée pour:",p.value.title),"")};return ne(()=>{U()}),(t,r)=>{const f=oe("router-link");return i(),n("div",er,[e("div",tr,[d.value?(i(),n("div",sr,[...r[1]||(r[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):D.value?(i(),n("div",rr,[e("div",or,[_(C(_e),{class:"w-16 h-16 mx-auto text-red-500"})]),r[3]||(r[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",ar,u(D.value),1),_(f,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:K(()=>[...r[2]||(r[2]=[B(" Retour aux événements ",-1)])]),_:1})])):p.value?(i(),n("div",nr,[e("div",ir,[e("div",lr,[e("div",dr,[e("button",{onClick:r[0]||(r[0]=$=>t.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(C(ve),{class:"w-6 h-6"})]),e("div",null,[e("h1",ur,u(p.value.title),1),r[4]||(r[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",mr,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",M(p.value.status)])},u(h(p.value.status)),3),e("div",pr,[e("button",{onClick:l,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(C(be),{class:"w-4 h-4 inline mr-2"}),r[5]||(r[5]=B(" Modifier ",-1))]),p.value.status==="draft"?(i(),n("button",{key:0,onClick:b,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[_(C(he),{class:"w-4 h-4 inline mr-2"}),r[6]||(r[6]=B(" Publier ",-1))])):F("",!0)])])])]),e("div",cr,[e("div",gr,[e("div",fr,[e("div",br,[_(C(me),{class:"w-6 h-6 text-blue-600"})]),e("div",vr,[r[7]||(r[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",xr,u(p.value.tickets_sold||0),1)])])]),e("div",yr,[e("div",_r,[e("div",hr,[_(C(xe),{class:"w-6 h-6 text-green-600"})]),e("div",wr,[r[8]||(r[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",$r,u(H(p.value.total_revenue||0))+" XAF",1)])])]),e("div",kr,[e("div",Er,[e("div",Cr,[_(C(Ae),{class:"w-6 h-6 text-yellow-600"})]),e("div",jr,[r[9]||(r[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",Sr,u(y()),1)])])]),e("div",Dr,[e("div",Vr,[e("div",Ar,[_(C(re),{class:"w-6 h-6 text-purple-600"})]),e("div",Ur,[r[10]||(r[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",zr,u(o()),1)])])])]),e("div",Ir,[e("div",Pr,[e("div",Tr,[r[15]||(r[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",Br,[e("div",null,[r[11]||(r[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",Rr,u(p.value.title),1)]),e("div",null,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",Fr,u(p.value.venue_name),1)]),e("div",null,[r[13]||(r[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",Mr,u(p.value.category_name||"Non spécifiée"),1)]),e("div",Or,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",qr,u(p.value.description||"Aucune description"),1)])])]),e("div",Lr,[r[20]||(r[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),p.value.schedules&&p.value.schedules.length>0?(i(),n("div",Nr,[(i(!0),n(N,null,W(p.value.schedules,$=>(i(),n("div",{key:$.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Xr,[e("div",null,[r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",Wr,u(S($.starts_at)),1)]),e("div",null,[r[17]||(r[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",Hr,u(S($.ends_at)),1)]),e("div",null,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",Gr,u($.door_time?S($.door_time):"Non spécifiée"),1)])])]))),128))])):(i(),n("div",Jr,[_(C(re),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),r[19]||(r[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",Kr,[r[25]||(r[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),p.value.ticket_types&&p.value.ticket_types.length>0?(i(),n("div",Qr,[(i(!0),n(N,null,W(p.value.ticket_types,$=>(i(),n("div",{key:$.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Zr,[e("div",Yr,[e("div",eo,[e("h3",to,u($.name),1),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",$.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},u($.is_active?"Actif":"Inactif"),3)]),e("p",so,u($.description||"Aucune description"),1)]),e("div",ro,[r[21]||(r[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",oo,u(H($.price))+" XAF ",1)]),e("div",ao,[r[23]||(r[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",no,[e("span",io,u($.sold||0),1),r[22]||(r[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",lo,u(T($)),1)]),e("div",uo,u(Z($))+"% vendus ",1)])])]))),128))])):(i(),n("div",mo,[_(C(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),r[24]||(r[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",po,[r[28]||(r[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Commandes récentes",-1)),v.value.length>0?(i(),n("div",co,[e("table",go,[r[26]||(r[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",fo,[(i(!0),n(N,null,W(v.value,$=>(i(),n("tr",{key:$.id},[e("td",bo,u($.customer_name),1),e("td",vo,u($.ticket_quantity),1),e("td",xo,u(H($.total_amount))+" XAF",1),e("td",yo,u(G($.created_at)),1)]))),128))])])])):(i(),n("div",_o,[_(C(Ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),r[27]||(r[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",ho,[e("div",wo,[r[32]||(r[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",$o,[e("button",{onClick:V,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[_(C(ze),{class:"w-4 h-4 mr-2"}),r[29]||(r[29]=B(" Partager l'événement ",-1))]),e("button",{onClick:c,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[_(C(ye),{class:"w-4 h-4 mr-2"}),r[30]||(r[30]=B(" Voir la page publique ",-1))]),e("button",{onClick:L,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...r[31]||(r[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),B(" Exporter les données ",-1)])])])]),p.value?(i(),n("div",ko,[r[33]||(r[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("div",Eo,[g()?(i(),n("img",{key:0,src:s(),alt:p.value.title,class:"w-full h-full object-cover",onError:Q,onLoad:Y},null,40,Co)):(i(),n("div",jo,[_(C(re),{class:"w-16 h-16 text-gray-400"})]))])])):F("",!0),e("div",So,[r[37]||(r[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Do,[e("div",Vo,[r[34]||(r[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:X(["text-sm font-medium",p.value.is_public?"text-green-600":"text-red-600"])},u(p.value.is_public?"Oui":"Non"),3)]),e("div",Ao,[r[35]||(r[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:X(["text-sm font-medium",p.value.sales_active?"text-green-600":"text-red-600"])},u(p.value.sales_active?"Oui":"Non"),3)]),e("div",Uo,[r[36]||(r[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",zo,u(G(p.value.created_at)),1)])])])])])])):F("",!0)])])}}},Po=ie(Io,[["__scopeId","data-v-006581df"]]),Wl=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),To={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Bo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ro={key:0,class:"flex justify-center items-center h-64"},Fo={key:1,class:"text-center py-16"},Mo={class:"mb-4"},Oo={class:"text-gray-600 mb-6"},qo={key:2},Lo={class:"mb-8"},No={class:"flex items-center justify-between"},Xo={class:"flex items-center space-x-4"},Wo={class:"text-gray-600 font-primea mt-1"},Ho={class:"flex items-center space-x-3"},Go={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Jo={class:"lg:col-span-2 space-y-6"},Ko={class:"bg-white rounded-primea shadow-primea p-6"},Qo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zo={class:"md:col-span-2"},Yo={class:"md:col-span-2"},ea=["value"],ta={key:0},sa=["value"],ra={key:1,class:"space-y-2"},oa={class:"md:col-span-2"},aa={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},na={key:0,class:"mb-4"},ia=["src"],la={key:1},da={class:"bg-white rounded-primea shadow-primea p-6"},ua={class:"flex items-center justify-between mb-6"},ma={class:"space-y-4"},pa=["onUpdate:modelValue"],ca=["onUpdate:modelValue"],ga=["onUpdate:modelValue"],fa={class:"flex items-end"},ba=["onClick"],va={class:"bg-white rounded-primea shadow-primea p-6"},xa={class:"flex items-center justify-between mb-6"},ya={key:0,class:"text-center py-8 text-gray-500"},_a={key:1,class:"space-y-4"},ha=["onUpdate:modelValue"],wa=["onUpdate:modelValue"],$a=["onUpdate:modelValue"],ka=["onUpdate:modelValue"],Ea={class:"flex items-center space-x-2"},Ca={class:"flex items-center space-x-2"},ja=["onUpdate:modelValue"],Sa=["onClick"],Da={class:"space-y-6"},Va={class:"bg-white rounded-primea shadow-primea p-6"},Aa={class:"space-y-4"},Ua={class:"flex items-center space-x-2"},za={class:"bg-white rounded-primea shadow-primea p-6"},Ia={class:"space-y-3"},Pa=["disabled"],Ta={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Ba={class:"w-full h-48 rounded-primea overflow-hidden"},Ra=["src","alt"],Fa={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Ma={__name:"EventEdit",setup(w){const m=we(),I=ge(),d=A(!0),D=A(!1),p=A(null),v=A(null),U=A([]),l=A([]),b=A(!1),V=A(null),c=ee({title:"",description:"",category_id:"",venue_id:"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:"",image_preview:"",image_file:null,is_active:!1,schedules:[{starts_at:"",ends_at:"",door_time:""}],ticket_types:[]}),L=async()=>{try{const x=await q.getCategories();U.value=x.data.categories||[]}catch(x){console.error("Erreur chargement catégories:",x)}},H=async()=>{try{const x=await q.getVenues();l.value=x.data.venues||x.data.data||[]}catch(x){console.error("Erreur chargement lieux:",x)}},G=async()=>{d.value=!0,p.value=null;try{let x=m.params.slug,a;if(/^\d+$/.test(x))a=(await q.getEvent(x)).data.data;else try{const j=await q.getEvents();if(a=(j.data.data.events.data||j.data.data.events).find(se=>se.slug===x),!a)throw new Error(`Événement avec le slug "${x}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${x}" non trouvé`)}if(!a)throw new Error("Événement introuvable");v.value={...a,venue_name:a.venue?.name||a.venue_name||"",venue_address:a.venue?.address||a.venue_address||"",category_name:a.category?.name||a.category_name||""},Object.assign(c,{title:v.value.title||"",description:v.value.description||"",category_id:v.value.category_id||"",venue_id:v.value.venue_id||"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:v.value.image_url||"",image_preview:v.value.image_url||"",is_active:v.value.is_active??!1,schedules:v.value.schedules&&v.value.schedules.length>0?v.value.schedules.map(j=>({starts_at:j.starts_at?new Date(j.starts_at).toISOString().slice(0,16):"",ends_at:j.ends_at?new Date(j.ends_at).toISOString().slice(0,16):"",door_time:j.door_time?new Date(j.door_time).toISOString().slice(0,16):""})):[{starts_at:"",ends_at:"",door_time:""}],ticket_types:(v.value.ticket_types||v.value.ticketTypes||[]).map(j=>({id:j.id,name:j.name||"",description:j.description||"",price:j.price||0,capacity:j.capacity||j.available_quantity||j.max_quantity||j.quantity||0,is_active:j.is_active??j.status==="active"}))})}catch(x){console.error("Erreur lors du chargement de l'événement:",x),x.response?.status===404?p.value=`Événement avec l'identifiant "${m.params.slug}" non trouvé`:x.message?p.value=x.message:p.value="Erreur lors du chargement de l'événement"}finally{d.value=!1}},S=async()=>{D.value=!0;try{if(!v.value)throw new Error("Aucun événement à mettre à jour");const x={title:c.title,description:c.description,category_id:c.category_id,venue_id:c.venue_id||null,new_venue_name:c.venue_id==="new"?c.new_venue_name:null,new_venue_city:c.venue_id==="new"?c.new_venue_city:null,new_venue_address:c.venue_id==="new"?c.new_venue_address:null,is_active:c.is_active,schedules:c.schedules,ticket_types:c.ticket_types.map(a=>({id:a.id||null,name:a.name,description:a.description,price:a.price,capacity:a.capacity,is_active:a.is_active}))};if(c.image_file){const a=new FormData;console.log("EventEdit - Upload de fichier détecté:",c.image_file),console.log("EventEdit - Données à envoyer:",x),Object.keys(x).forEach(j=>{x[j]!==null&&x[j]!==void 0&&(j==="schedules"||j==="ticket_types"?(a.append(j,JSON.stringify(x[j])),console.log(`EventEdit - Ajout ${j} (JSON):`,JSON.stringify(x[j]))):(a.append(j,x[j]),console.log(`EventEdit - Ajout ${j}:`,x[j])))}),a.append("image_file",c.image_file),console.log("EventEdit - Fichier ajouté à FormData:",c.image_file.name);for(let[j,k]of a.entries())console.log(`EventEdit - FormData ${j}:`,k);await q.updateEventWithFile(v.value.id,a)}else x.image_url=c.image_url||null,x.image_file=null,console.log("EventEdit - Envoi sans fichier, avec URL:",x.image_url),await q.updateEvent(v.value.id,x);await P.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),I.push({name:"organizer-event-detail",params:{slug:v.value.slug}})}catch(x){console.error("Erreur lors de la mise à jour:",x),await P.fire({title:"Erreur",text:x.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{D.value=!1}},h=async()=>{if((await P.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await q.updateEvent(v.value.id,{status:"published",is_active:!0}),v.value.status="published",v.value.is_active=!0,await P.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(a){console.error("Erreur publication:",a),await P.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},M=()=>{c.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},T=async x=>{(await P.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&c.ticket_types.splice(x,1)},Z=()=>{c.schedules.push({starts_at:"",ends_at:"",door_time:""})},Q=x=>{c.schedules.length>1&&c.schedules.splice(x,1)},Y=()=>{c.venue_id==="new"&&(b.value=!0)},y=()=>{b.value=!1,c.venue_id="",c.new_venue_name="",c.new_venue_city="",c.new_venue_address=""},o=x=>{const a=x.target.files[0];if(a){c.image_file=a,c.image_url="";const j=new FileReader;j.onload=k=>{c.image_preview=k.target.result},j.readAsDataURL(a)}},g=()=>{c.image_url&&(c.image_preview=c.image_url,c.image_file=null)},s=()=>{c.image_url="",c.image_preview="",c.image_file=null,V.value&&(V.value.value="")},t=()=>{if(c.image_preview&&c.image_preview.trim()!=="")return!0;if(!v.value)return!1;const x=v.value.image_url||v.value.image||v.value.image_file;return x&&x.trim()!==""},r=()=>{if(c.image_preview)return c.image_preview;if(!v.value)return"";let x=v.value.image_url||v.value.image||v.value.image_file;return x&&x.trim()!==""?x.startsWith("http://")||x.startsWith("https://")?x:x.startsWith("/")?window.location.origin+x:x.includes("/")?x:`${window.location.origin}/storage/images/events/${x}`:""},f=x=>{console.log("Erreur de chargement d'image:",x.target.src),x.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},$=x=>{console.log("Image chargée avec succès:",x.target.src)},O=x=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[x]||x,fe=x=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[x]||"bg-gray-100 text-gray-800";return ne(async()=>{await Promise.all([L(),H(),G()])}),(x,a)=>{const j=oe("router-link");return i(),n("div",To,[e("div",Bo,[d.value?(i(),n("div",Ro,[...a[11]||(a[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):p.value?(i(),n("div",Fo,[e("div",Mo,[_(C(_e),{class:"w-16 h-16 mx-auto text-red-500"})]),a[13]||(a[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",Oo,u(p.value),1),_(j,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:K(()=>[...a[12]||(a[12]=[B(" Retour aux événements ",-1)])]),_:1})])):v.value?(i(),n("div",qo,[e("div",Lo,[e("div",No,[e("div",Xo,[e("button",{onClick:a[0]||(a[0]=k=>x.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(C(ve),{class:"w-6 h-6"})]),e("div",null,[a[14]||(a[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",Wo,u(v.value.title),1)])]),e("div",Ho,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",fe(v.value.status)])},u(O(v.value.status)),3)])])]),e("form",{onSubmit:de(S,["prevent"]),class:"space-y-8"},[e("div",Go,[e("div",Jo,[e("div",Ko,[a[24]||(a[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Qo,[e("div",Zo,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement *",-1)),E(e("input",{"onUpdate:modelValue":a[1]||(a[1]=k=>c.title=k),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[z,c.title]])]),e("div",Yo,[a[16]||(a[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),E(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=k=>c.description=k),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[z,c.description]])]),e("div",null,[a[18]||(a[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),E(e("select",{"onUpdate:modelValue":a[3]||(a[3]=k=>c.category_id=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[17]||(a[17]=e("option",{value:""},"Sélectionner une catégorie",-1)),(i(!0),n(N,null,W(U.value,k=>(i(),n("option",{key:k.id,value:k.id},u(k.name),9,ea))),128))],512),[[le,c.category_id]])]),e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),b.value?F("",!0):(i(),n("div",ta,[E(e("select",{"onUpdate:modelValue":a[4]||(a[4]=k=>c.venue_id=k),onChange:Y,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[19]||(a[19]=e("option",{value:""},"Sélectionner un lieu",-1)),(i(!0),n(N,null,W(l.value,k=>(i(),n("option",{key:k.id,value:k.id},u(k.name)+" - "+u(k.city),9,sa))),128)),a[20]||(a[20]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[le,c.venue_id]])])),b.value||c.venue_id==="new"?(i(),n("div",ra,[E(e("input",{"onUpdate:modelValue":a[5]||(a[5]=k=>c.new_venue_name=k),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,c.new_venue_name]]),E(e("input",{"onUpdate:modelValue":a[6]||(a[6]=k=>c.new_venue_city=k),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,c.new_venue_city]]),E(e("input",{"onUpdate:modelValue":a[7]||(a[7]=k=>c.new_venue_address=k),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[z,c.new_venue_address]]),e("button",{type:"button",onClick:y,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):F("",!0)]),e("div",oa,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",aa,[c.image_preview?(i(),n("div",na,[e("img",{src:c.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea",onError:f,onLoad:$},null,40,ia),e("button",{type:"button",onClick:s,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(i(),n("div",la,[e("input",{ref_key:"imageInput",ref:V,type:"file",accept:"image/*",onChange:o,class:"hidden"},null,544),e("button",{type:"button",onClick:a[8]||(a[8]=k=>x.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),a[22]||(a[22]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),E(e("input",{"onUpdate:modelValue":a[9]||(a[9]=k=>c.image_url=k),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:g},null,544),[[z,c.image_url]])]))])])])]),e("div",da,[e("div",ua,[a[26]||(a[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:Z,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(C(ae),{class:"w-4 h-4 inline mr-2"}),a[25]||(a[25]=B(" Ajouter une séance ",-1))])]),e("div",ma,[(i(!0),n(N,null,W(c.schedules,(k,se)=>(i(),n("div",{key:se,class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),E(e("input",{"onUpdate:modelValue":J=>k.starts_at=J,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,pa),[[z,k.starts_at]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),E(e("input",{"onUpdate:modelValue":J=>k.ends_at=J,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ca),[[z,k.ends_at]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Ouverture des portes",-1)),E(e("input",{"onUpdate:modelValue":J=>k.door_time=J,type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ga),[[z,k.door_time]])]),e("div",fa,[c.schedules.length>1?(i(),n("button",{key:0,type:"button",onClick:J=>Q(se),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_(C(pe),{class:"w-4 h-4"})],8,ba)):F("",!0)])]))),128))])]),e("div",va,[e("div",xa,[a[31]||(a[31]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:M,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(C(ae),{class:"w-4 h-4 inline mr-2"}),a[30]||(a[30]=B(" Ajouter un type ",-1))])]),c.ticket_types.length===0?(i(),n("div",ya,[_(C(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),a[32]||(a[32]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),a[33]||(a[33]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(i(),n("div",_a,[(i(!0),n(N,null,W(c.ticket_types,(k,se)=>(i(),n("div",{key:se,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[34]||(a[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),E(e("input",{"onUpdate:modelValue":J=>k.name=J,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,ha),[[z,k.name]])]),e("div",null,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),E(e("input",{"onUpdate:modelValue":J=>k.price=J,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,wa),[[z,k.price,void 0,{number:!0}]])]),e("div",null,[a[36]||(a[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),E(e("input",{"onUpdate:modelValue":J=>k.capacity=J,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,$a),[[z,k.capacity,void 0,{number:!0}]])]),e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),E(e("textarea",{"onUpdate:modelValue":J=>k.description=J,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,ka),[[z,k.description]])]),e("div",Ea,[e("label",Ca,[E(e("input",{"onUpdate:modelValue":J=>k.is_active=J,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,ja),[[ce,k.is_active]]),a[38]||(a[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))]),e("button",{type:"button",onClick:J=>T(se),class:"text-red-600 hover:text-red-800 p-1"},[_(C(pe),{class:"w-4 h-4"})],8,Sa)])]))),128))]))])]),e("div",Da,[e("div",Va,[a[41]||(a[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Aa,[e("div",null,[e("label",Ua,[E(e("input",{"onUpdate:modelValue":a[10]||(a[10]=k=>c.is_active=k),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ce,c.is_active]]),a[39]||(a[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement actif",-1))]),a[40]||(a[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Publier l'événement et activer les ventes",-1))])])]),e("div",za,[a[44]||(a[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Ia,[e("button",{type:"submit",disabled:D.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},u(D.value?"Enregistrement...":"Enregistrer les modifications"),9,Pa),_(j,{to:{name:"organizer-event-detail",params:{slug:v.value?.slug||C(m).params.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:K(()=>[...a[42]||(a[42]=[B(" Annuler les modifications ",-1)])]),_:1},8,["to"]),v.value&&!v.value.is_active?(i(),n("button",{key:0,type:"button",onClick:h,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[_(C(he),{class:"w-4 h-4 inline mr-2"}),a[43]||(a[43]=B(" Publier l'événement ",-1))])):F("",!0)])]),v.value?(i(),n("div",Ta,[a[45]||(a[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image actuelle",-1)),e("div",Ba,[t()?(i(),n("img",{key:0,src:r(),alt:v.value.title,class:"w-full h-full object-cover",onError:f,onLoad:$},null,40,Ra)):(i(),n("div",Fa,[_(C(re),{class:"w-16 h-16 text-gray-400"})]))])])):F("",!0)])])],32)])):F("",!0)])])}}},Oa=ie(Ma,[["__scopeId","data-v-a5121c89"]]),Hl=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),qa={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},La={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Na={class:"mb-8"},Xa={class:"flex items-center justify-between"},Wa={class:"flex items-center space-x-4"},Ha={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ga={class:"lg:col-span-2 space-y-6"},Ja={class:"bg-white rounded-primea shadow-primea p-6"},Ka={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qa={class:"md:col-span-2"},Za={class:"md:col-span-2"},Ya=["value"],en={key:0},tn=["value"],sn={key:1,class:"space-y-2"},rn={class:"md:col-span-2"},on={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},an={key:0,class:"mb-4"},nn=["src"],ln={key:1},dn={class:"bg-white rounded-primea shadow-primea p-6"},un={class:"flex items-center justify-between mb-6"},mn={class:"space-y-4"},pn=["onUpdate:modelValue","onChange"],cn=["onUpdate:modelValue","min"],gn={class:"flex items-end"},fn=["onClick"],bn={class:"bg-white rounded-primea shadow-primea p-6"},vn={class:"flex items-center justify-between mb-6"},xn={key:0,class:"text-center py-8 text-gray-500"},yn={key:1,class:"space-y-4"},_n=["onUpdate:modelValue"],hn=["onUpdate:modelValue"],wn=["onUpdate:modelValue"],$n=["onUpdate:modelValue"],kn={class:"flex items-end"},En=["onClick"],Cn={class:"space-y-6"},jn={class:"bg-white rounded-primea shadow-primea p-6"},Sn={class:"space-y-4"},Dn={class:"flex items-center space-x-2"},Vn={class:"flex items-center space-x-2"},An={class:"bg-white rounded-primea shadow-primea p-6"},Un={class:"space-y-3"},zn=["disabled"],In={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Pn=["src","alt"],Tn={class:"bg-white rounded-primea shadow-primea p-6"},Bn={class:"space-y-2 text-sm"},Rn={class:"flex justify-between"},Fn={class:"font-medium font-primea"},Mn={class:"flex justify-between"},On={class:"font-medium font-primea"},qn={key:0,class:"flex justify-between"},Ln={class:"font-medium font-primea"},Nn={key:1,class:"flex justify-between"},Xn={class:"font-medium font-primea"},Wn={__name:"EventCreate",setup(w){const m=ge(),I=A(!1),d=A([]),D=A([]),p=A(!1),v=A(!1),U=A(null),l=ee({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),b=te(()=>l.ticket_types.reduce((s,t)=>s+(parseInt(t.capacity)||0),0)),V=te(()=>{if(l.ticket_types.length===0)return 0;const s=l.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return s.length>0?Math.min(...s):0}),c=te(()=>{if(l.ticket_types.length===0)return 0;const s=l.ticket_types.map(t=>parseInt(t.price)||0);return s.length>0?Math.max(...s):0}),L=()=>{l.ticket_types.push({name:"",description:"",price:"",capacity:""})},H=()=>{l.schedules.push({starts_at:"",ends_at:""})},G=s=>{l.schedules.length>1&&l.schedules.splice(s,1)},S=()=>{l.venue_id==="new"?v.value=!0:v.value=!1},h=()=>{v.value=!1,l.venue_id="",l.new_venue_name="",l.new_venue_city="",l.new_venue_address=""},M=s=>{const t=s.target.files[0];if(t){l.image_file=t;const r=new FileReader;r.onload=f=>{l.image_preview=f.target.result,l.image_url=""},r.readAsDataURL(t)}},T=()=>{l.image_url&&(l.image_preview=l.image_url,l.image_file=null)},Z=()=>{l.image_url="",l.image_preview="",l.image_file=null,U.value&&(U.value.value="")},Q=s=>{l.ticket_types.length>1&&l.ticket_types.splice(s,1)},Y=s=>{if(s.starts_at&&(!s.ends_at||new Date(s.ends_at)<new Date(s.starts_at))){const t=new Date(s.starts_at);t.setHours(t.getHours()+2),s.ends_at=t.toISOString().slice(0,16)}},y=async()=>{if(l.ticket_types.length===0){P.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!l.title){P.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}I.value=!0;try{if(!l.category_id){P.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!l.venue_id&&!l.new_venue_name){P.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(l.schedules.some(r=>!r.starts_at||!r.ends_at)){P.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}if(l.schedules.some(r=>new Date(r.ends_at)<new Date(r.starts_at))){P.fire({title:"Erreur",text:"La date de fin doit être égale ou postérieure à la date de début",icon:"error",confirmButtonColor:"#272d63"});return}const s={title:l.title,description:l.description,category_id:l.category_id,venue_id:l.venue_id!=="new"?l.venue_id:null,venue_name:l.venue_id==="new"?l.new_venue_name:null,venue_city:l.venue_id==="new"?l.new_venue_city:"Abidjan",venue_address:l.venue_id==="new"?l.new_venue_address:null,is_active:l.status==="published"?1:0,schedules:l.schedules.map(r=>({starts_at:r.starts_at,ends_at:r.ends_at,door_time:r.starts_at})),ticket_types:l.ticket_types.map(r=>({name:r.name,description:r.description,price:parseFloat(r.price),capacity:parseInt(r.capacity),is_active:!0}))};let t;if(l.image_file){const r=new FormData;Object.keys(s).forEach(f=>{s[f]!==null&&s[f]!==void 0&&(f==="schedules"||f==="ticket_types"?r.append(f,JSON.stringify(s[f])):r.append(f,s[f]))}),r.append("image_file",l.image_file),t=await q.createEventWithFile(r)}else s.image_url=l.image_url||null,t=await q.createEvent(s);if(t.data.success)P.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{m.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(s){console.error("Erreur création événement:",s),console.error("Détails erreur:",s.response?.data);let t=s.response?.data?.message||"Erreur lors de la création de l'événement";if(s.response?.data?.errors){const r=s.response.data.errors,f=Object.keys(r).map($=>`${$}: ${r[$].join(", ")}`).join(`
`);t+=`

Détails:
`+f}P.fire({title:"Erreur de validation",text:t,icon:"error",confirmButtonColor:"#272d63"})}finally{I.value=!1}},o=async()=>{p.value=!0;try{const s=await q.getCategories();s.data.success&&(d.value=s.data.categories||s.data.data);const t=await q.getVenues();t.data.success&&(D.value=t.data.venues||t.data.data)}catch(s){console.error("Erreur chargement données initiales:",s)}finally{p.value=!1}},g=s=>new Intl.NumberFormat("fr-FR").format(s);return ne(()=>{o()}),(s,t)=>{const r=oe("router-link");return i(),n("div",qa,[e("div",La,[e("div",Na,[e("div",Xa,[e("div",Wa,[e("button",{onClick:t[0]||(t[0]=f=>s.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(C(ve),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:de(y,["prevent"]),class:"space-y-8"},[e("div",Ha,[e("div",Ga,[e("div",Ja,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Ka,[e("div",Qa,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>l.title=f),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[z,l.title]])]),e("div",Za,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),E(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=f=>l.description=f),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[z,l.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),E(e("select",{"onUpdate:modelValue":t[3]||(t[3]=f=>l.category_id=f),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(i(!0),n(N,null,W(d.value,f=>(i(),n("option",{key:f.id,value:f.id},u(f.name),9,Ya))),128))],512),[[le,l.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),v.value?F("",!0):(i(),n("div",en,[E(e("select",{"onUpdate:modelValue":t[4]||(t[4]=f=>l.venue_id=f),onChange:S,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(i(!0),n(N,null,W(D.value,f=>(i(),n("option",{key:f.id,value:f.id},u(f.name)+" - "+u(f.city),9,tn))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[le,l.venue_id]])])),v.value||l.venue_id==="new"?(i(),n("div",sn,[E(e("input",{"onUpdate:modelValue":t[5]||(t[5]=f=>l.new_venue_name=f),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,l.new_venue_name]]),E(e("input",{"onUpdate:modelValue":t[6]||(t[6]=f=>l.new_venue_city=f),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,l.new_venue_city]]),E(e("input",{"onUpdate:modelValue":t[7]||(t[7]=f=>l.new_venue_address=f),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[z,l.new_venue_address]]),e("button",{type:"button",onClick:h,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):F("",!0)]),e("div",rn,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",on,[l.image_preview?(i(),n("div",an,[e("img",{src:l.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,nn),e("button",{type:"button",onClick:Z,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(i(),n("div",ln,[e("input",{ref_key:"imageInput",ref:U,type:"file",accept:"image/*",onChange:M,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=f=>s.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),E(e("input",{"onUpdate:modelValue":t[9]||(t[9]=f=>l.image_url=f),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:T},null,544),[[z,l.image_url]])]))])])])]),e("div",dn,[e("div",un,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:H,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(C(ae),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=B(" Ajouter une séance ",-1))])]),e("div",mn,[(i(!0),n(N,null,W(l.schedules,(f,$)=>(i(),n("div",{key:$,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),E(e("input",{"onUpdate:modelValue":O=>f.starts_at=O,type:"datetime-local",required:"",onChange:O=>Y(f),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,40,pn),[[z,f.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),E(e("input",{"onUpdate:modelValue":O=>f.ends_at=O,type:"datetime-local",required:"",min:f.starts_at,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,cn),[[z,f.ends_at]]),t[28]||(t[28]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"La date de fin doit être égale ou postérieure à la date de début",-1))]),e("div",gn,[l.schedules.length>1?(i(),n("button",{key:0,type:"button",onClick:O=>G($),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_(C(pe),{class:"w-4 h-4"})],8,fn)):F("",!0)])]))),128))])]),e("div",bn,[e("div",vn,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:L,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(C(ae),{class:"w-4 h-4 inline mr-2"}),t[29]||(t[29]=B(" Ajouter un type ",-1))])]),l.ticket_types.length===0?(i(),n("div",xn,[_(C(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[31]||(t[31]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[32]||(t[32]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(i(),n("div",yn,[(i(!0),n(N,null,W(l.ticket_types,(f,$)=>(i(),n("div",{key:$,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),E(e("input",{"onUpdate:modelValue":O=>f.name=O,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,_n),[[z,f.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),E(e("input",{"onUpdate:modelValue":O=>f.price=O,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,hn),[[z,f.price,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),E(e("input",{"onUpdate:modelValue":O=>f.capacity=O,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,wn),[[z,f.capacity,void 0,{number:!0}]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),E(e("input",{"onUpdate:modelValue":O=>f.description=O,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,$n),[[z,f.description]])]),e("div",kn,[l.ticket_types.length>1?(i(),n("button",{key:0,type:"button",onClick:O=>Q($),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_(C(pe),{class:"w-4 h-4"})],8,En)):F("",!0)])]))),128))]))])]),e("div",Cn,[e("div",jn,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Sn,[e("div",null,[e("label",Dn,[E(e("input",{"onUpdate:modelValue":t[10]||(t[10]=f=>l.is_public=f),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ce,l.is_public]]),t[37]||(t[37]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",Vn,[E(e("input",{"onUpdate:modelValue":t[11]||(t[11]=f=>l.sales_active=f),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ce,l.sales_active]]),t[39]||(t[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),E(e("select",{"onUpdate:modelValue":t[12]||(t[12]=f=>l.status=f),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[41]||(t[41]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[le,l.status]]),t[43]||(t[43]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",An,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Un,[e("button",{type:"submit",disabled:I.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},u(I.value?"Création en cours...":"Créer l'événement"),9,zn),_(r,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:K(()=>[...t[45]||(t[45]=[B(" Annuler ",-1)])]),_:1})])]),l.image_url||l.image_preview?(i(),n("div",In,[t[47]||(t[47]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:l.image_preview||l.image_url,alt:l.title,class:"w-full h-48 object-cover rounded-primea"},null,8,Pn)])):F("",!0),e("div",Tn,[t[52]||(t[52]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",Bn,[e("div",Rn,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",Fn,u(l.ticket_types.length),1)]),e("div",Mn,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",On,u(b.value||"Illimitée"),1)]),V.value>0?(i(),n("div",qn,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",Ln,u(g(V.value))+" XAF",1)])):F("",!0),c.value>0?(i(),n("div",Nn,[t[51]||(t[51]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",Xn,u(g(c.value))+" XAF",1)])):F("",!0)])])])])],32)])])}}},Hn=ie(Wn,[["__scopeId","data-v-9749d093"]]),Gl=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),Gn={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Jn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Kn={class:"mb-8"},Qn={class:"flex items-center justify-between"},Zn={key:0,class:"flex justify-center items-center h-64"},Yn={key:1},ei={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ti={class:"bg-white rounded-lg shadow p-6"},si={class:"flex items-center"},ri={class:"ml-4"},oi={class:"text-2xl font-bold text-green-600"},ai={class:"bg-white rounded-lg shadow p-6"},ni={class:"flex items-center"},ii={class:"ml-4"},li={class:"text-2xl font-bold text-yellow-600"},di={class:"bg-white rounded-lg shadow p-6"},ui={class:"flex items-center"},mi={class:"ml-4"},pi={class:"text-2xl font-bold text-blue-600"},ci={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},gi={class:"flex items-center justify-between mb-4"},fi={class:"flex items-center"},bi={class:"text-lg font-semibold text-gray-900"},vi={class:"text-right"},xi={class:"text-2xl font-bold text-green-600"},yi={class:"mb-4 p-3 bg-gray-50 rounded-primea"},_i={class:"flex items-center justify-between mb-2"},hi={key:0,class:"text-sm text-gray-600 font-primea"},wi={key:0},$i={key:1,class:"text-sm text-gray-600 font-primea"},ki={class:"space-y-3"},Ei=["onClick","disabled"],Ci={class:"mt-6 pt-6 border-t"},ji={key:0,class:"text-sm text-gray-500"},Si={key:1,class:"space-y-2"},Di={class:"font-medium"},Vi={class:"text-gray-500 ml-2"},Ai={class:"bg-white rounded-lg shadow"},Ui={class:"p-6 border-b"},zi={class:"flex justify-between items-center"},Ii={key:0,class:"p-8 text-center text-gray-500"},Pi={key:1,class:"overflow-x-auto"},Ti={class:"w-full"},Bi={class:"divide-y divide-gray-200"},Ri={class:"px-6 py-4 text-sm font-mono text-gray-900"},Fi={class:"px-6 py-4 text-sm"},Mi={class:"px-6 py-4 text-sm font-medium text-gray-900"},Oi={class:"px-6 py-4 text-sm"},qi={class:"px-6 py-4 text-sm"},Li={class:"px-6 py-4 text-sm text-gray-500"},Ni={class:"px-6 py-4 text-sm"},Xi=["onClick"],Wi={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Hi={class:"bg-white rounded-primea p-6 w-full max-w-md"},Gi={class:"space-y-4"},Ji=["value"],Ki=["value"],Qi=["max"],Zi={class:"flex justify-end space-x-3 mt-6"},Yi=["disabled"],el={__name:"BalanceManagement",setup(w){const m=A(!1),I=A(!1),d=A(!1),D=A([]),p=A([]),v=ee({pending_payouts:0,total_payouts:0}),U=ee({gateway:"",available_balance:0,amount:"",phone_number:""}),l=te(()=>D.value.reduce((y,o)=>y+(parseFloat(o.balance)||0),0)),b=async()=>{m.value=!0;try{const y=await q.getBalance();console.log("Balance API Response:",y.data),y.data.success?(D.value=y.data.data.balances||[],console.log("Balances loaded:",D.value),D.value.length===0&&(D.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],console.log("Default balances created:",D.value))):console.error("Balance API Error:",y.data.message)}catch(y){console.error("Erreur chargement soldes:",y),console.error("Error details:",y.response?.data),D.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],P.fire({title:"Erreur",text:"Impossible de charger les soldes. Affichage des valeurs par défaut.",icon:"warning",confirmButtonColor:"#272d63"})}finally{m.value=!1}},V=async()=>{try{const y=await q.getPaymentHistory();console.log("Payment History API Response:",y.data),y.data.success?(p.value=y.data.data.payouts?.data||y.data.data.payouts||[],console.log("Recent payouts loaded:",p.value),v.pending_payouts=p.value.filter(o=>["pending","processing"].includes(o.status)).length,v.total_payouts=p.value.reduce((o,g)=>o+(g.amount||0),0),console.log("Stats calculated:",v)):console.error("Payment History API Error:",y.data.message)}catch(y){console.error("Erreur chargement payouts récents:",y),console.error("Error details:",y.response?.data)}},c=y=>{Object.assign(U,{gateway:y.gateway,available_balance:y.balance,amount:"",phone_number:y.payout_phone_number||""}),d.value=!0},L=async()=>{I.value=!0;try{const y=await q.requestPayout(U);y.data.success?(P.fire({title:"Succès !",text:"Demande de versement envoyée avec succès",icon:"success",confirmButtonColor:"#272d63"}),d.value=!1,b(),V()):P.fire({title:"Erreur",text:y.data.message||"Erreur lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}catch(y){console.error("Erreur demande payout:",y),P.fire({title:"Erreur technique",text:"Une erreur est survenue lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}finally{I.value=!1}},H=y=>p.value.filter(o=>o.gateway===y).slice(0,3),G=y=>{P.fire({title:`Versement #${y.reference}`,html:`
      <div class="text-left">
        <p><strong>Montant:</strong> ${S(y.amount)} XAF</p>
        <p><strong>Statut:</strong> ${Q(y.status)}</p>
        <p><strong>Gateway:</strong> ${T(y.gateway)}</p>
        <p><strong>Date:</strong> ${M(y.created_at)}</p>
      </div>
    `,icon:"info",confirmButtonColor:"#272d63"})},S=y=>new Intl.NumberFormat("fr-FR").format(y||0),h=y=>new Date(y).toLocaleDateString("fr-FR"),M=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=y=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[y]||y,Z=y=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[y]||"bg-gray-100 text-gray-800",Q=y=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[y]||y,Y=y=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[y]||"bg-gray-100 text-gray-800";return ne(()=>{b(),V()}),(y,o)=>(i(),n("div",Gn,[e("div",Jn,[e("div",Kn,[e("div",Qn,[o[6]||(o[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Mon Solde"),e("p",{class:"text-gray-600 font-primea"},"Consultez votre solde et effectuez des demandes de versement")],-1)),e("button",{onClick:o[0]||(o[0]=g=>y.$router.push("/organizer/payouts/history")),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[...o[5]||(o[5]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),B(" Historique Versements ",-1)])])])]),m.value?(i(),n("div",Zn,[...o[7]||(o[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(i(),n("div",Yn,[e("div",ei,[e("div",ti,[e("div",si,[o[9]||(o[9]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",ri,[o[8]||(o[8]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",oi,u(S(l.value))+" XAF",1)])])]),e("div",ai,[e("div",ni,[o[11]||(o[11]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ii,[o[10]||(o[10]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",li,u(v.pending_payouts||0),1)])])]),e("div",di,[e("div",ui,[o[13]||(o[13]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",mi,[o[12]||(o[12]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",pi,u(S(v.total_payouts||0))+" XAF",1)])])])]),e("div",ci,[(i(!0),n(N,null,W(D.value,g=>(i(),n("div",{key:g.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",gi,[e("div",fi,[e("div",{class:X(["p-2 rounded-lg mr-4",Z(g.gateway)])},[...o[14]||(o[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",bi,u(T(g.gateway)),1),o[15]||(o[15]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",vi,[e("p",xi,u(S(g.balance))+" XAF",1)])]),e("div",yi,[e("div",_i,[o[16]||(o[16]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Versement Automatique",-1)),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",g.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},u(g.auto_payout_enabled?"Activé":"Désactivé"),3)]),g.auto_payout_enabled?(i(),n("div",hi,[e("p",null,"Seuil: "+u(S(g.auto_payout_threshold))+" XAF",1),g.payout_phone_number?(i(),n("p",wi,"Téléphone: "+u(g.payout_phone_number),1)):F("",!0),o[17]||(o[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Configuration gérée par l'administrateur",-1))])):(i(),n("div",$i,[...o[18]||(o[18]=[e("p",{class:"text-xs text-gray-500"},"Pour activer le versement automatique, contactez l'administrateur",-1)])]))]),e("div",ki,[e("button",{onClick:s=>c(g),disabled:g.balance<1e3,class:"w-full bg-primea-blue text-white py-2 px-4 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50 disabled:cursor-not-allowed"},[o[19]||(o[19]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),B(" "+u(g.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Versement"),1)],8,Ei)]),e("div",Ci,[o[20]||(o[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),H(g.gateway).length===0?(i(),n("div",ji," Aucune transaction récente ")):(i(),n("div",Si,[(i(!0),n(N,null,W(H(g.gateway),s=>(i(),n("div",{key:s.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",Di,u(S(s.amount))+" XAF",1),e("span",Vi,u(h(s.created_at)),1)]),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(s.status)])},u(Q(s.status)),3)]))),128))]))])]))),128))]),e("div",Ai,[e("div",Ui,[e("div",zi,[o[21]||(o[21]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:o[1]||(o[1]=g=>y.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),p.value.length===0?(i(),n("div",Ii," Aucun payout récent ")):(i(),n("div",Pi,[e("table",Ti,[o[22]||(o[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Bi,[(i(!0),n(N,null,W(p.value,g=>(i(),n("tr",{key:g.id},[e("td",Ri,"#"+u(g.reference),1),e("td",Fi,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Z(g.gateway)])},u(T(g.gateway)),3)]),e("td",Mi,u(S(g.amount))+" XAF",1),e("td",Oi,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(g.status)])},u(Q(g.status)),3)]),e("td",qi,[e("span",{class:X(["inline-flex px-2 py-1 text-xs rounded-full",g.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},u(g.is_automatic?"Auto":"Manuel"),3)]),e("td",Li,u(M(g.created_at)),1),e("td",Ni,[e("button",{onClick:s=>G(g),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Xi)])]))),128))])])]))])])),d.value?(i(),n("div",Wi,[e("div",Hi,[o[29]||(o[29]=e("h3",{class:"text-lg font-bold text-primea-blue font-primea mb-4"},"Demande de Versement",-1)),e("form",{onSubmit:de(L,["prevent"])},[e("div",Gi,[e("div",null,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:T(U.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ji)]),e("div",null,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:S(U.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ki)]),e("div",null,[o[25]||(o[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),E(e("input",{"onUpdate:modelValue":o[2]||(o[2]=g=>U.amount=g),type:"number",min:1e3,max:U.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Qi),[[z,U.amount,void 0,{number:!0}]]),o[26]||(o[26]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),E(e("input",{"onUpdate:modelValue":o[3]||(o[3]=g=>U.phone_number=g),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[z,U.phone_number]]),o[28]||(o[28]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",Zi,[e("button",{type:"button",onClick:o[4]||(o[4]=g=>d.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:I.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},u(I.value?"Demande en cours...":"Demander le Versement"),9,Yi)])],32)])])):F("",!0)])]))}},tl=ie(el,[["__scopeId","data-v-1db6fa0a"]]),Jl=Object.freeze(Object.defineProperty({__proto__:null,default:tl},Symbol.toStringTag,{value:"Module"})),sl={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},rl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ol={key:0,class:"flex justify-center items-center h-64"},al={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},nl={class:"bg-white rounded-primea shadow-primea p-6"},il={class:"flex items-center justify-between mb-6"},ll=["disabled"],dl=["disabled"],ul=["disabled"],ml={key:0,class:"flex space-x-3 pt-4"},pl=["disabled"],cl={class:"bg-white rounded-primea shadow-primea p-6"},gl={class:"flex items-center justify-between mb-6"},fl=["disabled"],bl=["disabled"],vl=["disabled"],xl=["disabled"],yl=["disabled"],_l={key:0,class:"flex space-x-3 pt-4"},hl=["disabled"],wl={class:"bg-white rounded-primea shadow-primea p-6"},$l=["disabled"],kl={class:"bg-white rounded-primea shadow-primea p-6"},El={class:"space-y-4"},Cl={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},jl={class:"flex items-center space-x-3"},Sl={class:"text-xs text-green-600 font-primea"},Dl={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},Vl={class:"flex items-center space-x-3"},Al={class:"text-xs text-blue-600 font-primea"},Ul={class:"grid grid-cols-2 gap-4 pt-4"},zl={class:"text-center p-3 border rounded-primea"},Il={class:"text-2xl font-bold text-primea-blue font-primea"},Pl={class:"text-center p-3 border rounded-primea"},Tl={class:"text-2xl font-bold text-primea-yellow font-primea"},Bl={__name:"OrganizerProfile",setup(w){$e();const m=A(!1),I=A(!1),d=A(!1),D=A(!1),p=A(!1),v=A(!1),U=A(null),l=A(null),b=A({events:0,tickets:0}),V=ee({name:"",email:"",phone:""}),c=ee({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),L=ee({current_password:"",password:"",password_confirmation:""}),H=ee({}),G=ee({}),S=()=>{I.value||Object.assign(H,V),I.value=!I.value},h=()=>{d.value||Object.assign(G,c),d.value=!d.value},M=()=>{Object.assign(V,H),I.value=!1},T=()=>{Object.assign(c,G),d.value=!1},Z=async()=>{D.value=!0;try{console.log("Mise à jour des informations personnelles:",V),await new Promise(g=>setTimeout(g,1e3)),I.value=!1}catch(g){console.error("Erreur lors de la mise à jour:",g)}finally{D.value=!1}},Q=async()=>{p.value=!0;try{console.log("Mise à jour de l'organisation:",c),await new Promise(g=>setTimeout(g,1e3)),d.value=!1}catch(g){console.error("Erreur lors de la mise à jour:",g)}finally{p.value=!1}},Y=async()=>{if(L.password!==L.password_confirmation){alert("Les mots de passe ne correspondent pas");return}v.value=!0;try{console.log("Changement de mot de passe"),await new Promise(g=>setTimeout(g,1e3)),Object.assign(L,{current_password:"",password:"",password_confirmation:""})}catch(g){console.error("Erreur lors du changement de mot de passe:",g)}finally{v.value=!1}},y=g=>g?new Date(g).toLocaleDateString("fr-FR"):"Non disponible",o=async()=>{m.value=!0;try{U.value={name:"Marie Nzougou",email:"marie@example.com",phone:"+225 07 12 34 56 78",email_verified_at:"2024-01-15T10:30:00Z"},l.value={name:"Mon Organisation",description:"Organisation spécialisée dans l'événementiel",website_url:"https://monorganisation.com",contact_email:"contact@monorganisation.com",contact_phone:"+225 07 12 34 56 79",verified_at:"2024-01-20T14:00:00Z"},b.value={events:12,tickets:345},Object.assign(V,{name:U.value.name,email:U.value.email,phone:U.value.phone}),Object.assign(c,{name:l.value.name,description:l.value.description,website_url:l.value.website_url,contact_email:l.value.contact_email,contact_phone:l.value.contact_phone})}catch(g){console.error("Erreur lors du chargement du profil:",g)}finally{m.value=!1}};return ne(()=>{o()}),(g,s)=>(i(),n("div",sl,[e("div",rl,[s[31]||(s[31]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),m.value?(i(),n("div",ol,[...s[11]||(s[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(i(),n("div",al,[e("div",nl,[e("div",il,[s[12]||(s[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:S,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(C(be),{class:"w-5 h-5"})])]),e("form",{onSubmit:de(Z,["prevent"]),class:"space-y-4"},[e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),E(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>V.name=t),type:"text",disabled:!I.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,ll),[[z,V.name]])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),E(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>V.email=t),type:"email",disabled:!I.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,dl),[[z,V.email]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),E(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>V.phone=t),type:"tel",disabled:!I.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,ul),[[z,V.phone]])]),I.value?(i(),n("div",ml,[e("button",{type:"submit",disabled:D.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},u(D.value?"Enregistrement...":"Enregistrer"),9,pl),e("button",{type:"button",onClick:M,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):F("",!0)],32)]),e("div",cl,[e("div",gl,[s[16]||(s[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:h,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(C(be),{class:"w-5 h-5"})])]),e("form",{onSubmit:de(Q,["prevent"]),class:"space-y-4"},[e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),E(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>c.name=t),type:"text",disabled:!d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,fl),[[z,c.name]])]),e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),E(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=t=>c.description=t),disabled:!d.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,bl),[[z,c.description]])]),e("div",null,[s[19]||(s[19]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),E(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>c.website_url=t),type:"url",disabled:!d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,vl),[[z,c.website_url]])]),e("div",null,[s[20]||(s[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),E(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>c.contact_email=t),type:"email",disabled:!d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,xl),[[z,c.contact_email]])]),e("div",null,[s[21]||(s[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),E(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>c.contact_phone=t),type:"tel",disabled:!d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,yl),[[z,c.contact_phone]])]),d.value?(i(),n("div",_l,[e("button",{type:"submit",disabled:p.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},u(p.value?"Enregistrement...":"Enregistrer"),9,hl),e("button",{type:"button",onClick:T,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):F("",!0)],32)]),e("div",wl,[s[25]||(s[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:de(Y,["prevent"]),class:"space-y-4"},[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),E(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>L.current_password=t),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[z,L.current_password]])]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),E(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>L.password=t),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[z,L.password]])]),e("div",null,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),E(e("input",{"onUpdate:modelValue":s[10]||(s[10]=t=>L.password_confirmation=t),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[z,L.password_confirmation]])]),e("button",{type:"submit",disabled:v.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},u(v.value?"Mise à jour...":"Changer le mot de passe"),9,$l)],32)]),e("div",kl,[s[30]||(s[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",El,[e("div",Cl,[e("div",jl,[_(C(Ie),{class:"w-5 h-5 text-green-600"}),s[26]||(s[26]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",Sl,u(y(U.value?.email_verified_at)),1)]),l.value?.verified_at?(i(),n("div",Dl,[e("div",Vl,[_(C(Pe),{class:"w-5 h-5 text-blue-600"}),s[27]||(s[27]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",Al,u(y(l.value.verified_at)),1)])):F("",!0),e("div",Ul,[e("div",zl,[e("p",Il,u(b.value.events||0),1),s[28]||(s[28]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",Pl,[e("p",Tl,u(b.value.tickets||0),1),s[29]||(s[29]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])]))])]))}},Rl=ie(Bl,[["__scopeId","data-v-88f51db0"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Rl},Symbol.toStringTag,{value:"Module"}));export{Jl as B,Xl as E,Nl as O,R as a,Wl as b,Hl as c,Gl as d,Kl as e,Ll as g,ql as t};
