import{b as n,d as a,e,t as l,F,k as U,n as O,U as le,$ as ne,r as v,a0 as N,c as de,o as ae,w as ye,i as _,j as oe,f as p,v as M,A as J,L as B,g as fe,q as me,a1 as re,a2 as ve,a3 as he,a4 as we,a5 as _e,m as ge,a6 as pe}from"./vue-vendor-wiowK_YT.js";import{_ as ee}from"./account-BqF-FqoY.js";import{i as ke,a as Y,S as q,C as Ce,b as Me,L as Se,P as je,c as Ae,B as De,A as Pe,p as Te,d as Fe,e as Ue,f as Ee}from"./vendor-14XLBY50.js";const ze={name:"AdminDashboard",setup(){const d=v(!1),t=N({total_revenue:0,tickets_sold:0,active_events:0,active_users:0,total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,failed_payments:0,successful_payments:0,pending_payments:0,payments_in_transit:0,platform_commission:0}),m=v([]),s=v([]),i=v([]),u=v([]),o=de(()=>i.value.length===0?1:Math.max(...i.value.map(j=>j.amount))),r=async()=>{d.value=!0;try{const E=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success&&(Object.assign(t,E.data.stats),m.value=E.data.recent_orders,s.value=E.data.recent_activity,i.value=E.data.revenue_data,u.value=E.data.top_events)}catch(j){console.error("Erreur chargement dashboard admin:",j)}finally{d.value=!1}},y=async()=>{try{const E=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(E.success){const g=E.data.balances.reduce((h,D)=>h+D.amount,0);alert(`Solde SHAP total: ${x(g)} XAF`)}}catch(j){console.error("Erreur vérification solde SHAP:",j)}},b=j=>{this.$router.push(`/admin/orders/${j.id}`)},x=j=>new Intl.NumberFormat("fr-FR").format(j),T=j=>new Date(j).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),z=j=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[j]||j,A=j=>({cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[j]||"bg-gray-100 text-gray-800",$=j=>"text-gray-600",H=()=>{Object.assign(t,{total_revenue:85e5,tickets_sold:342,active_events:23,active_users:156,total_users:1247,total_organizers:89,total_events:156,orders_today:23,revenue_today:285e4,successful_payments:142,pending_payments:8,failed_payments:3,payments_in_transit:475e4,platform_commission:285e3}),m.value=[{id:1,reference:"PMT-2025-001",customer_name:"Jean Dupont",customer_email:"jean@email.com",total_amount:15e3,status:"paid",created_at:new Date},{id:2,reference:"PMT-2025-002",customer_name:"Marie Martin",customer_email:"marie@email.com",total_amount:25e3,status:"pending",created_at:new Date(Date.now()-3e5)}]};return ae(()=>{r(),setTimeout(()=>{t.total_users===0&&H()},2e3)}),{loading:d,stats:t,recentOrders:m,recentActivity:s,revenueData:i,topEvents:u,maxRevenue:o,loadDashboardData:r,checkShapBalance:y,viewOrder:b,formatAmount:x,formatDate:T,getOrderStatusName:z,getOrderStatusClass:A,getActivityIconClass:$}}},Oe={class:"admin-dashboard p-6"},Re={key:0,class:"flex justify-center items-center h-64"},Be={key:1},Ve={class:"flex md:grid gap-3 md:gap-6 mb-8 overflow-x-auto md:overflow-x-visible pb-2 md:pb-0 md:grid-cols-2 lg:grid-cols-4"},Ie={class:"flex items-center"},$e={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Le={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qe={class:"ml-4"},Ne={class:"text-2xl font-bold",style:{color:"#272d63"}},He={class:"flex items-center"},Xe={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Ge={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ke={class:"ml-4"},We={class:"text-2xl font-bold",style:{color:"#fab511"}},Je={class:"flex items-center"},Ye={class:"ml-4"},Ze={class:"text-2xl font-bold text-green-600"},Qe={class:"flex items-center"},et={class:"ml-4"},tt={class:"text-2xl font-bold text-purple-600"},st={class:"flex md:grid gap-3 md:gap-6 mb-8 overflow-x-auto md:overflow-x-visible pb-2 md:pb-0 md:grid-cols-2 lg:grid-cols-4"},ot={class:"bg-white rounded-lg shadow p-6 flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto"},rt={class:"flex items-center"},lt={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},at={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},nt={class:"ml-4"},it={class:"text-2xl font-bold",style:{color:"#272d63"}},dt={class:"bg-white rounded-lg shadow p-6 flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto"},ut={class:"flex items-center"},ct={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},mt={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt={class:"ml-4"},pt={class:"text-2xl font-bold",style:{color:"#fab511"}},ft={class:"bg-white rounded-lg shadow p-6 flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto"},xt={class:"flex items-center"},vt={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.15)"}},yt={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},bt={class:"ml-4"},ht={class:"text-2xl font-bold",style:{color:"#272d63"}},wt={class:"bg-white rounded-lg shadow p-6 flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto"},_t={class:"flex items-center"},kt={class:"ml-4"},Ct={class:"text-2xl font-bold text-red-600"},Mt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},St={class:"lg:col-span-2"},jt={class:"bg-white rounded-lg shadow p-6"},At={class:"flex justify-between items-center mb-4"},Dt={key:0,class:"text-center text-gray-500 py-8"},Pt={key:1,class:"overflow-x-auto"},Tt={class:"w-full"},Ft={class:"divide-y divide-gray-200"},Ut={class:"px-4 py-4 text-sm font-medium text-blue-600"},Et=["onClick"],zt={class:"px-4 py-4 text-sm text-gray-900"},Ot={class:"px-4 py-4 text-sm font-medium text-gray-900"},Rt={class:"px-4 py-4 text-sm"},Bt={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{"background-color":"rgba(250, 181, 17, 0.1)",color:"#fab511"}},Vt={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{"background-color":"rgba(39, 45, 99, 0.1)",color:"#272d63"}},It={class:"px-4 py-4 text-sm text-gray-500"},$t={class:"lg:col-span-1 space-y-6"},Lt={class:"bg-white rounded-lg shadow p-6"},qt={class:"space-y-3"},Nt={class:"flex justify-between items-center"},Ht={class:"bg-white rounded-lg shadow p-6"},Xt={class:"space-y-3"},Gt={class:"flex-1"},Kt={class:"text-sm text-gray-900"},Wt={class:"text-xs text-gray-500"},Jt={class:"bg-white rounded-lg shadow p-6"},Yt={class:"space-y-3"},Zt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Qt={class:"bg-white rounded-lg shadow p-6"},es={key:0,class:"text-center text-gray-500 py-8"},ts={key:1,class:"space-y-3"},ss={class:"text-sm text-gray-600"},os={class:"flex items-center"},rs={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},ls={class:"text-sm font-medium"},as={class:"bg-white rounded-lg shadow p-6"},ns={key:0,class:"text-center text-gray-500 py-8"},is={key:1,class:"space-y-4"},ds={class:"flex items-center"},us={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},cs={class:"font-medium text-gray-900"},ms={class:"text-sm text-gray-600"},gs={class:"text-right"},ps={class:"font-medium text-gray-900"},fs={class:"text-sm text-gray-600"};function xs(d,t,m,s,i,u){return a(),n("div",Oe,[t[41]||(t[41]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Tableau de Bord Primea"),e("p",{class:"text-white opacity-80"},"Supervision des paiements et transactions de la plateforme")])],-1)),s.loading?(a(),n("div",Re,[...t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(a(),n("div",Be,[e("div",Ve,[e("div",{class:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-lg transition-shadow flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto",onClick:t[0]||(t[0]=o=>d.$router.push("/admin/payments"))},[e("div",Ie,[e("div",$e,[(a(),n("svg",Le,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",qe,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",Ne,l(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])]),e("div",{class:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-lg transition-shadow flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto",onClick:t[1]||(t[1]=o=>d.$router.push("/admin/orders"))},[e("div",He,[e("div",Xe,[(a(),n("svg",Ge,[...t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])]))]),e("div",Ke,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",We,l(s.stats.tickets_sold||0),1)])])]),e("div",{class:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-lg transition-shadow flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto",onClick:t[2]||(t[2]=o=>d.$router.push("/admin/events"))},[e("div",Je,[t[17]||(t[17]=e("div",{class:"p-2 rounded-lg bg-green-100"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",Ye,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Événements Actifs",-1)),e("p",Ze,l(s.stats.active_events||0),1)])])]),e("div",{class:"bg-white rounded-lg shadow p-6 cursor-pointer hover:shadow-lg transition-shadow flex-shrink-0 w-[calc(50%-0.375rem)] md:w-auto",onClick:t[3]||(t[3]=o=>d.$router.push("/admin/users"))},[e("div",Qe,[t[19]||(t[19]=e("div",{class:"p-2 rounded-lg bg-purple-100"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",et,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Utilisateurs Actifs",-1)),e("p",tt,l(s.stats.active_users||0),1)])])])]),e("div",st,[e("div",ot,[e("div",rt,[e("div",lt,[(a(),n("svg",at,[...t[20]||(t[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",nt,[t[21]||(t[21]=e("p",{class:"text-sm text-gray-600"},"Paiements Réussis",-1)),e("p",it,l(s.stats.successful_payments||0),1)])])]),e("div",dt,[e("div",ut,[e("div",ct,[(a(),n("svg",mt,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),e("div",gt,[t[23]||(t[23]=e("p",{class:"text-sm text-gray-600"},"Paiements En Attente",-1)),e("p",pt,l(s.stats.pending_payments||0),1)])])]),e("div",ft,[e("div",xt,[e("div",vt,[(a(),n("svg",yt,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",bt,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Commission Plateforme",-1)),e("p",ht,l(s.formatAmount(s.stats.platform_commission||0))+" XAF",1)])])]),e("div",wt,[e("div",_t,[t[27]||(t[27]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",kt,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",Ct,l(s.stats.failed_payments||0),1)])])])]),e("div",Mt,[e("div",St,[e("div",jt,[e("div",At,[t[28]||(t[28]=e("h2",{class:"text-xl font-bold",style:{color:"#272d63"}},"Paiements Récents",-1)),e("button",{onClick:t[4]||(t[4]=o=>d.$router.push("/admin/payments")),class:"text-sm transition-colors duration-200",style:{color:"#272d63"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.color="#fab511"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.color="#272d63")},"Voir tous",32)]),s.recentOrders.length===0?(a(),n("div",Dt," Aucune commande récente ")):(a(),n("div",Pt,[e("table",Tt,[t[29]||(t[29]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",Ft,[(a(!0),n(F,null,U(s.recentOrders,o=>(a(),n("tr",{key:o.id},[e("td",Ut,[e("button",{onClick:r=>s.viewOrder(o),class:"hover:text-blue-800"}," #"+l(o.reference),9,Et)]),e("td",zt,l(o.customer_name||o.customer_email),1),e("td",Ot,l(s.formatAmount(o.total_amount))+" XAF",1),e("td",Rt,[o.status==="pending"?(a(),n("span",Bt,l(s.getOrderStatusName(o.status)),1)):o.status==="paid"?(a(),n("span",Vt,l(s.getOrderStatusName(o.status)),1)):(a(),n("span",{key:2,class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getOrderStatusClass(o.status)])},l(s.getOrderStatusName(o.status)),3))]),e("td",It,l(s.formatDate(o.created_at)),1)]))),128))])])]))])]),e("div",$t,[e("div",Lt,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",qt,[t[31]||(t[31]=le('<div class="flex justify-between items-center" data-v-8c3f82a3><span class="text-sm text-gray-600" data-v-8c3f82a3>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full" style="background-color:rgba(39, 45, 99, 0.1);color:#272d63;" data-v-8c3f82a3> Opérationnel </span></div><div class="flex justify-between items-center" data-v-8c3f82a3><span class="text-sm text-gray-600" data-v-8c3f82a3>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full" style="background-color:rgba(39, 45, 99, 0.1);color:#272d63;" data-v-8c3f82a3> Opérationnel </span></div>',2)),e("div",Nt,[t[30]||(t[30]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[7]||(t[7]=(...o)=>s.checkShapBalance&&s.checkShapBalance(...o)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",Ht,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",Xt,[(a(!0),n(F,null,U(s.recentActivity,o=>(a(),n("div",{key:o.id,class:"flex items-start"},[e("div",{class:O(["p-1 rounded-full mr-3",s.getActivityIconClass(o.type)])},[...t[33]||(t[33]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",Gt,[e("p",Kt,l(o.description),1),e("p",Wt,l(s.formatDate(o.created_at)),1)])]))),128))])]),e("div",Jt,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",Yt,[e("button",{onClick:t[8]||(t[8]=o=>d.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[35]||(t[35]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[9]||(t[9]=o=>d.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[36]||(t[36]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[10]||(t[10]=o=>d.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[37]||(t[37]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",Zt,[e("div",Qt,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),s.revenueData.length===0?(a(),n("div",es," Aucune donnée disponible ")):(a(),n("div",ts,[(a(!0),n(F,null,U(s.revenueData,o=>(a(),n("div",{key:o.date,class:"flex justify-between items-center"},[e("span",ss,l(s.formatDate(o.date)),1),e("div",os,[e("div",rs,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ne(`width: ${o.amount/s.maxRevenue*100}%`)},null,4)]),e("span",ls,l(s.formatAmount(o.amount))+" XAF",1)])]))),128))]))]),e("div",as,[t[40]||(t[40]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),s.topEvents.length===0?(a(),n("div",ns," Aucun événement populaire ")):(a(),n("div",is,[(a(!0),n(F,null,U(s.topEvents,(o,r)=>(a(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",ds,[e("div",us,l(r+1),1),e("div",null,[e("h3",cs,l(o.title),1),e("p",ms,l(o.organizer_name),1)])]),e("div",gs,[e("p",ps,l(o.tickets_sold)+" tickets",1),e("p",fs,l(s.formatAmount(o.revenue))+" XAF",1)])]))),128))]))])])]))])}const vs=ee(ze,[["render",xs],["__scopeId","data-v-8c3f82a3"]]),I_=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),ys={name:"ImageUpload",props:{modelValue:{type:Object,default:()=>({})},entityType:{type:String,required:!0,validator:d=>["events","venues","users","organizers"].includes(d)},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},altText:{type:String,default:"Image"}},emits:["update:modelValue","change"],setup(d,{emit:t}){const m=v("upload"),s=v(null),i=v(""),u=v(""),o=v(!1),r=v(!1),y=v(!1),b=v(!1),x=v(!1),T=v(!1),z=v(""),A=de(()=>d.modelValue?.url?d.modelValue.url:d.modelValue?.filename?`/storage/images/${d.entityType}/${d.size}_${d.modelValue.filename}`:null),$=de(()=>{const k="object-cover rounded-lg shadow-sm",P={thumbnail:"w-20 h-20",medium:"w-32 h-32",large:"w-48 h-48"};return`${k} ${P[d.size]||P.medium}`}),H=k=>{k.preventDefault(),y.value=!1;const P=k.dataTransfer.files;P.length>0&&E(P[0])},j=k=>{const P=k.target.files;P.length>0&&E(P[0])},E=k=>{if(z.value="",!k.type.startsWith("image/")){z.value="Veuillez sélectionner un fichier image valide.";return}if(k.size>5*1024*1024){z.value="L'image ne doit pas dépasser 5MB.";return}s.value=k;const P=new FileReader;P.onload=c=>{i.value=c.target.result},P.readAsDataURL(k)},S=async()=>{if(s.value){b.value=!0,T.value=!0,z.value="";try{const k=new FormData;k.append("image",s.value),k.append("type",d.entityType);const c=await(await fetch("/api/v1/images/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:k})).json();if(c.success){const f={filename:c.data.filename,urls:c.data.urls};t("update:modelValue",f),t("change",f),s.value=null,i.value=""}else z.value=c.message||"Erreur lors de l'upload"}catch{z.value="Erreur de connexion lors de l'upload"}finally{b.value=!1,T.value=!1}}},g=async()=>{if(u.value){x.value=!0,T.value=!0,z.value="",r.value=!1;try{const P=await(await fetch("/api/v1/images/validate-url",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({url:u.value,type:d.entityType})})).json();P.success?o.value=!0:(r.value=!0,z.value=P.message)}catch{r.value=!0,z.value="Erreur lors de la validation de l'URL"}finally{x.value=!1,T.value=!1}}},h=()=>{const k={url:u.value};t("update:modelValue",k),t("change",k),u.value="",o.value=!1},D=()=>{t("update:modelValue",{}),t("change",{})},C=k=>{if(k===0)return"0 Bytes";const P=1024,c=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(k)/Math.log(P));return parseFloat((k/Math.pow(P,f)).toFixed(2))+" "+c[f]};return ye([m],()=>{z.value="",r.value=!1}),{activeTab:m,selectedFile:s,previewUrl:i,imageUrl:u,urlPreview:o,urlError:r,isDragOver:y,uploading:b,validating:x,loading:T,error:z,currentImageUrl:A,imageClasses:$,handleDrop:H,handleFileSelect:j,uploadFile:S,validateImageUrl:g,confirmUrl:h,removeImage:D,formatFileSize:C}}},bs={class:"image-upload-component"},hs={key:0,class:"current-image mb-4"},ws=["src","alt"],_s={key:1,class:"upload-options"},ks={class:"option-tabs mb-4"},Cs={key:0,class:"upload-tab"},Ms={key:0,class:"file-preview mt-4"},Ss=["src"],js={class:"file-info"},As={class:"file-name"},Ds={class:"file-size"},Ps=["disabled"],Ts={key:0},Fs={key:1},Us={key:1,class:"url-tab"},Es={class:"url-input-group"},zs=["disabled"],Os={key:0},Rs={key:1},Bs={key:0,class:"url-preview mt-4"},Vs=["src"],Is={key:1,class:"error-message mt-2"},$s={key:2,class:"error-message mt-2"},Ls={key:3,class:"loading-overlay"};function qs(d,t,m,s,i,u){return a(),n("div",bs,[s.currentImageUrl?(a(),n("div",hs,[e("img",{src:s.currentImageUrl,alt:m.altText,class:O(s.imageClasses)},null,10,ws),m.disabled?_("",!0):(a(),n("button",{key:0,type:"button",onClick:t[0]||(t[0]=(...o)=>s.removeImage&&s.removeImage(...o)),class:"remove-btn"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]))])):_("",!0),m.disabled?_("",!0):(a(),n("div",_s,[e("div",ks,[e("button",{type:"button",onClick:t[1]||(t[1]=o=>s.activeTab="upload"),class:O(["tab-btn",s.activeTab==="upload"?"active":""])}," Uploader une image ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>s.activeTab="url"),class:O(["tab-btn",s.activeTab==="url"?"active":""])}," Utiliser une URL ",2)]),s.activeTab==="upload"?(a(),n("div",Cs,[e("div",{class:O(["upload-area",{dragover:s.isDragOver}]),onDrop:t[5]||(t[5]=(...o)=>s.handleDrop&&s.handleDrop(...o)),onDragover:[t[6]||(t[6]=oe(()=>{},["prevent"])),t[9]||(t[9]=o=>s.isDragOver=!0)],onDragenter:t[7]||(t[7]=oe(()=>{},["prevent"])),onDragleave:t[8]||(t[8]=o=>s.isDragOver=!1)},[e("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:t[3]||(t[3]=(...o)=>s.handleFileSelect&&s.handleFileSelect(...o)),style:{display:"none"}},null,544),e("div",{class:"upload-content",onClick:t[4]||(t[4]=o=>d.$refs.fileInput.click())},[...t[17]||(t[17]=[e("svg",{class:"upload-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),e("p",{class:"upload-text"},"Cliquez pour sélectionner ou glissez-déposez une image",-1),e("p",{class:"upload-subtext"},"PNG, JPG, GIF jusqu'à 5MB",-1)])])],34),s.selectedFile?(a(),n("div",Ms,[e("img",{src:s.previewUrl,alt:"Prévisualisation",class:"preview-image"},null,8,Ss),e("div",js,[e("p",As,l(s.selectedFile.name),1),e("p",Ds,l(s.formatFileSize(s.selectedFile.size)),1)]),e("button",{type:"button",onClick:t[10]||(t[10]=(...o)=>s.uploadFile&&s.uploadFile(...o)),disabled:s.uploading,class:"upload-btn"},[s.uploading?(a(),n("span",Ts,"Upload en cours...")):(a(),n("span",Fs,"Confirmer l'upload"))],8,Ps)])):_("",!0)])):_("",!0),s.activeTab==="url"?(a(),n("div",Us,[e("div",Es,[p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.imageUrl=o),type:"url",placeholder:"https://exemple.com/image.jpg",class:"url-input",onBlur:t[12]||(t[12]=(...o)=>s.validateImageUrl&&s.validateImageUrl(...o))},null,544),[[M,s.imageUrl]]),e("button",{type:"button",onClick:t[13]||(t[13]=(...o)=>s.validateImageUrl&&s.validateImageUrl(...o)),disabled:s.validating,class:"validate-btn"},[s.validating?(a(),n("span",Os,"Validation...")):(a(),n("span",Rs,"Valider"))],8,zs)]),s.urlPreview?(a(),n("div",Bs,[e("img",{src:s.imageUrl,alt:"Prévisualisation URL",class:"preview-image",onError:t[14]||(t[14]=o=>s.urlError=!0)},null,40,Vs),e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.confirmUrl&&s.confirmUrl(...o)),class:"confirm-btn"},"Utiliser cette image")])):_("",!0),s.urlError?(a(),n("div",Is," L'URL ne pointe pas vers une image valide ou accessible. ")):_("",!0)])):_("",!0)])),s.error?(a(),n("div",$s,l(s.error),1)):_("",!0),s.loading?(a(),n("div",Ls,[...t[18]||(t[18]=[e("div",{class:"loading-spinner"},null,-1)])])):_("",!0)])}const xe=ee(ys,[["render",qs],["__scopeId","data-v-15a93d0e"]]),Ns={name:"UserManagement",components:{ImageUpload:xe},setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v(null),u=v(null),o=v([]),r=N({search:"",role:"",status:""}),y=N({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}});let b=null;const x=async()=>{d.value=!0;try{const C=new URLSearchParams;r.search&&C.append("search",r.search),r.role&&C.append("role",r.role),r.status&&C.append("status",r.status);const P=await(await fetch(`/api/v1/admin/users?${C}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();P.success&&(o.value=P.data.users.data||P.data.users)}catch(C){console.error("Erreur chargement utilisateurs:",C)}finally{d.value=!1}},T=()=>{clearTimeout(b),b=setTimeout(()=>{x()},500)},z=()=>{i.value=null,Object.assign(y,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}}),m.value=!0},A=C=>{i.value=C;let k={};C.avatar_url?k.url=C.avatar_url:C.avatar_file&&(k.filename=C.avatar_file),Object.assign(y,{name:C.name,email:C.email,password:"",is_admin:C.roles?.some(P=>P.slug==="admin")||!1,is_organizer:C.roles?.some(P=>P.slug==="organizer")||!1,is_active:C.status==="active",avatar:k}),m.value=!0},$=async()=>{t.value=!0;try{const C=i.value?`/api/v1/admin/users/${i.value.id}`:"/api/v1/admin/users",k=i.value?"PUT":"POST",P={...y};delete P.password,y.avatar.url?(P.avatar_url=y.avatar.url,P.avatar_file=null):y.avatar.filename&&(P.avatar_file=y.avatar.filename,P.avatar_url=null),delete P.avatar;const f=await(await fetch(C,{method:k,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(P)})).json();f.success?(Toast.fire({icon:"success",title:f.message||(i.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès")}),m.value=!1,x()):Swal.fire({icon:"error",title:"Erreur",text:f.message||"Erreur lors de la sauvegarde"})}catch(C){console.error("Erreur sauvegarde utilisateur:",C),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},H=async C=>{if((await confirmAction("Changer le statut de l'utilisateur",`Êtes-vous sûr de vouloir ${C.status==="active"?"désactiver":"activer"} cet utilisateur ?`,C.status==="active"?"Désactiver":"Activer")).isConfirmed)try{const c=await(await fetch(`/api/v1/admin/users/${C.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();c.success?(Toast.fire({icon:"success",title:c.message||"Statut mis à jour avec succès"}),x()):Swal.fire({icon:"error",title:"Erreur",text:c.message||"Erreur lors du changement de statut"})}catch(P){console.error("Erreur toggle statut:",P),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors du changement de statut"})}},j=C=>{u.value=C,s.value=!0},E=async C=>{if((await confirmAction("Réinitialiser le mot de passe",`Envoyer un email de réinitialisation à ${C.name} (${C.email}) ?`,"Envoyer l'email")).isConfirmed)try{const c=await(await fetch(`/api/v1/admin/users/${C.id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();c.success?Toast.fire({icon:"success",title:c.message||"Email de réinitialisation envoyé avec succès"}):Swal.fire({icon:"error",title:"Erreur",text:c.message||"Erreur lors de l'envoi de l'email"})}catch(P){console.error("Erreur reset mot de passe:",P),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de l'envoi de l'email"})}},S=()=>{Object.assign(r,{search:"",role:"",status:""}),x()},g=C=>{y.avatar=C},h=C=>new Date(C).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),D=C=>({admin:"Administrateur",organizer:"Organisateur",client:"Client"})[C]||C;return ae(()=>{x()}),{loading:d,saving:t,showModal:m,showDetailsModal:s,editingUser:i,selectedUser:u,users:o,filters:r,userForm:y,loadUsers:x,debouncedSearch:T,openCreateModal:z,editUser:A,saveUser:$,toggleUserStatus:H,viewUserDetails:j,resetUserPassword:E,resetFilters:S,handleImageChange:g,formatDate:h,getRoleName:D}}},Hs={class:"user-management p-6 bg-gray-50 min-h-screen"},Xs={class:"mb-8"},Gs={class:"flex items-center justify-between"},Ks={class:"bg-white rounded-lg shadow p-6 mb-8"},Ws={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Js={class:"flex items-end"},Ys={class:"bg-white rounded-lg shadow"},Zs={key:0,class:"p-8 text-center"},Qs={key:1,class:"p-8 text-center text-gray-500"},eo={key:2,class:"overflow-x-auto"},to={class:"w-full"},so={class:"divide-y divide-gray-200"},oo={class:"px-6 py-4"},ro={class:"flex items-center"},lo={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},ao={class:"ml-4"},no={class:"text-sm font-medium text-gray-900"},io={class:"text-sm text-gray-500"},uo={class:"px-6 py-4 text-sm text-gray-900"},co={class:"px-6 py-4 text-sm"},mo={class:"space-y-1"},go={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},po={class:"px-6 py-4 text-sm"},fo=["onClick"],xo={class:"px-6 py-4 text-sm text-gray-500"},vo={class:"px-6 py-4 text-sm space-x-2"},yo=["onClick"],bo=["onClick"],ho=["onClick"],wo={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_o={class:"bg-white rounded-lg p-6 w-full max-w-md"},ko={class:"text-lg font-bold mb-4"},Co={class:"space-y-4"},Mo={key:0,class:"bg-blue-50 p-4 rounded-lg"},So={class:"space-y-2"},jo={class:"flex items-center"},Ao={class:"flex items-center"},Do={key:1},Po={class:"flex items-center"},To={class:"flex justify-end space-x-3 mt-6"},Fo=["disabled"],Uo={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Eo={class:"bg-white rounded-lg p-6 w-full max-w-lg"},zo={class:"flex justify-between items-center mb-4"},Oo={key:0,class:"space-y-4"},Ro={class:"grid grid-cols-2 gap-4"},Bo={class:"text-sm text-gray-900"},Vo={class:"text-sm text-gray-900"},Io={class:"text-sm"},$o={class:"space-y-1"},Lo={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},qo={class:"text-sm text-gray-900"},No={class:"text-sm text-gray-900"},Ho={key:0},Xo={class:"text-sm text-gray-900"};function Go(d,t,m,s,i,u){const o=me("ImageUpload");return a(),n("div",Hs,[e("div",Xs,[e("div",Gs,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...r)=>s.openCreateModal&&s.openCreateModal(...r)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Créer Utilisateur ",-1)])])])]),e("div",Ks,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Ws,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.filters.search=r),onInput:t[2]||(t[2]=(...r)=>s.debouncedSearch&&s.debouncedSearch(...r)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.filters.role=r),onChange:t[4]||(t[4]=(...r)=>s.loadUsers&&s.loadUsers(...r)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[B,s.filters.role]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.filters.status=r),onChange:t[6]||(t[6]=(...r)=>s.loadUsers&&s.loadUsers(...r)),class:"w-full border rounded-lg px-3 py-2"},[...t[22]||(t[22]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[B,s.filters.status]])]),e("div",Js,[e("button",{onClick:t[7]||(t[7]=(...r)=>s.resetFilters&&s.resetFilters(...r)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ys,[t[27]||(t[27]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),s.loading?(a(),n("div",Zs,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.users.length===0?(a(),n("div",Qs," Aucun utilisateur trouvé ")):(a(),n("div",eo,[e("table",to,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",so,[(a(!0),n(F,null,U(s.users,r=>(a(),n("tr",{key:r.id},[e("td",oo,[e("div",ro,[e("div",lo,l(r.name.charAt(0).toUpperCase()),1),e("div",ao,[e("div",no,l(r.name),1),e("div",io,"ID: "+l(r.id),1)])])]),e("td",uo,l(r.email),1),e("td",co,[e("div",mo,[r.roles&&r.roles.length>0?(a(!0),n(F,{key:0},U(r.roles,y=>(a(),n("span",{key:y.id,class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":y.slug==="admin","bg-green-100 text-green-800":y.slug==="organizer","bg-gray-100 text-gray-800":y.slug==="client"}])},l(s.getRoleName(y.slug)),3))),128)):(a(),n("span",go," Aucun rôle "))])]),e("td",po,[e("button",{onClick:y=>s.toggleUserStatus(r),class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(r.status==="active"?"Actif":"Inactif"),11,fo)]),e("td",xo,l(s.formatDate(r.created_at)),1),e("td",vo,[e("button",{onClick:y=>s.editUser(r),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,yo),e("button",{onClick:y=>s.viewUserDetails(r),class:"text-green-600 hover:text-green-900"}," Détails ",8,bo),e("button",{onClick:y=>s.resetUserPassword(r),class:"text-orange-600 hover:text-orange-900"}," Reset mot de passe ",8,ho)])]))),128))])])]))]),s.showModal?(a(),n("div",wo,[e("div",_o,[e("h3",ko,l(s.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[15]||(t[15]=oe((...r)=>s.saveUser&&s.saveUser(...r),["prevent"]))},[e("div",Co,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),p(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s.userForm.name=r),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.userForm.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>s.userForm.email=r),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.userForm.email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photo de profil",-1)),fe(o,{modelValue:s.userForm.avatar,"onUpdate:modelValue":t[10]||(t[10]=r=>s.userForm.avatar=r),"entity-type":"users",size:"medium","alt-text":"Photo de profil",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),s.editingUser?_("",!0):(a(),n("div",Mo,[...t[31]||(t[31]=[e("p",{class:"text-sm text-blue-800"},[e("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),J(" Un email sera envoyé à l'utilisateur pour qu'il définisse son mot de passe ")],-1)])])),e("div",So,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",jo,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=r=>s.userForm.is_admin=r),class:"rounded border-gray-300"},null,512),[[re,s.userForm.is_admin]]),t[32]||(t[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",Ao,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=r=>s.userForm.is_organizer=r),class:"rounded border-gray-300"},null,512),[[re,s.userForm.is_organizer]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),s.editingUser?(a(),n("div",Do,[e("label",Po,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=r=>s.userForm.is_active=r),class:"rounded border-gray-300"},null,512),[[re,s.userForm.is_active]]),t[35]||(t[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):_("",!0)]),e("div",To,[e("button",{type:"button",onClick:t[14]||(t[14]=r=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(s.saving?"Enregistrement...":s.editingUser?"Mettre à jour":"Créer"),9,Fo)])],32)])])):_("",!0),s.showDetailsModal?(a(),n("div",Uo,[e("div",Eo,[e("div",zo,[t[37]||(t[37]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{type:"button",onClick:t[16]||(t[16]=r=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[36]||(t[36]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedUser?(a(),n("div",Oo,[e("div",Ro,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Bo,l(s.selectedUser.name),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Vo,l(s.selectedUser.email),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Io,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},l(s.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",$o,[s.selectedUser.roles&&s.selectedUser.roles.length>0?(a(!0),n(F,{key:0},U(s.selectedUser.roles,r=>(a(),n("span",{key:r.id,class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":r.slug==="admin","bg-green-100 text-green-800":r.slug==="organizer","bg-gray-100 text-gray-800":r.slug==="client"}])},l(s.getRoleName(r.slug)),3))),128)):(a(),n("span",Lo," Aucun rôle "))])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",qo,l(s.formatDate(s.selectedUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",No,l(s.selectedUser.email_verified_at?"Oui":"Non"),1)])]),s.selectedUser.is_organizer&&s.selectedUser.organizers_count>0?(a(),n("div",Ho,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",Xo,l(s.selectedUser.organizers_count)+" organisateur(s)",1)])):_("",!0)])):_("",!0)])])):_("",!0)])}const Ko=ee(Ns,[["render",Go],["__scopeId","data-v-14f06e99"]]),$_=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Wo={name:"OrganizerManagement",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v(!1),u=v(!1),o=v(null),r=v(null),y=v(null),b=v([]),x=v([]),T=v(null);let z=null;const A=N({search:"",status:"",verified:""}),$=N({name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),H=N({user_ids:[]});let j=null;const E=async()=>{d.value=!0;try{const I=new URLSearchParams;A.search&&I.append("search",A.search),A.status&&I.append("status",A.status),A.verified&&I.append("verified",A.verified);const ie=await(await fetch(`/api/v1/admin/organizers?${I}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();ie.success&&(b.value=ie.data.organizers.data||ie.data.organizers)}catch(I){console.error("Erreur chargement organisateurs:",I)}finally{d.value=!1}},S=async()=>{try{const te=await(await fetch("/api/v1/admin/users?role=organizer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(te.success){const ie=te.data.users.data||te.data.users||[];x.value=ie.filter(ce=>ce.roles&&ce.roles.some(R=>R.slug==="organizer"))}}catch(I){console.error("Erreur chargement utilisateurs:",I)}},g=()=>{clearTimeout(j),j=setTimeout(()=>{E()},500)},h=async()=>{o.value=null,Object.assign($,{name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),await S(),s.value=!0,await ve(),w()},D=async I=>{o.value=I,Object.assign($,{name:I.name,bio:I.bio||"",contact_email:I.contact_email,contact_phone:I.contact_phone||"",status:I.status,user_ids:I.users?I.users.map(te=>te.id):[]}),await S(),s.value=!0,await ve(),w()},C=async()=>{t.value=!0;try{const I=o.value?`/api/v1/admin/organizers/${o.value.id}`:"/api/v1/admin/organizers",te=o.value?"PUT":"POST",ie={...$};z&&z.isValidNumber()&&(ie.contact_phone=z.getNumber());const ce=await fetch(I,{method:te,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(ie)});if(ce.status===404&&o.value){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),s.value=!1,L(),E();return}const R=await ce.json();R.success?(Toast.fire({icon:"success",title:R.message||(o.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès")}),s.value=!1,L(),E()):Swal.fire({icon:"error",title:"Erreur",text:R.message||"Erreur lors de la sauvegarde"})}catch(I){console.error("Erreur sauvegarde organisateur:",I),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},k=I=>{r.value=I,i.value=!0},P=async I=>{y.value=I,H.user_ids=I.users?I.users.map(te=>te.id):[],await S(),u.value=!0},c=async()=>{m.value=!0;try{const I=await fetch(`/api/v1/admin/organizers/${y.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(H)});if(I.status===404){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),u.value=!1,E();return}const te=await I.json();te.success?(Toast.fire({icon:"success",title:"Utilisateurs mis à jour avec succès"}),u.value=!1,E()):Swal.fire({icon:"error",title:"Erreur",text:te.message||"Erreur lors de la mise à jour"})}catch(I){console.error("Erreur mise à jour utilisateurs:",I),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la mise à jour"})}finally{m.value=!1}},f=()=>{Object.assign(A,{search:"",status:"",verified:""}),E()},w=()=>{T.value&&!z&&(z=ke(T.value,{initialCountry:"ga",preferredCountries:["ga","cm","cg","ci","sn"],separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.11.1/build/js/utils.js"}),T.value.addEventListener("input",()=>{z.isValidNumber()&&($.contact_phone=z.getNumber())}),T.value.addEventListener("countrychange",()=>{$.contact_phone=z.getNumber()}))},L=()=>{z&&(z.destroy(),z=null)},Z=()=>{L(),s.value=!1},ue=I=>new Date(I).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=I=>({active:"Actif",inactive:"Inactif"})[I]||I,G=I=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"})[I]||"bg-gray-100 text-gray-800",X=()=>{b.value=[],x.value=[],r.value=null,y.value=null,o.value=null,s.value=!1,i.value=!1,u.value=!1,E()};return ae(()=>{X()}),{loading:d,saving:t,updatingUsers:m,showModal:s,showDetailsModal:i,showUserModal:u,editingOrganizer:o,selectedOrganizer:r,managingOrganizer:y,organizers:b,availableUsers:x,filters:A,organizerForm:$,userManagementForm:H,phoneInput:T,loadOrganizers:E,loadAvailableUsers:S,debouncedSearch:g,openCreateModal:h,editOrganizer:D,saveOrganizer:C,viewOrganizerDetails:k,manageUsers:P,updateOrganizerUsers:c,resetFilters:f,initPhoneInput:w,destroyPhoneInput:L,closeModal:Z,forceRefresh:X,formatDate:ue,getStatusName:V,getStatusBadgeClass:G}}},Jo={class:"organizer-management p-6 bg-gray-50 min-h-screen"},Yo={class:"mb-8"},Zo={class:"flex items-center justify-between"},Qo={class:"bg-white rounded-lg shadow p-6 mb-8"},er={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},tr={class:"flex items-end space-x-2"},sr={class:"bg-white rounded-lg shadow"},or={key:0,class:"p-8 text-center"},rr={key:1,class:"p-8 text-center text-gray-500"},lr={key:2,class:"overflow-x-auto"},ar={class:"w-full"},nr={class:"divide-y divide-gray-200"},ir={class:"px-6 py-4"},dr={class:"flex items-center"},ur={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},cr={class:"ml-4"},mr={class:"text-sm font-medium text-gray-900"},gr={class:"text-sm text-gray-500"},pr={class:"px-6 py-4"},fr={class:"text-sm text-gray-900"},xr={class:"text-sm text-gray-500"},vr={class:"px-6 py-4 text-sm text-gray-900"},yr={class:"flex flex-wrap gap-1"},br={key:0,class:"text-gray-500 text-xs"},hr={class:"px-6 py-4 text-sm text-gray-900"},wr={class:"px-6 py-4 text-sm"},_r={class:"px-6 py-4 text-sm"},kr={class:"px-6 py-4 text-sm space-x-2"},Cr=["onClick"],Mr=["onClick"],Sr=["onClick"],jr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ar={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},Dr={class:"text-lg font-bold mb-4"},Pr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tr={class:"md:col-span-2"},Fr={class:"md:col-span-2"},Ur={class:"md:col-span-2"},Er={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},zr=["value"],Or={class:"ml-2 text-sm"},Rr={key:0,class:"text-sm text-gray-500"},Br={class:"flex justify-end space-x-3 mt-6"},Vr=["disabled"],Ir={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$r={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},Lr={class:"flex justify-between items-center mb-4"},qr={key:0,class:"space-y-4"},Nr={class:"grid grid-cols-2 gap-4"},Hr={class:"text-sm text-gray-900"},Xr={class:"text-sm text-gray-900"},Gr={class:"text-sm text-gray-900"},Kr={class:"text-sm text-gray-900"},Wr={class:"text-sm"},Jr={class:"text-sm"},Yr={class:"text-sm text-gray-900"},Zr={class:"text-sm text-gray-900"},Qr={key:0},el={class:"text-sm text-gray-900"},tl={key:1},sl={class:"flex flex-wrap gap-2"},ol={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},rl={class:"bg-white rounded-lg p-6 w-full max-w-md"},ll={class:"flex justify-between items-center mb-4"},al={key:0,class:"space-y-4"},nl={class:"font-medium text-gray-900 mb-2"},il={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},dl={class:"text-sm font-medium"},ul={class:"text-xs text-gray-500 block"},cl=["value"],ml={class:"flex justify-end space-x-3"},gl=["disabled"];function pl(d,t,m,s,i,u){return a(),n("div",Jo,[e("div",Yo,[e("div",Zo,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Créer Organisateur ",-1)])])])]),e("div",Qo,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",er,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[B,s.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut actif",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.verified=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],544),[[B,s.filters.verified]])]),e("div",tr,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser "),e("button",{onClick:t[8]||(t[8]=(...o)=>s.forceRefresh&&s.forceRefresh(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Actualiser ")])])]),e("div",sr,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),s.loading?(a(),n("div",or,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.organizers.length===0?(a(),n("div",rr," Aucun organisateur trouvé ")):(a(),n("div",lr,[e("table",ar,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",nr,[(a(!0),n(F,null,U(s.organizers,o=>(a(),n("tr",{key:o.id},[e("td",ir,[e("div",dr,[e("div",ur,l(o.name.charAt(0).toUpperCase()),1),e("div",cr,[e("div",mr,l(o.name),1),e("div",gr,l(o.slug),1)])])]),e("td",pr,[e("div",fr,l(o.contact_email),1),e("div",xr,l(o.contact_phone||"-"),1)]),e("td",vr,[e("div",yr,[(a(!0),n(F,null,U(o.users,r=>(a(),n("span",{key:r.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},l(r.name),1))),128)),o.users.length===0?(a(),n("span",br," Aucun utilisateur ")):_("",!0)])]),e("td",hr,l(o.events_count||0),1),e("td",wr,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},l(s.getStatusName(o.status)),3)]),e("td",_r,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(o.is_active?"Actif":"Inactif"),3)]),e("td",kr,[e("button",{onClick:r=>s.editOrganizer(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Cr),e("button",{onClick:r=>s.viewOrganizerDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,Mr),e("button",{onClick:r=>s.manageUsers(o),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,Sr)])]))),128))])])]))]),s.showModal?(a(),n("div",jr,[e("div",Ar,[e("h3",Dr,l(s.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=oe((...o)=>s.saveOrganizer&&s.saveOrganizer(...o),["prevent"]))},[e("div",Pr,[e("div",Tr,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.organizerForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.organizerForm.name]])]),e("div",Fr,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biographie",-1)),p(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.organizerForm.bio=o),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.organizerForm.bio]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.organizerForm.contact_email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),p(e("input",{ref:"phoneInput","onUpdate:modelValue":t[12]||(t[12]=o=>s.organizerForm.contact_phone=o),type:"tel",class:"w-full border rounded-lg px-3 py-2",placeholder:"Téléphone"},null,512),[[M,s.organizerForm.contact_phone]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),p(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.organizerForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[B,s.organizerForm.status]])]),e("div",Ur,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",Er,[(a(!0),n(F,null,U(s.availableUsers,o=>(a(),n("div",{key:o.id,class:"flex items-center mb-2"},[p(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[14]||(t[14]=r=>s.organizerForm.user_ids=r),class:"rounded border-gray-300"},null,8,zr),[[re,s.organizerForm.user_ids]]),e("span",Or,l(o.name)+" ("+l(o.email)+")",1)]))),128)),s.availableUsers.length===0?(a(),n("div",Rr," Aucun utilisateur disponible ")):_("",!0)])])]),e("div",Br,[e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(s.saving?"Enregistrement...":s.editingOrganizer?"Mettre à jour":"Créer"),9,Vr)])],32)])])):_("",!0),s.showDetailsModal?(a(),n("div",Ir,[e("div",$r,[e("div",Lr,[t[41]||(t[41]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[40]||(t[40]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrganizer?(a(),n("div",qr,[e("div",Nr,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Hr,l(s.selectedOrganizer.name),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",Xr,l(s.selectedOrganizer.slug),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Gr,l(s.selectedOrganizer.contact_email),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Kr,l(s.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Wr,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrganizer.status)])},l(s.getStatusName(s.selectedOrganizer.status)),3)])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut actif",-1)),e("p",Jr,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedOrganizer.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(s.selectedOrganizer.is_active?"Actif":"Inactif"),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Yr,l(s.formatDate(s.selectedOrganizer.created_at)),1)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",Zr,l(s.selectedOrganizer.events_count||0)+" événement(s)",1)])]),s.selectedOrganizer.bio?(a(),n("div",Qr,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Biographie",-1)),e("p",el,l(s.selectedOrganizer.bio),1)])):_("",!0),s.selectedOrganizer.users&&s.selectedOrganizer.users.length>0?(a(),n("div",tl,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",sl,[(a(!0),n(F,null,U(s.selectedOrganizer.users,o=>(a(),n("span",{key:o.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},l(o.name),1))),128))])])):_("",!0)])):_("",!0)])])):_("",!0),s.showUserModal?(a(),n("div",ol,[e("div",rl,[e("div",ll,[t[53]||(t[53]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[52]||(t[52]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.managingOrganizer?(a(),n("div",al,[e("div",null,[e("h4",nl,l(s.managingOrganizer.name),1),t[54]||(t[54]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",il,[(a(!0),n(F,null,U(s.availableUsers,o=>(a(),n("div",{key:o.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",dl,l(o.name),1),e("span",ul,l(o.email),1)]),p(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[19]||(t[19]=r=>s.userManagementForm.user_ids=r),class:"rounded border-gray-300"},null,8,cl),[[re,s.userManagementForm.user_ids]])]))),128))]),e("div",ml,[e("button",{onClick:t[20]||(t[20]=o=>s.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...o)=>s.updateOrganizerUsers&&s.updateOrganizerUsers(...o)),disabled:s.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(s.updatingUsers?"Mise à jour...":"Mettre à jour"),9,gl)])])):_("",!0)])])):_("",!0)])}const fl=ee(Wo,[["render",pl],["__scopeId","data-v-21a8738d"]]),L_=Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"})),xl={name:"EventManagement",components:{ImageUpload:xe},setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v(null),u=v(null),o=v([]),r=v([]),y=v([]),b=v([]),x=v(null),T=N({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),z=N({search:"",status:"",organizer_id:"",category_id:"",page:1}),A=N({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},schedules:[],ticket_types:[],new_venue_name:"",new_venue_city:"",new_venue_address:""}),$=v(!1);let H=null;const j=async()=>{d.value=!0;try{const R=new URLSearchParams;Object.keys(z).forEach(se=>{z[se]&&z[se]!==""&&R.append(se,z[se])});const K=await(await fetch(`/api/v1/admin/events?${R}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(K.success){o.value=K.data.events.data,x.value={current_page:K.data.events.current_page,last_page:K.data.events.last_page,from:K.data.events.from,to:K.data.events.to,total:K.data.events.total};const se=K.data.events.data;T.total_events=x.value.total,T.published_events=se.filter(W=>W.status==="published").length,T.draft_events=se.filter(W=>W.status==="draft").length,T.total_tickets_sold=se.reduce((W,be)=>W+(be.tickets_sold||0),0)}}catch(R){console.error("Erreur chargement événements:",R)}finally{d.value=!1}},E=async()=>{try{const Q=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();Q.success&&(r.value=Q.data.organizers.data||Q.data.organizers)}catch(R){console.error("Erreur chargement organisateurs:",R)}},S=async()=>{try{const Q=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();console.log("Categories response:",Q),Q.success&&(y.value=Q.categories||Q.data,console.log("Categories loaded:",y.value))}catch(R){console.error("Erreur chargement catégories:",R)}},g=async()=>{try{const Q=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();Q.success&&(b.value=Q.venues||Q.data)}catch(R){console.error("Erreur chargement lieux:",R),b.value=[]}},h=()=>{clearTimeout(H),H=setTimeout(()=>{z.page=1,j()},500)},D=R=>{R>=1&&R<=x.value.last_page&&(z.page=R,j())},C=()=>{Object.assign(z,{search:"",status:"",organizer_id:"",category_id:"",page:1}),j()},k=()=>{i.value=null,Object.assign(A,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),$.value=!1,m.value=!0},P=async R=>{try{const K=await(await fetch(`/api/v1/admin/events/${R.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(K.success){i.value=K.data.event;let se={};K.data.event.image_url?se.url=K.data.event.image_url:K.data.event.image_file&&(se.filename=K.data.event.image_file),Object.assign(A,{title:K.data.event.title,description:K.data.event.description,organizer_id:K.data.event.organizer_id,category_id:K.data.event.category_id,venue_id:K.data.event.venue_id,status:K.data.event.status,image:se,schedules:K.data.event.schedules?.map(W=>({starts_at:W.starts_at?W.starts_at.slice(0,16):"",ends_at:W.ends_at?W.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(K.data.event.ticket_types||K.data.event.ticketTypes||[]).map(W=>({name:W.name,price:W.price,capacity:W.capacity||W.available_quantity||W.max_quantity||W.quantity||0,description:W.description||""}))}),(!A.ticket_types||A.ticket_types.length===0)&&(A.ticket_types=[{name:"",price:0,capacity:0,description:""}]),m.value=!0}}catch(Q){console.error("Erreur chargement événement:",Q)}},c=async()=>{t.value=!0;try{const R=i.value?`/api/v1/admin/events/${i.value.id}`:"/api/v1/admin/events",Q=i.value?"PUT":"POST",K={...A};A.image.url?(K.image_url=A.image.url,K.image_file=null):A.image.filename&&(K.image_file=A.image.filename,K.image_url=null),delete K.image;const W=await(await fetch(R,{method:Q,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(K)})).json();W.success?(Swal.fire({icon:"success",title:"Succès",text:i.value?"Événement mis à jour avec succès":"Événement créé avec succès"}),m.value=!1,j()):Swal.fire({icon:"error",title:"Erreur",text:W.message||"Erreur lors de la sauvegarde"})}catch(R){console.error("Erreur sauvegarde événement:",R),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},f=async R=>{try{const K=await(await fetch(`/api/v1/admin/events/${R.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();K.success&&(u.value=K.data.event,s.value=!0)}catch(Q){console.error("Erreur chargement détails événement:",Q)}},w=async R=>{try{const K=await(await fetch(`/api/v1/admin/events/${R.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(K.success){const se=K.data.event;i.value=null,Object.assign(A,{title:`${se.title} (Copie)`,description:se.description||"",organizer_id:se.organizer_id,category_id:se.category_id,venue_id:se.venue_id,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:se.schedules?.map(W=>({starts_at:W.starts_at?W.starts_at.slice(0,16):"",ends_at:W.ends_at?W.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(se.ticket_types||se.ticketTypes||[]).map(W=>({name:W.name,price:W.price,capacity:W.capacity||W.available_quantity||W.max_quantity||W.quantity||0,description:W.description||""}))}),(!A.schedules||A.schedules.length===0)&&(A.schedules=[{starts_at:"",ends_at:""}]),(!A.ticket_types||A.ticket_types.length===0)&&(A.ticket_types=[{name:"",price:0,capacity:0,description:""}]),$.value=!1,m.value=!0}else Swal.fire({icon:"error",title:"Erreur",text:"Impossible de récupérer les détails de l'événement"})}catch(Q){console.error("Erreur duplication événement:",Q),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la duplication"})}},L=()=>{A.schedules.push({starts_at:"",ends_at:""})},Z=R=>{A.schedules.splice(R,1)},ue=()=>{A.ticket_types.push({name:"",price:0,capacity:0,description:""})},V=R=>{A.ticket_types.splice(R,1)},G=R=>new Intl.NumberFormat("fr-FR").format(R),X=R=>new Date(R).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=R=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[R]||R,te=R=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[R]||"bg-gray-100 text-gray-800";ye(()=>A.venue_id,R=>{R==="new"&&($.value=!0)});const ie=()=>{$.value=!1,A.venue_id="",A.new_venue_name="",A.new_venue_city="",A.new_venue_address=""},ce=R=>{A.image=R};return ae(()=>{j(),E(),S(),g()}),{loading:d,saving:t,showModal:m,showDetailsModal:s,editingEvent:i,selectedEvent:u,events:o,organizers:r,categories:y,venues:b,pagination:x,stats:T,filters:z,eventForm:A,showNewVenue:$,loadEvents:j,loadOrganizers:E,loadCategories:S,loadVenues:g,debouncedSearch:h,changePage:D,resetFilters:C,openCreateModal:k,editEvent:P,saveEvent:c,viewEventDetails:f,duplicateEvent:w,addSchedule:L,removeSchedule:Z,addTicketType:ue,removeTicketType:V,cancelNewVenue:ie,handleImageChange:ce,formatAmount:G,formatDateTime:X,getStatusName:I,getStatusBadgeClass:te,getTicketCapacity:R=>R.capacity||R.available_quantity||R.max_quantity||R.quantity||0}}},vl={class:"event-management p-6 bg-gray-50 min-h-screen"},yl={class:"mb-8"},bl={class:"flex items-center justify-between"},hl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},wl={class:"bg-white rounded-lg shadow p-6"},_l={class:"flex items-center"},kl={class:"ml-4"},Cl={class:"text-2xl font-bold text-blue-600"},Ml={class:"bg-white rounded-lg shadow p-6"},Sl={class:"flex items-center"},jl={class:"ml-4"},Al={class:"text-2xl font-bold text-green-600"},Dl={class:"bg-white rounded-lg shadow p-6"},Pl={class:"flex items-center"},Tl={class:"ml-4"},Fl={class:"text-2xl font-bold text-yellow-600"},Ul={class:"bg-white rounded-lg shadow p-6"},El={class:"flex items-center"},zl={class:"ml-4"},Ol={class:"text-2xl font-bold text-purple-600"},Rl={class:"bg-white rounded-lg shadow p-6 mb-8"},Bl={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Vl=["value"],Il=["value"],$l={class:"flex items-end"},Ll={class:"bg-white rounded-lg shadow"},ql={key:0,class:"p-8 text-center"},Nl={key:1,class:"p-8 text-center text-gray-500"},Hl={key:2,class:"overflow-x-auto"},Xl={class:"w-full"},Gl={class:"divide-y divide-gray-200"},Kl={class:"px-6 py-4"},Wl={class:"flex items-center"},Jl={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},Yl={class:"ml-4"},Zl={class:"text-sm font-medium text-gray-900"},Ql={class:"text-sm text-gray-500"},ea={class:"px-6 py-4 text-sm text-gray-900"},ta={class:"px-6 py-4 text-sm text-gray-900"},sa={class:"px-6 py-4 text-sm text-gray-900"},oa={class:"px-6 py-4 text-sm text-gray-900"},ra={class:"space-y-1"},la={class:"text-gray-500"},aa={class:"px-6 py-4 text-sm"},na={class:"px-6 py-4 text-sm space-x-2"},ia=["onClick"],da=["onClick"],ua=["onClick"],ca={key:3,class:"p-6 border-t"},ma={class:"flex justify-between items-center"},ga={class:"text-sm text-gray-700"},pa={class:"flex space-x-2"},fa=["disabled"],xa={class:"px-3 py-1 text-sm text-gray-600"},va=["disabled"],ya={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ba={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},ha={class:"text-lg font-bold mb-4"},wa={class:"space-y-6"},_a={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ka={class:"md:col-span-2"},Ca={class:"md:col-span-2"},Ma={class:"md:col-span-2"},Sa=["value"],ja=["value"],Aa={key:0},Da=["value"],Pa={key:1,class:"space-y-2"},Ta={class:"space-y-3"},Fa=["onUpdate:modelValue"],Ua=["onUpdate:modelValue"],Ea={class:"flex items-end"},za=["onClick"],Oa={class:"space-y-3"},Ra=["onUpdate:modelValue"],Ba=["onUpdate:modelValue"],Va=["onUpdate:modelValue"],Ia=["onUpdate:modelValue"],$a={class:"flex items-end"},La=["onClick"],qa={class:"flex justify-end space-x-3 mt-6"},Na=["disabled"],Ha={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Xa={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Ga={class:"flex justify-between items-center mb-4"},Ka={key:0,class:"space-y-6"},Wa={class:"grid grid-cols-2 gap-6"},Ja={class:"text-sm font-medium text-gray-900"},Ya={class:"text-sm text-gray-900"},Za={class:"text-sm text-gray-900"},Qa={class:"text-sm text-gray-900"},en={class:"text-sm text-gray-900"},tn={class:"text-sm text-gray-900"},sn={key:0},on={class:"space-y-2"},rn={class:"text-sm"},ln={key:1},an={class:"overflow-x-auto"},nn={class:"w-full text-sm border border-gray-200 rounded-lg"},dn={class:"bg-white divide-y divide-gray-200"},un={class:"px-4 py-3 font-medium text-gray-900"},cn={class:"px-4 py-3 text-gray-900"},mn={class:"px-4 py-3 text-gray-900"},gn={class:"px-4 py-3"},pn={class:"px-4 py-3 text-gray-600"},fn={key:2};function xn(d,t,m,s,i,u){const o=me("ImageUpload");return a(),n("div",vl,[e("div",yl,[e("div",bl,[t[29]||(t[29]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...r)=>s.openCreateModal&&s.openCreateModal(...r)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Créer Événement ",-1)])])])]),e("div",hl,[e("div",wl,[e("div",_l,[t[31]||(t[31]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",kl,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",Cl,l(s.stats.total_events||0),1)])])]),e("div",Ml,[e("div",Sl,[t[33]||(t[33]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",jl,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",Al,l(s.stats.published_events||0),1)])])]),e("div",Dl,[e("div",Pl,[t[35]||(t[35]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",Tl,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",Fl,l(s.stats.draft_events||0),1)])])]),e("div",Ul,[e("div",El,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",zl,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",Ol,l(s.stats.total_tickets_sold||0),1)])])])]),e("div",Rl,[t[45]||(t[45]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Bl,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.filters.search=r),onInput:t[2]||(t[2]=(...r)=>s.debouncedSearch&&s.debouncedSearch(...r)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.filters.status=r),onChange:t[4]||(t[4]=(...r)=>s.loadEvents&&s.loadEvents(...r)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[B,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.filters.organizer_id=r),onChange:t[6]||(t[6]=(...r)=>s.loadEvents&&s.loadEvents(...r)),class:"w-full border rounded-lg px-3 py-2"},[t[41]||(t[41]=e("option",{value:""},"Tous les organisateurs",-1)),(a(!0),n(F,null,U(s.organizers,r=>(a(),n("option",{key:r.id,value:r.id},l(r.name),9,Vl))),128))],544),[[B,s.filters.organizer_id]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.filters.category_id=r),onChange:t[8]||(t[8]=(...r)=>s.loadEvents&&s.loadEvents(...r)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Toutes les catégories",-1)),(a(!0),n(F,null,U(s.categories,r=>(a(),n("option",{key:r.id,value:r.id},l(r.name),9,Il))),128))],544),[[B,s.filters.category_id]])]),e("div",$l,[e("button",{onClick:t[9]||(t[9]=(...r)=>s.resetFilters&&s.resetFilters(...r)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ll,[t[48]||(t[48]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),s.loading?(a(),n("div",ql,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.events.length===0?(a(),n("div",Nl," Aucun événement trouvé ")):(a(),n("div",Hl,[e("table",Xl,[t[47]||(t[47]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Gl,[(a(!0),n(F,null,U(s.events,r=>(a(),n("tr",{key:r.id},[e("td",Kl,[e("div",Wl,[e("div",Jl,l(r.title.charAt(0).toUpperCase()),1),e("div",Yl,[e("div",Zl,l(r.title),1),e("div",Ql,l(r.slug),1)])])]),e("td",ea,l(r.organizer?.name||"-"),1),e("td",ta,l(r.category?.name||"-"),1),e("td",sa,l(r.schedules?.[0]?s.formatDateTime(r.schedules[0].starts_at):"Non programmé"),1),e("td",oa,[e("div",ra,[e("div",null,"Vendus: "+l(r.tickets_sold||0),1),e("div",la,"Total: "+l(r.total_capacity||0),1)])]),e("td",aa,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(r.status)])},l(s.getStatusName(r.status)),3)]),e("td",na,[e("button",{onClick:y=>s.editEvent(r),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,ia),e("button",{onClick:y=>s.viewEventDetails(r),class:"text-green-600 hover:text-green-900"}," Détails ",8,da),e("button",{onClick:y=>s.duplicateEvent(r),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,ua)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(a(),n("div",ca,[e("div",ma,[e("div",ga," Affichage "+l(s.pagination.from)+" à "+l(s.pagination.to)+" sur "+l(s.pagination.total)+" événements ",1),e("div",pa,[e("button",{onClick:t[10]||(t[10]=r=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,fa),e("span",xa," Page "+l(s.pagination.current_page)+" sur "+l(s.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=r=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,va)])])])):_("",!0)]),s.showModal?(a(),n("div",ya,[e("div",ba,[e("h3",ha,l(s.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[26]||(t[26]=oe((...r)=>s.saveEvent&&s.saveEvent(...r),["prevent"]))},[e("div",wa,[e("div",_a,[e("div",ka,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.eventForm.title=r),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.eventForm.title]])]),e("div",Ca,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),p(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=r=>s.eventForm.description=r),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.eventForm.description]])]),e("div",Ma,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image de l'événement",-1)),fe(o,{modelValue:s.eventForm.image,"onUpdate:modelValue":t[14]||(t[14]=r=>s.eventForm.image=r),"entity-type":"events",size:"medium","alt-text":"Image de l'événement",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),p(e("select",{"onUpdate:modelValue":t[15]||(t[15]=r=>s.eventForm.organizer_id=r),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[52]||(t[52]=e("option",{value:""},"Sélectionner un organisateur",-1)),(a(!0),n(F,null,U(s.organizers,r=>(a(),n("option",{key:r.id,value:r.id},l(r.name),9,Sa))),128))],512),[[B,s.eventForm.organizer_id]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),p(e("select",{"onUpdate:modelValue":t[16]||(t[16]=r=>s.eventForm.category_id=r),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[54]||(t[54]=e("option",{value:""},"Sélectionner une catégorie",-1)),(a(!0),n(F,null,U(s.categories,r=>(a(),n("option",{key:r.id,value:r.id},l(r.name),9,ja))),128))],512),[[B,s.eventForm.category_id]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),s.showNewVenue?_("",!0):(a(),n("div",Aa,[p(e("select",{"onUpdate:modelValue":t[17]||(t[17]=r=>s.eventForm.venue_id=r),class:"w-full border rounded-lg px-3 py-2"},[t[56]||(t[56]=e("option",{value:""},"Sélectionner un lieu",-1)),(a(!0),n(F,null,U(s.venues,r=>(a(),n("option",{key:r.id,value:r.id},l(r.name)+" - "+l(r.city),9,Da))),128)),t[57]||(t[57]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],512),[[B,s.eventForm.venue_id]])])),s.showNewVenue||s.eventForm.venue_id==="new"?(a(),n("div",Pa,[p(e("input",{"onUpdate:modelValue":t[18]||(t[18]=r=>s.eventForm.new_venue_name=r),type:"text",placeholder:"Nom du lieu",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[M,s.eventForm.new_venue_name]]),p(e("input",{"onUpdate:modelValue":t[19]||(t[19]=r=>s.eventForm.new_venue_city=r),type:"text",placeholder:"Ville",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[M,s.eventForm.new_venue_city]]),p(e("input",{"onUpdate:modelValue":t[20]||(t[20]=r=>s.eventForm.new_venue_address=r),type:"text",placeholder:"Adresse",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.eventForm.new_venue_address]]),e("button",{type:"button",onClick:t[21]||(t[21]=(...r)=>s.cancelNewVenue&&s.cancelNewVenue(...r)),class:"text-sm text-blue-600 hover:text-blue-800"}," Utiliser un lieu existant ")])):_("",!0)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),p(e("select",{"onUpdate:modelValue":t[22]||(t[22]=r=>s.eventForm.status=r),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[59]||(t[59]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[B,s.eventForm.status]])])]),e("div",null,[t[63]||(t[63]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",Ta,[(a(!0),n(F,null,U(s.eventForm.schedules,(r,y)=>(a(),n("div",{key:y,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),p(e("input",{"onUpdate:modelValue":b=>r.starts_at=b,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Fa),[[M,r.starts_at]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),p(e("input",{"onUpdate:modelValue":b=>r.ends_at=b,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Ua),[[M,r.ends_at]])]),e("div",Ea,[e("button",{type:"button",onClick:b=>s.removeSchedule(y),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,za)])]))),128)),e("button",{type:"button",onClick:t[23]||(t[23]=(...r)=>s.addSchedule&&s.addSchedule(...r)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[68]||(t[68]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",Oa,[(a(!0),n(F,null,U(s.eventForm.ticket_types,(r,y)=>(a(),n("div",{key:y,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),p(e("input",{"onUpdate:modelValue":b=>r.name=b,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Ra),[[M,r.name]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),p(e("input",{"onUpdate:modelValue":b=>r.price=b,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Ba),[[M,r.price,void 0,{number:!0}]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),p(e("input",{"onUpdate:modelValue":b=>r.capacity=b,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Va),[[M,r.capacity,void 0,{number:!0}]])]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),p(e("input",{"onUpdate:modelValue":b=>r.description=b,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,Ia),[[M,r.description]])]),e("div",$a,[e("button",{type:"button",onClick:b=>s.removeTicketType(y),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,La)])]))),128)),e("button",{type:"button",onClick:t[24]||(t[24]=(...r)=>s.addTicketType&&s.addTicketType(...r)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",qa,[e("button",{type:"button",onClick:t[25]||(t[25]=r=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(s.saving?"Enregistrement...":s.editingEvent?"Mettre à jour":"Créer"),9,Na)])],32)])])):_("",!0),s.showDetailsModal?(a(),n("div",Ha,[e("div",Xa,[e("div",Ga,[t[70]||(t[70]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[27]||(t[27]=r=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[69]||(t[69]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedEvent?(a(),n("div",Ka,[e("div",Wa,[e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Ja,l(s.selectedEvent.title),1)]),e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedEvent.status)])},l(s.getStatusName(s.selectedEvent.status)),3)]),e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Ya,l(s.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",Za,l(s.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Qa,l(s.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",en,l(s.formatDateTime(s.selectedEvent.created_at)),1)])]),e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",tn,l(s.selectedEvent.description),1)]),s.selectedEvent.schedules&&s.selectedEvent.schedules.length>0?(a(),n("div",sn,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",on,[(a(!0),n(F,null,U(s.selectedEvent.schedules,r=>(a(),n("div",{key:r.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",rn,"Du "+l(s.formatDateTime(r.starts_at))+" au "+l(s.formatDateTime(r.ends_at)),1)]))),128))])])):_("",!0),(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types)&&(s.selectedEvent.ticketTypes?.length>0||s.selectedEvent.ticket_types?.length>0)?(a(),n("div",ln,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",an,[e("table",nn,[t[79]||(t[79]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prix"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Capacité"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description")])],-1)),e("tbody",dn,[(a(!0),n(F,null,U(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types,r=>(a(),n("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",un,l(r.name),1),e("td",cn,l(s.formatAmount(r.price))+" XAF",1),e("td",mn,l(s.getTicketCapacity(r)),1),e("td",gn,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(r.status==="active"?"Actif":"Inactif"),3)]),e("td",pn,l(r.description||"-"),1)]))),128))])])])])):(a(),n("div",fn,[...t[81]||(t[81]=[e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1),e("div",{class:"bg-gray-50 p-4 rounded-lg text-center"},[e("p",{class:"text-gray-500"},"Aucun type de billet défini pour cet événement")],-1)])]))])):_("",!0)])])):_("",!0)])}const vn=ee(xl,[["render",xn],["__scopeId","data-v-07caf94a"]]),q_=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"})),yn={name:"OrderManagement",setup(){const d=v(!1),t=v(!1),m=v(null),s=v([]),i=v([]),u=v([]),o=v(null),r=N({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),y=N({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let b=null;const x=async()=>{d.value=!0;try{const c=new URLSearchParams;Object.keys(y).forEach(L=>{y[L]&&y[L]!==""&&c.append(L,y[L])});const f=await fetch(`/api/v1/admin/orders?${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!f.ok){console.error("Erreur API orders:",f.status),s.value=[],o.value=null;return}const w=await f.json();if(w.success&&w.data&&w.data.orders){s.value=w.data.orders.data,o.value={current_page:w.data.orders.current_page,last_page:w.data.orders.last_page,from:w.data.orders.from,to:w.data.orders.to,total:w.data.orders.total};const L=w.data.orders.data;r.total_orders=o.value.total,r.confirmed_orders=L.filter(Z=>Z.status==="confirmed").length,r.pending_orders=L.filter(Z=>Z.status==="pending").length,r.total_revenue=L.filter(Z=>Z.status==="confirmed").reduce((Z,ue)=>Z+ue.total_amount,0)}else s.value=[],o.value=null}catch(c){console.error("Erreur chargement achats:",c),s.value=[],o.value=null}finally{d.value=!1}},T=async()=>{try{const c=await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!c.ok){console.error("Erreur API organizers:",c.status),i.value=[];return}const f=await c.json();f.success&&f.data?i.value=f.data.organizers.data||f.data.organizers:i.value=[]}catch(c){console.error("Erreur chargement organisateurs:",c),i.value=[]}},z=async()=>{try{const c=await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!c.ok){console.error("Erreur API events:",c.status),u.value=[];return}const f=await c.json();f.success&&f.data?u.value=f.data.events.data||f.data.events:u.value=[]}catch(c){console.error("Erreur chargement événements:",c),u.value=[]}},A=()=>{clearTimeout(b),b=setTimeout(()=>{y.page=1,x()},500)},$=c=>{c>=1&&c<=o.value.last_page&&(y.page=c,x())},H=()=>{Object.assign(y,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),x()},j=async c=>{try{const f=await fetch(`/api/v1/admin/orders/${c.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!f.ok){console.error("Erreur API order details:",f.status),alert("Impossible de charger les détails de la commande");return}const w=await f.json();w.success&&w.data?(m.value=w.data.order,t.value=!0):alert("Erreur lors du chargement des détails")}catch(f){console.error("Erreur chargement détails commande:",f),alert("Erreur technique lors du chargement des détails")}},E=async(c,f)=>{if(confirm(`Êtes-vous sûr de vouloir ${f==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const w=await fetch(`/api/v1/admin/orders/${c.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:f})});if(!w.ok){console.error("Erreur API update status:",w.status),alert("Erreur lors de la mise à jour du statut");return}const L=await w.json();L.success?(alert(`Commande ${f==="confirmed"?"confirmée":"annulée"} avec succès`),x(),t.value&&(m.value.status=f)):alert(L.message||"Erreur lors de la mise à jour")}catch(w){console.error("Erreur mise à jour statut commande:",w),alert("Erreur technique")}},S=async()=>{try{const c=new URLSearchParams;Object.keys(y).forEach(w=>{y[w]&&y[w]!==""&&w!=="page"&&c.append(w,y[w])});const f=await fetch(`/api/v1/admin/orders/export?${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(f.ok){const w=await f.blob(),L=window.URL.createObjectURL(w),Z=document.createElement("a");Z.href=L,Z.download=`achats-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Z),Z.click(),window.URL.revokeObjectURL(L),document.body.removeChild(Z)}}catch(c){console.error("Erreur export:",c),alert("Erreur lors de l'export des données")}},g=c=>new Intl.NumberFormat("fr-FR").format(c),h=c=>new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),D=c=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[c]||c,C=c=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[c]||"bg-gray-100 text-gray-800",k=c=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[c]||c,P=c=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800";return ae(()=>{x(),T(),z()}),{loading:d,showDetailsModal:t,selectedOrder:m,orders:s,organizers:i,events:u,pagination:o,stats:r,filters:y,loadOrders:x,loadOrganizers:T,loadEvents:z,debouncedSearch:A,changePage:$,resetFilters:H,viewOrderDetails:j,updateOrderStatus:E,exportOrders:S,formatAmount:g,formatDateTime:h,getStatusName:D,getStatusBadgeClass:C,getTicketStatusName:k,getTicketStatusClass:P}}},bn={class:"order-management p-6 bg-gray-50 min-h-screen"},hn={class:"mb-8"},wn={class:"flex items-center justify-between"},_n={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},kn={class:"bg-white rounded-lg shadow p-6"},Cn={class:"flex items-center"},Mn={class:"ml-4"},Sn={class:"text-2xl font-bold text-blue-600"},jn={class:"bg-white rounded-lg shadow p-6"},An={class:"flex items-center"},Dn={class:"ml-4"},Pn={class:"text-2xl font-bold text-green-600"},Tn={class:"bg-white rounded-lg shadow p-6"},Fn={class:"flex items-center"},Un={class:"ml-4"},En={class:"text-2xl font-bold text-yellow-600"},zn={class:"bg-white rounded-lg shadow p-6"},On={class:"flex items-center"},Rn={class:"ml-4"},Bn={class:"text-2xl font-bold text-purple-600"},Vn={class:"bg-white rounded-lg shadow p-6 mb-8"},In={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},$n=["value"],Ln=["value"],qn={class:"flex justify-between items-center mt-4"},Nn={class:"text-sm text-gray-600"},Hn={class:"bg-white rounded-lg shadow"},Xn={key:0,class:"p-8 text-center"},Gn={key:1,class:"p-8 text-center text-gray-500"},Kn={key:2,class:"overflow-x-auto"},Wn={class:"w-full"},Jn={class:"divide-y divide-gray-200"},Yn={class:"px-6 py-4 text-sm font-mono text-blue-600"},Zn=["onClick"],Qn={class:"px-6 py-4 text-sm text-gray-900"},ei={class:"font-medium"},ti={class:"text-gray-500"},si={class:"px-6 py-4 text-sm text-gray-900"},oi={class:"font-medium"},ri={class:"text-gray-500"},li={class:"px-6 py-4 text-sm text-gray-900"},ai={class:"space-y-1"},ni={class:"px-6 py-4 text-sm font-medium text-gray-900"},ii={class:"px-6 py-4 text-sm"},di={class:"px-6 py-4 text-sm text-gray-500"},ui={class:"px-6 py-4 text-sm space-x-2"},ci=["onClick"],mi=["onClick"],gi=["onClick"],pi={key:3,class:"p-6 border-t"},fi={class:"flex justify-between items-center"},xi={class:"text-sm text-gray-700"},vi={class:"flex space-x-2"},yi=["disabled"],bi={class:"px-3 py-1 text-sm text-gray-600"},hi=["disabled"],wi={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_i={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},ki={class:"flex justify-between items-center mb-4"},Ci={key:0,class:"space-y-6"},Mi={class:"grid grid-cols-2 gap-6"},Si={class:"space-y-4"},ji={class:"space-y-2"},Ai={class:"text-sm font-mono text-gray-900"},Di={class:"text-sm text-gray-900"},Pi={key:0},Ti={class:"text-sm text-gray-900"},Fi={class:"space-y-4"},Ui={class:"space-y-2"},Ei={class:"text-sm text-gray-900"},zi={class:"text-sm text-gray-900"},Oi={key:0},Ri={class:"text-sm text-gray-900"},Bi={key:0,class:"border-t pt-6"},Vi={class:"grid grid-cols-2 gap-4"},Ii={class:"text-sm text-gray-900"},$i={class:"text-sm text-gray-900"},Li={class:"text-sm text-gray-900"},qi={class:"text-sm text-gray-900"},Ni={class:"border-t pt-6"},Hi={class:"overflow-x-auto"},Xi={class:"w-full text-sm"},Gi={class:"divide-y divide-gray-200"},Ki={class:"px-4 py-2"},Wi={class:"px-4 py-2"},Ji={class:"px-4 py-2"},Yi={class:"px-4 py-2 font-medium"},Zi={class:"bg-gray-50"},Qi={class:"px-4 py-2 font-bold"},ed={key:1,class:"border-t pt-6"},td={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},sd={class:"flex justify-between items-start mb-2"},od={class:"font-mono text-blue-600"},rd={class:"text-gray-600"},ld={key:0},ad={class:"border-t pt-6 flex justify-end space-x-3"};function nd(d,t,m,s,i,u){return a(),n("div",bn,[e("div",hn,[e("div",wn,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Achats"),e("p",{class:"text-gray-600"},"Gérer et suivre tous les achats de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.exportOrders&&s.exportOrders(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),J(" Exporter ",-1)])])])]),e("div",_n,[e("div",kn,[e("div",Cn,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Mn,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Achats",-1)),e("p",Sn,l(s.stats.total_orders||0),1)])])]),e("div",jn,[e("div",An,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Dn,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",Pn,l(s.stats.confirmed_orders||0),1)])])]),e("div",Tn,[e("div",Fn,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Un,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",En,l(s.stats.pending_orders||0),1)])])]),e("div",zn,[e("div",On,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Rn,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",Bn,l(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])])]),e("div",Vn,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",In,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[le('<option value="" data-v-ad7d9284>Tous les statuts</option><option value="pending" data-v-ad7d9284>En attente</option><option value="confirmed" data-v-ad7d9284>Confirmée</option><option value="cancelled" data-v-ad7d9284>Annulée</option><option value="refunded" data-v-ad7d9284>Remboursée</option>',5)])],544),[[B,s.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(a(!0),n(F,null,U(s.organizers,o=>(a(),n("option",{key:o.id,value:o.id},l(o.name),9,$n))),128))],544),[[B,s.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.event_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(a(!0),n(F,null,U(s.events,o=>(a(),n("option",{key:o.id,value:o.id},l(o.title),9,Ln))),128))],544),[[B,s.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.filters.date_from=o),onChange:t[10]||(t[10]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filters.date_to=o),onChange:t[12]||(t[12]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.date_to]])])]),e("div",qn,[e("button",{onClick:t[13]||(t[13]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Nn,l(s.pagination?`${s.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",Hn,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Achats")],-1)),s.loading?(a(),n("div",Xn,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.orders.length===0?(a(),n("div",Gn," Aucun achat trouvé ")):(a(),n("div",Kn,[e("table",Wn,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Jn,[(a(!0),n(F,null,U(s.orders,o=>(a(),n("tr",{key:o.id},[e("td",Yn,[e("button",{onClick:r=>s.viewOrderDetails(o),class:"hover:text-blue-800"}," #"+l(o.reference),9,Zn)]),e("td",Qn,[e("div",null,[e("div",ei,l(o.customer_name),1),e("div",ti,l(o.customer_email),1)])]),e("td",si,[e("div",null,[e("div",oi,l(o.event?.title||"-"),1),e("div",ri,l(o.event?.organizer?.name||"-"),1)])]),e("td",li,[e("div",ai,[(a(!0),n(F,null,U(o.items,r=>(a(),n("div",{key:r.id,class:"text-xs"},l(r.quantity)+"x "+l(r.ticket_type_name),1))),128))])]),e("td",ni,l(s.formatAmount(o.total_amount))+" XAF",1),e("td",ii,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},l(s.getStatusName(o.status)),3)]),e("td",di,l(s.formatDateTime(o.created_at)),1),e("td",ui,[e("button",{onClick:r=>s.viewOrderDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,ci),o.status==="pending"?(a(),n("button",{key:0,onClick:r=>s.updateOrderStatus(o,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,mi)):_("",!0),["pending","confirmed"].includes(o.status)?(a(),n("button",{key:1,onClick:r=>s.updateOrderStatus(o,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,gi)):_("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(a(),n("div",pi,[e("div",fi,[e("div",xi," Affichage "+l(s.pagination.from)+" à "+l(s.pagination.to)+" sur "+l(s.pagination.total)+" achats ",1),e("div",vi,[e("button",{onClick:t[14]||(t[14]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,yi),e("span",bi," Page "+l(s.pagination.current_page)+" sur "+l(s.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,hi)])])])):_("",!0)]),s.showDetailsModal?(a(),n("div",wi,[e("div",_i,[e("div",ki,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrder?(a(),n("div",Ci,[e("div",Mi,[e("div",Si,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",ji,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Ai,"#"+l(s.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrder.status)])},l(s.getStatusName(s.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Di,l(s.formatDateTime(s.selectedOrder.created_at)),1)]),s.selectedOrder.confirmed_at?(a(),n("div",Pi,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",Ti,l(s.formatDateTime(s.selectedOrder.confirmed_at)),1)])):_("",!0)])])]),e("div",Fi,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",Ui,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Ei,l(s.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",zi,l(s.selectedOrder.customer_email),1)]),s.selectedOrder.customer_phone?(a(),n("div",Oi,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Ri,l(s.selectedOrder.customer_phone),1)])):_("",!0)])])])]),s.selectedOrder.event?(a(),n("div",Bi,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",Vi,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Ii,l(s.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",$i,l(s.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Li,l(s.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",qi,l(s.selectedOrder.event.schedules?.[0]?s.formatDateTime(s.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):_("",!0),e("div",Ni,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",Hi,[e("table",Xi,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",Gi,[(a(!0),n(F,null,U(s.selectedOrder.items,o=>(a(),n("tr",{key:o.id},[e("td",Ki,l(o.ticket_type_name),1),e("td",Wi,l(s.formatAmount(o.unit_price))+" XAF",1),e("td",Ji,l(o.quantity),1),e("td",Yi,l(s.formatAmount(o.total_price))+" XAF",1)]))),128))]),e("tfoot",Zi,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",Qi,l(s.formatAmount(s.selectedOrder.total_amount))+" XAF",1)])])])])]),s.selectedOrder.tickets&&s.selectedOrder.tickets.length>0?(a(),n("div",ed,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",td,[(a(!0),n(F,null,U(s.selectedOrder.tickets,o=>(a(),n("div",{key:o.id,class:"border rounded-lg p-3 text-sm"},[e("div",sd,[e("span",od,l(o.code),1),e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getTicketStatusClass(o.status)])},l(s.getTicketStatusName(o.status)),3)]),e("div",rd,[e("p",null,l(o.ticketType?.name),1),o.used_at?(a(),n("p",ld,"Utilisé: "+l(s.formatDateTime(o.used_at)),1)):_("",!0)])]))),128))])])):_("",!0),e("div",ad,[s.selectedOrder.status==="pending"?(a(),n("button",{key:0,onClick:t[17]||(t[17]=o=>s.updateOrderStatus(s.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):_("",!0),["pending","confirmed"].includes(s.selectedOrder.status)?(a(),n("button",{key:1,onClick:t[18]||(t[18]=o=>s.updateOrderStatus(s.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):_("",!0),e("button",{onClick:t[19]||(t[19]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):_("",!0)])])):_("",!0)])}const id=ee(yn,[["render",nd],["__scopeId","data-v-ad7d9284"]]),N_=Object.freeze(Object.defineProperty({__proto__:null,default:id},Symbol.toStringTag,{value:"Module"})),dd={name:"PaymentTracking",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(null),i=v([]),u=v([]),o=v(null),r=N({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),y=v([]),b=v([]),x=N({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let T=null;const z=de(()=>b.value.length===0?1:Math.max(...b.value.map(V=>V.volume))),A=async()=>{d.value=!0;try{const V=new URLSearchParams;Object.keys(x).forEach(I=>{x[I]&&x[I]!==""&&V.append(I,x[I])});const G=await fetch(`/api/v1/admin/payments?${V}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!G.ok){console.error("Erreur API payments:",G.status),i.value=[],o.value=null,y.value=[],b.value=[];return}const X=await G.json();X.success&&X.data&&X.data.payments?(i.value=X.data.payments.data,o.value={current_page:X.data.payments.current_page,last_page:X.data.payments.last_page,from:X.data.payments.from,to:X.data.payments.to,total:X.data.payments.total},Object.assign(r,X.data.stats),y.value=X.data.gateway_stats||[],b.value=X.data.daily_stats||[]):(i.value=[],o.value=null,y.value=[],b.value=[])}catch(V){console.error("Erreur chargement paiements:",V),i.value=[],o.value=null,y.value=[],b.value=[]}finally{d.value=!1}},$=async()=>{try{const V=await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!V.ok){console.error("Erreur API organizers:",V.status),u.value=[];return}const G=await V.json();G.success&&G.data?u.value=G.data.organizers.data||G.data.organizers:u.value=[]}catch(V){console.error("Erreur chargement organisateurs:",V),u.value=[]}},H=()=>{clearTimeout(T),T=setTimeout(()=>{x.page=1,A()},500)},j=V=>{V>=1&&V<=o.value.last_page&&(x.page=V,A())},E=()=>{Object.assign(x,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),A()},S=()=>{A()},g=async V=>{try{const G=await fetch(`/api/v1/admin/payments/${V.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!G.ok){console.error("Erreur API payment details:",G.status),alert("Impossible de charger les détails du paiement");return}const X=await G.json();X.success&&X.data?(s.value=X.data.payment,m.value=!0):alert("Erreur lors du chargement des détails")}catch(G){console.error("Erreur chargement détails paiement:",G),alert("Erreur technique lors du chargement des détails")}},h=async V=>{try{const G=await fetch(`/api/v1/admin/payments/${V.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!G.ok){console.error("Erreur API check payment status:",G.status),alert("Erreur lors de la vérification du statut");return}const X=await G.json();X.success&&X.data?(alert(`Statut mis à jour: ${Z(X.data.status)}`),A(),m.value&&(s.value.status=X.data.status)):alert(X.message||"Erreur lors de la vérification")}catch(G){console.error("Erreur vérification statut:",G),alert("Erreur technique")}},D=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const V=await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!V.ok){console.error("Erreur API check pending:",V.status),alert("Erreur lors de la vérification des paiements en attente");return}const G=await V.json();G.success&&G.data?(alert(`Vérification terminée. ${G.data.updated_count} paiement(s) mis à jour.`),A()):alert(G.message||"Erreur lors de la vérification")}catch(V){console.error("Erreur vérification paiements en attente:",V),alert("Erreur technique")}finally{t.value=!1}}},C=async V=>{const G=prompt("Raison du remboursement:");if(G&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${P(V.amount)} XAF ?`))try{const X=await fetch(`/api/v1/admin/payments/${V.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:G})});if(!X.ok){console.error("Erreur API refund:",X.status),alert("Erreur lors du remboursement");return}const I=await X.json();I.success?(alert("Remboursement initié avec succès"),A()):alert(I.message||"Erreur lors du remboursement")}catch(X){console.error("Erreur remboursement:",X),alert("Erreur technique")}},k=async()=>{try{const V=new URLSearchParams;Object.keys(x).forEach(X=>{x[X]&&x[X]!==""&&X!=="page"&&V.append(X,x[X])});const G=await fetch(`/api/v1/admin/payments/export?${V}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(G.ok){const X=await G.blob(),I=window.URL.createObjectURL(X),te=document.createElement("a");te.href=I,te.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(te),te.click(),window.URL.revokeObjectURL(I),document.body.removeChild(te)}}catch(V){console.error("Erreur export:",V),alert("Erreur lors de l'export des données")}},P=V=>new Intl.NumberFormat("fr-FR").format(V),c=V=>new Date(V).toLocaleDateString("fr-FR"),f=V=>new Date(V).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),w=V=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[V]||V,L=V=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[V]||"bg-gray-100 text-gray-800",Z=V=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[V]||V,ue=V=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[V]||"bg-gray-100 text-gray-800";return ae(()=>{A(),$()}),{loading:d,checkingPayments:t,showDetailsModal:m,selectedPayment:s,payments:i,organizers:u,pagination:o,stats:r,gatewayStats:y,dailyStats:b,filters:x,maxDailyVolume:z,loadPayments:A,loadOrganizers:$,debouncedSearch:H,changePage:j,resetFilters:E,refreshPayments:S,viewPaymentDetails:g,checkPaymentStatus:h,checkPendingPayments:D,processRefund:C,exportPayments:k,formatAmount:P,formatDate:c,formatDateTime:f,getGatewayName:w,getGatewayBadgeClass:L,getStatusName:Z,getStatusBadgeClass:ue}}},ud={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},cd={class:"mb-8"},md={class:"flex items-center justify-between"},gd={class:"flex space-x-3"},pd={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},fd={class:"bg-white rounded-lg shadow p-6"},xd={class:"flex items-center"},vd={class:"ml-4"},yd={class:"text-2xl font-bold text-blue-600"},bd={class:"bg-white rounded-lg shadow p-6"},hd={class:"flex items-center"},wd={class:"ml-4"},_d={class:"text-2xl font-bold text-green-600"},kd={class:"bg-white rounded-lg shadow p-6"},Cd={class:"flex items-center"},Md={class:"ml-4"},Sd={class:"text-2xl font-bold text-yellow-600"},jd={class:"bg-white rounded-lg shadow p-6"},Ad={class:"flex items-center"},Dd={class:"ml-4"},Pd={class:"text-2xl font-bold text-red-600"},Td={class:"bg-white rounded-lg shadow p-6"},Fd={class:"flex items-center"},Ud={class:"ml-4"},Ed={class:"text-2xl font-bold text-purple-600"},zd={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Od={class:"bg-white rounded-lg shadow p-6"},Rd={key:0,class:"text-center text-gray-500 py-8"},Bd={key:1,class:"space-y-4"},Vd={class:"flex items-center"},Id={class:"font-medium text-gray-900"},$d={class:"text-sm text-gray-600"},Ld={class:"text-right"},qd={class:"font-bold text-gray-900"},Nd={class:"text-sm text-gray-600"},Hd={class:"bg-white rounded-lg shadow p-6"},Xd={key:0,class:"text-center text-gray-500 py-8"},Gd={key:1,class:"space-y-3"},Kd={class:"font-medium text-gray-900"},Wd={class:"text-sm text-gray-600"},Jd={class:"text-right"},Yd={class:"font-bold text-gray-900"},Zd={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},Qd={class:"bg-white rounded-lg shadow p-6 mb-8"},eu={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},tu=["value"],su={class:"flex justify-between items-center mt-4"},ou={class:"flex space-x-3"},ru=["disabled"],lu={class:"bg-white rounded-lg shadow"},au={class:"p-6 border-b"},nu={class:"flex justify-between items-center"},iu={class:"text-sm text-gray-600"},du={key:0,class:"p-8 text-center"},uu={key:1,class:"p-8 text-center text-gray-500"},cu={key:2,class:"overflow-x-auto"},mu={class:"w-full"},gu={class:"divide-y divide-gray-200"},pu={class:"px-6 py-4 text-sm font-mono text-blue-600"},fu=["onClick"],xu={class:"px-6 py-4 text-sm text-gray-900"},vu={class:"font-medium"},yu={class:"text-gray-500"},bu={class:"px-6 py-4 text-sm text-gray-900"},hu={class:"font-medium"},wu={class:"text-gray-500"},_u={class:"px-6 py-4 text-sm font-medium text-gray-900"},ku={class:"px-6 py-4 text-sm"},Cu={class:"px-6 py-4 text-sm"},Mu={class:"px-6 py-4 text-sm text-gray-500"},Su={class:"px-6 py-4 text-sm space-x-2"},ju=["onClick"],Au=["onClick"],Du=["onClick"],Pu={key:3,class:"p-6 border-t"},Tu={class:"flex justify-between items-center"},Fu={class:"text-sm text-gray-700"},Uu={class:"flex space-x-2"},Eu=["disabled"],zu={class:"px-3 py-1 text-sm text-gray-600"},Ou=["disabled"],Ru={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bu={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Vu={class:"flex justify-between items-center mb-4"},Iu={key:0,class:"space-y-6"},$u={class:"grid grid-cols-2 gap-6"},Lu={class:"space-y-4"},qu={class:"space-y-2"},Nu={class:"text-sm font-mono text-gray-900"},Hu={class:"text-sm font-bold text-gray-900"},Xu={class:"space-y-4"},Gu={class:"space-y-2"},Ku={class:"text-sm text-gray-900"},Wu={key:0},Ju={class:"text-sm text-gray-900"},Yu={key:1},Zu={class:"text-sm font-mono text-gray-900"},Qu={key:0,class:"border-t pt-6"},ec={class:"grid grid-cols-2 gap-4"},tc={class:"text-sm font-mono text-gray-900"},sc={class:"text-sm text-gray-900"},oc={class:"text-sm text-gray-900"},rc={class:"text-sm text-gray-900"},lc={key:1,class:"border-t pt-6"},ac={class:"bg-gray-50 p-4 rounded-lg"},nc={class:"text-xs text-gray-700 whitespace-pre-wrap"},ic={class:"border-t pt-6 flex justify-end space-x-3"};function dc(d,t,m,s,i,u){return a(),n("div",ud,[e("div",cd,[e("div",md,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",gd,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.refreshPayments&&s.refreshPayments(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),J(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.exportPayments&&s.exportPayments(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),J(" Exporter ",-1)])])])])]),e("div",pd,[e("div",fd,[e("div",xd,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",vd,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",yd,l(s.stats.total_payments||0),1)])])]),e("div",bd,[e("div",hd,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",wd,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",_d,l(s.stats.successful_payments||0),1)])])]),e("div",kd,[e("div",Cd,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Md,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",Sd,l(s.stats.pending_payments||0),1)])])]),e("div",jd,[e("div",Ad,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Dd,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",Pd,l(s.stats.failed_payments||0),1)])])]),e("div",Td,[e("div",Fd,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ud,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",Ed,l(s.formatAmount(s.stats.total_volume||0))+" XAF",1)])])])]),e("div",zd,[e("div",Od,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),s.gatewayStats.length===0?(a(),n("div",Rd," Aucune donnée disponible ")):(a(),n("div",Bd,[(a(!0),n(F,null,U(s.gatewayStats,o=>(a(),n("div",{key:o.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Vd,[e("div",{class:O(["p-2 rounded-lg mr-3",s.getGatewayBadgeClass(o.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",Id,l(s.getGatewayName(o.gateway)),1),e("p",$d,l(o.count)+" paiement(s)",1)])]),e("div",Ld,[e("p",qd,l(s.formatAmount(o.volume))+" XAF",1),e("p",Nd,l(Math.round(o.count/s.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",Hd,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),s.dailyStats.length===0?(a(),n("div",Xd," Aucune donnée disponible ")):(a(),n("div",Gd,[(a(!0),n(F,null,U(s.dailyStats,o=>(a(),n("div",{key:o.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Kd,l(s.formatDate(o.date)),1),e("p",Wd,l(o.count)+" paiement(s)",1)]),e("div",Jd,[e("p",Yd,l(s.formatAmount(o.volume))+" XAF",1),e("div",Zd,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ne(`width: ${Math.min(o.volume/s.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",Qd,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",eu,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.search=o),onInput:t[3]||(t[3]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),onChange:t[5]||(t[5]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[le('<option value="" data-v-9b1c533a>Tous les statuts</option><option value="success" data-v-9b1c533a>Réussi</option><option value="pending" data-v-9b1c533a>En attente</option><option value="failed" data-v-9b1c533a>Échoué</option><option value="cancelled" data-v-9b1c533a>Annulé</option>',5)])],544),[[B,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),p(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.filters.gateway=o),onChange:t[7]||(t[7]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[B,s.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.filters.organizer_id=o),onChange:t[9]||(t[9]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(a(!0),n(F,null,U(s.organizers,o=>(a(),n("option",{key:o.id,value:o.id},l(o.name),9,tu))),128))],544),[[B,s.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.filters.date_from=o),onChange:t[11]||(t[11]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.filters.date_to=o),onChange:t[13]||(t[13]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,s.filters.date_to]])])]),e("div",su,[e("button",{onClick:t[14]||(t[14]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",ou,[e("button",{onClick:t[15]||(t[15]=(...o)=>s.checkPendingPayments&&s.checkPendingPayments(...o)),disabled:s.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},l(s.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,ru)])])]),e("div",lu,[e("div",au,[e("div",nu,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",iu,l(s.pagination?`${s.pagination.total} paiement(s) trouvé(s)`:""),1)])]),s.loading?(a(),n("div",du,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payments.length===0?(a(),n("div",uu," Aucun paiement trouvé ")):(a(),n("div",cu,[e("table",mu,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",gu,[(a(!0),n(F,null,U(s.payments,o=>(a(),n("tr",{key:o.id},[e("td",pu,[e("button",{onClick:r=>s.viewPaymentDetails(o),class:"hover:text-blue-800"}," #"+l(o.reference),9,fu)]),e("td",xu,[e("div",null,[e("div",vu,"#"+l(o.order?.reference||"-"),1),e("div",yu,l(o.order?.event?.title||"-"),1)])]),e("td",bu,[e("div",null,[e("div",hu,l(o.order?.customer_name||"-"),1),e("div",wu,l(o.order?.customer_email||"-"),1)])]),e("td",_u,l(s.formatAmount(o.amount))+" XAF",1),e("td",ku,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},l(s.getGatewayName(o.gateway)),3)]),e("td",Cu,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},l(s.getStatusName(o.status)),3)]),e("td",Mu,l(s.formatDateTime(o.created_at)),1),e("td",Su,[e("button",{onClick:r=>s.viewPaymentDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,ju),o.status==="pending"?(a(),n("button",{key:0,onClick:r=>s.checkPaymentStatus(o),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,Au)):_("",!0),o.status==="success"?(a(),n("button",{key:1,onClick:r=>s.processRefund(o),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,Du)):_("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(a(),n("div",Pu,[e("div",Tu,[e("div",Fu," Affichage "+l(s.pagination.from)+" à "+l(s.pagination.to)+" sur "+l(s.pagination.total)+" paiements ",1),e("div",Uu,[e("button",{onClick:t[16]||(t[16]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Eu),e("span",zu," Page "+l(s.pagination.current_page)+" sur "+l(s.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Ou)])])])):_("",!0)]),s.showDetailsModal?(a(),n("div",Ru,[e("div",Bu,[e("div",Vu,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedPayment?(a(),n("div",Iu,[e("div",$u,[e("div",Lu,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",qu,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Nu,"#"+l(s.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",Hu,l(s.formatAmount(s.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(s.selectedPayment.gateway)])},l(s.getGatewayName(s.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedPayment.status)])},l(s.getStatusName(s.selectedPayment.status)),3)])])])]),e("div",Xu,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",Gu,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",Ku,l(s.formatDateTime(s.selectedPayment.created_at)),1)]),s.selectedPayment.processed_at?(a(),n("div",Wu,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",Ju,l(s.formatDateTime(s.selectedPayment.processed_at)),1)])):_("",!0),s.selectedPayment.gateway_transaction_id?(a(),n("div",Yu,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",Zu,l(s.selectedPayment.gateway_transaction_id),1)])):_("",!0)])])])]),s.selectedPayment.order?(a(),n("div",Qu,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",ec,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",tc,l(s.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",sc,l(s.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",oc,l(s.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",rc,l(s.selectedPayment.order.customer_email),1)])])])):_("",!0),s.selectedPayment.gateway_response?(a(),n("div",lc,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",ac,[e("pre",nc,l(JSON.stringify(s.selectedPayment.gateway_response,null,2)),1)])])):_("",!0),e("div",ic,[s.selectedPayment.status==="pending"?(a(),n("button",{key:0,onClick:t[19]||(t[19]=o=>s.checkPaymentStatus(s.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):_("",!0),s.selectedPayment.status==="success"?(a(),n("button",{key:1,onClick:t[20]||(t[20]=o=>s.processRefund(s.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):_("",!0),e("button",{onClick:t[21]||(t[21]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):_("",!0)])])):_("",!0)])}const uc=ee(dd,[["render",dc],["__scopeId","data-v-9b1c533a"]]),H_=Object.freeze(Object.defineProperty({__proto__:null,default:uc},Symbol.toStringTag,{value:"Module"})),cc={name:"PayoutDashboard",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v(!1),u=v([]),o=v([]),r=v([]),y=N({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),b=N({status:"",gateway:"",is_automatic:""}),x=N({organizer_id:"",gateway:"",amount:"",phone_number:""}),T=async()=>{d.value=!0;try{const w=new URLSearchParams;b.status&&w.append("status",b.status),b.gateway&&w.append("gateway",b.gateway),b.is_automatic&&w.append("is_automatic",b.is_automatic);const Z=await(await fetch(`/api/v1/admin/payouts?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();Z.success&&(u.value=Z.data.payouts)}catch(w){console.error("Erreur chargement payouts:",w)}finally{d.value=!1}},z=async()=>{try{const L=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&Object.assign(y,L.data.stats)}catch(w){console.error("Erreur chargement stats:",w)}},A=async()=>{m.value=!0;try{const L=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(r.value=L.data.balances)}catch(w){console.error("Erreur chargement solde SHAP:",w)}finally{m.value=!1}},$=async()=>{t.value=!0;try{const L=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(alert(`Vérification terminée: ${L.data.results.length} payouts vérifiés`),T())}catch(w){console.error("Erreur vérification batch:",w)}finally{t.value=!1}},H=async w=>{w.checking=!0;try{const Z=await(await fetch(`/api/v1/admin/payouts/${w.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();Z.success&&(alert(`Statut: ${Z.data.current_status}`),T())}catch(L){console.error("Erreur vérification payout:",L)}finally{w.checking=!1}},j=()=>{s.value=!0,E()},E=async()=>{try{const L=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(o.value=L.data.organizers)}catch(w){console.error("Erreur chargement organisateurs:",w)}},S=async()=>{i.value=!0;try{const L=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(x)})).json();L.success?(alert("Payout créé avec succès"),s.value=!1,Object.assign(x,{organizer_id:"",gateway:"",amount:"",phone_number:""}),T(),z()):alert(L.message||"Erreur lors de la création")}catch(w){console.error("Erreur création payout:",w),alert("Erreur technique")}finally{i.value=!1}},g=()=>{Object.assign(b,{status:"",gateway:"",is_automatic:""}),T()},h=w=>{alert(`Détails du payout #${w.id}
Référence: ${w.reference}
Montant: ${D(w.amount)} XAF`)},D=w=>new Intl.NumberFormat("fr-FR").format(w),C=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),k=w=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[w]||w,P=w=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800",c=w=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[w]||w,f=w=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[w]||"bg-gray-100 text-gray-800";return ae(()=>{T(),z()}),{loading:d,checkingAll:t,loadingShapBalance:m,showCreateModal:s,creatingPayout:i,payouts:u,organizers:o,shapBalance:r,stats:y,filters:b,newPayout:x,loadPayouts:T,loadStats:z,loadShapBalance:A,checkAllPending:$,checkPayoutStatus:H,openCreatePayoutModal:j,createPayout:S,resetFilters:g,viewPayoutDetails:h,formatAmount:D,formatDate:C,getStatusName:k,getStatusBadgeClass:P,getGatewayName:c,getGatewayBadgeClass:f}}},mc={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},gc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},pc={class:"bg-white rounded-lg shadow p-6"},fc={class:"flex items-center"},xc={class:"ml-4"},vc={class:"text-2xl font-bold text-gray-900"},yc={class:"bg-white rounded-lg shadow p-6"},bc={class:"flex items-center"},hc={class:"ml-4"},wc={class:"text-2xl font-bold text-green-600"},_c={class:"bg-white rounded-lg shadow p-6"},kc={class:"flex items-center"},Cc={class:"ml-4"},Mc={class:"text-2xl font-bold text-yellow-600"},Sc={class:"bg-white rounded-lg shadow p-6"},jc={class:"flex items-center"},Ac={class:"ml-4"},Dc={class:"text-2xl font-bold text-purple-600"},Pc={class:"flex flex-wrap gap-4 mb-8"},Tc=["disabled"],Fc=["disabled"],Uc={key:0,class:"mb-8"},Ec={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zc={class:"font-semibold text-gray-900"},Oc={class:"text-2xl font-bold text-green-600"},Rc={class:"text-sm text-gray-500"},Bc={class:"bg-white rounded-lg shadow p-6 mb-8"},Vc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ic={class:"flex items-end"},$c={class:"bg-white rounded-lg shadow"},Lc={key:0,class:"p-8 text-center"},qc={key:1,class:"p-8 text-center text-gray-500"},Nc={key:2,class:"overflow-x-auto"},Hc={class:"w-full"},Xc={class:"divide-y divide-gray-200"},Gc={class:"px-6 py-4 text-sm text-gray-900"},Kc={class:"px-6 py-4 text-sm text-gray-900"},Wc={class:"px-6 py-4 text-sm font-medium text-gray-900"},Jc={class:"px-6 py-4 text-sm text-gray-900"},Yc={class:"px-6 py-4 text-sm"},Zc={class:"px-6 py-4 text-sm text-gray-900"},Qc={class:"px-6 py-4 text-sm text-gray-500"},e0={class:"px-6 py-4 text-sm space-x-2"},t0=["onClick","disabled"],s0=["onClick"],o0={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},r0={class:"bg-white rounded-lg p-6 w-full max-w-md"},l0={class:"space-y-4"},a0=["value"],n0={class:"flex justify-end space-x-3 mt-6"},i0=["disabled"];function d0(d,t,m,s,i,u){return a(),n("div",mc,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",gc,[e("div",pc,[e("div",fc,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",xc,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",vc,l(s.stats.total_payouts||0),1)])])]),e("div",yc,[e("div",bc,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",hc,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",wc,l(s.stats.successful_payouts||0),1)])])]),e("div",_c,[e("div",kc,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Cc,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",Mc,l(s.stats.pending_payouts||0),1)])])]),e("div",Sc,[e("div",jc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Ac,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",Dc,l(s.stats.automatic_payouts||0),1)])])])]),e("div",Pc,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreatePayoutModal&&s.openCreatePayoutModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.checkAllPending&&s.checkAllPending(...o)),disabled:s.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),J(" "+l(s.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,Tc),e("button",{onClick:t[2]||(t[2]=(...o)=>s.loadShapBalance&&s.loadShapBalance(...o)),disabled:s.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),J(" "+l(s.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,Fc)]),s.shapBalance.length>0?(a(),n("div",Uc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",Ec,[(a(!0),n(F,null,U(s.shapBalance,o=>(a(),n("div",{key:o.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",zc,l(o.payment_system_displayed_name),1),e("p",Oc,l(s.formatAmount(o.amount))+" XAF",1),e("p",Rc,"Dernière MAJ: "+l(o.last_updated),1)]))),128))])])):_("",!0),e("div",Bc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Vc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[le('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[B,s.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.gateway=o),onChange:t[6]||(t[6]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[B,s.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),p(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.is_automatic=o),onChange:t[8]||(t[8]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[B,s.filters.is_automatic]])]),e("div",Ic,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",$c,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),s.loading?(a(),n("div",Lc,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payouts.length===0?(a(),n("div",qc," Aucun payout trouvé ")):(a(),n("div",Nc,[e("table",Hc,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Xc,[(a(!0),n(F,null,U(s.payouts,o=>(a(),n("tr",{key:o.id},[e("td",Gc,"#"+l(o.id),1),e("td",Kc,l(o.organizer?.name),1),e("td",Wc,l(s.formatAmount(o.amount))+" XAF",1),e("td",Jc,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},l(s.getGatewayName(o.gateway)),3)]),e("td",Yc,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},l(s.getStatusName(o.status)),3)]),e("td",Zc,[e("span",{class:O(["inline-flex px-2 py-1 text-xs rounded-full",o.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},l(o.is_automatic?"Auto":"Manuel"),3)]),e("td",Qc,l(s.formatDate(o.created_at)),1),e("td",e0,[e("button",{onClick:r=>s.checkPayoutStatus(o),disabled:o.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},l(o.checking?"Vérif...":"Vérifier"),9,t0),e("button",{onClick:r=>s.viewPayoutDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,s0)])]))),128))])])]))]),s.showCreateModal?(a(),n("div",o0,[e("div",r0,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=oe((...o)=>s.createPayout&&s.createPayout(...o),["prevent"]))},[e("div",l0,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),p(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.newPayout.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(a(!0),n(F,null,U(s.organizers,o=>(a(),n("option",{key:o.id,value:o.id},l(o.name),9,a0))),128))],512),[[B,s.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),p(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.newPayout.gateway=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[B,s.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.newPayout.amount=o),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.newPayout.phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.newPayout.phone_number]])])]),e("div",n0,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>s.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(s.creatingPayout?"Création...":"Créer le Payout"),9,i0)])],32)])])):_("",!0)])}const u0=ee(cc,[["render",d0],["__scopeId","data-v-e96f5ab8"]]),X_=Object.freeze(Object.defineProperty({__proto__:null,default:u0},Symbol.toStringTag,{value:"Module"})),c0={name:"OrganizerBalanceConfig",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(null),i=v([]),u=N({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),o=N({gateway:"",auto_payout_enabled:""}),r=N({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),y=async()=>{d.value=!0;try{const j=new URLSearchParams;o.gateway&&j.append("gateway",o.gateway),o.auto_payout_enabled&&j.append("auto_payout_enabled",o.auto_payout_enabled);const E=await fetch(`/api/v1/admin/payouts/balances?${j}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"}});if(E.ok){const S=await E.json();S.success&&(i.value=S.data.balances,S.data.stats&&Object.assign(u,S.data.stats))}else b()}catch{console.log("API non disponible, utilisation des données simulées"),b()}finally{d.value=!1}},b=()=>{i.value=[{organizer_id:1,organizer:{name:"EventMaster Pro"},gateway:"airtelmoney",balance:25e4,auto_payout_enabled:!0,auto_payout_threshold:1e5,phone_number:"066123456"},{organizer_id:2,organizer:{name:"Gabon Events"},gateway:"moovmoney",balance:18e4,auto_payout_enabled:!1,auto_payout_threshold:5e4,phone_number:"065987654"},{organizer_id:3,organizer:{name:"Culture & Spectacles"},gateway:"airtelmoney",balance:42e4,auto_payout_enabled:!0,auto_payout_threshold:2e5,phone_number:"067789012"}],Object.assign(u,{total_organizers:15,auto_payout_enabled:8,total_balance:85e4,active_configs:12})},x=j=>{s.value=j,Object.assign(r,{auto_payout_enabled:j.auto_payout_enabled,auto_payout_threshold:j.auto_payout_threshold,payout_phone_number:j.phone_number||""}),t.value=!0},T=async()=>{m.value=!0;try{const E=await(await fetch(`/api/v1/admin/organizers/${s.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({gateway:s.value.gateway,auto_payout_enabled:r.auto_payout_enabled,auto_payout_threshold:r.auto_payout_threshold,payout_phone_number:r.payout_phone_number})})).json();E.success?(alert("Configuration mise à jour avec succès"),t.value=!1,y()):alert(E.message||"Erreur lors de la mise à jour")}catch(j){console.error("Erreur sauvegarde config:",j),alert("Erreur technique")}finally{m.value=!1}},z=()=>{Object.assign(o,{gateway:"",auto_payout_enabled:""}),y()},A=j=>new Intl.NumberFormat("fr-FR").format(j),$=j=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[j]||j,H=j=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[j]||"bg-gray-100 text-gray-800";return ae(()=>{y()}),{loading:d,showConfigModal:t,savingConfig:m,editingBalance:s,balances:i,stats:u,filters:o,configForm:r,loadBalances:y,editBalance:x,saveConfiguration:T,resetFilters:z,formatAmount:A,getGatewayName:$,getGatewayBadgeClass:H}}},m0={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},g0={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},p0={class:"bg-white rounded-lg shadow p-6"},f0={class:"flex items-center"},x0={class:"ml-4"},v0={class:"text-2xl font-bold text-gray-900"},y0={class:"bg-white rounded-lg shadow p-6"},b0={class:"flex items-center"},h0={class:"ml-4"},w0={class:"text-2xl font-bold text-green-600"},_0={class:"bg-white rounded-lg shadow p-6"},k0={class:"flex items-center"},C0={class:"ml-4"},M0={class:"text-2xl font-bold text-yellow-600"},S0={class:"bg-white rounded-lg shadow p-6"},j0={class:"flex items-center"},A0={class:"ml-4"},D0={class:"text-2xl font-bold text-purple-600"},P0={class:"bg-white rounded-lg shadow p-6 mb-8"},T0={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},F0={class:"flex items-end"},U0={class:"bg-white rounded-lg shadow"},E0={key:0,class:"p-8 text-center"},z0={key:1,class:"p-8 text-center text-gray-500"},O0={key:2,class:"overflow-x-auto"},R0={class:"w-full"},B0={class:"divide-y divide-gray-200"},V0={class:"px-6 py-4 text-sm font-medium text-gray-900"},I0={class:"px-6 py-4 text-sm text-gray-900"},$0={class:"px-6 py-4 text-sm font-medium text-gray-900"},L0={class:"px-6 py-4 text-sm"},q0={class:"px-6 py-4 text-sm text-gray-900"},N0={class:"px-6 py-4 text-sm text-gray-900"},H0={class:"px-6 py-4 text-sm space-x-2"},X0=["onClick"],G0={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},K0={class:"bg-white rounded-lg p-6 w-full max-w-md"},W0={class:"text-lg font-bold mb-4"},J0={class:"space-y-4"},Y0=["value"],Z0=["value"],Q0={class:"flex items-center space-x-2"},em={key:0},tm={class:"flex justify-end space-x-3 mt-6"},sm=["disabled"];function om(d,t,m,s,i,u){return a(),n("div",m0,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",g0,[e("div",p0,[e("div",f0,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",x0,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",v0,l(s.stats.total_organizers||0),1)])])]),e("div",y0,[e("div",b0,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",h0,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",w0,l(s.stats.auto_payout_enabled||0),1)])])]),e("div",_0,[e("div",k0,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",C0,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",M0,l(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])]),e("div",S0,[e("div",j0,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",A0,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",D0,l(s.stats.active_configs||0),1)])])])]),e("div",P0,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",T0,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filters.gateway=o),onChange:t[1]||(t[1]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[B,s.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.auto_payout_enabled=o),onChange:t[3]||(t[3]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[B,s.filters.auto_payout_enabled]])]),e("div",F0,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",U0,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),s.loading?(a(),n("div",E0,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.balances.length===0?(a(),n("div",z0," Aucune balance trouvée ")):(a(),n("div",O0,[e("table",R0,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",B0,[(a(!0),n(F,null,U(s.balances,o=>(a(),n("tr",{key:`${o.organizer_id}-${o.gateway}`},[e("td",V0,l(o.organizer?.name),1),e("td",I0,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},l(s.getGatewayName(o.gateway)),3)]),e("td",$0,l(s.formatAmount(o.balance))+" XAF",1),e("td",L0,[e("span",{class:O(["inline-flex px-2 py-1 text-xs rounded-full",o.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(o.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",q0,l(s.formatAmount(o.auto_payout_threshold))+" XAF",1),e("td",N0,l(o.phone_number||"-"),1),e("td",H0,[e("button",{onClick:r=>s.editBalance(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,X0)])]))),128))])])]))]),s.showConfigModal?(a(),n("div",G0,[e("div",K0,[e("h3",W0,"Configuration Payout - "+l(s.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=oe((...o)=>s.saveConfiguration&&s.saveConfiguration(...o),["prevent"]))},[e("div",J0,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:s.getGatewayName(s.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Y0)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:s.formatAmount(s.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Z0)]),e("div",null,[e("label",Q0,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>s.configForm.auto_payout_enabled=o),class:"rounded border-gray-300"},null,512),[[re,s.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),s.configForm.auto_payout_enabled?(a(),n("div",em,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.configForm.auto_payout_threshold=o),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):_("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.configForm.payout_phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,s.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",tm,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(s.savingConfig?"Enregistrement...":"Enregistrer"),9,sm)])],32)])])):_("",!0)])}const rm=ee(c0,[["render",om],["__scopeId","data-v-f002e652"]]),G_=Object.freeze(Object.defineProperty({__proto__:null,default:rm},Symbol.toStringTag,{value:"Module"})),lm={name:"Reports",setup(){const d=v(!1),t=v(!1),m=v([]),s=v(""),i=N({start:new Date().toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),u=N({total_revenue:0,total_tickets:0,active_events:0,active_users:0}),o=async()=>{d.value=!0;try{const S=new URLSearchParams({start_date:i.start,end_date:i.end}),g=await fetch(`/api/v1/admin/reports?${S}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(g.ok){const h=await g.json();h.success&&(m.value=h.data.reports,Object.assign(u,h.data.stats))}else r()}catch{console.log("API non disponible, utilisation des données simulées"),r()}finally{d.value=!1}},r=()=>{m.value=[{id:1,type:"financial",period:"Septembre 2025",created_at:new Date,file_size:"2.3 MB",format:"PDF",status:"ready",download_url:"/reports/financial-sep-2025.pdf"},{id:2,type:"events",period:"Août 2025",created_at:new Date(Date.now()-864e5),file_size:"1.8 MB",format:"Excel",status:"ready",download_url:"/reports/events-aug-2025.xlsx"},{id:3,type:"users",period:"Juillet 2025",created_at:new Date(Date.now()-1728e5),file_size:"980 KB",format:"PDF",status:"ready",download_url:"/reports/users-jul-2025.pdf"}],Object.assign(u,{total_revenue:125e5,total_tickets:3420,active_events:28,active_users:1875})},y=async S=>{t.value=!0;try{const g=await fetch("/api/v1/admin/reports/generate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({type:S,start_date:i.start,end_date:i.end})});if(g.ok){const h=await g.json();h.success&&m.value.unshift(h.data.report)}else{const h={id:Date.now(),type:S,period:`${new Date(i.start).toLocaleDateString("fr-FR")} - ${new Date(i.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${S}-${Date.now()}.pdf`};m.value.unshift(h)}}catch{console.log("API non disponible, génération simulée");const h={id:Date.now(),type:S,period:`${new Date(i.start).toLocaleDateString("fr-FR")} - ${new Date(i.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${S}-${Date.now()}.pdf`};m.value.unshift(h)}finally{t.value=!1}},b=async S=>{try{const g=await fetch(`/api/v1/admin/reports/${S.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(g.ok){const h=await g.blob(),D=window.URL.createObjectURL(h),C=document.createElement("a");C.href=D,C.download=`rapport-${S.type}-${S.id}.pdf`,document.body.appendChild(C),C.click(),window.URL.revokeObjectURL(D),document.body.removeChild(C)}else alert("Téléchargement simulé du rapport: "+S.type)}catch{alert("Téléchargement simulé du rapport: "+S.type)}},x=async S=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce rapport ?"))try{(await fetch(`/api/v1/admin/reports/${S.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?m.value=m.value.filter(h=>h.id!==S.id):m.value=m.value.filter(h=>h.id!==S.id)}catch{m.value=m.value.filter(h=>h.id!==S.id)}},T=async()=>{if(confirm("Êtes-vous sûr de vouloir vider tout l'historique des rapports ?"))try{(await fetch("/api/v1/admin/reports/clear",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?m.value=[]:m.value=[]}catch{m.value=[]}},z=()=>{const S=new Date,g={today:{start:S,end:S},week:{start:new Date(S.getTime()-10080*60*1e3),end:S},month:{start:new Date(S.getFullYear(),S.getMonth(),1),end:S},quarter:{start:new Date(S.getFullYear(),Math.floor(S.getMonth()/3)*3,1),end:S},year:{start:new Date(S.getFullYear(),0,1),end:S}};if(g[s.value]){const h=g[s.value];i.start=h.start.toISOString().split("T")[0],i.end=h.end.toISOString().split("T")[0]}},A=()=>{o()},$=S=>new Intl.NumberFormat("fr-FR").format(S),H=S=>new Date(S).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),j=S=>({financial:"Rapport Financier",events:"Rapport Événements",users:"Rapport Utilisateurs",performance:"Rapport Performance"})[S]||S,E=S=>({financial:"bg-blue-100 text-blue-600",events:"bg-yellow-100 text-yellow-600",users:"bg-green-100 text-green-600",performance:"bg-purple-100 text-purple-600"})[S]||"bg-gray-100 text-gray-600";return ae(()=>{const S=new Date,g=new Date(S.getFullYear(),S.getMonth(),1);i.start=g.toISOString().split("T")[0],i.end=S.toISOString().split("T")[0],o()}),{loading:d,generating:t,reports:m,selectedPeriod:s,dateRange:i,stats:u,loadReports:o,generateReport:y,downloadReport:b,deleteReport:x,clearHistory:T,setPredefinedPeriod:z,refreshReports:A,formatAmount:$,formatDateTime:H,getReportTypeName:j,getReportTypeClass:E}}},am={class:"reports-management p-6"},nm={class:"bg-white rounded-lg shadow p-4 mb-6"},im={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},dm={class:"flex items-end"},um={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},cm={class:"bg-white rounded-lg shadow p-6 text-center"},mm={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},gm={class:"w-8 h-8",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pm=["disabled"],fm={class:"bg-white rounded-lg shadow p-6 text-center"},xm={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},vm={class:"w-8 h-8",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ym=["disabled"],bm={class:"bg-white rounded-lg shadow p-6 text-center"},hm=["disabled"],wm={class:"bg-white rounded-lg shadow p-6 text-center"},_m=["disabled"],km={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Cm={class:"bg-white rounded-lg shadow p-4"},Mm={class:"flex items-center"},Sm={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},jm={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Am={class:"ml-4"},Dm={class:"text-xl font-bold",style:{color:"#272d63"}},Pm={class:"bg-white rounded-lg shadow p-4"},Tm={class:"flex items-center"},Fm={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Um={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Em={class:"ml-4"},zm={class:"text-xl font-bold",style:{color:"#fab511"}},Om={class:"bg-white rounded-lg shadow p-4"},Rm={class:"flex items-center"},Bm={class:"ml-4"},Vm={class:"text-xl font-bold text-green-600"},Im={class:"bg-white rounded-lg shadow p-4"},$m={class:"flex items-center"},Lm={class:"ml-4"},qm={class:"text-xl font-bold text-purple-600"},Nm={class:"bg-white rounded-lg shadow overflow-hidden"},Hm={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},Xm={key:0,class:"p-8 text-center"},Gm={key:1,class:"p-8 text-center"},Km={key:2,class:"overflow-x-auto"},Wm={class:"w-full"},Jm={class:"divide-y divide-gray-200"},Ym={class:"px-6 py-4"},Zm={class:"flex items-center"},Qm={class:"text-sm font-medium text-gray-900"},eg={class:"text-sm text-gray-500"},tg={class:"px-6 py-4 text-sm text-gray-900"},sg={class:"px-6 py-4 text-sm text-gray-500"},og={class:"px-6 py-4 text-sm text-gray-500"},rg={class:"px-6 py-4"},lg={class:"px-6 py-4"},ag={class:"flex space-x-2"},ng=["onClick"],ig=["onClick"];function dg(d,t,m,s,i,u){return a(),n("div",am,[t[43]||(t[43]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Rapports et Analyses"),e("p",{class:"text-gray-600"},"Générez et consultez les rapports de performance de la plateforme")],-1)),e("div",nm,[e("div",im,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=o=>s.dateRange.start=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.dateRange.start]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),p(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>s.dateRange.end=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.dateRange.end]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période prédéfinie",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.selectedPeriod=o),onChange:t[3]||(t[3]=(...o)=>s.setPredefinedPeriod&&s.setPredefinedPeriod(...o)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[20]||(t[20]=[le('<option value="" data-v-04ad1860>Personnalisée</option><option value="today" data-v-04ad1860>Aujourd&#39;hui</option><option value="week" data-v-04ad1860>Cette semaine</option><option value="month" data-v-04ad1860>Ce mois</option><option value="quarter" data-v-04ad1860>Ce trimestre</option><option value="year" data-v-04ad1860>Cette année</option>',6)])],544),[[B,s.selectedPeriod]])]),e("div",dm,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.refreshReports&&s.refreshReports(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Actualiser ",32)])])]),e("div",um,[e("div",cm,[e("div",mm,[(a(),n("svg",gm,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Financier",-1)),t[24]||(t[24]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, paiements et remboursements",-1)),e("button",{onClick:t[7]||(t[7]=o=>s.generateReport("financial")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[9]||(t[9]=o=>o.currentTarget.style.backgroundColor="#272d63")},l(s.generating?"Génération...":"Générer"),41,pm)]),e("div",fm,[e("div",xm,[(a(),n("svg",vm,[...t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t[26]||(t[26]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Événements",-1)),t[27]||(t[27]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes de tickets et tendances",-1)),e("button",{onClick:t[10]||(t[10]=o=>s.generateReport("events")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[11]||(t[11]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#fab511")},l(s.generating?"Génération...":"Générer"),41,ym)]),e("div",bm,[t[28]||(t[28]=le('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-green-100" data-v-04ad1860><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Utilisateurs</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Croissance, activité et segments d&#39;utilisateurs</p>',3)),e("button",{onClick:t[13]||(t[13]=o=>s.generateReport("users")),disabled:s.generating,class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},l(s.generating?"Génération...":"Générer"),9,hm)]),e("div",wm,[t[29]||(t[29]=le('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-purple-100" data-v-04ad1860><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Performance</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Métriques de performance de la plateforme</p>',3)),e("button",{onClick:t[14]||(t[14]=o=>s.generateReport("performance")),disabled:s.generating,class:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},l(s.generating?"Génération...":"Générer"),9,_m)])]),e("div",km,[e("div",Cm,[e("div",Mm,[e("div",Sm,[(a(),n("svg",jm,[...t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",Am,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",Dm,l(s.formatAmount(s.stats.total_revenue))+" XAF",1)])])]),e("div",Pm,[e("div",Tm,[e("div",Fm,[(a(),n("svg",Um,[...t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])]))]),e("div",Em,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",zm,l(s.stats.total_tickets),1)])])]),e("div",Om,[e("div",Rm,[t[35]||(t[35]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",Bm,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Événements Actifs",-1)),e("p",Vm,l(s.stats.active_events),1)])])]),e("div",Im,[e("div",$m,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",Lm,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Utilisateurs Actifs",-1)),e("p",qm,l(s.stats.active_users),1)])])])]),e("div",Nm,[e("div",Hm,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold",style:{color:"#272d63"}},"Historique des Rapports",-1)),e("button",{onClick:t[15]||(t[15]=(...o)=>s.clearHistory&&s.clearHistory(...o)),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Vider l'historique ")]),s.loading?(a(),n("div",Xm,[...t[39]||(t[39]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{"border-color":"#272d63"}},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)])])):s.reports.length===0?(a(),n("div",Gm,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun rapport",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par générer votre premier rapport.",-1)])])):(a(),n("div",Km,[e("table",Wm,[t[42]||(t[42]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Taille"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Jm,[(a(!0),n(F,null,U(s.reports,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Ym,[e("div",Zm,[e("div",{class:O(["w-8 h-8 rounded-full flex items-center justify-center mr-3",s.getReportTypeClass(o.type)])},[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1)])],2),e("div",null,[e("p",Qm,l(s.getReportTypeName(o.type)),1),e("p",eg,l(o.format),1)])])]),e("td",tg,l(o.period),1),e("td",sg,l(s.formatDateTime(o.created_at)),1),e("td",og,l(o.file_size),1),e("td",rg,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="ready"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(o.status==="ready"?"Prêt":"En cours"),3)]),e("td",lg,[e("div",ag,[o.status==="ready"?(a(),n("button",{key:0,onClick:r=>s.downloadReport(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[16]||(t[16]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[17]||(t[17]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Télécharger ",40,ng)):_("",!0),e("button",{onClick:r=>s.deleteReport(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,ig)])])]))),128))])])]))])])}const ug=ee(lm,[["render",dg],["__scopeId","data-v-04ad1860"]]),K_=Object.freeze(Object.defineProperty({__proto__:null,default:ug},Symbol.toStringTag,{value:"Module"})),cg={name:"Settings",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v(!1),u=N({platform_name:"",site_url:"",contact_email:"",timezone:"Africa/Libreville",currency:"XAF"}),o=N({airtel_money:!0,moov_money:!0,bank_cards:!1}),r=N({email_enabled:!0,sms_enabled:!1,push_enabled:!0}),y=N({maintenance_mode:!1,maintenance_message:""}),b=N({fixed_commission:500,percentage_commission:5}),x=async()=>{d.value=!0;try{const g=await fetch("/api/v1/admin/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(g.ok){const h=await g.json();h.success&&(Object.assign(u,h.data.general||{}),Object.assign(o,h.data.payment||{}),Object.assign(r,h.data.notification||{}),Object.assign(y,h.data.maintenance||{}),Object.assign(b,h.data.commission||{}))}else T()}catch{console.log("API non disponible, utilisation des données locales"),T()}finally{d.value=!1}},T=()=>{Object.assign(u,{platform_name:"Primea Ticketing",site_url:"https://primea.ga",contact_email:"contact@primea.ga",timezone:"Africa/Libreville",currency:"XAF"}),Object.assign(o,{airtel_money:!0,moov_money:!0,bank_cards:!1}),Object.assign(r,{email_enabled:!0,sms_enabled:!1,push_enabled:!0}),Object.assign(y,{maintenance_mode:!1,maintenance_message:"Le site est temporairement en maintenance pour amélioration. Nous reviendrons bientôt !"}),Object.assign(b,{fixed_commission:500,percentage_commission:5})},z=async()=>{t.value=!0;try{(await fetch("/api/v1/admin/settings/general",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).ok?alert("Paramètres généraux sauvegardés avec succès"):alert("Paramètres généraux sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres généraux sauvegardés avec succès (simulé)")}finally{t.value=!1}},A=async()=>{m.value=!0;try{(await fetch("/api/v1/admin/settings/payment",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).ok?alert("Paramètres de paiement sauvegardés avec succès"):alert("Paramètres de paiement sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de paiement sauvegardés avec succès (simulé)")}finally{m.value=!1}},$=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/settings/notifications",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).ok?alert("Paramètres de notification sauvegardés avec succès"):alert("Paramètres de notification sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de notification sauvegardés avec succès (simulé)")}finally{s.value=!1}},H=async()=>{i.value=!0;try{(await fetch("/api/v1/admin/settings/security",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...y,...b})})).ok?alert("Paramètres de sécurité sauvegardés avec succès"):alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}finally{i.value=!1}},j=()=>{const g={general:u,payment:o,notification:r,maintenance:y,commission:b,exported_at:new Date().toISOString()},h=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),D=window.URL.createObjectURL(h),C=document.createElement("a");C.href=D,C.download=`primea-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(C),C.click(),window.URL.revokeObjectURL(D),document.body.removeChild(C)},E=g=>{const h=g.target.files[0];if(!h)return;const D=new FileReader;D.onload=C=>{try{const k=JSON.parse(C.target.result);confirm("Êtes-vous sûr de vouloir importer cette configuration ? Cela remplacera tous les paramètres actuels.")&&(k.general&&Object.assign(u,k.general),k.payment&&Object.assign(o,k.payment),k.notification&&Object.assign(r,k.notification),k.maintenance&&Object.assign(y,k.maintenance),k.commission&&Object.assign(b,k.commission),alert("Configuration importée avec succès"))}catch{alert("Erreur lors de l'importation du fichier : format invalide")}},D.readAsText(h),g.target.value=""},S=()=>{confirm("Êtes-vous sûr de vouloir réinitialiser tous les paramètres ? Cette action est irréversible.")&&(T(),alert("Tous les paramètres ont été réinitialisés aux valeurs par défaut"))};return ae(()=>{x()}),{loading:d,savingGeneral:t,savingPayment:m,savingNotifications:s,savingSecurity:i,generalForm:u,paymentForm:o,notificationForm:r,maintenanceForm:y,commissionForm:b,saveGeneralSettings:z,savePaymentSettings:A,saveNotificationSettings:$,saveSecuritySettings:H,exportSettings:j,importSettings:E,resetAllSettings:S}}},mg={class:"settings-management p-6"},gg={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},pg={class:"bg-white rounded-lg shadow p-6"},fg=["disabled"],xg={class:"bg-white rounded-lg shadow p-6"},vg={class:"space-y-4"},yg={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},bg={class:"relative inline-flex items-center cursor-pointer"},hg={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},wg={class:"relative inline-flex items-center cursor-pointer"},_g={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},kg={class:"relative inline-flex items-center cursor-pointer"},Cg=["disabled"],Mg={class:"bg-white rounded-lg shadow p-6"},Sg={class:"space-y-4"},jg={class:"flex items-center justify-between"},Ag={class:"relative inline-flex items-center cursor-pointer"},Dg={class:"flex items-center justify-between"},Pg={class:"relative inline-flex items-center cursor-pointer"},Tg={class:"flex items-center justify-between"},Fg={class:"relative inline-flex items-center cursor-pointer"},Ug=["disabled"],Eg={class:"bg-white rounded-lg shadow p-6"},zg={class:"space-y-6"},Og={class:"p-4 border border-orange-200 bg-orange-50 rounded-lg"},Rg={class:"flex items-center justify-between"},Bg={class:"relative inline-flex items-center cursor-pointer"},Vg={key:0,class:"mt-4"},Ig={class:"grid grid-cols-2 gap-4"},$g=["disabled"],Lg={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},qg={class:"bg-white rounded-lg shadow p-4 text-center"},Ng={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Hg={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xg={class:"bg-white rounded-lg shadow p-4 text-center"},Gg={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Kg={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wg={class:"bg-white rounded-lg shadow p-4 text-center"};function Jg(d,t,m,s,i,u){return a(),n("div",mg,[t[62]||(t[62]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Paramètres Système"),e("p",{class:"text-gray-600"},"Configurez les paramètres généraux de la plateforme Primea")],-1)),e("div",gg,[e("div",pg,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Configuration Générale",-1)),e("form",{onSubmit:t[7]||(t[7]=oe((...o)=>s.saveGeneralSettings&&s.saveGeneralSettings(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.generalForm.platform_name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.generalForm.platform_name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site *",-1)),p(e("input",{type:"url","onUpdate:modelValue":t[1]||(t[1]=o=>s.generalForm.site_url=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.generalForm.site_url]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=o=>s.generalForm.contact_email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.generalForm.contact_email]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.generalForm.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[34]||(t[34]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Paris (GMT+1)",-1)])],512),[[B,s.generalForm.timezone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.generalForm.currency=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[36]||(t[36]=[e("option",{value:"XAF"},"Franc CFA (XAF)",-1),e("option",{value:"EUR"},"Euro (EUR)",-1),e("option",{value:"USD"},"Dollar US (USD)",-1)])],512),[[B,s.generalForm.currency]])]),e("button",{type:"submit",disabled:s.savingGeneral,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63")},l(s.savingGeneral?"Sauvegarde...":"Sauvegarder"),41,fg)],32)]),e("div",xg,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Moyens de Paiement",-1)),e("div",vg,[e("div",yg,[t[39]||(t[39]=le('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-red-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-red-600 font-bold text-xs" data-v-b0f1a205>AM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Airtel Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Airtel</p></div></div>',1)),e("label",bg,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=o=>s.paymentForm.airtel_money=o),class:"sr-only peer"},null,512),[[re,s.paymentForm.airtel_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.paymentForm.airtel_money?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",hg,[t[40]||(t[40]=le('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-orange-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-orange-600 font-bold text-xs" data-v-b0f1a205>MM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Moov Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Moov</p></div></div>',1)),e("label",wg,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>s.paymentForm.moov_money=o),class:"sr-only peer"},null,512),[[re,s.paymentForm.moov_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.paymentForm.moov_money?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",_g,[t[42]||(t[42]=le('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-blue-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b0f1a205><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" data-v-b0f1a205></path></svg></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Cartes Bancaires</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Visa, Mastercard, etc.</p></div></div>',1)),e("label",kg,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>s.paymentForm.bank_cards=o),class:"sr-only peer"},null,512),[[re,s.paymentForm.bank_cards]]),t[41]||(t[41]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),e("button",{onClick:t[11]||(t[11]=(...o)=>s.savePaymentSettings&&s.savePaymentSettings(...o)),disabled:s.savingPayment,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#fab511")},l(s.savingPayment?"Sauvegarde...":"Sauvegarder les paiements"),41,Cg)])]),e("div",Mg,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Paramètres de Notifications",-1)),e("div",Sg,[e("div",jg,[t[44]||(t[44]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par email")],-1)),e("label",Ag,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>s.notificationForm.email_enabled=o),class:"sr-only peer"},null,512),[[re,s.notificationForm.email_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.notificationForm.email_enabled?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",Dg,[t[45]||(t[45]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications SMS"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par SMS")],-1)),e("label",Pg,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=o=>s.notificationForm.sms_enabled=o),class:"sr-only peer"},null,512),[[re,s.notificationForm.sms_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.notificationForm.sms_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",Tg,[t[47]||(t[47]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Push"),e("p",{class:"text-sm text-gray-600"},"Notifications navigateur et mobile")],-1)),e("label",Fg,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.notificationForm.push_enabled=o),class:"sr-only peer"},null,512),[[re,s.notificationForm.push_enabled]]),t[46]||(t[46]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("button",{onClick:t[17]||(t[17]=(...o)=>s.saveNotificationSettings&&s.saveNotificationSettings(...o)),disabled:s.savingNotifications,class:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},l(s.savingNotifications?"Sauvegarde...":"Sauvegarder les notifications"),9,Ug)])]),e("div",Eg,[t[55]||(t[55]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité et Maintenance",-1)),e("div",zg,[e("div",Og,[e("div",Rg,[t[50]||(t[50]=e("div",null,[e("h4",{class:"font-medium text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 text-orange-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),J(" Mode Maintenance ")]),e("p",{class:"text-sm text-gray-600"},"Rendre le site temporairement indisponible")],-1)),e("label",Bg,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=o=>s.maintenanceForm.maintenance_mode=o),class:"sr-only peer"},null,512),[[re,s.maintenanceForm.maintenance_mode]]),t[49]||(t[49]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"},null,-1))])]),s.maintenanceForm.maintenance_mode?(a(),n("div",Vg,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message de maintenance",-1)),p(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.maintenanceForm.maintenance_message=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"},placeholder:"Le site est temporairement en maintenance..."},null,512),[[M,s.maintenanceForm.maintenance_message]])])):_("",!0)]),e("div",null,[t[54]||(t[54]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Commission Plateforme",-1)),e("div",Ig,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission fixe (XAF)",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=o=>s.commissionForm.fixed_commission=o),min:"0",step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.commissionForm.fixed_commission]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission % du ticket",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[21]||(t[21]=o=>s.commissionForm.percentage_commission=o),min:"0",max:"100",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.commissionForm.percentage_commission]])])])]),e("button",{onClick:t[22]||(t[22]=(...o)=>s.saveSecuritySettings&&s.saveSecuritySettings(...o)),disabled:s.savingSecurity,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},l(s.savingSecurity?"Sauvegarde...":"Sauvegarder la sécurité"),9,$g)])])]),e("div",Lg,[e("div",qg,[e("div",Ng,[(a(),n("svg",Hg,[...t[56]||(t[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)])]))]),t[57]||(t[57]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Exporter Configuration",-1)),e("button",{onClick:t[23]||(t[23]=(...o)=>s.exportSettings&&s.exportSettings(...o)),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[24]||(t[24]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#fff"}),onMouseleave:t[25]||(t[25]=o=>{o.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",o.currentTarget.style.color="#272d63"})}," Exporter ",32)]),e("div",Xg,[e("div",Gg,[(a(),n("svg",Kg,[...t[58]||(t[58]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])]))]),t[59]||(t[59]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Importer Configuration",-1)),e("input",{type:"file",ref:"importFile",onChange:t[26]||(t[26]=(...o)=>s.importSettings&&s.importSettings(...o)),accept:".json",class:"hidden"},null,544),e("button",{onClick:t[27]||(t[27]=o=>d.$refs.importFile.click()),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#fab511","background-color":"rgba(250, 181, 17, 0.1)"},onMouseover:t[28]||(t[28]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#fff"}),onMouseleave:t[29]||(t[29]=o=>{o.currentTarget.style.backgroundColor="rgba(250, 181, 17, 0.1)",o.currentTarget.style.color="#fab511"})}," Importer ",32)]),e("div",Wg,[t[60]||(t[60]=e("div",{class:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),t[61]||(t[61]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Réinitialiser",-1)),e("button",{onClick:t[30]||(t[30]=(...o)=>s.resetAllSettings&&s.resetAllSettings(...o)),class:"text-sm text-red-600 hover:text-red-800 px-4 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Tout Réinitialiser ")])])])}const Yg=ee(cg,[["render",Jg],["__scopeId","data-v-b0f1a205"]]),W_=Object.freeze(Object.defineProperty({__proto__:null,default:Yg},Symbol.toStringTag,{value:"Module"})),Zg={name:"Profile",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v(!1),u=v(""),o=v({id:1,name:"",email:"",phone:"",position:"",created_at:new Date,login_count:0}),r=N({name:"",email:"",phone:"",position:""}),y=N({current_password:"",new_password:"",new_password_confirmation:""}),b=N({email_notifications:!0,two_factor_enabled:!1,language:"fr",timezone:"Africa/Libreville"}),x=v([]),T=async()=>{d.value=!0;try{const k=await fetch("/api/v1/admin/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(k.ok){const P=await k.json();P.success&&(o.value=P.data.user,Object.assign(r,P.data.user),Object.assign(b,P.data.preferences||b),x.value=P.data.sessions||[])}else z()}catch{console.log("API non disponible, utilisation des données locales"),z()}finally{d.value=!1}},z=()=>{const k={id:1,name:localStorage.getItem("userName")||"Admin Primea",email:localStorage.getItem("userEmail")||"admin@primea.ga",phone:"+241 01 23 45 67",position:"Super Administrateur",created_at:new Date("2024-01-15"),login_count:127};o.value=k,Object.assign(r,k),x.value=[{id:1,device:"Chrome sur macOS",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]},A=async()=>{t.value=!0;try{const k=await fetch("/api/v1/admin/profile",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});k.ok?(await k.json()).success&&(o.value={...o.value,...r},localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),alert("Profil mis à jour avec succès")):(o.value={...o.value,...r},localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),alert("Profil mis à jour avec succès (simulé)"))}catch{console.log("API non disponible, mise à jour locale"),o.value={...o.value,...r},localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),alert("Profil mis à jour avec succès (simulé)")}finally{t.value=!1}},$=async()=>{if(u.value="",y.new_password!==y.new_password_confirmation){u.value="Les mots de passe ne correspondent pas";return}if(y.new_password.length<8){u.value="Le mot de passe doit contenir au moins 8 caractères";return}m.value=!0;try{const k=await fetch("/api/v1/admin/profile/password",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(y)});k.ok?(await k.json()).success&&(Object.assign(y,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès")):(Object.assign(y,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)"))}catch{console.log("API non disponible, changement simulé"),Object.assign(y,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)")}finally{m.value=!1}},H=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/profile/preferences",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(b)})).ok?alert("Préférences sauvegardées avec succès"):alert("Préférences sauvegardées avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Préférences sauvegardées avec succès (simulé)")}finally{s.value=!1}},j=()=>{i.value=!0},E=async k=>{if(confirm("Êtes-vous sûr de vouloir révoquer cette session ?"))try{(await fetch(`/api/v1/admin/profile/sessions/${k.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?x.value=x.value.filter(c=>c.id!==k.id):x.value=x.value.filter(c=>c.id!==k.id)}catch{x.value=x.value.filter(c=>c.id!==k.id)}},S=async()=>{if(confirm("Cela déconnectera toutes les autres sessions. Continuer ?"))try{(await fetch("/api/v1/admin/profile/sessions/logout-all",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?(x.value=x.value.filter(P=>P.current),alert("Toutes les autres sessions ont été déconnectées")):(x.value=x.value.filter(P=>P.current),alert("Toutes les autres sessions ont été déconnectées (simulé)"))}catch{x.value=x.value.filter(P=>P.current),alert("Toutes les autres sessions ont été déconnectées (simulé)")}},g=()=>{alert("Téléchargement des données du compte (fonctionnalité à venir)")},h=k=>k.split(" ").map(P=>P.charAt(0)).join("").toUpperCase().substring(0,2),D=k=>new Date(k).toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),C=k=>{const c=new Date-new Date(k),f=Math.floor(c/6e4),w=Math.floor(c/36e5),L=Math.floor(c/864e5);return f<1?"À l'instant":f<60?`Il y a ${f} min`:w<24?`Il y a ${w}h`:`Il y a ${L}j`};return ae(()=>{T()}),{loading:d,updatingProfile:t,changingPassword:m,updatingPreferences:s,showAvatarModal:i,passwordError:u,profile:o,profileForm:r,passwordForm:y,preferences:b,activeSessions:x,updateProfile:A,changePassword:$,updatePreferences:H,changeAvatar:j,revokeSession:E,logoutAllSessions:S,downloadAccountData:g,getInitials:h,formatDate:D,formatRelativeTime:C}}},Qg={class:"profile-management p-6"},ep={class:"bg-white rounded-lg shadow p-6 mb-6"},tp={class:"flex items-center space-x-6"},sp={class:"relative"},op={class:"w-24 h-24 rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},rp={class:"flex-1"},lp={class:"text-xl font-bold",style:{color:"#272d63"}},ap={class:"text-gray-600 mb-1"},np={class:"flex items-center space-x-4 text-sm text-gray-500"},ip={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},dp={class:"bg-white rounded-lg shadow p-6"},up=["disabled"],cp={class:"bg-white rounded-lg shadow p-6"},mp={key:0,class:"text-red-600 text-sm"},gp=["disabled"],pp={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},fp={class:"bg-white rounded-lg shadow p-6"},xp={class:"space-y-4"},vp={class:"flex items-center justify-between"},yp={class:"relative inline-flex items-center cursor-pointer"},bp={class:"flex items-center justify-between"},hp={class:"relative inline-flex items-center cursor-pointer"},wp=["disabled"],_p={class:"bg-white rounded-lg shadow p-6"},kp={class:"grid grid-cols-2 gap-4 mb-6"},Cp={class:"text-center p-3 bg-gray-50 rounded-lg"},Mp={class:"text-xl font-bold",style:{color:"#272d63"}},Sp={class:"text-center p-3 bg-gray-50 rounded-lg"},jp={class:"text-xl font-bold",style:{color:"#fab511"}},Ap={class:"space-y-3"},Dp={class:"flex items-center"},Pp={class:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Tp={class:"w-4 h-4",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Fp={class:"text-sm font-medium text-gray-900"},Up={class:"text-xs text-gray-500"},Ep={class:"flex items-center space-x-2"},zp={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},Op=["onClick"],Rp={class:"mt-6 space-y-2"},Bp={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Vp={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Ip={class:"text-center mb-4"},$p={class:"w-24 h-24 mx-auto rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},Lp={class:"flex space-x-3"};function qp(d,t,m,s,i,u){return a(),n("div",Qg,[t[52]||(t[52]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Mon Profil"),e("p",{class:"text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",ep,[e("div",tp,[e("div",sp,[e("div",op,l(s.getInitials(s.profile.name)),1),e("button",{onClick:t[0]||(t[0]=(...o)=>s.changeAvatar&&s.changeAvatar(...o)),class:"absolute bottom-0 right-0 text-white p-2 rounded-full transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#fab511")},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],32)]),e("div",rp,[e("h3",lp,l(s.profile.name),1),e("p",ap,l(s.profile.email),1),e("div",np,[t[28]||(t[28]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),J(" Administrateur ")],-1)),e("span",null,"Membre depuis "+l(s.formatDate(s.profile.created_at)),1)])])])]),e("div",ip,[e("div",dp,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Informations Personnelles",-1)),e("form",{onSubmit:t[9]||(t[9]=oe((...o)=>s.updateProfile&&s.updateProfile(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.profileForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.profileForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=o=>s.profileForm.email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.profileForm.email]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),p(e("input",{type:"tel","onUpdate:modelValue":t[5]||(t[5]=o=>s.profileForm.phone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.profileForm.phone]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Poste",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.profileForm.position=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.profileForm.position]])]),e("button",{type:"submit",disabled:s.updatingProfile,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#272d63")},l(s.updatingProfile?"Mise à jour...":"Mettre à jour"),41,up)],32)]),e("div",cp,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Changer le Mot de Passe",-1)),e("form",{onSubmit:t[15]||(t[15]=oe((...o)=>s.changePassword&&s.changePassword(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel *",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=o=>s.passwordForm.current_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.passwordForm.current_password]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe *",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[11]||(t[11]=o=>s.passwordForm.new_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.passwordForm.new_password]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe *",-1)),p(e("input",{type:"password","onUpdate:modelValue":t[12]||(t[12]=o=>s.passwordForm.new_password_confirmation=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.passwordForm.new_password_confirmation]])]),s.passwordError?(a(),n("div",mp,l(s.passwordError),1)):_("",!0),e("button",{type:"submit",disabled:s.changingPassword,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511")},l(s.changingPassword?"Changement...":"Changer le mot de passe"),41,gp)],32)])]),e("div",pp,[e("div",fp,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Préférences",-1)),e("div",xp,[e("div",vp,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications importantes par email")],-1)),e("label",yp,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.preferences.email_notifications=o),class:"sr-only peer"},null,512),[[re,s.preferences.email_notifications]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ne(s.preferences.email_notifications?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",bp,[t[39]||(t[39]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Authentification 2FA"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée avec un code à usage unique")],-1)),e("label",hp,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>s.preferences.two_factor_enabled=o),class:"sr-only peer"},null,512),[[re,s.preferences.two_factor_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ne(s.preferences.two_factor_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue de l'interface",-1)),p(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.preferences.language=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[40]||(t[40]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[B,s.preferences.language]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),p(e("select",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.preferences.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[42]||(t[42]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1)])],512),[[B,s.preferences.timezone]])]),e("button",{onClick:t[20]||(t[20]=(...o)=>s.updatePreferences&&s.updatePreferences(...o)),disabled:s.updatingPreferences,class:"w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},l(s.updatingPreferences?"Sauvegarde...":"Sauvegarder les préférences"),9,wp)])]),e("div",_p,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité & Sessions",-1)),e("div",kp,[e("div",Cp,[e("div",Mp,l(s.profile.login_count||0),1),t[45]||(t[45]=e("div",{class:"text-sm text-gray-600"},"Connexions",-1))]),e("div",Sp,[e("div",jp,l(s.activeSessions.length),1),t[46]||(t[46]=e("div",{class:"text-sm text-gray-600"},"Sessions actives",-1))])]),e("div",Ap,[t[48]||(t[48]=e("h4",{class:"font-medium text-gray-900"},"Sessions Actives",-1)),(a(!0),n(F,null,U(s.activeSessions,o=>(a(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Dp,[e("div",Pp,[(a(),n("svg",Tp,[...t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])]))]),e("div",null,[e("p",Fp,l(o.device),1),e("p",Up,l(o.location)+" • "+l(s.formatRelativeTime(o.last_activity)),1)])]),e("div",Ep,[o.current?(a(),n("span",zp," Actuelle ")):(a(),n("button",{key:1,onClick:r=>s.revokeSession(o),class:"text-xs text-red-600 hover:text-red-800 px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Révoquer ",8,Op))])]))),128))]),e("div",Rp,[e("button",{onClick:t[21]||(t[21]=(...o)=>s.logoutAllSessions&&s.logoutAllSessions(...o)),class:"w-full text-orange-600 hover:text-orange-800 py-2 px-4 bg-orange-100 hover:bg-orange-200 rounded-lg font-medium transition-colors duration-200"}," Déconnecter toutes les autres sessions "),e("button",{onClick:t[22]||(t[22]=(...o)=>s.downloadAccountData&&s.downloadAccountData(...o)),class:"w-full text-gray-600 hover:text-gray-800 py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200"}," Télécharger mes données ")])])]),s.showAvatarModal?(a(),n("div",Bp,[e("div",Vp,[t[51]||(t[51]=e("h3",{class:"text-lg font-bold mb-4",style:{color:"#272d63"}},"Changer la photo de profil",-1)),e("div",Ip,[e("div",$p,l(s.getInitials(s.profile.name)),1),t[50]||(t[50]=e("p",{class:"text-sm text-gray-600 mt-2"},"Fonctionnalité à venir : upload d'image",-1))]),e("div",Lp,[e("button",{onClick:t[23]||(t[23]=o=>s.showAvatarModal=!1),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler "),e("button",{onClick:t[24]||(t[24]=o=>s.showAvatarModal=!1),class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[25]||(t[25]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[26]||(t[26]=o=>o.currentTarget.style.backgroundColor="#272d63")}," Fermer ",32)])])])):_("",!0)])}const Np=ee(Zg,[["render",qp],["__scopeId","data-v-baf281fd"]]),J_=Object.freeze(Object.defineProperty({__proto__:null,default:Np},Symbol.toStringTag,{value:"Module"})),Hp={name:"CategoryManagement",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v([]),i=v(null),u=N({search:"",status:""}),o=N({name:"",description:"",color:"#272d63",status:"active"}),r=N({current_page:1,per_page:10,total:0,from:0,to:0}),y=de(()=>{if(!Array.isArray(s.value))return[];let g=s.value;return u.search&&(g=g.filter(h=>h.name.toLowerCase().includes(u.search.toLowerCase())||h.description?.toLowerCase().includes(u.search.toLowerCase()))),u.status&&(g=g.filter(h=>h.status===u.status)),g}),b=de(()=>{const g=[];if(!r.total||!r.per_page)return[1];const h=Math.ceil(r.total/r.per_page);for(let D=1;D<=h;D++)g.push(D);return g}),x=async(g=1)=>{d.value=!0;try{const h=new URLSearchParams({page:g,per_page:r.per_page,...u.search&&{search:u.search},...u.status&&{status:u.status}}),D=await fetch(`/api/v1/admin/categories?${h}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(D.ok){const C=await D.json();if(C.success){const k=C.data?.data||C.categories?.data||C.data||[];s.value=k,C.data?.total&&Object.assign(r,{current_page:C.data.current_page||1,per_page:C.data.per_page||20,total:C.data.total||0,from:C.data.from||0,to:C.data.to||0,last_page:C.data.last_page||1})}}else T()}catch{console.log("API non disponible, utilisation des données simulées"),T()}finally{d.value=!1}},T=()=>{s.value=[{id:1,name:"Concerts",slug:"concerts",description:"Événements musicaux et concerts live",color:"#272d63",status:"active",events_count:25,created_at:new Date},{id:2,name:"Conférences",slug:"conferences",description:"Événements professionnels et éducatifs",color:"#fab511",status:"active",events_count:12,created_at:new Date(Date.now()-864e5)},{id:3,name:"Sport",slug:"sport",description:"Événements sportifs et compétitions",color:"#10b981",status:"active",events_count:8,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Culture",slug:"culture",description:"Événements culturels et artistiques",color:"#8b5cf6",status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}],Object.assign(r,{current_page:1,per_page:10,total:s.value.length,from:1,to:s.value.length})},z=async()=>{try{const g=await fetch("/api/v1/admin/categories",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(g.ok)(await g.json()).success&&(E(),x());else{const h={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(h),E()}}catch{console.log("API non disponible, ajout local simulé");const h={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(h),E()}},A=g=>{i.value=g,Object.assign(o,g),m.value=!0},$=async()=>{try{const g=await fetch(`/api/v1/admin/categories/${i.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(g.ok)(await g.json()).success&&(E(),x());else{const h=s.value.findIndex(D=>D.id===i.value.id);h!==-1&&(s.value[h]={...s.value[h],...o}),E()}}catch{console.log("API non disponible, mise à jour locale simulée");const h=s.value.findIndex(D=>D.id===i.value.id);h!==-1&&(s.value[h]={...s.value[h],...o}),E()}},H=async g=>{if(confirm(`Êtes-vous sûr de vouloir supprimer la catégorie "${g.name}" ?`))try{(await fetch(`/api/v1/admin/categories/${g.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?x():s.value=s.value.filter(D=>D.id!==g.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(D=>D.id!==g.id)}},j=g=>{r.current_page=g,x(g)},E=()=>{t.value=!1,m.value=!1,i.value=null,Object.assign(o,{name:"",description:"",color:"#272d63",status:"active"})},S=g=>new Date(g).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return ae(()=>{x()}),{loading:d,showCreateModal:t,showEditModal:m,categories:s,filters:u,categoryForm:o,pagination:r,filteredCategories:y,paginationPages:b,loadCategories:x,createCategory:z,editCategory:A,updateCategory:$,deleteCategory:H,changePage:j,closeModals:E,formatDate:S}}},Xp={class:"category-management p-6"},Gp={class:"mb-6 flex justify-between items-center"},Kp={class:"bg-white rounded-lg shadow p-4 mb-6"},Wp={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Jp={class:"flex items-end"},Yp={key:0,class:"flex justify-center items-center h-64"},Zp={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},Qp={class:"overflow-x-auto"},e1={class:"w-full"},t1={class:"divide-y divide-gray-200"},s1={class:"px-6 py-4"},o1={class:"flex items-center"},r1={class:"text-sm font-medium text-gray-900"},l1={class:"text-sm text-gray-500"},a1={class:"px-6 py-4"},n1={class:"text-sm text-gray-900"},i1={class:"px-6 py-4"},d1={class:"text-sm font-medium",style:{color:"#272d63"}},u1={class:"px-6 py-4"},c1={class:"px-6 py-4 text-sm text-gray-500"},m1={class:"px-6 py-4"},g1={class:"flex space-x-2"},p1=["onClick"],f1=["onClick"],x1={key:0,class:"text-center py-12"},v1={key:2,class:"mt-6 flex justify-between items-center"},y1={class:"text-sm text-gray-700"},b1={class:"flex space-x-2"},h1=["onClick"],w1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_1={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},k1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},C1={class:"space-y-4"},M1={class:"flex space-x-3 mt-6"};function S1(d,t,m,s,i,u){return a(),n("div",Xp,[e("div",Gp,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Catégories"),e("p",{class:"text-gray-600 mt-1"},"Organisez et gérez les catégories d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Nouvelle Catégorie ",-1)])],32)]),e("div",Kp,[e("div",Wp,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Nom de catégorie...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[B,s.filters.status]])]),e("div",Jp,[e("button",{onClick:t[5]||(t[5]=(...o)=>s.loadCategories&&s.loadCategories(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(a(),n("div",Yp,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(a(),n("div",Zp,[e("div",Qp,[e("table",e1,[t[25]||(t[25]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",t1,[(a(!0),n(F,null,U(s.filteredCategories,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",s1,[e("div",o1,[e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:ne({backgroundColor:o.color+"20",color:o.color})},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],4),e("div",null,[e("p",r1,l(o.name),1),e("p",l1,l(o.slug),1)])])]),e("td",a1,[e("p",n1,l(o.description||"Aucune description"),1)]),e("td",i1,[e("span",d1,l(o.events_count||0)+" événements",1)]),e("td",u1,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(o.status==="active"?"Actif":"Inactif"),3)]),e("td",c1,l(s.formatDate(o.created_at)),1),e("td",m1,[e("div",g1,[e("button",{onClick:r=>s.editCategory(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[8]||(t[8]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[9]||(t[9]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Modifier ",40,p1),e("button",{onClick:r=>s.deleteCategory(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,f1)])])]))),128))])])]),s.categories.length===0?(a(),n("div",x1,[...t[26]||(t[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucune catégorie",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre première catégorie.",-1)])])):_("",!0)])),s.pagination.total>s.pagination.per_page?(a(),n("div",v1,[e("div",y1," Affichage de "+l(s.pagination.from)+" à "+l(s.pagination.to)+" sur "+l(s.pagination.total)+" catégories ",1),e("div",b1,[(a(!0),n(F,null,U(s.paginationPages,o=>(a(),n("button",{key:o,onClick:r=>s.changePage(o),class:O(["px-3 py-2 text-sm rounded-lg transition-colors duration-200",o===s.pagination.current_page?"text-white":"text-gray-700 hover:bg-gray-100"]),style:ne(o===s.pagination.current_page?{backgroundColor:"#272d63"}:{})},l(o),15,h1))),128))])])):_("",!0),s.showCreateModal||s.showEditModal?(a(),n("div",w1,[e("div",_1,[e("h3",k1,l(s.showCreateModal?"Nouvelle Catégorie":"Modifier la Catégorie"),1),e("form",{onSubmit:t[17]||(t[17]=oe(o=>s.showCreateModal?s.createCategory():s.updateCategory(),["prevent"]))},[e("div",C1,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.categoryForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.categoryForm.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.categoryForm.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.categoryForm.description]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),p(e("input",{type:"color","onUpdate:modelValue":t[12]||(t[12]=o=>s.categoryForm.color=o),class:"w-full h-10 border border-gray-300 rounded-lg"},null,512),[[M,s.categoryForm.color]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.categoryForm.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[B,s.categoryForm.status]])])]),e("div",M1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[15]||(t[15]=o=>o.currentTarget.style.backgroundColor="#272d63")},l(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[16]||(t[16]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):_("",!0)])}const j1=ee(Hp,[["render",S1],["__scopeId","data-v-a15d9acb"]]),Y_=Object.freeze(Object.defineProperty({__proto__:null,default:j1},Symbol.toStringTag,{value:"Module"})),A1={name:"VenueManagement",components:{ImageUpload:xe},setup(){const d=v(!1),t=v(!1),m=v(!1),s=v([]),i=v(null),u=v(null),o=N({search:"",city:"",status:""}),r=N({name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},status:"active"}),y=de(()=>{let g=s.value;return o.search&&(g=g.filter(h=>h.name.toLowerCase().includes(o.search.toLowerCase())||h.address.toLowerCase().includes(o.search.toLowerCase()))),o.city&&(g=g.filter(h=>h.city===o.city)),o.status&&(g=g.filter(h=>h.status===o.status)),g}),b=de(()=>!Array.isArray(s.value)||s.value.length===0?[]:[...new Set(s.value.map(g=>g.city))].sort()),x=async()=>{d.value=!0;try{const g=new URLSearchParams({...o.search&&{search:o.search},...o.city&&{city:o.city},...o.status&&{status:o.status}}),h=await fetch(`/api/v1/admin/venues?${g}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(h.ok){const D=await h.json();if(D.success){const C=D.data?.data||D.venues?.data||D.data||[];s.value=C,D.data?.total&&(u.value={total:D.data.total,per_page:D.data.per_page,current_page:D.data.current_page,last_page:D.data.last_page})}}else T()}catch{console.log("API non disponible, utilisation des données simulées"),T()}finally{d.value=!1}},T=()=>{s.value||(s.value=[]),s.value=[{id:1,name:"Centre de Conférences Mbolo",description:"Centre moderne pour événements d'entreprise",address:"Avenue de l'Indépendance",city:"Libreville",postal_code:"BP 123",country:"Gabon",capacity:500,phone:"+241 01 23 45 67",email:"contact@mbolo.ga",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",status:"active",events_count:15,created_at:new Date},{id:2,name:"Salle Polyvalente Akanda",description:"Espace polyvalent pour tous types d'événements",address:"Quartier Akanda",city:"Akanda",postal_code:"BP 456",country:"Gabon",capacity:300,phone:"+241 01 34 56 78",email:"akanda@venues.ga",image:"https://images.unsplash.com/photo-1511578314322-379afb476865?w=400",status:"active",events_count:8,created_at:new Date(Date.now()-864e5)},{id:3,name:"Stade Omnisports",description:"Grand stade pour événements sportifs et concerts",address:"Zone Industrielle Owendo",city:"Owendo",postal_code:"BP 789",country:"Gabon",capacity:5e3,phone:"+241 01 45 67 89",email:"stade@owendo.ga",image:"https://images.unsplash.com/photo-1459865264687-595d652de67e?w=400",status:"active",events_count:12,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Salle des Fêtes Port-Gentil",description:"Salle traditionnelle rénovée",address:"Centre-ville",city:"Port-Gentil",postal_code:"BP 012",country:"Gabon",capacity:200,phone:"+241 01 56 78 90",email:"fetes@portgentil.ga",image:null,status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}]},z=async()=>{try{const g=new FormData;if(g.append("name",r.name),r.description&&g.append("description",r.description),g.append("address",r.address),g.append("city",r.city),r.postal_code&&g.append("postal_code",r.postal_code),r.country&&g.append("country",r.country),r.capacity&&g.append("capacity",r.capacity),r.phone&&g.append("phone",r.phone),r.email&&g.append("email",r.email),r.status&&g.append("status",r.status),r.image.url)g.append("image_url",r.image.url);else if(r.image.urls&&r.image.urls.medium)g.append("image_url",r.image.urls.medium);else if(r.image.filename){const D=`${window.location.origin}/storage/images/venues/medium_${r.image.filename}`;g.append("image_url",D)}const h=await fetch("/api/v1/admin/venues",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:g});if(h.ok)(await h.json()).success&&(j(),x());else{const D={id:Date.now(),...r,events_count:0,created_at:new Date};s.value.unshift(D),j()}}catch{console.log("API non disponible, ajout local simulé");const h={id:Date.now(),...r,events_count:0,created_at:new Date};s.value.unshift(h),j()}},A=g=>{i.value=g;let h={};g.image_url?h={url:g.image_url}:g.image_file&&(h={url:`/storage/${g.image_file}`}),Object.assign(r,{...g,image:h}),m.value=!0},$=async()=>{try{const g=new FormData;if(g.append("name",r.name),r.description&&g.append("description",r.description),g.append("address",r.address),g.append("city",r.city),r.postal_code&&g.append("postal_code",r.postal_code),r.country&&g.append("country",r.country),r.capacity&&g.append("capacity",r.capacity),r.phone&&g.append("phone",r.phone),r.email&&g.append("email",r.email),r.status&&g.append("status",r.status),r.image.url)g.append("image_url",r.image.url);else if(r.image.urls&&r.image.urls.medium)g.append("image_url",r.image.urls.medium);else if(r.image.filename){const D=`${window.location.origin}/storage/images/venues/medium_${r.image.filename}`;g.append("image_url",D)}g.append("_method","PUT");const h=await fetch(`/api/v1/admin/venues/${i.value.id}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:g});if(h.ok)(await h.json()).success&&(j(),x());else{const D=s.value.findIndex(C=>C.id===i.value.id);D!==-1&&(s.value[D]={...s.value[D],...r}),j()}}catch{console.log("API non disponible, mise à jour locale simulée");const h=s.value.findIndex(D=>D.id===i.value.id);h!==-1&&(s.value[h]={...s.value[h],...r}),j()}},H=async g=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le lieu "${g.name}" ?`))try{(await fetch(`/api/v1/admin/venues/${g.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?x():s.value=s.value.filter(D=>D.id!==g.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(D=>D.id!==g.id)}},j=()=>{t.value=!1,m.value=!1,i.value=null,Object.assign(r,{name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},status:"active"})},E=g=>g.image_url&&(g.image_url.startsWith("http://")||g.image_url.startsWith("https://"))?g.image_url:g.image_file?`/storage/${g.image_file}`:g.image?g.image.startsWith("http://")||g.image.startsWith("https://")?g.image:`/storage/${g.image}`:null,S=g=>{g.target.style.display="none"};return ae(()=>{x()}),{loading:d,showCreateModal:t,showEditModal:m,venues:s,filters:o,venueForm:r,filteredVenues:y,cities:b,loadVenues:x,createVenue:z,editVenue:A,updateVenue:$,deleteVenue:H,closeModals:j,getVenueImageUrl:E,handleImageError:S}}},D1={class:"venue-management p-6"},P1={class:"mb-6 flex justify-between items-center"},T1={class:"bg-white rounded-lg shadow p-4 mb-6"},F1={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},U1=["value"],E1={class:"flex items-end"},z1={key:0,class:"flex justify-center items-center h-64"},O1={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},R1={class:"h-48 bg-gray-200 rounded-t-lg relative overflow-hidden"},B1=["src","alt"],V1={key:1,class:"w-full h-full flex items-center justify-center"},I1={class:"absolute top-3 right-3"},$1={class:"p-4"},L1={class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},q1={class:"space-y-2 text-sm text-gray-600"},N1={class:"flex items-center"},H1={class:"flex items-center"},X1={class:"flex items-center"},G1={class:"flex space-x-2 mt-4"},K1=["onClick"],W1=["onClick"],J1={key:2,class:"text-center py-12"},Y1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Z1={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-90vh overflow-y-auto"},Q1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},e2={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},t2={class:"md:col-span-2"},s2={class:"md:col-span-2"},o2={class:"md:col-span-2"},r2={class:"flex space-x-3 mt-6"};function l2(d,t,m,s,i,u){const o=me("ImageUpload");return a(),n("div",D1,[e("div",P1,[t[28]||(t[28]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Lieux"),e("p",{class:"text-gray-600 mt-1"},"Gérez les lieux et salles d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=r=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=r=>r.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=r=>r.currentTarget.style.backgroundColor="#272d63")},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Nouveau Lieu ",-1)])],32)]),e("div",T1,[e("div",F1,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=r=>s.filters.search=r),placeholder:"Nom du lieu...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.filters.search]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.filters.city=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[t[30]||(t[30]=e("option",{value:""},"Toutes les villes",-1)),(a(!0),n(F,null,U(s.cities,r=>(a(),n("option",{key:r,value:r},l(r),9,U1))),128))],512),[[B,s.filters.city]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>s.filters.status=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[32]||(t[32]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[B,s.filters.status]])]),e("div",E1,[e("button",{onClick:t[6]||(t[6]=(...r)=>s.loadVenues&&s.loadVenues(...r)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[7]||(t[7]=r=>r.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[8]||(t[8]=r=>r.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(a(),n("div",z1,[...t[34]||(t[34]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(a(),n("div",O1,[(a(!0),n(F,null,U(s.filteredVenues,r=>(a(),n("div",{key:r.id,class:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-200"},[e("div",R1,[s.getVenueImageUrl(r)?(a(),n("img",{key:0,src:s.getVenueImageUrl(r),alt:r.name,class:"w-full h-full object-cover",onError:t[9]||(t[9]=(...y)=>s.handleImageError&&s.handleImageError(...y))},null,40,B1)):(a(),n("div",V1,[...t[35]||(t[35]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),e("div",I1,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(r.status==="active"?"Actif":"Inactif"),3)])]),e("div",$1,[e("h3",L1,l(r.name),1),e("div",q1,[e("div",N1,[t[36]||(t[36]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),J(" "+l(r.address)+", "+l(r.city),1)]),e("div",H1,[t[37]||(t[37]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),J(" Capacité: "+l(r.capacity)+" personnes ",1)]),e("div",X1,[t[38]||(t[38]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),J(" "+l(r.events_count||0)+" événements ",1)])]),e("div",G1,[e("button",{onClick:y=>s.editVenue(r),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[10]||(t[10]=y=>{y.currentTarget.style.backgroundColor="#fab511",y.currentTarget.style.color="#fff"}),onMouseleave:t[11]||(t[11]=y=>{y.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",y.currentTarget.style.color="#272d63"})}," Modifier ",40,K1),e("button",{onClick:y=>s.deleteVenue(r),class:"flex-1 text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,W1)])])]))),128))])),s.venues.length===0&&!s.loading?(a(),n("div",J1,[...t[39]||(t[39]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun lieu",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par ajouter votre premier lieu.",-1)])])):_("",!0),s.showCreateModal||s.showEditModal?(a(),n("div",Y1,[e("div",Z1,[e("h3",Q1,l(s.showCreateModal?"Nouveau Lieu":"Modifier le Lieu"),1),e("form",{onSubmit:t[26]||(t[26]=oe(r=>s.showCreateModal?s.createVenue():s.updateVenue(),["prevent"]))},[e("div",e2,[e("div",t2,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du lieu *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=r=>s.venueForm.name=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.name]])]),e("div",s2,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=r=>s.venueForm.description=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.description]])]),e("div",o2,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image du lieu",-1)),fe(o,{modelValue:s.venueForm.image,"onUpdate:modelValue":t[14]||(t[14]=r=>s.venueForm.image=r),"entity-type":"venues",size:"medium","alt-text":"Image du lieu"},null,8,["modelValue"])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=r=>s.venueForm.address=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.address]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=r=>s.venueForm.city=r),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.city]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=r=>s.venueForm.postal_code=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.postal_code]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=r=>s.venueForm.country=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.country]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Capacité *",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=r=>s.venueForm.capacity=r),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.capacity]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[20]||(t[20]=r=>s.venueForm.status=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[48]||(t[48]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[B,s.venueForm.status]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),p(e("input",{type:"tel","onUpdate:modelValue":t[21]||(t[21]=r=>s.venueForm.phone=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.phone]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[22]||(t[22]=r=>s.venueForm.email=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.venueForm.email]])])]),e("div",r2,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[23]||(t[23]=r=>r.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[24]||(t[24]=r=>r.currentTarget.style.backgroundColor="#272d63")},l(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[25]||(t[25]=(...r)=>s.closeModals&&s.closeModals(...r)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):_("",!0)])}const a2=ee(A1,[["render",l2],["__scopeId","data-v-44a0f23c"]]),Z_=Object.freeze(Object.defineProperty({__proto__:null,default:a2},Symbol.toStringTag,{value:"Module"})),n2={name:"UserTypes",data(){return{userTypes:[],loading:!1,showDetailsModal:!1,selectedUserType:null,filters:{status:""},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadUserTypes()},methods:{async loadUserTypes(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/user-types",{params:t});m.data.success&&(this.userTypes=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement types utilisateurs:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les types d'utilisateurs"})}finally{this.loading=!1}},resetFilters(){this.filters={status:""},this.loadUserTypes()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadUserTypes(d)},viewDetails(d){this.selectedUserType=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedUserType=null},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}},i2={class:"user-types-page p-6 bg-gray-50 min-h-screen"},d2={class:"bg-white rounded-lg shadow p-6 mb-8"},u2={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},c2={class:"flex items-end"},m2={class:"bg-white rounded-lg shadow"},g2={key:0,class:"p-8 text-center"},p2={key:1,class:"p-8 text-center text-gray-500"},f2={key:2,class:"overflow-x-auto"},x2={class:"w-full"},v2={class:"divide-y divide-gray-200"},y2={class:"px-6 py-4 text-sm text-gray-900"},b2={class:"px-6 py-4 text-sm font-medium text-gray-900"},h2={class:"px-6 py-4 text-sm text-gray-900"},w2={class:"px-6 py-4 text-sm text-gray-600"},_2={class:"px-6 py-4 text-sm text-gray-900"},k2={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},C2={class:"px-6 py-4 text-sm"},M2={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},S2={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},j2={class:"px-6 py-4 text-sm"},A2=["onClick"],D2={key:3,class:"p-6 border-t"},P2={class:"flex items-center justify-between"},T2={class:"text-sm text-gray-700"},F2={class:"flex space-x-2"},U2=["disabled"],E2=["disabled"],z2={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},O2={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},R2={class:"p-6 border-b"},B2={class:"flex items-center justify-between"},V2={key:0,class:"p-6"},I2={class:"space-y-4"},$2={class:"text-gray-900"},L2={class:"text-gray-900 font-medium"},q2={class:"text-gray-900"},N2={class:"text-gray-900"},H2={class:"text-gray-900"},X2={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},G2={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},K2={class:"text-gray-900"},W2={class:"text-gray-900"},J2={class:"p-6 border-t bg-gray-50"};function Y2(d,t,m,s,i,u){return a(),n("div",i2,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Types d'Utilisateurs"),e("p",{class:"text-gray-600"},"Consultation des types d'utilisateurs du système")])])],-1)),e("div",d2,[t[9]||(t[9]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",u2,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.filters.status=o),onChange:t[1]||(t[1]=(...o)=>u.loadUserTypes&&u.loadUserTypes(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[7]||(t[7]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[B,i.filters.status]])]),e("div",c2,[e("button",{onClick:t[2]||(t[2]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",m2,[t[13]||(t[13]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Types d'Utilisateurs")],-1)),i.loading?(a(),n("div",g2,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.userTypes.length===0?(a(),n("div",p2," Aucun type d'utilisateur trouvé ")):(a(),n("div",f2,[e("table",x2,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Label"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",v2,[(a(!0),n(F,null,U(i.userTypes,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",y2,l(o.id),1),e("td",b2,l(o.name),1),e("td",h2,l(o.label),1),e("td",w2,l(o.description||"N/A"),1),e("td",_2,[e("span",k2,l(o.users_count||0),1)]),e("td",C2,[o.is_active?(a(),n("span",M2," Actif ")):(a(),n("span",S2," Inactif "))]),e("td",j2,[e("button",{onClick:r=>u.viewDetails(o),class:"text-primea-blue hover:text-blue-800"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,A2)])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",D2,[e("div",P2,[e("div",T2," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",F2,[e("button",{onClick:t[3]||(t[3]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,U2),e("button",{onClick:t[4]||(t[4]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,E2)])])])):_("",!0)]),i.showDetailsModal?(a(),n("div",z2,[e("div",O2,[e("div",R2,[e("div",B2,[t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Type d'Utilisateur",-1)),e("button",{onClick:t[5]||(t[5]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedUserType?(a(),n("div",V2,[e("div",I2,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID",-1)),e("p",$2,l(i.selectedUserType.id),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",L2,l(i.selectedUserType.name),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Label",-1)),e("p",q2,l(i.selectedUserType.label),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",N2,l(i.selectedUserType.description||"Aucune description"),1)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre d'utilisateurs",-1)),e("p",H2,l(i.selectedUserType.users_count||0),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),i.selectedUserType.is_active?(a(),n("span",X2," Actif ")):(a(),n("span",G2," Inactif "))]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de création",-1)),e("p",K2,l(u.formatDate(i.selectedUserType.created_at)),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dernière modification",-1)),e("p",W2,l(u.formatDate(i.selectedUserType.updated_at)),1)])])])):_("",!0),e("div",J2,[e("button",{onClick:t[6]||(t[6]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0)])}const Z2=ee(n2,[["render",Y2]]),Q_=Object.freeze(Object.defineProperty({__proto__:null,default:Z2},Symbol.toStringTag,{value:"Module"})),Q2={name:"Privileges",data(){return{privileges:[],loading:!1,showDetailsModal:!1,selectedPrivilege:null,filters:{module:"",action:"",status:""},pagination:{current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}}},mounted(){this.loadPrivileges()},methods:{async loadPrivileges(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/privileges",{params:t});m.data.success&&(this.privileges=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement privilèges:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loading=!1}},resetFilters(){this.filters={module:"",action:"",status:""},this.loadPrivileges()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadPrivileges(d)},viewDetails(d){this.selectedPrivilege=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedPrivilege=null},formatModule(d){return{auth:"Authentification",events:"Événements",orders:"Commandes",payments:"Paiements",tickets:"Billets",scanning:"Scan",organizers:"Organisateurs",users:"Utilisateurs",admin:"Administration"}[d]||d},formatAction(d){return{create:"Créer",read:"Lire",view:"Voir",update:"Modifier",delete:"Supprimer",manage:"Gérer",access:"Accéder"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}},ef={class:"privileges-page p-6 bg-gray-50 min-h-screen"},tf={class:"bg-white rounded-lg shadow p-6 mb-8"},sf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},of={class:"flex items-end"},rf={class:"bg-white rounded-lg shadow"},lf={class:"p-6 border-b"},af={class:"text-sm text-gray-600 mt-1"},nf={key:0,class:"p-8 text-center"},df={key:1,class:"p-8 text-center text-gray-500"},uf={key:2,class:"overflow-x-auto"},cf={class:"w-full"},mf={class:"divide-y divide-gray-200"},gf={class:"px-6 py-4 text-sm text-gray-900"},pf={class:"px-6 py-4 text-sm font-medium text-gray-900"},ff={class:"px-6 py-4 text-sm text-gray-600 font-mono"},xf={class:"px-6 py-4 text-sm"},vf={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium"},yf={class:"px-6 py-4 text-sm"},bf={class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium"},hf={class:"px-6 py-4 text-sm text-gray-900"},wf={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},_f={class:"px-6 py-4 text-sm"},kf={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},Cf={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},Mf={class:"px-6 py-4 text-sm"},Sf=["onClick"],jf={key:3,class:"p-6 border-t"},Af={class:"flex items-center justify-between"},Df={class:"text-sm text-gray-700"},Pf={class:"flex space-x-2"},Tf=["disabled"],Ff=["disabled"],Uf={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ef={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},zf={class:"p-6 border-b"},Of={class:"flex items-center justify-between"},Rf={key:0,class:"p-6"},Bf={class:"space-y-4"},Vf={class:"text-gray-900"},If={class:"text-gray-900 font-medium"},$f={class:"text-gray-900 font-mono bg-gray-100 px-3 py-2 rounded"},Lf={class:"text-gray-900"},qf={class:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium"},Nf={class:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium"},Hf={key:0,class:"flex flex-wrap gap-2 mt-2"},Xf={key:1,class:"text-gray-500"},Gf={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},Kf={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},Wf={class:"text-gray-900"},Jf={class:"text-gray-900"},Yf={class:"p-6 border-t bg-gray-50"};function Zf(d,t,m,s,i,u){return a(),n("div",ef,[t[34]||(t[34]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Privilèges"),e("p",{class:"text-gray-600"},"Consultation des privilèges du système")])])],-1)),e("div",tf,[t[17]||(t[17]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",sf,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Module",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.filters.module=o),onChange:t[1]||(t[1]=(...o)=>u.loadPrivileges&&u.loadPrivileges(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[11]||(t[11]=[le('<option value="">Tous les modules</option><option value="auth">Authentification</option><option value="events">Événements</option><option value="orders">Commandes</option><option value="payments">Paiements</option><option value="tickets">Billets</option><option value="scanning">Scan</option><option value="organizers">Organisateurs</option><option value="users">Utilisateurs</option><option value="admin">Administration</option>',10)])],544),[[B,i.filters.module]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Action",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.filters.action=o),onChange:t[3]||(t[3]=(...o)=>u.loadPrivileges&&u.loadPrivileges(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[13]||(t[13]=[le('<option value="">Toutes les actions</option><option value="create">Créer</option><option value="read">Lire</option><option value="view">Voir</option><option value="update">Modifier</option><option value="delete">Supprimer</option><option value="manage">Gérer</option><option value="access">Accéder</option>',8)])],544),[[B,i.filters.action]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>i.filters.status=o),onChange:t[5]||(t[5]=(...o)=>u.loadPrivileges&&u.loadPrivileges(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[15]||(t[15]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[B,i.filters.status]])]),e("div",of,[e("button",{onClick:t[6]||(t[6]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",rf,[e("div",lf,[t[18]||(t[18]=e("h2",{class:"text-xl font-bold"},"Liste des Privilèges",-1)),e("p",af,"Total: "+l(i.pagination.total)+" privilège(s)",1)]),i.loading?(a(),n("div",nf,[...t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.privileges.length===0?(a(),n("div",df," Aucun privilège trouvé ")):(a(),n("div",uf,[e("table",cf,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Slug"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Module"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",mf,[(a(!0),n(F,null,U(i.privileges,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",gf,l(o.id),1),e("td",pf,l(o.name),1),e("td",ff,l(o.slug),1),e("td",xf,[e("span",vf,l(u.formatModule(o.module)),1)]),e("td",yf,[e("span",bf,l(u.formatAction(o.action)),1)]),e("td",hf,[e("span",wf,l(o.roles_count||0),1)]),e("td",_f,[o.is_active?(a(),n("span",kf," Actif ")):(a(),n("span",Cf," Inactif "))]),e("td",Mf,[e("button",{onClick:r=>u.viewDetails(o),class:"text-primea-blue hover:text-blue-800"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Sf)])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",jf,[e("div",Af,[e("div",Df," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",Pf,[e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Tf),e("button",{onClick:t[8]||(t[8]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Ff)])])])):_("",!0)]),i.showDetailsModal?(a(),n("div",Uf,[e("div",Ef,[e("div",zf,[e("div",Of,[t[23]||(t[23]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Privilège",-1)),e("button",{onClick:t[9]||(t[9]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[22]||(t[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedPrivilege?(a(),n("div",Rf,[e("div",Bf,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID",-1)),e("p",Vf,l(i.selectedPrivilege.id),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",If,l(i.selectedPrivilege.name),1)]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),e("p",$f,l(i.selectedPrivilege.slug),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",Lf,l(i.selectedPrivilege.description||"Aucune description"),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Module",-1)),e("span",qf,l(u.formatModule(i.selectedPrivilege.module)),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Action",-1)),e("span",Nf,l(u.formatAction(i.selectedPrivilege.action)),1)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rôles associés",-1)),i.selectedPrivilege.roles&&i.selectedPrivilege.roles.length>0?(a(),n("div",Hf,[(a(!0),n(F,null,U(i.selectedPrivilege.roles,o=>(a(),n("span",{key:o.id,class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},l(o.name),1))),128))])):(a(),n("p",Xf,"Aucun rôle associé"))]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),i.selectedPrivilege.is_active?(a(),n("span",Gf," Actif ")):(a(),n("span",Kf," Inactif "))]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de création",-1)),e("p",Wf,l(u.formatDate(i.selectedPrivilege.created_at)),1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dernière modification",-1)),e("p",Jf,l(u.formatDate(i.selectedPrivilege.updated_at)),1)])])])):_("",!0),e("div",Yf,[e("button",{onClick:t[10]||(t[10]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0)])}const Qf=ee(Q2,[["render",Zf]]),e5=Object.freeze(Object.defineProperty({__proto__:null,default:Qf},Symbol.toStringTag,{value:"Module"})),ex={name:"Roles",data(){return{roles:[],allPrivileges:[],availablePrivileges:[],userTypes:[],loading:!1,loadingPrivileges:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,showPrivilegesModal:!1,isEditMode:!1,selectedRole:null,privilegeSearch:"",selectedPrivilegeIds:[],filters:{type:"",status:""},formData:{name:"",description:"",user_type_id:"",type:"custom",level:10,is_active:!0,privilege_ids:[]},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},computed:{filteredPrivileges(){if(!this.privilegeSearch)return this.allPrivileges;const d=this.privilegeSearch.toLowerCase();return this.allPrivileges.filter(t=>t.name.toLowerCase().includes(d)||t.slug.toLowerCase().includes(d)||t.module.toLowerCase().includes(d)||t.action.toLowerCase().includes(d))},filteredAvailablePrivileges(){if(!this.privilegeSearch)return this.availablePrivileges;const d=this.privilegeSearch.toLowerCase();return this.availablePrivileges.filter(t=>t.name.toLowerCase().includes(d)||t.slug.toLowerCase().includes(d)||t.module.toLowerCase().includes(d)||t.action.toLowerCase().includes(d))}},mounted(){this.loadRoles(),this.loadUserTypes()},methods:{async loadRoles(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/roles",{params:t});m.data.success&&(this.roles=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement rôles:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les rôles"})}finally{this.loading=!1}},async loadUserTypes(){try{const d=await Y.get("/api/v1/admin/user-types",{params:{per_page:100}});d.data.success&&(this.userTypes=d.data.data.data)}catch(d){console.error("Erreur chargement types utilisateurs:",d)}},async loadAllPrivileges(){this.loadingPrivileges=!0;try{const d=await Y.get("/api/v1/admin/privileges",{params:{per_page:1e3}});d.data.success&&(this.allPrivileges=d.data.data.data)}catch(d){console.error("Erreur chargement privilèges:",d),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loadingPrivileges=!1}},async loadPrivilegesForUserType(){if(!this.formData.user_type_id){this.availablePrivileges=[];return}this.loadingPrivileges=!0;try{const d=await Y.get("/api/v1/admin/privileges",{params:{per_page:1e3,user_type_id:this.formData.user_type_id}});d.data.success&&(this.availablePrivileges=d.data.data.data)}catch(d){console.error("Erreur chargement privilèges:",d),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loadingPrivileges=!1}},togglePrivilegeInForm(d){const t=this.formData.privilege_ids.indexOf(d);t>-1?this.formData.privilege_ids.splice(t,1):this.formData.privilege_ids.push(d)},resetFilters(){this.filters={type:"",status:""},this.loadRoles()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadRoles(d)},async openCreateModal(){this.isEditMode=!1,this.formData={name:"",description:"",user_type_id:"",type:"custom",level:10,is_active:!0,privilege_ids:[]},this.availablePrivileges=[],this.privilegeSearch="",this.showFormModal=!0},async openEditModal(d){this.isEditMode=!0,this.selectedRole=d,this.formData={name:d.name,description:d.description,user_type_id:d.user_type_id,type:d.type||"custom",level:d.level,is_active:d.is_active,privilege_ids:d.privileges?.map(t=>t.id)||[]},this.privilegeSearch="",this.showFormModal=!0,d.user_type_id&&await this.loadPrivilegesForUserType()},closeFormModal(){this.showFormModal=!1,this.selectedRole=null},async submitForm(){this.submitting=!0;try{const d=this.isEditMode?`/api/v1/admin/roles/${this.selectedRole.id}`:"/api/v1/admin/roles",t=this.isEditMode?"put":"post",m={name:this.formData.name,description:this.formData.description,user_type_id:this.formData.user_type_id,type:this.formData.type,level:this.formData.level,is_active:this.formData.is_active,privilege_ids:this.formData.privilege_ids},s=await Y[t](d,m);s.data.success&&(q.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadRoles(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),q.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedRole=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedRole=null},async managePrivileges(d){this.selectedRole=d,this.selectedPrivilegeIds=d.privileges?.map(t=>t.id)||[],this.privilegeSearch="",this.showPrivilegesModal=!0,await this.loadAllPrivileges()},closePrivilegesModal(){this.showPrivilegesModal=!1,this.selectedRole=null,this.selectedPrivilegeIds=[]},togglePrivilege(d){const t=this.selectedPrivilegeIds.indexOf(d);t>-1?this.selectedPrivilegeIds.splice(t,1):this.selectedPrivilegeIds.push(d)},async savePrivileges(){this.submitting=!0;try{(await Y.post(`/api/v1/admin/roles/${this.selectedRole.id}/privileges`,{privilege_ids:this.selectedPrivilegeIds})).data.success&&(q.fire({icon:"success",title:"Succès",text:"Privilèges mis à jour avec succès",timer:2e3}),this.closePrivilegesModal(),this.loadRoles(this.pagination.current_page))}catch(d){console.error("Erreur sauvegarde privilèges:",d),q.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},confirmDelete(d){q.fire({title:"Supprimer ce rôle ?",html:`
          <p>Voulez-vous vraiment supprimer le rôle <strong>${d.name}</strong> ?</p>
          ${d.users_count>0?'<p class="text-red-600 mt-2">⚠️ Ce rôle est assigné à '+d.users_count+" utilisateur(s)</p>":""}
        `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteRole(d)})},async deleteRole(d){try{const t=await Y.delete(`/api/v1/admin/roles/${d.id}`);t.data.success&&(q.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadRoles(this.pagination.current_page))}catch(t){console.error("Erreur suppression rôle:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer ce rôle"})}},getTypeClass(d){return{system:"bg-red-100 text-red-800",organizer:"bg-yellow-100 text-yellow-800",custom:"bg-green-100 text-green-800"}[d]||"bg-gray-100 text-gray-800"},formatType(d){return{system:"Système",organizer:"Organisateur",custom:"Personnalisé"}[d]||d}}},tx={class:"roles-page p-6 bg-gray-50 min-h-screen"},sx={class:"mb-8"},ox={class:"flex items-center justify-between"},rx={class:"bg-white rounded-lg shadow p-6 mb-8"},lx={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ax={class:"flex items-end"},nx={class:"bg-white rounded-lg shadow"},ix={class:"p-6 border-b"},dx={class:"text-sm text-gray-600 mt-1"},ux={key:0,class:"p-8 text-center"},cx={key:1,class:"p-8 text-center text-gray-500"},mx={key:2,class:"overflow-x-auto"},gx={class:"w-full"},px={class:"divide-y divide-gray-200"},fx={class:"px-6 py-4"},xx={class:"text-sm font-medium text-gray-900"},vx={class:"text-xs text-gray-500 font-mono"},yx={class:"px-6 py-4 text-sm"},bx={class:"px-6 py-4 text-sm text-gray-900"},hx={class:"bg-gray-100 px-2 py-1 rounded text-xs font-medium"},wx={class:"px-6 py-4 text-sm text-gray-900"},_x={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},kx={class:"px-6 py-4 text-sm text-gray-900"},Cx=["onClick"],Mx={class:"px-6 py-4 text-sm"},Sx={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},jx={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},Ax={class:"px-6 py-4 text-sm"},Dx={class:"flex items-center space-x-2"},Px=["onClick"],Tx=["onClick"],Fx=["onClick"],Ux={key:3,class:"p-6 border-t"},Ex={class:"flex items-center justify-between"},zx={class:"text-sm text-gray-700"},Ox={class:"flex space-x-2"},Rx=["disabled"],Bx=["disabled"],Vx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ix={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},$x={class:"p-6 border-b"},Lx={class:"flex items-center justify-between"},qx={class:"text-xl font-bold text-primea-blue"},Nx={class:"space-y-4"},Hx=["value"],Xx={class:"flex items-center"},Gx={key:0,class:"border-t pt-4"},Kx={class:"block text-sm font-medium text-gray-700 mb-3"},Wx={key:0,class:"text-center py-4"},Jx={key:1,class:"text-center py-4 text-gray-500"},Yx={key:2},Zx={class:"mb-3"},Qx={class:"space-y-2 max-h-80 overflow-y-auto border rounded-lg p-3"},ev=["id","checked","onChange"],tv=["for"],sv={class:"font-medium text-sm"},ov={class:"text-xs text-gray-500"},rv={class:"flex gap-1 ml-2"},lv={class:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs"},av={class:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-xs"},nv={class:"mt-6 flex justify-end space-x-3"},iv=["disabled"],dv={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},uv={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},cv={class:"p-6 border-b"},mv={class:"flex items-center justify-between"},gv={key:0,class:"p-6"},pv={class:"grid grid-cols-2 gap-6"},fv={class:"text-gray-900 font-medium"},xv={class:"text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded"},vv={class:"bg-gray-100 px-3 py-1 rounded text-sm font-medium"},yv={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},bv={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},hv={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},wv={class:"mt-6"},_v={class:"text-gray-900"},kv={class:"mt-6"},Cv={class:"block text-sm font-medium text-gray-700 mb-2"},Mv={key:0,class:"flex flex-wrap gap-2 mt-2"},Sv={key:1,class:"text-gray-500"},jv={class:"p-6 border-t bg-gray-50"},Av={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Dv={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Pv={class:"p-6 border-b"},Tv={class:"flex items-center justify-between"},Fv={class:"text-xl font-bold text-primea-blue"},Uv={class:"p-6"},Ev={key:0,class:"text-center py-8"},zv={key:1},Ov={class:"mb-4"},Rv={class:"space-y-4 max-h-96 overflow-y-auto"},Bv=["id","checked","onChange"],Vv=["for"],Iv={class:"font-medium"},$v={class:"text-xs text-gray-500"},Lv={class:"flex gap-2"},qv={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs"},Nv={class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-xs"},Hv={class:"mt-4 text-sm text-gray-600"},Xv={class:"p-6 border-t bg-gray-50 flex justify-end space-x-3"},Gv=["disabled"];function Kv(d,t,m,s,i,u){return a(),n("div",tx,[e("div",sx,[e("div",ox,[t[25]||(t[25]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Rôles"),e("p",{class:"text-gray-600"},"Créer et gérer les rôles personnalisés")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>u.openCreateModal&&u.openCreateModal(...o)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Créer un Rôle ",-1)])])])]),e("div",rx,[t[30]||(t[30]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",lx,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.filters.type=o),onChange:t[2]||(t[2]=(...o)=>u.loadRoles&&u.loadRoles(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[26]||(t[26]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"system"},"Système",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"custom"},"Personnalisé",-1)])],544),[[B,i.filters.type]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.filters.status=o),onChange:t[4]||(t[4]=(...o)=>u.loadRoles&&u.loadRoles(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[B,i.filters.status]])]),e("div",ax,[e("button",{onClick:t[5]||(t[5]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",nx,[e("div",ix,[t[31]||(t[31]=e("h2",{class:"text-xl font-bold"},"Liste des Rôles",-1)),e("p",dx,"Total: "+l(i.pagination.total)+" rôle(s)",1)]),i.loading?(a(),n("div",ux,[...t[32]||(t[32]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.roles.length===0?(a(),n("div",cx," Aucun rôle trouvé ")):(a(),n("div",mx,[e("table",gx,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Niveau"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Privilèges"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",px,[(a(!0),n(F,null,U(i.roles,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",fx,[e("div",null,[e("div",xx,l(o.name),1),e("div",vx,l(o.slug),1)])]),e("td",yx,[e("span",{class:O([u.getTypeClass(o.type),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatType(o.type)),3)]),e("td",bx,[e("span",hx," Niveau "+l(o.level),1)]),e("td",wx,[e("span",_x,l(o.users_count||0),1)]),e("td",kx,[e("button",{onClick:r=>u.managePrivileges(o),class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-purple-200"},l(o.privileges_count||0)+" privilège(s) ",9,Cx)]),e("td",Mx,[o.is_active?(a(),n("span",Sx," Actif ")):(a(),n("span",jx," Inactif "))]),e("td",Ax,[e("div",Dx,[e("button",{onClick:r=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[33]||(t[33]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Px),o.type!=="system"?(a(),n("button",{key:0,onClick:r=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[34]||(t[34]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Tx)):_("",!0),o.type!=="system"?(a(),n("button",{key:1,onClick:r=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Fx)):_("",!0)])])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",Ux,[e("div",Ex,[e("div",zx," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",Ox,[e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Rx),e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Bx)])])])):_("",!0)]),i.showFormModal?(a(),n("div",Vx,[e("div",Ix,[e("div",$x,[e("div",Lx,[e("h3",qx,l(i.isEditMode?"Modifier le Rôle":"Créer un Rôle"),1),e("button",{onClick:t[8]||(t[8]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[37]||(t[37]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[17]||(t[17]=oe((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",Nx,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type d'utilisateur *",-1)),p(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>i.formData.user_type_id=o),onChange:t[10]||(t[10]=(...o)=>u.loadPrivilegesForUserType&&u.loadPrivilegesForUserType(...o)),required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un type",-1)),(a(!0),n(F,null,U(i.userTypes,o=>(a(),n("option",{key:o.id,value:o.id},l(o.label),9,Hx))),128))],544),[[B,i.formData.user_type_id]]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1"},"Les privilèges disponibles dépendent du type d'utilisateur",-1))]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du rôle *",-1)),p(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>i.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue",placeholder:"Ex: Modérateur"},null,512),[[M,i.formData.name]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=o=>i.formData.description=o),rows:"3",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue",placeholder:"Description du rôle"},null,512),[[M,i.formData.description]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Niveau (0-100) *",-1)),p(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>i.formData.level=o),type:"number",min:"0",max:"100",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.level,void 0,{number:!0}]]),t[44]||(t[44]=e("p",{class:"text-xs text-gray-500 mt-1"},"Plus le niveau est élevé, plus le rôle a de priorité",-1))]),e("div",null,[e("label",Xx,[p(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>i.formData.is_active=o),type:"checkbox",class:"mr-2"},null,512),[[re,i.formData.is_active]]),t[45]||(t[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Actif",-1))])]),i.formData.user_type_id?(a(),n("div",Gx,[e("label",Kx," Privilèges ("+l(i.formData.privilege_ids.length)+" sélectionné(s)) ",1),i.loadingPrivileges?(a(),n("div",Wx,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Chargement...",-1)])])):i.availablePrivileges.length===0?(a(),n("div",Jx," Aucun privilège disponible pour ce type d'utilisateur ")):(a(),n("div",Yx,[e("div",Zx,[p(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>i.privilegeSearch=o),type:"text",placeholder:"Rechercher un privilège...",class:"w-full border rounded-lg px-3 py-2 text-sm"},null,512),[[M,i.privilegeSearch]])]),e("div",Qx,[(a(!0),n(F,null,U(u.filteredAvailablePrivileges,o=>(a(),n("div",{key:o.id,class:"flex items-start p-2 hover:bg-gray-50 rounded"},[e("input",{type:"checkbox",id:`priv-form-${o.id}`,checked:i.formData.privilege_ids.includes(o.id),onChange:r=>u.togglePrivilegeInForm(o.id),class:"mt-1 mr-3"},null,40,ev),e("label",{for:`priv-form-${o.id}`,class:"flex-1 cursor-pointer"},[e("div",sv,l(o.name),1),e("div",ov,l(o.description||o.slug),1)],8,tv),e("div",rv,[e("span",lv,l(o.module),1),e("span",av,l(o.action),1)])]))),128))])]))])):_("",!0)]),e("div",nv,[e("button",{type:"button",onClick:t[16]||(t[16]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:i.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(i.submitting?"En cours...":i.isEditMode?"Modifier":"Créer"),9,iv)])],32)])])):_("",!0),i.showDetailsModal?(a(),n("div",dv,[e("div",uv,[e("div",cv,[e("div",mv,[t[48]||(t[48]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Rôle",-1)),e("button",{onClick:t[18]||(t[18]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[47]||(t[47]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedRole?(a(),n("div",gv,[e("div",pv,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",fv,l(i.selectedRole.name),1)]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),e("p",xv,l(i.selectedRole.slug),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("span",{class:O([u.getTypeClass(i.selectedRole.type),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatType(i.selectedRole.type)),3)]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau",-1)),e("span",vv," Niveau "+l(i.selectedRole.level),1)]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Utilisateurs",-1)),e("span",yv,l(i.selectedRole.users_count||0),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),i.selectedRole.is_active?(a(),n("span",bv," Actif ")):(a(),n("span",hv," Inactif "))])]),e("div",wv,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),e("p",_v,l(i.selectedRole.description||"Aucune description"),1)]),e("div",kv,[e("label",Cv,"Privilèges associés ("+l(i.selectedRole.privileges?.length||0)+")",1),i.selectedRole.privileges&&i.selectedRole.privileges.length>0?(a(),n("div",Mv,[(a(!0),n(F,null,U(i.selectedRole.privileges,o=>(a(),n("span",{key:o.id,class:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm"},l(o.name),1))),128))])):(a(),n("p",Sv,"Aucun privilège associé"))])])):_("",!0),e("div",jv,[e("button",{onClick:t[19]||(t[19]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0),i.showPrivilegesModal?(a(),n("div",Av,[e("div",Dv,[e("div",Pv,[e("div",Tv,[e("h3",Fv," Gérer les Privilèges - "+l(i.selectedRole?.name),1),e("button",{onClick:t[20]||(t[20]=(...o)=>u.closePrivilegesModal&&u.closePrivilegesModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[56]||(t[56]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Uv,[i.loadingPrivileges?(a(),n("div",Ev,[...t[57]||(t[57]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des privilèges...",-1)])])):(a(),n("div",zv,[e("div",Ov,[p(e("input",{"onUpdate:modelValue":t[21]||(t[21]=o=>i.privilegeSearch=o),type:"text",placeholder:"Rechercher un privilège...",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,i.privilegeSearch]])]),e("div",Rv,[(a(!0),n(F,null,U(u.filteredPrivileges,o=>(a(),n("div",{key:o.id,class:"flex items-center p-3 border rounded-lg hover:bg-gray-50"},[e("input",{type:"checkbox",id:`priv-${o.id}`,checked:i.selectedPrivilegeIds.includes(o.id),onChange:r=>u.togglePrivilege(o.id),class:"mr-3"},null,40,Bv),e("label",{for:`priv-${o.id}`,class:"flex-1 cursor-pointer"},[e("div",Iv,l(o.name),1),e("div",$v,l(o.description||o.slug),1)],8,Vv),e("div",Lv,[e("span",qv,l(o.module),1),e("span",Nv,l(o.action),1)])]))),128))]),e("div",Hv,l(i.selectedPrivilegeIds.length)+" privilège(s) sélectionné(s) ",1)]))]),e("div",Xv,[e("button",{onClick:t[22]||(t[22]=(...o)=>u.closePrivilegesModal&&u.closePrivilegesModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{onClick:t[23]||(t[23]=(...o)=>u.savePrivileges&&u.savePrivileges(...o)),disabled:i.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(i.submitting?"Enregistrement...":"Enregistrer"),9,Gv)])])])):_("",!0)])}const Wv=ee(ex,[["render",Kv]]),t5=Object.freeze(Object.defineProperty({__proto__:null,default:Wv},Symbol.toStringTag,{value:"Module"})),Jv={name:"Admins",data(){return{admins:[],availableRoles:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedAdmin:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",role_id:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadAdmins(),this.loadAdminRoles()},methods:{async loadAdmins(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/users/admins",{params:t});m.data.success&&(this.admins=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement admins:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les administrateurs"})}finally{this.loading=!1}},async loadAdminRoles(){try{const d=await Y.get("/api/v1/admin/roles",{params:{per_page:100}});if(console.log("Réponse API roles:",d.data),d.data.success){const t=d.data.data.data;console.log("Tous les rôles:",t),this.availableRoles=t.filter(m=>(console.log("Vérification rôle:",m.name,"user_type:",m.user_type),m.user_type&&m.user_type.name==="admin"&&m.slug!=="super_admin")),console.log("Rôles admin filtrés:",this.availableRoles)}}catch(d){console.error("Erreur chargement rôles admin:",d)}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadAdmins()},500)},resetFilters(){this.filters={search:"",status:""},this.loadAdmins()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadAdmins(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",role_id:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedAdmin=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedAdmin=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_admin:!0};if(!this.isEditMode&&!d.role_id){q.fire({icon:"error",title:"Erreur",text:"Veuillez sélectionner un rôle admin"}),this.submitting=!1;return}const t=this.isEditMode?`/api/v1/admin/users/${this.selectedAdmin.id}`:"/api/v1/admin/users",m=this.isEditMode?"put":"post",s=await Y[m](t,d);s.data.success&&(q.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadAdmins(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),q.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedAdmin=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedAdmin=null},async toggleStatus(d){try{const t=await Y.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(q.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadAdmins(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){q.fire({title:"Supprimer cet administrateur ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteAdmin(d)})},async deleteAdmin(d){try{const t=await Y.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(q.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadAdmins(this.pagination.current_page))}catch(t){console.error("Erreur suppression admin:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer cet administrateur"})}},async resetPassword(d){q.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const m=await Y.post(`/api/v1/admin/users/${d.id}/reset-password`);m.data.success&&q.fire({icon:"success",title:"Email envoyé",text:m.data.message})}catch(m){q.fire({icon:"error",title:"Erreur",text:m.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},Yv={class:"admins-page p-6 bg-gray-50 min-h-screen"},Zv={class:"mb-8"},Qv={class:"flex items-center justify-between"},ey={class:"bg-white rounded-lg shadow p-6 mb-8"},ty={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},sy={class:"flex items-end"},oy={class:"bg-white rounded-lg shadow"},ry={class:"p-6 border-b"},ly={class:"text-sm text-gray-600 mt-1"},ay={key:0,class:"p-8 text-center"},ny={key:1,class:"p-8 text-center text-gray-500"},iy={key:2,class:"overflow-x-auto"},dy={class:"w-full"},uy={class:"divide-y divide-gray-200"},cy={class:"px-6 py-4"},my={class:"flex items-center"},gy={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},py={class:"ml-4"},fy={class:"text-sm font-medium text-gray-900"},xy={class:"text-xs text-gray-500"},vy={class:"px-6 py-4 text-sm text-gray-900"},yy={class:"px-6 py-4 text-sm"},by={class:"flex flex-wrap gap-1"},hy={class:"px-6 py-4 text-sm"},wy={class:"px-6 py-4 text-sm text-gray-600"},_y={class:"px-6 py-4 text-sm"},ky={class:"flex items-center space-x-2"},Cy=["onClick"],My=["onClick"],Sy=["onClick","title"],jy=["onClick"],Ay={key:3,class:"p-6 border-t"},Dy={class:"flex items-center justify-between"},Py={class:"text-sm text-gray-700"},Ty={class:"flex space-x-2"},Fy=["disabled"],Uy=["disabled"],Ey={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},zy={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Oy={class:"p-6 border-b"},Ry={class:"flex items-center justify-between"},By={class:"text-xl font-bold text-primea-blue"},Vy={class:"space-y-4"},Iy={key:0},$y=["value"],Ly={key:1},qy={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Ny={class:"text-sm text-blue-800"},Hy={class:"mt-6 flex justify-end space-x-3"},Xy=["disabled"],Gy={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ky={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Wy={class:"p-6 border-b"},Jy={class:"flex items-center justify-between"},Yy={key:0,class:"p-6"},Zy={class:"grid grid-cols-2 gap-6"},Qy={class:"text-gray-900 font-medium"},eb={class:"text-gray-900"},tb={class:"text-gray-900"},sb={class:"text-gray-900"},ob={key:0,class:"text-green-600"},rb={key:1,class:"text-orange-600"},lb={class:"mt-6"},ab={class:"flex flex-wrap gap-2"},nb={class:"p-6 border-t bg-gray-50 flex justify-between"};function ib(d,t,m,s,i,u){return a(),n("div",Yv,[e("div",Zv,[e("div",Qv,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Administrateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les comptes administrateurs")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>u.openCreateModal&&u.openCreateModal(...o)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Créer un Admin ",-1)])])])]),e("div",ey,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ty,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.filters.search=o),onInput:t[2]||(t[2]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,i.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.filters.status=o),onChange:t[4]||(t[4]=(...o)=>u.loadAdmins&&u.loadAdmins(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[B,i.filters.status]])]),e("div",sy,[e("button",{onClick:t[5]||(t[5]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",oy,[e("div",ry,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold"},"Liste des Administrateurs",-1)),e("p",ly,"Total: "+l(i.pagination.total)+" admin(s)",1)]),i.loading?(a(),n("div",ay,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.admins.length===0?(a(),n("div",ny," Aucun administrateur trouvé ")):(a(),n("div",iy,[e("table",dy,[t[30]||(t[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",uy,[(a(!0),n(F,null,U(i.admins,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",cy,[e("div",my,[e("div",gy,l(o.name.charAt(0).toUpperCase()),1),e("div",py,[e("div",fy,l(o.name),1),e("div",xy,"ID: "+l(o.id),1)])])]),e("td",vy,l(o.email),1),e("td",yy,[e("div",by,[(a(!0),n(F,null,U(o.roles,r=>(a(),n("span",{key:r.id,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",hy,[e("span",{class:O([u.getStatusClass(o.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatStatus(o.status)),3)]),e("td",wy,l(u.formatDate(o.created_at)),1),e("td",_y,[e("div",ky,[e("button",{onClick:r=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Cy),e("button",{onClick:r=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,My),e("button",{onClick:r=>u.toggleStatus(o),class:O(o.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:o.status==="active"?"Désactiver":"Activer"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,Sy),e("button",{onClick:r=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,jy)])])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",Ay,[e("div",Dy,[e("div",Py," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",Ty,[e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Fy),e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Uy)])])])):_("",!0)]),i.showFormModal?(a(),n("div",Ey,[e("div",zy,[e("div",Oy,[e("div",Ry,[e("h3",By,l(i.isEditMode?"Modifier l'Administrateur":"Créer un Administrateur"),1),e("button",{onClick:t[8]||(t[8]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[31]||(t[31]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[14]||(t[14]=oe((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",Vy,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>i.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>i.formData.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.email]])]),i.isEditMode?_("",!0):(a(),n("div",Iy,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle Admin *",-1)),p(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>i.formData.role_id=o),required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[t[34]||(t[34]=e("option",{value:""},"Sélectionner un rôle",-1)),(a(!0),n(F,null,U(i.availableRoles,o=>(a(),n("option",{key:o.id,value:o.id},l(o.name),9,$y))),128))],512),[[B,i.formData.role_id]]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"},"Rôles disponibles : Admin, Support (Super Admin exclu)",-1))])),i.isEditMode?(a(),n("div",Ly,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>i.formData.status=o),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[B,i.formData.status]])])):_("",!0),e("div",qy,[e("p",Ny,l(i.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",Hy,[e("button",{type:"button",onClick:t[13]||(t[13]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:i.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(i.submitting?"En cours...":i.isEditMode?"Modifier":"Créer"),9,Xy)])],32)])])):_("",!0),i.showDetailsModal?(a(),n("div",Gy,[e("div",Ky,[e("div",Wy,[e("div",Jy,[t[40]||(t[40]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Administrateur",-1)),e("button",{onClick:t[15]||(t[15]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[39]||(t[39]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedAdmin?(a(),n("div",Yy,[e("div",Zy,[e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",Qy,l(i.selectedAdmin.name),1)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",eb,l(i.selectedAdmin.email),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",tb,l(i.selectedAdmin.phone||"N/A"),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:O([u.getStatusClass(i.selectedAdmin.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatStatus(i.selectedAdmin.status)),3)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",sb,l(u.formatDate(i.selectedAdmin.created_at)),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),i.selectedAdmin.email_verified_at?(a(),n("span",ob," ✓ Vérifié le "+l(u.formatDate(i.selectedAdmin.email_verified_at)),1)):(a(),n("span",rb,"✗ Non vérifié"))])]),e("div",lb,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",ab,[(a(!0),n(F,null,U(i.selectedAdmin.roles,o=>(a(),n("span",{key:o.id,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},l(o.name),1))),128))])])])):_("",!0),e("div",nb,[e("button",{onClick:t[16]||(t[16]=o=>u.resetPassword(i.selectedAdmin)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[17]||(t[17]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0)])}const db=ee(Jv,[["render",ib]]),s5=Object.freeze(Object.defineProperty({__proto__:null,default:db},Symbol.toStringTag,{value:"Module"})),ub={name:"Clients",data(){return{clients:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedClient:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadClients()},methods:{async loadClients(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/users/clients",{params:t});m.data.success&&(this.clients=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement clients:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les clients"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadClients()},500)},resetFilters(){this.filters={search:"",status:""},this.loadClients()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadClients(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedClient=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedClient=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_admin:!1},t=this.isEditMode?`/api/v1/admin/users/${this.selectedClient.id}`:"/api/v1/admin/users",m=this.isEditMode?"put":"post",s=await Y[m](t,d);s.data.success&&(q.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadClients(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),q.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedClient=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedClient=null},async toggleStatus(d){try{const t=await Y.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(q.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadClients(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){q.fire({title:"Supprimer ce client ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteClient(d)})},async deleteClient(d){try{const t=await Y.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(q.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadClients(this.pagination.current_page))}catch(t){console.error("Erreur suppression client:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer ce client"})}},async resetPassword(d){q.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const m=await Y.post(`/api/v1/admin/users/${d.id}/reset-password`);m.data.success&&q.fire({icon:"success",title:"Email envoyé",text:m.data.message})}catch(m){q.fire({icon:"error",title:"Erreur",text:m.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},cb={class:"clients-page p-6 bg-gray-50 min-h-screen"},mb={class:"bg-white rounded-lg shadow p-6 mb-8"},gb={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},pb={class:"flex items-end"},fb={class:"bg-white rounded-lg shadow"},xb={class:"p-6 border-b"},vb={class:"text-sm text-gray-600 mt-1"},yb={key:0,class:"p-8 text-center"},bb={key:1,class:"p-8 text-center text-gray-500"},hb={key:2,class:"overflow-x-auto"},wb={class:"w-full"},_b={class:"divide-y divide-gray-200"},kb={class:"px-6 py-4"},Cb={class:"flex items-center"},Mb={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},Sb={class:"ml-4"},jb={class:"text-sm font-medium text-gray-900"},Ab={class:"text-xs text-gray-500"},Db={class:"px-6 py-4 text-sm text-gray-900"},Pb={class:"px-6 py-4 text-sm"},Tb={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},Fb={class:"px-6 py-4 text-sm"},Ub={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},Eb={class:"px-6 py-4 text-sm"},zb={class:"flex flex-wrap gap-1"},Ob={class:"px-6 py-4 text-sm"},Rb={class:"px-6 py-4 text-sm text-gray-600"},Bb={class:"px-6 py-4 text-sm"},Vb={class:"flex items-center space-x-2"},Ib=["onClick"],$b=["onClick"],Lb=["onClick","title"],qb=["onClick"],Nb={key:3,class:"p-6 border-t"},Hb={class:"flex items-center justify-between"},Xb={class:"text-sm text-gray-700"},Gb={class:"flex space-x-2"},Kb=["disabled"],Wb=["disabled"],Jb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Yb={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Zb={class:"p-6 border-b"},Qb={class:"flex items-center justify-between"},eh={class:"text-xl font-bold text-primea-blue"},th={class:"space-y-4"},sh={key:0},oh={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},rh={class:"text-sm text-blue-800"},lh={class:"mt-6 flex justify-end space-x-3"},ah=["disabled"],nh={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ih={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},dh={class:"p-6 border-b"},uh={class:"flex items-center justify-between"},ch={key:0,class:"p-6"},mh={class:"grid grid-cols-2 gap-6"},gh={class:"text-gray-900 font-medium"},ph={class:"text-gray-900"},fh={class:"text-gray-900"},xh={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},vh={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},yh={class:"text-gray-900"},bh={key:0,class:"text-green-600"},hh={key:1,class:"text-orange-600"},wh={class:"mt-6"},_h={class:"flex flex-wrap gap-2"},kh={class:"p-6 border-t bg-gray-50 flex justify-between"};function Ch(d,t,m,s,i,u){return a(),n("div",cb,[t[43]||(t[43]=e("div",{class:"mb-8"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Clients"),e("p",{class:"text-gray-600"},"Gérer les comptes clients")])],-1)),e("div",mb,[t[19]||(t[19]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",gb,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.filters.search=o),onInput:t[1]||(t[1]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,i.filters.search]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.filters.status=o),onChange:t[3]||(t[3]=(...o)=>u.loadClients&&u.loadClients(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[17]||(t[17]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[B,i.filters.status]])]),e("div",pb,[e("button",{onClick:t[4]||(t[4]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",fb,[e("div",xb,[t[20]||(t[20]=e("h2",{class:"text-xl font-bold"},"Liste des Clients",-1)),e("p",vb,"Total: "+l(i.pagination.total)+" client(s)",1)]),i.loading?(a(),n("div",yb,[...t[21]||(t[21]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.clients.length===0?(a(),n("div",bb," Aucun client trouvé ")):(a(),n("div",hb,[e("table",wb,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commandes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",_b,[(a(!0),n(F,null,U(i.clients,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",kb,[e("div",Cb,[e("div",Mb,l(o.name.charAt(0).toUpperCase()),1),e("div",Sb,[e("div",jb,l(o.name),1),e("div",Ab,"ID: "+l(o.id),1)])])]),e("td",Db,l(o.email),1),e("td",Pb,[e("span",Tb,l(o.orders_count||0),1)]),e("td",Fb,[e("span",Ub,l(o.tickets_count||0),1)]),e("td",Eb,[e("div",zb,[(a(!0),n(F,null,U(o.roles,r=>(a(),n("span",{key:r.id,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",Ob,[e("span",{class:O([u.getStatusClass(o.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatStatus(o.status)),3)]),e("td",Rb,l(u.formatDate(o.created_at)),1),e("td",Bb,[e("div",Vb,[e("button",{onClick:r=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Ib),e("button",{onClick:r=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,$b),e("button",{onClick:r=>u.toggleStatus(o),class:O(o.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:o.status==="active"?"Désactiver":"Activer"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,Lb),e("button",{onClick:r=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,qb)])])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",Nb,[e("div",Hb,[e("div",Xb," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",Gb,[e("button",{onClick:t[5]||(t[5]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Kb),e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Wb)])])])):_("",!0)]),i.showFormModal?(a(),n("div",Jb,[e("div",Yb,[e("div",Zb,[e("div",Qb,[e("h3",eh,l(i.isEditMode?"Modifier le Client":"Créer un Client"),1),e("button",{onClick:t[7]||(t[7]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[27]||(t[27]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[12]||(t[12]=oe((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",th,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),p(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>i.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>i.formData.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.email]])]),i.isEditMode?(a(),n("div",sh,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>i.formData.status=o),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[B,i.formData.status]])])):_("",!0),e("div",oh,[e("p",rh,l(i.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",lh,[e("button",{type:"button",onClick:t[11]||(t[11]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:i.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(i.submitting?"En cours...":i.isEditMode?"Modifier":"Créer"),9,ah)])],32)])])):_("",!0),i.showDetailsModal?(a(),n("div",nh,[e("div",ih,[e("div",dh,[e("div",uh,[t[33]||(t[33]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Client",-1)),e("button",{onClick:t[13]||(t[13]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[32]||(t[32]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedClient?(a(),n("div",ch,[e("div",mh,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",gh,l(i.selectedClient.name),1)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",ph,l(i.selectedClient.email),1)]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",fh,l(i.selectedClient.phone||"N/A"),1)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:O([u.getStatusClass(i.selectedClient.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatStatus(i.selectedClient.status)),3)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Commandes",-1)),e("span",xh,l(i.selectedClient.orders_count||0),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Billets",-1)),e("span",vh,l(i.selectedClient.tickets_count||0),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",yh,l(u.formatDate(i.selectedClient.created_at)),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),i.selectedClient.email_verified_at?(a(),n("span",bh," ✓ Vérifié le "+l(u.formatDate(i.selectedClient.email_verified_at)),1)):(a(),n("span",hh,"✗ Non vérifié"))])]),e("div",wh,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",_h,[(a(!0),n(F,null,U(i.selectedClient.roles,o=>(a(),n("span",{key:o.id,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},l(o.name),1))),128))])])])):_("",!0),e("div",kh,[e("button",{onClick:t[14]||(t[14]=o=>u.resetPassword(i.selectedClient)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[15]||(t[15]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0)])}const Mh=ee(ub,[["render",Ch]]),o5=Object.freeze(Object.defineProperty({__proto__:null,default:Mh},Symbol.toStringTag,{value:"Module"})),Sh={name:"OrganizersUsers",data(){return{organizersUsers:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedOrganizerUser:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadOrganizersUsers()},methods:{async loadOrganizersUsers(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/users/organizers-users",{params:t});m.data.success&&(this.organizersUsers=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement organisateurs users:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les utilisateurs organisateurs"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadOrganizersUsers()},500)},resetFilters(){this.filters={search:"",status:""},this.loadOrganizersUsers()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadOrganizersUsers(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedOrganizerUser=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedOrganizerUser=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_organizer:!0},t=this.isEditMode?`/api/v1/admin/users/${this.selectedOrganizerUser.id}`:"/api/v1/admin/users",m=this.isEditMode?"put":"post",s=await Y[m](t,d);s.data.success&&(q.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadOrganizersUsers(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),q.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedOrganizerUser=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedOrganizerUser=null},async toggleStatus(d){try{const t=await Y.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(q.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadOrganizersUsers(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){q.fire({title:"Supprimer cet utilisateur organisateur ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteOrganizerUser(d)})},async deleteOrganizerUser(d){try{const t=await Y.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(q.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadOrganizersUsers(this.pagination.current_page))}catch(t){console.error("Erreur suppression organisateur user:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer cet utilisateur organisateur"})}},async resetPassword(d){q.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const m=await Y.post(`/api/v1/admin/users/${d.id}/reset-password`);m.data.success&&q.fire({icon:"success",title:"Email envoyé",text:m.data.message})}catch(m){q.fire({icon:"error",title:"Erreur",text:m.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},jh={class:"organizers-users-page p-6 bg-gray-50 min-h-screen"},Ah={class:"mb-8"},Dh={class:"flex items-center justify-between"},Ph={class:"bg-white rounded-lg shadow p-6 mb-8"},Th={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Fh={class:"flex items-end"},Uh={class:"bg-white rounded-lg shadow"},Eh={class:"p-6 border-b"},zh={class:"text-sm text-gray-600 mt-1"},Oh={key:0,class:"p-8 text-center"},Rh={key:1,class:"p-8 text-center text-gray-500"},Bh={key:2,class:"overflow-x-auto"},Vh={class:"w-full"},Ih={class:"divide-y divide-gray-200"},$h={class:"px-6 py-4"},Lh={class:"flex items-center"},qh={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},Nh={class:"ml-4"},Hh={class:"text-sm font-medium text-gray-900"},Xh={class:"text-xs text-gray-500"},Gh={class:"px-6 py-4 text-sm text-gray-900"},Kh={class:"px-6 py-4 text-sm"},Wh={class:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium"},Jh={class:"px-6 py-4 text-sm"},Yh={class:"flex flex-wrap gap-1"},Zh={class:"px-6 py-4 text-sm"},Qh={class:"px-6 py-4 text-sm text-gray-600"},e4={class:"px-6 py-4 text-sm"},t4={class:"flex items-center space-x-2"},s4=["onClick"],o4=["onClick"],r4=["onClick","title"],l4=["onClick"],a4={key:3,class:"p-6 border-t"},n4={class:"flex items-center justify-between"},i4={class:"text-sm text-gray-700"},d4={class:"flex space-x-2"},u4=["disabled"],c4=["disabled"],m4={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},g4={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},p4={class:"p-6 border-b"},f4={class:"flex items-center justify-between"},x4={class:"text-xl font-bold text-primea-blue"},v4={class:"space-y-4"},y4={key:0},b4={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},h4={class:"text-sm text-blue-800"},w4={class:"mt-6 flex justify-end space-x-3"},_4=["disabled"],k4={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},C4={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},M4={class:"p-6 border-b"},S4={class:"flex items-center justify-between"},j4={key:0,class:"p-6"},A4={class:"grid grid-cols-2 gap-6"},D4={class:"text-gray-900 font-medium"},P4={class:"text-gray-900"},T4={class:"text-gray-900"},F4={class:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium"},U4={class:"text-gray-900"},E4={key:0,class:"text-green-600"},z4={key:1,class:"text-orange-600"},O4={class:"mt-6"},R4={class:"flex flex-wrap gap-2"},B4={class:"p-6 border-t bg-gray-50 flex justify-between"};function V4(d,t,m,s,i,u){return a(),n("div",jh,[e("div",Ah,[e("div",Dh,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Utilisateurs Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les comptes utilisateurs organisateurs")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>u.openCreateModal&&u.openCreateModal(...o)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Créer un Organisateur User ",-1)])])])]),e("div",Ph,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Th,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.filters.search=o),onInput:t[2]||(t[2]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,i.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.filters.status=o),onChange:t[4]||(t[4]=(...o)=>u.loadOrganizersUsers&&u.loadOrganizersUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[B,i.filters.status]])]),e("div",Fh,[e("button",{onClick:t[5]||(t[5]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Uh,[e("div",Eh,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs Organisateurs",-1)),e("p",zh,"Total: "+l(i.pagination.total)+" utilisateur(s) organisateur(s)",1)]),i.loading?(a(),n("div",Oh,[...t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.organizersUsers.length===0?(a(),n("div",Rh," Aucun utilisateur organisateur trouvé ")):(a(),n("div",Bh,[e("table",Vh,[t[29]||(t[29]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ih,[(a(!0),n(F,null,U(i.organizersUsers,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",$h,[e("div",Lh,[e("div",qh,l(o.name.charAt(0).toUpperCase()),1),e("div",Nh,[e("div",Hh,l(o.name),1),e("div",Xh,"ID: "+l(o.id),1)])])]),e("td",Gh,l(o.email),1),e("td",Kh,[e("span",Wh,l(o.organizers_count||0),1)]),e("td",Jh,[e("div",Yh,[(a(!0),n(F,null,U(o.roles,r=>(a(),n("span",{key:r.id,class:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",Zh,[e("span",{class:O([u.getStatusClass(o.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatStatus(o.status)),3)]),e("td",Qh,l(u.formatDate(o.created_at)),1),e("td",e4,[e("div",t4,[e("button",{onClick:r=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,s4),e("button",{onClick:r=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,o4),e("button",{onClick:r=>u.toggleStatus(o),class:O(o.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:o.status==="active"?"Désactiver":"Activer"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,r4),e("button",{onClick:r=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,l4)])])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",a4,[e("div",n4,[e("div",i4," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",d4,[e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,u4),e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,c4)])])])):_("",!0)]),i.showFormModal?(a(),n("div",m4,[e("div",g4,[e("div",p4,[e("div",f4,[e("h3",x4,l(i.isEditMode?"Modifier l'Utilisateur Organisateur":"Créer un Utilisateur Organisateur"),1),e("button",{onClick:t[8]||(t[8]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[30]||(t[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[13]||(t[13]=oe((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",v4,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),p(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>i.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),p(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>i.formData.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,i.formData.email]])]),i.isEditMode?(a(),n("div",y4,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>i.formData.status=o),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[33]||(t[33]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[B,i.formData.status]])])):_("",!0),e("div",b4,[e("p",h4,l(i.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",w4,[e("button",{type:"button",onClick:t[12]||(t[12]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:i.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(i.submitting?"En cours...":i.isEditMode?"Modifier":"Créer"),9,_4)])],32)])])):_("",!0),i.showDetailsModal?(a(),n("div",k4,[e("div",C4,[e("div",M4,[e("div",S4,[t[36]||(t[36]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Utilisateur Organisateur",-1)),e("button",{onClick:t[14]||(t[14]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[35]||(t[35]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedOrganizerUser?(a(),n("div",j4,[e("div",A4,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",D4,l(i.selectedOrganizerUser.name),1)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",P4,l(i.selectedOrganizerUser.email),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",T4,l(i.selectedOrganizerUser.phone||"N/A"),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisateurs",-1)),e("span",F4,l(i.selectedOrganizerUser.organizers_count||0),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:O([u.getStatusClass(i.selectedOrganizerUser.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatStatus(i.selectedOrganizerUser.status)),3)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",U4,l(u.formatDate(i.selectedOrganizerUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),i.selectedOrganizerUser.email_verified_at?(a(),n("span",E4," ✓ Vérifié le "+l(u.formatDate(i.selectedOrganizerUser.email_verified_at)),1)):(a(),n("span",z4,"✗ Non vérifié"))])]),e("div",O4,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",R4,[(a(!0),n(F,null,U(i.selectedOrganizerUser.roles,o=>(a(),n("span",{key:o.id,class:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium"},l(o.name),1))),128))])])])):_("",!0),e("div",B4,[e("button",{onClick:t[15]||(t[15]=o=>u.resetPassword(i.selectedOrganizerUser)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[16]||(t[16]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0)])}const I4=ee(Sh,[["render",V4]]),r5=Object.freeze(Object.defineProperty({__proto__:null,default:I4},Symbol.toStringTag,{value:"Module"})),$4={name:"TrashedUsers",data(){return{trashedUsers:[],loading:!1,showDetailsModal:!1,selectedUser:null,searchTimeout:null,filters:{search:""},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadTrashedUsers()},methods:{async loadTrashedUsers(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},m=await Y.get("/api/v1/admin/users/trashed",{params:t});m.data.success&&(this.trashedUsers=m.data.data.data,this.pagination={current_page:m.data.data.current_page,last_page:m.data.data.last_page,per_page:m.data.data.per_page,total:m.data.data.total,from:m.data.data.from,to:m.data.data.to})}catch(t){console.error("Erreur chargement utilisateurs supprimés:",t),q.fire({icon:"error",title:"Erreur",text:"Impossible de charger les utilisateurs supprimés"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadTrashedUsers()},500)},resetFilters(){this.filters={search:""},this.loadTrashedUsers()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadTrashedUsers(d)},viewDetails(d){this.selectedUser=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedUser=null},confirmRestore(d){q.fire({title:"Restaurer cet utilisateur ?",html:`<p>Voulez-vous vraiment restaurer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">L'utilisateur sera réactivé et pourra à nouveau accéder à son compte.</p>`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, restaurer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.restoreUser(d)})},async restoreUser(d){try{const t=await Y.post(`/api/v1/admin/users/${d.id}/restore`);t.data.success&&(q.fire({icon:"success",title:"Restauré",text:t.data.message,timer:2e3}),this.loadTrashedUsers(this.pagination.current_page))}catch(t){console.error("Erreur restauration utilisateur:",t),q.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de restaurer cet utilisateur"})}},getUserTypeClass(d){return d.is_admin?"bg-red-100 text-red-800":d.is_organizer?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"},getUserTypeLabel(d){return d.is_admin?"Admin":d.is_organizer?"Organisateur":"Client"},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},L4={class:"trashed-users-page p-6 bg-gray-50 min-h-screen"},q4={class:"bg-white rounded-lg shadow p-6 mb-8"},N4={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H4={class:"flex items-end"},X4={class:"bg-white rounded-lg shadow"},G4={class:"p-6 border-b"},K4={class:"text-sm text-gray-600 mt-1"},W4={key:0,class:"p-8 text-center"},J4={key:1,class:"p-8 text-center text-gray-500"},Y4={key:2,class:"overflow-x-auto"},Z4={class:"w-full"},Q4={class:"divide-y divide-gray-200"},e3={class:"px-6 py-4"},t3={class:"flex items-center"},s3={class:"w-10 h-10 bg-gray-400 text-white rounded-full flex items-center justify-center font-bold"},o3={class:"ml-4"},r3={class:"text-sm font-medium text-gray-900"},l3={class:"text-xs text-gray-500"},a3={class:"px-6 py-4 text-sm text-gray-900"},n3={class:"px-6 py-4 text-sm"},i3={class:"flex flex-wrap gap-1"},d3={class:"px-6 py-4 text-sm"},u3={class:"px-6 py-4 text-sm text-gray-600"},c3={class:"px-6 py-4 text-sm"},m3={class:"flex items-center space-x-2"},g3=["onClick"],p3=["onClick"],f3={key:3,class:"p-6 border-t"},x3={class:"flex items-center justify-between"},v3={class:"text-sm text-gray-700"},y3={class:"flex space-x-2"},b3=["disabled"],h3=["disabled"],w3={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_3={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},k3={class:"p-6 border-b"},C3={class:"flex items-center justify-between"},M3={key:0,class:"p-6"},S3={class:"grid grid-cols-2 gap-6"},j3={class:"text-gray-900 font-medium"},A3={class:"text-gray-900"},D3={class:"text-gray-900"},P3={class:"text-gray-900"},T3={class:"text-red-600 font-medium"},F3={key:0,class:"text-green-600"},U3={key:1,class:"text-orange-600"},E3={class:"mt-6"},z3={class:"flex flex-wrap gap-2"},O3={class:"p-6 border-t bg-gray-50 flex justify-end"};function R3(d,t,m,s,i,u){return a(),n("div",L4,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Corbeille - Utilisateurs Supprimés"),e("p",{class:"text-gray-600"},"Consulter et restaurer les utilisateurs supprimés")])],-1)),e("div",q4,[t[8]||(t[8]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",N4,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.filters.search=o),onInput:t[1]||(t[1]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,i.filters.search]])]),e("div",H4,[e("button",{onClick:t[2]||(t[2]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",X4,[e("div",G4,[t[9]||(t[9]=e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs Supprimés",-1)),e("p",K4,"Total: "+l(i.pagination.total)+" utilisateur(s) supprimé(s)",1)]),i.loading?(a(),n("div",W4,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):i.trashedUsers.length===0?(a(),n("div",J4," Aucun utilisateur supprimé trouvé ")):(a(),n("div",Y4,[e("table",Z4,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date de suppression"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Q4,[(a(!0),n(F,null,U(i.trashedUsers,o=>(a(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",e3,[e("div",t3,[e("div",s3,l(o.name.charAt(0).toUpperCase()),1),e("div",o3,[e("div",r3,l(o.name),1),e("div",l3,"ID: "+l(o.id),1)])])]),e("td",a3,l(o.email),1),e("td",n3,[e("div",i3,[(a(!0),n(F,null,U(o.roles,r=>(a(),n("span",{key:r.id,class:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",d3,[e("span",{class:O([u.getUserTypeClass(o),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.getUserTypeLabel(o)),3)]),e("td",u3,l(u.formatDate(o.deleted_at)),1),e("td",c3,[e("div",m3,[e("button",{onClick:r=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,g3),e("button",{onClick:r=>u.confirmRestore(o),class:"text-green-600 hover:text-green-800",title:"Restaurer"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,p3)])])]))),128))])])])),i.pagination.total>i.pagination.per_page?(a(),n("div",f3,[e("div",x3,[e("div",v3," Affichage de "+l(i.pagination.from)+" à "+l(i.pagination.to)+" sur "+l(i.pagination.total)+" résultats ",1),e("div",y3,[e("button",{onClick:t[3]||(t[3]=o=>u.goToPage(i.pagination.current_page-1)),disabled:i.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,b3),e("button",{onClick:t[4]||(t[4]=o=>u.goToPage(i.pagination.current_page+1)),disabled:i.pagination.current_page===i.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,h3)])])])):_("",!0)]),i.showDetailsModal?(a(),n("div",w3,[e("div",_3,[e("div",k3,[e("div",C3,[t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Utilisateur Supprimé",-1)),e("button",{onClick:t[5]||(t[5]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),i.selectedUser?(a(),n("div",M3,[e("div",S3,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",j3,l(i.selectedUser.name),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",A3,l(i.selectedUser.email),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",D3,l(i.selectedUser.phone||"N/A"),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("span",{class:O([u.getUserTypeClass(i.selectedUser),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.getUserTypeLabel(i.selectedUser)),3)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",P3,l(u.formatDate(i.selectedUser.created_at)),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de suppression",-1)),e("p",T3,l(u.formatDate(i.selectedUser.deleted_at)),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),i.selectedUser.email_verified_at?(a(),n("span",F3," ✓ Vérifié le "+l(u.formatDate(i.selectedUser.email_verified_at)),1)):(a(),n("span",U3,"✗ Non vérifié"))])]),e("div",E3,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",z3,[(a(!0),n(F,null,U(i.selectedUser.roles,o=>(a(),n("span",{key:o.id,class:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium"},l(o.name),1))),128))])])])):_("",!0),e("div",O3,[e("button",{onClick:t[6]||(t[6]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):_("",!0)])}const B3=ee($4,[["render",R3]]),l5=Object.freeze(Object.defineProperty({__proto__:null,default:B3},Symbol.toStringTag,{value:"Module"}));Ce.register(Me,Se,je,Ae,De,Pe,Te,Fe,Ue,Ee);const V3={name:"Analytics",components:{Line:_e,Bar:we,Doughnut:he},setup(){const d=v(!1),t=v(30),m=N({}),s=N({labels:[],datasets:[]}),i=N({labels:[],datasets:[]}),u=N({labels:[],datasets:[]}),o=v(null),r=N({labels:[],datasets:[]}),y=N({}),b=v([]),x={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(c){return new Intl.NumberFormat("fr-FR").format(c)+" XAF"}}}}},T={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}},z={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{position:"right"}}},A={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,plugins:{legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(c){return new Intl.NumberFormat("fr-FR").format(c)+" XAF"}}}}},$=async()=>{try{const f=await(await fetch(`/api/v1/admin/analytics/kpis?days=${t.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();f.success&&Object.assign(m,f.data)}catch(c){console.error("Erreur chargement KPIs:",c)}},H=async()=>{try{const c=await fetch(`/api/v1/admin/analytics/revenue-chart?days=${t.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!c.ok){console.error("Erreur API revenue-chart:",c.status),s.labels=[],s.datasets=[];return}const f=await c.json();f.success&&f.data?(s.labels=f.data.labels||[],s.datasets=f.data.datasets||[]):(s.labels=[],s.datasets=[])}catch(c){console.error("Erreur chargement graphique revenus:",c),s.labels=[],s.datasets=[]}},j=async()=>{try{const c=await fetch(`/api/v1/admin/analytics/sales-by-category?days=${t.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!c.ok){console.error("Erreur API sales-by-category:",c.status),i.labels=[],i.datasets=[];return}const f=await c.json();f.success&&f.data?(i.labels=f.data.labels||[],i.datasets=f.data.datasets||[]):(i.labels=[],i.datasets=[])}catch(c){console.error("Erreur chargement ventes par catégorie:",c),i.labels=[],i.datasets=[]}},E=async()=>{try{const c=await fetch(`/api/v1/admin/analytics/conversion-funnel?days=${t.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(!c.ok){console.error("Erreur API conversion-funnel:",c.status),u.labels=[],u.datasets=[],o.value=null;return}const f=await c.json();f.success&&f.data?(u.labels=f.data.labels||[],u.datasets=f.data.datasets||[],o.value=f.data.conversion_rates||null):(u.labels=[],u.datasets=[],o.value=null)}catch(c){console.error("Erreur chargement funnel:",c),u.labels=[],u.datasets=[],o.value=null}},S=async()=>{try{const f=await(await fetch(`/api/v1/admin/analytics/predictions?days_history=${t.value}&days_future=30`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();f.success&&f.data.predictions&&(Object.assign(y,f.data),r.labels=f.data.labels,r.datasets=[{label:"Prédiction",data:f.data.predictions,borderColor:"rgb(79, 70, 229)",backgroundColor:"rgba(79, 70, 229, 0.1)",tension:.4,fill:!1},{label:"Intervalle de confiance supérieur",data:f.data.confidence_upper,borderColor:"rgba(79, 70, 229, 0.3)",backgroundColor:"rgba(79, 70, 229, 0.05)",borderDash:[5,5],tension:.4,fill:"+1"},{label:"Intervalle de confiance inférieur",data:f.data.confidence_lower,borderColor:"rgba(79, 70, 229, 0.3)",backgroundColor:"rgba(79, 70, 229, 0.05)",borderDash:[5,5],tension:.4,fill:!1}])}catch(c){console.error("Erreur chargement prédictions:",c)}},g=async()=>{try{const f=await(await fetch("/api/v1/admin/analytics/top-events?limit=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();f.success&&(b.value=f.data)}catch(c){console.error("Erreur chargement top events:",c)}},h=async()=>{d.value=!0;try{await Promise.all([$(),H(),j(),E(),S(),g()])}finally{d.value=!1}},D=()=>{const c=new Date;c.setDate(c.getDate()-t.value);const f=new Date,w=`/api/v1/admin/analytics/export/sales?start_date=${c.toISOString().split("T")[0]}&end_date=${f.toISOString().split("T")[0]}`;window.open(w,"_blank")},C=()=>{const c=new Date;c.setDate(c.getDate()-t.value);const f=new Date,w=`/api/v1/admin/analytics/export/events?start_date=${c.toISOString().split("T")[0]}&end_date=${f.toISOString().split("T")[0]}`;window.open(w,"_blank")},k=()=>{const c=new Date;c.setDate(c.getDate()-t.value);const f=new Date,w=`/api/v1/admin/analytics/export/financial?start_date=${c.toISOString().split("T")[0]}&end_date=${f.toISOString().split("T")[0]}`;window.open(w,"_blank")},P=c=>new Intl.NumberFormat("fr-FR").format(c);return ae(()=>{h()}),{loading:d,selectedPeriod:t,kpis:m,revenueChartData:s,salesByCategoryData:i,conversionFunnelData:u,conversionRates:o,predictionsChartData:r,predictions:y,topEvents:b,lineChartOptions:x,barChartOptions:T,doughnutChartOptions:z,predictionsChartOptions:A,loadAllData:h,exportSales:D,exportEvents:C,exportFinancial:k,formatAmount:P}}},I3={class:"analytics-dashboard p-6"},$3={class:"mb-6 bg-white rounded-lg shadow p-4"},L3={class:"flex items-center justify-between"},q3={class:"flex items-center space-x-4"},N3={class:"flex space-x-3"},H3={key:0,class:"flex justify-center items-center h-64"},X3={key:1},G3={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},K3={class:"bg-white rounded-lg shadow p-6"},W3={class:"text-2xl font-bold text-gray-900"},J3={class:"flex items-center mt-2"},Y3={key:0,class:"text-green-600 text-sm font-medium flex items-center"},Z3={key:1,class:"text-red-600 text-sm font-medium flex items-center"},Q3={class:"bg-white rounded-lg shadow p-6"},e6={class:"text-2xl font-bold text-gray-900"},t6={class:"flex items-center mt-2"},s6={class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},o6={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"},r6={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"},l6={class:"bg-white rounded-lg shadow p-6"},a6={class:"text-2xl font-bold text-gray-900"},n6={class:"flex items-center mt-2"},i6={class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},d6={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"},u6={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"},c6={class:"bg-white rounded-lg shadow p-6"},m6={class:"text-2xl font-bold text-gray-900"},g6={class:"flex items-center mt-2"},p6={class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f6={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"},x6={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"},v6={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},y6={class:"bg-white rounded-lg shadow p-6"},b6={key:1,class:"text-center text-gray-500 py-12"},h6={class:"bg-white rounded-lg shadow p-6"},w6={key:1,class:"text-center text-gray-500 py-12"},_6={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},k6={class:"bg-white rounded-lg shadow p-6"},C6={key:1,class:"text-center text-gray-500 py-12"},M6={key:2,class:"mt-4 pt-4 border-t border-gray-200"},S6={class:"grid grid-cols-3 gap-4 text-center"},j6={class:"text-lg font-bold text-blue-600"},A6={class:"text-lg font-bold text-green-600"},D6={class:"text-lg font-bold text-purple-600"},P6={class:"bg-white rounded-lg shadow p-6"},T6={class:"flex items-center justify-between mb-4"},F6={key:1,class:"text-center text-gray-500 py-12"},U6={key:2,class:"mt-4 pt-4 border-t border-gray-200"},E6={class:"grid grid-cols-2 gap-4 text-center"},z6={class:"text-lg font-bold text-indigo-600"},O6={class:"text-lg font-bold text-purple-600"},R6={class:"bg-white rounded-lg shadow p-6"},B6={key:0,class:"text-center text-gray-500 py-8"},V6={key:1,class:"overflow-x-auto"},I6={class:"w-full"},$6={class:"divide-y divide-gray-200"},L6={class:"px-4 py-4"},q6={class:"px-4 py-4"},N6={class:"flex items-center"},H6=["src","alt"],X6={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center mr-3"},G6={class:"font-medium text-gray-900"},K6={class:"px-4 py-4 text-sm text-gray-600"},W6={class:"px-4 py-4 text-right"},J6={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800"},Y6={class:"px-4 py-4 text-right font-medium text-gray-900"};function Z6(d,t,m,s,i,u){const o=me("Line"),r=me("Doughnut"),y=me("Bar");return a(),n("div",I3,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Analytics Avancées"),e("p",{class:"text-white opacity-80"},"Analyses détaillées, prédictions et exports des données de la plateforme")])],-1)),e("div",$3,[e("div",L3,[e("div",q3,[t[6]||(t[6]=e("label",{class:"text-sm font-medium text-gray-700"},"Période d'analyse:",-1)),p(e("select",{"onUpdate:modelValue":t[0]||(t[0]=b=>s.selectedPeriod=b),onChange:t[1]||(t[1]=(...b)=>s.loadAllData&&s.loadAllData(...b)),class:"border border-gray-300 rounded-md px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[5]||(t[5]=[e("option",{value:"7"},"7 derniers jours",-1),e("option",{value:"30"},"30 derniers jours",-1),e("option",{value:"90"},"90 derniers jours",-1),e("option",{value:"365"},"1 an",-1)])],544),[[B,s.selectedPeriod]])]),e("div",N3,[e("button",{onClick:t[2]||(t[2]=(...b)=>s.exportSales&&s.exportSales(...b)),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center"},[...t[7]||(t[7]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),J(" Export Ventes ",-1)])]),e("button",{onClick:t[3]||(t[3]=(...b)=>s.exportEvents&&s.exportEvents(...b)),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center"},[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),J(" Export Événements ",-1)])]),e("button",{onClick:t[4]||(t[4]=(...b)=>s.exportFinancial&&s.exportFinancial(...b)),class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center"},[...t[9]||(t[9]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),J(" Rapport Financier ",-1)])])])])]),s.loading?(a(),n("div",H3,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(a(),n("div",X3,[e("div",G3,[e("div",K3,[t[14]||(t[14]=le('<div class="flex items-center justify-between mb-4" data-v-42fff5a6><h3 class="text-sm font-medium text-gray-600" data-v-42fff5a6>Revenus</h3><div class="p-2 rounded-lg" style="background-color:rgba(79, 70, 229, 0.1);" data-v-42fff5a6><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-42fff5a6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1" data-v-42fff5a6></path></svg></div></div>',1)),e("div",null,[e("p",W3,l(s.formatAmount(s.kpis.revenue?.current||0))+" XAF",1),e("div",J3,[s.kpis.revenue?.trend==="up"?(a(),n("span",Y3,[t[11]||(t[11]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)),J(" +"+l(s.kpis.revenue?.change_percent||0)+"% ",1)])):(a(),n("span",Z3,[t[12]||(t[12]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)),J(" "+l(s.kpis.revenue?.change_percent||0)+"% ",1)])),t[13]||(t[13]=e("span",{class:"text-gray-500 text-xs ml-2"},"vs période précédente",-1))])])]),e("div",Q3,[t[16]||(t[16]=le('<div class="flex items-center justify-between mb-4" data-v-42fff5a6><h3 class="text-sm font-medium text-gray-600" data-v-42fff5a6>Commandes</h3><div class="p-2 rounded-lg bg-blue-100" data-v-42fff5a6><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-42fff5a6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" data-v-42fff5a6></path></svg></div></div>',1)),e("div",null,[e("p",e6,l(s.kpis.orders?.current||0),1),e("div",t6,[e("span",{class:O([s.kpis.orders?.trend==="up"?"text-green-600":"text-red-600","text-sm font-medium flex items-center"])},[(a(),n("svg",s6,[s.kpis.orders?.trend==="up"?(a(),n("path",o6)):(a(),n("path",r6))])),J(" "+l(s.kpis.orders?.trend==="up"?"+":"")+l(s.kpis.orders?.change_percent||0)+"% ",1)],2),t[15]||(t[15]=e("span",{class:"text-gray-500 text-xs ml-2"},"vs période précédente",-1))])])]),e("div",l6,[t[18]||(t[18]=le('<div class="flex items-center justify-between mb-4" data-v-42fff5a6><h3 class="text-sm font-medium text-gray-600" data-v-42fff5a6>Billets Vendus</h3><div class="p-2 rounded-lg bg-green-100" data-v-42fff5a6><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-42fff5a6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z" data-v-42fff5a6></path></svg></div></div>',1)),e("div",null,[e("p",a6,l(s.kpis.tickets?.current||0),1),e("div",n6,[e("span",{class:O([s.kpis.tickets?.trend==="up"?"text-green-600":"text-red-600","text-sm font-medium flex items-center"])},[(a(),n("svg",i6,[s.kpis.tickets?.trend==="up"?(a(),n("path",d6)):(a(),n("path",u6))])),J(" "+l(s.kpis.tickets?.trend==="up"?"+":"")+l(s.kpis.tickets?.change_percent||0)+"% ",1)],2),t[17]||(t[17]=e("span",{class:"text-gray-500 text-xs ml-2"},"vs période précédente",-1))])])]),e("div",c6,[t[20]||(t[20]=le('<div class="flex items-center justify-between mb-4" data-v-42fff5a6><h3 class="text-sm font-medium text-gray-600" data-v-42fff5a6>Nouveaux Utilisateurs</h3><div class="p-2 rounded-lg bg-purple-100" data-v-42fff5a6><svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-42fff5a6><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" data-v-42fff5a6></path></svg></div></div>',1)),e("div",null,[e("p",m6,l(s.kpis.users?.current||0),1),e("div",g6,[e("span",{class:O([s.kpis.users?.trend==="up"?"text-green-600":"text-red-600","text-sm font-medium flex items-center"])},[(a(),n("svg",p6,[s.kpis.users?.trend==="up"?(a(),n("path",f6)):(a(),n("path",x6))])),J(" "+l(s.kpis.users?.trend==="up"?"+":"")+l(s.kpis.users?.change_percent||0)+"% ",1)],2),t[19]||(t[19]=e("span",{class:"text-gray-500 text-xs ml-2"},"vs période précédente",-1))])])])]),e("div",v6,[e("div",y6,[t[21]||(t[21]=e("h3",{class:"text-lg font-bold mb-4 text-gray-900"},"Évolution des Revenus",-1)),s.revenueChartData?.labels?.length>0&&s.revenueChartData?.datasets?.length>0?(a(),ge(o,{key:0,data:s.revenueChartData,options:s.lineChartOptions},null,8,["data","options"])):(a(),n("div",b6,"Aucune donnée de revenus disponible"))]),e("div",h6,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold mb-4 text-gray-900"},"Ventes par Catégorie",-1)),s.salesByCategoryData?.labels?.length>0&&s.salesByCategoryData?.datasets?.length>0?(a(),ge(r,{key:0,data:s.salesByCategoryData,options:s.doughnutChartOptions},null,8,["data","options"])):(a(),n("div",w6,"Aucune donnée de catégorie disponible"))])]),e("div",_6,[e("div",k6,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold mb-4 text-gray-900"},"Funnel de Conversion",-1)),s.conversionFunnelData?.labels?.length>0&&s.conversionFunnelData?.datasets?.length>0?(a(),ge(y,{key:0,data:s.conversionFunnelData,options:s.barChartOptions},null,8,["data","options"])):(a(),n("div",C6,"Aucune donnée de conversion disponible")),s.conversionRates?(a(),n("div",M6,[e("div",S6,[e("div",null,[t[23]||(t[23]=e("p",{class:"text-xs text-gray-600"},"Vue → Commande",-1)),e("p",j6,l(s.conversionRates.view_to_order)+"%",1)]),e("div",null,[t[24]||(t[24]=e("p",{class:"text-xs text-gray-600"},"Commande → Paiement",-1)),e("p",A6,l(s.conversionRates.order_to_paid)+"%",1)]),e("div",null,[t[25]||(t[25]=e("p",{class:"text-xs text-gray-600"},"Conversion Globale",-1)),e("p",D6,l(s.conversionRates.overall)+"%",1)])])])):_("",!0)]),e("div",P6,[e("div",T6,[t[27]||(t[27]=e("h3",{class:"text-lg font-bold text-gray-900"},"Prédictions de Revenus (30 jours)",-1)),s.predictions.trend?(a(),n("span",{key:0,class:O([s.predictions.trend==="ascending"?"text-green-600":"text-red-600","text-sm font-medium px-3 py-1 rounded-full"]),style:ne(s.predictions.trend==="ascending"?"background-color: rgba(34, 197, 94, 0.1)":"background-color: rgba(239, 68, 68, 0.1)")},l(s.predictions.trend==="ascending"?"↑ Croissance":"↓ Décroissance"),7)):_("",!0)]),s.predictionsChartData?.labels?.length>0&&s.predictionsChartData?.datasets?.length>0?(a(),ge(o,{key:0,data:s.predictionsChartData,options:s.predictionsChartOptions},null,8,["data","options"])):(a(),n("div",F6,"Pas assez de données pour les prédictions")),s.predictions.growth_rate!==void 0?(a(),n("div",U6,[e("div",E6,[e("div",null,[t[28]||(t[28]=e("p",{class:"text-xs text-gray-600"},"Taux de croissance",-1)),e("p",z6,l(s.formatAmount(s.predictions.growth_rate))+" XAF/jour",1)]),e("div",null,[t[29]||(t[29]=e("p",{class:"text-xs text-gray-600"},"Qualité du modèle (R²)",-1)),e("p",O6,l(s.predictions.r_squared),1)])])])):_("",!0)])]),e("div",R6,[t[32]||(t[32]=e("h3",{class:"text-lg font-bold mb-4 text-gray-900"},"Top 10 Événements",-1)),s.topEvents.length===0?(a(),n("div",B6," Aucun événement disponible ")):(a(),n("div",V6,[e("table",I6,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"#"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Billets"),e("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Revenus")])],-1)),e("tbody",$6,[(a(!0),n(F,null,U(s.topEvents,(b,x)=>(a(),n("tr",{key:b.id,class:"hover:bg-gray-50"},[e("td",L6,[e("div",{class:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold text-white",style:ne(`background-color: ${x<3?"#fab511":"#272d63"}`)},l(x+1),5)]),e("td",q6,[e("div",N6,[b.image?(a(),n("img",{key:0,src:b.image,alt:b.title,class:"w-12 h-12 rounded-lg object-cover mr-3"},null,8,H6)):(a(),n("div",X6,[...t[30]||(t[30]=[e("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e("div",null,[e("p",G6,l(b.title),1)])])]),e("td",K6,l(b.organizer||"N/A"),1),e("td",W6,[e("span",J6,l(b.tickets_sold)+" tickets ",1)]),e("td",Y6,l(s.formatAmount(b.revenue))+" XAF",1)]))),128))])])]))])]))])}const Q6=ee(V3,[["render",Z6],["__scopeId","data-v-42fff5a6"]]),a5=Object.freeze(Object.defineProperty({__proto__:null,default:Q6},Symbol.toStringTag,{value:"Module"})),ew={name:"BannerManagement",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v([]),u=v(null),o=v(null),r=v(null),y=v(null),b=N({search:"",position:"",is_active:""}),x=N({title:"",description:"",link_url:"",position:"home",order:0,is_active:!0,start_date:null,end_date:null}),T=de(()=>{let c=i.value;if(b.search&&(c=c.filter(f=>f.title.toLowerCase().includes(b.search.toLowerCase())||f.description?.toLowerCase().includes(b.search.toLowerCase()))),b.position&&(c=c.filter(f=>f.position===b.position)),b.is_active!==""){const f=b.is_active==="true";c=c.filter(w=>w.is_active===f)}return c}),z=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",A=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":z()}),$=async()=>{d.value=!0;try{const c=new URLSearchParams;b.position&&c.append("position",b.position),b.is_active!==""&&c.append("is_active",b.is_active);const f=await fetch(`/api/v1/admin/banners?${c}`,{headers:A()});if(f.ok){const w=await f.json();w.success&&(i.value=w.data)}}catch(c){console.error("Erreur lors du chargement des bannières:",c)}finally{d.value=!1}},H=c=>{const f=c.target.files[0];if(f){if(f.size>2048*1024){alert("L'image ne doit pas dépasser 2MB");return}y.value=f;const w=new FileReader;w.onload=L=>{r.value=L.target.result},w.readAsDataURL(f)}},j=()=>{r.value=null,y.value=null,o.value&&(o.value.value="")},E=async()=>{if(!y.value){alert("Veuillez sélectionner une image");return}t.value=!0;try{const c=new FormData;c.append("image",y.value),c.append("title",x.title),c.append("description",x.description||""),c.append("link_url",x.link_url||""),c.append("position",x.position),c.append("order",x.order),c.append("is_active",x.is_active?"1":"0"),x.start_date&&c.append("start_date",x.start_date),x.end_date&&c.append("end_date",x.end_date);const f=await fetch("/api/v1/admin/banners",{method:"POST",headers:{...A()},body:c});f.ok&&(await f.json()).success&&(C(),$())}catch(c){console.error("Erreur lors de la création:",c)}finally{t.value=!1}},S=c=>{u.value=c,x.title=c.title,x.description=c.description||"",x.link_url=c.link_url||"",x.position=c.position,x.order=c.order,x.is_active=c.is_active,x.start_date=c.start_date?c.start_date.slice(0,16):null,x.end_date=c.end_date?c.end_date.slice(0,16):null,r.value=c.image_path?`/storage/${c.image_path}`:null,s.value=!0},g=async()=>{t.value=!0;try{const c=new FormData;y.value&&c.append("image",y.value),c.append("title",x.title),c.append("description",x.description||""),c.append("link_url",x.link_url||""),c.append("position",x.position),c.append("order",x.order),c.append("is_active",x.is_active?"1":"0"),x.start_date&&c.append("start_date",x.start_date),x.end_date&&c.append("end_date",x.end_date);const f=await fetch(`/api/v1/admin/banners/${u.value.id}`,{method:"POST",headers:{...A()},body:c});f.ok&&(await f.json()).success&&(C(),$())}catch(c){console.error("Erreur lors de la mise à jour:",c)}finally{t.value=!1}},h=async c=>{try{const f=await fetch(`/api/v1/admin/banners/${c.id}/toggle-active`,{method:"POST",headers:A()});f.ok&&(await f.json()).success&&$()}catch(f){console.error("Erreur lors du changement de statut:",f)}},D=async c=>{if(confirm(`Êtes-vous sûr de vouloir supprimer la bannière "${c.title}" ?`))try{(await fetch(`/api/v1/admin/banners/${c.id}`,{method:"DELETE",headers:A()})).ok&&$()}catch(f){console.error("Erreur lors de la suppression:",f)}},C=()=>{m.value=!1,s.value=!1,u.value=null,Object.assign(x,{title:"",description:"",link_url:"",position:"home",order:0,is_active:!0,start_date:null,end_date:null}),j()},k=c=>({home:"Accueil",events:"Événements",checkout:"Paiement",all:"Toutes les pages"})[c]||c,P=c=>c?new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return ae(()=>{$()}),{loading:d,uploading:t,showCreateModal:m,showEditModal:s,banners:i,filters:b,bannerForm:x,filteredBanners:T,imageInput:o,imagePreview:r,loadBanners:$,handleImageUpload:H,removeImage:j,createBanner:E,editBanner:S,updateBanner:g,toggleBannerStatus:h,deleteBanner:D,closeModals:C,getPositionLabel:k,formatDate:P}}},tw={class:"banner-management p-6"},sw={class:"mb-6 flex justify-between items-center"},ow={class:"bg-white rounded-lg shadow p-4 mb-6"},rw={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},lw={class:"flex items-end"},aw={key:0,class:"flex justify-center items-center h-64"},nw={key:1},iw={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},dw={class:"relative h-48 bg-gray-200"},uw=["src","alt"],cw={key:1,class:"flex items-center justify-center h-full"},mw={class:"absolute top-2 right-2"},gw={class:"absolute top-2 left-2"},pw={class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},fw={class:"p-4"},xw={class:"text-lg font-bold mb-2",style:{color:"#272d63"}},vw={class:"text-sm text-gray-600 mb-3 line-clamp-2"},yw={class:"flex items-center justify-between text-xs text-gray-500 mb-3"},bw={key:0,class:"text-xs text-gray-500 mb-3 truncate"},hw={class:"flex space-x-2"},ww=["onClick"],_w=["onClick"],kw=["onClick"],Cw={key:0,class:"text-center py-12 bg-white rounded-lg shadow"},Mw={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Sw={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},jw={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},Aw={class:"space-y-4"},Dw={class:"border-2 border-dashed border-gray-300 rounded-lg p-4"},Pw={for:"image-upload",class:"cursor-pointer"},Tw={key:0,class:"relative"},Fw=["src"],Uw={key:1,class:"text-center"},Ew={class:"grid grid-cols-2 gap-4"},zw={class:"grid grid-cols-2 gap-4"},Ow={class:"flex items-center"},Rw={class:"flex space-x-3 mt-6"},Bw=["disabled"],Vw={key:0},Iw={key:1};function $w(d,t,m,s,i,u){return a(),n("div",tw,[e("div",sw,[t[26]||(t[26]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Bannières Publicitaires"),e("p",{class:"text-gray-600 mt-1"},"Gérez les bannières publicitaires affichées sur le site")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Nouvelle Bannière ",-1)])],32)]),e("div",ow,[e("div",rw,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Titre de la bannière...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.filters.search]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Position",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.position=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[28]||(t[28]=[le('<option value="" data-v-d8853eae>Toutes les positions</option><option value="home" data-v-d8853eae>Page d&#39;accueil</option><option value="events" data-v-d8853eae>Page des événements</option><option value="checkout" data-v-d8853eae>Page de paiement</option><option value="all" data-v-d8853eae>Toutes les pages</option>',5)])],512),[[B,s.filters.position]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.is_active=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[30]||(t[30]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],512),[[B,s.filters.is_active]])]),e("div",lw,[e("button",{onClick:t[6]||(t[6]=(...o)=>s.loadBanners&&s.loadBanners(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(a(),n("div",aw,[...t[32]||(t[32]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(a(),n("div",nw,[e("div",iw,[(a(!0),n(F,null,U(s.filteredBanners,o=>(a(),n("div",{key:o.id,class:"bg-white rounded-lg shadow overflow-hidden hover:shadow-lg transition-shadow duration-200"},[e("div",dw,[o.image_path?(a(),n("img",{key:0,src:`/storage/${o.image_path}`,alt:o.title,class:"w-full h-full object-cover"},null,8,uw)):(a(),n("div",cw,[...t[33]||(t[33]=[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e("div",mw,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(o.is_active?"Actif":"Inactif"),3)]),e("div",gw,[e("span",pw,l(s.getPositionLabel(o.position)),1)])]),e("div",fw,[e("h3",xw,l(o.title),1),e("p",vw,l(o.description||"Aucune description"),1),e("div",yw,[e("span",null,"Ordre: "+l(o.order),1),e("span",null,l(s.formatDate(o.created_at)),1)]),o.link_url?(a(),n("div",bw,[t[34]||(t[34]=e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)),J(" "+l(o.link_url),1)])):_("",!0),e("div",hw,[e("button",{onClick:r=>s.toggleBannerStatus(o),class:O(["flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",o.is_active?"bg-orange-100 text-orange-800 hover:bg-orange-200":"bg-green-100 text-green-800 hover:bg-green-200"])},l(o.is_active?"Désactiver":"Activer"),11,ww),e("button",{onClick:r=>s.editBanner(o),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[9]||(t[9]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[10]||(t[10]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Modifier ",40,_w),e("button",{onClick:r=>s.deleteBanner(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"},[...t[35]||(t[35]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,kw)])])]))),128))]),s.banners.length===0?(a(),n("div",Cw,[...t[36]||(t[36]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucune bannière",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre première bannière publicitaire.",-1)])])):_("",!0)])),s.showCreateModal||s.showEditModal?(a(),n("div",Mw,[e("div",Sw,[e("h3",jw,l(s.showCreateModal?"Nouvelle Bannière":"Modifier la Bannière"),1),e("form",{onSubmit:t[24]||(t[24]=oe(o=>s.showCreateModal?s.createBanner():s.updateBanner(),["prevent"]))},[e("div",Aw,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Image * (max 2MB) ",-1)),e("div",Dw,[e("input",{type:"file",ref:"imageInput",onChange:t[11]||(t[11]=(...o)=>s.handleImageUpload&&s.handleImageUpload(...o)),accept:"image/*",class:"hidden",id:"image-upload"},null,544),e("label",Pw,[s.imagePreview?(a(),n("div",Tw,[e("img",{src:s.imagePreview,alt:"Preview",class:"w-full h-48 object-cover rounded-lg"},null,8,Fw),e("button",{type:"button",onClick:t[12]||(t[12]=oe((...o)=>s.removeImage&&s.removeImage(...o),["stop"])),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"},[...t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(a(),n("div",Uw,[...t[38]||(t[38]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-1 text-sm text-gray-600"},"Cliquez pour sélectionner une image",-1)])]))])])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=o=>s.bannerForm.title=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.bannerForm.title]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),p(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.bannerForm.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.bannerForm.description]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL de redirection",-1)),p(e("input",{type:"url","onUpdate:modelValue":t[15]||(t[15]=o=>s.bannerForm.link_url=o),placeholder:"https://...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.bannerForm.link_url]])]),e("div",Ew,[e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Position *",-1)),p(e("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.bannerForm.position=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[43]||(t[43]=[e("option",{value:"home"},"Page d'accueil",-1),e("option",{value:"events"},"Page des événements",-1),e("option",{value:"checkout"},"Page de paiement",-1),e("option",{value:"all"},"Toutes les pages",-1)])],512),[[B,s.bannerForm.position]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ordre",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=o=>s.bannerForm.order=o),min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.bannerForm.order]])])]),e("div",zw,[e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),p(e("input",{type:"datetime-local","onUpdate:modelValue":t[18]||(t[18]=o=>s.bannerForm.start_date=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.bannerForm.start_date]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),p(e("input",{type:"datetime-local","onUpdate:modelValue":t[19]||(t[19]=o=>s.bannerForm.end_date=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.bannerForm.end_date]])])]),e("div",Ow,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=o=>s.bannerForm.is_active=o),id:"is_active",class:"h-4 w-4 rounded border-gray-300",style:{color:"#272d63"}},null,512),[[re,s.bannerForm.is_active]]),t[48]||(t[48]=e("label",{for:"is_active",class:"ml-2 block text-sm text-gray-700"}," Bannière active ",-1))])]),e("div",Rw,[e("button",{type:"submit",disabled:s.uploading,class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",style:{"background-color":"#272d63"},onMouseover:t[21]||(t[21]=o=>!s.uploading&&(o.currentTarget.style.backgroundColor="#fab511")),onMouseleave:t[22]||(t[22]=o=>!s.uploading&&(o.currentTarget.style.backgroundColor="#272d63"))},[s.uploading?(a(),n("span",Vw,"Envoi en cours...")):(a(),n("span",Iw,l(s.showCreateModal?"Créer":"Modifier"),1))],40,Bw),e("button",{type:"button",onClick:t[23]||(t[23]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):_("",!0)])}const Lw=ee(ew,[["render",$w],["__scopeId","data-v-d8853eae"]]),n5=Object.freeze(Object.defineProperty({__proto__:null,default:Lw},Symbol.toStringTag,{value:"Module"})),qw={name:"HeroBannerManagement",setup(){const d=v(!1),t=v(!1),m=v(!1),s=v(!1),i=v([]),u=v(null),o=v(null),r=v(null),y=v(null),b=v("file"),x=N({search:"",type:"",is_active:""}),T=N({title:"",type:"image",media_url:"",display_order:0,is_active:!0}),z=de(()=>{let c=i.value;if(x.search&&(c=c.filter(f=>f.title?.toLowerCase().includes(x.search.toLowerCase()))),x.type&&(c=c.filter(f=>f.type===x.type)),x.is_active!==""){const f=x.is_active==="true";c=c.filter(w=>w.is_active===f)}return c}),A=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",$=()=>({Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":A()}),H=async()=>{d.value=!0;try{const c=new URLSearchParams;x.type&&c.append("type",x.type),x.is_active!==""&&c.append("is_active",x.is_active);const f=await fetch(`/api/v1/admin/hero-banners?${c}`,{headers:$()});if(f.ok){const w=await f.json();w.success&&(i.value=w.data)}}catch(c){console.error("Erreur lors du chargement des hero banners:",c)}finally{d.value=!1}},j=c=>{const f=c.target.files[0];if(f){if(f.size>10240*1024){alert("Le fichier ne doit pas dépasser 10MB");return}y.value=f;const w=new FileReader;w.onload=L=>{r.value=L.target.result},w.readAsDataURL(f)}},E=()=>{r.value=null,y.value=null,o.value&&(o.value.value="")},S=async()=>{if(b.value==="file"&&!y.value){alert("Veuillez sélectionner un fichier");return}if(b.value==="url"&&!T.media_url){alert("Veuillez fournir une URL");return}t.value=!0;try{const c=new FormData;c.append("type",T.type),c.append("title",T.title||""),c.append("display_order",T.display_order),c.append("is_active",T.is_active?"1":"0"),b.value==="file"?c.append("media_file",y.value):c.append("media_url",T.media_url);const f=await fetch("/api/v1/admin/hero-banners",{method:"POST",headers:$(),body:c});f.ok&&(await f.json()).success&&(k(),H())}catch(c){console.error("Erreur lors de la création:",c)}finally{t.value=!1}},g=c=>{u.value=c,T.title=c.title||"",T.type=c.type,T.display_order=c.display_order,T.is_active=c.is_active,T.media_url=c.media_url||"",c.media_url&&c.media_url.startsWith("http")?b.value="url":(b.value="file",r.value=c.media_url||null),s.value=!0},h=async()=>{t.value=!0;try{const c=new FormData;c.append("type",T.type),c.append("title",T.title||""),c.append("display_order",T.display_order),c.append("is_active",T.is_active?"1":"0"),b.value==="file"&&y.value?c.append("media_file",y.value):b.value==="url"&&c.append("media_url",T.media_url);const f=await fetch(`/api/v1/admin/hero-banners/${u.value.id}`,{method:"POST",headers:$(),body:c});f.ok&&(await f.json()).success&&(k(),H())}catch(c){console.error("Erreur lors de la mise à jour:",c)}finally{t.value=!1}},D=async c=>{try{const f=await fetch(`/api/v1/admin/hero-banners/${c.id}/toggle-active`,{method:"POST",headers:$()});f.ok&&(await f.json()).success&&H()}catch(f){console.error("Erreur lors du changement de statut:",f)}},C=async c=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce hero banner ?"))try{(await fetch(`/api/v1/admin/hero-banners/${c.id}`,{method:"DELETE",headers:$()})).ok&&H()}catch(f){console.error("Erreur lors de la suppression:",f)}},k=()=>{m.value=!1,s.value=!1,u.value=null,Object.assign(T,{title:"",type:"image",media_url:"",display_order:0,is_active:!0}),b.value="file",E()},P=c=>c?new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"";return ae(()=>{H()}),{loading:d,uploading:t,showCreateModal:m,showEditModal:s,heroBanners:i,filters:x,heroBannerForm:T,filteredHeroBanners:z,mediaInput:o,mediaPreview:r,uploadMode:b,loadHeroBanners:H,handleMediaUpload:j,removeMedia:E,createHeroBanner:S,editHeroBanner:g,updateHeroBanner:h,toggleHeroBannerStatus:D,deleteHeroBanner:C,closeModals:k,formatDate:P}}},Nw={class:"hero-banner-management p-6"},Hw={class:"mb-6 flex justify-between items-center"},Xw={class:"bg-white rounded-lg shadow p-4 mb-6"},Gw={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Kw={key:0,class:"flex justify-center items-center h-64"},Ww={key:1},Jw={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Yw={class:"relative h-48 bg-gray-200"},Zw=["src","alt"],Qw=["src"],e_={key:2,class:"flex items-center justify-center h-full"},t_={class:"absolute top-2 right-2"},s_={class:"absolute top-2 left-2"},o_={class:"p-4"},r_={class:"text-lg font-bold mb-2",style:{color:"#272d63"}},l_={class:"flex items-center justify-between text-xs text-gray-500 mb-3"},a_={class:"flex space-x-2"},n_=["onClick"],i_=["onClick"],d_=["onClick"],u_={key:0,class:"text-center py-12 bg-white rounded-lg shadow"},c_={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},m_={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},g_={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},p_={class:"space-y-4"},f_={class:"flex space-x-4"},x_={class:"flex items-center cursor-pointer"},v_={class:"flex items-center cursor-pointer"},y_={class:"flex space-x-4 mb-4"},b_={class:"flex items-center cursor-pointer"},h_={class:"flex items-center cursor-pointer"},w_={key:0,class:"border-2 border-dashed border-gray-300 rounded-lg p-4"},__=["accept"],k_={for:"media-upload",class:"cursor-pointer"},C_={key:0,class:"relative"},M_=["src"],S_=["src"],j_={key:1,class:"text-center"},A_={class:"mt-1 text-sm text-gray-600"},D_={key:1},P_={class:"flex items-center"},T_={class:"flex space-x-3 mt-6"},F_=["disabled"],U_={key:0},E_={key:1};function z_(d,t,m,s,i,u){return a(),n("div",Nw,[e("div",Hw,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion du Hero Banner"),e("p",{class:"text-gray-600 mt-1"},"Gérez les images/vidéos de la bannière d'accueil")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),J(" Nouveau Hero Banner ",-1)])],32)]),e("div",Xw,[e("div",Gw,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Titre...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),p(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.type=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[25]||(t[25]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"image"},"Image",-1),e("option",{value:"video"},"Vidéo",-1)])],512),[[B,s.filters.type]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.is_active=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[27]||(t[27]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],512),[[B,s.filters.is_active]])])])]),s.loading?(a(),n("div",Kw,[...t[29]||(t[29]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(a(),n("div",Ww,[e("div",Jw,[(a(!0),n(F,null,U(s.filteredHeroBanners,o=>(a(),n("div",{key:o.id,class:"bg-white rounded-lg shadow overflow-hidden hover:shadow-lg transition-shadow duration-200"},[e("div",Yw,[o.type==="image"&&o.media_url?(a(),n("img",{key:0,src:o.media_url,alt:o.title||"Hero Banner",class:"w-full h-full object-cover"},null,8,Zw)):o.type==="video"&&o.media_url?(a(),n("video",{key:1,src:o.media_url,class:"w-full h-full object-cover",muted:""},null,8,Qw)):(a(),n("div",e_,[...t[30]||(t[30]=[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])])),e("div",t_,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(o.is_active?"Actif":"Inactif"),3)]),e("div",s_,[e("span",{class:O(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.type==="image"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"])},l(o.type==="image"?"Image":"Vidéo"),3)])]),e("div",o_,[e("h3",r_,l(o.title||"Sans titre"),1),e("div",l_,[e("span",null,"Ordre: "+l(o.display_order),1),e("span",null,l(s.formatDate(o.created_at)),1)]),e("div",a_,[e("button",{onClick:r=>s.toggleHeroBannerStatus(o),class:O(["flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",o.is_active?"bg-orange-100 text-orange-800 hover:bg-orange-200":"bg-green-100 text-green-800 hover:bg-green-200"])},l(o.is_active?"Désactiver":"Activer"),11,n_),e("button",{onClick:r=>s.editHeroBanner(o),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[6]||(t[6]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[7]||(t[7]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Modifier ",40,i_),e("button",{onClick:r=>s.deleteHeroBanner(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"},[...t[31]||(t[31]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,d_)])])]))),128))]),s.heroBanners.length===0?(a(),n("div",u_,[...t[32]||(t[32]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun hero banner",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre premier hero banner.",-1)])])):_("",!0)])),s.showCreateModal||s.showEditModal?(a(),n("div",c_,[e("div",m_,[e("h3",g_,l(s.showCreateModal?"Nouveau Hero Banner":"Modifier le Hero Banner"),1),e("form",{onSubmit:t[21]||(t[21]=oe(o=>s.showCreateModal?s.createHeroBanner():s.updateHeroBanner(),["prevent"]))},[e("div",p_,[e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type de média *",-1)),e("div",f_,[e("label",x_,[p(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=o=>s.heroBannerForm.type=o),value:"image",class:"mr-2"},null,512),[[pe,s.heroBannerForm.type]]),t[33]||(t[33]=e("span",null,"Image",-1))]),e("label",v_,[p(e("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=o=>s.heroBannerForm.type=o),value:"video",class:"mr-2"},null,512),[[pe,s.heroBannerForm.type]]),t[34]||(t[34]=e("span",null,"Vidéo",-1))])])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Source du média *",-1)),e("div",y_,[e("label",b_,[p(e("input",{type:"radio","onUpdate:modelValue":t[10]||(t[10]=o=>s.uploadMode=o),value:"file",class:"mr-2"},null,512),[[pe,s.uploadMode]]),t[36]||(t[36]=e("span",null,"Télécharger un fichier",-1))]),e("label",h_,[p(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=o=>s.uploadMode=o),value:"url",class:"mr-2"},null,512),[[pe,s.uploadMode]]),t[37]||(t[37]=e("span",null,"URL externe",-1))])]),s.uploadMode==="file"?(a(),n("div",w_,[e("input",{type:"file",ref:"mediaInput",onChange:t[12]||(t[12]=(...o)=>s.handleMediaUpload&&s.handleMediaUpload(...o)),accept:s.heroBannerForm.type==="image"?"image/*":"video/*",class:"hidden",id:"media-upload"},null,40,__),e("label",k_,[s.mediaPreview?(a(),n("div",C_,[s.heroBannerForm.type==="image"?(a(),n("img",{key:0,src:s.mediaPreview,alt:"Preview",class:"w-full h-48 object-cover rounded-lg"},null,8,M_)):(a(),n("video",{key:1,src:s.mediaPreview,class:"w-full h-48 object-cover rounded-lg",controls:""},null,8,S_)),e("button",{type:"button",onClick:t[13]||(t[13]=oe((...o)=>s.removeMedia&&s.removeMedia(...o),["stop"])),class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600"},[...t[38]||(t[38]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(a(),n("div",j_,[t[39]||(t[39]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("p",A_," Cliquez pour sélectionner "+l(s.heroBannerForm.type==="image"?"une image":"une vidéo"),1),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500"},"Max: 10MB",-1))]))])])):(a(),n("div",D_,[p(e("input",{type:"url","onUpdate:modelValue":t[14]||(t[14]=o=>s.heroBannerForm.media_url=o),placeholder:"https://...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.heroBannerForm.media_url]]),t[41]||(t[41]=e("p",{class:"text-xs text-gray-500 mt-1"},"URL de l'image ou vidéo externe",-1))]))]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre (optionnel)",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=o=>s.heroBannerForm.title=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.heroBannerForm.title]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ordre d'affichage",-1)),p(e("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=o=>s.heroBannerForm.display_order=o),min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,s.heroBannerForm.display_order]])]),e("div",P_,[p(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>s.heroBannerForm.is_active=o),id:"is_active",class:"h-4 w-4 rounded border-gray-300",style:{color:"#272d63"}},null,512),[[re,s.heroBannerForm.is_active]]),t[45]||(t[45]=e("label",{for:"is_active",class:"ml-2 block text-sm text-gray-700"}," Hero banner actif ",-1))])]),e("div",T_,[e("button",{type:"submit",disabled:s.uploading,class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200 disabled:opacity-50",style:{"background-color":"#272d63"},onMouseover:t[18]||(t[18]=o=>!s.uploading&&(o.currentTarget.style.backgroundColor="#fab511")),onMouseleave:t[19]||(t[19]=o=>!s.uploading&&(o.currentTarget.style.backgroundColor="#272d63"))},[s.uploading?(a(),n("span",U_,"Envoi en cours...")):(a(),n("span",E_,l(s.showCreateModal?"Créer":"Modifier"),1))],40,F_),e("button",{type:"button",onClick:t[20]||(t[20]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):_("",!0)])}const O_=ee(qw,[["render",z_],["__scopeId","data-v-b15aab26"]]),i5=Object.freeze(Object.defineProperty({__proto__:null,default:O_},Symbol.toStringTag,{value:"Module"}));export{I_ as A,n5 as B,Y_ as C,q_ as E,i5 as H,L_ as O,H_ as P,K_ as R,W_ as S,l5 as T,$_ as U,Z_ as V,N_ as a,X_ as b,G_ as c,J_ as d,Q_ as e,e5 as f,t5 as g,s5 as h,o5 as i,r5 as j,a5 as k};
