import{b as j,Y as Q,d as Z,Z as se,j as l,o as d,k as e,t as u,a1 as C,l as x,a2 as de,a3 as _e,g as ie,O as ge,w as J,a4 as te,a as ae,y as fe,N as he,e as we,a5 as ke,G as N,H as L,q as X,p as q,n as M,D as _,E as A,F as re,P as $e,X as Ce,_ as Ee,J as me,K as be,a6 as ce,R as pe,T as ve,a7 as je,L as Ae,a8 as Se,u as xe,W as ee,a9 as ue,$ as le,C as Pe,S as Ve}from"./vue-vendor-CDZB1Wme.js";import{_ as oe,u as ye}from"./account-SYOFlVBk.js";import{a as ne,S as U}from"./vendor-BvANJOFB.js";const O=ne.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}});O.interceptors.request.use(async y=>{const s=localStorage.getItem("auth_token")||localStorage.getItem("token");s&&(y.headers.Authorization=`Bearer ${s}`);const S=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return S&&(y.headers["X-CSRF-TOKEN"]=S),y.headers["X-Requested-With"]="XMLHttpRequest",y},y=>Promise.reject(y));O.interceptors.response.use(y=>y,y=>(y.response?.status===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(y)));const Rl={getTicket(y){return O.get(`/tickets/${y}`)},retrieveTickets(y){return O.get(`/tickets/retrieve/${y}`)},validateTicket(y,s="validate"){return O.post("/tickets/validate",{qr_code:y,action:s})},searchTickets(y){const{reference:s,phone:S,email:r}=y;return s?this.getTicket(s):r||S?new Promise((V,c)=>{setTimeout(()=>{r?.includes("test")||S?.includes("123")||s?.includes("TKT")?V({data:{tickets:[{id:1,code:"TKT-2024-ABC123",status:"issued",event:{id:1,title:"L'OISEAU RARE",slug:"oiseau-rare",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",venue_name:"Entre Nous Bar"},ticket_type:{id:1,name:"Standard",description:"Accès standard"},buyer:{name:"John Doe",email:r||"john@example.com"},issued_at:"27/07/2025 10:00:00",used_at:null,schedule:{starts_at:"27/07/2025 20:00:00",ends_at:"27/07/2025 23:00:00",door_time:"27/07/2025 19:30:00"}}]}}):c(new Error("Aucun ticket trouvé avec ces informations"))},1500)}):Promise.reject(new Error("Veuillez fournir au moins un critère de recherche"))}},Ol={createGuestOrder(y){return ne.post("/api/guest/orders",y,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestOrder(y){return ne.get(`/api/guest/orders/${y}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestTicket(y){return ne.get(`/api/guest/tickets/${y}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},retrieveGuestTickets(y){return ne.get(`/api/guest/tickets/retrieve/${encodeURIComponent(y)}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}},H={getDashboardStats(){return O.get("/organizer/dashboard/stats")},getRecentEvents(){return O.get("/organizer/events/recent")},getNotifications(){return O.get("/organizer/notifications")},getEvents(y={}){return O.get("/organizer/events",{params:y})},createEvent(y){return O.post("/organizer/events",y)},updateEvent(y,s){return O.put(`/organizer/events/${y}`,s)},getEvent(y){return O.get(`/organizer/events/${y}`)},getEventStats(y){return O.get(`/organizer/events/${y}/stats`)},getBalance(){return O.get("/organizer/balance")},getPaymentHistory(){return O.get("/organizer/payments")},getProfile(){return O.get("/organizer/profile")},updateProfile(y){return O.put("/organizer/profile",y)},uploadAvatar(y){return O.post("/organizer/profile/avatar",y,{headers:{"Content-Type":"multipart/form-data"}})},getCategories(){return O.get("/categories")},getVenues(){return O.get("/venues")}},ze={class:"organizer-dashboard min-h-screen"},De={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Te={class:"mb-8"},Be={class:"flex items-center justify-between"},Me={class:"flex items-center space-x-4"},Fe={class:"text-right"},Ue={class:"text-sm font-semibold text-primea-blue font-primea"},qe={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},Ie=["src","alt"],Re={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},Oe={class:"text-lg font-bold font-primea"},Ne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Xe={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},Le={class:"flex items-center"},Ge={class:"p-2 bg-primea-blue/10 rounded-lg"},He={class:"ml-4"},We={class:"text-2xl font-bold text-primea-blue font-primea"},Ke={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},Je={class:"flex items-center"},Qe={class:"p-2 bg-green-100 rounded-lg"},Ze={class:"ml-4"},Ye={class:"text-2xl font-bold text-green-600 font-primea"},et={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},tt={class:"flex items-center"},st={class:"p-2 bg-primea-yellow/10 rounded-lg"},ot={class:"ml-4"},rt={class:"text-2xl font-bold text-primea-yellow font-primea"},at={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},nt={class:"flex items-center"},it={class:"p-2 bg-purple-100 rounded-lg"},lt={class:"ml-4"},dt={class:"text-2xl font-bold text-purple-600 font-primea"},ut={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},mt={class:"lg:col-span-2"},pt={class:"bg-white rounded-primea shadow-primea p-6"},ct={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gt={class:"bg-white rounded-primea shadow-primea p-6"},ft={class:"space-y-4"},bt={key:0,class:"text-center text-gray-500 py-8"},vt={class:"text-sm font-medium font-primea"},xt={class:"text-xs text-gray-600 mt-1"},yt={class:"text-xs text-gray-400 mt-2"},_t={class:"bg-white rounded-primea shadow-primea overflow-hidden"},ht={class:"p-6 border-b border-gray-200"},wt={class:"flex items-center justify-between"},kt={key:0,class:"p-8 text-center text-gray-500"},$t={key:1,class:"overflow-x-auto"},Ct={class:"w-full"},Et={class:"divide-y divide-gray-200"},jt={class:"px-6 py-4"},At={class:"text-sm font-medium text-gray-900 font-primea"},St={class:"text-sm text-gray-500"},Pt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Vt={class:"px-6 py-4"},zt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Dt={class:"px-6 py-4 text-sm"},Tt={__name:"OrganizerDashboard",setup(y){const s=ye(),S=j(!1),r=Q({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),V=j([]),c=j([]),i=Z(()=>{const z=s.user;return z?.name?z.name.split(" ").map(b=>b[0]).join("").toUpperCase().slice(0,2):"U"}),E=Z(()=>s.user?.avatar_url||null),o=async()=>{S.value=!0;try{const[z,b,R]=await Promise.all([H.getDashboardStats(),H.getRecentEvents(),H.getNotifications()]);Object.assign(r,z.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),V.value=b.data.data||[],c.value=R.data.data||[]}catch(z){console.error("Erreur lors du chargement du dashboard:",z),Object.assign(r,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),V.value=[],c.value=[]}finally{S.value=!1}},F=z=>new Intl.NumberFormat("fr-FR").format(z),T=z=>new Date(z).toLocaleDateString("fr-FR"),m=z=>new Date(z).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=z=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[z]||z,W=z=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[z]||"bg-gray-100 text-gray-800",K=z=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[z]||"border-gray-300";return se(()=>{o()}),(z,b)=>{const R=ae("router-link");return d(),l("div",ze,[e("div",De,[e("div",Te,[e("div",Be,[b[1]||(b[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",Me,[e("div",Fe,[b[0]||(b[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",Ue,u(T(new Date)),1)]),E.value?(d(),l("div",qe,[e("img",{src:E.value,alt:C(s).user?.name,class:"w-full h-full object-cover"},null,8,Ie)])):(d(),l("div",Re,[e("span",Oe,u(i.value),1)]))])])]),e("div",Ne,[e("div",Xe,[e("div",Le,[e("div",Ge,[x(C(de),{class:"w-6 h-6 text-primea-blue"})]),e("div",He,[b[2]||(b[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",We,u(r.total_events),1)])])]),e("div",Ke,[e("div",Je,[e("div",Qe,[x(C(_e),{class:"w-6 h-6 text-green-600"})]),e("div",Ze,[b[3]||(b[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",Ye,u(r.active_events),1)])])]),e("div",et,[e("div",tt,[e("div",st,[x(C(ie),{class:"w-6 h-6 text-primea-yellow"})]),e("div",ot,[b[4]||(b[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",rt,u(r.tickets_sold),1)])])]),e("div",at,[e("div",nt,[e("div",it,[x(C(ge),{class:"w-6 h-6 text-purple-600"})]),e("div",lt,[b[5]||(b[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",dt,u(F(r.total_revenue))+" XAF",1)])])])]),e("div",ut,[e("div",mt,[e("div",pt,[b[10]||(b[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",ct,[x(R,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:J(()=>[x(C(te),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),b[6]||(b[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),x(R,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:J(()=>[x(C(fe),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),b[7]||(b[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),x(R,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:J(()=>[x(C(he),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),b[8]||(b[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),x(R,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:J(()=>[x(C(we),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),b[9]||(b[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",gt,[b[12]||(b[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",ft,[c.value.length===0?(d(),l("div",bt,[x(C(ke),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),b[11]||(b[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(d(!0),l(N,{key:1},L(c.value,B=>(d(),l("div",{key:B.id,class:X(["p-3 bg-gray-50 rounded-primea border-l-4",K(B.type)])},[e("p",vt,u(B.title),1),e("p",xt,u(B.message),1),e("p",yt,u(m(B.created_at)),1)],2))),128))])])]),e("div",_t,[e("div",ht,[e("div",wt,[b[14]||(b[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),x(R,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:J(()=>[...b[13]||(b[13]=[q(" Voir tous ",-1)])]),_:1})])]),V.value.length===0?(d(),l("div",kt,[x(C(de),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),b[16]||(b[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),b[17]||(b[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),x(R,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[x(C(te),{class:"w-4 h-4 mr-2"}),b[15]||(b[15]=q(" Créer un événement ",-1))]),_:1})])):(d(),l("div",$t,[e("table",Ct,[b[19]||(b[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",Et,[(d(!0),l(N,null,L(V.value,B=>(d(),l("tr",{key:B.id,class:"hover:bg-gray-50"},[e("td",jt,[e("div",null,[e("p",At,u(B.title),1),e("p",St,u(B.venue_name),1)])]),e("td",Pt,u(T(B.event_date)),1),e("td",Vt,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",W(B.status)])},u(I(B.status)),3)]),e("td",zt,u(B.tickets_sold||0),1),e("td",Dt,[x(R,{to:{name:"organizer-event-detail",params:{slug:B.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:J(()=>[...b[18]||(b[18]=[q(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},Bt=oe(Tt,[["__scopeId","data-v-1685f411"]]),Nl=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"})),Mt={name:"OrganizerEvents",components:{PlusIcon:te},setup(){const y=me(),s=j(""),S=j(""),r=j("grid"),V=j(!1),c=j([]),i=Q({current:1,total:1,perPage:15}),E=async()=>{V.value=!0;try{const f=(await H.getEvents({page:i.current,status:S.value,search:s.value})).data.data.events;c.value=f.data.map(n=>({...n,tickets_sold:n.tickets?.filter(P=>["issued","used"].includes(P.status)).length||0,total_tickets:n.ticket_types?.reduce((P,h)=>P+h.capacity,0)||0,revenue:n.tickets?.filter(P=>["issued","used"].includes(P.status)).reduce((P,h)=>P+(h.ticket_type?.price||0),0)||0,venue:n.venue?.name||"",image:n.image_url||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",date:n.event_date||n.schedules?.[0]?.starts_at,isFavorite:!1})),i.current=f.current_page,i.total=f.last_page,i.perPage=f.per_page}catch($){console.error("Erreur chargement événements:",$),U.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{V.value=!1}},o=Z(()=>{let $=[...c.value];if(s.value){const f=s.value.toLowerCase();$=$.filter(n=>n.title.toLowerCase().includes(f)||n.venue.toLowerCase().includes(f))}return S.value&&($=$.filter(f=>f.status===S.value)),$}),F=Z(()=>{const $=c.value.filter(h=>h.is_active&&h.status!=="cancelled").length,f=c.value.filter(h=>!h.is_active).length,n=c.value.reduce((h,v)=>h+(v.tickets_sold||0),0),P=c.value.reduce((h,v)=>h+(v.revenue||0),0);return{published:$,draft:f,totalTicketsSold:n,totalRevenue:P}}),T=$=>new Intl.NumberFormat("fr-FR").format($),m=($,f="full")=>{const n=new Date($);return f==="short"?n.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):n.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},I=$=>$.is_active?$.status==="cancelled"?"bg-red-100 text-red-800":new Date($.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",W=$=>$.is_active?$.status==="cancelled"?"Annulé":new Date($.date)<new Date?"Terminé":"Actif":"Brouillon",K=$=>{$.isFavorite=!$.isFavorite},z=async $=>{try{const f={title:`${$.title} (Copie)`,description:$.description,event_date:$.date,venue_id:$.venue_id,category_id:$.category_id,is_active:!1};await H.createEvent(f),await E(),U.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{U.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},b=$=>{y.push({name:"organizer-event-edit",params:{slug:$.slug}})},R=async $=>{if((await U.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${$.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await E(),U.fire("Supprimé !","L'événement a été supprimé.","success")}catch{U.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};Ee([s,S],()=>{i.current=1,E()},{debounce:300});const B=$=>{i.current=$,E()};return se(()=>{E()}),{searchQuery:s,statusFilter:S,viewMode:r,loading:V,events:c,filteredEvents:o,stats:F,pagination:i,formatPrice:T,formatEventDate:m,getStatusClass:I,getStatusText:W,toggleFavorite:K,duplicateEvent:z,editEvent:b,deleteEvent:R,loadEvents:E,changePage:B}}},Ft={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Ut={class:"bg-white shadow-sm border-b border-gray-200"},qt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},It={class:"flex items-center justify-between"},Rt={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Ot={class:"bg-white rounded-lg shadow-md p-6 mb-8"},Nt={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},Xt={class:"flex items-center space-x-4"},Lt={class:"relative"},Gt={class:"flex items-center space-x-4"},Ht={class:"text-sm text-gray-600"},Wt={class:"flex bg-gray-100 rounded-lg p-1"},Kt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Jt={class:"text-center"},Qt={class:"text-2xl font-bold text-blue-600"},Zt={class:"text-center"},Yt={class:"text-2xl font-bold text-yellow-600"},es={class:"text-center"},ts={class:"text-2xl font-bold text-green-600"},ss={class:"text-center"},os={class:"text-2xl font-bold text-purple-600"},rs={key:0},as={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ns={class:"relative"},is=["src","alt"],ls={class:"absolute top-4 left-4"},ds={class:"absolute top-4 right-4"},us=["onClick"],ms={class:"p-6"},ps={class:"text-lg font-bold text-gray-800 mb-2"},cs={class:"text-gray-600 text-sm mb-4"},gs={class:"flex items-center justify-between mb-4"},fs={class:"text-sm text-gray-600 font-primea"},bs={class:"font-medium font-primea"},vs={class:"text-sm font-bold text-green-600 font-primea"},xs={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},ys={class:"flex space-x-2"},_s=["onClick"],hs={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},ws={class:"w-full"},ks={class:"bg-white divide-y divide-gray-200"},$s={class:"px-6 py-4 whitespace-nowrap"},Cs={class:"flex items-center"},Es=["src","alt"],js={class:"text-sm font-medium text-gray-900"},As={class:"text-sm text-gray-500"},Ss={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Ps={class:"px-6 py-4 whitespace-nowrap"},Vs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},zs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},Ds={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Ts=["onClick"],Bs=["onClick"],Ms={key:1,class:"text-center py-16"},Fs={class:"text-gray-600 mb-6"},Us={key:0},qs={key:1},Is={key:2,class:"mt-8 flex justify-center"},Rs={class:"flex items-center space-x-2"},Os=["disabled"],Ns=["onClick"],Xs={key:1,class:"px-2 text-gray-500"},Ls=["disabled"];function Gs(y,s,S,r,V,c){const i=ae("PlusIcon"),E=ae("router-link");return d(),l("div",Ft,[e("div",Ut,[e("div",qt,[e("div",It,[s[7]||(s[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),x(E,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:J(()=>[x(i,{class:"w-4 h-4 inline mr-2"}),s[6]||(s[6]=q(" Nouvel événement ",-1))]),_:1})])])]),e("div",Rt,[e("div",Ot,[e("div",Nt,[e("div",Xt,[e("div",Lt,[s[8]||(s[8]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),_(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>r.searchQuery=o),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[A,r.searchQuery]])]),_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>r.statusFilter=o),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...s[9]||(s[9]=[$e('<option value="" data-v-b1abcf34>Tous les statuts</option><option value="draft" data-v-b1abcf34>Brouillons</option><option value="published" data-v-b1abcf34>Publiés</option><option value="completed" data-v-b1abcf34>Terminés</option><option value="cancelled" data-v-b1abcf34>Annulés</option>',5)])],512),[[re,r.statusFilter]])]),e("div",Gt,[e("div",Ht,u(r.filteredEvents.length)+" événement"+u(r.filteredEvents.length>1?"s":""),1),e("div",Wt,[e("button",{onClick:s[2]||(s[2]=o=>r.viewMode="grid"),class:X(["px-3 py-2 rounded-lg transition-colors",r.viewMode==="grid"?"bg-white shadow-sm":""])},[...s[10]||(s[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:s[3]||(s[3]=o=>r.viewMode="list"),class:X(["px-3 py-2 rounded-lg transition-colors",r.viewMode==="list"?"bg-white shadow-sm":""])},[...s[11]||(s[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",Kt,[e("div",Jt,[e("p",Qt,u(r.stats.published),1),s[12]||(s[12]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",Zt,[e("p",Yt,u(r.stats.draft),1),s[13]||(s[13]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",es,[e("p",ts,u(r.stats.totalTicketsSold),1),s[14]||(s[14]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",ss,[e("p",os,u(r.formatPrice(r.stats.totalRevenue))+" XAF",1),s[15]||(s[15]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),r.filteredEvents.length>0?(d(),l("div",rs,[r.viewMode==="grid"?(d(),l("div",as,[(d(!0),l(N,null,L(r.filteredEvents,o=>(d(),l("div",{key:o.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",ns,[e("img",{src:o.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:o.title,class:"w-full h-48 object-cover"},null,8,is),e("div",ls,[e("span",{class:X(["px-3 py-1 rounded-full text-xs font-semibold",r.getStatusClass(o.status)])},u(r.getStatusText(o.status)),3)]),e("div",ds,[e("button",{onClick:F=>r.toggleFavorite(o),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(d(),l("svg",{class:X(["w-4 h-4",o.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...s[16]||(s[16]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,us)])]),e("div",ms,[e("h3",ps,u(o.title),1),e("p",cs,u(r.formatEventDate(o.date)),1),e("div",gs,[e("div",fs,[e("span",bs,u(o.tickets_sold||0),1),q(" / "+u(o.total_tickets||0)+" tickets vendus ",1)]),e("div",vs,u(r.formatPrice(o.revenue||0))+" XAF ",1)]),e("div",xs,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Ce({width:`${Math.min((o.ticketsSold||0)/(o.totalTickets||100)*100,100)}%`})},null,4)]),e("div",ys,[x(E,{to:{name:"organizer-event-detail",params:{slug:o.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:J(()=>[...s[17]||(s[17]=[q(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:F=>r.duplicateEvent(o),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,_s)])])]))),128))])):(d(),l("div",hs,[e("table",ws,[s[19]||(s[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ks,[(d(!0),l(N,null,L(r.filteredEvents,o=>(d(),l("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",$s,[e("div",Cs,[e("img",{src:o.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=60",alt:o.title,class:"w-12 h-12 object-cover rounded-lg mr-4"},null,8,Es),e("div",null,[e("div",js,u(o.title),1),e("div",As,u(o.venue),1)])])]),e("td",Ss,u(r.formatEventDate(o.date,"short")),1),e("td",Ps,[e("span",{class:X(["px-2 py-1 rounded-full text-xs font-medium font-primea",r.getStatusClass(o)])},u(r.getStatusText(o)),3)]),e("td",Vs,u(o.tickets_sold||0)+" / "+u(o.total_tickets||0),1),e("td",zs,u(r.formatPrice(o.revenue||0))+" XAF ",1),e("td",Ds,[x(E,{to:{name:"organizer-event-detail",params:{slug:o.slug}},class:"text-blue-600 hover:text-blue-900"},{default:J(()=>[...s[18]||(s[18]=[q(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:F=>r.editEvent(o),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,Ts),e("button",{onClick:F=>r.deleteEvent(o),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Bs)])]))),128))])])]))])):(d(),l("div",Ms,[s[21]||(s[21]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),s[22]||(s[22]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",Fs,[r.searchQuery||r.statusFilter?(d(),l("span",Us," Aucun événement ne correspond à vos critères de recherche. ")):(d(),l("span",qs," Commencez par créer votre premier événement ! "))]),x(E,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:J(()=>[...s[20]||(s[20]=[q(" + Créer mon premier événement ",-1)])]),_:1})])),r.events.length>0&&r.pagination.total>1?(d(),l("div",Is,[e("nav",Rs,[e("button",{onClick:s[4]||(s[4]=o=>r.changePage(r.pagination.current-1)),disabled:r.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,Os),(d(!0),l(N,null,L(r.pagination.total,o=>(d(),l(N,{key:o},[o===1||o===r.pagination.total||o>=r.pagination.current-1&&o<=r.pagination.current+1?(d(),l("button",{key:0,onClick:F=>r.changePage(o),class:X(["px-3 py-2 text-sm font-medium rounded-lg font-primea",o===r.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},u(o),11,Ns)):o===r.pagination.current-2||o===r.pagination.current+2?(d(),l("span",Xs," ... ")):M("",!0)],64))),128)),e("button",{onClick:s[5]||(s[5]=o=>r.changePage(r.pagination.current+1)),disabled:r.pagination.current===r.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,Ls)])])):M("",!0)])])}const Hs=oe(Mt,[["render",Gs],["__scopeId","data-v-b1abcf34"]]),Xl=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"})),Ws={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Ks={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Js={key:0,class:"flex justify-center items-center h-64"},Qs={key:1,class:"text-center py-16"},Zs={class:"mb-4"},Ys={class:"text-gray-600 mb-6"},eo={key:2},to={class:"mb-8"},so={class:"flex items-center justify-between"},oo={class:"flex items-center space-x-4"},ro={class:"text-3xl font-bold text-primea-blue font-primea"},ao={class:"flex items-center space-x-3"},no={class:"flex space-x-2"},io={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},lo={class:"bg-white rounded-primea shadow-primea p-6"},uo={class:"flex items-center"},mo={class:"p-2 bg-blue-100 rounded-lg"},po={class:"ml-4"},co={class:"text-2xl font-bold text-blue-600 font-primea"},go={class:"bg-white rounded-primea shadow-primea p-6"},fo={class:"flex items-center"},bo={class:"p-2 bg-green-100 rounded-lg"},vo={class:"ml-4"},xo={class:"text-2xl font-bold text-green-600 font-primea"},yo={class:"bg-white rounded-primea shadow-primea p-6"},_o={class:"flex items-center"},ho={class:"p-2 bg-yellow-100 rounded-lg"},wo={class:"ml-4"},ko={class:"text-2xl font-bold text-yellow-600 font-primea"},$o={class:"bg-white rounded-primea shadow-primea p-6"},Co={class:"flex items-center"},Eo={class:"p-2 bg-purple-100 rounded-lg"},jo={class:"ml-4"},Ao={class:"text-lg font-bold text-purple-600 font-primea"},So={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Po={class:"lg:col-span-2 space-y-6"},Vo={class:"bg-white rounded-primea shadow-primea p-6"},zo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Do={class:"mt-1 text-gray-900 font-primea"},To={class:"mt-1 text-gray-900 font-primea"},Bo={class:"mt-1 text-gray-900 font-primea"},Mo={class:"md:col-span-2"},Fo={class:"mt-1 text-gray-900 font-primea leading-relaxed"},Uo={class:"bg-white rounded-primea shadow-primea p-6"},qo={key:0,class:"space-y-4"},Io={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ro={class:"mt-1 text-gray-900 font-primea"},Oo={class:"mt-1 text-gray-900 font-primea"},No={class:"mt-1 text-gray-900 font-primea"},Xo={key:1,class:"text-center py-8 text-gray-500"},Lo={class:"bg-white rounded-primea shadow-primea p-6"},Go={key:0,class:"space-y-4"},Ho={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},Wo={class:"md:col-span-2"},Ko={class:"flex items-center justify-between mb-2"},Jo={class:"font-semibold text-gray-900 font-primea"},Qo={class:"text-gray-600 text-sm font-primea"},Zo={class:"text-center"},Yo={class:"text-lg font-bold text-primea-blue font-primea"},er={class:"text-center"},tr={class:"text-sm font-primea"},sr={class:"font-medium text-gray-900"},or={class:"font-medium text-gray-900"},rr={class:"text-xs text-gray-500 mt-1"},ar={key:1,class:"text-center py-8 text-gray-500"},nr={class:"bg-white rounded-primea shadow-primea p-6"},ir={key:0,class:"overflow-x-auto"},lr={class:"w-full"},dr={class:"divide-y divide-gray-200"},ur={class:"px-4 py-3 text-sm text-gray-900 font-primea"},mr={class:"px-4 py-3 text-sm text-gray-900 font-primea"},pr={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},cr={class:"px-4 py-3 text-sm text-gray-500 font-primea"},gr={key:1,class:"text-center py-8 text-gray-500"},fr={class:"space-y-6"},br={class:"bg-white rounded-primea shadow-primea p-6"},vr={class:"space-y-3"},xr={key:0,class:"bg-white rounded-primea shadow-primea p-6"},yr=["src","alt"],_r={class:"bg-white rounded-primea shadow-primea p-6"},hr={class:"space-y-3"},wr={class:"flex items-center justify-between"},kr={class:"flex items-center justify-between"},$r={class:"flex items-center justify-between"},Cr={class:"text-sm text-gray-600 font-primea"},Er={__name:"EventDetail",setup(y){const s=xe(),S=me(),r=j(!0),V=j(null),c=j(null),i=j([]),E=async()=>{r.value=!0,V.value=null;try{let f=s.params.slug,n;if(/^\d+$/.test(f))n=(await H.getEvent(f)).data.data;else try{const P=await H.getEvents();if(n=(P.data.data.events.data||P.data.data.events).find(v=>v.slug===f),!n)throw new Error(`Événement avec le slug "${f}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${f}" non trouvé`)}if(!n)throw new Error("Événement introuvable");c.value={...n,venue_name:n.venue?.name||"Lieu non spécifié",venue_address:n.venue?.address||"",category_name:n.category?.name||"Non spécifiée",tickets_sold:n.tickets?.filter(P=>["issued","used"].includes(P.status)).length||0,total_revenue:n.tickets?.filter(P=>["issued","used"].includes(P.status)).reduce((P,h)=>P+(h.ticket_type?.price||0),0)||0,is_public:n.is_active||!1,sales_active:n.is_active||!1},n.ticket_types&&(c.value.ticket_types=n.ticket_types.map(P=>({...P,sold:n.tickets?.filter(h=>h.ticket_type_id===P.id&&["issued","used"].includes(h.status)).length||0}))),c.value.tickets_sold>0?i.value=[{id:1,customer_name:"Kofi Asante",ticket_quantity:2,total_amount:c.value.ticket_types?.[0]?.price*2||5e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:2,customer_name:"Aminata Traore",ticket_quantity:1,total_amount:c.value.ticket_types?.[0]?.price||25e3,created_at:new Date(Date.now()-1728e5).toISOString()}]:i.value=[]}catch(f){console.error("Erreur lors du chargement de l'événement:",f),f.response?.status===404?V.value=`Événement avec l'identifiant "${s.params.slug}" non trouvé`:f.message?V.value=f.message:V.value="Erreur lors du chargement de l'événement"}finally{r.value=!1}},o=()=>{S.push({name:"organizer-event-edit",params:{slug:c.value.slug}})},F=async()=>{if((await U.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await H.updateEvent(c.value.id,{status:"published",is_active:!0}),c.value.status="published",c.value.is_active=!0,U.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(n){console.error("Erreur publication:",n),U.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},T=async()=>{const f=`${window.location.origin}/events/${c.value.slug}`;try{await navigator.clipboard.writeText(f),U.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{U.fire({title:"Lien de l'événement",html:`<input type="text" value="${f}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},m=()=>{const f=`/events/${c.value.slug}`;window.open(f,"_blank")},I=()=>{U.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},W=f=>new Intl.NumberFormat("fr-FR").format(f),K=f=>new Date(f).toLocaleDateString("fr-FR"),z=f=>new Date(f).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=f=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[f]||f,R=f=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[f]||"bg-gray-100 text-gray-800",B=f=>f.capacity||f.available_quantity||f.max_quantity||f.quantity||"Illimité",$=f=>{const n=f.sold||0,P=f.capacity||f.available_quantity||f.max_quantity||f.quantity;return!P||P==="Illimité"||P<=0?0:Math.round(n/P*100)};return se(()=>{E()}),(f,n)=>{const P=ae("router-link");return d(),l("div",Ws,[e("div",Ks,[r.value?(d(),l("div",Js,[...n[1]||(n[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):V.value?(d(),l("div",Qs,[e("div",Zs,[x(C(be),{class:"w-16 h-16 mx-auto text-red-500"})]),n[3]||(n[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",Ys,u(V.value),1),x(P,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[...n[2]||(n[2]=[q(" Retour aux événements ",-1)])]),_:1})])):c.value?(d(),l("div",eo,[e("div",to,[e("div",so,[e("div",oo,[e("button",{onClick:n[0]||(n[0]=h=>f.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[x(C(ce),{class:"w-6 h-6"})]),e("div",null,[e("h1",ro,u(c.value.title),1),n[4]||(n[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",ao,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",R(c.value.status)])},u(b(c.value.status)),3),e("div",no,[e("button",{onClick:o,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[x(C(pe),{class:"w-4 h-4 inline mr-2"}),n[5]||(n[5]=q(" Modifier ",-1))]),c.value.status==="draft"?(d(),l("button",{key:0,onClick:F,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[x(C(ve),{class:"w-4 h-4 inline mr-2"}),n[6]||(n[6]=q(" Publier ",-1))])):M("",!0)])])])]),e("div",io,[e("div",lo,[e("div",uo,[e("div",mo,[x(C(ie),{class:"w-6 h-6 text-blue-600"})]),e("div",po,[n[7]||(n[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",co,u(c.value.tickets_sold||0),1)])])]),e("div",go,[e("div",fo,[e("div",bo,[x(C(ge),{class:"w-6 h-6 text-green-600"})]),e("div",vo,[n[8]||(n[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",xo,u(W(c.value.total_revenue||0))+" XAF",1)])])]),e("div",yo,[e("div",_o,[e("div",ho,[x(C(je),{class:"w-6 h-6 text-yellow-600"})]),e("div",wo,[n[9]||(n[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",ko,u(c.value.max_attendees||"Illimitée"),1)])])]),e("div",$o,[e("div",Co,[e("div",Eo,[x(C(de),{class:"w-6 h-6 text-purple-600"})]),e("div",jo,[n[10]||(n[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",Ao,u(K(c.value.event_date)),1)])])])]),e("div",So,[e("div",Po,[e("div",Vo,[n[15]||(n[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",zo,[e("div",null,[n[11]||(n[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",Do,u(c.value.title),1)]),e("div",null,[n[12]||(n[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",To,u(c.value.venue_name),1)]),e("div",null,[n[13]||(n[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",Bo,u(c.value.category_name||"Non spécifiée"),1)]),e("div",Mo,[n[14]||(n[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",Fo,u(c.value.description||"Aucune description"),1)])])]),e("div",Uo,[n[20]||(n[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),c.value.schedules&&c.value.schedules.length>0?(d(),l("div",qo,[(d(!0),l(N,null,L(c.value.schedules,h=>(d(),l("div",{key:h.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Io,[e("div",null,[n[16]||(n[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",Ro,u(z(h.starts_at)),1)]),e("div",null,[n[17]||(n[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",Oo,u(z(h.ends_at)),1)]),e("div",null,[n[18]||(n[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",No,u(h.door_time?z(h.door_time):"Non spécifiée"),1)])])]))),128))])):(d(),l("div",Xo,[x(C(de),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[19]||(n[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",Lo,[n[25]||(n[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),c.value.ticket_types&&c.value.ticket_types.length>0?(d(),l("div",Go,[(d(!0),l(N,null,L(c.value.ticket_types,h=>(d(),l("div",{key:h.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Ho,[e("div",Wo,[e("div",Ko,[e("h3",Jo,u(h.name),1),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},u(h.is_active?"Actif":"Inactif"),3)]),e("p",Qo,u(h.description||"Aucune description"),1)]),e("div",Zo,[n[21]||(n[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",Yo,u(W(h.price))+" XAF ",1)]),e("div",er,[n[23]||(n[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",tr,[e("span",sr,u(h.sold||0),1),n[22]||(n[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",or,u(B(h)),1)]),e("div",rr,u($(h))+"% vendus ",1)])])]))),128))])):(d(),l("div",ar,[x(C(ie),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[24]||(n[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",nr,[n[28]||(n[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Commandes récentes",-1)),i.value.length>0?(d(),l("div",ir,[e("table",lr,[n[26]||(n[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",dr,[(d(!0),l(N,null,L(i.value,h=>(d(),l("tr",{key:h.id},[e("td",ur,u(h.customer_name),1),e("td",mr,u(h.ticket_quantity),1),e("td",pr,u(W(h.total_amount))+" XAF",1),e("td",cr,u(K(h.created_at)),1)]))),128))])])])):(d(),l("div",gr,[x(C(Ae),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[27]||(n[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",fr,[e("div",br,[n[32]||(n[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",vr,[e("button",{onClick:T,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[x(C(Se),{class:"w-4 h-4 mr-2"}),n[29]||(n[29]=q(" Partager l'événement ",-1))]),e("button",{onClick:m,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[x(C(fe),{class:"w-4 h-4 mr-2"}),n[30]||(n[30]=q(" Voir la page publique ",-1))]),e("button",{onClick:I,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...n[31]||(n[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),q(" Exporter les données ",-1)])])])]),c.value.image_url?(d(),l("div",xr,[n[33]||(n[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("img",{src:c.value.image_url,alt:c.value.title,class:"w-full h-48 object-cover rounded-primea"},null,8,yr)])):M("",!0),e("div",_r,[n[37]||(n[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",hr,[e("div",wr,[n[34]||(n[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:X(["text-sm font-medium",c.value.is_public?"text-green-600":"text-red-600"])},u(c.value.is_public?"Oui":"Non"),3)]),e("div",kr,[n[35]||(n[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:X(["text-sm font-medium",c.value.sales_active?"text-green-600":"text-red-600"])},u(c.value.sales_active?"Oui":"Non"),3)]),e("div",$r,[n[36]||(n[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",Cr,u(K(c.value.created_at)),1)])])])])])])):M("",!0)])])}}},jr=oe(Er,[["__scopeId","data-v-46b527dc"]]),Ll=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),Ar={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Sr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Pr={key:0,class:"flex justify-center items-center h-64"},Vr={key:1,class:"text-center py-16"},zr={class:"mb-4"},Dr={class:"text-gray-600 mb-6"},Tr={key:2},Br={class:"mb-8"},Mr={class:"flex items-center justify-between"},Fr={class:"flex items-center space-x-4"},Ur={class:"text-gray-600 font-primea mt-1"},qr={class:"flex items-center space-x-3"},Ir={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Rr={class:"lg:col-span-2 space-y-6"},Or={class:"bg-white rounded-primea shadow-primea p-6"},Nr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xr={class:"md:col-span-2"},Lr={class:"md:col-span-2"},Gr=["value"],Hr={key:0},Wr=["value"],Kr={key:1,class:"space-y-2"},Jr={class:"md:col-span-2"},Qr={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},Zr={key:0,class:"mb-4"},Yr=["src"],ea={key:1},ta={class:"bg-white rounded-primea shadow-primea p-6"},sa={class:"flex items-center justify-between mb-6"},oa={class:"space-y-4"},ra=["onUpdate:modelValue"],aa=["onUpdate:modelValue"],na=["onUpdate:modelValue"],ia={class:"flex items-end"},la=["onClick"],da={class:"bg-white rounded-primea shadow-primea p-6"},ua={class:"flex items-center justify-between mb-6"},ma={key:0,class:"text-center py-8 text-gray-500"},pa={key:1,class:"space-y-4"},ca=["onUpdate:modelValue"],ga=["onUpdate:modelValue"],fa=["onUpdate:modelValue"],ba=["onUpdate:modelValue"],va={class:"flex items-center space-x-2"},xa={class:"flex items-center space-x-2"},ya=["onUpdate:modelValue"],_a=["onClick"],ha={class:"space-y-6"},wa={class:"bg-white rounded-primea shadow-primea p-6"},ka={class:"space-y-4"},$a={class:"flex items-center space-x-2"},Ca={class:"bg-white rounded-primea shadow-primea p-6"},Ea={class:"space-y-3"},ja=["disabled"],Aa={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Sa=["src","alt"],Pa={__name:"EventEdit",setup(y){const s=xe(),S=me(),r=j(!0),V=j(!1),c=j(null),i=j(null),E=j([]),o=j([]),F=j(!1),T=j(null),m=Q({title:"",description:"",category_id:"",venue_id:"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:"",image_preview:"",is_active:!1,schedules:[{starts_at:"",ends_at:"",door_time:""}],ticket_types:[]}),I=async()=>{try{const w=await H.getCategories();E.value=w.data.categories||[]}catch(w){console.error("Erreur chargement catégories:",w)}},W=async()=>{try{const w=await H.getVenues();o.value=w.data.venues||w.data.data||[]}catch(w){console.error("Erreur chargement lieux:",w)}},K=async()=>{r.value=!0,c.value=null;try{let w=s.params.slug,a;if(/^\d+$/.test(w))a=(await H.getEvent(w)).data.data;else try{const D=await H.getEvents();if(a=(D.data.data.events.data||D.data.data.events).find(Y=>Y.slug===w),!a)throw new Error(`Événement avec le slug "${w}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${w}" non trouvé`)}if(!a)throw new Error("Événement introuvable");i.value={...a,venue_name:a.venue?.name||a.venue_name||"",venue_address:a.venue?.address||a.venue_address||"",category_name:a.category?.name||a.category_name||""},Object.assign(m,{title:i.value.title||"",description:i.value.description||"",category_id:i.value.category_id||"",venue_id:i.value.venue_id||"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:i.value.image_url||"",image_preview:i.value.image_url||"",is_active:i.value.is_active??!1,schedules:i.value.schedules&&i.value.schedules.length>0?i.value.schedules.map(D=>({starts_at:D.starts_at?new Date(D.starts_at).toISOString().slice(0,16):"",ends_at:D.ends_at?new Date(D.ends_at).toISOString().slice(0,16):"",door_time:D.door_time?new Date(D.door_time).toISOString().slice(0,16):""})):[{starts_at:"",ends_at:"",door_time:""}],ticket_types:(i.value.ticket_types||[]).map(D=>({id:D.id,name:D.name||"",description:D.description||"",price:D.price||0,capacity:D.capacity||D.available_quantity||D.max_quantity||D.quantity||0,is_active:D.is_active??D.status==="active"}))})}catch(w){console.error("Erreur lors du chargement de l'événement:",w),w.response?.status===404?c.value=`Événement avec l'identifiant "${s.params.slug}" non trouvé`:w.message?c.value=w.message:c.value="Erreur lors du chargement de l'événement"}finally{r.value=!1}},z=async()=>{V.value=!0;try{if(!i.value)throw new Error("Aucun événement à mettre à jour");const w={title:m.title,description:m.description,category_id:m.category_id,venue_id:m.venue_id||null,new_venue_name:m.venue_id==="new"?m.new_venue_name:null,new_venue_city:m.venue_id==="new"?m.new_venue_city:null,new_venue_address:m.venue_id==="new"?m.new_venue_address:null,image_url:m.image_url,is_active:m.is_active,schedules:m.schedules,ticket_types:m.ticket_types.map(a=>({id:a.id||null,name:a.name,description:a.description,price:a.price,capacity:a.capacity,is_active:a.is_active}))};await H.updateEvent(i.value.id,w),await U.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),S.push({name:"organizer-event-detail",params:{slug:i.value.slug}})}catch(w){console.error("Erreur lors de la mise à jour:",w),await U.fire({title:"Erreur",text:w.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{V.value=!1}},b=async()=>{if((await U.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await H.updateEvent(i.value.id,{status:"published",is_active:!0}),i.value.status="published",i.value.is_active=!0,await U.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(a){console.error("Erreur publication:",a),await U.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},R=()=>{m.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},B=async w=>{(await U.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&m.ticket_types.splice(w,1)},$=()=>{m.schedules.push({starts_at:"",ends_at:"",door_time:""})},f=w=>{m.schedules.length>1&&m.schedules.splice(w,1)},n=()=>{m.venue_id==="new"&&(F.value=!0)},P=()=>{F.value=!1,m.venue_id="",m.new_venue_name="",m.new_venue_city="",m.new_venue_address=""},h=w=>{const a=w.target.files[0];if(a){const D=new FileReader;D.onload=k=>{m.image_preview=k.target.result},D.readAsDataURL(a)}},v=()=>{m.image_url&&(m.image_preview=m.image_url)},t=()=>{m.image_url="",m.image_preview="",T.value&&(T.value.value="")},p=w=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[w]||w,g=w=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[w]||"bg-gray-100 text-gray-800";return se(async()=>{await Promise.all([I(),W(),K()])}),(w,a)=>{const D=ae("router-link");return d(),l("div",Ar,[e("div",Sr,[r.value?(d(),l("div",Pr,[...a[11]||(a[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):c.value?(d(),l("div",Vr,[e("div",zr,[x(C(be),{class:"w-16 h-16 mx-auto text-red-500"})]),a[13]||(a[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",Dr,u(c.value),1),x(D,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[...a[12]||(a[12]=[q(" Retour aux événements ",-1)])]),_:1})])):i.value?(d(),l("div",Tr,[e("div",Br,[e("div",Mr,[e("div",Fr,[e("button",{onClick:a[0]||(a[0]=k=>w.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[x(C(ce),{class:"w-6 h-6"})]),e("div",null,[a[14]||(a[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",Ur,u(i.value.title),1)])]),e("div",qr,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",g(i.value.status)])},u(p(i.value.status)),3)])])]),e("form",{onSubmit:ee(z,["prevent"]),class:"space-y-8"},[e("div",Ir,[e("div",Rr,[e("div",Or,[a[24]||(a[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Nr,[e("div",Xr,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement *",-1)),_(e("input",{"onUpdate:modelValue":a[1]||(a[1]=k=>m.title=k),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[A,m.title]])]),e("div",Lr,[a[16]||(a[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=k=>m.description=k),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[A,m.description]])]),e("div",null,[a[18]||(a[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),_(e("select",{"onUpdate:modelValue":a[3]||(a[3]=k=>m.category_id=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[17]||(a[17]=e("option",{value:""},"Sélectionner une catégorie",-1)),(d(!0),l(N,null,L(E.value,k=>(d(),l("option",{key:k.id,value:k.id},u(k.name),9,Gr))),128))],512),[[re,m.category_id]])]),e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),F.value?M("",!0):(d(),l("div",Hr,[_(e("select",{"onUpdate:modelValue":a[4]||(a[4]=k=>m.venue_id=k),onChange:n,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[19]||(a[19]=e("option",{value:""},"Sélectionner un lieu",-1)),(d(!0),l(N,null,L(o.value,k=>(d(),l("option",{key:k.id,value:k.id},u(k.name)+" - "+u(k.city),9,Wr))),128)),a[20]||(a[20]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[re,m.venue_id]])])),F.value||m.venue_id==="new"?(d(),l("div",Kr,[_(e("input",{"onUpdate:modelValue":a[5]||(a[5]=k=>m.new_venue_name=k),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[A,m.new_venue_name]]),_(e("input",{"onUpdate:modelValue":a[6]||(a[6]=k=>m.new_venue_city=k),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[A,m.new_venue_city]]),_(e("input",{"onUpdate:modelValue":a[7]||(a[7]=k=>m.new_venue_address=k),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[A,m.new_venue_address]]),e("button",{type:"button",onClick:P,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):M("",!0)]),e("div",Jr,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",Qr,[m.image_preview?(d(),l("div",Zr,[e("img",{src:m.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,Yr),e("button",{type:"button",onClick:t,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(d(),l("div",ea,[e("input",{ref_key:"imageInput",ref:T,type:"file",accept:"image/*",onChange:h,class:"hidden"},null,544),e("button",{type:"button",onClick:a[8]||(a[8]=k=>w.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),a[22]||(a[22]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),_(e("input",{"onUpdate:modelValue":a[9]||(a[9]=k=>m.image_url=k),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:v},null,544),[[A,m.image_url]])]))])])])]),e("div",ta,[e("div",sa,[a[26]||(a[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:$,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[x(C(te),{class:"w-4 h-4 inline mr-2"}),a[25]||(a[25]=q(" Ajouter une séance ",-1))])]),e("div",oa,[(d(!0),l(N,null,L(m.schedules,(k,Y)=>(d(),l("div",{key:Y,class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),_(e("input",{"onUpdate:modelValue":G=>k.starts_at=G,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ra),[[A,k.starts_at]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),_(e("input",{"onUpdate:modelValue":G=>k.ends_at=G,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,aa),[[A,k.ends_at]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Ouverture des portes",-1)),_(e("input",{"onUpdate:modelValue":G=>k.door_time=G,type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,na),[[A,k.door_time]])]),e("div",ia,[m.schedules.length>1?(d(),l("button",{key:0,type:"button",onClick:G=>f(Y),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[x(C(ue),{class:"w-4 h-4"})],8,la)):M("",!0)])]))),128))])]),e("div",da,[e("div",ua,[a[31]||(a[31]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:R,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[x(C(te),{class:"w-4 h-4 inline mr-2"}),a[30]||(a[30]=q(" Ajouter un type ",-1))])]),m.ticket_types.length===0?(d(),l("div",ma,[x(C(ie),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),a[32]||(a[32]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),a[33]||(a[33]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(d(),l("div",pa,[(d(!0),l(N,null,L(m.ticket_types,(k,Y)=>(d(),l("div",{key:Y,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[34]||(a[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),_(e("input",{"onUpdate:modelValue":G=>k.name=G,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,ca),[[A,k.name]])]),e("div",null,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),_(e("input",{"onUpdate:modelValue":G=>k.price=G,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,ga),[[A,k.price,void 0,{number:!0}]])]),e("div",null,[a[36]||(a[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),_(e("input",{"onUpdate:modelValue":G=>k.capacity=G,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,fa),[[A,k.capacity,void 0,{number:!0}]])]),e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":G=>k.description=G,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,ba),[[A,k.description]])]),e("div",va,[e("label",xa,[_(e("input",{"onUpdate:modelValue":G=>k.is_active=G,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,ya),[[le,k.is_active]]),a[38]||(a[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))]),e("button",{type:"button",onClick:G=>B(Y),class:"text-red-600 hover:text-red-800 p-1"},[x(C(ue),{class:"w-4 h-4"})],8,_a)])]))),128))]))])]),e("div",ha,[e("div",wa,[a[41]||(a[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",ka,[e("div",null,[e("label",$a,[_(e("input",{"onUpdate:modelValue":a[10]||(a[10]=k=>m.is_active=k),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[le,m.is_active]]),a[39]||(a[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement actif",-1))]),a[40]||(a[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Publier l'événement et activer les ventes",-1))])])]),e("div",Ca,[a[44]||(a[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Ea,[e("button",{type:"submit",disabled:V.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},u(V.value?"Enregistrement...":"Enregistrer les modifications"),9,ja),x(D,{to:{name:"organizer-event-detail",params:{slug:i.value?.slug||C(s).params.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:J(()=>[...a[42]||(a[42]=[q(" Annuler les modifications ",-1)])]),_:1},8,["to"]),i.value&&!i.value.is_active?(d(),l("button",{key:0,type:"button",onClick:b,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[x(C(ve),{class:"w-4 h-4 inline mr-2"}),a[43]||(a[43]=q(" Publier l'événement ",-1))])):M("",!0)])]),i.value&&i.value.image_url?(d(),l("div",Aa,[a[45]||(a[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image actuelle",-1)),e("img",{src:i.value.image_url,alt:i.value.title,class:"w-full h-48 object-cover rounded-primea"},null,8,Sa)])):M("",!0)])])],32)])):M("",!0)])])}}},Va=oe(Pa,[["__scopeId","data-v-dfa9d9e1"]]),Gl=Object.freeze(Object.defineProperty({__proto__:null,default:Va},Symbol.toStringTag,{value:"Module"})),za={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Da={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Ta={class:"mb-8"},Ba={class:"flex items-center justify-between"},Ma={class:"flex items-center space-x-4"},Fa={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ua={class:"lg:col-span-2 space-y-6"},qa={class:"bg-white rounded-primea shadow-primea p-6"},Ia={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ra={class:"md:col-span-2"},Oa={class:"md:col-span-2"},Na=["value"],Xa={key:0},La=["value"],Ga={key:1,class:"space-y-2"},Ha={class:"md:col-span-2"},Wa={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},Ka={key:0,class:"mb-4"},Ja=["src"],Qa={key:1},Za={class:"bg-white rounded-primea shadow-primea p-6"},Ya={class:"flex items-center justify-between mb-6"},en={class:"space-y-4"},tn=["onUpdate:modelValue"],sn=["onUpdate:modelValue"],on={class:"flex items-end"},rn=["onClick"],an={class:"bg-white rounded-primea shadow-primea p-6"},nn={class:"flex items-center justify-between mb-6"},ln={key:0,class:"text-center py-8 text-gray-500"},dn={key:1,class:"space-y-4"},un=["onUpdate:modelValue"],mn=["onUpdate:modelValue"],pn=["onUpdate:modelValue"],cn=["onUpdate:modelValue"],gn={class:"flex items-end"},fn=["onClick"],bn={class:"space-y-6"},vn={class:"bg-white rounded-primea shadow-primea p-6"},xn={class:"space-y-4"},yn={class:"flex items-center space-x-2"},_n={class:"flex items-center space-x-2"},hn={class:"bg-white rounded-primea shadow-primea p-6"},wn={class:"space-y-3"},kn=["disabled"],$n={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Cn=["src","alt"],En={class:"bg-white rounded-primea shadow-primea p-6"},jn={class:"space-y-2 text-sm"},An={class:"flex justify-between"},Sn={class:"font-medium font-primea"},Pn={class:"flex justify-between"},Vn={class:"font-medium font-primea"},zn={key:0,class:"flex justify-between"},Dn={class:"font-medium font-primea"},Tn={key:1,class:"flex justify-between"},Bn={class:"font-medium font-primea"},Mn={__name:"EventCreate",setup(y){const s=me(),S=j(!1),r=j([]),V=j([]),c=j(!1),i=j(!1),E=j(null),o=Q({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),F=Z(()=>o.ticket_types.reduce((v,t)=>v+(parseInt(t.capacity)||0),0)),T=Z(()=>{if(o.ticket_types.length===0)return 0;const v=o.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return v.length>0?Math.min(...v):0}),m=Z(()=>{if(o.ticket_types.length===0)return 0;const v=o.ticket_types.map(t=>parseInt(t.price)||0);return v.length>0?Math.max(...v):0}),I=()=>{o.ticket_types.push({name:"",description:"",price:"",capacity:""})},W=()=>{o.schedules.push({starts_at:"",ends_at:""})},K=v=>{o.schedules.length>1&&o.schedules.splice(v,1)},z=()=>{o.venue_id==="new"?i.value=!0:i.value=!1},b=()=>{i.value=!1,o.venue_id="",o.new_venue_name="",o.new_venue_city="",o.new_venue_address=""},R=v=>{const t=v.target.files[0];if(t){o.image_file=t;const p=new FileReader;p.onload=g=>{o.image_preview=g.target.result,o.image_url=""},p.readAsDataURL(t)}},B=()=>{o.image_url&&(o.image_preview=o.image_url,o.image_file=null)},$=()=>{o.image_url="",o.image_preview="",o.image_file=null,E.value&&(E.value.value="")},f=v=>{o.ticket_types.length>1&&o.ticket_types.splice(v,1)},n=async()=>{if(o.ticket_types.length===0){U.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!o.title){U.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}S.value=!0;try{if(!o.category_id){U.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!o.venue_id&&!o.new_venue_name){U.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(o.schedules.some(p=>!p.starts_at||!p.ends_at)){U.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}const v={title:o.title,description:o.description,category_id:o.category_id,venue_id:o.venue_id!=="new"?o.venue_id:null,venue_name:o.venue_id==="new"?o.new_venue_name:null,venue_city:o.venue_id==="new"?o.new_venue_city:"Abidjan",venue_address:o.venue_id==="new"?o.new_venue_address:null,image_url:o.image_url,is_active:o.status==="published",schedules:o.schedules.map(p=>({starts_at:p.starts_at,ends_at:p.ends_at,door_time:new Date(new Date(p.starts_at).getTime()-1800*1e3).toISOString()})),ticket_types:o.ticket_types.map(p=>({name:p.name,description:p.description,price:parseFloat(p.price),capacity:parseInt(p.capacity),is_active:!0}))},t=await H.createEvent(v);if(t.data.success)U.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{s.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(v){console.error("Erreur création événement:",v),U.fire({title:"Erreur",text:v.response?.data?.message||"Erreur lors de la création de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{S.value=!1}},P=async()=>{c.value=!0;try{const v=await H.getCategories();v.data.success&&(r.value=v.data.categories||v.data.data);const t=await H.getVenues();t.data.success&&(V.value=t.data.venues||t.data.data)}catch(v){console.error("Erreur chargement données initiales:",v)}finally{c.value=!1}},h=v=>new Intl.NumberFormat("fr-FR").format(v);return se(()=>{P()}),(v,t)=>{const p=ae("router-link");return d(),l("div",za,[e("div",Da,[e("div",Ta,[e("div",Ba,[e("div",Ma,[e("button",{onClick:t[0]||(t[0]=g=>v.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[x(C(ce),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:ee(n,["prevent"]),class:"space-y-8"},[e("div",Fa,[e("div",Ua,[e("div",qa,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Ia,[e("div",Ra,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=g=>o.title=g),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[A,o.title]])]),e("div",Oa,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=g=>o.description=g),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[A,o.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>o.category_id=g),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(d(!0),l(N,null,L(r.value,g=>(d(),l("option",{key:g.id,value:g.id},u(g.name),9,Na))),128))],512),[[re,o.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),i.value?M("",!0):(d(),l("div",Xa,[_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=g=>o.venue_id=g),onChange:z,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(d(!0),l(N,null,L(V.value,g=>(d(),l("option",{key:g.id,value:g.id},u(g.name)+" - "+u(g.city),9,La))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[re,o.venue_id]])])),i.value||o.venue_id==="new"?(d(),l("div",Ga,[_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=g=>o.new_venue_name=g),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[A,o.new_venue_name]]),_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=g=>o.new_venue_city=g),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[A,o.new_venue_city]]),_(e("input",{"onUpdate:modelValue":t[7]||(t[7]=g=>o.new_venue_address=g),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[A,o.new_venue_address]]),e("button",{type:"button",onClick:b,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):M("",!0)]),e("div",Ha,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",Wa,[o.image_preview?(d(),l("div",Ka,[e("img",{src:o.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,Ja),e("button",{type:"button",onClick:$,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(d(),l("div",Qa,[e("input",{ref_key:"imageInput",ref:E,type:"file",accept:"image/*",onChange:R,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=g=>v.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),_(e("input",{"onUpdate:modelValue":t[9]||(t[9]=g=>o.image_url=g),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:B},null,544),[[A,o.image_url]])]))])])])]),e("div",Za,[e("div",Ya,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:W,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[x(C(te),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=q(" Ajouter une séance ",-1))])]),e("div",en,[(d(!0),l(N,null,L(o.schedules,(g,w)=>(d(),l("div",{key:w,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),_(e("input",{"onUpdate:modelValue":a=>g.starts_at=a,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,tn),[[A,g.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),_(e("input",{"onUpdate:modelValue":a=>g.ends_at=a,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,sn),[[A,g.ends_at]])]),e("div",on,[o.schedules.length>1?(d(),l("button",{key:0,type:"button",onClick:a=>K(w),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[x(C(ue),{class:"w-4 h-4"})],8,rn)):M("",!0)])]))),128))])]),e("div",an,[e("div",nn,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:I,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[x(C(te),{class:"w-4 h-4 inline mr-2"}),t[28]||(t[28]=q(" Ajouter un type ",-1))])]),o.ticket_types.length===0?(d(),l("div",ln,[x(C(ie),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[30]||(t[30]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[31]||(t[31]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(d(),l("div",dn,[(d(!0),l(N,null,L(o.ticket_types,(g,w)=>(d(),l("div",{key:w,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),_(e("input",{"onUpdate:modelValue":a=>g.name=a,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,un),[[A,g.name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),_(e("input",{"onUpdate:modelValue":a=>g.price=a,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,mn),[[A,g.price,void 0,{number:!0}]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),_(e("input",{"onUpdate:modelValue":a=>g.capacity=a,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,pn),[[A,g.capacity,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),_(e("input",{"onUpdate:modelValue":a=>g.description=a,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,cn),[[A,g.description]])]),e("div",gn,[o.ticket_types.length>1?(d(),l("button",{key:0,type:"button",onClick:a=>f(w),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[x(C(ue),{class:"w-4 h-4"})],8,fn)):M("",!0)])]))),128))]))])]),e("div",bn,[e("div",vn,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",xn,[e("div",null,[e("label",yn,[_(e("input",{"onUpdate:modelValue":t[10]||(t[10]=g=>o.is_public=g),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[le,o.is_public]]),t[36]||(t[36]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[37]||(t[37]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",_n,[_(e("input",{"onUpdate:modelValue":t[11]||(t[11]=g=>o.sales_active=g),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[le,o.sales_active]]),t[38]||(t[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[39]||(t[39]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),_(e("select",{"onUpdate:modelValue":t[12]||(t[12]=g=>o.status=g),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[40]||(t[40]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[re,o.status]]),t[42]||(t[42]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",hn,[t[45]||(t[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",wn,[e("button",{type:"submit",disabled:S.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},u(S.value?"Création en cours...":"Créer l'événement"),9,kn),x(p,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:J(()=>[...t[44]||(t[44]=[q(" Annuler ",-1)])]),_:1})])]),o.image_url||o.image_preview?(d(),l("div",$n,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:o.image_preview||o.image_url,alt:o.title,class:"w-full h-48 object-cover rounded-primea"},null,8,Cn)])):M("",!0),e("div",En,[t[51]||(t[51]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",jn,[e("div",An,[t[47]||(t[47]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",Sn,u(o.ticket_types.length),1)]),e("div",Pn,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",Vn,u(F.value||"Illimitée"),1)]),T.value>0?(d(),l("div",zn,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",Dn,u(h(T.value))+" XAF",1)])):M("",!0),m.value>0?(d(),l("div",Tn,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",Bn,u(h(m.value))+" XAF",1)])):M("",!0)])])])])],32)])])}}},Fn=oe(Mn,[["__scopeId","data-v-dbd61bf4"]]),Hl=Object.freeze(Object.defineProperty({__proto__:null,default:Fn},Symbol.toStringTag,{value:"Module"})),Un={name:"BalanceManagement",setup(){const y=j(!1),s=j(!1),S=j(!1),r=j(!1),V=j(!1),c=j([]),i=j([]),E=Q({pending_payouts:0,total_payouts:0}),o=Q({gateway:"",available_balance:0,amount:"",phone_number:""}),F=Q({gateway:"",auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),T=Z(()=>c.value.reduce((p,g)=>p+g.balance,0)),m=async()=>{y.value=!0;try{const g=await(await fetch("/api/v1/organizer/balances",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();g.success&&(c.value=g.data.balances)}catch(p){console.error("Erreur chargement soldes:",p)}finally{y.value=!1}},I=async()=>{try{const g=await(await fetch("/api/v1/organizer/payouts?limit=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();g.success&&(i.value=g.data.payouts.data||g.data.payouts,E.pending_payouts=i.value.filter(w=>["pending","processing"].includes(w.status)).length,E.total_payouts=i.value.reduce((w,a)=>w+a.amount,0))}catch(p){console.error("Erreur chargement payouts récents:",p)}},W=p=>{Object.assign(o,{gateway:p.gateway,available_balance:p.balance,amount:"",phone_number:p.payout_phone_number||""}),r.value=!0},K=async()=>{s.value=!0;try{const g=await(await fetch("/api/v1/organizer/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).json();g.success?(alert("Demande de payout envoyée avec succès"),r.value=!1,m(),I()):alert(g.message||"Erreur lors de la demande")}catch(p){console.error("Erreur demande payout:",p),alert("Erreur technique")}finally{s.value=!1}},z=p=>{Object.assign(F,{gateway:p.gateway,auto_payout_enabled:p.auto_payout_enabled,auto_payout_threshold:p.auto_payout_threshold,payout_phone_number:p.payout_phone_number||""}),V.value=!0},b=async()=>{S.value=!0;try{const g=await(await fetch("/api/v1/organizer/auto-payout-config",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(F)})).json();g.success?(alert("Configuration mise à jour avec succès"),V.value=!1,m()):alert(g.message||"Erreur lors de la mise à jour")}catch(p){console.error("Erreur sauvegarde config:",p),alert("Erreur technique")}finally{S.value=!1}},R=p=>i.value.filter(g=>g.gateway===p).slice(0,3),B=p=>{alert(`Détails du payout #${p.reference}
Montant: ${$(p.amount)} XAF
Statut: ${v(p.status)}`)},$=p=>new Intl.NumberFormat("fr-FR").format(p),f=p=>new Date(p).toLocaleDateString("fr-FR"),n=p=>new Date(p).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=p=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[p]||p,h=p=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[p]||"bg-gray-100 text-gray-800",v=p=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[p]||p,t=p=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[p]||"bg-gray-100 text-gray-800";return se(()=>{m(),I()}),{loading:y,requestingPayout:s,savingConfig:S,showPayoutModal:r,showConfigModal:V,balances:c,recentPayouts:i,stats:E,payoutForm:o,configForm:F,totalBalance:T,loadBalances:m,loadRecentPayouts:I,requestPayout:W,submitPayoutRequest:K,configureAutoPayout:z,saveAutoPayoutConfig:b,getRecentPayouts:R,viewPayoutDetails:B,formatAmount:$,formatDate:f,formatDateTime:n,getGatewayName:P,getGatewayBadgeClass:h,getPayoutStatusName:v,getPayoutStatusClass:t}}},qn={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},In={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Rn={class:"mb-8"},On={class:"flex items-center justify-between"},Nn={key:0,class:"flex justify-center items-center h-64"},Xn={key:1},Ln={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Gn={class:"bg-white rounded-lg shadow p-6"},Hn={class:"flex items-center"},Wn={class:"ml-4"},Kn={class:"text-2xl font-bold text-green-600"},Jn={class:"bg-white rounded-lg shadow p-6"},Qn={class:"flex items-center"},Zn={class:"ml-4"},Yn={class:"text-2xl font-bold text-yellow-600"},ei={class:"bg-white rounded-lg shadow p-6"},ti={class:"flex items-center"},si={class:"ml-4"},oi={class:"text-2xl font-bold text-blue-600"},ri={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},ai={class:"flex items-center justify-between mb-4"},ni={class:"flex items-center"},ii={class:"text-lg font-semibold text-gray-900"},li={class:"text-right"},di={class:"text-2xl font-bold text-green-600"},ui={class:"mb-4 p-3 bg-gray-50 rounded-lg"},mi={class:"flex items-center justify-between mb-2"},pi={key:0,class:"text-sm text-gray-600"},ci={key:0},gi={class:"space-y-3"},fi=["onClick","disabled"],bi=["onClick"],vi={class:"mt-6 pt-6 border-t"},xi={key:0,class:"text-sm text-gray-500"},yi={key:1,class:"space-y-2"},_i={class:"font-medium"},hi={class:"text-gray-500 ml-2"},wi={class:"bg-white rounded-lg shadow"},ki={class:"p-6 border-b"},$i={class:"flex justify-between items-center"},Ci={key:0,class:"p-8 text-center text-gray-500"},Ei={key:1,class:"overflow-x-auto"},ji={class:"w-full"},Ai={class:"divide-y divide-gray-200"},Si={class:"px-6 py-4 text-sm font-mono text-gray-900"},Pi={class:"px-6 py-4 text-sm"},Vi={class:"px-6 py-4 text-sm font-medium text-gray-900"},zi={class:"px-6 py-4 text-sm"},Di={class:"px-6 py-4 text-sm"},Ti={class:"px-6 py-4 text-sm text-gray-500"},Bi={class:"px-6 py-4 text-sm"},Mi=["onClick"],Fi={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ui={class:"bg-white rounded-lg p-6 w-full max-w-md"},qi={class:"space-y-4"},Ii=["value"],Ri=["value"],Oi=["max"],Ni={class:"flex justify-end space-x-3 mt-6"},Xi=["disabled"],Li={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Gi={class:"bg-white rounded-lg p-6 w-full max-w-md"},Hi={class:"text-lg font-bold mb-4"},Wi={class:"space-y-4"},Ki={class:"flex items-center space-x-2"},Ji={key:0},Qi={class:"flex justify-end space-x-3 mt-6"},Zi=["disabled"];function Yi(y,s,S,r,V,c){return d(),l("div",qn,[e("div",In,[e("div",Rn,[e("div",On,[s[12]||(s[12]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Soldes & Payouts"),e("p",{class:"text-gray-600"},"Consultez vos soldes et gérez vos demandes de payout")],-1)),e("button",{onClick:s[0]||(s[0]=i=>y.$router.push("/organizer/payouts/history")),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...s[11]||(s[11]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),q(" Historique Payouts ",-1)])])])]),r.loading?(d(),l("div",Nn,[...s[13]||(s[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(d(),l("div",Xn,[e("div",Ln,[e("div",Gn,[e("div",Hn,[s[15]||(s[15]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Wn,[s[14]||(s[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",Kn,u(r.formatAmount(r.totalBalance))+" XAF",1)])])]),e("div",Jn,[e("div",Qn,[s[17]||(s[17]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Zn,[s[16]||(s[16]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",Yn,u(r.stats.pending_payouts||0),1)])])]),e("div",ei,[e("div",ti,[s[19]||(s[19]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",si,[s[18]||(s[18]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",oi,u(r.formatAmount(r.stats.total_payouts||0))+" XAF",1)])])])]),e("div",ri,[(d(!0),l(N,null,L(r.balances,i=>(d(),l("div",{key:i.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",ai,[e("div",ni,[e("div",{class:X(["p-2 rounded-lg mr-4",r.getGatewayBadgeClass(i.gateway)])},[...s[20]||(s[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",ii,u(r.getGatewayName(i.gateway)),1),s[21]||(s[21]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",li,[e("p",di,u(r.formatAmount(i.balance))+" XAF",1)])]),e("div",ui,[e("div",mi,[s[22]||(s[22]=e("span",{class:"text-sm font-medium text-gray-700"},"Payout Automatique",-1)),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",i.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},u(i.auto_payout_enabled?"Activé":"Désactivé"),3)]),i.auto_payout_enabled?(d(),l("div",pi,[e("p",null,"Seuil: "+u(r.formatAmount(i.auto_payout_threshold))+" XAF",1),i.payout_phone_number?(d(),l("p",ci,"Téléphone: "+u(i.payout_phone_number),1)):M("",!0)])):M("",!0)]),e("div",gi,[e("button",{onClick:E=>r.requestPayout(i),disabled:i.balance<1e3,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[s[23]||(s[23]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),q(" "+u(i.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Payout"),1)],8,fi),e("button",{onClick:E=>r.configureAutoPayout(i),class:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700"},[...s[24]||(s[24]=[e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),q(" Configurer Auto-Payout ",-1)])],8,bi)]),e("div",vi,[s[25]||(s[25]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),r.getRecentPayouts(i.gateway).length===0?(d(),l("div",xi," Aucune transaction récente ")):(d(),l("div",yi,[(d(!0),l(N,null,L(r.getRecentPayouts(i.gateway),E=>(d(),l("div",{key:E.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",_i,u(r.formatAmount(E.amount))+" XAF",1),e("span",hi,u(r.formatDate(E.created_at)),1)]),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.getPayoutStatusClass(E.status)])},u(r.getPayoutStatusName(E.status)),3)]))),128))]))])]))),128))]),e("div",wi,[e("div",ki,[e("div",$i,[s[26]||(s[26]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:s[1]||(s[1]=i=>y.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),r.recentPayouts.length===0?(d(),l("div",Ci," Aucun payout récent ")):(d(),l("div",Ei,[e("table",ji,[s[27]||(s[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ai,[(d(!0),l(N,null,L(r.recentPayouts,i=>(d(),l("tr",{key:i.id},[e("td",Si,"#"+u(i.reference),1),e("td",Pi,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.getGatewayBadgeClass(i.gateway)])},u(r.getGatewayName(i.gateway)),3)]),e("td",Vi,u(r.formatAmount(i.amount))+" XAF",1),e("td",zi,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.getPayoutStatusClass(i.status)])},u(r.getPayoutStatusName(i.status)),3)]),e("td",Di,[e("span",{class:X(["inline-flex px-2 py-1 text-xs rounded-full",i.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},u(i.is_automatic?"Auto":"Manuel"),3)]),e("td",Ti,u(r.formatDateTime(i.created_at)),1),e("td",Bi,[e("button",{onClick:E=>r.viewPayoutDetails(i),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Mi)])]))),128))])])]))])])),r.showPayoutModal?(d(),l("div",Fi,[e("div",Ui,[s[34]||(s[34]=e("h3",{class:"text-lg font-bold mb-4"},"Demande de Payout",-1)),e("form",{onSubmit:s[5]||(s[5]=ee((...i)=>r.submitPayoutRequest&&r.submitPayoutRequest(...i),["prevent"]))},[e("div",qi,[e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:r.getGatewayName(r.payoutForm.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ii)]),e("div",null,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:r.formatAmount(r.payoutForm.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ri)]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),_(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>r.payoutForm.amount=i),type:"number",min:1e3,max:r.payoutForm.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Oi),[[A,r.payoutForm.amount,void 0,{number:!0}]]),s[31]||(s[31]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),_(e("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>r.payoutForm.phone_number=i),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,r.payoutForm.phone_number]]),s[33]||(s[33]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",Ni,[e("button",{type:"button",onClick:s[4]||(s[4]=i=>r.showPayoutModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:r.requestingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},u(r.requestingPayout?"Demande en cours...":"Demander le Payout"),9,Xi)])],32)])])):M("",!0),r.showConfigModal?(d(),l("div",Li,[e("div",Gi,[e("h3",Hi,"Configuration Auto-Payout - "+u(r.getGatewayName(r.configForm.gateway)),1),e("form",{onSubmit:s[10]||(s[10]=ee((...i)=>r.saveAutoPayoutConfig&&r.saveAutoPayoutConfig(...i),["prevent"]))},[e("div",Wi,[e("div",null,[e("label",Ki,[_(e("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=i=>r.configForm.auto_payout_enabled=i),class:"rounded border-gray-300"},null,512),[[le,r.configForm.auto_payout_enabled]]),s[35]||(s[35]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),r.configForm.auto_payout_enabled?(d(),l("div",Ji,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),_(e("input",{"onUpdate:modelValue":s[7]||(s[7]=i=>r.configForm.auto_payout_threshold=i),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,r.configForm.auto_payout_threshold,void 0,{number:!0}]]),s[37]||(s[37]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):M("",!0),e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),_(e("input",{"onUpdate:modelValue":s[8]||(s[8]=i=>r.configForm.payout_phone_number=i),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,r.configForm.payout_phone_number]]),s[39]||(s[39]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts automatiques",-1))])]),e("div",Qi,[e("button",{type:"button",onClick:s[9]||(s[9]=i=>r.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:r.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},u(r.savingConfig?"Enregistrement...":"Enregistrer"),9,Zi)])],32)])])):M("",!0)])])}const el=oe(Un,[["render",Yi],["__scopeId","data-v-e6c5fcd5"]]),Wl=Object.freeze(Object.defineProperty({__proto__:null,default:el},Symbol.toStringTag,{value:"Module"})),tl={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},sl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ol={key:0,class:"flex justify-center items-center h-64"},rl={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},al={class:"bg-white rounded-primea shadow-primea p-6"},nl={class:"flex items-center justify-between mb-6"},il=["disabled"],ll=["disabled"],dl=["disabled"],ul={key:0,class:"flex space-x-3 pt-4"},ml=["disabled"],pl={class:"bg-white rounded-primea shadow-primea p-6"},cl={class:"flex items-center justify-between mb-6"},gl=["disabled"],fl=["disabled"],bl=["disabled"],vl=["disabled"],xl=["disabled"],yl={key:0,class:"flex space-x-3 pt-4"},_l=["disabled"],hl={class:"bg-white rounded-primea shadow-primea p-6"},wl=["disabled"],kl={class:"bg-white rounded-primea shadow-primea p-6"},$l={class:"space-y-4"},Cl={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},El={class:"flex items-center space-x-3"},jl={class:"text-xs text-green-600 font-primea"},Al={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},Sl={class:"flex items-center space-x-3"},Pl={class:"text-xs text-blue-600 font-primea"},Vl={class:"grid grid-cols-2 gap-4 pt-4"},zl={class:"text-center p-3 border rounded-primea"},Dl={class:"text-2xl font-bold text-primea-blue font-primea"},Tl={class:"text-center p-3 border rounded-primea"},Bl={class:"text-2xl font-bold text-primea-yellow font-primea"},Ml={__name:"OrganizerProfile",setup(y){ye();const s=j(!1),S=j(!1),r=j(!1),V=j(!1),c=j(!1),i=j(!1),E=j(null),o=j(null),F=j({events:0,tickets:0}),T=Q({name:"",email:"",phone:""}),m=Q({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),I=Q({current_password:"",password:"",password_confirmation:""}),W=Q({}),K=Q({}),z=()=>{S.value||Object.assign(W,T),S.value=!S.value},b=()=>{r.value||Object.assign(K,m),r.value=!r.value},R=()=>{Object.assign(T,W),S.value=!1},B=()=>{Object.assign(m,K),r.value=!1},$=async()=>{V.value=!0;try{console.log("Mise à jour des informations personnelles:",T),await new Promise(v=>setTimeout(v,1e3)),S.value=!1}catch(v){console.error("Erreur lors de la mise à jour:",v)}finally{V.value=!1}},f=async()=>{c.value=!0;try{console.log("Mise à jour de l'organisation:",m),await new Promise(v=>setTimeout(v,1e3)),r.value=!1}catch(v){console.error("Erreur lors de la mise à jour:",v)}finally{c.value=!1}},n=async()=>{if(I.password!==I.password_confirmation){alert("Les mots de passe ne correspondent pas");return}i.value=!0;try{console.log("Changement de mot de passe"),await new Promise(v=>setTimeout(v,1e3)),Object.assign(I,{current_password:"",password:"",password_confirmation:""})}catch(v){console.error("Erreur lors du changement de mot de passe:",v)}finally{i.value=!1}},P=v=>v?new Date(v).toLocaleDateString("fr-FR"):"Non disponible",h=async()=>{s.value=!0;try{E.value={name:"Marie Nzougou",email:"marie@example.com",phone:"+225 07 12 34 56 78",email_verified_at:"2024-01-15T10:30:00Z"},o.value={name:"Mon Organisation",description:"Organisation spécialisée dans l'événementiel",website_url:"https://monorganisation.com",contact_email:"contact@monorganisation.com",contact_phone:"+225 07 12 34 56 79",verified_at:"2024-01-20T14:00:00Z"},F.value={events:12,tickets:345},Object.assign(T,{name:E.value.name,email:E.value.email,phone:E.value.phone}),Object.assign(m,{name:o.value.name,description:o.value.description,website_url:o.value.website_url,contact_email:o.value.contact_email,contact_phone:o.value.contact_phone})}catch(v){console.error("Erreur lors du chargement du profil:",v)}finally{s.value=!1}};return se(()=>{h()}),(v,t)=>(d(),l("div",tl,[e("div",sl,[t[31]||(t[31]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),s.value?(d(),l("div",ol,[...t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(d(),l("div",rl,[e("div",al,[e("div",nl,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:z,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[x(C(pe),{class:"w-5 h-5"})])]),e("form",{onSubmit:ee($,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>T.name=p),type:"text",disabled:!S.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,il),[[A,T.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>T.email=p),type:"email",disabled:!S.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,ll),[[A,T.email]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),_(e("input",{"onUpdate:modelValue":t[2]||(t[2]=p=>T.phone=p),type:"tel",disabled:!S.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,dl),[[A,T.phone]])]),S.value?(d(),l("div",ul,[e("button",{type:"submit",disabled:V.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},u(V.value?"Enregistrement...":"Enregistrer"),9,ml),e("button",{type:"button",onClick:R,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):M("",!0)],32)]),e("div",pl,[e("div",cl,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:b,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[x(C(pe),{class:"w-5 h-5"})])]),e("form",{onSubmit:ee(f,["prevent"]),class:"space-y-4"},[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=p=>m.name=p),type:"text",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,gl),[[A,m.name]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=p=>m.description=p),disabled:!r.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,fl),[[A,m.description]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=p=>m.website_url=p),type:"url",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,bl),[[A,m.website_url]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=p=>m.contact_email=p),type:"email",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,vl),[[A,m.contact_email]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),_(e("input",{"onUpdate:modelValue":t[7]||(t[7]=p=>m.contact_phone=p),type:"tel",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,xl),[[A,m.contact_phone]])]),r.value?(d(),l("div",yl,[e("button",{type:"submit",disabled:c.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},u(c.value?"Enregistrement...":"Enregistrer"),9,_l),e("button",{type:"button",onClick:B,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):M("",!0)],32)]),e("div",hl,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:ee(n,["prevent"]),class:"space-y-4"},[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),_(e("input",{"onUpdate:modelValue":t[8]||(t[8]=p=>I.current_password=p),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[A,I.current_password]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),_(e("input",{"onUpdate:modelValue":t[9]||(t[9]=p=>I.password=p),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[A,I.password]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),_(e("input",{"onUpdate:modelValue":t[10]||(t[10]=p=>I.password_confirmation=p),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[A,I.password_confirmation]])]),e("button",{type:"submit",disabled:i.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},u(i.value?"Mise à jour...":"Changer le mot de passe"),9,wl)],32)]),e("div",kl,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",$l,[e("div",Cl,[e("div",El,[x(C(Pe),{class:"w-5 h-5 text-green-600"}),t[26]||(t[26]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",jl,u(P(E.value?.email_verified_at)),1)]),o.value?.verified_at?(d(),l("div",Al,[e("div",Sl,[x(C(Ve),{class:"w-5 h-5 text-blue-600"}),t[27]||(t[27]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",Pl,u(P(o.value.verified_at)),1)])):M("",!0),e("div",Vl,[e("div",zl,[e("p",Dl,u(F.value.events||0),1),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",Tl,[e("p",Bl,u(F.value.tickets||0),1),t[29]||(t[29]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])]))])]))}},Fl=oe(Ml,[["__scopeId","data-v-88f51db0"]]),Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"}));export{Wl as B,Xl as E,Nl as O,O as a,Ll as b,Gl as c,Hl as d,Kl as e,Ol as g,Rl as t};
