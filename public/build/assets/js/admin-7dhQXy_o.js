import{j as n,o as l,k as e,t as a,G as z,H as U,q as $,P as re,X as pe,b as u,Y as H,d as xe,Z as ae,n as b,p as T,D as d,E as j,F,W as ne,_ as Q,O as fe,Q as ie,$ as de,N as ce,a0 as me,i as ue,l as C,w as X,a as N,J as ye,a1 as ve,a2 as he}from"./vue-vendor-Bz5bDQPC.js";import{_ as ee,C as ge}from"./account-BAoWfoT7.js";const we={name:"AdminDashboard",setup(){const x=u(!1),t=H({total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,tickets_sold:0,failed_payments:0}),f=u([]),s=u([]),v=u([]),A=u([]),o=xe(()=>v.value.length===0?1:Math.max(...v.value.map(r=>r.amount))),i=async()=>{x.value=!0;try{const D=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();D.success&&(Object.assign(t,D.data.stats),f.value=D.data.recent_orders,s.value=D.data.recent_activity,v.value=D.data.revenue_data,A.value=D.data.top_events)}catch(r){console.error("Erreur chargement dashboard admin:",r)}finally{x.value=!1}},p=async()=>{try{const D=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(D.success){const Y=D.data.balances.reduce((O,W)=>O+W.amount,0);alert(`Solde SHAP total: ${h(Y)} XAF`)}}catch(r){console.error("Erreur vérification solde SHAP:",r)}},M=r=>{this.$router.push(`/admin/orders/${r.id}`)},h=r=>new Intl.NumberFormat("fr-FR").format(r),_=r=>new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),P=r=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[r]||r,g=r=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[r]||"bg-gray-100 text-gray-800",B=r=>({order:"bg-blue-100 text-blue-600",payment:"bg-green-100 text-green-600",payout:"bg-yellow-100 text-yellow-600",user:"bg-purple-100 text-purple-600"})[r]||"bg-gray-100 text-gray-600";return ae(()=>{i()}),{loading:x,stats:t,recentOrders:f,recentActivity:s,revenueData:v,topEvents:A,maxRevenue:o,loadDashboardData:i,checkShapBalance:p,viewOrder:M,formatAmount:h,formatDate:_,getOrderStatusName:P,getOrderStatusClass:g,getActivityIconClass:B}}},_e={class:"admin-dashboard p-6"},ke={key:0,class:"flex justify-center items-center h-64"},Ce={key:1},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},je={class:"flex items-center"},Ae={class:"text-left"},Me={class:"text-blue-200 text-sm"},Pe={class:"flex items-center"},Oe={class:"text-left"},ze={class:"text-green-200 text-sm"},Ue={class:"flex items-center"},De={class:"text-left"},Be={class:"text-purple-200 text-sm"},Ve={class:"flex items-center"},Ee={class:"text-left"},Fe={class:"text-yellow-200 text-sm"},Te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ie={class:"bg-white rounded-lg shadow p-6"},$e={class:"flex items-center"},Re={class:"ml-4"},Ne={class:"text-2xl font-bold text-gray-900"},Le={class:"bg-white rounded-lg shadow p-6"},qe={class:"flex items-center"},He={class:"ml-4"},Ge={class:"text-2xl font-bold text-green-600"},Xe={class:"bg-white rounded-lg shadow p-6"},Je={class:"flex items-center"},We={class:"ml-4"},Qe={class:"text-2xl font-bold text-yellow-600"},Ye={class:"bg-white rounded-lg shadow p-6"},Ze={class:"flex items-center"},Ke={class:"ml-4"},et={class:"text-2xl font-bold text-red-600"},tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},st={class:"lg:col-span-2"},ot={class:"bg-white rounded-lg shadow p-6"},at={class:"flex justify-between items-center mb-4"},nt={key:0,class:"text-center text-gray-500 py-8"},lt={key:1,class:"overflow-x-auto"},rt={class:"w-full"},it={class:"divide-y divide-gray-200"},dt={class:"px-4 py-4 text-sm font-medium text-blue-600"},ct=["onClick"],mt={class:"px-4 py-4 text-sm text-gray-900"},ut={class:"px-4 py-4 text-sm font-medium text-gray-900"},gt={class:"px-4 py-4 text-sm"},pt={class:"px-4 py-4 text-sm text-gray-500"},xt={class:"lg:col-span-1 space-y-6"},bt={class:"bg-white rounded-lg shadow p-6"},ft={class:"space-y-3"},yt={class:"flex justify-between items-center"},vt={class:"bg-white rounded-lg shadow p-6"},ht={class:"space-y-3"},wt={class:"flex-1"},_t={class:"text-sm text-gray-900"},kt={class:"text-xs text-gray-500"},Ct={class:"bg-white rounded-lg shadow p-6"},St={class:"space-y-3"},jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},At={class:"bg-white rounded-lg shadow p-6"},Mt={key:0,class:"text-center text-gray-500 py-8"},Pt={key:1,class:"space-y-3"},Ot={class:"text-sm text-gray-600"},zt={class:"flex items-center"},Ut={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},Dt={class:"text-sm font-medium"},Bt={class:"bg-white rounded-lg shadow p-6"},Vt={key:0,class:"text-center text-gray-500 py-8"},Et={key:1,class:"space-y-4"},Ft={class:"flex items-center"},Tt={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},It={class:"font-medium text-gray-900"},$t={class:"text-sm text-gray-600"},Rt={class:"text-right"},Nt={class:"font-medium text-gray-900"},Lt={class:"text-sm text-gray-600"};function qt(x,t,f,s,v,A){return l(),n("div",_e,[t[39]||(t[39]=e("div",{class:"mb-8"},[e("div",{class:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg p-6"},[e("h2",{class:"text-2xl font-bold mb-2"},"Bienvenue sur Primea Admin"),e("p",{class:"text-blue-100"},"Gérez efficacement votre plateforme de billetterie")])],-1)),s.loading?(l(),n("div",ke,[...t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),n("div",Ce,[e("div",Se,[e("button",{onClick:t[0]||(t[0]=o=>x.$router.push("/admin/users")),class:"bg-blue-600 text-white p-6 rounded-lg hover:bg-blue-700 transition-all transform hover:scale-105"},[e("div",je,[t[11]||(t[11]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),e("div",Ae,[t[10]||(t[10]=e("h3",{class:"text-lg font-bold"},"Utilisateurs",-1)),e("p",Me,a(s.stats.total_users||0)+" utilisateurs",1)])])]),e("button",{onClick:t[1]||(t[1]=o=>x.$router.push("/admin/organizers")),class:"bg-green-600 text-white p-6 rounded-lg hover:bg-green-700 transition-all transform hover:scale-105"},[e("div",Pe,[t[13]||(t[13]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("div",Oe,[t[12]||(t[12]=e("h3",{class:"text-lg font-bold"},"Organisateurs",-1)),e("p",ze,a(s.stats.total_organizers||0)+" organisateurs",1)])])]),e("button",{onClick:t[2]||(t[2]=o=>x.$router.push("/admin/events")),class:"bg-purple-600 text-white p-6 rounded-lg hover:bg-purple-700 transition-all transform hover:scale-105"},[e("div",Ue,[t[15]||(t[15]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("div",De,[t[14]||(t[14]=e("h3",{class:"text-lg font-bold"},"Événements",-1)),e("p",Be,a(s.stats.total_events||0)+" événements",1)])])]),e("button",{onClick:t[3]||(t[3]=o=>x.$router.push("/admin/payouts")),class:"bg-yellow-600 text-white p-6 rounded-lg hover:bg-yellow-700 transition-all transform hover:scale-105"},[e("div",Ve,[t[17]||(t[17]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),e("div",Ee,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold"},"Payouts",-1)),e("p",Fe,a(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])])]),e("div",Te,[e("div",Ie,[e("div",$e,[t[19]||(t[19]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])],-1)),e("div",Re,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Commandes Today",-1)),e("p",Ne,a(s.stats.orders_today||0),1)])])]),e("div",Le,[e("div",qe,[t[21]||(t[21]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",He,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"Revenus du Jour",-1)),e("p",Ge,a(s.formatAmount(s.stats.revenue_today||0))+" XAF",1)])])]),e("div",Xe,[e("div",Je,[t[23]||(t[23]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",We,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",Qe,a(s.stats.tickets_sold||0),1)])])]),e("div",Ye,[e("div",Ze,[t[25]||(t[25]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Ke,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",et,a(s.stats.failed_payments||0),1)])])])]),e("div",tt,[e("div",st,[e("div",ot,[e("div",at,[t[26]||(t[26]=e("h2",{class:"text-xl font-bold"},"Commandes Récentes",-1)),e("button",{onClick:t[4]||(t[4]=o=>x.$router.push("/admin/orders")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir toutes")]),s.recentOrders.length===0?(l(),n("div",nt," Aucune commande récente ")):(l(),n("div",lt,[e("table",rt,[t[27]||(t[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",it,[(l(!0),n(z,null,U(s.recentOrders,o=>(l(),n("tr",{key:o.id},[e("td",dt,[e("button",{onClick:i=>s.viewOrder(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,ct)]),e("td",mt,a(o.customer_name||o.customer_email),1),e("td",ut,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",gt,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getOrderStatusClass(o.status)])},a(s.getOrderStatusName(o.status)),3)]),e("td",pt,a(s.formatDate(o.created_at)),1)]))),128))])])]))])]),e("div",xt,[e("div",bt,[t[30]||(t[30]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",ft,[t[29]||(t[29]=re('<div class="flex justify-between items-center" data-v-8438691a><span class="text-sm text-gray-600" data-v-8438691a>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8438691a> Opérationnel </span></div><div class="flex justify-between items-center" data-v-8438691a><span class="text-sm text-gray-600" data-v-8438691a>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8438691a> Opérationnel </span></div>',2)),e("div",yt,[t[28]||(t[28]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[5]||(t[5]=(...o)=>s.checkShapBalance&&s.checkShapBalance(...o)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",vt,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",ht,[(l(!0),n(z,null,U(s.recentActivity,o=>(l(),n("div",{key:o.id,class:"flex items-start"},[e("div",{class:$(["p-1 rounded-full mr-3",s.getActivityIconClass(o.type)])},[...t[31]||(t[31]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",wt,[e("p",_t,a(o.description),1),e("p",kt,a(s.formatDate(o.created_at)),1)])]))),128))])]),e("div",Ct,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",St,[e("button",{onClick:t[6]||(t[6]=o=>x.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[33]||(t[33]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[7]||(t[7]=o=>x.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[34]||(t[34]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[8]||(t[8]=o=>x.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[35]||(t[35]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",jt,[e("div",At,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),s.revenueData.length===0?(l(),n("div",Mt," Aucune donnée disponible ")):(l(),n("div",Pt,[(l(!0),n(z,null,U(s.revenueData,o=>(l(),n("div",{key:o.date,class:"flex justify-between items-center"},[e("span",Ot,a(s.formatDate(o.date)),1),e("div",zt,[e("div",Ut,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:pe(`width: ${o.amount/s.maxRevenue*100}%`)},null,4)]),e("span",Dt,a(s.formatAmount(o.amount))+" XAF",1)])]))),128))]))]),e("div",Bt,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),s.topEvents.length===0?(l(),n("div",Vt," Aucun événement populaire ")):(l(),n("div",Et,[(l(!0),n(z,null,U(s.topEvents,(o,i)=>(l(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Ft,[e("div",Tt,a(i+1),1),e("div",null,[e("h3",It,a(o.title),1),e("p",$t,a(o.organizer_name),1)])]),e("div",Rt,[e("p",Nt,a(o.tickets_sold)+" tickets",1),e("p",Lt,a(s.formatAmount(o.revenue))+" XAF",1)])]))),128))]))])])]))])}const Ht=ee(we,[["render",qt],["__scopeId","data-v-8438691a"]]),H0=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"})),Gt={name:"UserManagement",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(null),A=u(null),o=u([]),i=H({search:"",role:"",status:""}),p=H({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0});let M=null;const h=async()=>{x.value=!0;try{const O=new URLSearchParams;i.search&&O.append("search",i.search),i.role&&O.append("role",i.role),i.status&&O.append("status",i.status);const G=await(await fetch(`/api/v1/admin/users?${O}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();G.success&&(o.value=G.data.users.data||G.data.users)}catch(O){console.error("Erreur chargement utilisateurs:",O)}finally{x.value=!1}},_=()=>{clearTimeout(M),M=setTimeout(()=>{h()},500)},P=()=>{v.value=null,Object.assign(p,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0}),f.value=!0},g=O=>{v.value=O,Object.assign(p,{name:O.name,email:O.email,password:"",is_admin:O.is_admin,is_organizer:O.is_organizer,is_active:!O.deleted_at}),f.value=!0},B=async()=>{t.value=!0;try{const O=v.value?`/api/v1/admin/users/${v.value.id}`:"/api/v1/admin/users",W=v.value?"PUT":"POST",Z=await(await fetch(O,{method:W,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(p)})).json();Z.success?(alert(v.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès"),f.value=!1,h()):alert(Z.message||"Erreur lors de la sauvegarde")}catch(O){console.error("Erreur sauvegarde utilisateur:",O),alert("Erreur technique")}finally{t.value=!1}},r=async O=>{if(confirm(`Êtes-vous sûr de vouloir ${O.deleted_at?"activer":"désactiver"} cet utilisateur ?`))try{const G=await(await fetch(`/api/v1/admin/users/${O.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();G.success?h():alert(G.message||"Erreur lors du changement de statut")}catch(W){console.error("Erreur toggle statut:",W),alert("Erreur technique")}},D=O=>{A.value=O,s.value=!0},J=()=>{Object.assign(i,{search:"",role:"",status:""}),h()},Y=O=>new Date(O).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return ae(()=>{h()}),{loading:x,saving:t,showModal:f,showDetailsModal:s,editingUser:v,selectedUser:A,users:o,filters:i,userForm:p,loadUsers:h,debouncedSearch:_,openCreateModal:P,editUser:g,saveUser:B,toggleUserStatus:r,viewUserDetails:D,resetFilters:J,formatDate:Y}}},Xt={class:"user-management p-6 bg-gray-50 min-h-screen"},Jt={class:"mb-8"},Wt={class:"flex items-center justify-between"},Qt={class:"bg-white rounded-lg shadow p-6 mb-8"},Yt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Zt={class:"flex items-end"},Kt={class:"bg-white rounded-lg shadow"},es={key:0,class:"p-8 text-center"},ts={key:1,class:"p-8 text-center text-gray-500"},ss={key:2,class:"overflow-x-auto"},os={class:"w-full"},as={class:"divide-y divide-gray-200"},ns={class:"px-6 py-4"},ls={class:"flex items-center"},rs={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},is={class:"ml-4"},ds={class:"text-sm font-medium text-gray-900"},cs={class:"text-sm text-gray-500"},ms={class:"px-6 py-4 text-sm text-gray-900"},us={class:"px-6 py-4 text-sm"},gs={class:"space-y-1"},ps={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},xs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},bs={key:2,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},fs={class:"px-6 py-4 text-sm"},ys=["onClick"],vs={class:"px-6 py-4 text-sm text-gray-500"},hs={class:"px-6 py-4 text-sm space-x-2"},ws=["onClick"],_s=["onClick"],ks={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Cs={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ss={class:"text-lg font-bold mb-4"},js={class:"space-y-4"},As={key:0},Ms={key:1},Ps={class:"space-y-2"},Os={class:"flex items-center"},zs={class:"flex items-center"},Us={key:2},Ds={class:"flex items-center"},Bs={class:"flex justify-end space-x-3 mt-6"},Vs=["disabled"],Es={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Fs={class:"bg-white rounded-lg p-6 w-full max-w-lg"},Ts={class:"flex justify-between items-center mb-4"},Is={key:0,class:"space-y-4"},$s={class:"grid grid-cols-2 gap-4"},Rs={class:"text-sm text-gray-900"},Ns={class:"text-sm text-gray-900"},Ls={class:"text-sm"},qs={class:"space-y-1"},Hs={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},Gs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},Xs={key:2,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Js={class:"text-sm text-gray-900"},Ws={class:"text-sm text-gray-900"},Qs={key:0},Ys={class:"text-sm text-gray-900"};function Zs(x,t,f,s,v,A){return l(),n("div",Xt,[e("div",Jt,[e("div",Wt,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" Créer Utilisateur ",-1)])])])]),e("div",Qt,[t[25]||(t[25]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Yt,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.role=o),onChange:t[4]||(t[4]=(...o)=>s.loadUsers&&s.loadUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[21]||(t[21]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[F,s.filters.role]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.status=o),onChange:t[6]||(t[6]=(...o)=>s.loadUsers&&s.loadUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[23]||(t[23]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[F,s.filters.status]])]),e("div",Zt,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Kt,[t[28]||(t[28]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),s.loading?(l(),n("div",es,[...t[26]||(t[26]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.users.length===0?(l(),n("div",ts," Aucun utilisateur trouvé ")):(l(),n("div",ss,[e("table",os,[t[27]||(t[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",as,[(l(!0),n(z,null,U(s.users,o=>(l(),n("tr",{key:o.id},[e("td",ns,[e("div",ls,[e("div",rs,a(o.name.charAt(0).toUpperCase()),1),e("div",is,[e("div",ds,a(o.name),1),e("div",cs,"ID: "+a(o.id),1)])])]),e("td",ms,a(o.email),1),e("td",us,[e("div",gs,[o.is_admin?(l(),n("span",ps," Admin ")):b("",!0),o.is_organizer?(l(),n("span",xs," Organisateur ")):b("",!0),!o.is_admin&&!o.is_organizer?(l(),n("span",bs," Client ")):b("",!0)])]),e("td",fs,[e("button",{onClick:i=>s.toggleUserStatus(o),class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",o.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(o.deleted_at?"Inactif":"Actif"),11,ys)]),e("td",vs,a(s.formatDate(o.created_at)),1),e("td",hs,[e("button",{onClick:i=>s.editUser(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,ws),e("button",{onClick:i=>s.viewUserDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,_s)])]))),128))])])]))]),s.showModal?(l(),n("div",ks,[e("div",Cs,[e("h3",Ss,a(s.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[16]||(t[16]=ne((...o)=>s.saveUser&&s.saveUser(...o),["prevent"]))},[e("div",js,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.userForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.userForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.userForm.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.userForm.email]])]),s.editingUser?b("",!0):(l(),n("div",As,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe *",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.userForm.password=o),type:"password",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.userForm.password]])])),s.editingUser?(l(),n("div",Ms,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.userForm.password=o),type:"password",placeholder:"Laisser vide pour ne pas changer",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.userForm.password]])])):b("",!0),e("div",Ps,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",Os,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=o=>s.userForm.is_admin=o),class:"rounded border-gray-300"},null,512),[[Q,s.userForm.is_admin]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",zs,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=o=>s.userForm.is_organizer=o),class:"rounded border-gray-300"},null,512),[[Q,s.userForm.is_organizer]]),t[34]||(t[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),s.editingUser?(l(),n("div",Us,[e("label",Ds,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>s.userForm.is_active=o),class:"rounded border-gray-300"},null,512),[[Q,s.userForm.is_active]]),t[36]||(t[36]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):b("",!0)]),e("div",Bs,[e("button",{type:"button",onClick:t[15]||(t[15]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingUser?"Mettre à jour":"Créer"),9,Vs)])],32)])])):b("",!0),s.showDetailsModal?(l(),n("div",Es,[e("div",Fs,[e("div",Ts,[t[38]||(t[38]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[37]||(t[37]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedUser?(l(),n("div",Is,[e("div",$s,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Rs,a(s.selectedUser.name),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Ns,a(s.selectedUser.email),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Ls,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(s.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",qs,[s.selectedUser.is_admin?(l(),n("span",Hs," Admin ")):b("",!0),s.selectedUser.is_organizer?(l(),n("span",Gs," Organisateur ")):b("",!0),!s.selectedUser.is_admin&&!s.selectedUser.is_organizer?(l(),n("span",Xs," Client ")):b("",!0)])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",Js,a(s.formatDate(s.selectedUser.created_at)),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",Ws,a(s.selectedUser.email_verified_at?"Oui":"Non"),1)])]),s.selectedUser.is_organizer&&s.selectedUser.organizers_count>0?(l(),n("div",Qs,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",Ys,a(s.selectedUser.organizers_count)+" organisateur(s)",1)])):b("",!0)])):b("",!0)])])):b("",!0)])}const Ks=ee(Gt,[["render",Zs],["__scopeId","data-v-7bf4763f"]]),G0=Object.freeze(Object.defineProperty({__proto__:null,default:Ks},Symbol.toStringTag,{value:"Module"})),eo={name:"OrganizerManagement",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(!1),A=u(!1),o=u(null),i=u(null),p=u(null),M=u([]),h=u([]),_=H({search:"",status:"",verified:""}),P=H({name:"",description:"",contact_email:"",contact_phone:"",website_url:"",status:"active",user_ids:[]}),g=H({user_ids:[]});let B=null;const r=async()=>{x.value=!0;try{const c=new URLSearchParams;_.search&&c.append("search",_.search),_.status&&c.append("status",_.status),_.verified&&c.append("verified",_.verified);const se=await(await fetch(`/api/v1/admin/organizers?${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();se.success&&(M.value=se.data.organizers.data||se.data.organizers)}catch(c){console.error("Erreur chargement organisateurs:",c)}finally{x.value=!1}},D=async()=>{try{const S=await(await fetch("/api/v1/admin/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();S.success&&(h.value=S.data.users.data||S.data.users||[])}catch(c){console.error("Erreur chargement utilisateurs:",c)}},J=()=>{clearTimeout(B),B=setTimeout(()=>{r()},500)},Y=async()=>{o.value=null,Object.assign(P,{name:"",description:"",contact_email:"",contact_phone:"",website_url:"",status:"active",user_ids:[]}),await D(),s.value=!0},O=async c=>{o.value=c,Object.assign(P,{name:c.name,description:c.description||"",contact_email:c.contact_email,contact_phone:c.contact_phone||"",website_url:c.website_url||"",status:c.status,user_ids:c.users?c.users.map(S=>S.id):[]}),await D(),s.value=!0},W=async()=>{t.value=!0;try{const c=o.value?`/api/v1/admin/organizers/${o.value.id}`:"/api/v1/admin/organizers",S=o.value?"PUT":"POST",w=await(await fetch(c,{method:S,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(P)})).json();w.success?(alert(o.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès"),s.value=!1,r()):alert(w.message||"Erreur lors de la sauvegarde")}catch(c){console.error("Erreur sauvegarde organisateur:",c),alert("Erreur technique")}finally{t.value=!1}},G=c=>{i.value=c,v.value=!0},Z=async c=>{p.value=c,g.user_ids=c.users?c.users.map(S=>S.id):[],await D(),A.value=!0},oe=async()=>{f.value=!0;try{const S=await(await fetch(`/api/v1/admin/organizers/${p.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g)})).json();S.success?(alert("Utilisateurs mis à jour avec succès"),A.value=!1,r()):alert(S.message||"Erreur lors de la mise à jour")}catch(c){console.error("Erreur mise à jour utilisateurs:",c),alert("Erreur technique")}finally{f.value=!1}},te=()=>{Object.assign(_,{search:"",status:"",verified:""}),r()},k=c=>new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),V=c=>({active:"Actif",inactive:"Inactif",suspended:"Suspendu"})[c]||c,m=c=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800";return ae(()=>{r()}),{loading:x,saving:t,updatingUsers:f,showModal:s,showDetailsModal:v,showUserModal:A,editingOrganizer:o,selectedOrganizer:i,managingOrganizer:p,organizers:M,availableUsers:h,filters:_,organizerForm:P,userManagementForm:g,loadOrganizers:r,loadAvailableUsers:D,debouncedSearch:J,openCreateModal:Y,editOrganizer:O,saveOrganizer:W,viewOrganizerDetails:G,manageUsers:Z,updateOrganizerUsers:oe,resetFilters:te,formatDate:k,getStatusName:V,getStatusBadgeClass:m}}},to={class:"organizer-management p-6 bg-gray-50 min-h-screen"},so={class:"mb-8"},oo={class:"flex items-center justify-between"},ao={class:"bg-white rounded-lg shadow p-6 mb-8"},no={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},lo={class:"flex items-end"},ro={class:"bg-white rounded-lg shadow"},io={key:0,class:"p-8 text-center"},co={key:1,class:"p-8 text-center text-gray-500"},mo={key:2,class:"overflow-x-auto"},uo={class:"w-full"},go={class:"divide-y divide-gray-200"},po={class:"px-6 py-4"},xo={class:"flex items-center"},bo={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},fo={class:"ml-4"},yo={class:"text-sm font-medium text-gray-900"},vo={class:"text-sm text-gray-500"},ho={class:"px-6 py-4"},wo={class:"text-sm text-gray-900"},_o={class:"text-sm text-gray-500"},ko={class:"px-6 py-4 text-sm text-gray-900"},Co={class:"flex flex-wrap gap-1"},So={key:0,class:"text-gray-500 text-xs"},jo={class:"px-6 py-4 text-sm text-gray-900"},Ao={class:"px-6 py-4 text-sm"},Mo={class:"px-6 py-4 text-sm"},Po={class:"px-6 py-4 text-sm space-x-2"},Oo=["onClick"],zo=["onClick"],Uo=["onClick"],Do={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bo={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},Vo={class:"text-lg font-bold mb-4"},Eo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fo={class:"md:col-span-2"},To={class:"md:col-span-2"},Io={class:"md:col-span-2"},$o={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},Ro=["value"],No={class:"ml-2 text-sm"},Lo={key:0,class:"text-sm text-gray-500"},qo={class:"flex justify-end space-x-3 mt-6"},Ho=["disabled"],Go={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Xo={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},Jo={class:"flex justify-between items-center mb-4"},Wo={key:0,class:"space-y-4"},Qo={class:"grid grid-cols-2 gap-4"},Yo={class:"text-sm text-gray-900"},Zo={class:"text-sm text-gray-900"},Ko={class:"text-sm text-gray-900"},ea={class:"text-sm text-gray-900"},ta={class:"text-sm"},sa={class:"text-sm"},oa={class:"text-sm text-gray-900"},aa={class:"text-sm text-gray-900"},na={key:0},la={class:"text-sm text-gray-900"},ra={key:1},ia=["href"],da={key:2},ca={class:"flex flex-wrap gap-2"},ma={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ua={class:"bg-white rounded-lg p-6 w-full max-w-md"},ga={class:"flex justify-between items-center mb-4"},pa={key:0,class:"space-y-4"},xa={class:"font-medium text-gray-900 mb-2"},ba={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},fa={class:"text-sm font-medium"},ya={class:"text-xs text-gray-500 block"},va=["value"],ha={class:"flex justify-end space-x-3"},wa=["disabled"];function _a(x,t,f,s,v,A){return l(),n("div",to,[e("div",so,[e("div",oo,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" Créer Organisateur ",-1)])])])]),e("div",ao,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",no,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[F,s.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vérification",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.verified=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Vérifié",-1),e("option",{value:"false"},"Non vérifié",-1)])],544),[[F,s.filters.verified]])]),e("div",lo,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",ro,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),s.loading?(l(),n("div",io,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.organizers.length===0?(l(),n("div",co," Aucun organisateur trouvé ")):(l(),n("div",mo,[e("table",uo,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Vérification"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",go,[(l(!0),n(z,null,U(s.organizers,o=>(l(),n("tr",{key:o.id},[e("td",po,[e("div",xo,[e("div",bo,a(o.name.charAt(0).toUpperCase()),1),e("div",fo,[e("div",yo,a(o.name),1),e("div",vo,a(o.slug),1)])])]),e("td",ho,[e("div",wo,a(o.contact_email),1),e("div",_o,a(o.contact_phone||"-"),1)]),e("td",ko,[e("div",Co,[(l(!0),n(z,null,U(o.users,i=>(l(),n("span",{key:i.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(i.name),1))),128)),o.users.length===0?(l(),n("span",So," Aucun utilisateur ")):b("",!0)])]),e("td",jo,a(o.events_count||0),1),e("td",Ao,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",Mo,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(o.verified_at?"Vérifié":"En attente"),3)]),e("td",Po,[e("button",{onClick:i=>s.editOrganizer(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Oo),e("button",{onClick:i=>s.viewOrganizerDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,zo),e("button",{onClick:i=>s.manageUsers(o),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,Uo)])]))),128))])])]))]),s.showModal?(l(),n("div",Do,[e("div",Bo,[e("h3",Vo,a(s.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=ne((...o)=>s.saveOrganizer&&s.saveOrganizer(...o),["prevent"]))},[e("div",Eo,[e("div",Fo,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.organizerForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.name]])]),e("div",To,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.organizerForm.description=o),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.description]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.organizerForm.contact_email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.organizerForm.contact_phone=o),type:"tel",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.contact_phone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Site web",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.organizerForm.website_url=o),type:"url",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.website_url]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),d(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.organizerForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[38]||(t[38]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[F,s.organizerForm.status]])]),e("div",Io,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",$o,[(l(!0),n(z,null,U(s.availableUsers,o=>(l(),n("div",{key:o.id,class:"flex items-center mb-2"},[d(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[14]||(t[14]=i=>s.organizerForm.user_ids=i),class:"rounded border-gray-300"},null,8,Ro),[[Q,s.organizerForm.user_ids]]),e("span",No,a(o.name)+" ("+a(o.email)+")",1)]))),128)),s.availableUsers.length===0?(l(),n("div",Lo," Aucun utilisateur disponible ")):b("",!0)])])]),e("div",qo,[e("button",{type:"button",onClick:t[15]||(t[15]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingOrganizer?"Mettre à jour":"Créer"),9,Ho)])],32)])])):b("",!0),s.showDetailsModal?(l(),n("div",Go,[e("div",Xo,[e("div",Jo,[t[42]||(t[42]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[41]||(t[41]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrganizer?(l(),n("div",Wo,[e("div",Qo,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Yo,a(s.selectedOrganizer.name),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",Zo,a(s.selectedOrganizer.slug),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Ko,a(s.selectedOrganizer.contact_email),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",ea,a(s.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",ta,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrganizer.status)])},a(s.getStatusName(s.selectedOrganizer.status)),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Vérification",-1)),e("p",sa,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedOrganizer.verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(s.selectedOrganizer.verified_at?"Vérifié":"En attente"),3)])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",oa,a(s.formatDate(s.selectedOrganizer.created_at)),1)]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",aa,a(s.selectedOrganizer.events_count||0)+" événement(s)",1)])]),s.selectedOrganizer.description?(l(),n("div",na,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",la,a(s.selectedOrganizer.description),1)])):b("",!0),s.selectedOrganizer.website_url?(l(),n("div",ra,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Site web",-1)),e("a",{href:s.selectedOrganizer.website_url,target:"_blank",class:"text-sm text-blue-600 hover:text-blue-800"},a(s.selectedOrganizer.website_url),9,ia)])):b("",!0),s.selectedOrganizer.users&&s.selectedOrganizer.users.length>0?(l(),n("div",da,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",ca,[(l(!0),n(z,null,U(s.selectedOrganizer.users,o=>(l(),n("span",{key:o.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(o.name),1))),128))])])):b("",!0)])):b("",!0)])])):b("",!0),s.showUserModal?(l(),n("div",ma,[e("div",ua,[e("div",ga,[t[55]||(t[55]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[54]||(t[54]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.managingOrganizer?(l(),n("div",pa,[e("div",null,[e("h4",xa,a(s.managingOrganizer.name),1),t[56]||(t[56]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",ba,[(l(!0),n(z,null,U(s.availableUsers,o=>(l(),n("div",{key:o.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",fa,a(o.name),1),e("span",ya,a(o.email),1)]),d(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[19]||(t[19]=i=>s.userManagementForm.user_ids=i),class:"rounded border-gray-300"},null,8,va),[[Q,s.userManagementForm.user_ids]])]))),128))]),e("div",ha,[e("button",{onClick:t[20]||(t[20]=o=>s.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...o)=>s.updateOrganizerUsers&&s.updateOrganizerUsers(...o)),disabled:s.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.updatingUsers?"Mise à jour...":"Mettre à jour"),9,wa)])])):b("",!0)])])):b("",!0)])}const ka=ee(eo,[["render",_a],["__scopeId","data-v-5e090290"]]),X0=Object.freeze(Object.defineProperty({__proto__:null,default:ka},Symbol.toStringTag,{value:"Module"})),Ca={name:"EventManagement",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(null),A=u(null),o=u([]),i=u([]),p=u([]),M=u([]),h=u(null),_=H({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),P=H({search:"",status:"",organizer_id:"",category_id:"",page:1}),g=H({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",schedules:[],ticket_types:[]});let B=null;const r=async()=>{x.value=!0;try{const y=new URLSearchParams;Object.keys(P).forEach(q=>{P[q]&&P[q]!==""&&y.append(q,P[q])});const L=await(await fetch(`/api/v1/admin/events?${y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(L.success){o.value=L.data.events.data,h.value={current_page:L.data.events.current_page,last_page:L.data.events.last_page,from:L.data.events.from,to:L.data.events.to,total:L.data.events.total};const q=L.data.events.data;_.total_events=h.value.total,_.published_events=q.filter(le=>le.status==="published").length,_.draft_events=q.filter(le=>le.status==="draft").length,_.total_tickets_sold=q.reduce((le,be)=>le+(be.tickets_sold||0),0)}}catch(y){console.error("Erreur chargement événements:",y)}finally{x.value=!1}},D=async()=>{try{const R=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();R.success&&(i.value=R.data.organizers.data||R.data.organizers)}catch(y){console.error("Erreur chargement organisateurs:",y)}},J=async()=>{try{const R=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();R.success&&(p.value=R.data)}catch(y){console.error("Erreur chargement catégories:",y)}},Y=async()=>{try{const R=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();R.success&&(M.value=R.data)}catch(y){console.error("Erreur chargement lieux:",y)}},O=()=>{clearTimeout(B),B=setTimeout(()=>{P.page=1,r()},500)},W=y=>{y>=1&&y<=h.value.last_page&&(P.page=y,r())},G=()=>{Object.assign(P,{search:"",status:"",organizer_id:"",category_id:"",page:1}),r()},Z=()=>{v.value=null,Object.assign(g,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),f.value=!0},oe=async y=>{try{const L=await(await fetch(`/api/v1/admin/events/${y.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(v.value=L.data.event,Object.assign(g,{title:L.data.event.title,description:L.data.event.description,organizer_id:L.data.event.organizer_id,category_id:L.data.event.category_id,venue_id:L.data.event.venue_id,status:L.data.event.status,schedules:L.data.event.schedules?.map(q=>({starts_at:q.starts_at?q.starts_at.slice(0,16):"",ends_at:q.ends_at?q.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:L.data.event.ticketTypes?.map(q=>({name:q.name,price:q.price,capacity:q.capacity,description:q.description||""}))||[{name:"",price:0,capacity:0,description:""}]}),f.value=!0)}catch(R){console.error("Erreur chargement événement:",R)}},te=async()=>{t.value=!0;try{const y=v.value?`/api/v1/admin/events/${v.value.id}`:"/api/v1/admin/events",R=v.value?"PUT":"POST",q=await(await fetch(y,{method:R,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g)})).json();q.success?(alert(v.value?"Événement mis à jour avec succès":"Événement créé avec succès"),f.value=!1,r()):alert(q.message||"Erreur lors de la sauvegarde")}catch(y){console.error("Erreur sauvegarde événement:",y),alert("Erreur technique")}finally{t.value=!1}},k=async y=>{try{const L=await(await fetch(`/api/v1/admin/events/${y.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(A.value=L.data.event,s.value=!0)}catch(R){console.error("Erreur chargement détails événement:",R)}},V=y=>{v.value=null,Object.assign(g,{title:`${y.title} (Copie)`,description:y.description,organizer_id:y.organizer_id,category_id:y.category_id,venue_id:y.venue_id,status:"draft",schedules:[{starts_at:"",ends_at:""}],ticket_types:y.ticketTypes?.map(R=>({name:R.name,price:R.price,capacity:R.capacity,description:R.description||""}))||[{name:"",price:0,capacity:0,description:""}]}),f.value=!0},m=()=>{g.schedules.push({starts_at:"",ends_at:""})},c=y=>{g.schedules.splice(y,1)},S=()=>{g.ticket_types.push({name:"",price:0,capacity:0,description:""})},se=y=>{g.ticket_types.splice(y,1)},w=y=>new Intl.NumberFormat("fr-FR").format(y),I=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=y=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[y]||y,K=y=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[y]||"bg-gray-100 text-gray-800";return ae(()=>{r(),D(),J(),Y()}),{loading:x,saving:t,showModal:f,showDetailsModal:s,editingEvent:v,selectedEvent:A,events:o,organizers:i,categories:p,venues:M,pagination:h,stats:_,filters:P,eventForm:g,loadEvents:r,loadOrganizers:D,loadCategories:J,loadVenues:Y,debouncedSearch:O,changePage:W,resetFilters:G,openCreateModal:Z,editEvent:oe,saveEvent:te,viewEventDetails:k,duplicateEvent:V,addSchedule:m,removeSchedule:c,addTicketType:S,removeTicketType:se,formatAmount:w,formatDateTime:I,getStatusName:E,getStatusBadgeClass:K}}},Sa={class:"event-management p-6 bg-gray-50 min-h-screen"},ja={class:"mb-8"},Aa={class:"flex items-center justify-between"},Ma={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Pa={class:"bg-white rounded-lg shadow p-6"},Oa={class:"flex items-center"},za={class:"ml-4"},Ua={class:"text-2xl font-bold text-blue-600"},Da={class:"bg-white rounded-lg shadow p-6"},Ba={class:"flex items-center"},Va={class:"ml-4"},Ea={class:"text-2xl font-bold text-green-600"},Fa={class:"bg-white rounded-lg shadow p-6"},Ta={class:"flex items-center"},Ia={class:"ml-4"},$a={class:"text-2xl font-bold text-yellow-600"},Ra={class:"bg-white rounded-lg shadow p-6"},Na={class:"flex items-center"},La={class:"ml-4"},qa={class:"text-2xl font-bold text-purple-600"},Ha={class:"bg-white rounded-lg shadow p-6 mb-8"},Ga={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Xa=["value"],Ja=["value"],Wa={class:"flex items-end"},Qa={class:"bg-white rounded-lg shadow"},Ya={key:0,class:"p-8 text-center"},Za={key:1,class:"p-8 text-center text-gray-500"},Ka={key:2,class:"overflow-x-auto"},en={class:"w-full"},tn={class:"divide-y divide-gray-200"},sn={class:"px-6 py-4"},on={class:"flex items-center"},an={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},nn={class:"ml-4"},ln={class:"text-sm font-medium text-gray-900"},rn={class:"text-sm text-gray-500"},dn={class:"px-6 py-4 text-sm text-gray-900"},cn={class:"px-6 py-4 text-sm text-gray-900"},mn={class:"px-6 py-4 text-sm text-gray-900"},un={class:"px-6 py-4 text-sm text-gray-900"},gn={class:"space-y-1"},pn={class:"text-gray-500"},xn={class:"px-6 py-4 text-sm"},bn={class:"px-6 py-4 text-sm space-x-2"},fn=["onClick"],yn=["onClick"],vn=["onClick"],hn={key:3,class:"p-6 border-t"},wn={class:"flex justify-between items-center"},_n={class:"text-sm text-gray-700"},kn={class:"flex space-x-2"},Cn=["disabled"],Sn={class:"px-3 py-1 text-sm text-gray-600"},jn=["disabled"],An={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Mn={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Pn={class:"text-lg font-bold mb-4"},On={class:"space-y-6"},zn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Un={class:"md:col-span-2"},Dn={class:"md:col-span-2"},Bn=["value"],Vn=["value"],En=["value"],Fn={class:"space-y-3"},Tn=["onUpdate:modelValue"],In=["onUpdate:modelValue"],$n={class:"flex items-end"},Rn=["onClick"],Nn={class:"space-y-3"},Ln=["onUpdate:modelValue"],qn=["onUpdate:modelValue"],Hn=["onUpdate:modelValue"],Gn=["onUpdate:modelValue"],Xn={class:"flex items-end"},Jn=["onClick"],Wn={class:"flex justify-end space-x-3 mt-6"},Qn=["disabled"],Yn={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Zn={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Kn={class:"flex justify-between items-center mb-4"},el={key:0,class:"space-y-6"},tl={class:"grid grid-cols-2 gap-6"},sl={class:"text-sm font-medium text-gray-900"},ol={class:"text-sm text-gray-900"},al={class:"text-sm text-gray-900"},nl={class:"text-sm text-gray-900"},ll={class:"text-sm text-gray-900"},rl={class:"text-sm text-gray-900"},il={key:0},dl={class:"space-y-2"},cl={class:"text-sm"},ml={key:1},ul={class:"overflow-x-auto"},gl={class:"w-full text-sm"},pl={class:"divide-y divide-gray-200"},xl={class:"px-4 py-2 font-medium"},bl={class:"px-4 py-2"},fl={class:"px-4 py-2"},yl={class:"px-4 py-2"},vl={class:"px-4 py-2"};function hl(x,t,f,s,v,A){return l(),n("div",Sa,[e("div",ja,[e("div",Aa,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" Créer Événement ",-1)])])])]),e("div",Ma,[e("div",Pa,[e("div",Oa,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",za,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",Ua,a(s.stats.total_events||0),1)])])]),e("div",Da,[e("div",Ba,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Va,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",Ea,a(s.stats.published_events||0),1)])])]),e("div",Fa,[e("div",Ta,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",Ia,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",$a,a(s.stats.draft_events||0),1)])])]),e("div",Ra,[e("div",Na,[t[32]||(t[32]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",La,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",qa,a(s.stats.total_tickets_sold||0),1)])])])]),e("div",Ha,[t[40]||(t[40]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Ga,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[34]||(t[34]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[F,s.filters.status]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[36]||(t[36]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),n(z,null,U(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Xa))),128))],544),[[F,s.filters.organizer_id]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),d(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.category_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Toutes les catégories",-1)),(l(!0),n(z,null,U(s.categories,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Ja))),128))],544),[[F,s.filters.category_id]])]),e("div",Wa,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Qa,[t[43]||(t[43]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),s.loading?(l(),n("div",Ya,[...t[41]||(t[41]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.events.length===0?(l(),n("div",Za," Aucun événement trouvé ")):(l(),n("div",Ka,[e("table",en,[t[42]||(t[42]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",tn,[(l(!0),n(z,null,U(s.events,o=>(l(),n("tr",{key:o.id},[e("td",sn,[e("div",on,[e("div",an,a(o.title.charAt(0).toUpperCase()),1),e("div",nn,[e("div",ln,a(o.title),1),e("div",rn,a(o.slug),1)])])]),e("td",dn,a(o.organizer?.name||"-"),1),e("td",cn,a(o.category?.name||"-"),1),e("td",mn,a(o.schedules?.[0]?s.formatDateTime(o.schedules[0].starts_at):"Non programmé"),1),e("td",un,[e("div",gn,[e("div",null,"Vendus: "+a(o.tickets_sold||0),1),e("div",pn,"Total: "+a(o.total_capacity||0),1)])]),e("td",xn,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",bn,[e("button",{onClick:i=>s.editEvent(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,fn),e("button",{onClick:i=>s.viewEventDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,yn),e("button",{onClick:i=>s.duplicateEvent(o),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,vn)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),n("div",hn,[e("div",wn,[e("div",_n," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" événements ",1),e("div",kn,[e("button",{onClick:t[10]||(t[10]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Cn),e("span",Sn," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,jn)])])])):b("",!0)]),s.showModal?(l(),n("div",An,[e("div",Mn,[e("h3",Pn,a(s.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[21]||(t[21]=ne((...o)=>s.saveEvent&&s.saveEvent(...o),["prevent"]))},[e("div",On,[e("div",zn,[e("div",Un,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.eventForm.title=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.eventForm.title]])]),e("div",Dn,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),d(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.eventForm.description=o),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.eventForm.description]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),d(e("select",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.eventForm.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[46]||(t[46]=e("option",{value:""},"Sélectionner un organisateur",-1)),(l(!0),n(z,null,U(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Bn))),128))],512),[[F,s.eventForm.organizer_id]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),d(e("select",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.eventForm.category_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[48]||(t[48]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),n(z,null,U(s.categories,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Vn))),128))],512),[[F,s.eventForm.category_id]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),d(e("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.eventForm.venue_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[50]||(t[50]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),n(z,null,U(s.venues,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name)+" - "+a(o.city),9,En))),128))],512),[[F,s.eventForm.venue_id]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),d(e("select",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.eventForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[52]||(t[52]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[F,s.eventForm.status]])])]),e("div",null,[t[56]||(t[56]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",Fn,[(l(!0),n(z,null,U(s.eventForm.schedules,(o,i)=>(l(),n("div",{key:i,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),d(e("input",{"onUpdate:modelValue":p=>o.starts_at=p,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Tn),[[j,o.starts_at]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),d(e("input",{"onUpdate:modelValue":p=>o.ends_at=p,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,In),[[j,o.ends_at]])]),e("div",$n,[e("button",{type:"button",onClick:p=>s.removeSchedule(i),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,Rn)])]))),128)),e("button",{type:"button",onClick:t[18]||(t[18]=(...o)=>s.addSchedule&&s.addSchedule(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",Nn,[(l(!0),n(z,null,U(s.eventForm.ticket_types,(o,i)=>(l(),n("div",{key:i,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),d(e("input",{"onUpdate:modelValue":p=>o.name=p,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Ln),[[j,o.name]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),d(e("input",{"onUpdate:modelValue":p=>o.price=p,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,qn),[[j,o.price,void 0,{number:!0}]])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),d(e("input",{"onUpdate:modelValue":p=>o.capacity=p,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Hn),[[j,o.capacity,void 0,{number:!0}]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),d(e("input",{"onUpdate:modelValue":p=>o.description=p,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,Gn),[[j,o.description]])]),e("div",Xn,[e("button",{type:"button",onClick:p=>s.removeTicketType(i),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,Jn)])]))),128)),e("button",{type:"button",onClick:t[19]||(t[19]=(...o)=>s.addTicketType&&s.addTicketType(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",Wn,[e("button",{type:"button",onClick:t[20]||(t[20]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingEvent?"Mettre à jour":"Créer"),9,Qn)])],32)])])):b("",!0),s.showDetailsModal?(l(),n("div",Yn,[e("div",Zn,[e("div",Kn,[t[63]||(t[63]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[22]||(t[22]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[62]||(t[62]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedEvent?(l(),n("div",el,[e("div",tl,[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",sl,a(s.selectedEvent.title),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedEvent.status)])},a(s.getStatusName(s.selectedEvent.status)),3)]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",ol,a(s.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",al,a(s.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",nl,a(s.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",ll,a(s.formatDateTime(s.selectedEvent.created_at)),1)])]),e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",rl,a(s.selectedEvent.description),1)]),s.selectedEvent.schedules&&s.selectedEvent.schedules.length>0?(l(),n("div",il,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",dl,[(l(!0),n(z,null,U(s.selectedEvent.schedules,o=>(l(),n("div",{key:o.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",cl,"Du "+a(s.formatDateTime(o.starts_at))+" au "+a(s.formatDateTime(o.ends_at)),1)]))),128))])])):b("",!0),s.selectedEvent.ticketTypes&&s.selectedEvent.ticketTypes.length>0?(l(),n("div",ml,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",ul,[e("table",gl,[t[72]||(t[72]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Nom"),e("th",{class:"px-4 py-2 text-left"},"Prix"),e("th",{class:"px-4 py-2 text-left"},"Capacité"),e("th",{class:"px-4 py-2 text-left"},"Vendus"),e("th",{class:"px-4 py-2 text-left"},"Description")])],-1)),e("tbody",pl,[(l(!0),n(z,null,U(s.selectedEvent.ticketTypes,o=>(l(),n("tr",{key:o.id},[e("td",xl,a(o.name),1),e("td",bl,a(s.formatAmount(o.price))+" XAF",1),e("td",fl,a(o.capacity),1),e("td",yl,a(o.sold||0),1),e("td",vl,a(o.description||"-"),1)]))),128))])])])])):b("",!0)])):b("",!0)])])):b("",!0)])}const wl=ee(Ca,[["render",hl],["__scopeId","data-v-f6213ad5"]]),J0=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"})),_l={name:"OrderManagement",setup(){const x=u(!1),t=u(!1),f=u(null),s=u([]),v=u([]),A=u([]),o=u(null),i=H({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),p=H({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let M=null;const h=async()=>{x.value=!0;try{const k=new URLSearchParams;Object.keys(p).forEach(c=>{p[c]&&p[c]!==""&&k.append(c,p[c])});const m=await(await fetch(`/api/v1/admin/orders?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(m.success){s.value=m.data.orders.data,o.value={current_page:m.data.orders.current_page,last_page:m.data.orders.last_page,from:m.data.orders.from,to:m.data.orders.to,total:m.data.orders.total};const c=m.data.orders.data;i.total_orders=o.value.total,i.confirmed_orders=c.filter(S=>S.status==="confirmed").length,i.pending_orders=c.filter(S=>S.status==="pending").length,i.total_revenue=c.filter(S=>S.status==="confirmed").reduce((S,se)=>S+se.total_amount,0)}}catch(k){console.error("Erreur chargement commandes:",k)}finally{x.value=!1}},_=async()=>{try{const V=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(v.value=V.data.organizers.data||V.data.organizers)}catch(k){console.error("Erreur chargement organisateurs:",k)}},P=async()=>{try{const V=await(await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(A.value=V.data.events.data||V.data.events)}catch(k){console.error("Erreur chargement événements:",k)}},g=()=>{clearTimeout(M),M=setTimeout(()=>{p.page=1,h()},500)},B=k=>{k>=1&&k<=o.value.last_page&&(p.page=k,h())},r=()=>{Object.assign(p,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),h()},D=async k=>{try{const m=await(await fetch(`/api/v1/admin/orders/${k.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();m.success&&(f.value=m.data.order,t.value=!0)}catch(V){console.error("Erreur chargement détails commande:",V)}},J=async(k,V)=>{if(confirm(`Êtes-vous sûr de vouloir ${V==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const c=await(await fetch(`/api/v1/admin/orders/${k.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:V})})).json();c.success?(alert(`Commande ${V==="confirmed"?"confirmée":"annulée"} avec succès`),h(),t.value&&(f.value.status=V)):alert(c.message||"Erreur lors de la mise à jour")}catch(m){console.error("Erreur mise à jour statut commande:",m),alert("Erreur technique")}},Y=async()=>{try{const k=new URLSearchParams;Object.keys(p).forEach(m=>{p[m]&&p[m]!==""&&m!=="page"&&k.append(m,p[m])});const V=await fetch(`/api/v1/admin/orders/export?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(V.ok){const m=await V.blob(),c=window.URL.createObjectURL(m),S=document.createElement("a");S.href=c,S.download=`commandes-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(S),S.click(),window.URL.revokeObjectURL(c),document.body.removeChild(S)}}catch(k){console.error("Erreur export:",k),alert("Erreur lors de l'export des données")}},O=k=>new Intl.NumberFormat("fr-FR").format(k),W=k=>new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),G=k=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[k]||k,Z=k=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[k]||"bg-gray-100 text-gray-800",oe=k=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[k]||k,te=k=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800";return ae(()=>{h(),_(),P()}),{loading:x,showDetailsModal:t,selectedOrder:f,orders:s,organizers:v,events:A,pagination:o,stats:i,filters:p,loadOrders:h,loadOrganizers:_,loadEvents:P,debouncedSearch:g,changePage:B,resetFilters:r,viewOrderDetails:D,updateOrderStatus:J,exportOrders:Y,formatAmount:O,formatDateTime:W,getStatusName:G,getStatusBadgeClass:Z,getTicketStatusName:oe,getTicketStatusClass:te}}},kl={class:"order-management p-6 bg-gray-50 min-h-screen"},Cl={class:"mb-8"},Sl={class:"flex items-center justify-between"},jl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Al={class:"bg-white rounded-lg shadow p-6"},Ml={class:"flex items-center"},Pl={class:"ml-4"},Ol={class:"text-2xl font-bold text-blue-600"},zl={class:"bg-white rounded-lg shadow p-6"},Ul={class:"flex items-center"},Dl={class:"ml-4"},Bl={class:"text-2xl font-bold text-green-600"},Vl={class:"bg-white rounded-lg shadow p-6"},El={class:"flex items-center"},Fl={class:"ml-4"},Tl={class:"text-2xl font-bold text-yellow-600"},Il={class:"bg-white rounded-lg shadow p-6"},$l={class:"flex items-center"},Rl={class:"ml-4"},Nl={class:"text-2xl font-bold text-purple-600"},Ll={class:"bg-white rounded-lg shadow p-6 mb-8"},ql={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Hl=["value"],Gl=["value"],Xl={class:"flex justify-between items-center mt-4"},Jl={class:"text-sm text-gray-600"},Wl={class:"bg-white rounded-lg shadow"},Ql={key:0,class:"p-8 text-center"},Yl={key:1,class:"p-8 text-center text-gray-500"},Zl={key:2,class:"overflow-x-auto"},Kl={class:"w-full"},er={class:"divide-y divide-gray-200"},tr={class:"px-6 py-4 text-sm font-mono text-blue-600"},sr=["onClick"],or={class:"px-6 py-4 text-sm text-gray-900"},ar={class:"font-medium"},nr={class:"text-gray-500"},lr={class:"px-6 py-4 text-sm text-gray-900"},rr={class:"font-medium"},ir={class:"text-gray-500"},dr={class:"px-6 py-4 text-sm text-gray-900"},cr={class:"space-y-1"},mr={class:"px-6 py-4 text-sm font-medium text-gray-900"},ur={class:"px-6 py-4 text-sm"},gr={class:"px-6 py-4 text-sm text-gray-500"},pr={class:"px-6 py-4 text-sm space-x-2"},xr=["onClick"],br=["onClick"],fr=["onClick"],yr={key:3,class:"p-6 border-t"},vr={class:"flex justify-between items-center"},hr={class:"text-sm text-gray-700"},wr={class:"flex space-x-2"},_r=["disabled"],kr={class:"px-3 py-1 text-sm text-gray-600"},Cr=["disabled"],Sr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},jr={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Ar={class:"flex justify-between items-center mb-4"},Mr={key:0,class:"space-y-6"},Pr={class:"grid grid-cols-2 gap-6"},Or={class:"space-y-4"},zr={class:"space-y-2"},Ur={class:"text-sm font-mono text-gray-900"},Dr={class:"text-sm text-gray-900"},Br={key:0},Vr={class:"text-sm text-gray-900"},Er={class:"space-y-4"},Fr={class:"space-y-2"},Tr={class:"text-sm text-gray-900"},Ir={class:"text-sm text-gray-900"},$r={key:0},Rr={class:"text-sm text-gray-900"},Nr={key:0,class:"border-t pt-6"},Lr={class:"grid grid-cols-2 gap-4"},qr={class:"text-sm text-gray-900"},Hr={class:"text-sm text-gray-900"},Gr={class:"text-sm text-gray-900"},Xr={class:"text-sm text-gray-900"},Jr={class:"border-t pt-6"},Wr={class:"overflow-x-auto"},Qr={class:"w-full text-sm"},Yr={class:"divide-y divide-gray-200"},Zr={class:"px-4 py-2"},Kr={class:"px-4 py-2"},ei={class:"px-4 py-2"},ti={class:"px-4 py-2 font-medium"},si={class:"bg-gray-50"},oi={class:"px-4 py-2 font-bold"},ai={key:1,class:"border-t pt-6"},ni={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},li={class:"flex justify-between items-start mb-2"},ri={class:"font-mono text-blue-600"},ii={class:"text-gray-600"},di={key:0},ci={class:"border-t pt-6 flex justify-end space-x-3"};function mi(x,t,f,s,v,A){return l(),n("div",kl,[e("div",Cl,[e("div",Sl,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Commandes"),e("p",{class:"text-gray-600"},"Gérer et suivre toutes les commandes de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.exportOrders&&s.exportOrders(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),T(" Exporter ",-1)])])])]),e("div",jl,[e("div",Al,[e("div",Ml,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Pl,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Commandes",-1)),e("p",Ol,a(s.stats.total_orders||0),1)])])]),e("div",zl,[e("div",Ul,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Dl,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",Bl,a(s.stats.confirmed_orders||0),1)])])]),e("div",Vl,[e("div",El,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Fl,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",Tl,a(s.stats.pending_orders||0),1)])])]),e("div",Il,[e("div",$l,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Rl,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",Nl,a(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])])]),e("div",Ll,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ql,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[re('<option value="" data-v-e0d05b6e>Tous les statuts</option><option value="pending" data-v-e0d05b6e>En attente</option><option value="confirmed" data-v-e0d05b6e>Confirmée</option><option value="cancelled" data-v-e0d05b6e>Annulée</option><option value="refunded" data-v-e0d05b6e>Remboursée</option>',5)])],544),[[F,s.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),n(z,null,U(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Hl))),128))],544),[[F,s.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),d(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.event_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(l(!0),n(z,null,U(s.events,o=>(l(),n("option",{key:o.id,value:o.id},a(o.title),9,Gl))),128))],544),[[F,s.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.filters.date_from=o),onChange:t[10]||(t[10]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filters.date_to=o),onChange:t[12]||(t[12]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_to]])])]),e("div",Xl,[e("button",{onClick:t[13]||(t[13]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Jl,a(s.pagination?`${s.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",Wl,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Commandes")],-1)),s.loading?(l(),n("div",Ql,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.orders.length===0?(l(),n("div",Yl," Aucune commande trouvée ")):(l(),n("div",Zl,[e("table",Kl,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",er,[(l(!0),n(z,null,U(s.orders,o=>(l(),n("tr",{key:o.id},[e("td",tr,[e("button",{onClick:i=>s.viewOrderDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,sr)]),e("td",or,[e("div",null,[e("div",ar,a(o.customer_name),1),e("div",nr,a(o.customer_email),1)])]),e("td",lr,[e("div",null,[e("div",rr,a(o.event?.title||"-"),1),e("div",ir,a(o.event?.organizer?.name||"-"),1)])]),e("td",dr,[e("div",cr,[(l(!0),n(z,null,U(o.items,i=>(l(),n("div",{key:i.id,class:"text-xs"},a(i.quantity)+"x "+a(i.ticket_type_name),1))),128))])]),e("td",mr,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",ur,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",gr,a(s.formatDateTime(o.created_at)),1),e("td",pr,[e("button",{onClick:i=>s.viewOrderDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,xr),o.status==="pending"?(l(),n("button",{key:0,onClick:i=>s.updateOrderStatus(o,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,br)):b("",!0),["pending","confirmed"].includes(o.status)?(l(),n("button",{key:1,onClick:i=>s.updateOrderStatus(o,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,fr)):b("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),n("div",yr,[e("div",vr,[e("div",hr," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" commandes ",1),e("div",wr,[e("button",{onClick:t[14]||(t[14]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,_r),e("span",kr," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Cr)])])])):b("",!0)]),s.showDetailsModal?(l(),n("div",Sr,[e("div",jr,[e("div",Ar,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrder?(l(),n("div",Mr,[e("div",Pr,[e("div",Or,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",zr,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Ur,"#"+a(s.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrder.status)])},a(s.getStatusName(s.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Dr,a(s.formatDateTime(s.selectedOrder.created_at)),1)]),s.selectedOrder.confirmed_at?(l(),n("div",Br,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",Vr,a(s.formatDateTime(s.selectedOrder.confirmed_at)),1)])):b("",!0)])])]),e("div",Er,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",Fr,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Tr,a(s.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Ir,a(s.selectedOrder.customer_email),1)]),s.selectedOrder.customer_phone?(l(),n("div",$r,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Rr,a(s.selectedOrder.customer_phone),1)])):b("",!0)])])])]),s.selectedOrder.event?(l(),n("div",Nr,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",Lr,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",qr,a(s.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Hr,a(s.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Gr,a(s.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",Xr,a(s.selectedOrder.event.schedules?.[0]?s.formatDateTime(s.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):b("",!0),e("div",Jr,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",Wr,[e("table",Qr,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",Yr,[(l(!0),n(z,null,U(s.selectedOrder.items,o=>(l(),n("tr",{key:o.id},[e("td",Zr,a(o.ticket_type_name),1),e("td",Kr,a(s.formatAmount(o.unit_price))+" XAF",1),e("td",ei,a(o.quantity),1),e("td",ti,a(s.formatAmount(o.total_price))+" XAF",1)]))),128))]),e("tfoot",si,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",oi,a(s.formatAmount(s.selectedOrder.total_amount))+" XAF",1)])])])])]),s.selectedOrder.tickets&&s.selectedOrder.tickets.length>0?(l(),n("div",ai,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",ni,[(l(!0),n(z,null,U(s.selectedOrder.tickets,o=>(l(),n("div",{key:o.id,class:"border rounded-lg p-3 text-sm"},[e("div",li,[e("span",ri,a(o.code),1),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getTicketStatusClass(o.status)])},a(s.getTicketStatusName(o.status)),3)]),e("div",ii,[e("p",null,a(o.ticketType?.name),1),o.used_at?(l(),n("p",di,"Utilisé: "+a(s.formatDateTime(o.used_at)),1)):b("",!0)])]))),128))])])):b("",!0),e("div",ci,[s.selectedOrder.status==="pending"?(l(),n("button",{key:0,onClick:t[17]||(t[17]=o=>s.updateOrderStatus(s.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):b("",!0),["pending","confirmed"].includes(s.selectedOrder.status)?(l(),n("button",{key:1,onClick:t[18]||(t[18]=o=>s.updateOrderStatus(s.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):b("",!0),e("button",{onClick:t[19]||(t[19]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):b("",!0)])])):b("",!0)])}const ui=ee(_l,[["render",mi],["__scopeId","data-v-e0d05b6e"]]),W0=Object.freeze(Object.defineProperty({__proto__:null,default:ui},Symbol.toStringTag,{value:"Module"})),gi={name:"PaymentTracking",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(null),v=u([]),A=u([]),o=u(null),i=H({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),p=u([]),M=u([]),h=H({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let _=null;const P=xe(()=>M.value.length===0?1:Math.max(...M.value.map(w=>w.volume))),g=async()=>{x.value=!0;try{const w=new URLSearchParams;Object.keys(h).forEach(K=>{h[K]&&h[K]!==""&&w.append(K,h[K])});const E=await(await fetch(`/api/v1/admin/payments?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success&&(v.value=E.data.payments.data,o.value={current_page:E.data.payments.current_page,last_page:E.data.payments.last_page,from:E.data.payments.from,to:E.data.payments.to,total:E.data.payments.total},Object.assign(i,E.data.stats),p.value=E.data.gateway_stats||[],M.value=E.data.daily_stats||[])}catch(w){console.error("Erreur chargement paiements:",w)}finally{x.value=!1}},B=async()=>{try{const I=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();I.success&&(A.value=I.data.organizers.data||I.data.organizers)}catch(w){console.error("Erreur chargement organisateurs:",w)}},r=()=>{clearTimeout(_),_=setTimeout(()=>{h.page=1,g()},500)},D=w=>{w>=1&&w<=o.value.last_page&&(h.page=w,g())},J=()=>{Object.assign(h,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),g()},Y=()=>{g()},O=async w=>{try{const E=await(await fetch(`/api/v1/admin/payments/${w.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success&&(s.value=E.data.payment,f.value=!0)}catch(I){console.error("Erreur chargement détails paiement:",I)}},W=async w=>{try{const E=await(await fetch(`/api/v1/admin/payments/${w.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success?(alert(`Statut mis à jour: ${S(E.data.status)}`),g(),f.value&&(s.value.status=E.data.status)):alert(E.message||"Erreur lors de la vérification")}catch(I){console.error("Erreur vérification statut:",I),alert("Erreur technique")}},G=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const I=await(await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();I.success?(alert(`Vérification terminée. ${I.data.updated_count} paiement(s) mis à jour.`),g()):alert(I.message||"Erreur lors de la vérification")}catch(w){console.error("Erreur vérification paiements en attente:",w),alert("Erreur technique")}finally{t.value=!1}}},Z=async w=>{const I=prompt("Raison du remboursement:");if(I&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${te(w.amount)} XAF ?`))try{const K=await(await fetch(`/api/v1/admin/payments/${w.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:I})})).json();K.success?(alert("Remboursement initié avec succès"),g()):alert(K.message||"Erreur lors du remboursement")}catch(E){console.error("Erreur remboursement:",E),alert("Erreur technique")}},oe=async()=>{try{const w=new URLSearchParams;Object.keys(h).forEach(E=>{h[E]&&h[E]!==""&&E!=="page"&&w.append(E,h[E])});const I=await fetch(`/api/v1/admin/payments/export?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(I.ok){const E=await I.blob(),K=window.URL.createObjectURL(E),y=document.createElement("a");y.href=K,y.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(y),y.click(),window.URL.revokeObjectURL(K),document.body.removeChild(y)}}catch(w){console.error("Erreur export:",w),alert("Erreur lors de l'export des données")}},te=w=>new Intl.NumberFormat("fr-FR").format(w),k=w=>new Date(w).toLocaleDateString("fr-FR"),V=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=w=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[w]||w,c=w=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[w]||"bg-gray-100 text-gray-800",S=w=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[w]||w,se=w=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[w]||"bg-gray-100 text-gray-800";return ae(()=>{g(),B()}),{loading:x,checkingPayments:t,showDetailsModal:f,selectedPayment:s,payments:v,organizers:A,pagination:o,stats:i,gatewayStats:p,dailyStats:M,filters:h,maxDailyVolume:P,loadPayments:g,loadOrganizers:B,debouncedSearch:r,changePage:D,resetFilters:J,refreshPayments:Y,viewPaymentDetails:O,checkPaymentStatus:W,checkPendingPayments:G,processRefund:Z,exportPayments:oe,formatAmount:te,formatDate:k,formatDateTime:V,getGatewayName:m,getGatewayBadgeClass:c,getStatusName:S,getStatusBadgeClass:se}}},pi={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},xi={class:"mb-8"},bi={class:"flex items-center justify-between"},fi={class:"flex space-x-3"},yi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},vi={class:"bg-white rounded-lg shadow p-6"},hi={class:"flex items-center"},wi={class:"ml-4"},_i={class:"text-2xl font-bold text-blue-600"},ki={class:"bg-white rounded-lg shadow p-6"},Ci={class:"flex items-center"},Si={class:"ml-4"},ji={class:"text-2xl font-bold text-green-600"},Ai={class:"bg-white rounded-lg shadow p-6"},Mi={class:"flex items-center"},Pi={class:"ml-4"},Oi={class:"text-2xl font-bold text-yellow-600"},zi={class:"bg-white rounded-lg shadow p-6"},Ui={class:"flex items-center"},Di={class:"ml-4"},Bi={class:"text-2xl font-bold text-red-600"},Vi={class:"bg-white rounded-lg shadow p-6"},Ei={class:"flex items-center"},Fi={class:"ml-4"},Ti={class:"text-2xl font-bold text-purple-600"},Ii={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},$i={class:"bg-white rounded-lg shadow p-6"},Ri={key:0,class:"text-center text-gray-500 py-8"},Ni={key:1,class:"space-y-4"},Li={class:"flex items-center"},qi={class:"font-medium text-gray-900"},Hi={class:"text-sm text-gray-600"},Gi={class:"text-right"},Xi={class:"font-bold text-gray-900"},Ji={class:"text-sm text-gray-600"},Wi={class:"bg-white rounded-lg shadow p-6"},Qi={key:0,class:"text-center text-gray-500 py-8"},Yi={key:1,class:"space-y-3"},Zi={class:"font-medium text-gray-900"},Ki={class:"text-sm text-gray-600"},ed={class:"text-right"},td={class:"font-bold text-gray-900"},sd={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},od={class:"bg-white rounded-lg shadow p-6 mb-8"},ad={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},nd=["value"],ld={class:"flex justify-between items-center mt-4"},rd={class:"flex space-x-3"},id=["disabled"],dd={class:"bg-white rounded-lg shadow"},cd={class:"p-6 border-b"},md={class:"flex justify-between items-center"},ud={class:"text-sm text-gray-600"},gd={key:0,class:"p-8 text-center"},pd={key:1,class:"p-8 text-center text-gray-500"},xd={key:2,class:"overflow-x-auto"},bd={class:"w-full"},fd={class:"divide-y divide-gray-200"},yd={class:"px-6 py-4 text-sm font-mono text-blue-600"},vd=["onClick"],hd={class:"px-6 py-4 text-sm text-gray-900"},wd={class:"font-medium"},_d={class:"text-gray-500"},kd={class:"px-6 py-4 text-sm text-gray-900"},Cd={class:"font-medium"},Sd={class:"text-gray-500"},jd={class:"px-6 py-4 text-sm font-medium text-gray-900"},Ad={class:"px-6 py-4 text-sm"},Md={class:"px-6 py-4 text-sm"},Pd={class:"px-6 py-4 text-sm text-gray-500"},Od={class:"px-6 py-4 text-sm space-x-2"},zd=["onClick"],Ud=["onClick"],Dd=["onClick"],Bd={key:3,class:"p-6 border-t"},Vd={class:"flex justify-between items-center"},Ed={class:"text-sm text-gray-700"},Fd={class:"flex space-x-2"},Td=["disabled"],Id={class:"px-3 py-1 text-sm text-gray-600"},$d=["disabled"],Rd={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Nd={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Ld={class:"flex justify-between items-center mb-4"},qd={key:0,class:"space-y-6"},Hd={class:"grid grid-cols-2 gap-6"},Gd={class:"space-y-4"},Xd={class:"space-y-2"},Jd={class:"text-sm font-mono text-gray-900"},Wd={class:"text-sm font-bold text-gray-900"},Qd={class:"space-y-4"},Yd={class:"space-y-2"},Zd={class:"text-sm text-gray-900"},Kd={key:0},ec={class:"text-sm text-gray-900"},tc={key:1},sc={class:"text-sm font-mono text-gray-900"},oc={key:0,class:"border-t pt-6"},ac={class:"grid grid-cols-2 gap-4"},nc={class:"text-sm font-mono text-gray-900"},lc={class:"text-sm text-gray-900"},rc={class:"text-sm text-gray-900"},ic={class:"text-sm text-gray-900"},dc={key:1,class:"border-t pt-6"},cc={class:"bg-gray-50 p-4 rounded-lg"},mc={class:"text-xs text-gray-700 whitespace-pre-wrap"},uc={class:"border-t pt-6 flex justify-end space-x-3"};function gc(x,t,f,s,v,A){return l(),n("div",pi,[e("div",xi,[e("div",bi,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",fi,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.refreshPayments&&s.refreshPayments(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),T(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.exportPayments&&s.exportPayments(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),T(" Exporter ",-1)])])])])]),e("div",yi,[e("div",vi,[e("div",hi,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",wi,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",_i,a(s.stats.total_payments||0),1)])])]),e("div",ki,[e("div",Ci,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Si,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",ji,a(s.stats.successful_payments||0),1)])])]),e("div",Ai,[e("div",Mi,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Pi,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",Oi,a(s.stats.pending_payments||0),1)])])]),e("div",zi,[e("div",Ui,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Di,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",Bi,a(s.stats.failed_payments||0),1)])])]),e("div",Vi,[e("div",Ei,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Fi,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",Ti,a(s.formatAmount(s.stats.total_volume||0))+" XAF",1)])])])]),e("div",Ii,[e("div",$i,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),s.gatewayStats.length===0?(l(),n("div",Ri," Aucune donnée disponible ")):(l(),n("div",Ni,[(l(!0),n(z,null,U(s.gatewayStats,o=>(l(),n("div",{key:o.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Li,[e("div",{class:$(["p-2 rounded-lg mr-3",s.getGatewayBadgeClass(o.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",qi,a(s.getGatewayName(o.gateway)),1),e("p",Hi,a(o.count)+" paiement(s)",1)])]),e("div",Gi,[e("p",Xi,a(s.formatAmount(o.volume))+" XAF",1),e("p",Ji,a(Math.round(o.count/s.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",Wi,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),s.dailyStats.length===0?(l(),n("div",Qi," Aucune donnée disponible ")):(l(),n("div",Yi,[(l(!0),n(z,null,U(s.dailyStats,o=>(l(),n("div",{key:o.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Zi,a(s.formatDate(o.date)),1),e("p",Ki,a(o.count)+" paiement(s)",1)]),e("div",ed,[e("p",td,a(s.formatAmount(o.volume))+" XAF",1),e("div",sd,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:pe(`width: ${Math.min(o.volume/s.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",od,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ad,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.search=o),onInput:t[3]||(t[3]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),onChange:t[5]||(t[5]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[re('<option value="" data-v-fc273c00>Tous les statuts</option><option value="success" data-v-fc273c00>Réussi</option><option value="pending" data-v-fc273c00>En attente</option><option value="failed" data-v-fc273c00>Échoué</option><option value="cancelled" data-v-fc273c00>Annulé</option>',5)])],544),[[F,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),d(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.filters.gateway=o),onChange:t[7]||(t[7]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[F,s.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),d(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.filters.organizer_id=o),onChange:t[9]||(t[9]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),n(z,null,U(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,nd))),128))],544),[[F,s.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.filters.date_from=o),onChange:t[11]||(t[11]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.filters.date_to=o),onChange:t[13]||(t[13]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_to]])])]),e("div",ld,[e("button",{onClick:t[14]||(t[14]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",rd,[e("button",{onClick:t[15]||(t[15]=(...o)=>s.checkPendingPayments&&s.checkPendingPayments(...o)),disabled:s.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},a(s.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,id)])])]),e("div",dd,[e("div",cd,[e("div",md,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",ud,a(s.pagination?`${s.pagination.total} paiement(s) trouvé(s)`:""),1)])]),s.loading?(l(),n("div",gd,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payments.length===0?(l(),n("div",pd," Aucun paiement trouvé ")):(l(),n("div",xd,[e("table",bd,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",fd,[(l(!0),n(z,null,U(s.payments,o=>(l(),n("tr",{key:o.id},[e("td",yd,[e("button",{onClick:i=>s.viewPaymentDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,vd)]),e("td",hd,[e("div",null,[e("div",wd,"#"+a(o.order?.reference||"-"),1),e("div",_d,a(o.order?.event?.title||"-"),1)])]),e("td",kd,[e("div",null,[e("div",Cd,a(o.order?.customer_name||"-"),1),e("div",Sd,a(o.order?.customer_email||"-"),1)])]),e("td",jd,a(s.formatAmount(o.amount))+" XAF",1),e("td",Ad,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Md,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",Pd,a(s.formatDateTime(o.created_at)),1),e("td",Od,[e("button",{onClick:i=>s.viewPaymentDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,zd),o.status==="pending"?(l(),n("button",{key:0,onClick:i=>s.checkPaymentStatus(o),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,Ud)):b("",!0),o.status==="success"?(l(),n("button",{key:1,onClick:i=>s.processRefund(o),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,Dd)):b("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),n("div",Bd,[e("div",Vd,[e("div",Ed," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" paiements ",1),e("div",Fd,[e("button",{onClick:t[16]||(t[16]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Td),e("span",Id," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,$d)])])])):b("",!0)]),s.showDetailsModal?(l(),n("div",Rd,[e("div",Nd,[e("div",Ld,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedPayment?(l(),n("div",qd,[e("div",Hd,[e("div",Gd,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",Xd,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Jd,"#"+a(s.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",Wd,a(s.formatAmount(s.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(s.selectedPayment.gateway)])},a(s.getGatewayName(s.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedPayment.status)])},a(s.getStatusName(s.selectedPayment.status)),3)])])])]),e("div",Qd,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",Yd,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",Zd,a(s.formatDateTime(s.selectedPayment.created_at)),1)]),s.selectedPayment.processed_at?(l(),n("div",Kd,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",ec,a(s.formatDateTime(s.selectedPayment.processed_at)),1)])):b("",!0),s.selectedPayment.gateway_transaction_id?(l(),n("div",tc,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",sc,a(s.selectedPayment.gateway_transaction_id),1)])):b("",!0)])])])]),s.selectedPayment.order?(l(),n("div",oc,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",ac,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",nc,a(s.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",lc,a(s.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",rc,a(s.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",ic,a(s.selectedPayment.order.customer_email),1)])])])):b("",!0),s.selectedPayment.gateway_response?(l(),n("div",dc,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",cc,[e("pre",mc,a(JSON.stringify(s.selectedPayment.gateway_response,null,2)),1)])])):b("",!0),e("div",uc,[s.selectedPayment.status==="pending"?(l(),n("button",{key:0,onClick:t[19]||(t[19]=o=>s.checkPaymentStatus(s.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):b("",!0),s.selectedPayment.status==="success"?(l(),n("button",{key:1,onClick:t[20]||(t[20]=o=>s.processRefund(s.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):b("",!0),e("button",{onClick:t[21]||(t[21]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):b("",!0)])])):b("",!0)])}const pc=ee(gi,[["render",gc],["__scopeId","data-v-fc273c00"]]),Q0=Object.freeze(Object.defineProperty({__proto__:null,default:pc},Symbol.toStringTag,{value:"Module"})),xc={name:"PayoutDashboard",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(!1),A=u([]),o=u([]),i=u([]),p=H({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),M=H({status:"",gateway:"",is_automatic:""}),h=H({organizer_id:"",gateway:"",amount:"",phone_number:""}),_=async()=>{x.value=!0;try{const m=new URLSearchParams;M.status&&m.append("status",M.status),M.gateway&&m.append("gateway",M.gateway),M.is_automatic&&m.append("is_automatic",M.is_automatic);const S=await(await fetch(`/api/v1/admin/payouts?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();S.success&&(A.value=S.data.payouts)}catch(m){console.error("Erreur chargement payouts:",m)}finally{x.value=!1}},P=async()=>{try{const c=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&Object.assign(p,c.data.stats)}catch(m){console.error("Erreur chargement stats:",m)}},g=async()=>{f.value=!0;try{const c=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&(i.value=c.data.balances)}catch(m){console.error("Erreur chargement solde SHAP:",m)}finally{f.value=!1}},B=async()=>{t.value=!0;try{const c=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&(alert(`Vérification terminée: ${c.data.results.length} payouts vérifiés`),_())}catch(m){console.error("Erreur vérification batch:",m)}finally{t.value=!1}},r=async m=>{m.checking=!0;try{const S=await(await fetch(`/api/v1/admin/payouts/${m.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();S.success&&(alert(`Statut: ${S.data.current_status}`),_())}catch(c){console.error("Erreur vérification payout:",c)}finally{m.checking=!1}},D=()=>{s.value=!0,J()},J=async()=>{try{const c=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&(o.value=c.data.organizers)}catch(m){console.error("Erreur chargement organisateurs:",m)}},Y=async()=>{v.value=!0;try{const c=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(h)})).json();c.success?(alert("Payout créé avec succès"),s.value=!1,Object.assign(h,{organizer_id:"",gateway:"",amount:"",phone_number:""}),_(),P()):alert(c.message||"Erreur lors de la création")}catch(m){console.error("Erreur création payout:",m),alert("Erreur technique")}finally{v.value=!1}},O=()=>{Object.assign(M,{status:"",gateway:"",is_automatic:""}),_()},W=m=>{alert(`Détails du payout #${m.id}
Référence: ${m.reference}
Montant: ${G(m.amount)} XAF`)},G=m=>new Intl.NumberFormat("fr-FR").format(m),Z=m=>new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),oe=m=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[m]||m,te=m=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[m]||"bg-gray-100 text-gray-800",k=m=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[m]||m,V=m=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[m]||"bg-gray-100 text-gray-800";return ae(()=>{_(),P()}),{loading:x,checkingAll:t,loadingShapBalance:f,showCreateModal:s,creatingPayout:v,payouts:A,organizers:o,shapBalance:i,stats:p,filters:M,newPayout:h,loadPayouts:_,loadStats:P,loadShapBalance:g,checkAllPending:B,checkPayoutStatus:r,openCreatePayoutModal:D,createPayout:Y,resetFilters:O,viewPayoutDetails:W,formatAmount:G,formatDate:Z,getStatusName:oe,getStatusBadgeClass:te,getGatewayName:k,getGatewayBadgeClass:V}}},bc={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},fc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},yc={class:"bg-white rounded-lg shadow p-6"},vc={class:"flex items-center"},hc={class:"ml-4"},wc={class:"text-2xl font-bold text-gray-900"},_c={class:"bg-white rounded-lg shadow p-6"},kc={class:"flex items-center"},Cc={class:"ml-4"},Sc={class:"text-2xl font-bold text-green-600"},jc={class:"bg-white rounded-lg shadow p-6"},Ac={class:"flex items-center"},Mc={class:"ml-4"},Pc={class:"text-2xl font-bold text-yellow-600"},Oc={class:"bg-white rounded-lg shadow p-6"},zc={class:"flex items-center"},Uc={class:"ml-4"},Dc={class:"text-2xl font-bold text-purple-600"},Bc={class:"flex flex-wrap gap-4 mb-8"},Vc=["disabled"],Ec=["disabled"],Fc={key:0,class:"mb-8"},Tc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ic={class:"font-semibold text-gray-900"},$c={class:"text-2xl font-bold text-green-600"},Rc={class:"text-sm text-gray-500"},Nc={class:"bg-white rounded-lg shadow p-6 mb-8"},Lc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},qc={class:"flex items-end"},Hc={class:"bg-white rounded-lg shadow"},Gc={key:0,class:"p-8 text-center"},Xc={key:1,class:"p-8 text-center text-gray-500"},Jc={key:2,class:"overflow-x-auto"},Wc={class:"w-full"},Qc={class:"divide-y divide-gray-200"},Yc={class:"px-6 py-4 text-sm text-gray-900"},Zc={class:"px-6 py-4 text-sm text-gray-900"},Kc={class:"px-6 py-4 text-sm font-medium text-gray-900"},em={class:"px-6 py-4 text-sm text-gray-900"},tm={class:"px-6 py-4 text-sm"},sm={class:"px-6 py-4 text-sm text-gray-900"},om={class:"px-6 py-4 text-sm text-gray-500"},am={class:"px-6 py-4 text-sm space-x-2"},nm=["onClick","disabled"],lm=["onClick"],rm={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},im={class:"bg-white rounded-lg p-6 w-full max-w-md"},dm={class:"space-y-4"},cm=["value"],mm={class:"flex justify-end space-x-3 mt-6"},um=["disabled"];function gm(x,t,f,s,v,A){return l(),n("div",bc,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",fc,[e("div",yc,[e("div",vc,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",hc,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",wc,a(s.stats.total_payouts||0),1)])])]),e("div",_c,[e("div",kc,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",Cc,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Sc,a(s.stats.successful_payouts||0),1)])])]),e("div",jc,[e("div",Ac,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Mc,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",Pc,a(s.stats.pending_payouts||0),1)])])]),e("div",Oc,[e("div",zc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Uc,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",Dc,a(s.stats.automatic_payouts||0),1)])])])]),e("div",Bc,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreatePayoutModal&&s.openCreatePayoutModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.checkAllPending&&s.checkAllPending(...o)),disabled:s.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),T(" "+a(s.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,Vc),e("button",{onClick:t[2]||(t[2]=(...o)=>s.loadShapBalance&&s.loadShapBalance(...o)),disabled:s.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),T(" "+a(s.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,Ec)]),s.shapBalance.length>0?(l(),n("div",Fc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",Tc,[(l(!0),n(z,null,U(s.shapBalance,o=>(l(),n("div",{key:o.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",Ic,a(o.payment_system_displayed_name),1),e("p",$c,a(s.formatAmount(o.amount))+" XAF",1),e("p",Rc,"Dernière MAJ: "+a(o.last_updated),1)]))),128))])])):b("",!0),e("div",Nc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Lc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[re('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[F,s.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.gateway=o),onChange:t[6]||(t[6]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[F,s.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),d(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.is_automatic=o),onChange:t[8]||(t[8]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[F,s.filters.is_automatic]])]),e("div",qc,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Hc,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),s.loading?(l(),n("div",Gc,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payouts.length===0?(l(),n("div",Xc," Aucun payout trouvé ")):(l(),n("div",Jc,[e("table",Wc,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Qc,[(l(!0),n(z,null,U(s.payouts,o=>(l(),n("tr",{key:o.id},[e("td",Yc,"#"+a(o.id),1),e("td",Zc,a(o.organizer?.name),1),e("td",Kc,a(s.formatAmount(o.amount))+" XAF",1),e("td",em,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",tm,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",sm,[e("span",{class:$(["inline-flex px-2 py-1 text-xs rounded-full",o.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},a(o.is_automatic?"Auto":"Manuel"),3)]),e("td",om,a(s.formatDate(o.created_at)),1),e("td",am,[e("button",{onClick:i=>s.checkPayoutStatus(o),disabled:o.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},a(o.checking?"Vérif...":"Vérifier"),9,nm),e("button",{onClick:i=>s.viewPayoutDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,lm)])]))),128))])])]))]),s.showCreateModal?(l(),n("div",rm,[e("div",im,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=ne((...o)=>s.createPayout&&s.createPayout(...o),["prevent"]))},[e("div",dm,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),d(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.newPayout.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(l(!0),n(z,null,U(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,cm))),128))],512),[[F,s.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),d(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.newPayout.gateway=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[F,s.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.newPayout.amount=o),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.newPayout.phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.newPayout.phone_number]])])]),e("div",mm,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>s.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.creatingPayout?"Création...":"Créer le Payout"),9,um)])],32)])])):b("",!0)])}const pm=ee(xc,[["render",gm],["__scopeId","data-v-e96f5ab8"]]),Y0=Object.freeze(Object.defineProperty({__proto__:null,default:pm},Symbol.toStringTag,{value:"Module"})),xm={name:"OrganizerBalanceConfig",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(null),v=u([]),A=H({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),o=H({gateway:"",auto_payout_enabled:""}),i=H({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),p=async()=>{x.value=!0;try{const r=new URLSearchParams;o.gateway&&r.append("gateway",o.gateway),o.auto_payout_enabled&&r.append("auto_payout_enabled",o.auto_payout_enabled);const J=await(await fetch(`/api/v1/admin/payouts/balances?${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();J.success&&(v.value=J.data.balances,Object.assign(A,J.data.stats))}catch(r){console.error("Erreur chargement balances:",r)}finally{x.value=!1}},M=r=>{s.value=r,Object.assign(i,{auto_payout_enabled:r.auto_payout_enabled,auto_payout_threshold:r.auto_payout_threshold,payout_phone_number:r.payout_phone_number||""}),t.value=!0},h=async()=>{f.value=!0;try{const D=await(await fetch(`/api/v1/admin/organizers/${s.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({gateway:s.value.gateway,...i})})).json();D.success?(alert("Configuration mise à jour avec succès"),t.value=!1,p()):alert(D.message||"Erreur lors de la mise à jour")}catch(r){console.error("Erreur sauvegarde config:",r),alert("Erreur technique")}finally{f.value=!1}},_=()=>{Object.assign(o,{gateway:"",auto_payout_enabled:""}),p()},P=r=>new Intl.NumberFormat("fr-FR").format(r),g=r=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[r]||r,B=r=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[r]||"bg-gray-100 text-gray-800";return ae(()=>{p()}),{loading:x,showConfigModal:t,savingConfig:f,editingBalance:s,balances:v,stats:A,filters:o,configForm:i,loadBalances:p,editBalance:M,saveConfiguration:h,resetFilters:_,formatAmount:P,getGatewayName:g,getGatewayBadgeClass:B}}},bm={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},fm={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},ym={class:"bg-white rounded-lg shadow p-6"},vm={class:"flex items-center"},hm={class:"ml-4"},wm={class:"text-2xl font-bold text-gray-900"},_m={class:"bg-white rounded-lg shadow p-6"},km={class:"flex items-center"},Cm={class:"ml-4"},Sm={class:"text-2xl font-bold text-green-600"},jm={class:"bg-white rounded-lg shadow p-6"},Am={class:"flex items-center"},Mm={class:"ml-4"},Pm={class:"text-2xl font-bold text-yellow-600"},Om={class:"bg-white rounded-lg shadow p-6"},zm={class:"flex items-center"},Um={class:"ml-4"},Dm={class:"text-2xl font-bold text-purple-600"},Bm={class:"bg-white rounded-lg shadow p-6 mb-8"},Vm={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Em={class:"flex items-end"},Fm={class:"bg-white rounded-lg shadow"},Tm={key:0,class:"p-8 text-center"},Im={key:1,class:"p-8 text-center text-gray-500"},$m={key:2,class:"overflow-x-auto"},Rm={class:"w-full"},Nm={class:"divide-y divide-gray-200"},Lm={class:"px-6 py-4 text-sm font-medium text-gray-900"},qm={class:"px-6 py-4 text-sm text-gray-900"},Hm={class:"px-6 py-4 text-sm font-medium text-gray-900"},Gm={class:"px-6 py-4 text-sm"},Xm={class:"px-6 py-4 text-sm text-gray-900"},Jm={class:"px-6 py-4 text-sm text-gray-900"},Wm={class:"px-6 py-4 text-sm space-x-2"},Qm=["onClick"],Ym={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Zm={class:"bg-white rounded-lg p-6 w-full max-w-md"},Km={class:"text-lg font-bold mb-4"},eu={class:"space-y-4"},tu=["value"],su=["value"],ou={class:"flex items-center space-x-2"},au={key:0},nu={class:"flex justify-end space-x-3 mt-6"},lu=["disabled"];function ru(x,t,f,s,v,A){return l(),n("div",bm,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",fm,[e("div",ym,[e("div",vm,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",hm,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",wm,a(s.stats.total_organizers||0),1)])])]),e("div",_m,[e("div",km,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Cm,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",Sm,a(s.stats.auto_payout_enabled||0),1)])])]),e("div",jm,[e("div",Am,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Mm,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",Pm,a(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])]),e("div",Om,[e("div",zm,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Um,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",Dm,a(s.stats.active_configs||0),1)])])])]),e("div",Bm,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Vm,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filters.gateway=o),onChange:t[1]||(t[1]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[F,s.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),d(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.auto_payout_enabled=o),onChange:t[3]||(t[3]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[F,s.filters.auto_payout_enabled]])]),e("div",Em,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Fm,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),s.loading?(l(),n("div",Tm,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.balances.length===0?(l(),n("div",Im," Aucune balance trouvée ")):(l(),n("div",$m,[e("table",Rm,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Nm,[(l(!0),n(z,null,U(s.balances,o=>(l(),n("tr",{key:`${o.organizer_id}-${o.gateway}`},[e("td",Lm,a(o.organizer?.name),1),e("td",qm,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Hm,a(s.formatAmount(o.balance))+" XAF",1),e("td",Gm,[e("span",{class:$(["inline-flex px-2 py-1 text-xs rounded-full",o.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",Xm,a(s.formatAmount(o.auto_payout_threshold))+" XAF",1),e("td",Jm,a(o.payout_phone_number||"-"),1),e("td",Wm,[e("button",{onClick:i=>s.editBalance(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Qm)])]))),128))])])]))]),s.showConfigModal?(l(),n("div",Ym,[e("div",Zm,[e("h3",Km,"Configuration Payout - "+a(s.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=ne((...o)=>s.saveConfiguration&&s.saveConfiguration(...o),["prevent"]))},[e("div",eu,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:s.getGatewayName(s.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,tu)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:s.formatAmount(s.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,su)]),e("div",null,[e("label",ou,[d(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>s.configForm.auto_payout_enabled=o),class:"rounded border-gray-300"},null,512),[[Q,s.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),s.configForm.auto_payout_enabled?(l(),n("div",au,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.configForm.auto_payout_threshold=o),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):b("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.configForm.payout_phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",nu,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.savingConfig?"Enregistrement...":"Enregistrer"),9,lu)])],32)])])):b("",!0)])}const iu=ee(xm,[["render",ru],["__scopeId","data-v-4c3e0ab1"]]),Z0=Object.freeze(Object.defineProperty({__proto__:null,default:iu},Symbol.toStringTag,{value:"Module"})),du={name:"AdminReports",components:{HomeIcon:ue,UsersIcon:me,CalendarIcon:ge,CreditCardIcon:ce,ChartBarIcon:de,CogIcon:ie,CurrencyDollarIcon:fe},setup(){ye();const x=u(window.innerWidth>=1024),t=u([{id:1,type:"Rapport financier",period:"Août 2025",created_at:new Date("2025-09-01")},{id:2,type:"Rapport événements",period:"Juillet 2025",created_at:new Date("2025-08-01")},{id:3,type:"Rapport utilisateurs",period:"Juin 2025",created_at:new Date("2025-07-01")}]);return{sidebarOpen:x,reports:t,generateReport:o=>{console.log("Generating report:",o)},downloadReport:o=>{console.log("Downloading report:",o)},viewReport:o=>{console.log("Viewing report:",o)},formatDate:o=>o.toLocaleDateString("fr-FR")}}},cu={class:"admin-reports min-h-screen bg-gray-100 font-primea"},mu={class:"mt-6"},uu={class:"px-4"},gu={class:"lg:ml-64 transition-all duration-300"},pu={class:"p-6"},xu={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},bu={class:"bg-white rounded-lg shadow-sm p-6 text-center"},fu={class:"bg-primea-blue p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},yu={class:"bg-white rounded-lg shadow-sm p-6 text-center"},vu={class:"bg-primea-yellow p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},hu={class:"bg-white rounded-lg shadow-sm p-6 text-center"},wu={class:"bg-green-500 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},_u={class:"bg-white rounded-lg shadow-sm overflow-hidden"},ku={class:"overflow-x-auto"},Cu={class:"min-w-full divide-y divide-gray-200"},Su={class:"bg-white divide-y divide-gray-200"},ju={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Au={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Mu={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pu={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ou=["onClick"],zu=["onClick"];function Uu(x,t,f,s,v,A){const o=N("HomeIcon"),i=N("router-link"),p=N("UsersIcon"),M=N("CalendarIcon"),h=N("CreditCardIcon"),_=N("ChartBarIcon"),P=N("CogIcon"),g=N("CurrencyDollarIcon");return l(),n("div",cu,[e("div",{class:$(["fixed inset-y-0 left-0 w-64 bg-primea-blue text-white z-30",{"-translate-x-full":!s.sidebarOpen,"translate-x-0":s.sidebarOpen}])},[t[9]||(t[9]=e("div",{class:"flex items-center justify-between p-4 border-b border-primea-blue-dark"},[e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-8"}),e("span",{class:"font-bold text-lg font-primea"},"Administration")])],-1)),e("nav",mu,[e("div",uu,[C(i,{to:"/admin/dashboard",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(o,{class:"w-5 h-5 mr-3"}),t[3]||(t[3]=T(" Tableau de bord ",-1))]),_:1}),C(i,{to:"/admin/users",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(p,{class:"w-5 h-5 mr-3"}),t[4]||(t[4]=T(" Utilisateurs ",-1))]),_:1}),C(i,{to:"/admin/events",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(M,{class:"w-5 h-5 mr-3"}),t[5]||(t[5]=T(" Événements ",-1))]),_:1}),C(i,{to:"/admin/transactions",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(h,{class:"w-5 h-5 mr-3"}),t[6]||(t[6]=T(" Transactions ",-1))]),_:1}),C(i,{to:"/admin/reports",class:"flex items-center px-4 py-3 text-white bg-primea-yellow text-primea-blue rounded-primea-lg mb-2 font-primea font-semibold"},{default:X(()=>[C(_,{class:"w-5 h-5 mr-3"}),t[7]||(t[7]=T(" Rapports ",-1))]),_:1}),C(i,{to:"/admin/settings",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(P,{class:"w-5 h-5 mr-3"}),t[8]||(t[8]=T(" Paramètres ",-1))]),_:1})])])],2),e("div",gu,[t[19]||(t[19]=e("header",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"px-6 py-4"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Rapports et analytics")])],-1)),e("main",pu,[e("div",xu,[e("div",bu,[e("div",fu,[C(g,{class:"w-8 h-8 text-white"})]),t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-2"},"Rapport financier",-1)),t[11]||(t[11]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, remboursements",-1)),e("button",{onClick:t[0]||(t[0]=B=>s.generateReport("financial")),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Générer ")]),e("div",yu,[e("div",vu,[C(M,{class:"w-8 h-8 text-primea-blue"})]),t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-2"},"Rapport événements",-1)),t[13]||(t[13]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes, tendances",-1)),e("button",{onClick:t[1]||(t[1]=B=>s.generateReport("events")),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Générer ")]),e("div",hu,[e("div",wu,[C(p,{class:"w-8 h-8 text-white"})]),t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-2"},"Rapport utilisateurs",-1)),t[15]||(t[15]=e("p",{class:"text-gray-600 text-sm mb-4"},"Croissance, activité, segments",-1)),e("button",{onClick:t[2]||(t[2]=B=>s.generateReport("users")),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Générer ")])]),e("div",_u,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-primea-blue font-primea"},"Historique des rapports")],-1)),e("div",ku,[e("table",Cu,[t[17]||(t[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Su,[(l(!0),n(z,null,U(s.reports,B=>(l(),n("tr",{key:B.id},[e("td",ju,a(B.type),1),e("td",Au,a(B.period),1),e("td",Mu,a(s.formatDate(B.created_at)),1),t[16]||(t[16]=e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},"Prêt")],-1)),e("td",Pu,[e("button",{onClick:r=>s.downloadReport(B),class:"text-primea-blue hover:text-primea-yellow mr-3"},"Télécharger",8,Ou),e("button",{onClick:r=>s.viewReport(B),class:"text-green-600 hover:text-green-900"},"Voir",8,zu)])]))),128))])])])])])])])}const Du=ee(du,[["render",Uu],["__scopeId","data-v-7e83088a"]]),K0=Object.freeze(Object.defineProperty({__proto__:null,default:Du},Symbol.toStringTag,{value:"Module"})),Bu={name:"AdminSettings",components:{HomeIcon:ue,UsersIcon:me,CalendarIcon:ge,CreditCardIcon:ce,ChartBarIcon:de,CogIcon:ie},setup(){const x=u(window.innerWidth>=1024),t=u({platformName:"Primea Ticketing",siteUrl:"https://primea.ga",contactEmail:"admin@primea.ga",timezone:"Africa/Libreville",paymentMethods:{airtel:!0,moov:!0,cards:!0},notifications:{email:!0,sms:!1,push:!0},maintenanceMode:!1});return{sidebarOpen:x,settings:t,saveSettings:()=>{console.log("Saving settings:",t.value)},resetSettings:()=>{t.value={platformName:"Primea Ticketing",siteUrl:"https://primea.ga",contactEmail:"admin@primea.ga",timezone:"Africa/Libreville",paymentMethods:{airtel:!0,moov:!0,cards:!0},notifications:{email:!0,sms:!1,push:!0},maintenanceMode:!1}}}}},Vu={class:"admin-settings min-h-screen bg-gray-100 font-primea"},Eu={class:"mt-6"},Fu={class:"px-4"},Tu={class:"lg:ml-64 transition-all duration-300"},Iu={class:"p-6"},$u={class:"max-w-4xl mx-auto space-y-6"},Ru={class:"bg-white rounded-lg shadow-sm p-6"},Nu={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Lu={class:"bg-white rounded-lg shadow-sm p-6"},qu={class:"space-y-4"},Hu={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Gu={class:"flex items-center"},Xu={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Ju={class:"flex items-center"},Wu={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Qu={class:"flex items-center"},Yu={class:"bg-white rounded-lg shadow-sm p-6"},Zu={class:"space-y-4"},Ku={class:"flex items-center"},e0={class:"flex items-center"},t0={class:"flex items-center"},s0={class:"bg-white rounded-lg shadow-sm p-6"},o0={class:"flex items-center justify-between"},a0={class:"flex items-center"},n0={class:"flex justify-end space-x-4"};function l0(x,t,f,s,v,A){const o=N("HomeIcon"),i=N("router-link"),p=N("UsersIcon"),M=N("CalendarIcon"),h=N("CreditCardIcon"),_=N("ChartBarIcon"),P=N("CogIcon");return l(),n("div",Vu,[e("div",{class:$(["fixed inset-y-0 left-0 w-64 bg-primea-blue text-white z-30",{"-translate-x-full":!s.sidebarOpen,"translate-x-0":s.sidebarOpen}])},[t[19]||(t[19]=e("div",{class:"flex items-center justify-between p-4 border-b border-primea-blue-dark"},[e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-8"}),e("span",{class:"font-bold text-lg font-primea"},"Administration")])],-1)),e("nav",Eu,[e("div",Fu,[C(i,{to:"/admin/dashboard",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(o,{class:"w-5 h-5 mr-3"}),t[13]||(t[13]=T("Tableau de bord",-1))]),_:1}),C(i,{to:"/admin/users",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(p,{class:"w-5 h-5 mr-3"}),t[14]||(t[14]=T("Utilisateurs",-1))]),_:1}),C(i,{to:"/admin/events",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(M,{class:"w-5 h-5 mr-3"}),t[15]||(t[15]=T("Événements",-1))]),_:1}),C(i,{to:"/admin/transactions",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(h,{class:"w-5 h-5 mr-3"}),t[16]||(t[16]=T("Transactions",-1))]),_:1}),C(i,{to:"/admin/reports",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(_,{class:"w-5 h-5 mr-3"}),t[17]||(t[17]=T("Rapports",-1))]),_:1}),C(i,{to:"/admin/settings",class:"flex items-center px-4 py-3 text-white bg-primea-yellow text-primea-blue rounded-primea-lg mb-2 font-primea font-semibold"},{default:X(()=>[C(P,{class:"w-5 h-5 mr-3"}),t[18]||(t[18]=T("Paramètres",-1))]),_:1})])])],2),e("div",Tu,[t[40]||(t[40]=e("header",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"px-6 py-4"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Paramètres système")])],-1)),e("main",Iu,[e("div",$u,[e("div",Ru,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Configuration générale",-1)),e("div",Nu,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme",-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>s.settings.platformName=g),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.settings.platformName]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=g=>s.settings.siteUrl=g),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.settings.siteUrl]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=g=>s.settings.contactEmail=g),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.settings.contactEmail]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),d(e("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>s.settings.timezone=g),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},[...t[23]||(t[23]=[e("option",{value:"Africa/Libreville"},"Africa/Libreville (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Europe/Paris (GMT+1)",-1)])],512),[[F,s.settings.timezone]])])])]),e("div",Lu,[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Moyens de paiement",-1)),e("div",qu,[e("div",Hu,[t[27]||(t[27]=e("div",{class:"flex items-center"},[e("img",{src:"/images/am.png",alt:"Airtel Money",class:"h-8 w-12 mr-3"}),e("div",null,[e("h4",{class:"font-medium"},"Airtel Money"),e("p",{class:"text-sm text-gray-600"},"Paiements mobile Airtel")])],-1)),e("label",Gu,[d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=g=>s.settings.paymentMethods.airtel=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.paymentMethods.airtel]]),t[26]||(t[26]=e("span",{class:"ml-2 text-sm"},"Actif",-1))])]),e("div",Xu,[t[29]||(t[29]=e("div",{class:"flex items-center"},[e("img",{src:"/images/mm.png",alt:"Moov Money",class:"h-8 w-12 mr-3"}),e("div",null,[e("h4",{class:"font-medium"},"Moov Money"),e("p",{class:"text-sm text-gray-600"},"Paiements mobile Moov")])],-1)),e("label",Ju,[d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=g=>s.settings.paymentMethods.moov=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.paymentMethods.moov]]),t[28]||(t[28]=e("span",{class:"ml-2 text-sm"},"Actif",-1))])]),e("div",Wu,[t[31]||(t[31]=e("div",{class:"flex items-center"},[e("img",{src:"/images/vm.png",alt:"Visa",class:"h-8 w-12 mr-3"}),e("div",null,[e("h4",{class:"font-medium"},"Cartes bancaires"),e("p",{class:"text-sm text-gray-600"},"Visa, Mastercard")])],-1)),e("label",Qu,[d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=g=>s.settings.paymentMethods.cards=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.paymentMethods.cards]]),t[30]||(t[30]=e("span",{class:"ml-2 text-sm"},"Actif",-1))])])])]),e("div",Yu,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Notifications",-1)),e("div",Zu,[e("label",Ku,[d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=g=>s.settings.notifications.email=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.notifications.email]]),t[33]||(t[33]=e("span",{class:"ml-3"},"Notifications par email",-1))]),e("label",e0,[d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=g=>s.settings.notifications.sms=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.notifications.sms]]),t[34]||(t[34]=e("span",{class:"ml-3"},"Notifications par SMS",-1))]),e("label",t0,[d(e("input",{"onUpdate:modelValue":t[9]||(t[9]=g=>s.settings.notifications.push=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.notifications.push]]),t[35]||(t[35]=e("span",{class:"ml-3"},"Notifications push",-1))])])]),e("div",s0,[t[39]||(t[39]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Mode maintenance",-1)),e("div",o0,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium"},"Activer le mode maintenance"),e("p",{class:"text-sm text-gray-600"},"Le site sera temporairement indisponible pour les utilisateurs")],-1)),e("label",a0,[d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=g=>s.settings.maintenanceMode=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.maintenanceMode]]),t[37]||(t[37]=e("span",{class:"ml-2 text-sm"},"Activé",-1))])])]),e("div",n0,[e("button",{onClick:t[11]||(t[11]=(...g)=>s.resetSettings&&s.resetSettings(...g)),class:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Réinitialiser "),e("button",{onClick:t[12]||(t[12]=(...g)=>s.saveSettings&&s.saveSettings(...g)),class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Sauvegarder ")])])])])])}const r0=ee(Bu,[["render",l0],["__scopeId","data-v-7db36a4d"]]),eg=Object.freeze(Object.defineProperty({__proto__:null,default:r0},Symbol.toStringTag,{value:"Module"})),i0={name:"AdminProfile",components:{HomeIcon:ue,UsersIcon:me,CalendarIcon:ge,CreditCardIcon:ce,ChartBarIcon:de,CogIcon:ie,CameraIcon:he,ComputerDesktopIcon:ve},setup(){const x=u(window.innerWidth>=1024),t=u({name:"Admin Primea",first_name:"Admin",last_name:"Primea",email:"admin@primea.ga",phone:"+241 07 12 34 56 78",role:"Super Administrateur",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face&auto=format",created_at:new Date("2023-01-15"),preferences:{email_notifications:!0,two_factor:!1,language:"fr"}}),f=u({current:"",new:"",confirm:""}),s=u([{id:1,device:"Chrome sur Windows",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]);return{sidebarOpen:x,profile:t,passwordForm:f,activeSessions:s,formatDate:_=>_.toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),formatRelativeTime:_=>{const g=Math.floor((new Date-_)/(1e3*60)),B=Math.floor(g/60);return g<5?"À l'instant":g<60?`Il y a ${g} minutes`:B<24?`Il y a ${B} heures`:_.toLocaleDateString("fr-FR")},changeAvatar:()=>{console.log("Change avatar")},updateProfile:()=>{console.log("Update profile:",t.value)},changePassword:()=>{if(f.value.new!==f.value.confirm){alert("Les mots de passe ne correspondent pas");return}console.log("Change password"),f.value={current:"",new:"",confirm:""}},updatePreferences:()=>{console.log("Update preferences:",t.value.preferences)},revokeSession:_=>{console.log("Revoke session:",_),s.value=s.value.filter(P=>P.id!==_.id)}}}},d0={class:"admin-profile min-h-screen bg-gray-100 font-primea"},c0={class:"mt-6"},m0={class:"px-4"},u0={class:"lg:ml-64 transition-all duration-300"},g0={class:"p-6"},p0={class:"max-w-4xl mx-auto space-y-6"},x0={class:"bg-white rounded-lg shadow-sm p-6"},b0={class:"flex items-center space-x-6"},f0={class:"relative"},y0=["src"],v0={class:"text-lg font-semibold text-primea-blue"},h0={class:"text-gray-600"},w0={class:"text-sm text-gray-500"},_0={class:"bg-white rounded-lg shadow-sm p-6"},k0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},C0={class:"bg-white rounded-lg shadow-sm p-6"},S0={class:"bg-white rounded-lg shadow-sm p-6"},j0={class:"space-y-4"},A0={class:"flex items-center justify-between"},M0={class:"flex items-center"},P0={class:"flex items-center justify-between"},O0={class:"flex items-center"},z0={class:"flex justify-end"},U0={class:"bg-white rounded-lg shadow-sm p-6"},D0={class:"space-y-3"},B0={class:"flex items-center"},V0={class:"bg-primea-blue p-2 rounded-full mr-3"},E0={class:"font-medium"},F0={class:"text-sm text-gray-600"},T0={class:"flex items-center space-x-2"},I0={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},$0=["onClick"];function R0(x,t,f,s,v,A){const o=N("HomeIcon"),i=N("router-link"),p=N("UsersIcon"),M=N("CalendarIcon"),h=N("CreditCardIcon"),_=N("ChartBarIcon"),P=N("CogIcon"),g=N("CameraIcon"),B=N("ComputerDesktopIcon");return l(),n("div",d0,[e("div",{class:$(["fixed inset-y-0 left-0 w-64 bg-primea-blue text-white z-30",{"-translate-x-full":!s.sidebarOpen,"translate-x-0":s.sidebarOpen}])},[t[20]||(t[20]=e("div",{class:"flex items-center justify-between p-4 border-b border-primea-blue-dark"},[e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-8"}),e("span",{class:"font-bold text-lg font-primea"},"Administration")])],-1)),e("nav",c0,[e("div",m0,[C(i,{to:"/admin/dashboard",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(o,{class:"w-5 h-5 mr-3"}),t[14]||(t[14]=T("Tableau de bord",-1))]),_:1}),C(i,{to:"/admin/users",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(p,{class:"w-5 h-5 mr-3"}),t[15]||(t[15]=T("Utilisateurs",-1))]),_:1}),C(i,{to:"/admin/events",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(M,{class:"w-5 h-5 mr-3"}),t[16]||(t[16]=T("Événements",-1))]),_:1}),C(i,{to:"/admin/transactions",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(h,{class:"w-5 h-5 mr-3"}),t[17]||(t[17]=T("Transactions",-1))]),_:1}),C(i,{to:"/admin/reports",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(_,{class:"w-5 h-5 mr-3"}),t[18]||(t[18]=T("Rapports",-1))]),_:1}),C(i,{to:"/admin/settings",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:X(()=>[C(P,{class:"w-5 h-5 mr-3"}),t[19]||(t[19]=T("Paramètres",-1))]),_:1})])])],2),e("div",u0,[t[38]||(t[38]=e("header",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"px-6 py-4"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon profil administrateur")])],-1)),e("main",g0,[e("div",p0,[e("div",x0,[e("div",b0,[e("div",f0,[e("img",{src:s.profile.avatar,alt:"Avatar",class:"w-20 h-20 rounded-full object-cover"},null,8,y0),e("button",{onClick:t[0]||(t[0]=(...r)=>s.changeAvatar&&s.changeAvatar(...r)),class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all"},[C(g,{class:"w-4 h-4"})])]),e("div",null,[e("h3",v0,a(s.profile.name),1),e("p",h0,a(s.profile.role),1),e("p",w0,"Membre depuis "+a(s.formatDate(s.profile.created_at)),1)])])]),e("div",_0,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Informations personnelles",-1)),e("form",{onSubmit:t[5]||(t[5]=ne((...r)=>s.updateProfile&&s.updateProfile(...r),["prevent"])),class:"space-y-4"},[e("div",k0,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prénom",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>s.profile.first_name=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.profile.first_name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>s.profile.last_name=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.profile.last_name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>s.profile.email=r),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.profile.email]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>s.profile.phone=r),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.profile.phone]])])]),t[25]||(t[25]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Mettre à jour ")],-1))],32)]),e("div",C0,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Changer le mot de passe",-1)),e("form",{onSubmit:t[9]||(t[9]=ne((...r)=>s.changePassword&&s.changePassword(...r),["prevent"])),class:"space-y-4"},[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel",-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>s.passwordForm.current=r),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.passwordForm.current]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>s.passwordForm.new=r),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.passwordForm.new]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le nouveau mot de passe",-1)),d(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>s.passwordForm.confirm=r),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[j,s.passwordForm.confirm]])]),t[30]||(t[30]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Changer le mot de passe ")],-1))],32)]),e("div",S0,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Préférences",-1)),e("div",j0,[e("div",A0,[t[32]||(t[32]=e("div",null,[e("h4",{class:"font-medium"},"Notifications email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications par email")],-1)),e("label",M0,[d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=r=>s.profile.preferences.email_notifications=r),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.profile.preferences.email_notifications]])])]),e("div",P0,[t[33]||(t[33]=e("div",null,[e("h4",{class:"font-medium"},"Authentification à deux facteurs"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée pour votre compte")],-1)),e("label",O0,[d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>s.profile.preferences.two_factor=r),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.profile.preferences.two_factor]])])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue",-1)),d(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>s.profile.preferences.language=r),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},[...t[34]||(t[34]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[F,s.profile.preferences.language]])]),e("div",z0,[e("button",{onClick:t[13]||(t[13]=(...r)=>s.updatePreferences&&s.updatePreferences(...r)),class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Sauvegarder les préférences ")])])]),e("div",U0,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Sessions actives",-1)),e("div",D0,[(l(!0),n(z,null,U(s.activeSessions,r=>(l(),n("div",{key:r.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",B0,[e("div",V0,[C(B,{class:"w-4 h-4 text-white"})]),e("div",null,[e("p",E0,a(r.device),1),e("p",F0,a(r.location)+" - "+a(s.formatRelativeTime(r.last_activity)),1)])]),e("div",T0,[r.current?(l(),n("span",I0,"Session actuelle")):(l(),n("button",{key:1,onClick:D=>s.revokeSession(r),class:"text-red-600 hover:text-red-800 text-sm"},"Révoquer",8,$0))])]))),128))])])])])])])}const N0=ee(i0,[["render",R0],["__scopeId","data-v-549aaa0e"]]),tg=Object.freeze(Object.defineProperty({__proto__:null,default:N0},Symbol.toStringTag,{value:"Module"}));export{H0 as A,J0 as E,X0 as O,Q0 as P,K0 as R,eg as S,G0 as U,W0 as a,Y0 as b,Z0 as c,tg as d};
