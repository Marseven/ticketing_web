import{b as I,d as te,_ as _e,Z as oe,a1 as je,j as i,o as l,k as e,D as j,l as _,q as G,t as c,E as P,w as Q,a2 as Se,n as q,W as ne,G as W,H,Y as ee,a3 as S,a4 as ie,a5 as De,g as me,O as he,a6 as de,a as le,y as we,N as Ie,e as Ae,a7 as Ve,p as N,F as ue,P as Ue,X as Be,J as fe,K as $e,a8 as be,R as ve,T as ke,a9 as ze,L as Pe,aa as Te,u as Ce,ab as pe,$ as ge,ac as xe,U as Fe,C as Re,S as Me}from"./vue-vendor-BKyc3He9.js";import{_ as re,u as Ee}from"./account-Ci7xe1_Z.js";import{a as ce,S as D}from"./vendor-BvANJOFB.js";const Le={name:"PhoneInput",props:{modelValue:{type:String,default:""},id:{type:String,required:!0},placeholder:{type:String,default:"Numéro de téléphone"},required:{type:Boolean,default:!1},defaultCountry:{type:String,default:"GA"},inputClass:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup($,{emit:u}){const C=[{code:"GA",name:"Gabon",dial:"+241"},{code:"FR",name:"France",dial:"+33"},{code:"BE",name:"Belgique",dial:"+32"},{code:"CH",name:"Suisse",dial:"+41"},{code:"CA",name:"Canada",dial:"+1"},{code:"US",name:"États-Unis",dial:"+1"},{code:"CM",name:"Cameroun",dial:"+237"},{code:"CD",name:"RD Congo",dial:"+243"},{code:"CG",name:"Congo",dial:"+242"},{code:"CI",name:"Côte d'Ivoire",dial:"+241"},{code:"SN",name:"Sénégal",dial:"+221"},{code:"ML",name:"Mali",dial:"+223"},{code:"BF",name:"Burkina Faso",dial:"+226"},{code:"TG",name:"Togo",dial:"+228"},{code:"BJ",name:"Bénin",dial:"+229"},{code:"MA",name:"Maroc",dial:"+212"},{code:"TN",name:"Tunisie",dial:"+216"},{code:"DZ",name:"Algérie",dial:"+213"},{code:"NG",name:"Nigeria",dial:"+234"},{code:"GH",name:"Ghana",dial:"+233"}].sort((x,T)=>x.name.localeCompare(T.name)),a=I(!1),A=I(""),p=I(""),f=I(null),U=I(C.find(x=>x.code===$.defaultCountry)||C[0]),m=te(()=>{if(!A.value)return C;const x=A.value.toLowerCase();return C.filter(T=>T.name.toLowerCase().includes(x)||T.dial.includes(x)||T.code.toLowerCase().includes(x))}),b=te(()=>p.value?`${U.value.dial}${p.value.replace(/^0/,"")}`:""),z=()=>{a.value=!a.value,a.value&&(A.value="")},v=x=>{U.value=x,a.value=!1,M()},O=x=>{p.value=x.target.value.replace(/[^\d\s]/g,""),M()},F=()=>{setTimeout(()=>{a.value=!1},200)},M=()=>{u("update:modelValue",b.value)},V=x=>{f.value&&!f.value.contains(x.target)&&!x.target.closest(".country-selector")&&(a.value=!1)};return _e(()=>$.modelValue,x=>{if(x&&!p.value){for(const T of C)if(x.startsWith(T.dial)){U.value=T,p.value=x.substring(T.dial.length);break}}},{immediate:!0}),oe(()=>{document.addEventListener("click",V)}),je(()=>{document.removeEventListener("click",V)}),{countries:C,showDropdown:a,searchQuery:A,phoneNumber:p,selectedCountry:U,filteredCountries:m,fullPhoneNumber:b,dropdown:f,toggleDropdown:z,selectCountry:v,handleInput:O,handleBlur:F}}},qe={class:"phone-input-wrapper"},Oe={class:"phone-input-container"},Ne={class:"selected-country"},Xe=["src","alt"],Ge={class:"country-code"},We=["id","placeholder","required","disabled"],He={key:0,class:"country-dropdown",ref:"dropdown"},Je={class:"country-search"},Qe={class:"country-list"},Ke=["onClick"],Ze=["src","alt"],Ye={class:"country-name"},et={class:"country-dial"};function tt($,u,C,a,A,p){return l(),i("div",qe,[e("div",Oe,[e("div",{class:G(["country-selector",{disabled:C.disabled}]),onClick:u[0]||(u[0]=f=>!C.disabled&&a.toggleDropdown)},[e("div",Ne,[e("img",{src:`https://flagcdn.com/w40/${a.selectedCountry.code.toLowerCase()}.png`,alt:a.selectedCountry.name,class:"country-flag"},null,8,Xe),e("span",Ge,c(a.selectedCountry.dial),1),(l(),i("svg",{class:G(["dropdown-arrow",{rotate:a.showDropdown}]),width:"12",height:"8",viewBox:"0 0 12 8",fill:"none"},[...u[6]||(u[6]=[e("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))])],2),j(e("input",{type:"tel",id:C.id,"onUpdate:modelValue":u[1]||(u[1]=f=>a.phoneNumber=f),onInput:u[2]||(u[2]=(...f)=>a.handleInput&&a.handleInput(...f)),onBlur:u[3]||(u[3]=(...f)=>a.handleBlur&&a.handleBlur(...f)),placeholder:C.placeholder,required:C.required,disabled:C.disabled,class:G(["phone-input",C.inputClass])},null,42,We),[[P,a.phoneNumber]]),_(Se,{name:"dropdown-fade"},{default:Q(()=>[a.showDropdown?(l(),i("div",He,[e("div",Je,[j(e("input",{type:"text","onUpdate:modelValue":u[4]||(u[4]=f=>a.searchQuery=f),placeholder:"Rechercher un pays...",class:"search-input",onClick:u[5]||(u[5]=ne(()=>{},["stop"]))},null,512),[[P,a.searchQuery]])]),e("div",Qe,[(l(!0),i(W,null,H(a.filteredCountries,f=>(l(),i("div",{key:f.code,onClick:U=>a.selectCountry(f),class:G(["country-item",{selected:f.code===a.selectedCountry.code}])},[e("img",{src:`https://flagcdn.com/w40/${f.code.toLowerCase()}.png`,alt:f.name,class:"country-flag"},null,8,Ze),e("span",Ye,c(f.name),1),e("span",et,c(f.dial),1)],10,Ke))),128))])],512)):q("",!0)]),_:1})])])}const ye=re(Le,[["render",tt],["__scopeId","data-v-0414d3f8"]]),X=ce.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}});X.interceptors.request.use($=>{const u=localStorage.getItem("auth_token")||localStorage.getItem("token");return u&&($.headers.Authorization=`Bearer ${u}`),$.headers["X-Requested-With"]="XMLHttpRequest",$},$=>Promise.reject($));X.interceptors.response.use($=>$,$=>(console.log("Erreur API:",$.response?.status,$.response?.data),$.response?.status===401?(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"):$.response?.status===419&&console.error("CSRF token mismatch. Vérifiez la configuration Sanctum."),Promise.reject($)));const Sd={getTicket($){return X.get(`/tickets/${$}`)},retrieveTickets($){return X.get(`/tickets/retrieve/${$}`)},validateTicket($,u="validate"){return X.post("/tickets/validate",{qr_code:$,action:u})},searchTickets($){const{reference:u,phone:C,email:a}=$;return u?this.getTicket(u):a||C?new Promise((A,p)=>{setTimeout(()=>{a?.includes("test")||C?.includes("123")||u?.includes("TKT")?A({data:{tickets:[{id:1,code:"TKT-2024-ABC123",status:"issued",event:{id:1,title:"L'OISEAU RARE",slug:"oiseau-rare",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",venue_name:"Entre Nous Bar"},ticket_type:{id:1,name:"Standard",description:"Accès standard"},buyer:{name:"John Doe",email:a||"john@example.com"},issued_at:"27/07/2025 10:00:00",used_at:null,schedule:{starts_at:"27/07/2025 20:00:00",ends_at:"27/07/2025 23:00:00",door_time:"27/07/2025 19:30:00"}}]}}):p(new Error("Aucun ticket trouvé avec ces informations"))},1500)}):Promise.reject(new Error("Veuillez fournir au moins un critère de recherche"))}},Dd={createGuestOrder($){return ce.post("/api/guest/orders",$,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestOrder($){return ce.get(`/api/guest/orders/${$}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestTicket($){return ce.get(`/api/guest/tickets/${$}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},retrieveGuestTickets($){return ce.get(`/api/guest/tickets/retrieve/${encodeURIComponent($)}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}},L={getDashboardStats(){return X.get("/organizer/dashboard/stats")},getRecentEvents(){return X.get("/organizer/events/recent")},getNotifications(){return X.get("/organizer/notifications")},getEvents($={}){return X.get("/organizer/events",{params:$})},createEvent($){return X.post("/organizer/events",$)},createEventWithFile($){return X.post("/organizer/events",$,{headers:{"Content-Type":"multipart/form-data"}})},updateEvent($,u){return X.put(`/organizer/events/${$}`,u)},updateEventWithFile($,u){return u.append("_method","PUT"),X.post(`/organizer/events/${$}`,u,{headers:{"Content-Type":"multipart/form-data"}})},getEvent($){return X.get(`/organizer/events/${$}`)},getEventStats($){return X.get(`/organizer/events/${$}/stats`)},getBalance(){return X.get("/organizer/balances")},getPaymentHistory(){return X.get("/organizer/payouts")},requestPayout($){return X.post("/organizer/payouts",$)},getProfile(){return X.get("/organizer/profile")},updateProfile($){return X.put("/organizer/profile",$)},uploadAvatar($){return X.post("/organizer/profile/avatar",$,{headers:{"Content-Type":"multipart/form-data"}})},getCategories(){return X.get("/categories")},getVenues(){return X.get("/venues")}},st={class:"organizer-dashboard min-h-screen"},ot={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},rt={class:"mb-8"},at={class:"flex items-center justify-between"},nt={class:"flex items-center space-x-4"},it={class:"text-right"},lt={class:"text-sm font-semibold text-primea-blue font-primea"},dt={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},ut=["src","alt"],ct={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},mt={class:"text-lg font-bold font-primea"},pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},gt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},ft={class:"flex items-center"},vt={class:"p-2 bg-primea-blue/10 rounded-lg"},bt={class:"ml-4"},xt={class:"text-2xl font-bold text-primea-blue font-primea"},yt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},_t={class:"flex items-center"},ht={class:"p-2 bg-green-100 rounded-lg"},wt={class:"ml-4"},$t={class:"text-2xl font-bold text-green-600 font-primea"},kt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},Ct={class:"flex items-center"},Et={class:"p-2 bg-primea-yellow/10 rounded-lg"},jt={class:"ml-4"},St={class:"text-2xl font-bold text-primea-yellow font-primea"},Dt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},It={class:"flex items-center"},At={class:"p-2 bg-purple-100 rounded-lg"},Vt={class:"ml-4"},Ut={class:"text-2xl font-bold text-purple-600 font-primea"},Bt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},zt={class:"lg:col-span-2"},Pt={class:"bg-white rounded-primea shadow-primea p-6"},Tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ft={class:"bg-white rounded-primea shadow-primea p-6"},Rt={class:"space-y-4"},Mt={key:0,class:"text-center text-gray-500 py-8"},Lt={class:"text-sm font-medium font-primea"},qt={class:"text-xs text-gray-600 mt-1"},Ot={class:"text-xs text-gray-400 mt-2"},Nt={class:"bg-white rounded-primea shadow-primea overflow-hidden"},Xt={class:"p-6 border-b border-gray-200"},Gt={class:"flex items-center justify-between"},Wt={key:0,class:"p-8 text-center text-gray-500"},Ht={key:1,class:"overflow-x-auto"},Jt={class:"w-full"},Qt={class:"divide-y divide-gray-200"},Kt={class:"px-6 py-4"},Zt={class:"text-sm font-medium text-gray-900 font-primea"},Yt={class:"text-sm text-gray-500"},es={class:"px-6 py-4 text-sm text-gray-900 font-primea"},ts={class:"px-6 py-4"},ss={class:"px-6 py-4 text-sm text-gray-900 font-primea"},os={class:"px-6 py-4 text-sm"},rs={__name:"OrganizerDashboard",setup($){const u=Ee(),C=I(!1),a=ee({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),A=I([]),p=I([]),f=te(()=>{const V=u.user;return V?.name?V.name.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"U"}),U=te(()=>u.user?.avatar_url||null),m=async()=>{C.value=!0;try{const[V,x,T]=await Promise.all([L.getDashboardStats(),L.getRecentEvents(),L.getNotifications()]);Object.assign(a,V.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),A.value=x.data.data||[],p.value=T.data.data||[]}catch(V){console.error("Erreur lors du chargement du dashboard:",V),Object.assign(a,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),A.value=[],p.value=[]}finally{C.value=!1}},b=V=>new Intl.NumberFormat("fr-FR").format(V),z=V=>new Date(V).toLocaleDateString("fr-FR"),v=V=>new Date(V).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),O=V=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[V]||V,F=V=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[V]||"bg-gray-100 text-gray-800",M=V=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[V]||"border-gray-300";return oe(()=>{m()}),(V,x)=>{const T=le("router-link");return l(),i("div",st,[e("div",ot,[e("div",rt,[e("div",at,[x[1]||(x[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",nt,[e("div",it,[x[0]||(x[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",lt,c(z(new Date)),1)]),U.value?(l(),i("div",dt,[e("img",{src:U.value,alt:S(u).user?.name,class:"w-full h-full object-cover"},null,8,ut)])):(l(),i("div",ct,[e("span",mt,c(f.value),1)]))])])]),e("div",pt,[e("div",gt,[e("div",ft,[e("div",vt,[_(S(ie),{class:"w-6 h-6 text-primea-blue"})]),e("div",bt,[x[2]||(x[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",xt,c(a.total_events),1)])])]),e("div",yt,[e("div",_t,[e("div",ht,[_(S(De),{class:"w-6 h-6 text-green-600"})]),e("div",wt,[x[3]||(x[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",$t,c(a.active_events),1)])])]),e("div",kt,[e("div",Ct,[e("div",Et,[_(S(me),{class:"w-6 h-6 text-primea-yellow"})]),e("div",jt,[x[4]||(x[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",St,c(a.tickets_sold),1)])])]),e("div",Dt,[e("div",It,[e("div",At,[_(S(he),{class:"w-6 h-6 text-purple-600"})]),e("div",Vt,[x[5]||(x[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",Ut,c(b(a.total_revenue))+" XAF",1)])])])]),e("div",Bt,[e("div",zt,[e("div",Pt,[x[10]||(x[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",Tt,[_(T,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:Q(()=>[_(S(de),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[6]||(x[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),_(T,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:Q(()=>[_(S(we),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[7]||(x[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),_(T,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:Q(()=>[_(S(Ie),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[8]||(x[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),_(T,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:Q(()=>[_(S(Ae),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[9]||(x[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",Ft,[x[12]||(x[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",Rt,[p.value.length===0?(l(),i("div",Mt,[_(S(Ve),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),x[11]||(x[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(l(!0),i(W,{key:1},H(p.value,R=>(l(),i("div",{key:R.id,class:G(["p-3 bg-gray-50 rounded-primea border-l-4",M(R.type)])},[e("p",Lt,c(R.title),1),e("p",qt,c(R.message),1),e("p",Ot,c(v(R.created_at)),1)],2))),128))])])]),e("div",Nt,[e("div",Xt,[e("div",Gt,[x[14]||(x[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),_(T,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:Q(()=>[...x[13]||(x[13]=[N(" Voir tous ",-1)])]),_:1})])]),A.value.length===0?(l(),i("div",Wt,[_(S(ie),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),x[16]||(x[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),x[17]||(x[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),_(T,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:Q(()=>[_(S(de),{class:"w-4 h-4 mr-2"}),x[15]||(x[15]=N(" Créer un événement ",-1))]),_:1})])):(l(),i("div",Ht,[e("table",Jt,[x[19]||(x[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",Qt,[(l(!0),i(W,null,H(A.value,R=>(l(),i("tr",{key:R.id,class:"hover:bg-gray-50"},[e("td",Kt,[e("div",null,[e("p",Zt,c(R.title),1),e("p",Yt,c(R.venue_name),1)])]),e("td",es,c(z(R.event_date)),1),e("td",ts,[e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",F(R.status)])},c(O(R.status)),3)]),e("td",ss,c(R.tickets_sold||0),1),e("td",os,[_(T,{to:{name:"organizer-event-detail",params:{slug:R.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:Q(()=>[...x[18]||(x[18]=[N(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},as=re(rs,[["__scopeId","data-v-1685f411"]]),Id=Object.freeze(Object.defineProperty({__proto__:null,default:as},Symbol.toStringTag,{value:"Module"})),ns={name:"OrganizerEvents",components:{PlusIcon:de,CalendarIcon:ie},setup(){const $=fe(),u=I(""),C=I(""),a=I("grid"),A=I(!1),p=I([]),f=ee({current:1,total:1,perPage:15}),U=async()=>{A.value=!0;try{const h=(await L.getEvents({page:f.current,status:C.value,search:u.value})).data.data.events;p.value=h.data.map(g=>({...g,tickets_sold:g.tickets?.filter(t=>["issued","used"].includes(t.status)).length||0,total_tickets:g.ticket_types?.reduce((t,o)=>t+o.capacity,0)||0,revenue:g.tickets?.filter(t=>["issued","used"].includes(t.status)).reduce((t,o)=>t+(o.ticket_type?.price||0),0)||0,venue:g.venue?.name||"",date:g.event_date||g.schedules?.[0]?.starts_at,isFavorite:!1})),f.current=h.current_page,f.total=h.last_page,f.perPage=h.per_page}catch(r){console.error("Erreur chargement événements:",r),D.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{A.value=!1}},m=te(()=>{let r=[...p.value];if(u.value){const h=u.value.toLowerCase();r=r.filter(g=>g.title.toLowerCase().includes(h)||g.venue.toLowerCase().includes(h))}return C.value&&(r=r.filter(h=>h.status===C.value)),r}),b=te(()=>{const r=p.value.filter(o=>o.is_active&&o.status!=="cancelled").length,h=p.value.filter(o=>!o.is_active).length,g=p.value.reduce((o,d)=>o+(d.tickets_sold||0),0),t=p.value.reduce((o,d)=>o+(d.revenue||0),0);return{published:r,draft:h,totalTicketsSold:g,totalRevenue:t}}),z=r=>new Intl.NumberFormat("fr-FR").format(r),v=(r,h="full")=>{const g=new Date(r);return h==="short"?g.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):g.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},O=r=>r.is_active?r.status==="cancelled"?"bg-red-100 text-red-800":new Date(r.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",F=r=>r.is_active?r.status==="cancelled"?"Annulé":new Date(r.date)<new Date?"Terminé":"Actif":"Brouillon",M=r=>{r.isFavorite=!r.isFavorite},V=async r=>{try{const h={title:`${r.title} (Copie)`,description:r.description,event_date:r.date,venue_id:r.venue_id,category_id:r.category_id,is_active:!1};await L.createEvent(h),await U(),D.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{D.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},x=r=>{$.push({name:"organizer-event-edit",params:{slug:r.slug}})},T=async r=>{if((await D.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${r.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await U(),D.fire("Supprimé !","L'événement a été supprimé.","success")}catch{D.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};_e([u,C],()=>{f.current=1,U()},{debounce:300});const R=r=>{f.current=r,U()},Z=r=>{if(!r)return!1;const h=r.image_url||r.image||r.image_file;return h&&h.trim()!==""},K=(r,h="400")=>{let g=r.image_url||r.image||r.image_file;return console.log("Image URL pour événement:",r.title,"URL brute:",g),g&&g.trim()!==""?g.startsWith("http://")||g.startsWith("https://")?(console.log("URL complète détectée:",g),g):g.startsWith("/")?(g=window.location.origin+g,console.log("URL construite depuis chemin relatif:",g),g):(g.includes("/")||(g=`${window.location.origin}/storage/images/events/${g}`,console.log("URL construite depuis nom de fichier:",g)),g):(console.log("Aucune image trouvée pour:",r.title),"")},Y=r=>{console.log("Erreur de chargement d'image:",r.target.src),r.target.style.display="none"},w=r=>{console.log("Image chargée avec succès:",r.target.src)};return oe(()=>{U()}),{searchQuery:u,statusFilter:C,viewMode:a,loading:A,events:p,filteredEvents:m,stats:b,pagination:f,formatPrice:z,formatEventDate:v,getStatusClass:O,getStatusText:F,toggleFavorite:M,duplicateEvent:V,editEvent:x,deleteEvent:T,loadEvents:U,changePage:R,hasEventImage:Z,getEventImageUrl:K,handleImageError:Y,handleImageLoad:w}}},is={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},ls={class:"bg-white shadow-sm border-b border-gray-200"},ds={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},us={class:"flex items-center justify-between"},cs={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},ms={class:"bg-white rounded-lg shadow-md p-6 mb-8"},ps={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},gs={class:"flex items-center space-x-4"},fs={class:"relative"},vs={class:"flex items-center space-x-4"},bs={class:"text-sm text-gray-600"},xs={class:"flex bg-gray-100 rounded-lg p-1"},ys={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},_s={class:"text-center"},hs={class:"text-2xl font-bold text-blue-600"},ws={class:"text-center"},$s={class:"text-2xl font-bold text-yellow-600"},ks={class:"text-center"},Cs={class:"text-2xl font-bold text-green-600"},Es={class:"text-center"},js={class:"text-2xl font-bold text-purple-600"},Ss={key:0},Ds={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Is={class:"relative"},As=["src","alt"],Vs={key:1,class:"w-full h-48 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Us={class:"absolute top-4 left-4"},Bs={class:"absolute top-4 right-4"},zs=["onClick"],Ps={class:"p-6"},Ts={class:"text-lg font-bold text-gray-800 mb-2"},Fs={class:"text-gray-600 text-sm mb-4"},Rs={class:"flex items-center justify-between mb-4"},Ms={class:"text-sm text-gray-600 font-primea"},Ls={class:"font-medium font-primea"},qs={class:"text-sm font-bold text-green-600 font-primea"},Os={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},Ns={class:"flex space-x-2"},Xs=["onClick"],Gs={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},Ws={class:"w-full"},Hs={class:"bg-white divide-y divide-gray-200"},Js={class:"px-6 py-4 whitespace-nowrap"},Qs={class:"flex items-center"},Ks=["src","alt"],Zs={key:1,class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center rounded-lg mr-4"},Ys={class:"text-sm font-medium text-gray-900"},eo={class:"text-sm text-gray-500"},to={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},so={class:"px-6 py-4 whitespace-nowrap"},oo={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},ro={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},ao={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},no=["onClick"],io=["onClick"],lo={key:1,class:"text-center py-16"},uo={class:"text-gray-600 mb-6"},co={key:0},mo={key:1},po={key:2,class:"mt-8 flex justify-center"},go={class:"flex items-center space-x-2"},fo=["disabled"],vo=["onClick"],bo={key:1,class:"px-2 text-gray-500"},xo=["disabled"];function yo($,u,C,a,A,p){const f=le("PlusIcon"),U=le("router-link"),m=le("CalendarIcon");return l(),i("div",is,[e("div",ls,[e("div",ds,[e("div",us,[u[11]||(u[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),_(U,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:Q(()=>[_(f,{class:"w-4 h-4 inline mr-2"}),u[10]||(u[10]=N(" Nouvel événement ",-1))]),_:1})])])]),e("div",cs,[e("div",ms,[e("div",ps,[e("div",gs,[e("div",fs,[u[12]||(u[12]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),j(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=b=>a.searchQuery=b),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[P,a.searchQuery]])]),j(e("select",{"onUpdate:modelValue":u[1]||(u[1]=b=>a.statusFilter=b),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...u[13]||(u[13]=[Ue('<option value="" data-v-d66d4597>Tous les statuts</option><option value="draft" data-v-d66d4597>Brouillons</option><option value="published" data-v-d66d4597>Publiés</option><option value="completed" data-v-d66d4597>Terminés</option><option value="cancelled" data-v-d66d4597>Annulés</option>',5)])],512),[[ue,a.statusFilter]])]),e("div",vs,[e("div",bs,c(a.filteredEvents.length)+" événement"+c(a.filteredEvents.length>1?"s":""),1),e("div",xs,[e("button",{onClick:u[2]||(u[2]=b=>a.viewMode="grid"),class:G(["px-3 py-2 rounded-lg transition-colors",a.viewMode==="grid"?"bg-white shadow-sm":""])},[...u[14]||(u[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:u[3]||(u[3]=b=>a.viewMode="list"),class:G(["px-3 py-2 rounded-lg transition-colors",a.viewMode==="list"?"bg-white shadow-sm":""])},[...u[15]||(u[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",ys,[e("div",_s,[e("p",hs,c(a.stats.published),1),u[16]||(u[16]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",ws,[e("p",$s,c(a.stats.draft),1),u[17]||(u[17]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",ks,[e("p",Cs,c(a.stats.totalTicketsSold),1),u[18]||(u[18]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",Es,[e("p",js,c(a.formatPrice(a.stats.totalRevenue))+" XAF",1),u[19]||(u[19]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),a.filteredEvents.length>0?(l(),i("div",Ss,[a.viewMode==="grid"?(l(),i("div",Ds,[(l(!0),i(W,null,H(a.filteredEvents,b=>(l(),i("div",{key:b.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",Is,[a.hasEventImage(b)?(l(),i("img",{key:0,src:a.getEventImageUrl(b),alt:b.title,class:"w-full h-48 object-cover",onError:u[4]||(u[4]=(...z)=>a.handleImageError&&a.handleImageError(...z)),onLoad:u[5]||(u[5]=(...z)=>a.handleImageLoad&&a.handleImageLoad(...z))},null,40,As)):(l(),i("div",Vs,[_(m,{class:"w-16 h-16 text-gray-400"})])),e("div",Us,[e("span",{class:G(["px-3 py-1 rounded-full text-xs font-semibold",a.getStatusClass(b.status)])},c(a.getStatusText(b.status)),3)]),e("div",Bs,[e("button",{onClick:z=>a.toggleFavorite(b),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(l(),i("svg",{class:G(["w-4 h-4",b.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...u[20]||(u[20]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,zs)])]),e("div",Ps,[e("h3",Ts,c(b.title),1),e("p",Fs,c(a.formatEventDate(b.date)),1),e("div",Rs,[e("div",Ms,[e("span",Ls,c(b.tickets_sold||0),1),N(" / "+c(b.total_tickets||0)+" tickets vendus ",1)]),e("div",qs,c(a.formatPrice(b.revenue||0))+" XAF ",1)]),e("div",Os,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Be({width:`${Math.min((b.ticketsSold||0)/(b.totalTickets||100)*100,100)}%`})},null,4)]),e("div",Ns,[_(U,{to:{name:"organizer-event-detail",params:{slug:b.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:Q(()=>[...u[21]||(u[21]=[N(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:z=>a.duplicateEvent(b),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,Xs)])])]))),128))])):(l(),i("div",Gs,[e("table",Ws,[u[23]||(u[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Hs,[(l(!0),i(W,null,H(a.filteredEvents,b=>(l(),i("tr",{key:b.id,class:"hover:bg-gray-50"},[e("td",Js,[e("div",Qs,[a.hasEventImage(b)?(l(),i("img",{key:0,src:a.getEventImageUrl(b,"60"),alt:b.title,class:"w-12 h-12 object-cover rounded-lg mr-4",onError:u[6]||(u[6]=(...z)=>a.handleImageError&&a.handleImageError(...z)),onLoad:u[7]||(u[7]=(...z)=>a.handleImageLoad&&a.handleImageLoad(...z))},null,40,Ks)):(l(),i("div",Zs,[_(m,{class:"w-6 h-6 text-gray-400"})])),e("div",null,[e("div",Ys,c(b.title),1),e("div",eo,c(b.venue),1)])])]),e("td",to,c(a.formatEventDate(b.date,"short")),1),e("td",so,[e("span",{class:G(["px-2 py-1 rounded-full text-xs font-medium font-primea",a.getStatusClass(b)])},c(a.getStatusText(b)),3)]),e("td",oo,c(b.tickets_sold||0)+" / "+c(b.total_tickets||0),1),e("td",ro,c(a.formatPrice(b.revenue||0))+" XAF ",1),e("td",ao,[_(U,{to:{name:"organizer-event-detail",params:{slug:b.slug}},class:"text-blue-600 hover:text-blue-900"},{default:Q(()=>[...u[22]||(u[22]=[N(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:z=>a.editEvent(b),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,no),e("button",{onClick:z=>a.deleteEvent(b),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,io)])]))),128))])])]))])):(l(),i("div",lo,[u[25]||(u[25]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),u[26]||(u[26]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",uo,[a.searchQuery||a.statusFilter?(l(),i("span",co," Aucun événement ne correspond à vos critères de recherche. ")):(l(),i("span",mo," Commencez par créer votre premier événement ! "))]),_(U,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:Q(()=>[...u[24]||(u[24]=[N(" + Créer mon premier événement ",-1)])]),_:1})])),a.events.length>0&&a.pagination.total>1?(l(),i("div",po,[e("nav",go,[e("button",{onClick:u[8]||(u[8]=b=>a.changePage(a.pagination.current-1)),disabled:a.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,fo),(l(!0),i(W,null,H(a.pagination.total,b=>(l(),i(W,{key:b},[b===1||b===a.pagination.total||b>=a.pagination.current-1&&b<=a.pagination.current+1?(l(),i("button",{key:0,onClick:z=>a.changePage(b),class:G(["px-3 py-2 text-sm font-medium rounded-lg font-primea",b===a.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},c(b),11,vo)):b===a.pagination.current-2||b===a.pagination.current+2?(l(),i("span",bo," ... ")):q("",!0)],64))),128)),e("button",{onClick:u[9]||(u[9]=b=>a.changePage(a.pagination.current+1)),disabled:a.pagination.current===a.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,xo)])])):q("",!0)])])}const _o=re(ns,[["render",yo],["__scopeId","data-v-d66d4597"]]),Ad=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),ho={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},wo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},$o={key:0,class:"flex justify-center items-center h-64"},ko={key:1,class:"text-center py-16"},Co={class:"mb-4"},Eo={class:"text-gray-600 mb-6"},jo={key:2},So={class:"mb-8"},Do={class:"flex items-center justify-between"},Io={class:"flex items-center space-x-4"},Ao={class:"text-3xl font-bold text-primea-blue font-primea"},Vo={class:"flex items-center space-x-3"},Uo={class:"flex space-x-2"},Bo={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},zo={class:"bg-white rounded-primea shadow-primea p-6"},Po={class:"flex items-center"},To={class:"p-2 bg-blue-100 rounded-lg"},Fo={class:"ml-4"},Ro={class:"text-2xl font-bold text-blue-600 font-primea"},Mo={class:"bg-white rounded-primea shadow-primea p-6"},Lo={class:"flex items-center"},qo={class:"p-2 bg-green-100 rounded-lg"},Oo={class:"ml-4"},No={class:"text-2xl font-bold text-green-600 font-primea"},Xo={class:"bg-white rounded-primea shadow-primea p-6"},Go={class:"flex items-center"},Wo={class:"p-2 bg-yellow-100 rounded-lg"},Ho={class:"ml-4"},Jo={class:"text-2xl font-bold text-yellow-600 font-primea"},Qo={class:"bg-white rounded-primea shadow-primea p-6"},Ko={class:"flex items-center"},Zo={class:"p-2 bg-purple-100 rounded-lg"},Yo={class:"ml-4"},er={class:"text-lg font-bold text-purple-600 font-primea"},tr={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},sr={class:"lg:col-span-2 space-y-6"},or={class:"bg-white rounded-primea shadow-primea p-6"},rr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ar={class:"mt-1 text-gray-900 font-primea"},nr={class:"mt-1 text-gray-900 font-primea"},ir={class:"mt-1 text-gray-900 font-primea"},lr={class:"md:col-span-2"},dr={class:"mt-1 text-gray-900 font-primea leading-relaxed"},ur={class:"bg-white rounded-primea shadow-primea p-6"},cr={key:0,class:"space-y-4"},mr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},pr={class:"mt-1 text-gray-900 font-primea"},gr={class:"mt-1 text-gray-900 font-primea"},fr={class:"mt-1 text-gray-900 font-primea"},vr={key:1,class:"text-center py-8 text-gray-500"},br={class:"bg-white rounded-primea shadow-primea p-6"},xr={key:0,class:"space-y-4"},yr={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},_r={class:"md:col-span-2"},hr={class:"flex items-center justify-between mb-2"},wr={class:"font-semibold text-gray-900 font-primea"},$r={class:"text-gray-600 text-sm font-primea"},kr={class:"text-center"},Cr={class:"text-lg font-bold text-primea-blue font-primea"},Er={class:"text-center"},jr={class:"text-sm font-primea"},Sr={class:"font-medium text-gray-900"},Dr={class:"font-medium text-gray-900"},Ir={class:"text-xs text-gray-500 mt-1"},Ar={key:1,class:"text-center py-8 text-gray-500"},Vr={class:"bg-white rounded-primea shadow-primea p-6"},Ur={key:0,class:"overflow-x-auto"},Br={class:"w-full"},zr={class:"divide-y divide-gray-200"},Pr={class:"px-4 py-3 text-sm text-gray-900 font-primea"},Tr={class:"px-4 py-3 text-sm text-gray-900 font-primea"},Fr={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},Rr={class:"px-4 py-3 text-sm text-gray-500 font-primea"},Mr={key:1,class:"text-center py-8 text-gray-500"},Lr={class:"space-y-6"},qr={class:"bg-white rounded-primea shadow-primea p-6"},Or={class:"space-y-3"},Nr={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Xr={class:"w-full h-48 rounded-primea overflow-hidden"},Gr=["src","alt"],Wr={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Hr={class:"bg-white rounded-primea shadow-primea p-6"},Jr={class:"space-y-3"},Qr={class:"flex items-center justify-between"},Kr={class:"flex items-center justify-between"},Zr={class:"flex items-center justify-between"},Yr={class:"text-sm text-gray-600 font-primea"},ea={__name:"EventDetail",setup($){const u=Ce(),C=fe(),a=I(!0),A=I(null),p=I(null),f=I([]),U=async()=>{a.value=!0,A.value=null;try{let t=u.params.slug,o;if(/^\d+$/.test(t))o=(await L.getEvent(t)).data.data;else try{const s=await L.getEvents();if(o=(s.data.data.events.data||s.data.data.events).find(se=>se.slug===t),!o)throw new Error(`Événement avec le slug "${t}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${t}" non trouvé`)}if(!o)throw new Error("Événement introuvable");p.value={...o,venue_name:o.venue?.name||"Lieu non spécifié",venue_address:o.venue?.address||"",category_name:o.category?.name||"Non spécifiée",tickets_sold:o.tickets?.filter(s=>["issued","used"].includes(s.status)).length||0,total_revenue:o.tickets?.filter(s=>["issued","used"].includes(s.status)).reduce((s,k)=>s+(k.ticket_type?.price||0),0)||0,is_public:o.is_active||!1,sales_active:o.is_active||!1,ticket_types:o.ticket_types||o.ticketTypes||[]};const d=o.ticket_types||o.ticketTypes||[];d.length>0&&(p.value.ticket_types=d.map(s=>({...s,sold:o.tickets?.filter(k=>k.ticket_type_id===s.id&&["issued","used"].includes(k.status)).length||0}))),p.value.tickets_sold>0?f.value=[{id:1,customer_name:"Kofi Asante",ticket_quantity:2,total_amount:p.value.ticket_types?.[0]?.price*2||5e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:2,customer_name:"Aminata Traore",ticket_quantity:1,total_amount:p.value.ticket_types?.[0]?.price||25e3,created_at:new Date(Date.now()-1728e5).toISOString()}]:f.value=[]}catch(t){console.error("Erreur lors du chargement de l'événement:",t),t.response?.status===404?A.value=`Événement avec l'identifiant "${u.params.slug}" non trouvé`:t.message?A.value=t.message:A.value="Erreur lors du chargement de l'événement"}finally{a.value=!1}},m=()=>{C.push({name:"organizer-event-edit",params:{slug:p.value.slug}})},b=async()=>{if((await D.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await L.updateEvent(p.value.id,{status:"published",is_active:!0}),p.value.status="published",p.value.is_active=!0,D.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(o){console.error("Erreur publication:",o),D.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},z=async()=>{const t=`${window.location.origin}/events/${p.value.slug}`;try{await navigator.clipboard.writeText(t),D.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{D.fire({title:"Lien de l'événement",html:`<input type="text" value="${t}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},v=()=>{const t=`/events/${p.value.slug}`;window.open(t,"_blank")},O=()=>{D.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},F=t=>new Intl.NumberFormat("fr-FR").format(t),M=t=>new Date(t).toLocaleDateString("fr-FR"),V=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=t=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[t]||t,T=t=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",R=t=>{const o=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return o==null?"Illimité":typeof o=="number"?new Intl.NumberFormat("fr-FR").format(o):o},Z=t=>{const o=t.sold||0,d=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return d==null||d<=0?0:Math.round(o/d*100)},K=t=>{console.log("Erreur de chargement d'image:",t.target.src),t.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},Y=t=>{console.log("Image chargée avec succès:",t.target.src)},w=()=>{if(!p.value||!p.value.ticket_types)return"Non définie";const t=p.value.ticket_types.reduce((o,d)=>{const s=d.capacity||d.available_quantity||d.max_quantity||d.quantity||0;return o+(typeof s=="number"?s:0)},0);return t>0?new Intl.NumberFormat("fr-FR").format(t):"Non définie"},r=()=>{if(!p.value)return"Non définie";if(p.value.event_date&&p.value.event_date!=="Invalid Date")return M(p.value.event_date);if(p.value.schedules&&p.value.schedules.length>0){const t=p.value.schedules[0];if(t.starts_at)return M(t.starts_at)}return"Non définie"},h=()=>{if(!p.value)return!1;const t=p.value.image_url||p.value.image||p.value.image_file;return t&&t.trim()!==""},g=()=>{if(!p.value)return"";let t=p.value.image_url||p.value.image||p.value.image_file;return console.log("EventDetail - Image URL pour événement:",p.value.title,"URL brute:",t),t&&t.trim()!==""?t.startsWith("http://")||t.startsWith("https://")?(console.log("EventDetail - URL complète détectée:",t),t):t.startsWith("/")?(t=window.location.origin+t,console.log("EventDetail - URL construite depuis chemin relatif:",t),t):(t.includes("/")||(t=`${window.location.origin}/storage/images/events/${t}`,console.log("EventDetail - URL construite depuis nom de fichier:",t)),t):(console.log("EventDetail - Aucune image trouvée pour:",p.value.title),"")};return oe(()=>{U()}),(t,o)=>{const d=le("router-link");return l(),i("div",ho,[e("div",wo,[a.value?(l(),i("div",$o,[...o[1]||(o[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):A.value?(l(),i("div",ko,[e("div",Co,[_(S($e),{class:"w-16 h-16 mx-auto text-red-500"})]),o[3]||(o[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",Eo,c(A.value),1),_(d,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:Q(()=>[...o[2]||(o[2]=[N(" Retour aux événements ",-1)])]),_:1})])):p.value?(l(),i("div",jo,[e("div",So,[e("div",Do,[e("div",Io,[e("button",{onClick:o[0]||(o[0]=s=>t.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(S(be),{class:"w-6 h-6"})]),e("div",null,[e("h1",Ao,c(p.value.title),1),o[4]||(o[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",Vo,[e("span",{class:G(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",T(p.value.status)])},c(x(p.value.status)),3),e("div",Uo,[e("button",{onClick:m,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(S(ve),{class:"w-4 h-4 inline mr-2"}),o[5]||(o[5]=N(" Modifier ",-1))]),p.value.status==="draft"?(l(),i("button",{key:0,onClick:b,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[_(S(ke),{class:"w-4 h-4 inline mr-2"}),o[6]||(o[6]=N(" Publier ",-1))])):q("",!0)])])])]),e("div",Bo,[e("div",zo,[e("div",Po,[e("div",To,[_(S(me),{class:"w-6 h-6 text-blue-600"})]),e("div",Fo,[o[7]||(o[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",Ro,c(p.value.tickets_sold||0),1)])])]),e("div",Mo,[e("div",Lo,[e("div",qo,[_(S(he),{class:"w-6 h-6 text-green-600"})]),e("div",Oo,[o[8]||(o[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",No,c(F(p.value.total_revenue||0))+" XAF",1)])])]),e("div",Xo,[e("div",Go,[e("div",Wo,[_(S(ze),{class:"w-6 h-6 text-yellow-600"})]),e("div",Ho,[o[9]||(o[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",Jo,c(w()),1)])])]),e("div",Qo,[e("div",Ko,[e("div",Zo,[_(S(ie),{class:"w-6 h-6 text-purple-600"})]),e("div",Yo,[o[10]||(o[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",er,c(r()),1)])])])]),e("div",tr,[e("div",sr,[e("div",or,[o[15]||(o[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",rr,[e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",ar,c(p.value.title),1)]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",nr,c(p.value.venue_name),1)]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",ir,c(p.value.category_name||"Non spécifiée"),1)]),e("div",lr,[o[14]||(o[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",dr,c(p.value.description||"Aucune description"),1)])])]),e("div",ur,[o[20]||(o[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),p.value.schedules&&p.value.schedules.length>0?(l(),i("div",cr,[(l(!0),i(W,null,H(p.value.schedules,s=>(l(),i("div",{key:s.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",mr,[e("div",null,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",pr,c(V(s.starts_at)),1)]),e("div",null,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",gr,c(V(s.ends_at)),1)]),e("div",null,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",fr,c(s.door_time?V(s.door_time):"Non spécifiée"),1)])])]))),128))])):(l(),i("div",vr,[_(S(ie),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[19]||(o[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",br,[o[25]||(o[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),p.value.ticket_types&&p.value.ticket_types.length>0?(l(),i("div",xr,[(l(!0),i(W,null,H(p.value.ticket_types,s=>(l(),i("div",{key:s.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",yr,[e("div",_r,[e("div",hr,[e("h3",wr,c(s.name),1),e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},c(s.is_active?"Actif":"Inactif"),3)]),e("p",$r,c(s.description||"Aucune description"),1)]),e("div",kr,[o[21]||(o[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",Cr,c(F(s.price))+" XAF ",1)]),e("div",Er,[o[23]||(o[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",jr,[e("span",Sr,c(s.sold||0),1),o[22]||(o[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",Dr,c(R(s)),1)]),e("div",Ir,c(Z(s))+"% vendus ",1)])])]))),128))])):(l(),i("div",Ar,[_(S(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[24]||(o[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",Vr,[o[28]||(o[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Commandes récentes",-1)),f.value.length>0?(l(),i("div",Ur,[e("table",Br,[o[26]||(o[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",zr,[(l(!0),i(W,null,H(f.value,s=>(l(),i("tr",{key:s.id},[e("td",Pr,c(s.customer_name),1),e("td",Tr,c(s.ticket_quantity),1),e("td",Fr,c(F(s.total_amount))+" XAF",1),e("td",Rr,c(M(s.created_at)),1)]))),128))])])])):(l(),i("div",Mr,[_(S(Pe),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[27]||(o[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",Lr,[e("div",qr,[o[32]||(o[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",Or,[e("button",{onClick:z,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[_(S(Te),{class:"w-4 h-4 mr-2"}),o[29]||(o[29]=N(" Partager l'événement ",-1))]),e("button",{onClick:v,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[_(S(we),{class:"w-4 h-4 mr-2"}),o[30]||(o[30]=N(" Voir la page publique ",-1))]),e("button",{onClick:O,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...o[31]||(o[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),N(" Exporter les données ",-1)])])])]),p.value?(l(),i("div",Nr,[o[33]||(o[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("div",Xr,[h()?(l(),i("img",{key:0,src:g(),alt:p.value.title,class:"w-full h-full object-cover",onError:K,onLoad:Y},null,40,Gr)):(l(),i("div",Wr,[_(S(ie),{class:"w-16 h-16 text-gray-400"})]))])])):q("",!0),e("div",Hr,[o[37]||(o[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Jr,[e("div",Qr,[o[34]||(o[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:G(["text-sm font-medium",p.value.is_public?"text-green-600":"text-red-600"])},c(p.value.is_public?"Oui":"Non"),3)]),e("div",Kr,[o[35]||(o[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:G(["text-sm font-medium",p.value.sales_active?"text-green-600":"text-red-600"])},c(p.value.sales_active?"Oui":"Non"),3)]),e("div",Zr,[o[36]||(o[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",Yr,c(M(p.value.created_at)),1)])])])])])])):q("",!0)])])}}},ta=re(ea,[["__scopeId","data-v-006581df"]]),Vd=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"})),sa={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},oa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ra={key:0,class:"flex justify-center items-center h-64"},aa={key:1,class:"text-center py-16"},na={class:"mb-4"},ia={class:"text-gray-600 mb-6"},la={key:2},da={class:"mb-8"},ua={class:"flex items-center justify-between"},ca={class:"flex items-center space-x-4"},ma={class:"text-gray-600 font-primea mt-1"},pa={class:"flex items-center space-x-3"},ga={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},fa={class:"lg:col-span-2 space-y-6"},va={class:"bg-white rounded-primea shadow-primea p-6"},ba={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xa={class:"md:col-span-2"},ya={class:"md:col-span-2"},_a=["value"],ha={key:0},wa=["value"],$a={key:1,class:"space-y-2"},ka={class:"md:col-span-2"},Ca={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},Ea={key:0,class:"mb-4"},ja=["src"],Sa={key:1},Da={class:"bg-white rounded-primea shadow-primea p-6"},Ia={class:"flex items-center justify-between mb-6"},Aa={class:"space-y-4"},Va=["onUpdate:modelValue"],Ua=["onUpdate:modelValue"],Ba=["onUpdate:modelValue"],za={class:"flex items-end"},Pa=["onClick"],Ta={class:"bg-white rounded-primea shadow-primea p-6"},Fa={class:"flex items-center justify-between mb-6"},Ra={key:0,class:"text-center py-8 text-gray-500"},Ma={key:1,class:"space-y-4"},La=["onUpdate:modelValue"],qa=["onUpdate:modelValue"],Oa=["onUpdate:modelValue"],Na=["onUpdate:modelValue"],Xa={class:"flex items-center space-x-2"},Ga={class:"flex items-center space-x-2"},Wa=["onUpdate:modelValue"],Ha=["onClick"],Ja={class:"space-y-6"},Qa={class:"bg-white rounded-primea shadow-primea p-6"},Ka={class:"space-y-4"},Za={class:"flex items-center space-x-2"},Ya={class:"bg-white rounded-primea shadow-primea p-6"},en={class:"space-y-3"},tn=["disabled"],sn={key:0,class:"bg-white rounded-primea shadow-primea p-6"},on={class:"w-full h-48 rounded-primea overflow-hidden"},rn=["src","alt"],an={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},nn={__name:"EventEdit",setup($){const u=Ce(),C=fe(),a=I(!0),A=I(!1),p=I(null),f=I(null),U=I([]),m=I([]),b=I(!1),z=I(null),v=ee({title:"",description:"",category_id:"",venue_id:"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:"",image_preview:"",image_file:null,is_active:!1,schedules:[{starts_at:"",ends_at:"",door_time:""}],ticket_types:[]}),O=async()=>{try{const y=await L.getCategories();U.value=y.data.categories||[]}catch(y){console.error("Erreur chargement catégories:",y)}},F=async()=>{try{const y=await L.getVenues();m.value=y.data.venues||y.data.data||[]}catch(y){console.error("Erreur chargement lieux:",y)}},M=async()=>{a.value=!0,p.value=null;try{let y=u.params.slug,n;if(/^\d+$/.test(y))n=(await L.getEvent(y)).data.data;else try{const B=await L.getEvents();if(n=(B.data.data.events.data||B.data.data.events).find(ae=>ae.slug===y),!n)throw new Error(`Événement avec le slug "${y}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${y}" non trouvé`)}if(!n)throw new Error("Événement introuvable");f.value={...n,venue_name:n.venue?.name||n.venue_name||"",venue_address:n.venue?.address||n.venue_address||"",category_name:n.category?.name||n.category_name||""},Object.assign(v,{title:f.value.title||"",description:f.value.description||"",category_id:f.value.category_id||"",venue_id:f.value.venue_id||"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:f.value.image_url||"",image_preview:f.value.image_url||"",is_active:f.value.is_active??!1,schedules:f.value.schedules&&f.value.schedules.length>0?f.value.schedules.map(B=>({starts_at:B.starts_at?new Date(B.starts_at).toISOString().slice(0,16):"",ends_at:B.ends_at?new Date(B.ends_at).toISOString().slice(0,16):"",door_time:B.door_time?new Date(B.door_time).toISOString().slice(0,16):""})):[{starts_at:"",ends_at:"",door_time:""}],ticket_types:(f.value.ticket_types||f.value.ticketTypes||[]).map(B=>({id:B.id,name:B.name||"",description:B.description||"",price:B.price||0,capacity:B.capacity||B.available_quantity||B.max_quantity||B.quantity||0,is_active:B.is_active??B.status==="active"}))})}catch(y){console.error("Erreur lors du chargement de l'événement:",y),y.response?.status===404?p.value=`Événement avec l'identifiant "${u.params.slug}" non trouvé`:y.message?p.value=y.message:p.value="Erreur lors du chargement de l'événement"}finally{a.value=!1}},V=async()=>{A.value=!0;try{if(!f.value)throw new Error("Aucun événement à mettre à jour");const y={title:v.title,description:v.description,category_id:v.category_id,venue_id:v.venue_id||null,new_venue_name:v.venue_id==="new"?v.new_venue_name:null,new_venue_city:v.venue_id==="new"?v.new_venue_city:null,new_venue_address:v.venue_id==="new"?v.new_venue_address:null,is_active:v.is_active,schedules:v.schedules,ticket_types:v.ticket_types.map(n=>({id:n.id||null,name:n.name,description:n.description,price:n.price,capacity:n.capacity,is_active:n.is_active}))};if(v.image_file){const n=new FormData;console.log("EventEdit - Upload de fichier détecté:",v.image_file),console.log("EventEdit - Données à envoyer:",y),Object.keys(y).forEach(B=>{y[B]!==null&&y[B]!==void 0&&(B==="schedules"||B==="ticket_types"?(n.append(B,JSON.stringify(y[B])),console.log(`EventEdit - Ajout ${B} (JSON):`,JSON.stringify(y[B]))):(n.append(B,y[B]),console.log(`EventEdit - Ajout ${B}:`,y[B])))}),n.append("image_file",v.image_file),console.log("EventEdit - Fichier ajouté à FormData:",v.image_file.name);for(let[B,E]of n.entries())console.log(`EventEdit - FormData ${B}:`,E);await L.updateEventWithFile(f.value.id,n)}else y.image_url=v.image_url||null,y.image_file=null,console.log("EventEdit - Envoi sans fichier, avec URL:",y.image_url),await L.updateEvent(f.value.id,y);await D.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),C.push({name:"organizer-event-detail",params:{slug:f.value.slug}})}catch(y){console.error("Erreur lors de la mise à jour:",y),await D.fire({title:"Erreur",text:y.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{A.value=!1}},x=async()=>{if((await D.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await L.updateEvent(f.value.id,{status:"published",is_active:!0}),f.value.status="published",f.value.is_active=!0,await D.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(n){console.error("Erreur publication:",n),await D.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},T=()=>{v.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},R=async y=>{(await D.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&v.ticket_types.splice(y,1)},Z=()=>{v.schedules.push({starts_at:"",ends_at:"",door_time:""})},K=y=>{v.schedules.length>1&&v.schedules.splice(y,1)},Y=()=>{v.venue_id==="new"&&(b.value=!0)},w=()=>{b.value=!1,v.venue_id="",v.new_venue_name="",v.new_venue_city="",v.new_venue_address=""},r=y=>{const n=y.target.files[0];if(n){v.image_file=n,v.image_url="";const B=new FileReader;B.onload=E=>{v.image_preview=E.target.result},B.readAsDataURL(n)}},h=()=>{v.image_url&&(v.image_preview=v.image_url,v.image_file=null)},g=()=>{v.image_url="",v.image_preview="",v.image_file=null,z.value&&(z.value.value="")},t=()=>{if(v.image_preview&&v.image_preview.trim()!=="")return!0;if(!f.value)return!1;const y=f.value.image_url||f.value.image||f.value.image_file;return y&&y.trim()!==""},o=()=>{if(v.image_preview)return v.image_preview;if(!f.value)return"";let y=f.value.image_url||f.value.image||f.value.image_file;return y&&y.trim()!==""?y.startsWith("http://")||y.startsWith("https://")?y:y.startsWith("/")?window.location.origin+y:y.includes("/")?y:`${window.location.origin}/storage/images/events/${y}`:""},d=y=>{console.log("Erreur de chargement d'image:",y.target.src),y.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},s=y=>{console.log("Image chargée avec succès:",y.target.src)},k=y=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[y]||y,se=y=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[y]||"bg-gray-100 text-gray-800";return oe(async()=>{await Promise.all([O(),F(),M()])}),(y,n)=>{const B=le("router-link");return l(),i("div",sa,[e("div",oa,[a.value?(l(),i("div",ra,[...n[11]||(n[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):p.value?(l(),i("div",aa,[e("div",na,[_(S($e),{class:"w-16 h-16 mx-auto text-red-500"})]),n[13]||(n[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",ia,c(p.value),1),_(B,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:Q(()=>[...n[12]||(n[12]=[N(" Retour aux événements ",-1)])]),_:1})])):f.value?(l(),i("div",la,[e("div",da,[e("div",ua,[e("div",ca,[e("button",{onClick:n[0]||(n[0]=E=>y.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(S(be),{class:"w-6 h-6"})]),e("div",null,[n[14]||(n[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",ma,c(f.value.title),1)])]),e("div",pa,[e("span",{class:G(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",se(f.value.status)])},c(k(f.value.status)),3)])])]),e("form",{onSubmit:ne(V,["prevent"]),class:"space-y-8"},[e("div",ga,[e("div",fa,[e("div",va,[n[24]||(n[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",ba,[e("div",xa,[n[15]||(n[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement *",-1)),j(e("input",{"onUpdate:modelValue":n[1]||(n[1]=E=>v.title=E),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[P,v.title]])]),e("div",ya,[n[16]||(n[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),j(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=E=>v.description=E),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[P,v.description]])]),e("div",null,[n[18]||(n[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),j(e("select",{"onUpdate:modelValue":n[3]||(n[3]=E=>v.category_id=E),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[n[17]||(n[17]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),i(W,null,H(U.value,E=>(l(),i("option",{key:E.id,value:E.id},c(E.name),9,_a))),128))],512),[[ue,v.category_id]])]),e("div",null,[n[21]||(n[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),b.value?q("",!0):(l(),i("div",ha,[j(e("select",{"onUpdate:modelValue":n[4]||(n[4]=E=>v.venue_id=E),onChange:Y,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[n[19]||(n[19]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),i(W,null,H(m.value,E=>(l(),i("option",{key:E.id,value:E.id},c(E.name)+" - "+c(E.city),9,wa))),128)),n[20]||(n[20]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[ue,v.venue_id]])])),b.value||v.venue_id==="new"?(l(),i("div",$a,[j(e("input",{"onUpdate:modelValue":n[5]||(n[5]=E=>v.new_venue_name=E),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[P,v.new_venue_name]]),j(e("input",{"onUpdate:modelValue":n[6]||(n[6]=E=>v.new_venue_city=E),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[P,v.new_venue_city]]),j(e("input",{"onUpdate:modelValue":n[7]||(n[7]=E=>v.new_venue_address=E),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[P,v.new_venue_address]]),e("button",{type:"button",onClick:w,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):q("",!0)]),e("div",ka,[n[23]||(n[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",Ca,[v.image_preview?(l(),i("div",Ea,[e("img",{src:v.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea",onError:d,onLoad:s},null,40,ja),e("button",{type:"button",onClick:g,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(l(),i("div",Sa,[e("input",{ref_key:"imageInput",ref:z,type:"file",accept:"image/*",onChange:r,class:"hidden"},null,544),e("button",{type:"button",onClick:n[8]||(n[8]=E=>y.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),n[22]||(n[22]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),j(e("input",{"onUpdate:modelValue":n[9]||(n[9]=E=>v.image_url=E),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:h},null,544),[[P,v.image_url]])]))])])])]),e("div",Da,[e("div",Ia,[n[26]||(n[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:Z,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(S(de),{class:"w-4 h-4 inline mr-2"}),n[25]||(n[25]=N(" Ajouter une séance ",-1))])]),e("div",Aa,[(l(!0),i(W,null,H(v.schedules,(E,ae)=>(l(),i("div",{key:ae,class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[n[27]||(n[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),j(e("input",{"onUpdate:modelValue":J=>E.starts_at=J,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Va),[[P,E.starts_at]])]),e("div",null,[n[28]||(n[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),j(e("input",{"onUpdate:modelValue":J=>E.ends_at=J,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Ua),[[P,E.ends_at]])]),e("div",null,[n[29]||(n[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Ouverture des portes",-1)),j(e("input",{"onUpdate:modelValue":J=>E.door_time=J,type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Ba),[[P,E.door_time]])]),e("div",za,[v.schedules.length>1?(l(),i("button",{key:0,type:"button",onClick:J=>K(ae),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_(S(pe),{class:"w-4 h-4"})],8,Pa)):q("",!0)])]))),128))])]),e("div",Ta,[e("div",Fa,[n[31]||(n[31]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:T,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(S(de),{class:"w-4 h-4 inline mr-2"}),n[30]||(n[30]=N(" Ajouter un type ",-1))])]),v.ticket_types.length===0?(l(),i("div",Ra,[_(S(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[32]||(n[32]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),n[33]||(n[33]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(l(),i("div",Ma,[(l(!0),i(W,null,H(v.ticket_types,(E,ae)=>(l(),i("div",{key:ae,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[n[34]||(n[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),j(e("input",{"onUpdate:modelValue":J=>E.name=J,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,La),[[P,E.name]])]),e("div",null,[n[35]||(n[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),j(e("input",{"onUpdate:modelValue":J=>E.price=J,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,qa),[[P,E.price,void 0,{number:!0}]])]),e("div",null,[n[36]||(n[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),j(e("input",{"onUpdate:modelValue":J=>E.capacity=J,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,Oa),[[P,E.capacity,void 0,{number:!0}]])]),e("div",null,[n[37]||(n[37]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),j(e("textarea",{"onUpdate:modelValue":J=>E.description=J,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,Na),[[P,E.description]])]),e("div",Xa,[e("label",Ga,[j(e("input",{"onUpdate:modelValue":J=>E.is_active=J,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,Wa),[[ge,E.is_active]]),n[38]||(n[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))]),e("button",{type:"button",onClick:J=>R(ae),class:"text-red-600 hover:text-red-800 p-1"},[_(S(pe),{class:"w-4 h-4"})],8,Ha)])]))),128))]))])]),e("div",Ja,[e("div",Qa,[n[41]||(n[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Ka,[e("div",null,[e("label",Za,[j(e("input",{"onUpdate:modelValue":n[10]||(n[10]=E=>v.is_active=E),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ge,v.is_active]]),n[39]||(n[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement actif",-1))]),n[40]||(n[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Publier l'événement et activer les ventes",-1))])])]),e("div",Ya,[n[44]||(n[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",en,[e("button",{type:"submit",disabled:A.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},c(A.value?"Enregistrement...":"Enregistrer les modifications"),9,tn),_(B,{to:{name:"organizer-event-detail",params:{slug:f.value?.slug||S(u).params.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:Q(()=>[...n[42]||(n[42]=[N(" Annuler les modifications ",-1)])]),_:1},8,["to"]),f.value&&!f.value.is_active?(l(),i("button",{key:0,type:"button",onClick:x,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[_(S(ke),{class:"w-4 h-4 inline mr-2"}),n[43]||(n[43]=N(" Publier l'événement ",-1))])):q("",!0)])]),f.value?(l(),i("div",sn,[n[45]||(n[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image actuelle",-1)),e("div",on,[t()?(l(),i("img",{key:0,src:o(),alt:f.value.title,class:"w-full h-full object-cover",onError:d,onLoad:s},null,40,rn)):(l(),i("div",an,[_(S(ie),{class:"w-16 h-16 text-gray-400"})]))])])):q("",!0)])])],32)])):q("",!0)])])}}},ln=re(nn,[["__scopeId","data-v-a5121c89"]]),Ud=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"})),dn={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},un={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},cn={class:"mb-8"},mn={class:"flex items-center justify-between"},pn={class:"flex items-center space-x-4"},gn={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},fn={class:"lg:col-span-2 space-y-6"},vn={class:"bg-white rounded-primea shadow-primea p-6"},bn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xn={class:"md:col-span-2"},yn={class:"md:col-span-2"},_n=["value"],hn={key:0},wn=["value"],$n={key:1,class:"space-y-2"},kn={class:"md:col-span-2"},Cn={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},En={key:0,class:"mb-4"},jn=["src"],Sn={key:1},Dn={class:"bg-white rounded-primea shadow-primea p-6"},In={class:"flex items-center justify-between mb-6"},An={class:"space-y-4"},Vn=["onUpdate:modelValue","onChange"],Un=["onUpdate:modelValue","min"],Bn={class:"flex items-end"},zn=["onClick"],Pn={class:"bg-white rounded-primea shadow-primea p-6"},Tn={class:"flex items-center justify-between mb-6"},Fn={key:0,class:"text-center py-8 text-gray-500"},Rn={key:1,class:"space-y-4"},Mn=["onUpdate:modelValue"],Ln=["onUpdate:modelValue"],qn=["onUpdate:modelValue"],On=["onUpdate:modelValue"],Nn={class:"flex items-end"},Xn=["onClick"],Gn={class:"space-y-6"},Wn={class:"bg-white rounded-primea shadow-primea p-6"},Hn={class:"space-y-4"},Jn={class:"flex items-center space-x-2"},Qn={class:"flex items-center space-x-2"},Kn={class:"bg-white rounded-primea shadow-primea p-6"},Zn={class:"space-y-3"},Yn=["disabled"],ei={key:0,class:"bg-white rounded-primea shadow-primea p-6"},ti=["src","alt"],si={class:"bg-white rounded-primea shadow-primea p-6"},oi={class:"space-y-2 text-sm"},ri={class:"flex justify-between"},ai={class:"font-medium font-primea"},ni={class:"flex justify-between"},ii={class:"font-medium font-primea"},li={key:0,class:"flex justify-between"},di={class:"font-medium font-primea"},ui={key:1,class:"flex justify-between"},ci={class:"font-medium font-primea"},mi={__name:"EventCreate",setup($){const u=fe(),C=I(!1),a=I([]),A=I([]),p=I(!1),f=I(!1),U=I(null),m=ee({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),b=te(()=>m.ticket_types.reduce((g,t)=>g+(parseInt(t.capacity)||0),0)),z=te(()=>{if(m.ticket_types.length===0)return 0;const g=m.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return g.length>0?Math.min(...g):0}),v=te(()=>{if(m.ticket_types.length===0)return 0;const g=m.ticket_types.map(t=>parseInt(t.price)||0);return g.length>0?Math.max(...g):0}),O=()=>{m.ticket_types.push({name:"",description:"",price:"",capacity:""})},F=()=>{m.schedules.push({starts_at:"",ends_at:""})},M=g=>{m.schedules.length>1&&m.schedules.splice(g,1)},V=()=>{m.venue_id==="new"?f.value=!0:f.value=!1},x=()=>{f.value=!1,m.venue_id="",m.new_venue_name="",m.new_venue_city="",m.new_venue_address=""},T=g=>{const t=g.target.files[0];if(t){m.image_file=t;const o=new FileReader;o.onload=d=>{m.image_preview=d.target.result,m.image_url=""},o.readAsDataURL(t)}},R=()=>{m.image_url&&(m.image_preview=m.image_url,m.image_file=null)},Z=()=>{m.image_url="",m.image_preview="",m.image_file=null,U.value&&(U.value.value="")},K=g=>{m.ticket_types.length>1&&m.ticket_types.splice(g,1)},Y=g=>{if(g.starts_at&&(!g.ends_at||new Date(g.ends_at)<new Date(g.starts_at))){const t=new Date(g.starts_at);t.setHours(t.getHours()+2),g.ends_at=t.toISOString().slice(0,16)}},w=async()=>{if(m.ticket_types.length===0){D.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!m.title){D.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}C.value=!0;try{if(!m.category_id){D.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!m.venue_id&&!m.new_venue_name){D.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(m.schedules.some(o=>!o.starts_at||!o.ends_at)){D.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}if(m.schedules.some(o=>new Date(o.ends_at)<new Date(o.starts_at))){D.fire({title:"Erreur",text:"La date de fin doit être égale ou postérieure à la date de début",icon:"error",confirmButtonColor:"#272d63"});return}const g={title:m.title,description:m.description,category_id:m.category_id,venue_id:m.venue_id!=="new"?m.venue_id:null,venue_name:m.venue_id==="new"?m.new_venue_name:null,venue_city:m.venue_id==="new"?m.new_venue_city:"Abidjan",venue_address:m.venue_id==="new"?m.new_venue_address:null,is_active:m.status==="published"?1:0,schedules:m.schedules.map(o=>({starts_at:o.starts_at,ends_at:o.ends_at,door_time:o.starts_at})),ticket_types:m.ticket_types.map(o=>({name:o.name,description:o.description,price:parseFloat(o.price),capacity:parseInt(o.capacity),is_active:!0}))};let t;if(m.image_file){const o=new FormData;Object.keys(g).forEach(d=>{g[d]!==null&&g[d]!==void 0&&(d==="schedules"||d==="ticket_types"?o.append(d,JSON.stringify(g[d])):o.append(d,g[d]))}),o.append("image_file",m.image_file),t=await L.createEventWithFile(o)}else g.image_url=m.image_url||null,t=await L.createEvent(g);if(t.data.success)D.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{u.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(g){console.error("Erreur création événement:",g),console.error("Détails erreur:",g.response?.data);let t=g.response?.data?.message||"Erreur lors de la création de l'événement";if(g.response?.data?.errors){const o=g.response.data.errors,d=Object.keys(o).map(s=>`${s}: ${o[s].join(", ")}`).join(`
`);t+=`

Détails:
`+d}D.fire({title:"Erreur de validation",text:t,icon:"error",confirmButtonColor:"#272d63"})}finally{C.value=!1}},r=async()=>{p.value=!0;try{const g=await L.getCategories();g.data.success&&(a.value=g.data.categories||g.data.data);const t=await L.getVenues();t.data.success&&(A.value=t.data.venues||t.data.data)}catch(g){console.error("Erreur chargement données initiales:",g)}finally{p.value=!1}},h=g=>new Intl.NumberFormat("fr-FR").format(g);return oe(()=>{r()}),(g,t)=>{const o=le("router-link");return l(),i("div",dn,[e("div",un,[e("div",cn,[e("div",mn,[e("div",pn,[e("button",{onClick:t[0]||(t[0]=d=>g.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(S(be),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:ne(w,["prevent"]),class:"space-y-8"},[e("div",gn,[e("div",fn,[e("div",vn,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",bn,[e("div",xn,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),j(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>m.title=d),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[P,m.title]])]),e("div",yn,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),j(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=d=>m.description=d),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[P,m.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),j(e("select",{"onUpdate:modelValue":t[3]||(t[3]=d=>m.category_id=d),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),i(W,null,H(a.value,d=>(l(),i("option",{key:d.id,value:d.id},c(d.name),9,_n))),128))],512),[[ue,m.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),f.value?q("",!0):(l(),i("div",hn,[j(e("select",{"onUpdate:modelValue":t[4]||(t[4]=d=>m.venue_id=d),onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),i(W,null,H(A.value,d=>(l(),i("option",{key:d.id,value:d.id},c(d.name)+" - "+c(d.city),9,wn))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[ue,m.venue_id]])])),f.value||m.venue_id==="new"?(l(),i("div",$n,[j(e("input",{"onUpdate:modelValue":t[5]||(t[5]=d=>m.new_venue_name=d),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[P,m.new_venue_name]]),j(e("input",{"onUpdate:modelValue":t[6]||(t[6]=d=>m.new_venue_city=d),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[P,m.new_venue_city]]),j(e("input",{"onUpdate:modelValue":t[7]||(t[7]=d=>m.new_venue_address=d),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[P,m.new_venue_address]]),e("button",{type:"button",onClick:x,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):q("",!0)]),e("div",kn,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",Cn,[m.image_preview?(l(),i("div",En,[e("img",{src:m.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,jn),e("button",{type:"button",onClick:Z,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(l(),i("div",Sn,[e("input",{ref_key:"imageInput",ref:U,type:"file",accept:"image/*",onChange:T,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=d=>g.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),j(e("input",{"onUpdate:modelValue":t[9]||(t[9]=d=>m.image_url=d),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:R},null,544),[[P,m.image_url]])]))])])])]),e("div",Dn,[e("div",In,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:F,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(S(de),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=N(" Ajouter une séance ",-1))])]),e("div",An,[(l(!0),i(W,null,H(m.schedules,(d,s)=>(l(),i("div",{key:s,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),j(e("input",{"onUpdate:modelValue":k=>d.starts_at=k,type:"datetime-local",required:"",onChange:k=>Y(d),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,40,Vn),[[P,d.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),j(e("input",{"onUpdate:modelValue":k=>d.ends_at=k,type:"datetime-local",required:"",min:d.starts_at,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Un),[[P,d.ends_at]]),t[28]||(t[28]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"La date de fin doit être égale ou postérieure à la date de début",-1))]),e("div",Bn,[m.schedules.length>1?(l(),i("button",{key:0,type:"button",onClick:k=>M(s),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_(S(pe),{class:"w-4 h-4"})],8,zn)):q("",!0)])]))),128))])]),e("div",Pn,[e("div",Tn,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:O,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_(S(de),{class:"w-4 h-4 inline mr-2"}),t[29]||(t[29]=N(" Ajouter un type ",-1))])]),m.ticket_types.length===0?(l(),i("div",Fn,[_(S(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[31]||(t[31]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[32]||(t[32]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(l(),i("div",Rn,[(l(!0),i(W,null,H(m.ticket_types,(d,s)=>(l(),i("div",{key:s,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),j(e("input",{"onUpdate:modelValue":k=>d.name=k,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,Mn),[[P,d.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),j(e("input",{"onUpdate:modelValue":k=>d.price=k,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,Ln),[[P,d.price,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),j(e("input",{"onUpdate:modelValue":k=>d.capacity=k,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,qn),[[P,d.capacity,void 0,{number:!0}]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),j(e("input",{"onUpdate:modelValue":k=>d.description=k,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,On),[[P,d.description]])]),e("div",Nn,[m.ticket_types.length>1?(l(),i("button",{key:0,type:"button",onClick:k=>K(s),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_(S(pe),{class:"w-4 h-4"})],8,Xn)):q("",!0)])]))),128))]))])]),e("div",Gn,[e("div",Wn,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Hn,[e("div",null,[e("label",Jn,[j(e("input",{"onUpdate:modelValue":t[10]||(t[10]=d=>m.is_public=d),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ge,m.is_public]]),t[37]||(t[37]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",Qn,[j(e("input",{"onUpdate:modelValue":t[11]||(t[11]=d=>m.sales_active=d),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ge,m.sales_active]]),t[39]||(t[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),j(e("select",{"onUpdate:modelValue":t[12]||(t[12]=d=>m.status=d),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[41]||(t[41]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[ue,m.status]]),t[43]||(t[43]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",Kn,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Zn,[e("button",{type:"submit",disabled:C.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},c(C.value?"Création en cours...":"Créer l'événement"),9,Yn),_(o,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:Q(()=>[...t[45]||(t[45]=[N(" Annuler ",-1)])]),_:1})])]),m.image_url||m.image_preview?(l(),i("div",ei,[t[47]||(t[47]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:m.image_preview||m.image_url,alt:m.title,class:"w-full h-48 object-cover rounded-primea"},null,8,ti)])):q("",!0),e("div",si,[t[52]||(t[52]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",oi,[e("div",ri,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",ai,c(m.ticket_types.length),1)]),e("div",ni,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",ii,c(b.value||"Illimitée"),1)]),z.value>0?(l(),i("div",li,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",di,c(h(z.value))+" XAF",1)])):q("",!0),v.value>0?(l(),i("div",ui,[t[51]||(t[51]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",ci,c(h(v.value))+" XAF",1)])):q("",!0)])])])])],32)])])}}},pi=re(mi,[["__scopeId","data-v-9749d093"]]),Bd=Object.freeze(Object.defineProperty({__proto__:null,default:pi},Symbol.toStringTag,{value:"Module"})),gi={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},fi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},vi={class:"mb-8"},bi={class:"flex items-center justify-between"},xi={key:0,class:"flex justify-center items-center h-64"},yi={key:1},_i={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},hi={class:"bg-white rounded-lg shadow p-6"},wi={class:"flex items-center"},$i={class:"ml-4"},ki={class:"text-2xl font-bold text-green-600"},Ci={class:"bg-white rounded-lg shadow p-6"},Ei={class:"flex items-center"},ji={class:"ml-4"},Si={class:"text-2xl font-bold text-yellow-600"},Di={class:"bg-white rounded-lg shadow p-6"},Ii={class:"flex items-center"},Ai={class:"ml-4"},Vi={class:"text-2xl font-bold text-blue-600"},Ui={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Bi={class:"flex items-center justify-between mb-4"},zi={class:"flex items-center"},Pi={class:"text-lg font-semibold text-gray-900"},Ti={class:"text-right"},Fi={class:"text-2xl font-bold text-green-600"},Ri={class:"mb-4 p-3 bg-gray-50 rounded-primea"},Mi={class:"flex items-center justify-between mb-2"},Li={key:0,class:"text-sm text-gray-600 font-primea"},qi={key:0},Oi={key:1,class:"text-sm text-gray-600 font-primea"},Ni={class:"space-y-3"},Xi=["onClick","disabled"],Gi={class:"mt-6 pt-6 border-t"},Wi={key:0,class:"text-sm text-gray-500"},Hi={key:1,class:"space-y-2"},Ji={class:"font-medium"},Qi={class:"text-gray-500 ml-2"},Ki={class:"bg-white rounded-lg shadow"},Zi={class:"p-6 border-b"},Yi={class:"flex justify-between items-center"},el={key:0,class:"p-8 text-center text-gray-500"},tl={key:1,class:"overflow-x-auto"},sl={class:"w-full"},ol={class:"divide-y divide-gray-200"},rl={class:"px-6 py-4 text-sm font-mono text-gray-900"},al={class:"px-6 py-4 text-sm"},nl={class:"px-6 py-4 text-sm font-medium text-gray-900"},il={class:"px-6 py-4 text-sm"},ll={class:"px-6 py-4 text-sm"},dl={class:"px-6 py-4 text-sm text-gray-500"},ul={class:"px-6 py-4 text-sm"},cl=["onClick"],ml={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},pl={class:"bg-white rounded-primea p-6 w-full max-w-md"},gl={class:"space-y-4"},fl=["value"],vl=["value"],bl=["max"],xl={class:"flex justify-end space-x-3 mt-6"},yl=["disabled"],_l={__name:"BalanceManagement",setup($){const u=I(!1),C=I(!1),a=I(!1),A=I([]),p=I([]),f=ee({pending_payouts:0,total_payouts:0}),U=ee({gateway:"",available_balance:0,amount:"",phone_number:""}),m=te(()=>A.value.reduce((w,r)=>w+(parseFloat(r.balance)||0),0)),b=async()=>{u.value=!0;try{const w=await L.getBalance();console.log("Balance API Response:",w.data),w.data.success?(A.value=w.data.data.balances||[],console.log("Balances loaded:",A.value),A.value.length===0&&(A.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],console.log("Default balances created:",A.value))):console.error("Balance API Error:",w.data.message)}catch(w){console.error("Erreur chargement soldes:",w),console.error("Error details:",w.response?.data),A.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],D.fire({title:"Erreur",text:"Impossible de charger les soldes. Affichage des valeurs par défaut.",icon:"warning",confirmButtonColor:"#272d63"})}finally{u.value=!1}},z=async()=>{try{const w=await L.getPaymentHistory();console.log("Payment History API Response:",w.data),w.data.success?(p.value=w.data.data.payouts?.data||w.data.data.payouts||[],console.log("Recent payouts loaded:",p.value),f.pending_payouts=p.value.filter(r=>["pending","processing"].includes(r.status)).length,f.total_payouts=p.value.reduce((r,h)=>r+(h.amount||0),0),console.log("Stats calculated:",f)):console.error("Payment History API Error:",w.data.message)}catch(w){console.error("Erreur chargement payouts récents:",w),console.error("Error details:",w.response?.data)}},v=w=>{Object.assign(U,{gateway:w.gateway,available_balance:w.balance,amount:"",phone_number:w.payout_phone_number||""}),a.value=!0},O=async()=>{C.value=!0;try{const w=await L.requestPayout(U);w.data.success?(D.fire({title:"Succès !",text:"Demande de versement envoyée avec succès",icon:"success",confirmButtonColor:"#272d63"}),a.value=!1,b(),z()):D.fire({title:"Erreur",text:w.data.message||"Erreur lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}catch(w){console.error("Erreur demande payout:",w),D.fire({title:"Erreur technique",text:"Une erreur est survenue lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}finally{C.value=!1}},F=w=>p.value.filter(r=>r.gateway===w).slice(0,3),M=w=>{D.fire({title:`Versement #${w.reference}`,html:`
      <div class="text-left">
        <p><strong>Montant:</strong> ${V(w.amount)} XAF</p>
        <p><strong>Statut:</strong> ${K(w.status)}</p>
        <p><strong>Gateway:</strong> ${R(w.gateway)}</p>
        <p><strong>Date:</strong> ${T(w.created_at)}</p>
      </div>
    `,icon:"info",confirmButtonColor:"#272d63"})},V=w=>new Intl.NumberFormat("fr-FR").format(w||0),x=w=>new Date(w).toLocaleDateString("fr-FR"),T=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=w=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[w]||w,Z=w=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[w]||"bg-gray-100 text-gray-800",K=w=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[w]||w,Y=w=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800";return oe(()=>{b(),z()}),(w,r)=>(l(),i("div",gi,[e("div",fi,[e("div",vi,[e("div",bi,[r[6]||(r[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Mon Solde"),e("p",{class:"text-gray-600 font-primea"},"Consultez votre solde et effectuez des demandes de versement")],-1)),e("button",{onClick:r[0]||(r[0]=h=>w.$router.push("/organizer/payouts/history")),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[...r[5]||(r[5]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),N(" Historique Versements ",-1)])])])]),u.value?(l(),i("div",xi,[...r[7]||(r[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),i("div",yi,[e("div",_i,[e("div",hi,[e("div",wi,[r[9]||(r[9]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",$i,[r[8]||(r[8]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",ki,c(V(m.value))+" XAF",1)])])]),e("div",Ci,[e("div",Ei,[r[11]||(r[11]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ji,[r[10]||(r[10]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",Si,c(f.pending_payouts||0),1)])])]),e("div",Di,[e("div",Ii,[r[13]||(r[13]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",Ai,[r[12]||(r[12]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",Vi,c(V(f.total_payouts||0))+" XAF",1)])])])]),e("div",Ui,[(l(!0),i(W,null,H(A.value,h=>(l(),i("div",{key:h.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",Bi,[e("div",zi,[e("div",{class:G(["p-2 rounded-lg mr-4",Z(h.gateway)])},[...r[14]||(r[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",Pi,c(R(h.gateway)),1),r[15]||(r[15]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",Ti,[e("p",Fi,c(V(h.balance))+" XAF",1)])]),e("div",Ri,[e("div",Mi,[r[16]||(r[16]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Versement Automatique",-1)),e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",h.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},c(h.auto_payout_enabled?"Activé":"Désactivé"),3)]),h.auto_payout_enabled?(l(),i("div",Li,[e("p",null,"Seuil: "+c(V(h.auto_payout_threshold))+" XAF",1),h.payout_phone_number?(l(),i("p",qi,"Téléphone: "+c(h.payout_phone_number),1)):q("",!0),r[17]||(r[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Configuration gérée par l'administrateur",-1))])):(l(),i("div",Oi,[...r[18]||(r[18]=[e("p",{class:"text-xs text-gray-500"},"Pour activer le versement automatique, contactez l'administrateur",-1)])]))]),e("div",Ni,[e("button",{onClick:g=>v(h),disabled:h.balance<1e3,class:"w-full bg-primea-blue text-white py-2 px-4 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50 disabled:cursor-not-allowed"},[r[19]||(r[19]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),N(" "+c(h.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Versement"),1)],8,Xi)]),e("div",Gi,[r[20]||(r[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),F(h.gateway).length===0?(l(),i("div",Wi," Aucune transaction récente ")):(l(),i("div",Hi,[(l(!0),i(W,null,H(F(h.gateway),g=>(l(),i("div",{key:g.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",Ji,c(V(g.amount))+" XAF",1),e("span",Qi,c(x(g.created_at)),1)]),e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(g.status)])},c(K(g.status)),3)]))),128))]))])]))),128))]),e("div",Ki,[e("div",Zi,[e("div",Yi,[r[21]||(r[21]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:r[1]||(r[1]=h=>w.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),p.value.length===0?(l(),i("div",el," Aucun payout récent ")):(l(),i("div",tl,[e("table",sl,[r[22]||(r[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",ol,[(l(!0),i(W,null,H(p.value,h=>(l(),i("tr",{key:h.id},[e("td",rl,"#"+c(h.reference),1),e("td",al,[e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Z(h.gateway)])},c(R(h.gateway)),3)]),e("td",nl,c(V(h.amount))+" XAF",1),e("td",il,[e("span",{class:G(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(h.status)])},c(K(h.status)),3)]),e("td",ll,[e("span",{class:G(["inline-flex px-2 py-1 text-xs rounded-full",h.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},c(h.is_automatic?"Auto":"Manuel"),3)]),e("td",dl,c(T(h.created_at)),1),e("td",ul,[e("button",{onClick:g=>M(h),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,cl)])]))),128))])])]))])])),a.value?(l(),i("div",ml,[e("div",pl,[r[29]||(r[29]=e("h3",{class:"text-lg font-bold text-primea-blue font-primea mb-4"},"Demande de Versement",-1)),e("form",{onSubmit:ne(O,["prevent"])},[e("div",gl,[e("div",null,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:R(U.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,fl)]),e("div",null,[r[24]||(r[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:V(U.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,vl)]),e("div",null,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),j(e("input",{"onUpdate:modelValue":r[2]||(r[2]=h=>U.amount=h),type:"number",min:1e3,max:U.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,bl),[[P,U.amount,void 0,{number:!0}]]),r[26]||(r[26]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[r[27]||(r[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),j(e("input",{"onUpdate:modelValue":r[3]||(r[3]=h=>U.phone_number=h),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[P,U.phone_number]]),r[28]||(r[28]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",xl,[e("button",{type:"button",onClick:r[4]||(r[4]=h=>a.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:C.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},c(C.value?"Demande en cours...":"Demander le Versement"),9,yl)])],32)])])):q("",!0)])]))}},hl=re(_l,[["__scopeId","data-v-1db6fa0a"]]),zd=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"})),wl={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},$l={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},kl={key:0,class:"flex justify-center items-center h-64"},Cl={key:1,class:"space-y-8"},El={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},jl={class:"bg-white rounded-primea shadow-primea p-6"},Sl={class:"flex flex-col items-center space-y-4"},Dl={class:"relative"},Il={class:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg"},Al=["src","alt"],Vl={key:1,class:"w-full h-full flex items-center justify-center bg-primea-blue text-white text-3xl font-bold font-primea"},Ul=["disabled"],Bl={class:"text-center"},zl={class:"text-sm text-gray-600 font-primea"},Pl={key:0,class:"text-center"},Tl={class:"bg-white rounded-primea shadow-primea p-6"},Fl={class:"flex flex-col items-center space-y-4"},Rl={class:"relative"},Ml={class:"w-32 h-32 rounded-primea overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center"},Ll=["src","alt"],ql={key:1,class:"text-center"},Ol=["disabled"],Nl={class:"text-center"},Xl={class:"text-sm text-gray-600 font-primea"},Gl={key:0,class:"text-center"},Wl={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Hl={class:"bg-white rounded-primea shadow-primea p-6"},Jl={class:"flex items-center justify-between mb-6"},Ql=["disabled"],Kl=["disabled"],Zl={key:0,class:"flex space-x-3 pt-4"},Yl=["disabled"],ed={class:"bg-white rounded-primea shadow-primea p-6"},td={class:"flex items-center justify-between mb-6"},sd=["disabled"],od=["disabled"],rd=["disabled"],ad=["disabled"],nd={key:0,class:"flex space-x-3 pt-4"},id=["disabled"],ld={class:"bg-white rounded-primea shadow-primea p-6"},dd=["disabled"],ud={class:"bg-white rounded-primea shadow-primea p-6"},cd={class:"space-y-4"},md={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},pd={class:"flex items-center space-x-3"},gd={class:"text-xs text-green-600 font-primea"},fd={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},vd={class:"flex items-center space-x-3"},bd={class:"text-xs text-blue-600 font-primea"},xd={class:"grid grid-cols-2 gap-4 pt-4"},yd={class:"text-center p-3 border rounded-primea"},_d={class:"text-2xl font-bold text-primea-blue font-primea"},hd={class:"text-center p-3 border rounded-primea"},wd={class:"text-2xl font-bold text-primea-yellow font-primea"},$d={__name:"OrganizerProfile",setup($){Ee();const u=I(!1),C=I(!1),a=I(!1),A=I(!1),p=I(!1),f=I(!1),U=I(!1),m=I(!1),b=I(null),z=I(null),v=I({events:0,tickets:0}),O=ee({name:"",email:"",phone:""}),F=ee({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),M=ee({current_password:"",password:"",password_confirmation:""}),V=ee({}),x=ee({}),T=()=>{C.value||Object.assign(V,O),C.value=!C.value},R=()=>{a.value||Object.assign(x,F),a.value=!a.value},Z=()=>{Object.assign(O,V),C.value=!1},K=()=>{Object.assign(F,x),a.value=!1},Y=async()=>{A.value=!0;try{const d=await L.updateProfile({type:"personal",...O});d.data.success&&(D.fire({title:"Succès !",text:"Informations personnelles mises à jour",icon:"success",confirmButtonColor:"#272d63"}),C.value=!1,d.data.data.user&&(b.value={...b.value,...d.data.data.user}))}catch(d){console.error("Erreur lors de la mise à jour:",d),D.fire({title:"Erreur",text:"Impossible de mettre à jour les informations",icon:"error",confirmButtonColor:"#272d63"})}finally{A.value=!1}},w=async()=>{p.value=!0;try{const d=await L.updateProfile({type:"organization",...F});d.data.success&&(D.fire({title:"Succès !",text:"Informations de l'organisation mises à jour",icon:"success",confirmButtonColor:"#272d63"}),a.value=!1,d.data.data.organization&&(z.value={...z.value,...d.data.data.organization}))}catch(d){console.error("Erreur lors de la mise à jour:",d),D.fire({title:"Erreur",text:"Impossible de mettre à jour les informations de l'organisation",icon:"error",confirmButtonColor:"#272d63"})}finally{p.value=!1}},r=async()=>{if(M.password!==M.password_confirmation){D.fire({title:"Erreur",text:"Les mots de passe ne correspondent pas",icon:"error",confirmButtonColor:"#272d63"});return}f.value=!0;try{(await L.updateProfile({type:"password",...M})).data.success&&(D.fire({title:"Succès !",text:"Mot de passe mis à jour avec succès",icon:"success",confirmButtonColor:"#272d63"}),Object.assign(M,{current_password:"",password:"",password_confirmation:""}))}catch(d){console.error("Erreur lors du changement de mot de passe:",d),D.fire({title:"Erreur",text:"Impossible de changer le mot de passe",icon:"error",confirmButtonColor:"#272d63"})}finally{f.value=!1}},h=async d=>{const s=d.target.files[0];if(s){if(!s.type.startsWith("image/")){D.fire({title:"Erreur",text:"Veuillez sélectionner un fichier image",icon:"error",confirmButtonColor:"#272d63"});return}if(s.size>5*1024*1024){D.fire({title:"Erreur",text:"L'image ne doit pas dépasser 5MB",icon:"error",confirmButtonColor:"#272d63"});return}U.value=!0;try{const k=new FormData;k.append("avatar",s),k.append("type","user");const se=await L.uploadAvatar(k);se.data.success&&(b.value.avatar_url=se.data.data.avatar_url,D.fire({title:"Succès !",text:"Photo de profil mise à jour",icon:"success",confirmButtonColor:"#272d63"}))}catch(k){console.error("Erreur upload avatar:",k),D.fire({title:"Erreur",text:"Impossible de télécharger la photo",icon:"error",confirmButtonColor:"#272d63"})}finally{U.value=!1,d.target.value=""}}},g=async d=>{const s=d.target.files[0];if(s){if(!s.type.startsWith("image/")){D.fire({title:"Erreur",text:"Veuillez sélectionner un fichier image",icon:"error",confirmButtonColor:"#272d63"});return}if(s.size>5*1024*1024){D.fire({title:"Erreur",text:"L'image ne doit pas dépasser 5MB",icon:"error",confirmButtonColor:"#272d63"});return}m.value=!0;try{const k=new FormData;k.append("logo",s),k.append("type","organization");const se=await L.uploadAvatar(k);se.data.success&&(z.value.logo_url=se.data.data.logo_url,D.fire({title:"Succès !",text:"Logo de l'organisation mis à jour",icon:"success",confirmButtonColor:"#272d63"}))}catch(k){console.error("Erreur upload logo:",k),D.fire({title:"Erreur",text:"Impossible de télécharger le logo",icon:"error",confirmButtonColor:"#272d63"})}finally{m.value=!1,d.target.value=""}}},t=d=>d?new Date(d).toLocaleDateString("fr-FR"):"Non disponible",o=async()=>{u.value=!0;try{const d=await L.getProfile();if(console.log("Profile API Response:",d.data),d.data.success){const s=d.data.data;s.user&&(b.value=s.user,Object.assign(O,{name:s.user.name||"",email:s.user.email||"",phone:s.user.phone||""})),s.organization&&(z.value=s.organization,Object.assign(F,{name:s.organization.name||"",description:s.organization.description||"",website_url:s.organization.website_url||"",contact_email:s.organization.contact_email||"",contact_phone:s.organization.contact_phone||""})),s.stats&&(v.value={events:s.stats.events||0,tickets:s.stats.tickets||0})}else console.error("Profile API Error:",d.data.message),D.fire({title:"Erreur",text:"Impossible de charger le profil",icon:"error",confirmButtonColor:"#272d63"})}catch(d){console.error("Erreur lors du chargement du profil:",d),D.fire({title:"Erreur",text:"Impossible de charger le profil",icon:"error",confirmButtonColor:"#272d63"})}finally{u.value=!1}};return oe(()=>{o()}),(d,s)=>(l(),i("div",wl,[e("div",$l,[s[40]||(s[40]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),u.value?(l(),i("div",kl,[...s[13]||(s[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(l(),i("div",Cl,[e("div",El,[e("div",jl,[s[16]||(s[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Photo de Profil",-1)),e("div",Sl,[e("div",Dl,[e("div",Il,[b.value?.avatar_url?(l(),i("img",{key:0,src:b.value.avatar_url,alt:b.value?.name,class:"w-full h-full object-cover"},null,8,Al)):(l(),i("div",Vl,c(b.value?.name?.charAt(0)?.toUpperCase()||"U"),1))]),e("button",{onClick:s[0]||(s[0]=k=>d.$refs.avatarInput.click()),disabled:U.value,class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 disabled:opacity-50"},[_(S(xe),{class:"w-4 h-4"})],8,Ul)]),e("div",Bl,[e("p",zl,c(b.value?.name||"Utilisateur"),1),s[14]||(s[14]=e("p",{class:"text-xs text-gray-500 font-primea"},"Cliquez sur l'icône pour changer",-1))]),e("input",{ref:"avatarInput",type:"file",accept:"image/*",onChange:h,class:"hidden"},null,544),U.value?(l(),i("div",Pl,[...s[15]||(s[15]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 font-primea mt-2"},"Upload en cours...",-1)])])):q("",!0)])]),e("div",Tl,[s[20]||(s[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Logo de l'Organisation",-1)),e("div",Fl,[e("div",Rl,[e("div",Ml,[z.value?.logo_url?(l(),i("img",{key:0,src:z.value.logo_url,alt:z.value?.name,class:"w-full h-full object-contain"},null,8,Ll)):(l(),i("div",ql,[_(S(Fe),{class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s[17]||(s[17]=e("p",{class:"text-xs text-gray-500 font-primea"},"Aucun logo",-1))]))]),e("button",{onClick:s[1]||(s[1]=k=>d.$refs.logoInput.click()),disabled:m.value,class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 disabled:opacity-50"},[_(S(xe),{class:"w-4 h-4"})],8,Ol)]),e("div",Nl,[e("p",Xl,c(z.value?.name||"Organisation"),1),s[18]||(s[18]=e("p",{class:"text-xs text-gray-500 font-primea"},"Logo de votre organisation",-1))]),e("input",{ref:"logoInput",type:"file",accept:"image/*",onChange:g,class:"hidden"},null,544),m.value?(l(),i("div",Gl,[...s[19]||(s[19]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 font-primea mt-2"},"Upload en cours...",-1)])])):q("",!0)])])]),e("div",Wl,[e("div",Hl,[e("div",Jl,[s[21]||(s[21]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:T,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(S(ve),{class:"w-5 h-5"})])]),e("form",{onSubmit:ne(Y,["prevent"]),class:"space-y-4"},[e("div",null,[s[22]||(s[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),j(e("input",{"onUpdate:modelValue":s[2]||(s[2]=k=>O.name=k),type:"text",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,Ql),[[P,O.name]])]),e("div",null,[s[23]||(s[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),j(e("input",{"onUpdate:modelValue":s[3]||(s[3]=k=>O.email=k),type:"email",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,Kl),[[P,O.email]])]),e("div",null,[s[24]||(s[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),_(ye,{modelValue:O.phone,"onUpdate:modelValue":s[4]||(s[4]=k=>O.phone=k),id:"personal-phone",disabled:!C.value,"input-class":C.value?"":"disabled:bg-gray-50",placeholder:"Numéro de téléphone","default-country":"CI"},null,8,["modelValue","disabled","input-class"])]),C.value?(l(),i("div",Zl,[e("button",{type:"submit",disabled:A.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},c(A.value?"Enregistrement...":"Enregistrer"),9,Yl),e("button",{type:"button",onClick:Z,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):q("",!0)],32)]),e("div",ed,[e("div",td,[s[25]||(s[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:R,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_(S(ve),{class:"w-5 h-5"})])]),e("form",{onSubmit:ne(w,["prevent"]),class:"space-y-4"},[e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),j(e("input",{"onUpdate:modelValue":s[5]||(s[5]=k=>F.name=k),type:"text",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,sd),[[P,F.name]])]),e("div",null,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),j(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=k=>F.description=k),disabled:!a.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,od),[[P,F.description]])]),e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),j(e("input",{"onUpdate:modelValue":s[7]||(s[7]=k=>F.website_url=k),type:"url",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,rd),[[P,F.website_url]])]),e("div",null,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),j(e("input",{"onUpdate:modelValue":s[8]||(s[8]=k=>F.contact_email=k),type:"email",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,ad),[[P,F.contact_email]])]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),_(ye,{modelValue:F.contact_phone,"onUpdate:modelValue":s[9]||(s[9]=k=>F.contact_phone=k),id:"organization-phone",disabled:!a.value,"input-class":a.value?"":"disabled:bg-gray-50",placeholder:"Numéro de téléphone de contact","default-country":"CI"},null,8,["modelValue","disabled","input-class"])]),a.value?(l(),i("div",nd,[e("button",{type:"submit",disabled:p.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},c(p.value?"Enregistrement...":"Enregistrer"),9,id),e("button",{type:"button",onClick:K,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):q("",!0)],32)]),e("div",ld,[s[34]||(s[34]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:ne(r,["prevent"]),class:"space-y-4"},[e("div",null,[s[31]||(s[31]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),j(e("input",{"onUpdate:modelValue":s[10]||(s[10]=k=>M.current_password=k),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[P,M.current_password]])]),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),j(e("input",{"onUpdate:modelValue":s[11]||(s[11]=k=>M.password=k),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[P,M.password]])]),e("div",null,[s[33]||(s[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),j(e("input",{"onUpdate:modelValue":s[12]||(s[12]=k=>M.password_confirmation=k),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[P,M.password_confirmation]])]),e("button",{type:"submit",disabled:f.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},c(f.value?"Mise à jour...":"Changer le mot de passe"),9,dd)],32)]),e("div",ud,[s[39]||(s[39]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",cd,[e("div",md,[e("div",pd,[_(S(Re),{class:"w-5 h-5 text-green-600"}),s[35]||(s[35]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",gd,c(t(b.value?.email_verified_at)),1)]),z.value?.verified_at?(l(),i("div",fd,[e("div",vd,[_(S(Me),{class:"w-5 h-5 text-blue-600"}),s[36]||(s[36]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",bd,c(t(z.value.verified_at)),1)])):q("",!0),e("div",xd,[e("div",yd,[e("p",_d,c(v.value.events||0),1),s[37]||(s[37]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",hd,[e("p",wd,c(v.value.tickets||0),1),s[38]||(s[38]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])])]))])]))}},kd=re($d,[["__scopeId","data-v-4b5a4458"]]),Pd=Object.freeze(Object.defineProperty({__proto__:null,default:kd},Symbol.toStringTag,{value:"Module"}));export{zd as B,Ad as E,Id as O,ye as P,X as a,Vd as b,Ud as c,Bd as d,Pd as e,Dd as g,Sd as t};
