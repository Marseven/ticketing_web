import{b as c,d as f,e,j as y,i as k,f as m,A as a,v as b,g,q as w,a1 as V,t as q,h as z,r as v,o as C,N as _}from"./vue-vendor-DL4qlPdi.js";import{_ as M,P as A,u as j,c as D}from"./account-D3HL21EZ.js";import"./vendor-14XLBY50.js";import"./pinia-vendor-DSZd9EMP.js";const N={name:"Register",components:{PhoneInput:A},setup(){const d=_(),s=j(),p=v(!1),o=v(""),r=v({name:"",email:"",phone:"",password:"",password_confirmation:"",terms:!1});return C(()=>{if(s.isAuthenticated&&s.user)switch(s.user.access_level||"client"){case"admin":d.push("/admin/dashboard");break;case"organizer":d.push("/organizer/dashboard");break;default:d.push("/")}}),{form:r,loading:p,error:o,register:async()=>{if(o.value="",!r.value.name||r.value.name.trim().length<2){o.value="Le nom complet doit contenir au moins 2 caractères";return}if(!r.value.phone){o.value="Le numéro de téléphone est obligatoire";return}if(!r.value.password||r.value.password.length<8){o.value="Le mot de passe doit contenir au moins 8 caractères";return}if(r.value.password!==r.value.password_confirmation){o.value="Les mots de passe ne correspondent pas";return}if(!r.value.terms){o.value="Vous devez accepter les conditions d'utilisation";return}p.value=!0;try{const l={name:r.value.name,email:r.value.email||void 0,phone:r.value.phone,password:r.value.password,password_confirmation:r.value.password_confirmation};(await D.register(l)).data.email_verification_required?d.push({name:"email-verification"}):d.push({name:"login",query:{message:"Inscription réussie ! Vous pouvez maintenant vous connecter."}})}catch(l){if(console.error("Erreur d'inscription:",l),l.response){const i=l.response.status,t=l.response.data;if(i===422)if(t.errors){const n=t.errors,u=[];if(n.name&&u.push(`Nom: ${n.name[0]}`),n.email&&u.push(`Email: ${n.email[0]}`),n.phone&&u.push(`Téléphone: ${n.phone[0]}`),n.password&&u.push(`Mot de passe: ${n.password[0]}`),u.length>0)o.value=u.join(" • ");else{const x=Object.values(n)[0];o.value=Array.isArray(x)?x[0]:x}}else t.message?o.value=t.message:o.value="Données invalides. Veuillez vérifier vos informations.";else i===409?o.value=t.message||"Cet email ou ce numéro de téléphone est déjà utilisé":i===429?o.value="Trop de tentatives. Veuillez réessayer dans quelques minutes.":i>=500?o.value="Erreur du serveur. Veuillez réessayer plus tard.":o.value=t.message||"Une erreur est survenue lors de l'inscription"}else l.request?o.value="Impossible de se connecter au serveur. Vérifiez votre connexion internet.":o.value=l.message||"Une erreur est survenue. Veuillez réessayer."}finally{p.value=!1}}}}},U={class:"register-page relative overflow-hidden min-h-screen bg-white md:bg-transparent"},X={class:"relative z-10 min-h-screen md:flex md:items-center md:justify-center px-4 py-8 md:py-12"},I={class:"max-w-md w-full mx-auto"},L={class:"bg-white md:bg-white/95 md:backdrop-blur-sm rounded-2xl md:rounded-3xl shadow-lg md:shadow-2xl p-6 md:p-8"},B={class:"flex items-start pt-2"},S={key:0,class:"bg-red-50 border-2 border-red-200 rounded-xl p-4"},E={class:"text-red-600 text-sm font-medium"},P=["disabled"],H={key:0,class:"flex items-center justify-center"},T={key:1},G={class:"text-center pt-4"},R={class:"text-sm text-gray-600"};function J(d,s,p,o,r,h){const l=w("PhoneInput"),i=w("router-link");return f(),c("div",U,[s[19]||(s[19]=e("div",{class:"hidden md:block absolute inset-0"},[e("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Événements",class:"w-full h-full object-cover opacity-40"}),e("div",{class:"absolute inset-0 bg-blue-900/60"})],-1)),e("div",X,[e("div",I,[s[18]||(s[18]=e("div",{class:"hidden md:block text-center mb-8 animate-fade-in"},[e("img",{src:"/images/logo_white.png",alt:"Logo",class:"h-16 mx-auto mb-6"})],-1)),e("div",L,[s[17]||(s[17]=e("div",{class:"text-center mb-6 md:mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-blue-900 mb-2"}," Créer un compte "),e("p",{class:"text-gray-600 text-sm md:text-base"}," Pour suivre vos achats de tickets ")],-1)),e("form",{class:"space-y-4 md:space-y-5",onSubmit:s[6]||(s[6]=y((...t)=>o.register&&o.register(...t),["prevent"]))},[e("div",null,[s[7]||(s[7]=e("label",{for:"name",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Nom complet "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>o.form.name=t),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Votre nom complet"},null,512),[[b,o.form.name]])]),e("div",null,[s[8]||(s[8]=e("label",{for:"email",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Adresse email "),e("span",{class:"text-gray-400 text-xs font-normal"},"(optionnel)")],-1)),m(e("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=t=>o.form.email=t),type:"email",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"votre@email.com"},null,512),[[b,o.form.email]])]),e("div",null,[s[9]||(s[9]=e("label",{for:"phone",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Numéro de téléphone "),e("span",{class:"text-red-500"},"*")],-1)),g(l,{id:"phone",modelValue:o.form.phone,"onUpdate:modelValue":s[2]||(s[2]=t=>o.form.phone=t),placeholder:"XX XX XX XX",required:!0,"default-country":"GA"},null,8,["modelValue"])]),e("div",null,[s[10]||(s[10]=e("label",{for:"password",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=t=>o.form.password=t),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Votre mot de passe"},null,512),[[b,o.form.password]])]),e("div",null,[s[11]||(s[11]=e("label",{for:"password_confirmation",class:"block text-sm font-semibold text-blue-900 mb-2"},[a(" Confirmer le mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{id:"password_confirmation","onUpdate:modelValue":s[4]||(s[4]=t=>o.form.password_confirmation=t),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Confirmer votre mot de passe"},null,512),[[b,o.form.password_confirmation]])]),s[16]||(s[16]=e("div",{class:"text-xs text-gray-500"},[e("span",{class:"text-red-500"},"*"),a(" Champs obligatoires ")],-1)),e("div",B,[m(e("input",{id:"terms","onUpdate:modelValue":s[5]||(s[5]=t=>o.form.terms=t),type:"checkbox",required:"",class:"h-4 w-4 mt-0.5 text-blue-900 focus:ring-yellow-500 border-gray-300 rounded flex-shrink-0"},null,512),[[V,o.form.terms]]),s[12]||(s[12]=e("label",{for:"terms",class:"ml-2 block text-sm text-gray-700"},[a(" J'accepte les "),e("a",{href:"#",class:"text-blue-900 hover:text-yellow-500 font-semibold transition-colors"},"conditions d'utilisation"),a(" et la "),e("a",{href:"#",class:"text-blue-900 hover:text-yellow-500 font-semibold transition-colors"},"politique de confidentialité"),e("span",{class:"text-red-500"},"*")],-1))]),o.error?(f(),c("div",S,[e("p",E,q(o.error),1)])):k("",!0),e("button",{type:"submit",disabled:o.loading,class:"w-full bg-blue-900 text-white py-4 px-6 rounded-xl text-base md:text-lg font-bold transition-all duration-200 shadow-lg hover:bg-yellow-500 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-900 disabled:hover:text-white transform hover:scale-105 disabled:transform-none"},[o.loading?(f(),c("span",H,[...s[13]||(s[13]=[e("svg",{class:"animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a(" Inscription en cours... ",-1)])])):(f(),c("span",T,"Créer mon compte"))],8,P),e("div",G,[e("p",R,[s[15]||(s[15]=a(" Vous avez déjà un compte ? ",-1)),g(i,{to:"/login",class:"text-blue-900 hover:text-yellow-500 font-bold transition-colors duration-200 ml-1"},{default:z(()=>[...s[14]||(s[14]=[a(" Se connecter ",-1)])]),_:1})])])],32)])])])])}const K=M(N,[["render",J],["__scopeId","data-v-48352605"]]);export{K as default};
