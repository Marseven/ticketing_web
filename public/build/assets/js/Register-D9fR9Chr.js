import{g as p,o as u,h as r,p as y,l as h,i as m,A as a,v as f,j as g,a as x,a1 as V,t as k,k as C,b as v,N as q}from"./vue-vendor-CGc-1SHl.js";import{_ as z,P as M,c as j}from"./account-CFgrfDiH.js";import"./pinia-vendor-C7xpF7iQ.js";import"./vendor-BvANJOFB.js";const A={name:"Register",components:{PhoneInput:M},setup(){const c=q(),e=v(!1),t=v(""),o=v({name:"",email:"",phone:"",password:"",password_confirmation:"",terms:!1});return{form:o,loading:e,error:t,register:async()=>{if(t.value="",!o.value.name||o.value.name.trim().length<2){t.value="Le nom complet doit contenir au moins 2 caractères";return}if(!o.value.phone){t.value="Le numéro de téléphone est obligatoire";return}if(!o.value.password||o.value.password.length<8){t.value="Le mot de passe doit contenir au moins 8 caractères";return}if(o.value.password!==o.value.password_confirmation){t.value="Les mots de passe ne correspondent pas";return}if(!o.value.terms){t.value="Vous devez accepter les conditions d'utilisation";return}e.value=!0;try{const l={name:o.value.name,email:o.value.email||void 0,phone:o.value.phone,password:o.value.password,password_confirmation:o.value.password_confirmation,role:"client"};(await j.register(l)).data.email_verification_required?c.push({name:"email-verification"}):c.push({name:"login",query:{message:"Inscription réussie ! Vous pouvez maintenant vous connecter."}})}catch(l){if(console.error("Erreur d'inscription:",l),l.response){const n=l.response.status,i=l.response.data;if(n===422)if(i.errors){const s=i.errors,d=[];if(s.name&&d.push(`Nom: ${s.name[0]}`),s.email&&d.push(`Email: ${s.email[0]}`),s.phone&&d.push(`Téléphone: ${s.phone[0]}`),s.password&&d.push(`Mot de passe: ${s.password[0]}`),d.length>0)t.value=d.join(" • ");else{const b=Object.values(s)[0];t.value=Array.isArray(b)?b[0]:b}}else i.message?t.value=i.message:t.value="Données invalides. Veuillez vérifier vos informations.";else n===409?t.value=i.message||"Cet email ou ce numéro de téléphone est déjà utilisé":n===429?t.value="Trop de tentatives. Veuillez réessayer dans quelques minutes.":n>=500?t.value="Erreur du serveur. Veuillez réessayer plus tard.":t.value=i.message||"Une erreur est survenue lors de l'inscription"}else l.request?t.value="Impossible de se connecter au serveur. Vérifiez votre connexion internet.":t.value=l.message||"Une erreur est survenue. Veuillez réessayer."}finally{e.value=!1}}}}},D={class:"register-page font-primea relative overflow-hidden min-h-screen"},I={class:"relative z-10 min-h-screen flex items-center justify-center px-4 py-12"},N={class:"max-w-md w-full"},T={class:"bg-white/95 backdrop-blur-sm rounded-primea-xl shadow-primea-lg p-8 animate-slide-up"},U={class:"flex items-center mt-4"},X={key:0,class:"bg-red-50 border border-red-200 rounded-primea-lg p-4 mt-4"},_={class:"text-red-800 text-sm font-primea"},B=["disabled"],E={key:0,class:"flex items-center justify-center pointer-events-none"},P={key:1,class:"pointer-events-none"},H={class:"text-center mt-6"},L={class:"text-sm text-gray-600 font-primea"};function S(c,e,t,o,w,l){const n=x("PhoneInput"),i=x("router-link");return u(),p("div",D,[e[21]||(e[21]=r("div",{class:"absolute inset-0"},[r("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Événements",class:"w-full h-full object-cover opacity-40"}),r("div",{class:"absolute inset-0 bg-primea-blue/60"})],-1)),r("div",I,[r("div",N,[e[20]||(e[20]=r("div",{class:"text-center mb-8 animate-fade-in"},[r("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-16 mx-auto mb-6"})],-1)),r("div",T,[e[19]||(e[19]=r("div",{class:"text-center mb-8"},[r("h1",{class:"text-3xl font-bold text-primea-blue mb-2"}," Inscription Client "),r("p",{class:"text-gray-600 font-primea"}," Créez votre compte pour suivre vos achats de tickets ")],-1)),r("form",{class:"space-y-4",onSubmit:e[8]||(e[8]=y((...s)=>o.register&&o.register(...s),["prevent"]))},[r("div",null,[e[9]||(e[9]=r("label",{for:"name",class:"block text-sm font-semibold text-primea-blue mb-2 font-primea"},[a(" Nom complet "),r("span",{class:"text-red-500"},"*")],-1)),m(r("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>o.form.name=s),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:ring-2 focus:ring-primea-yellow focus:border-primea-blue transition-all duration-200 font-primea bg-white/90",placeholder:"Votre nom complet"},null,512),[[f,o.form.name]])]),r("div",null,[e[10]||(e[10]=r("label",{for:"email",class:"block text-sm font-semibold text-primea-blue mb-2 font-primea"},[a(" Adresse email "),r("span",{class:"text-gray-400 text-xs font-normal"},"(optionnel)")],-1)),m(r("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>o.form.email=s),type:"email",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:ring-2 focus:ring-primea-yellow focus:border-primea-blue transition-all duration-200 font-primea bg-white/90",placeholder:"votre@email.com"},null,512),[[f,o.form.email]])]),r("div",null,[e[11]||(e[11]=r("label",{for:"phone",class:"block text-sm font-semibold text-primea-blue mb-2 font-primea"},[a(" Numéro de téléphone "),r("span",{class:"text-red-500"},"*")],-1)),g(n,{id:"phone",modelValue:o.form.phone,"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.phone=s),placeholder:"XX XX XX XX",required:!0,"default-country":"GA","input-class":"font-primea bg-white/90"},null,8,["modelValue"])]),r("div",null,[e[12]||(e[12]=r("label",{for:"password",class:"block text-sm font-semibold text-primea-blue mb-2 font-primea"},[a(" Mot de passe "),r("span",{class:"text-red-500"},"*")],-1)),m(r("input",{id:"password","onUpdate:modelValue":e[3]||(e[3]=s=>o.form.password=s),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:ring-2 focus:ring-primea-yellow focus:border-primea-blue transition-all duration-200 font-primea bg-white/90",placeholder:"Votre mot de passe"},null,512),[[f,o.form.password]])]),r("div",null,[e[13]||(e[13]=r("label",{for:"password_confirmation",class:"block text-sm font-semibold text-primea-blue mb-2 font-primea"},[a(" Confirmer le mot de passe "),r("span",{class:"text-red-500"},"*")],-1)),m(r("input",{id:"password_confirmation","onUpdate:modelValue":e[4]||(e[4]=s=>o.form.password_confirmation=s),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:ring-2 focus:ring-primea-yellow focus:border-primea-blue transition-all duration-200 font-primea bg-white/90",placeholder:"Confirmer votre mot de passe"},null,512),[[f,o.form.password_confirmation]])]),e[18]||(e[18]=r("div",{class:"text-xs text-gray-500 font-primea mt-4"},[r("span",{class:"text-red-500"},"*"),a(" Champs obligatoires ")],-1)),r("div",U,[m(r("input",{id:"terms","onUpdate:modelValue":e[5]||(e[5]=s=>o.form.terms=s),type:"checkbox",required:"",class:"h-4 w-4 text-primea-blue focus:ring-primea-yellow border-gray-300 rounded"},null,512),[[V,o.form.terms]]),e[14]||(e[14]=r("label",{for:"terms",class:"ml-2 block text-sm text-gray-700 font-primea"},[a(" J'accepte les "),r("a",{href:"#",class:"text-primea-blue hover:text-primea-yellow font-semibold transition-colors"},"conditions d'utilisation"),a(" et la "),r("a",{href:"#",class:"text-primea-blue hover:text-primea-yellow font-semibold transition-colors"},"politique de confidentialité"),r("span",{class:"text-red-500"},"*")],-1))]),o.error?(u(),p("div",X,[r("p",_,k(o.error),1)])):h("",!0),r("button",{type:"submit",disabled:o.loading,class:"w-full mt-6 text-white py-4 px-6 rounded-primea-lg text-lg font-bold transition-all duration-200 shadow-primea-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-primea",style:{backgroundColor:"#272d63",color:"#ffffff"},onMouseover:e[6]||(e[6]=s=>{s.currentTarget.style.backgroundColor="#fab511",s.currentTarget.style.color="#272d63"}),onMouseleave:e[7]||(e[7]=s=>{s.currentTarget.style.backgroundColor="#272d63",s.currentTarget.style.color="#ffffff"})},[o.loading?(u(),p("span",E,[...e[15]||(e[15]=[r("svg",{class:"animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),a(" Inscription en cours... ",-1)])])):(u(),p("span",P,"Créer mon compte"))],40,B),r("div",H,[r("p",L,[e[17]||(e[17]=a(" Vous avez déjà un compte ? ",-1)),g(i,{to:"/login",class:"font-bold text-primea-blue hover:text-primea-yellow transition-colors duration-200"},{default:C(()=>[...e[16]||(e[16]=[a(" Se connecter ",-1)])]),_:1})])])],32)])])])])}const W=z(A,[["render",S],["__scopeId","data-v-6e05f26a"]]);export{W as default};
