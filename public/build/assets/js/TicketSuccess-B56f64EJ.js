import{D as w,K as k,g as a,o as n,h as e,l as v,j as d,k as u,a as _,t as r,A as p,F as C,q as j,b as x,e as E,B as T,N as I}from"./vue-vendor-DkyC1Igy.js";import{_ as A}from"./account-CtxZ4SX-.js";import"./pinia-vendor-T35r7xXn.js";import"./vendor-BvANJOFB.js";const D={name:"TicketSuccess",components:{CheckCircleIcon:k,ExclamationCircleIcon:w},setup(){const h=T();I();const t=x(!0),m=x(""),o=x(null),c=x([]),y=async()=>{const s=h.query.reference;if(!s){m.value="RÃ©fÃ©rence de commande manquante",t.value=!1;return}try{t.value=!0,m.value="";const i=await fetch(`/api/guest/orders/${s}`,{headers:{Accept:"application/json"}});if(!i.ok)throw new Error("Commande introuvable");const b=await i.json();if(b.success)o.value=b.data.order,c.value=b.data.order.tickets||[];else throw new Error(b.message||"Erreur lors du chargement de la commande")}catch(i){console.error("Erreur lors du chargement de la commande:",i),m.value=i.message||"Impossible de charger votre commande"}finally{t.value=!1}},l=s=>new Intl.NumberFormat("fr-FR").format(s),f=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",g=()=>{!c.value||c.value.length===0||c.value.forEach((s,i)=>{setTimeout(()=>{window.open(`/ticket/${s.code}/download`,"_blank")},i*500)})};return E(()=>{y()}),{loading:t,error:m,order:o,tickets:c,formatPrice:l,formatDate:f,downloadAllTickets:g}}},N={class:"ticket-success-page min-h-screen bg-gray-50 font-primea"},R={class:"container mx-auto px-4 py-12"},F={class:"max-w-2xl mx-auto"},V={class:"text-center mb-8"},q={key:0,class:"bg-white rounded-primea-xl shadow-primea p-8 text-center"},B={key:1,class:"bg-white rounded-primea-xl shadow-primea p-8"},P={class:"text-center mb-6"},S={class:"text-red-600"},L={class:"text-center"},M={key:2,class:"bg-white rounded-primea-xl shadow-primea p-8"},K={class:"text-center mb-8"},O={class:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},Q={class:"bg-primea-blue/5 rounded-primea-lg p-6 mb-6"},U={class:"space-y-3"},z={class:"flex justify-between"},G={class:"font-semibold text-primea-blue"},H={class:"flex justify-between"},J={class:"font-semibold"},W={class:"flex justify-between"},X={class:"font-semibold"},Y={class:"flex justify-between"},Z={class:"font-semibold text-green-600"},$={class:"flex justify-between"},ee={class:"font-semibold"},te={key:0,class:"mb-6"},oe={class:"space-y-3"},se={class:"flex justify-between items-center"},re={class:"font-semibold text-primea-blue"},ae={class:"text-sm text-gray-600"},ne={class:"text-center mb-6"},le={class:"bg-blue-50 border border-blue-200 rounded-primea-lg p-4 mb-6 text-center"},ie={class:"text-blue-800 text-sm"},de={class:"flex flex-col sm:flex-row gap-4 justify-center"};function ce(h,t,m,o,c,y){const l=_("router-link"),f=_("ExclamationCircleIcon"),g=_("CheckCircleIcon");return n(),a("div",N,[e("div",R,[e("div",F,[e("div",V,[d(l,{to:"/"},{default:u(()=>[...t[1]||(t[1]=[e("img",{src:"/images/logo.png",alt:"Primea",class:"h-16 mx-auto mb-6"},null,-1)])]),_:1})]),o.loading?(n(),a("div",q,[...t[2]||(t[2]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-primea-blue mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement de votre commande...",-1)])])):o.error?(n(),a("div",B,[e("div",P,[d(f,{class:"w-16 h-16 text-red-500 mx-auto mb-4"}),t[3]||(t[3]=e("h2",{class:"text-2xl font-bold text-red-800 mb-2"},"Erreur",-1)),e("p",S,r(o.error),1)]),e("div",L,[d(l,{to:"/events",class:"inline-block bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200"},{default:u(()=>[...t[4]||(t[4]=[p(" Retour aux Ã©vÃ©nements ",-1)])]),_:1})])])):o.order?(n(),a("div",M,[e("div",K,[e("div",O,[d(g,{class:"w-12 h-12 text-green-600"})]),t[5]||(t[5]=e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Paiement rÃ©ussi !",-1)),t[6]||(t[6]=e("p",{class:"text-gray-600"},"Votre commande a Ã©tÃ© confirmÃ©e",-1))]),e("div",Q,[t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-primea-blue mb-4"},"DÃ©tails de votre commande",-1)),e("div",U,[e("div",z,[t[7]||(t[7]=e("span",{class:"text-gray-600"},"RÃ©fÃ©rence :",-1)),e("span",G,r(o.order.reference),1)]),e("div",H,[t[8]||(t[8]=e("span",{class:"text-gray-600"},"Ã‰vÃ©nement :",-1)),e("span",J,r(o.order.event?.title||"N/A"),1)]),e("div",W,[t[9]||(t[9]=e("span",{class:"text-gray-600"},"QuantitÃ© :",-1)),e("span",X,r(o.order.quantity)+" ticket(s)",1)]),e("div",Y,[t[10]||(t[10]=e("span",{class:"text-gray-600"},"Montant payÃ© :",-1)),e("span",Z,r(o.formatPrice(o.order.total_amount))+" FCFA",1)]),e("div",$,[t[11]||(t[11]=e("span",{class:"text-gray-600"},"Date :",-1)),e("span",ee,r(o.formatDate(o.order.created_at)),1)])])]),o.tickets&&o.tickets.length>0?(n(),a("div",te,[t[14]||(t[14]=e("h3",{class:"text-lg font-bold text-primea-blue mb-4"},"Vos tickets",-1)),e("div",oe,[(n(!0),a(C,null,j(o.tickets,s=>(n(),a("div",{key:s.id,class:"bg-gray-50 border-2 border-primea-blue rounded-primea-lg p-4 hover:shadow-md transition-shadow"},[e("div",se,[e("div",null,[e("p",re,r(s.ticket_type?.name||"Ticket"),1),e("p",ae,"Code: "+r(s.code),1)]),d(l,{to:`/ticket/${s.code}/download`,class:"bg-primea-blue text-white px-4 py-2 rounded-primea text-sm hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200"},{default:u(()=>[...t[13]||(t[13]=[p(" TÃ©lÃ©charger ",-1)])]),_:1},8,["to"])])]))),128))])])):v("",!0),e("div",ne,[o.tickets&&o.tickets.length>0?(n(),a("button",{key:0,onClick:t[0]||(t[0]=(...s)=>o.downloadAllTickets&&o.downloadAllTickets(...s)),class:"bg-primea-blue text-white px-8 py-3 rounded-primea-lg font-bold hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 shadow-primea-lg transform hover:scale-105"}," TÃ©lÃ©charger tous les tickets ")):v("",!0)]),e("div",le,[e("p",ie,[t[15]||(t[15]=p(" ðŸ“§ Un email de confirmation avec vos tickets a Ã©tÃ© envoyÃ© Ã  ",-1)),e("strong",null,r(o.order.guest_email||"votre adresse email"),1)])]),e("div",de,[d(l,{to:"/events",class:"text-center bg-gray-100 text-primea-blue px-6 py-3 rounded-primea hover:bg-gray-200 transition-all duration-200"},{default:u(()=>[...t[16]||(t[16]=[p(" Voir d'autres Ã©vÃ©nements ",-1)])]),_:1}),d(l,{to:"/",class:"text-center bg-primea-yellow text-primea-blue px-6 py-3 rounded-primea hover:bg-yellow-500 transition-all duration-200 font-semibold"},{default:u(()=>[...t[17]||(t[17]=[p(" Retour Ã  l'accueil ",-1)])]),_:1})])])):v("",!0)])])])}const xe=A(D,[["render",ce],["__scopeId","data-v-39c5867a"]]);export{xe as default};
