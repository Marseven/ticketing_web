import{b as V,d as te,_ as xe,J as se,a1 as Ce,j as n,o as l,k as e,D,l as h,q as N,t as d,E as z,w as Q,a2 as Ee,n as R,X as ae,G as X,H as G,Z as ee,a3 as j,a4 as ne,a5 as De,g as ue,P as ye,a6 as ie,a as le,y as _e,O as je,e as Se,a7 as Ve,p as q,F as de,Q as Ue,Y as Ie,K as pe,L as he,a8 as fe,S as ge,U as we,a9 as Be,M as Ae,aa as Pe,u as $e,ab as me,$ as ce,ac as ve,V as ze,C as Fe,T as Me}from"./vue-vendor-DPZK819g.js";import{_ as oe,u as ke,o as L}from"./account-B97zFvNA.js";import{S}from"./vendor-BvANJOFB.js";const Te={name:"PhoneInput",props:{modelValue:{type:String,default:""},id:{type:String,required:!0},placeholder:{type:String,default:"Numéro de téléphone"},required:{type:Boolean,default:!1},defaultCountry:{type:String,default:"GA"},inputClass:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(K,{emit:c}){const A=[{code:"GA",name:"Gabon",dial:"+241"},{code:"FR",name:"France",dial:"+33"},{code:"BE",name:"Belgique",dial:"+32"},{code:"CH",name:"Suisse",dial:"+41"},{code:"CA",name:"Canada",dial:"+1"},{code:"US",name:"États-Unis",dial:"+1"},{code:"CM",name:"Cameroun",dial:"+237"},{code:"CD",name:"RD Congo",dial:"+243"},{code:"CG",name:"Congo",dial:"+242"},{code:"CI",name:"Côte d'Ivoire",dial:"+225"},{code:"SN",name:"Sénégal",dial:"+221"},{code:"ML",name:"Mali",dial:"+223"},{code:"BF",name:"Burkina Faso",dial:"+226"},{code:"TG",name:"Togo",dial:"+228"},{code:"BJ",name:"Bénin",dial:"+229"},{code:"MA",name:"Maroc",dial:"+212"},{code:"TN",name:"Tunisie",dial:"+216"},{code:"DZ",name:"Algérie",dial:"+213"},{code:"NG",name:"Nigeria",dial:"+234"},{code:"GH",name:"Ghana",dial:"+233"}].sort((x,F)=>x.name.localeCompare(F.name)),i=V(!1),C=V(""),m=V(""),f=V(null),U=V(A.find(x=>x.code===K.defaultCountry)||A[0]),u=te(()=>{if(!C.value)return A;const x=C.value.toLowerCase();return A.filter(F=>F.name.toLowerCase().includes(x)||F.dial.includes(x)||F.code.toLowerCase().includes(x))}),_=te(()=>m.value?`${U.value.dial}${m.value.replace(/^0/,"")}`:""),I=()=>{i.value=!i.value,i.value&&(C.value="")},g=x=>{U.value=x,i.value=!1,M()},H=x=>{m.value=x.target.value.replace(/[^\d\s]/g,""),M()},O=()=>{setTimeout(()=>{i.value=!1},200)},M=()=>{c("update:modelValue",_.value)},k=x=>{f.value&&!f.value.contains(x.target)&&!x.target.closest(".country-selector")&&(i.value=!1)};return xe(()=>K.modelValue,x=>{if(x&&!m.value){for(const F of A)if(x.startsWith(F.dial)){U.value=F,m.value=x.substring(F.dial.length);break}}},{immediate:!0}),se(()=>{document.addEventListener("click",k)}),Ce(()=>{document.removeEventListener("click",k)}),{countries:A,showDropdown:i,searchQuery:C,phoneNumber:m,selectedCountry:U,filteredCountries:u,fullPhoneNumber:_,dropdown:f,toggleDropdown:I,selectCountry:g,handleInput:H,handleBlur:O}}},Le={class:"phone-input-wrapper"},Oe={class:"phone-input-container"},Re={class:"selected-country"},qe=["src","alt"],Ne={class:"country-code"},Xe=["id","placeholder","required","disabled"],Ge={key:0,class:"country-dropdown",ref:"dropdown"},He={class:"country-search"},We={class:"country-list"},Qe=["onClick"],Je=["src","alt"],Ke={class:"country-name"},Ze={class:"country-dial"};function Ye(K,c,A,i,C,m){return l(),n("div",Le,[e("div",Oe,[e("div",{class:N(["country-selector",{disabled:A.disabled}]),onClick:c[0]||(c[0]=f=>!A.disabled&&i.toggleDropdown)},[e("div",Re,[e("img",{src:`https://flagcdn.com/w40/${i.selectedCountry.code.toLowerCase()}.png`,alt:i.selectedCountry.name,class:"country-flag"},null,8,qe),e("span",Ne,d(i.selectedCountry.dial),1),(l(),n("svg",{class:N(["dropdown-arrow",{rotate:i.showDropdown}]),width:"12",height:"8",viewBox:"0 0 12 8",fill:"none"},[...c[6]||(c[6]=[e("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))])],2),D(e("input",{type:"tel",id:A.id,"onUpdate:modelValue":c[1]||(c[1]=f=>i.phoneNumber=f),onInput:c[2]||(c[2]=(...f)=>i.handleInput&&i.handleInput(...f)),onBlur:c[3]||(c[3]=(...f)=>i.handleBlur&&i.handleBlur(...f)),placeholder:A.placeholder,required:A.required,disabled:A.disabled,class:N(["phone-input",A.inputClass])},null,42,Xe),[[z,i.phoneNumber]]),h(Ee,{name:"dropdown-fade"},{default:Q(()=>[i.showDropdown?(l(),n("div",Ge,[e("div",He,[D(e("input",{type:"text","onUpdate:modelValue":c[4]||(c[4]=f=>i.searchQuery=f),placeholder:"Rechercher un pays...",class:"search-input",onClick:c[5]||(c[5]=ae(()=>{},["stop"]))},null,512),[[z,i.searchQuery]])]),e("div",We,[(l(!0),n(X,null,G(i.filteredCountries,f=>(l(),n("div",{key:f.code,onClick:U=>i.selectCountry(f),class:N(["country-item",{selected:f.code===i.selectedCountry.code}])},[e("img",{src:`https://flagcdn.com/w40/${f.code.toLowerCase()}.png`,alt:f.name,class:"country-flag"},null,8,Je),e("span",Ke,d(f.name),1),e("span",Ze,d(f.dial),1)],10,Qe))),128))])],512)):R("",!0)]),_:1})])])}const be=oe(Te,[["render",Ye],["__scopeId","data-v-2b7dd952"]]),et={class:"organizer-dashboard min-h-screen"},tt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},st={class:"mb-8"},ot={class:"flex items-center justify-between"},rt={class:"flex items-center space-x-4"},at={class:"text-right"},nt={class:"text-sm font-semibold text-primea-blue font-primea"},lt={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},it=["src","alt"],dt={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},ut={class:"text-lg font-bold font-primea"},mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ct={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},pt={class:"flex items-center"},gt={class:"p-2 bg-primea-blue/10 rounded-lg"},ft={class:"ml-4"},vt={class:"text-2xl font-bold text-primea-blue font-primea"},bt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},xt={class:"flex items-center"},yt={class:"p-2 bg-green-100 rounded-lg"},_t={class:"ml-4"},ht={class:"text-2xl font-bold text-green-600 font-primea"},wt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},$t={class:"flex items-center"},kt={class:"p-2 bg-primea-yellow/10 rounded-lg"},Ct={class:"ml-4"},Et={class:"text-2xl font-bold text-primea-yellow font-primea"},Dt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},jt={class:"flex items-center"},St={class:"p-2 bg-purple-100 rounded-lg"},Vt={class:"ml-4"},Ut={class:"text-2xl font-bold text-purple-600 font-primea"},It={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},Bt={class:"lg:col-span-2"},At={class:"bg-white rounded-primea shadow-primea p-6"},Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zt={class:"bg-white rounded-primea shadow-primea p-6"},Ft={class:"space-y-4"},Mt={key:0,class:"text-center text-gray-500 py-8"},Tt={class:"text-sm font-medium font-primea"},Lt={class:"text-xs text-gray-600 mt-1"},Ot={class:"text-xs text-gray-400 mt-2"},Rt={class:"bg-white rounded-primea shadow-primea overflow-hidden"},qt={class:"p-6 border-b border-gray-200"},Nt={class:"flex items-center justify-between"},Xt={key:0,class:"p-8 text-center text-gray-500"},Gt={key:1,class:"overflow-x-auto"},Ht={class:"w-full"},Wt={class:"divide-y divide-gray-200"},Qt={class:"px-6 py-4"},Jt={class:"text-sm font-medium text-gray-900 font-primea"},Kt={class:"text-sm text-gray-500"},Zt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Yt={class:"px-6 py-4"},es={class:"px-6 py-4 text-sm text-gray-900 font-primea"},ts={class:"px-6 py-4 text-sm"},ss={__name:"OrganizerDashboard",setup(K){const c=ke(),A=V(!1),i=ee({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),C=V([]),m=V([]),f=te(()=>{const k=c.user;return k?.name?k.name.split(" ").map(x=>x[0]).join("").toUpperCase().slice(0,2):"U"}),U=te(()=>c.user?.avatar_url||null),u=async()=>{A.value=!0;try{const[k,x,F]=await Promise.all([L.getDashboardStats(),L.getRecentEvents(),L.getNotifications()]);Object.assign(i,k.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),C.value=x.data.data||[],m.value=F.data.data||[]}catch(k){console.error("Erreur lors du chargement du dashboard:",k),Object.assign(i,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),C.value=[],m.value=[]}finally{A.value=!1}},_=k=>new Intl.NumberFormat("fr-FR").format(k),I=k=>new Date(k).toLocaleDateString("fr-FR"),g=k=>new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),H=k=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[k]||k,O=k=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[k]||"bg-gray-100 text-gray-800",M=k=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[k]||"border-gray-300";return se(()=>{u()}),(k,x)=>{const F=le("router-link");return l(),n("div",et,[e("div",tt,[e("div",st,[e("div",ot,[x[1]||(x[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",rt,[e("div",at,[x[0]||(x[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",nt,d(I(new Date)),1)]),U.value?(l(),n("div",lt,[e("img",{src:U.value,alt:j(c).user?.name,class:"w-full h-full object-cover"},null,8,it)])):(l(),n("div",dt,[e("span",ut,d(f.value),1)]))])])]),e("div",mt,[e("div",ct,[e("div",pt,[e("div",gt,[h(j(ne),{class:"w-6 h-6 text-primea-blue"})]),e("div",ft,[x[2]||(x[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",vt,d(i.total_events),1)])])]),e("div",bt,[e("div",xt,[e("div",yt,[h(j(De),{class:"w-6 h-6 text-green-600"})]),e("div",_t,[x[3]||(x[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",ht,d(i.active_events),1)])])]),e("div",wt,[e("div",$t,[e("div",kt,[h(j(ue),{class:"w-6 h-6 text-primea-yellow"})]),e("div",Ct,[x[4]||(x[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",Et,d(i.tickets_sold),1)])])]),e("div",Dt,[e("div",jt,[e("div",St,[h(j(ye),{class:"w-6 h-6 text-purple-600"})]),e("div",Vt,[x[5]||(x[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",Ut,d(_(i.total_revenue))+" XAF",1)])])])]),e("div",It,[e("div",Bt,[e("div",At,[x[10]||(x[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",Pt,[h(F,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:Q(()=>[h(j(ie),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[6]||(x[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),h(F,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:Q(()=>[h(j(_e),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[7]||(x[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),h(F,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:Q(()=>[h(j(je),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[8]||(x[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),h(F,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:Q(()=>[h(j(Se),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),x[9]||(x[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",zt,[x[12]||(x[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",Ft,[m.value.length===0?(l(),n("div",Mt,[h(j(Ve),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),x[11]||(x[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(l(!0),n(X,{key:1},G(m.value,T=>(l(),n("div",{key:T.id,class:N(["p-3 bg-gray-50 rounded-primea border-l-4",M(T.type)])},[e("p",Tt,d(T.title),1),e("p",Lt,d(T.message),1),e("p",Ot,d(g(T.created_at)),1)],2))),128))])])]),e("div",Rt,[e("div",qt,[e("div",Nt,[x[14]||(x[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),h(F,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:Q(()=>[...x[13]||(x[13]=[q(" Voir tous ",-1)])]),_:1})])]),C.value.length===0?(l(),n("div",Xt,[h(j(ne),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),x[16]||(x[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),x[17]||(x[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),h(F,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:Q(()=>[h(j(ie),{class:"w-4 h-4 mr-2"}),x[15]||(x[15]=q(" Créer un événement ",-1))]),_:1})])):(l(),n("div",Gt,[e("table",Ht,[x[19]||(x[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",Wt,[(l(!0),n(X,null,G(C.value,T=>(l(),n("tr",{key:T.id,class:"hover:bg-gray-50"},[e("td",Qt,[e("div",null,[e("p",Jt,d(T.title),1),e("p",Kt,d(T.venue_name),1)])]),e("td",Zt,d(I(T.event_date)),1),e("td",Yt,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",O(T.status)])},d(H(T.status)),3)]),e("td",es,d(T.tickets_sold||0),1),e("td",ts,[h(F,{to:{name:"organizer-event-detail",params:{slug:T.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:Q(()=>[...x[18]||(x[18]=[q(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},os=oe(ss,[["__scopeId","data-v-1685f411"]]),Ed=Object.freeze(Object.defineProperty({__proto__:null,default:os},Symbol.toStringTag,{value:"Module"})),rs={name:"OrganizerEvents",components:{PlusIcon:ie,CalendarIcon:ne},setup(){const K=pe(),c=V(""),A=V(""),i=V("grid"),C=V(!1),m=V([]),f=ee({current:1,total:1,perPage:15}),U=async()=>{C.value=!0;try{const w=(await L.getEvents({page:f.current,status:A.value,search:c.value})).data.data.events;m.value=w.data.map(p=>({...p,tickets_sold:p.tickets?.filter(t=>["issued","used"].includes(t.status)).length||0,total_tickets:p.ticket_types?.reduce((t,s)=>t+s.capacity,0)||0,revenue:p.tickets?.filter(t=>["issued","used"].includes(t.status)).reduce((t,s)=>t+(s.ticket_type?.price||0),0)||0,venue:p.venue?.name||"",date:p.event_date||p.schedules?.[0]?.starts_at,isFavorite:!1})),f.current=w.current_page,f.total=w.last_page,f.perPage=w.per_page}catch(r){console.error("Erreur chargement événements:",r),S.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{C.value=!1}},u=te(()=>{let r=[...m.value];if(c.value){const w=c.value.toLowerCase();r=r.filter(p=>p.title.toLowerCase().includes(w)||p.venue.toLowerCase().includes(w))}return A.value&&(r=r.filter(w=>w.status===A.value)),r}),_=te(()=>{const r=m.value.filter(s=>s.is_active&&s.status!=="cancelled").length,w=m.value.filter(s=>!s.is_active).length,p=m.value.reduce((s,v)=>s+(v.tickets_sold||0),0),t=m.value.reduce((s,v)=>s+(v.revenue||0),0);return{published:r,draft:w,totalTicketsSold:p,totalRevenue:t}}),I=r=>new Intl.NumberFormat("fr-FR").format(r),g=(r,w="full")=>{const p=new Date(r);return w==="short"?p.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):p.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},H=r=>r.is_active?r.status==="cancelled"?"bg-red-100 text-red-800":new Date(r.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",O=r=>r.is_active?r.status==="cancelled"?"Annulé":new Date(r.date)<new Date?"Terminé":"Actif":"Brouillon",M=r=>{r.isFavorite=!r.isFavorite},k=async r=>{try{const w={title:`${r.title} (Copie)`,description:r.description,event_date:r.date,venue_id:r.venue_id,category_id:r.category_id,is_active:!1};await L.createEvent(w),await U(),S.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{S.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},x=r=>{K.push({name:"organizer-event-edit",params:{slug:r.slug}})},F=async r=>{if((await S.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${r.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await U(),S.fire("Supprimé !","L'événement a été supprimé.","success")}catch{S.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};xe([c,A],()=>{f.current=1,U()},{debounce:300});const T=r=>{f.current=r,U()},Z=r=>{if(!r)return!1;const w=r.image_url||r.image||r.image_file;return w&&w.trim()!==""},J=(r,w="400")=>{let p=r.image_url||r.image||r.image_file;return console.log("Image URL pour événement:",r.title,"URL brute:",p),p&&p.trim()!==""?p.startsWith("http://")||p.startsWith("https://")?(console.log("URL complète détectée:",p),p):p.startsWith("/")?(p=window.location.origin+p,console.log("URL construite depuis chemin relatif:",p),p):(p.includes("/")||(p=`${window.location.origin}/storage/images/events/${p}`,console.log("URL construite depuis nom de fichier:",p)),p):(console.log("Aucune image trouvée pour:",r.title),"")},Y=r=>{console.log("Erreur de chargement d'image:",r.target.src),r.target.style.display="none"},$=r=>{console.log("Image chargée avec succès:",r.target.src)};return se(()=>{U()}),{searchQuery:c,statusFilter:A,viewMode:i,loading:C,events:m,filteredEvents:u,stats:_,pagination:f,formatPrice:I,formatEventDate:g,getStatusClass:H,getStatusText:O,toggleFavorite:M,duplicateEvent:k,editEvent:x,deleteEvent:F,loadEvents:U,changePage:T,hasEventImage:Z,getEventImageUrl:J,handleImageError:Y,handleImageLoad:$}}},as={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},ns={class:"bg-white shadow-sm border-b border-gray-200"},ls={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},is={class:"flex items-center justify-between"},ds={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},us={class:"bg-white rounded-lg shadow-md p-6 mb-8"},ms={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},cs={class:"flex items-center space-x-4"},ps={class:"relative"},gs={class:"flex items-center space-x-4"},fs={class:"text-sm text-gray-600"},vs={class:"flex bg-gray-100 rounded-lg p-1"},bs={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},xs={class:"text-center"},ys={class:"text-2xl font-bold text-blue-600"},_s={class:"text-center"},hs={class:"text-2xl font-bold text-yellow-600"},ws={class:"text-center"},$s={class:"text-2xl font-bold text-green-600"},ks={class:"text-center"},Cs={class:"text-2xl font-bold text-purple-600"},Es={key:0},Ds={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},js={class:"relative"},Ss=["src","alt"],Vs={key:1,class:"w-full h-48 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Us={class:"absolute top-4 left-4"},Is={class:"absolute top-4 right-4"},Bs=["onClick"],As={class:"p-6"},Ps={class:"text-lg font-bold text-gray-800 mb-2"},zs={class:"text-gray-600 text-sm mb-4"},Fs={class:"flex items-center justify-between mb-4"},Ms={class:"text-sm text-gray-600 font-primea"},Ts={class:"font-medium font-primea"},Ls={class:"text-sm font-bold text-green-600 font-primea"},Os={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},Rs={class:"flex space-x-2"},qs=["onClick"],Ns={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},Xs={class:"w-full"},Gs={class:"bg-white divide-y divide-gray-200"},Hs={class:"px-6 py-4 whitespace-nowrap"},Ws={class:"flex items-center"},Qs=["src","alt"],Js={key:1,class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center rounded-lg mr-4"},Ks={class:"text-sm font-medium text-gray-900"},Zs={class:"text-sm text-gray-500"},Ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},eo={class:"px-6 py-4 whitespace-nowrap"},to={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},so={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},oo={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},ro=["onClick"],ao=["onClick"],no={key:1,class:"text-center py-16"},lo={class:"text-gray-600 mb-6"},io={key:0},uo={key:1},mo={key:2,class:"mt-8 flex justify-center"},co={class:"flex items-center space-x-2"},po=["disabled"],go=["onClick"],fo={key:1,class:"px-2 text-gray-500"},vo=["disabled"];function bo(K,c,A,i,C,m){const f=le("PlusIcon"),U=le("router-link"),u=le("CalendarIcon");return l(),n("div",as,[e("div",ns,[e("div",ls,[e("div",is,[c[11]||(c[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),h(U,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:Q(()=>[h(f,{class:"w-4 h-4 inline mr-2"}),c[10]||(c[10]=q(" Nouvel événement ",-1))]),_:1})])])]),e("div",ds,[e("div",us,[e("div",ms,[e("div",cs,[e("div",ps,[c[12]||(c[12]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=_=>i.searchQuery=_),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[z,i.searchQuery]])]),D(e("select",{"onUpdate:modelValue":c[1]||(c[1]=_=>i.statusFilter=_),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...c[13]||(c[13]=[Ue('<option value="" data-v-d66d4597>Tous les statuts</option><option value="draft" data-v-d66d4597>Brouillons</option><option value="published" data-v-d66d4597>Publiés</option><option value="completed" data-v-d66d4597>Terminés</option><option value="cancelled" data-v-d66d4597>Annulés</option>',5)])],512),[[de,i.statusFilter]])]),e("div",gs,[e("div",fs,d(i.filteredEvents.length)+" événement"+d(i.filteredEvents.length>1?"s":""),1),e("div",vs,[e("button",{onClick:c[2]||(c[2]=_=>i.viewMode="grid"),class:N(["px-3 py-2 rounded-lg transition-colors",i.viewMode==="grid"?"bg-white shadow-sm":""])},[...c[14]||(c[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:c[3]||(c[3]=_=>i.viewMode="list"),class:N(["px-3 py-2 rounded-lg transition-colors",i.viewMode==="list"?"bg-white shadow-sm":""])},[...c[15]||(c[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",bs,[e("div",xs,[e("p",ys,d(i.stats.published),1),c[16]||(c[16]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",_s,[e("p",hs,d(i.stats.draft),1),c[17]||(c[17]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",ws,[e("p",$s,d(i.stats.totalTicketsSold),1),c[18]||(c[18]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",ks,[e("p",Cs,d(i.formatPrice(i.stats.totalRevenue))+" XAF",1),c[19]||(c[19]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),i.filteredEvents.length>0?(l(),n("div",Es,[i.viewMode==="grid"?(l(),n("div",Ds,[(l(!0),n(X,null,G(i.filteredEvents,_=>(l(),n("div",{key:_.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",js,[i.hasEventImage(_)?(l(),n("img",{key:0,src:i.getEventImageUrl(_),alt:_.title,class:"w-full h-48 object-cover",onError:c[4]||(c[4]=(...I)=>i.handleImageError&&i.handleImageError(...I)),onLoad:c[5]||(c[5]=(...I)=>i.handleImageLoad&&i.handleImageLoad(...I))},null,40,Ss)):(l(),n("div",Vs,[h(u,{class:"w-16 h-16 text-gray-400"})])),e("div",Us,[e("span",{class:N(["px-3 py-1 rounded-full text-xs font-semibold",i.getStatusClass(_.status)])},d(i.getStatusText(_.status)),3)]),e("div",Is,[e("button",{onClick:I=>i.toggleFavorite(_),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(l(),n("svg",{class:N(["w-4 h-4",_.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...c[20]||(c[20]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,Bs)])]),e("div",As,[e("h3",Ps,d(_.title),1),e("p",zs,d(i.formatEventDate(_.date)),1),e("div",Fs,[e("div",Ms,[e("span",Ts,d(_.tickets_sold||0),1),q(" / "+d(_.total_tickets||0)+" tickets vendus ",1)]),e("div",Ls,d(i.formatPrice(_.revenue||0))+" XAF ",1)]),e("div",Os,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Ie({width:`${Math.min((_.ticketsSold||0)/(_.totalTickets||100)*100,100)}%`})},null,4)]),e("div",Rs,[h(U,{to:{name:"organizer-event-detail",params:{slug:_.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:Q(()=>[...c[21]||(c[21]=[q(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:I=>i.duplicateEvent(_),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,qs)])])]))),128))])):(l(),n("div",Ns,[e("table",Xs,[c[23]||(c[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Gs,[(l(!0),n(X,null,G(i.filteredEvents,_=>(l(),n("tr",{key:_.id,class:"hover:bg-gray-50"},[e("td",Hs,[e("div",Ws,[i.hasEventImage(_)?(l(),n("img",{key:0,src:i.getEventImageUrl(_,"60"),alt:_.title,class:"w-12 h-12 object-cover rounded-lg mr-4",onError:c[6]||(c[6]=(...I)=>i.handleImageError&&i.handleImageError(...I)),onLoad:c[7]||(c[7]=(...I)=>i.handleImageLoad&&i.handleImageLoad(...I))},null,40,Qs)):(l(),n("div",Js,[h(u,{class:"w-6 h-6 text-gray-400"})])),e("div",null,[e("div",Ks,d(_.title),1),e("div",Zs,d(_.venue),1)])])]),e("td",Ys,d(i.formatEventDate(_.date,"short")),1),e("td",eo,[e("span",{class:N(["px-2 py-1 rounded-full text-xs font-medium font-primea",i.getStatusClass(_)])},d(i.getStatusText(_)),3)]),e("td",to,d(_.tickets_sold||0)+" / "+d(_.total_tickets||0),1),e("td",so,d(i.formatPrice(_.revenue||0))+" XAF ",1),e("td",oo,[h(U,{to:{name:"organizer-event-detail",params:{slug:_.slug}},class:"text-blue-600 hover:text-blue-900"},{default:Q(()=>[...c[22]||(c[22]=[q(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:I=>i.editEvent(_),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,ro),e("button",{onClick:I=>i.deleteEvent(_),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,ao)])]))),128))])])]))])):(l(),n("div",no,[c[25]||(c[25]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),c[26]||(c[26]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",lo,[i.searchQuery||i.statusFilter?(l(),n("span",io," Aucun événement ne correspond à vos critères de recherche. ")):(l(),n("span",uo," Commencez par créer votre premier événement ! "))]),h(U,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:Q(()=>[...c[24]||(c[24]=[q(" + Créer mon premier événement ",-1)])]),_:1})])),i.events.length>0&&i.pagination.total>1?(l(),n("div",mo,[e("nav",co,[e("button",{onClick:c[8]||(c[8]=_=>i.changePage(i.pagination.current-1)),disabled:i.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,po),(l(!0),n(X,null,G(i.pagination.total,_=>(l(),n(X,{key:_},[_===1||_===i.pagination.total||_>=i.pagination.current-1&&_<=i.pagination.current+1?(l(),n("button",{key:0,onClick:I=>i.changePage(_),class:N(["px-3 py-2 text-sm font-medium rounded-lg font-primea",_===i.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},d(_),11,go)):_===i.pagination.current-2||_===i.pagination.current+2?(l(),n("span",fo," ... ")):R("",!0)],64))),128)),e("button",{onClick:c[9]||(c[9]=_=>i.changePage(i.pagination.current+1)),disabled:i.pagination.current===i.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,vo)])])):R("",!0)])])}const xo=oe(rs,[["render",bo],["__scopeId","data-v-d66d4597"]]),Dd=Object.freeze(Object.defineProperty({__proto__:null,default:xo},Symbol.toStringTag,{value:"Module"})),yo={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},_o={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ho={key:0,class:"flex justify-center items-center h-64"},wo={key:1,class:"text-center py-16"},$o={class:"mb-4"},ko={class:"text-gray-600 mb-6"},Co={key:2},Eo={class:"mb-8"},Do={class:"flex items-center justify-between"},jo={class:"flex items-center space-x-4"},So={class:"text-3xl font-bold text-primea-blue font-primea"},Vo={class:"flex items-center space-x-3"},Uo={class:"flex space-x-2"},Io={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Bo={class:"bg-white rounded-primea shadow-primea p-6"},Ao={class:"flex items-center"},Po={class:"p-2 bg-blue-100 rounded-lg"},zo={class:"ml-4"},Fo={class:"text-2xl font-bold text-blue-600 font-primea"},Mo={class:"bg-white rounded-primea shadow-primea p-6"},To={class:"flex items-center"},Lo={class:"p-2 bg-green-100 rounded-lg"},Oo={class:"ml-4"},Ro={class:"text-2xl font-bold text-green-600 font-primea"},qo={class:"bg-white rounded-primea shadow-primea p-6"},No={class:"flex items-center"},Xo={class:"p-2 bg-yellow-100 rounded-lg"},Go={class:"ml-4"},Ho={class:"text-2xl font-bold text-yellow-600 font-primea"},Wo={class:"bg-white rounded-primea shadow-primea p-6"},Qo={class:"flex items-center"},Jo={class:"p-2 bg-purple-100 rounded-lg"},Ko={class:"ml-4"},Zo={class:"text-lg font-bold text-purple-600 font-primea"},Yo={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},er={class:"lg:col-span-2 space-y-6"},tr={class:"bg-white rounded-primea shadow-primea p-6"},sr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},or={class:"mt-1 text-gray-900 font-primea"},rr={class:"mt-1 text-gray-900 font-primea"},ar={class:"mt-1 text-gray-900 font-primea"},nr={class:"md:col-span-2"},lr={class:"mt-1 text-gray-900 font-primea leading-relaxed"},ir={class:"bg-white rounded-primea shadow-primea p-6"},dr={key:0,class:"space-y-4"},ur={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},mr={class:"mt-1 text-gray-900 font-primea"},cr={class:"mt-1 text-gray-900 font-primea"},pr={class:"mt-1 text-gray-900 font-primea"},gr={key:1,class:"text-center py-8 text-gray-500"},fr={class:"bg-white rounded-primea shadow-primea p-6"},vr={key:0,class:"space-y-4"},br={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},xr={class:"md:col-span-2"},yr={class:"flex items-center justify-between mb-2"},_r={class:"font-semibold text-gray-900 font-primea"},hr={class:"text-gray-600 text-sm font-primea"},wr={class:"text-center"},$r={class:"text-lg font-bold text-primea-blue font-primea"},kr={class:"text-center"},Cr={class:"text-sm font-primea"},Er={class:"font-medium text-gray-900"},Dr={class:"font-medium text-gray-900"},jr={class:"text-xs text-gray-500 mt-1"},Sr={key:1,class:"text-center py-8 text-gray-500"},Vr={class:"bg-white rounded-primea shadow-primea p-6"},Ur={key:0,class:"overflow-x-auto"},Ir={class:"w-full"},Br={class:"divide-y divide-gray-200"},Ar={class:"px-4 py-3 text-sm text-gray-900 font-primea"},Pr={class:"px-4 py-3 text-sm text-gray-900 font-primea"},zr={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},Fr={class:"px-4 py-3 text-sm text-gray-500 font-primea"},Mr={key:1,class:"text-center py-8 text-gray-500"},Tr={class:"space-y-6"},Lr={class:"bg-white rounded-primea shadow-primea p-6"},Or={class:"space-y-3"},Rr={key:0,class:"bg-white rounded-primea shadow-primea p-6"},qr={class:"w-full h-48 rounded-primea overflow-hidden"},Nr=["src","alt"],Xr={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Gr={class:"bg-white rounded-primea shadow-primea p-6"},Hr={class:"space-y-3"},Wr={class:"flex items-center justify-between"},Qr={class:"flex items-center justify-between"},Jr={class:"flex items-center justify-between"},Kr={class:"text-sm text-gray-600 font-primea"},Zr={__name:"EventDetail",setup(K){const c=$e(),A=pe(),i=V(!0),C=V(null),m=V(null),f=V([]),U=async()=>{i.value=!0,C.value=null;try{let t=c.params.slug,s;if(/^\d+$/.test(t))s=(await L.getEvent(t)).data.data;else try{const b=await L.getEvents();if(s=(b.data.data.events.data||b.data.data.events).find(P=>P.slug===t),!s)throw new Error(`Événement avec le slug "${t}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${t}" non trouvé`)}if(!s)throw new Error("Événement introuvable");m.value={...s,venue_name:s.venue?.name||"Lieu non spécifié",venue_address:s.venue?.address||"",category_name:s.category?.name||"Non spécifiée",tickets_sold:s.tickets?.filter(b=>["issued","used"].includes(b.status)).length||0,total_revenue:s.tickets?.filter(b=>["issued","used"].includes(b.status)).reduce((b,o)=>b+(o.ticket_type?.price||0),0)||0,is_public:s.is_active||!1,sales_active:s.is_active||!1,ticket_types:s.ticket_types||s.ticketTypes||[]};const v=s.ticket_types||s.ticketTypes||[];v.length>0&&(m.value.ticket_types=v.map(b=>({...b,sold:s.tickets?.filter(o=>o.ticket_type_id===b.id&&["issued","used"].includes(o.status)).length||0}))),m.value.tickets_sold>0?f.value=[{id:1,customer_name:"Kofi Asante",ticket_quantity:2,total_amount:m.value.ticket_types?.[0]?.price*2||5e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:2,customer_name:"Aminata Traore",ticket_quantity:1,total_amount:m.value.ticket_types?.[0]?.price||25e3,created_at:new Date(Date.now()-1728e5).toISOString()}]:f.value=[]}catch(t){console.error("Erreur lors du chargement de l'événement:",t),t.response?.status===404?C.value=`Événement avec l'identifiant "${c.params.slug}" non trouvé`:t.message?C.value=t.message:C.value="Erreur lors du chargement de l'événement"}finally{i.value=!1}},u=()=>{A.push({name:"organizer-event-edit",params:{slug:m.value.slug}})},_=async()=>{if((await S.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await L.updateEvent(m.value.id,{status:"published",is_active:!0}),m.value.status="published",m.value.is_active=!0,S.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(s){console.error("Erreur publication:",s),S.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},I=async()=>{const t=`${window.location.origin}/events/${m.value.slug}`;try{await navigator.clipboard.writeText(t),S.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{S.fire({title:"Lien de l'événement",html:`<input type="text" value="${t}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},g=()=>{const t=`/events/${m.value.slug}`;window.open(t,"_blank")},H=()=>{S.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},O=t=>new Intl.NumberFormat("fr-FR").format(t),M=t=>new Date(t).toLocaleDateString("fr-FR"),k=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=t=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[t]||t,F=t=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",T=t=>{const s=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return s==null?"Illimité":typeof s=="number"?new Intl.NumberFormat("fr-FR").format(s):s},Z=t=>{const s=t.sold||0,v=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return v==null||v<=0?0:Math.round(s/v*100)},J=t=>{console.log("Erreur de chargement d'image:",t.target.src),t.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},Y=t=>{console.log("Image chargée avec succès:",t.target.src)},$=()=>{if(!m.value||!m.value.ticket_types)return"Non définie";const t=m.value.ticket_types.reduce((s,v)=>{const b=v.capacity||v.available_quantity||v.max_quantity||v.quantity||0;return s+(typeof b=="number"?b:0)},0);return t>0?new Intl.NumberFormat("fr-FR").format(t):"Non définie"},r=()=>{if(!m.value)return"Non définie";if(m.value.event_date&&m.value.event_date!=="Invalid Date")return M(m.value.event_date);if(m.value.schedules&&m.value.schedules.length>0){const t=m.value.schedules[0];if(t.starts_at)return M(t.starts_at)}return"Non définie"},w=()=>{if(!m.value)return!1;const t=m.value.image_url||m.value.image||m.value.image_file;return t&&t.trim()!==""},p=()=>{if(!m.value)return"";let t=m.value.image_url||m.value.image||m.value.image_file;return console.log("EventDetail - Image URL pour événement:",m.value.title,"URL brute:",t),t&&t.trim()!==""?t.startsWith("http://")||t.startsWith("https://")?(console.log("EventDetail - URL complète détectée:",t),t):t.startsWith("/")?(t=window.location.origin+t,console.log("EventDetail - URL construite depuis chemin relatif:",t),t):(t.includes("/")||(t=`${window.location.origin}/storage/images/events/${t}`,console.log("EventDetail - URL construite depuis nom de fichier:",t)),t):(console.log("EventDetail - Aucune image trouvée pour:",m.value.title),"")};return se(()=>{U()}),(t,s)=>{const v=le("router-link");return l(),n("div",yo,[e("div",_o,[i.value?(l(),n("div",ho,[...s[1]||(s[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):C.value?(l(),n("div",wo,[e("div",$o,[h(j(he),{class:"w-16 h-16 mx-auto text-red-500"})]),s[3]||(s[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",ko,d(C.value),1),h(v,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:Q(()=>[...s[2]||(s[2]=[q(" Retour aux événements ",-1)])]),_:1})])):m.value?(l(),n("div",Co,[e("div",Eo,[e("div",Do,[e("div",jo,[e("button",{onClick:s[0]||(s[0]=b=>t.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(j(fe),{class:"w-6 h-6"})]),e("div",null,[e("h1",So,d(m.value.title),1),s[4]||(s[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",Vo,[e("span",{class:N(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",F(m.value.status)])},d(x(m.value.status)),3),e("div",Uo,[e("button",{onClick:u,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(j(ge),{class:"w-4 h-4 inline mr-2"}),s[5]||(s[5]=q(" Modifier ",-1))]),m.value.status==="draft"?(l(),n("button",{key:0,onClick:_,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[h(j(we),{class:"w-4 h-4 inline mr-2"}),s[6]||(s[6]=q(" Publier ",-1))])):R("",!0)])])])]),e("div",Io,[e("div",Bo,[e("div",Ao,[e("div",Po,[h(j(ue),{class:"w-6 h-6 text-blue-600"})]),e("div",zo,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",Fo,d(m.value.tickets_sold||0),1)])])]),e("div",Mo,[e("div",To,[e("div",Lo,[h(j(ye),{class:"w-6 h-6 text-green-600"})]),e("div",Oo,[s[8]||(s[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",Ro,d(O(m.value.total_revenue||0))+" XAF",1)])])]),e("div",qo,[e("div",No,[e("div",Xo,[h(j(Be),{class:"w-6 h-6 text-yellow-600"})]),e("div",Go,[s[9]||(s[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",Ho,d($()),1)])])]),e("div",Wo,[e("div",Qo,[e("div",Jo,[h(j(ne),{class:"w-6 h-6 text-purple-600"})]),e("div",Ko,[s[10]||(s[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",Zo,d(r()),1)])])])]),e("div",Yo,[e("div",er,[e("div",tr,[s[15]||(s[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",sr,[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",or,d(m.value.title),1)]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",rr,d(m.value.venue_name),1)]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",ar,d(m.value.category_name||"Non spécifiée"),1)]),e("div",nr,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",lr,d(m.value.description||"Aucune description"),1)])])]),e("div",ir,[s[20]||(s[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),m.value.schedules&&m.value.schedules.length>0?(l(),n("div",dr,[(l(!0),n(X,null,G(m.value.schedules,b=>(l(),n("div",{key:b.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",ur,[e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",mr,d(k(b.starts_at)),1)]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",cr,d(k(b.ends_at)),1)]),e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",pr,d(b.door_time?k(b.door_time):"Non spécifiée"),1)])])]))),128))])):(l(),n("div",gr,[h(j(ne),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s[19]||(s[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",fr,[s[25]||(s[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),m.value.ticket_types&&m.value.ticket_types.length>0?(l(),n("div",vr,[(l(!0),n(X,null,G(m.value.ticket_types,b=>(l(),n("div",{key:b.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",br,[e("div",xr,[e("div",yr,[e("h3",_r,d(b.name),1),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",b.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},d(b.is_active?"Actif":"Inactif"),3)]),e("p",hr,d(b.description||"Aucune description"),1)]),e("div",wr,[s[21]||(s[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",$r,d(O(b.price))+" XAF ",1)]),e("div",kr,[s[23]||(s[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",Cr,[e("span",Er,d(b.sold||0),1),s[22]||(s[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",Dr,d(T(b)),1)]),e("div",jr,d(Z(b))+"% vendus ",1)])])]))),128))])):(l(),n("div",Sr,[h(j(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s[24]||(s[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",Vr,[s[28]||(s[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Commandes récentes",-1)),f.value.length>0?(l(),n("div",Ur,[e("table",Ir,[s[26]||(s[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",Br,[(l(!0),n(X,null,G(f.value,b=>(l(),n("tr",{key:b.id},[e("td",Ar,d(b.customer_name),1),e("td",Pr,d(b.ticket_quantity),1),e("td",zr,d(O(b.total_amount))+" XAF",1),e("td",Fr,d(M(b.created_at)),1)]))),128))])])])):(l(),n("div",Mr,[h(j(Ae),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s[27]||(s[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",Tr,[e("div",Lr,[s[32]||(s[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",Or,[e("button",{onClick:I,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[h(j(Pe),{class:"w-4 h-4 mr-2"}),s[29]||(s[29]=q(" Partager l'événement ",-1))]),e("button",{onClick:g,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[h(j(_e),{class:"w-4 h-4 mr-2"}),s[30]||(s[30]=q(" Voir la page publique ",-1))]),e("button",{onClick:H,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...s[31]||(s[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),q(" Exporter les données ",-1)])])])]),m.value?(l(),n("div",Rr,[s[33]||(s[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("div",qr,[w()?(l(),n("img",{key:0,src:p(),alt:m.value.title,class:"w-full h-full object-cover",onError:J,onLoad:Y},null,40,Nr)):(l(),n("div",Xr,[h(j(ne),{class:"w-16 h-16 text-gray-400"})]))])])):R("",!0),e("div",Gr,[s[37]||(s[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Hr,[e("div",Wr,[s[34]||(s[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:N(["text-sm font-medium",m.value.is_public?"text-green-600":"text-red-600"])},d(m.value.is_public?"Oui":"Non"),3)]),e("div",Qr,[s[35]||(s[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:N(["text-sm font-medium",m.value.sales_active?"text-green-600":"text-red-600"])},d(m.value.sales_active?"Oui":"Non"),3)]),e("div",Jr,[s[36]||(s[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",Kr,d(M(m.value.created_at)),1)])])])])])])):R("",!0)])])}}},Yr=oe(Zr,[["__scopeId","data-v-006581df"]]),jd=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),ea={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},ta={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},sa={key:0,class:"flex justify-center items-center h-64"},oa={key:1,class:"text-center py-16"},ra={class:"mb-4"},aa={class:"text-gray-600 mb-6"},na={key:2},la={class:"mb-8"},ia={class:"flex items-center justify-between"},da={class:"flex items-center space-x-4"},ua={class:"text-gray-600 font-primea mt-1"},ma={class:"flex items-center space-x-3"},ca={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},pa={class:"lg:col-span-2 space-y-6"},ga={class:"bg-white rounded-primea shadow-primea p-6"},fa={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},va={class:"md:col-span-2"},ba={class:"md:col-span-2"},xa=["value"],ya={key:0},_a=["value"],ha={key:1,class:"space-y-2"},wa={class:"md:col-span-2"},$a={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},ka={key:0,class:"mb-4"},Ca=["src"],Ea={key:1},Da={class:"bg-white rounded-primea shadow-primea p-6"},ja={class:"flex items-center justify-between mb-6"},Sa={class:"space-y-4"},Va=["onUpdate:modelValue"],Ua=["onUpdate:modelValue"],Ia=["onUpdate:modelValue"],Ba={class:"flex items-end"},Aa=["onClick"],Pa={class:"bg-white rounded-primea shadow-primea p-6"},za={class:"flex items-center justify-between mb-6"},Fa={key:0,class:"text-center py-8 text-gray-500"},Ma={key:1,class:"space-y-4"},Ta=["onUpdate:modelValue"],La=["onUpdate:modelValue"],Oa=["onUpdate:modelValue"],Ra=["onUpdate:modelValue"],qa={class:"flex items-center space-x-2"},Na={class:"flex items-center space-x-2"},Xa=["onUpdate:modelValue"],Ga=["onClick"],Ha={class:"space-y-6"},Wa={class:"bg-white rounded-primea shadow-primea p-6"},Qa={class:"space-y-4"},Ja={class:"flex items-center space-x-2"},Ka={class:"bg-white rounded-primea shadow-primea p-6"},Za={class:"space-y-3"},Ya=["disabled"],en={key:0,class:"bg-white rounded-primea shadow-primea p-6"},tn={class:"w-full h-48 rounded-primea overflow-hidden"},sn=["src","alt"],on={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},rn={__name:"EventEdit",setup(K){const c=$e(),A=pe(),i=V(!0),C=V(!1),m=V(null),f=V(null),U=V([]),u=V([]),_=V(!1),I=V(null),g=ee({title:"",description:"",category_id:"",venue_id:"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:"",image_preview:"",image_file:null,is_active:!1,schedules:[{starts_at:"",ends_at:"",door_time:""}],ticket_types:[]}),H=async()=>{try{const y=await L.getCategories();U.value=y.data.categories||[]}catch(y){console.error("Erreur chargement catégories:",y)}},O=async()=>{try{const y=await L.getVenues();u.value=y.data.venues||y.data.data||[]}catch(y){console.error("Erreur chargement lieux:",y)}},M=async()=>{i.value=!0,m.value=null;try{let y=c.params.slug,a;if(/^\d+$/.test(y))a=(await L.getEvent(y)).data.data;else try{const B=await L.getEvents();if(a=(B.data.data.events.data||B.data.data.events).find(re=>re.slug===y),!a)throw new Error(`Événement avec le slug "${y}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${y}" non trouvé`)}if(!a)throw new Error("Événement introuvable");f.value={...a,venue_name:a.venue?.name||a.venue_name||"",venue_address:a.venue?.address||a.venue_address||"",category_name:a.category?.name||a.category_name||""},Object.assign(g,{title:f.value.title||"",description:f.value.description||"",category_id:f.value.category_id||"",venue_id:f.value.venue_id||"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:f.value.image_url||"",image_preview:f.value.image_url||"",is_active:f.value.is_active??!1,schedules:f.value.schedules&&f.value.schedules.length>0?f.value.schedules.map(B=>({starts_at:B.starts_at?new Date(B.starts_at).toISOString().slice(0,16):"",ends_at:B.ends_at?new Date(B.ends_at).toISOString().slice(0,16):"",door_time:B.door_time?new Date(B.door_time).toISOString().slice(0,16):""})):[{starts_at:"",ends_at:"",door_time:""}],ticket_types:(f.value.ticket_types||f.value.ticketTypes||[]).map(B=>({id:B.id,name:B.name||"",description:B.description||"",price:B.price||0,capacity:B.capacity||B.available_quantity||B.max_quantity||B.quantity||0,is_active:B.is_active??B.status==="active"}))})}catch(y){console.error("Erreur lors du chargement de l'événement:",y),y.response?.status===404?m.value=`Événement avec l'identifiant "${c.params.slug}" non trouvé`:y.message?m.value=y.message:m.value="Erreur lors du chargement de l'événement"}finally{i.value=!1}},k=async()=>{C.value=!0;try{if(!f.value)throw new Error("Aucun événement à mettre à jour");const y={title:g.title,description:g.description,category_id:g.category_id,venue_id:g.venue_id||null,new_venue_name:g.venue_id==="new"?g.new_venue_name:null,new_venue_city:g.venue_id==="new"?g.new_venue_city:null,new_venue_address:g.venue_id==="new"?g.new_venue_address:null,is_active:g.is_active,schedules:g.schedules,ticket_types:g.ticket_types.map(a=>({id:a.id||null,name:a.name,description:a.description,price:a.price,capacity:a.capacity,is_active:a.is_active}))};if(g.image_file){const a=new FormData;console.log("EventEdit - Upload de fichier détecté:",g.image_file),console.log("EventEdit - Données à envoyer:",y),Object.keys(y).forEach(B=>{y[B]!==null&&y[B]!==void 0&&(B==="schedules"||B==="ticket_types"?(a.append(B,JSON.stringify(y[B])),console.log(`EventEdit - Ajout ${B} (JSON):`,JSON.stringify(y[B]))):(a.append(B,y[B]),console.log(`EventEdit - Ajout ${B}:`,y[B])))}),a.append("image_file",g.image_file),console.log("EventEdit - Fichier ajouté à FormData:",g.image_file.name);for(let[B,E]of a.entries())console.log(`EventEdit - FormData ${B}:`,E);await L.updateEventWithFile(f.value.id,a)}else y.image_url=g.image_url||null,y.image_file=null,console.log("EventEdit - Envoi sans fichier, avec URL:",y.image_url),await L.updateEvent(f.value.id,y);await S.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),A.push({name:"organizer-event-detail",params:{slug:f.value.slug}})}catch(y){console.error("Erreur lors de la mise à jour:",y),await S.fire({title:"Erreur",text:y.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{C.value=!1}},x=async()=>{if((await S.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await L.updateEvent(f.value.id,{status:"published",is_active:!0}),f.value.status="published",f.value.is_active=!0,await S.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(a){console.error("Erreur publication:",a),await S.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},F=()=>{g.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},T=async y=>{(await S.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&g.ticket_types.splice(y,1)},Z=()=>{g.schedules.push({starts_at:"",ends_at:"",door_time:""})},J=y=>{g.schedules.length>1&&g.schedules.splice(y,1)},Y=()=>{g.venue_id==="new"&&(_.value=!0)},$=()=>{_.value=!1,g.venue_id="",g.new_venue_name="",g.new_venue_city="",g.new_venue_address=""},r=y=>{const a=y.target.files[0];if(a){g.image_file=a,g.image_url="";const B=new FileReader;B.onload=E=>{g.image_preview=E.target.result},B.readAsDataURL(a)}},w=()=>{g.image_url&&(g.image_preview=g.image_url,g.image_file=null)},p=()=>{g.image_url="",g.image_preview="",g.image_file=null,I.value&&(I.value.value="")},t=()=>{if(g.image_preview&&g.image_preview.trim()!=="")return!0;if(!f.value)return!1;const y=f.value.image_url||f.value.image||f.value.image_file;return y&&y.trim()!==""},s=()=>{if(g.image_preview)return g.image_preview;if(!f.value)return"";let y=f.value.image_url||f.value.image||f.value.image_file;return y&&y.trim()!==""?y.startsWith("http://")||y.startsWith("https://")?y:y.startsWith("/")?window.location.origin+y:y.includes("/")?y:`${window.location.origin}/storage/images/events/${y}`:""},v=y=>{console.log("Erreur de chargement d'image:",y.target.src),y.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},b=y=>{console.log("Image chargée avec succès:",y.target.src)},o=y=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[y]||y,P=y=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[y]||"bg-gray-100 text-gray-800";return se(async()=>{await Promise.all([H(),O(),M()])}),(y,a)=>{const B=le("router-link");return l(),n("div",ea,[e("div",ta,[i.value?(l(),n("div",sa,[...a[11]||(a[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):m.value?(l(),n("div",oa,[e("div",ra,[h(j(he),{class:"w-16 h-16 mx-auto text-red-500"})]),a[13]||(a[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",aa,d(m.value),1),h(B,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:Q(()=>[...a[12]||(a[12]=[q(" Retour aux événements ",-1)])]),_:1})])):f.value?(l(),n("div",na,[e("div",la,[e("div",ia,[e("div",da,[e("button",{onClick:a[0]||(a[0]=E=>y.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(j(fe),{class:"w-6 h-6"})]),e("div",null,[a[14]||(a[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",ua,d(f.value.title),1)])]),e("div",ma,[e("span",{class:N(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",P(f.value.status)])},d(o(f.value.status)),3)])])]),e("form",{onSubmit:ae(k,["prevent"]),class:"space-y-8"},[e("div",ca,[e("div",pa,[e("div",ga,[a[24]||(a[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",fa,[e("div",va,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement *",-1)),D(e("input",{"onUpdate:modelValue":a[1]||(a[1]=E=>g.title=E),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[z,g.title]])]),e("div",ba,[a[16]||(a[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=E=>g.description=E),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[z,g.description]])]),e("div",null,[a[18]||(a[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),D(e("select",{"onUpdate:modelValue":a[3]||(a[3]=E=>g.category_id=E),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[17]||(a[17]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),n(X,null,G(U.value,E=>(l(),n("option",{key:E.id,value:E.id},d(E.name),9,xa))),128))],512),[[de,g.category_id]])]),e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),_.value?R("",!0):(l(),n("div",ya,[D(e("select",{"onUpdate:modelValue":a[4]||(a[4]=E=>g.venue_id=E),onChange:Y,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[19]||(a[19]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),n(X,null,G(u.value,E=>(l(),n("option",{key:E.id,value:E.id},d(E.name)+" - "+d(E.city),9,_a))),128)),a[20]||(a[20]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[de,g.venue_id]])])),_.value||g.venue_id==="new"?(l(),n("div",ha,[D(e("input",{"onUpdate:modelValue":a[5]||(a[5]=E=>g.new_venue_name=E),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,g.new_venue_name]]),D(e("input",{"onUpdate:modelValue":a[6]||(a[6]=E=>g.new_venue_city=E),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,g.new_venue_city]]),D(e("input",{"onUpdate:modelValue":a[7]||(a[7]=E=>g.new_venue_address=E),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[z,g.new_venue_address]]),e("button",{type:"button",onClick:$,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):R("",!0)]),e("div",wa,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",$a,[g.image_preview?(l(),n("div",ka,[e("img",{src:g.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea",onError:v,onLoad:b},null,40,Ca),e("button",{type:"button",onClick:p,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(l(),n("div",Ea,[e("input",{ref_key:"imageInput",ref:I,type:"file",accept:"image/*",onChange:r,class:"hidden"},null,544),e("button",{type:"button",onClick:a[8]||(a[8]=E=>y.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),a[22]||(a[22]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),D(e("input",{"onUpdate:modelValue":a[9]||(a[9]=E=>g.image_url=E),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:w},null,544),[[z,g.image_url]])]))])])])]),e("div",Da,[e("div",ja,[a[26]||(a[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:Z,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(j(ie),{class:"w-4 h-4 inline mr-2"}),a[25]||(a[25]=q(" Ajouter une séance ",-1))])]),e("div",Sa,[(l(!0),n(X,null,G(g.schedules,(E,re)=>(l(),n("div",{key:re,class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),D(e("input",{"onUpdate:modelValue":W=>E.starts_at=W,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Va),[[z,E.starts_at]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),D(e("input",{"onUpdate:modelValue":W=>E.ends_at=W,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Ua),[[z,E.ends_at]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Ouverture des portes",-1)),D(e("input",{"onUpdate:modelValue":W=>E.door_time=W,type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Ia),[[z,E.door_time]])]),e("div",Ba,[g.schedules.length>1?(l(),n("button",{key:0,type:"button",onClick:W=>J(re),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[h(j(me),{class:"w-4 h-4"})],8,Aa)):R("",!0)])]))),128))])]),e("div",Pa,[e("div",za,[a[31]||(a[31]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:F,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(j(ie),{class:"w-4 h-4 inline mr-2"}),a[30]||(a[30]=q(" Ajouter un type ",-1))])]),g.ticket_types.length===0?(l(),n("div",Fa,[h(j(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),a[32]||(a[32]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),a[33]||(a[33]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(l(),n("div",Ma,[(l(!0),n(X,null,G(g.ticket_types,(E,re)=>(l(),n("div",{key:re,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[34]||(a[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),D(e("input",{"onUpdate:modelValue":W=>E.name=W,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,Ta),[[z,E.name]])]),e("div",null,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),D(e("input",{"onUpdate:modelValue":W=>E.price=W,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,La),[[z,E.price,void 0,{number:!0}]])]),e("div",null,[a[36]||(a[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),D(e("input",{"onUpdate:modelValue":W=>E.capacity=W,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,Oa),[[z,E.capacity,void 0,{number:!0}]])]),e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":W=>E.description=W,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,Ra),[[z,E.description]])]),e("div",qa,[e("label",Na,[D(e("input",{"onUpdate:modelValue":W=>E.is_active=W,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,Xa),[[ce,E.is_active]]),a[38]||(a[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))]),e("button",{type:"button",onClick:W=>T(re),class:"text-red-600 hover:text-red-800 p-1"},[h(j(me),{class:"w-4 h-4"})],8,Ga)])]))),128))]))])]),e("div",Ha,[e("div",Wa,[a[41]||(a[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Qa,[e("div",null,[e("label",Ja,[D(e("input",{"onUpdate:modelValue":a[10]||(a[10]=E=>g.is_active=E),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ce,g.is_active]]),a[39]||(a[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement actif",-1))]),a[40]||(a[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Publier l'événement et activer les ventes",-1))])])]),e("div",Ka,[a[44]||(a[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Za,[e("button",{type:"submit",disabled:C.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},d(C.value?"Enregistrement...":"Enregistrer les modifications"),9,Ya),h(B,{to:{name:"organizer-event-detail",params:{slug:f.value?.slug||j(c).params.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:Q(()=>[...a[42]||(a[42]=[q(" Annuler les modifications ",-1)])]),_:1},8,["to"]),f.value&&!f.value.is_active?(l(),n("button",{key:0,type:"button",onClick:x,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[h(j(we),{class:"w-4 h-4 inline mr-2"}),a[43]||(a[43]=q(" Publier l'événement ",-1))])):R("",!0)])]),f.value?(l(),n("div",en,[a[45]||(a[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image actuelle",-1)),e("div",tn,[t()?(l(),n("img",{key:0,src:s(),alt:f.value.title,class:"w-full h-full object-cover",onError:v,onLoad:b},null,40,sn)):(l(),n("div",on,[h(j(ne),{class:"w-16 h-16 text-gray-400"})]))])])):R("",!0)])])],32)])):R("",!0)])])}}},an=oe(rn,[["__scopeId","data-v-a5121c89"]]),Sd=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"})),nn={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},ln={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},dn={class:"mb-8"},un={class:"flex items-center justify-between"},mn={class:"flex items-center space-x-4"},cn={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},pn={class:"lg:col-span-2 space-y-6"},gn={class:"bg-white rounded-primea shadow-primea p-6"},fn={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},vn={class:"md:col-span-2"},bn={class:"md:col-span-2"},xn=["value"],yn={key:0},_n=["value"],hn={key:1,class:"space-y-2"},wn={class:"md:col-span-2"},$n={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},kn={key:0,class:"mb-4"},Cn=["src"],En={key:1},Dn={class:"bg-white rounded-primea shadow-primea p-6"},jn={class:"flex items-center justify-between mb-6"},Sn={class:"space-y-4"},Vn=["onUpdate:modelValue","onChange"],Un=["onUpdate:modelValue","min"],In={class:"flex items-end"},Bn=["onClick"],An={class:"bg-white rounded-primea shadow-primea p-6"},Pn={class:"flex items-center justify-between mb-6"},zn={key:0,class:"text-center py-8 text-gray-500"},Fn={key:1,class:"space-y-4"},Mn=["onUpdate:modelValue"],Tn=["onUpdate:modelValue"],Ln=["onUpdate:modelValue"],On=["onUpdate:modelValue"],Rn={class:"flex items-end"},qn=["onClick"],Nn={class:"space-y-6"},Xn={class:"bg-white rounded-primea shadow-primea p-6"},Gn={class:"space-y-4"},Hn={class:"flex items-center space-x-2"},Wn={class:"flex items-center space-x-2"},Qn={class:"bg-white rounded-primea shadow-primea p-6"},Jn={class:"space-y-3"},Kn=["disabled"],Zn={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Yn=["src","alt"],el={class:"bg-white rounded-primea shadow-primea p-6"},tl={class:"space-y-2 text-sm"},sl={class:"flex justify-between"},ol={class:"font-medium font-primea"},rl={class:"flex justify-between"},al={class:"font-medium font-primea"},nl={key:0,class:"flex justify-between"},ll={class:"font-medium font-primea"},il={key:1,class:"flex justify-between"},dl={class:"font-medium font-primea"},ul={__name:"EventCreate",setup(K){const c=pe(),A=V(!1),i=V([]),C=V([]),m=V(!1),f=V(!1),U=V(null),u=ee({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),_=te(()=>u.ticket_types.reduce((p,t)=>p+(parseInt(t.capacity)||0),0)),I=te(()=>{if(u.ticket_types.length===0)return 0;const p=u.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return p.length>0?Math.min(...p):0}),g=te(()=>{if(u.ticket_types.length===0)return 0;const p=u.ticket_types.map(t=>parseInt(t.price)||0);return p.length>0?Math.max(...p):0}),H=()=>{u.ticket_types.push({name:"",description:"",price:"",capacity:""})},O=()=>{u.schedules.push({starts_at:"",ends_at:""})},M=p=>{u.schedules.length>1&&u.schedules.splice(p,1)},k=()=>{u.venue_id==="new"?f.value=!0:f.value=!1},x=()=>{f.value=!1,u.venue_id="",u.new_venue_name="",u.new_venue_city="",u.new_venue_address=""},F=p=>{const t=p.target.files[0];if(t){u.image_file=t;const s=new FileReader;s.onload=v=>{u.image_preview=v.target.result,u.image_url=""},s.readAsDataURL(t)}},T=()=>{u.image_url&&(u.image_preview=u.image_url,u.image_file=null)},Z=()=>{u.image_url="",u.image_preview="",u.image_file=null,U.value&&(U.value.value="")},J=p=>{u.ticket_types.length>1&&u.ticket_types.splice(p,1)},Y=p=>{if(p.starts_at&&(!p.ends_at||new Date(p.ends_at)<new Date(p.starts_at))){const t=new Date(p.starts_at);t.setHours(t.getHours()+2),p.ends_at=t.toISOString().slice(0,16)}},$=async()=>{if(u.ticket_types.length===0){S.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!u.title){S.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}A.value=!0;try{if(!u.category_id){S.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!u.venue_id&&!u.new_venue_name){S.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(u.schedules.some(s=>!s.starts_at||!s.ends_at)){S.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}if(u.schedules.some(s=>new Date(s.ends_at)<new Date(s.starts_at))){S.fire({title:"Erreur",text:"La date de fin doit être égale ou postérieure à la date de début",icon:"error",confirmButtonColor:"#272d63"});return}const p={title:u.title,description:u.description,category_id:u.category_id,venue_id:u.venue_id!=="new"?u.venue_id:null,venue_name:u.venue_id==="new"?u.new_venue_name:null,venue_city:u.venue_id==="new"?u.new_venue_city:"Abidjan",venue_address:u.venue_id==="new"?u.new_venue_address:null,is_active:u.status==="published"?1:0,schedules:u.schedules.map(s=>({starts_at:s.starts_at,ends_at:s.ends_at,door_time:s.starts_at})),ticket_types:u.ticket_types.map(s=>({name:s.name,description:s.description,price:parseFloat(s.price),capacity:parseInt(s.capacity),is_active:!0}))};let t;if(u.image_file){const s=new FormData;Object.keys(p).forEach(v=>{p[v]!==null&&p[v]!==void 0&&(v==="schedules"||v==="ticket_types"?s.append(v,JSON.stringify(p[v])):s.append(v,p[v]))}),s.append("image_file",u.image_file),t=await L.createEventWithFile(s)}else p.image_url=u.image_url||null,t=await L.createEvent(p);if(t.data.success)S.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{c.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(p){console.error("Erreur création événement:",p),console.error("Détails erreur:",p.response?.data);let t=p.response?.data?.message||"Erreur lors de la création de l'événement";if(p.response?.data?.errors){const s=p.response.data.errors,v=Object.keys(s).map(b=>`${b}: ${s[b].join(", ")}`).join(`
`);t+=`

Détails:
`+v}S.fire({title:"Erreur de validation",text:t,icon:"error",confirmButtonColor:"#272d63"})}finally{A.value=!1}},r=async()=>{m.value=!0;try{const p=await L.getCategories();p.data.success&&(i.value=p.data.categories||p.data.data);const t=await L.getVenues();t.data.success&&(C.value=t.data.venues||t.data.data)}catch(p){console.error("Erreur chargement données initiales:",p)}finally{m.value=!1}},w=p=>new Intl.NumberFormat("fr-FR").format(p);return se(()=>{r()}),(p,t)=>{const s=le("router-link");return l(),n("div",nn,[e("div",ln,[e("div",dn,[e("div",un,[e("div",mn,[e("button",{onClick:t[0]||(t[0]=v=>p.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(j(fe),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:ae($,["prevent"]),class:"space-y-8"},[e("div",cn,[e("div",pn,[e("div",gn,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",fn,[e("div",vn,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=v=>u.title=v),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[z,u.title]])]),e("div",bn,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=v=>u.description=v),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[z,u.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),D(e("select",{"onUpdate:modelValue":t[3]||(t[3]=v=>u.category_id=v),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),n(X,null,G(i.value,v=>(l(),n("option",{key:v.id,value:v.id},d(v.name),9,xn))),128))],512),[[de,u.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),f.value?R("",!0):(l(),n("div",yn,[D(e("select",{"onUpdate:modelValue":t[4]||(t[4]=v=>u.venue_id=v),onChange:k,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),n(X,null,G(C.value,v=>(l(),n("option",{key:v.id,value:v.id},d(v.name)+" - "+d(v.city),9,_n))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[de,u.venue_id]])])),f.value||u.venue_id==="new"?(l(),n("div",hn,[D(e("input",{"onUpdate:modelValue":t[5]||(t[5]=v=>u.new_venue_name=v),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,u.new_venue_name]]),D(e("input",{"onUpdate:modelValue":t[6]||(t[6]=v=>u.new_venue_city=v),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,u.new_venue_city]]),D(e("input",{"onUpdate:modelValue":t[7]||(t[7]=v=>u.new_venue_address=v),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[z,u.new_venue_address]]),e("button",{type:"button",onClick:x,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):R("",!0)]),e("div",wn,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",$n,[u.image_preview?(l(),n("div",kn,[e("img",{src:u.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,Cn),e("button",{type:"button",onClick:Z,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(l(),n("div",En,[e("input",{ref_key:"imageInput",ref:U,type:"file",accept:"image/*",onChange:F,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=v=>p.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),D(e("input",{"onUpdate:modelValue":t[9]||(t[9]=v=>u.image_url=v),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:T},null,544),[[z,u.image_url]])]))])])])]),e("div",Dn,[e("div",jn,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:O,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(j(ie),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=q(" Ajouter une séance ",-1))])]),e("div",Sn,[(l(!0),n(X,null,G(u.schedules,(v,b)=>(l(),n("div",{key:b,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),D(e("input",{"onUpdate:modelValue":o=>v.starts_at=o,type:"datetime-local",required:"",onChange:o=>Y(v),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,40,Vn),[[z,v.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),D(e("input",{"onUpdate:modelValue":o=>v.ends_at=o,type:"datetime-local",required:"",min:v.starts_at,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Un),[[z,v.ends_at]]),t[28]||(t[28]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"La date de fin doit être égale ou postérieure à la date de début",-1))]),e("div",In,[u.schedules.length>1?(l(),n("button",{key:0,type:"button",onClick:o=>M(b),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[h(j(me),{class:"w-4 h-4"})],8,Bn)):R("",!0)])]))),128))])]),e("div",An,[e("div",Pn,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:H,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(j(ie),{class:"w-4 h-4 inline mr-2"}),t[29]||(t[29]=q(" Ajouter un type ",-1))])]),u.ticket_types.length===0?(l(),n("div",zn,[h(j(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[31]||(t[31]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[32]||(t[32]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(l(),n("div",Fn,[(l(!0),n(X,null,G(u.ticket_types,(v,b)=>(l(),n("div",{key:b,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),D(e("input",{"onUpdate:modelValue":o=>v.name=o,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,Mn),[[z,v.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),D(e("input",{"onUpdate:modelValue":o=>v.price=o,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,Tn),[[z,v.price,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),D(e("input",{"onUpdate:modelValue":o=>v.capacity=o,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,Ln),[[z,v.capacity,void 0,{number:!0}]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),D(e("input",{"onUpdate:modelValue":o=>v.description=o,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,On),[[z,v.description]])]),e("div",Rn,[u.ticket_types.length>1?(l(),n("button",{key:0,type:"button",onClick:o=>J(b),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[h(j(me),{class:"w-4 h-4"})],8,qn)):R("",!0)])]))),128))]))])]),e("div",Nn,[e("div",Xn,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Gn,[e("div",null,[e("label",Hn,[D(e("input",{"onUpdate:modelValue":t[10]||(t[10]=v=>u.is_public=v),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ce,u.is_public]]),t[37]||(t[37]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",Wn,[D(e("input",{"onUpdate:modelValue":t[11]||(t[11]=v=>u.sales_active=v),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[ce,u.sales_active]]),t[39]||(t[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),D(e("select",{"onUpdate:modelValue":t[12]||(t[12]=v=>u.status=v),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[41]||(t[41]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[de,u.status]]),t[43]||(t[43]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",Qn,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Jn,[e("button",{type:"submit",disabled:A.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},d(A.value?"Création en cours...":"Créer l'événement"),9,Kn),h(s,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:Q(()=>[...t[45]||(t[45]=[q(" Annuler ",-1)])]),_:1})])]),u.image_url||u.image_preview?(l(),n("div",Zn,[t[47]||(t[47]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:u.image_preview||u.image_url,alt:u.title,class:"w-full h-48 object-cover rounded-primea"},null,8,Yn)])):R("",!0),e("div",el,[t[52]||(t[52]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",tl,[e("div",sl,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",ol,d(u.ticket_types.length),1)]),e("div",rl,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",al,d(_.value||"Illimitée"),1)]),I.value>0?(l(),n("div",nl,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",ll,d(w(I.value))+" XAF",1)])):R("",!0),g.value>0?(l(),n("div",il,[t[51]||(t[51]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",dl,d(w(g.value))+" XAF",1)])):R("",!0)])])])])],32)])])}}},ml=oe(ul,[["__scopeId","data-v-9749d093"]]),Vd=Object.freeze(Object.defineProperty({__proto__:null,default:ml},Symbol.toStringTag,{value:"Module"})),cl={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},pl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},gl={class:"mb-8"},fl={class:"flex items-center justify-between"},vl={key:0,class:"flex justify-center items-center h-64"},bl={key:1},xl={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},yl={class:"bg-white rounded-lg shadow p-6"},_l={class:"flex items-center"},hl={class:"ml-4"},wl={class:"text-2xl font-bold text-green-600"},$l={class:"bg-white rounded-lg shadow p-6"},kl={class:"flex items-center"},Cl={class:"ml-4"},El={class:"text-2xl font-bold text-yellow-600"},Dl={class:"bg-white rounded-lg shadow p-6"},jl={class:"flex items-center"},Sl={class:"ml-4"},Vl={class:"text-2xl font-bold text-blue-600"},Ul={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Il={class:"flex items-center justify-between mb-4"},Bl={class:"flex items-center"},Al={class:"text-lg font-semibold text-gray-900"},Pl={class:"text-right"},zl={class:"text-2xl font-bold text-green-600"},Fl={class:"mb-4 p-3 bg-gray-50 rounded-primea"},Ml={class:"flex items-center justify-between mb-2"},Tl={key:0,class:"text-sm text-gray-600 font-primea"},Ll={key:0},Ol={key:1,class:"text-sm text-gray-600 font-primea"},Rl={class:"space-y-3"},ql=["onClick","disabled"],Nl={class:"mt-6 pt-6 border-t"},Xl={key:0,class:"text-sm text-gray-500"},Gl={key:1,class:"space-y-2"},Hl={class:"font-medium"},Wl={class:"text-gray-500 ml-2"},Ql={class:"bg-white rounded-lg shadow"},Jl={class:"p-6 border-b"},Kl={class:"flex justify-between items-center"},Zl={key:0,class:"p-8 text-center text-gray-500"},Yl={key:1,class:"overflow-x-auto"},ei={class:"w-full"},ti={class:"divide-y divide-gray-200"},si={class:"px-6 py-4 text-sm font-mono text-gray-900"},oi={class:"px-6 py-4 text-sm"},ri={class:"px-6 py-4 text-sm font-medium text-gray-900"},ai={class:"px-6 py-4 text-sm"},ni={class:"px-6 py-4 text-sm"},li={class:"px-6 py-4 text-sm text-gray-500"},ii={class:"px-6 py-4 text-sm"},di=["onClick"],ui={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},mi={class:"bg-white rounded-primea p-6 w-full max-w-md"},ci={class:"space-y-4"},pi=["value"],gi=["value"],fi=["max"],vi={class:"flex justify-end space-x-3 mt-6"},bi=["disabled"],xi={__name:"BalanceManagement",setup(K){const c=V(!1),A=V(!1),i=V(!1),C=V([]),m=V([]),f=ee({pending_payouts:0,total_payouts:0}),U=ee({gateway:"",available_balance:0,amount:"",phone_number:""}),u=te(()=>C.value.reduce(($,r)=>$+(parseFloat(r.balance)||0),0)),_=async()=>{c.value=!0;try{const $=await L.getBalance();console.log("Balance API Response:",$.data),$.data.success?(C.value=$.data.data.balances||[],console.log("Balances loaded:",C.value),C.value.length===0&&(C.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],console.log("Default balances created:",C.value))):console.error("Balance API Error:",$.data.message)}catch($){console.error("Erreur chargement soldes:",$),console.error("Error details:",$.response?.data),C.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],S.fire({title:"Erreur",text:"Impossible de charger les soldes. Affichage des valeurs par défaut.",icon:"warning",confirmButtonColor:"#272d63"})}finally{c.value=!1}},I=async()=>{try{const $=await L.getPaymentHistory();console.log("Payment History API Response:",$.data),$.data.success?(m.value=$.data.data.payouts?.data||$.data.data.payouts||[],console.log("Recent payouts loaded:",m.value),f.pending_payouts=m.value.filter(r=>["pending","processing"].includes(r.status)).length,f.total_payouts=m.value.reduce((r,w)=>r+(w.amount||0),0),console.log("Stats calculated:",f)):console.error("Payment History API Error:",$.data.message)}catch($){console.error("Erreur chargement payouts récents:",$),console.error("Error details:",$.response?.data)}},g=$=>{Object.assign(U,{gateway:$.gateway,available_balance:$.balance,amount:"",phone_number:$.payout_phone_number||""}),i.value=!0},H=async()=>{A.value=!0;try{const $=await L.requestPayout(U);$.data.success?(S.fire({title:"Succès !",text:"Demande de versement envoyée avec succès",icon:"success",confirmButtonColor:"#272d63"}),i.value=!1,_(),I()):S.fire({title:"Erreur",text:$.data.message||"Erreur lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}catch($){console.error("Erreur demande payout:",$),S.fire({title:"Erreur technique",text:"Une erreur est survenue lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}finally{A.value=!1}},O=$=>m.value.filter(r=>r.gateway===$).slice(0,3),M=$=>{S.fire({title:`Versement #${$.reference}`,html:`
      <div class="text-left">
        <p><strong>Montant:</strong> ${k($.amount)} XAF</p>
        <p><strong>Statut:</strong> ${J($.status)}</p>
        <p><strong>Gateway:</strong> ${T($.gateway)}</p>
        <p><strong>Date:</strong> ${F($.created_at)}</p>
      </div>
    `,icon:"info",confirmButtonColor:"#272d63"})},k=$=>new Intl.NumberFormat("fr-FR").format($||0),x=$=>new Date($).toLocaleDateString("fr-FR"),F=$=>new Date($).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=$=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[$]||$,Z=$=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[$]||"bg-gray-100 text-gray-800",J=$=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[$]||$,Y=$=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[$]||"bg-gray-100 text-gray-800";return se(()=>{_(),I()}),($,r)=>(l(),n("div",cl,[e("div",pl,[e("div",gl,[e("div",fl,[r[6]||(r[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Mon Solde"),e("p",{class:"text-gray-600 font-primea"},"Consultez votre solde et effectuez des demandes de versement")],-1)),e("button",{onClick:r[0]||(r[0]=w=>$.$router.push("/organizer/payouts/history")),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[...r[5]||(r[5]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),q(" Historique Versements ",-1)])])])]),c.value?(l(),n("div",vl,[...r[7]||(r[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),n("div",bl,[e("div",xl,[e("div",yl,[e("div",_l,[r[9]||(r[9]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",hl,[r[8]||(r[8]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",wl,d(k(u.value))+" XAF",1)])])]),e("div",$l,[e("div",kl,[r[11]||(r[11]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Cl,[r[10]||(r[10]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",El,d(f.pending_payouts||0),1)])])]),e("div",Dl,[e("div",jl,[r[13]||(r[13]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",Sl,[r[12]||(r[12]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",Vl,d(k(f.total_payouts||0))+" XAF",1)])])])]),e("div",Ul,[(l(!0),n(X,null,G(C.value,w=>(l(),n("div",{key:w.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",Il,[e("div",Bl,[e("div",{class:N(["p-2 rounded-lg mr-4",Z(w.gateway)])},[...r[14]||(r[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",Al,d(T(w.gateway)),1),r[15]||(r[15]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",Pl,[e("p",zl,d(k(w.balance))+" XAF",1)])]),e("div",Fl,[e("div",Ml,[r[16]||(r[16]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Versement Automatique",-1)),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",w.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},d(w.auto_payout_enabled?"Activé":"Désactivé"),3)]),w.auto_payout_enabled?(l(),n("div",Tl,[e("p",null,"Seuil: "+d(k(w.auto_payout_threshold))+" XAF",1),w.payout_phone_number?(l(),n("p",Ll,"Téléphone: "+d(w.payout_phone_number),1)):R("",!0),r[17]||(r[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Configuration gérée par l'administrateur",-1))])):(l(),n("div",Ol,[...r[18]||(r[18]=[e("p",{class:"text-xs text-gray-500"},"Pour activer le versement automatique, contactez l'administrateur",-1)])]))]),e("div",Rl,[e("button",{onClick:p=>g(w),disabled:w.balance<1e3,class:"w-full bg-primea-blue text-white py-2 px-4 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50 disabled:cursor-not-allowed"},[r[19]||(r[19]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),q(" "+d(w.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Versement"),1)],8,ql)]),e("div",Nl,[r[20]||(r[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),O(w.gateway).length===0?(l(),n("div",Xl," Aucune transaction récente ")):(l(),n("div",Gl,[(l(!0),n(X,null,G(O(w.gateway),p=>(l(),n("div",{key:p.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",Hl,d(k(p.amount))+" XAF",1),e("span",Wl,d(x(p.created_at)),1)]),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(p.status)])},d(J(p.status)),3)]))),128))]))])]))),128))]),e("div",Ql,[e("div",Jl,[e("div",Kl,[r[21]||(r[21]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:r[1]||(r[1]=w=>$.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),m.value.length===0?(l(),n("div",Zl," Aucun payout récent ")):(l(),n("div",Yl,[e("table",ei,[r[22]||(r[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",ti,[(l(!0),n(X,null,G(m.value,w=>(l(),n("tr",{key:w.id},[e("td",si,"#"+d(w.reference),1),e("td",oi,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Z(w.gateway)])},d(T(w.gateway)),3)]),e("td",ri,d(k(w.amount))+" XAF",1),e("td",ai,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(w.status)])},d(J(w.status)),3)]),e("td",ni,[e("span",{class:N(["inline-flex px-2 py-1 text-xs rounded-full",w.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},d(w.is_automatic?"Auto":"Manuel"),3)]),e("td",li,d(F(w.created_at)),1),e("td",ii,[e("button",{onClick:p=>M(w),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,di)])]))),128))])])]))])])),i.value?(l(),n("div",ui,[e("div",mi,[r[29]||(r[29]=e("h3",{class:"text-lg font-bold text-primea-blue font-primea mb-4"},"Demande de Versement",-1)),e("form",{onSubmit:ae(H,["prevent"])},[e("div",ci,[e("div",null,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:T(U.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,pi)]),e("div",null,[r[24]||(r[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:k(U.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,gi)]),e("div",null,[r[25]||(r[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),D(e("input",{"onUpdate:modelValue":r[2]||(r[2]=w=>U.amount=w),type:"number",min:1e3,max:U.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,fi),[[z,U.amount,void 0,{number:!0}]]),r[26]||(r[26]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[r[27]||(r[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),D(e("input",{"onUpdate:modelValue":r[3]||(r[3]=w=>U.phone_number=w),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[z,U.phone_number]]),r[28]||(r[28]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",vi,[e("button",{type:"button",onClick:r[4]||(r[4]=w=>i.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:A.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},d(A.value?"Demande en cours...":"Demander le Versement"),9,bi)])],32)])])):R("",!0)])]))}},yi=oe(xi,[["__scopeId","data-v-1db6fa0a"]]),Ud=Object.freeze(Object.defineProperty({__proto__:null,default:yi},Symbol.toStringTag,{value:"Module"})),_i={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},hi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},wi={key:0,class:"flex justify-center items-center h-64"},$i={key:1,class:"space-y-8"},ki={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Ci={class:"bg-white rounded-primea shadow-primea p-6"},Ei={class:"flex flex-col items-center space-y-4"},Di={class:"relative"},ji={class:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg"},Si=["src","alt"],Vi={key:1,class:"w-full h-full flex items-center justify-center bg-primea-blue text-white text-3xl font-bold font-primea"},Ui=["disabled"],Ii={class:"text-center"},Bi={class:"text-sm text-gray-600 font-primea"},Ai={key:0,class:"text-center"},Pi={class:"bg-white rounded-primea shadow-primea p-6"},zi={class:"flex flex-col items-center space-y-4"},Fi={class:"relative"},Mi={class:"w-32 h-32 rounded-primea overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center"},Ti=["src","alt"],Li={key:1,class:"text-center"},Oi=["disabled"],Ri={class:"text-center"},qi={class:"text-sm text-gray-600 font-primea"},Ni={key:0,class:"text-center"},Xi={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Gi={class:"bg-white rounded-primea shadow-primea p-6"},Hi={class:"flex items-center justify-between mb-6"},Wi=["disabled"],Qi=["disabled"],Ji={key:0,class:"flex space-x-3 pt-4"},Ki=["disabled"],Zi={class:"bg-white rounded-primea shadow-primea p-6"},Yi={class:"flex items-center justify-between mb-6"},ed=["disabled"],td=["disabled"],sd=["disabled"],od=["disabled"],rd={key:0,class:"flex space-x-3 pt-4"},ad=["disabled"],nd={class:"bg-white rounded-primea shadow-primea p-6"},ld=["disabled"],id={class:"bg-white rounded-primea shadow-primea p-6"},dd={class:"space-y-4"},ud={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},md={class:"flex items-center space-x-3"},cd={class:"text-xs text-green-600 font-primea"},pd={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},gd={class:"flex items-center space-x-3"},fd={class:"text-xs text-blue-600 font-primea"},vd={class:"grid grid-cols-2 gap-4 pt-4"},bd={class:"text-center p-3 border rounded-primea"},xd={class:"text-2xl font-bold text-primea-blue font-primea"},yd={class:"text-center p-3 border rounded-primea"},_d={class:"text-2xl font-bold text-primea-yellow font-primea"},hd={__name:"OrganizerProfile",setup(K){const c=ke(),A=V(!1),i=V(!1),C=V(!1),m=V(!1),f=V(!1),U=V(!1),u=V(!1),_=V(!1),I=V(null),g=V(null),H=V({events:0,tickets:0}),O=ee({name:"",email:"",phone:""}),M=ee({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),k=ee({current_password:"",password:"",password_confirmation:""}),x=ee({}),F=ee({}),T=()=>{i.value||Object.assign(x,O),i.value=!i.value},Z=()=>{C.value||Object.assign(F,M),C.value=!C.value},J=()=>{Object.assign(O,x),i.value=!1},Y=()=>{Object.assign(M,F),C.value=!1},$=async()=>{m.value=!0;try{const b=await L.updateProfile({type:"personal",...O});b.data.success&&(S.fire({title:"Succès !",text:"Informations personnelles mises à jour",icon:"success",confirmButtonColor:"#272d63"}),i.value=!1,b.data.data.user&&(I.value={...I.value,...b.data.data.user}))}catch(b){console.error("Erreur lors de la mise à jour:",b),S.fire({title:"Erreur",text:"Impossible de mettre à jour les informations",icon:"error",confirmButtonColor:"#272d63"})}finally{m.value=!1}},r=async()=>{f.value=!0;try{const b=await L.updateProfile({type:"organization",...M});b.data.success&&(S.fire({title:"Succès !",text:"Informations de l'organisation mises à jour",icon:"success",confirmButtonColor:"#272d63"}),C.value=!1,b.data.data.organization&&(g.value={...g.value,...b.data.data.organization}))}catch(b){console.error("Erreur lors de la mise à jour:",b),S.fire({title:"Erreur",text:"Impossible de mettre à jour les informations de l'organisation",icon:"error",confirmButtonColor:"#272d63"})}finally{f.value=!1}},w=async()=>{if(k.password!==k.password_confirmation){S.fire({title:"Erreur",text:"Les mots de passe ne correspondent pas",icon:"error",confirmButtonColor:"#272d63"});return}U.value=!0;try{(await L.updateProfile({type:"password",...k})).data.success&&(S.fire({title:"Succès !",text:"Mot de passe mis à jour avec succès",icon:"success",confirmButtonColor:"#272d63"}),Object.assign(k,{current_password:"",password:"",password_confirmation:""}))}catch(b){console.error("Erreur lors du changement de mot de passe:",b),S.fire({title:"Erreur",text:"Impossible de changer le mot de passe",icon:"error",confirmButtonColor:"#272d63"})}finally{U.value=!1}},p=async b=>{const o=b.target.files[0];if(o){if(!o.type.startsWith("image/")){S.fire({title:"Erreur",text:"Veuillez sélectionner un fichier image",icon:"error",confirmButtonColor:"#272d63"});return}if(o.size>5*1024*1024){S.fire({title:"Erreur",text:"L'image ne doit pas dépasser 5MB",icon:"error",confirmButtonColor:"#272d63"});return}u.value=!0;try{const P=new FormData;P.append("avatar",o),P.append("type","user");const y=await L.uploadAvatar(P);if(y.data.success){I.value.avatar_url=y.data.data.avatar_url,c.updateUser({avatar_url:y.data.data.avatar_url});const a=document.querySelector(`img[alt="${I.value?.name}"]`);a&&(a.src=y.data.data.avatar_url+"?t="+new Date().getTime()),S.fire({title:"Succès !",text:"Photo de profil mise à jour",icon:"success",confirmButtonColor:"#272d63"}),setTimeout(()=>{v()},1e3)}}catch(P){console.error("Erreur upload avatar:",P),S.fire({title:"Erreur",text:"Impossible de télécharger la photo",icon:"error",confirmButtonColor:"#272d63"})}finally{u.value=!1,b.target.value=""}}},t=async b=>{const o=b.target.files[0];if(o){if(!o.type.startsWith("image/")){S.fire({title:"Erreur",text:"Veuillez sélectionner un fichier image",icon:"error",confirmButtonColor:"#272d63"});return}if(o.size>5*1024*1024){S.fire({title:"Erreur",text:"L'image ne doit pas dépasser 5MB",icon:"error",confirmButtonColor:"#272d63"});return}_.value=!0;try{const P=new FormData;P.append("logo",o),P.append("type","organization");const y=await L.uploadAvatar(P);if(y.data.success){g.value.logo_url=y.data.data.logo_url;const a=document.querySelector(`img[alt="${g.value?.name}"]`);a&&(a.src=y.data.data.logo_url+"?t="+new Date().getTime()),S.fire({title:"Succès !",text:"Logo de l'organisation mis à jour",icon:"success",confirmButtonColor:"#272d63"}),setTimeout(()=>{v()},1e3)}}catch(P){console.error("Erreur upload logo:",P),S.fire({title:"Erreur",text:"Impossible de télécharger le logo",icon:"error",confirmButtonColor:"#272d63"})}finally{_.value=!1,b.target.value=""}}},s=b=>b?new Date(b).toLocaleDateString("fr-FR"):"Non disponible",v=async()=>{A.value=!0;try{const b=await L.getProfile();if(console.log("Profile API Response:",b.data),b.data.success){const o=b.data.data;o.user&&(I.value=o.user,Object.assign(O,{name:o.user.name||"",email:o.user.email||"",phone:o.user.phone||""}),c.updateUser({name:o.user.name,email:o.user.email,phone:o.user.phone,avatar_url:o.user.avatar_url})),o.organization&&(g.value=o.organization,Object.assign(M,{name:o.organization.name||"",description:o.organization.description||"",website_url:o.organization.website_url||"",contact_email:o.organization.contact_email||"",contact_phone:o.organization.contact_phone||""})),o.stats&&(H.value={events:o.stats.events||0,tickets:o.stats.tickets||0})}else console.error("Profile API Error:",b.data.message),S.fire({title:"Erreur",text:"Impossible de charger le profil",icon:"error",confirmButtonColor:"#272d63"})}catch(b){console.error("Erreur lors du chargement du profil:",b),S.fire({title:"Erreur",text:"Impossible de charger le profil",icon:"error",confirmButtonColor:"#272d63"})}finally{A.value=!1}};return se(()=>{v()}),(b,o)=>(l(),n("div",_i,[e("div",hi,[o[40]||(o[40]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),A.value?(l(),n("div",wi,[...o[13]||(o[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(l(),n("div",$i,[e("div",ki,[e("div",Ci,[o[16]||(o[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Photo de Profil",-1)),e("div",Ei,[e("div",Di,[e("div",ji,[I.value?.avatar_url?(l(),n("img",{key:0,src:I.value.avatar_url,alt:I.value?.name,class:"w-full h-full object-cover"},null,8,Si)):(l(),n("div",Vi,d(I.value?.name?.charAt(0)?.toUpperCase()||"U"),1))]),e("button",{onClick:o[0]||(o[0]=P=>b.$refs.avatarInput.click()),disabled:u.value,class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 disabled:opacity-50"},[h(j(ve),{class:"w-4 h-4"})],8,Ui)]),e("div",Ii,[e("p",Bi,d(I.value?.name||"Utilisateur"),1),o[14]||(o[14]=e("p",{class:"text-xs text-gray-500 font-primea"},"Cliquez sur l'icône pour changer",-1))]),e("input",{ref:"avatarInput",type:"file",accept:"image/*",onChange:p,class:"hidden"},null,544),u.value?(l(),n("div",Ai,[...o[15]||(o[15]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 font-primea mt-2"},"Upload en cours...",-1)])])):R("",!0)])]),e("div",Pi,[o[20]||(o[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Logo de l'Organisation",-1)),e("div",zi,[e("div",Fi,[e("div",Mi,[g.value?.logo_url?(l(),n("img",{key:0,src:g.value.logo_url,alt:g.value?.name,class:"w-full h-full object-contain"},null,8,Ti)):(l(),n("div",Li,[h(j(ze),{class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),o[17]||(o[17]=e("p",{class:"text-xs text-gray-500 font-primea"},"Aucun logo",-1))]))]),e("button",{onClick:o[1]||(o[1]=P=>b.$refs.logoInput.click()),disabled:_.value,class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 disabled:opacity-50"},[h(j(ve),{class:"w-4 h-4"})],8,Oi)]),e("div",Ri,[e("p",qi,d(g.value?.name||"Organisation"),1),o[18]||(o[18]=e("p",{class:"text-xs text-gray-500 font-primea"},"Logo de votre organisation",-1))]),e("input",{ref:"logoInput",type:"file",accept:"image/*",onChange:t,class:"hidden"},null,544),_.value?(l(),n("div",Ni,[...o[19]||(o[19]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 font-primea mt-2"},"Upload en cours...",-1)])])):R("",!0)])])]),e("div",Xi,[e("div",Gi,[e("div",Hi,[o[21]||(o[21]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:T,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(j(ge),{class:"w-5 h-5"})])]),e("form",{onSubmit:ae($,["prevent"]),class:"space-y-4"},[e("div",null,[o[22]||(o[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),D(e("input",{"onUpdate:modelValue":o[2]||(o[2]=P=>O.name=P),type:"text",disabled:!i.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,Wi),[[z,O.name]])]),e("div",null,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),D(e("input",{"onUpdate:modelValue":o[3]||(o[3]=P=>O.email=P),type:"email",disabled:!i.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,Qi),[[z,O.email]])]),e("div",null,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),h(be,{modelValue:O.phone,"onUpdate:modelValue":o[4]||(o[4]=P=>O.phone=P),id:"personal-phone",disabled:!i.value,"input-class":i.value?"":"disabled:bg-gray-50",placeholder:"Numéro de téléphone","default-country":"GA"},null,8,["modelValue","disabled","input-class"])]),i.value?(l(),n("div",Ji,[e("button",{type:"submit",disabled:m.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},d(m.value?"Enregistrement...":"Enregistrer"),9,Ki),e("button",{type:"button",onClick:J,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):R("",!0)],32)]),e("div",Zi,[e("div",Yi,[o[25]||(o[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:Z,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(j(ge),{class:"w-5 h-5"})])]),e("form",{onSubmit:ae(r,["prevent"]),class:"space-y-4"},[e("div",null,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),D(e("input",{"onUpdate:modelValue":o[5]||(o[5]=P=>M.name=P),type:"text",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,ed),[[z,M.name]])]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=P=>M.description=P),disabled:!C.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,td),[[z,M.description]])]),e("div",null,[o[28]||(o[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),D(e("input",{"onUpdate:modelValue":o[7]||(o[7]=P=>M.website_url=P),type:"url",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,sd),[[z,M.website_url]])]),e("div",null,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),D(e("input",{"onUpdate:modelValue":o[8]||(o[8]=P=>M.contact_email=P),type:"email",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,od),[[z,M.contact_email]])]),e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),h(be,{modelValue:M.contact_phone,"onUpdate:modelValue":o[9]||(o[9]=P=>M.contact_phone=P),id:"organization-phone",disabled:!C.value,"input-class":C.value?"":"disabled:bg-gray-50",placeholder:"Numéro de téléphone de contact","default-country":"GA"},null,8,["modelValue","disabled","input-class"])]),C.value?(l(),n("div",rd,[e("button",{type:"submit",disabled:f.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},d(f.value?"Enregistrement...":"Enregistrer"),9,ad),e("button",{type:"button",onClick:Y,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):R("",!0)],32)]),e("div",nd,[o[34]||(o[34]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:ae(w,["prevent"]),class:"space-y-4"},[e("div",null,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),D(e("input",{"onUpdate:modelValue":o[10]||(o[10]=P=>k.current_password=P),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[z,k.current_password]])]),e("div",null,[o[32]||(o[32]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),D(e("input",{"onUpdate:modelValue":o[11]||(o[11]=P=>k.password=P),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[z,k.password]])]),e("div",null,[o[33]||(o[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),D(e("input",{"onUpdate:modelValue":o[12]||(o[12]=P=>k.password_confirmation=P),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[z,k.password_confirmation]])]),e("button",{type:"submit",disabled:U.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},d(U.value?"Mise à jour...":"Changer le mot de passe"),9,ld)],32)]),e("div",id,[o[39]||(o[39]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",dd,[e("div",ud,[e("div",md,[h(j(Fe),{class:"w-5 h-5 text-green-600"}),o[35]||(o[35]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",cd,d(s(I.value?.email_verified_at)),1)]),g.value?.verified_at?(l(),n("div",pd,[e("div",gd,[h(j(Me),{class:"w-5 h-5 text-blue-600"}),o[36]||(o[36]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",fd,d(s(g.value.verified_at)),1)])):R("",!0),e("div",vd,[e("div",bd,[e("p",xd,d(H.value.events||0),1),o[37]||(o[37]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",yd,[e("p",_d,d(H.value.tickets||0),1),o[38]||(o[38]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])])]))])]))}},wd=oe(hd,[["__scopeId","data-v-ab2c2018"]]),Id=Object.freeze(Object.defineProperty({__proto__:null,default:wd},Symbol.toStringTag,{value:"Module"}));export{Ud as B,Dd as E,Ed as O,be as P,jd as a,Sd as b,Vd as c,Id as d};
