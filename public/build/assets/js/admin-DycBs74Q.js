import{g as n,o as i,h as e,t as a,F as D,q as T,n as $,U as re,$ as ie,b as f,a0 as G,d as de,e as ae,w as xe,l as x,p as le,i as g,v as C,A as se,L as V,j as me,a as ge,a1 as oe,a2 as fe}from"./vue-vendor-CGc-1SHl.js";import{_ as te}from"./account-D9D2Jch1.js";import{i as ye,a as J,S as R}from"./vendor-BvANJOFB.js";const be={name:"AdminDashboard",setup(){const d=f(!1),t=G({total_revenue:0,tickets_sold:0,active_events:0,active_users:0,total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,failed_payments:0,successful_payments:0,pending_payments:0,payments_in_transit:0,platform_commission:0}),c=f([]),s=f([]),r=f([]),u=f([]),o=de(()=>r.value.length===0?1:Math.max(...r.value.map(k=>k.amount))),l=async()=>{d.value=!0;try{const F=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();F.success&&(Object.assign(t,F.data.stats),c.value=F.data.recent_orders,s.value=F.data.recent_activity,r.value=F.data.revenue_data,u.value=F.data.top_events)}catch(k){console.error("Erreur chargement dashboard admin:",k)}finally{d.value=!1}},v=async()=>{try{const F=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(F.success){const m=F.data.balances.reduce((p,S)=>p+S.amount,0);alert(`Solde SHAP total: ${h(m)} XAF`)}}catch(k){console.error("Erreur vérification solde SHAP:",k)}},P=k=>{this.$router.push(`/admin/orders/${k.id}`)},h=k=>new Intl.NumberFormat("fr-FR").format(k),E=k=>new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),U=k=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[k]||k,j=k=>({cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[k]||"bg-gray-100 text-gray-800",q=k=>"text-gray-600",W=()=>{Object.assign(t,{total_revenue:85e5,tickets_sold:342,active_events:23,active_users:156,total_users:1247,total_organizers:89,total_events:156,orders_today:23,revenue_today:285e4,successful_payments:142,pending_payments:8,failed_payments:3,payments_in_transit:475e4,platform_commission:285e3}),c.value=[{id:1,reference:"PMT-2025-001",customer_name:"Jean Dupont",customer_email:"jean@email.com",total_amount:15e3,status:"paid",created_at:new Date},{id:2,reference:"PMT-2025-002",customer_name:"Marie Martin",customer_email:"marie@email.com",total_amount:25e3,status:"pending",created_at:new Date(Date.now()-3e5)}]};return ae(()=>{l(),setTimeout(()=>{t.total_users===0&&W()},2e3)}),{loading:d,stats:t,recentOrders:c,recentActivity:s,revenueData:r,topEvents:u,maxRevenue:o,loadDashboardData:l,checkShapBalance:v,viewOrder:P,formatAmount:h,formatDate:E,getOrderStatusName:U,getOrderStatusClass:j,getActivityIconClass:q}}},he={class:"admin-dashboard p-6"},we={key:0,class:"flex justify-center items-center h-64"},_e={key:1},ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ce={class:"flex items-center"},Me={class:"text-left"},Se={class:"text-white opacity-80 text-sm"},Ae={class:"flex items-center"},je={class:"text-left"},Pe={class:"text-white opacity-80 text-sm"},De={class:"flex items-center"},Te={class:"text-left"},Ue={class:"text-gray-200 text-sm"},Fe={class:"flex items-center"},Oe={class:"text-left"},ze={class:"text-gray-200 text-sm"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Re={class:"bg-white rounded-lg shadow p-6"},Ve={class:"flex items-center"},Be={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Ie={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$e={class:"ml-4"},Le={class:"text-2xl font-bold",style:{color:"#272d63"}},qe={class:"bg-white rounded-lg shadow p-6"},Ne={class:"flex items-center"},Xe={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},He={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={class:"ml-4"},We={class:"text-2xl font-bold",style:{color:"#fab511"}},Ke={class:"bg-white rounded-lg shadow p-6"},Je={class:"flex items-center"},Ye={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.15)"}},Qe={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ze={class:"ml-4"},et={class:"text-2xl font-bold",style:{color:"#272d63"}},tt={class:"bg-white rounded-lg shadow p-6"},st={class:"flex items-center"},ot={class:"ml-4"},lt={class:"text-2xl font-bold text-red-600"},at={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},rt={class:"lg:col-span-2"},nt={class:"bg-white rounded-lg shadow p-6"},it={class:"flex justify-between items-center mb-4"},dt={key:0,class:"text-center text-gray-500 py-8"},ut={key:1,class:"overflow-x-auto"},ct={class:"w-full"},mt={class:"divide-y divide-gray-200"},gt={class:"px-4 py-4 text-sm font-medium text-blue-600"},pt=["onClick"],ft={class:"px-4 py-4 text-sm text-gray-900"},xt={class:"px-4 py-4 text-sm font-medium text-gray-900"},vt={class:"px-4 py-4 text-sm"},yt={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{"background-color":"rgba(250, 181, 17, 0.1)",color:"#fab511"}},bt={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full",style:{"background-color":"rgba(39, 45, 99, 0.1)",color:"#272d63"}},ht={class:"px-4 py-4 text-sm text-gray-500"},wt={class:"lg:col-span-1 space-y-6"},_t={class:"bg-white rounded-lg shadow p-6"},kt={class:"space-y-3"},Ct={class:"flex justify-between items-center"},Mt={class:"bg-white rounded-lg shadow p-6"},St={class:"space-y-3"},At={class:"flex-1"},jt={class:"text-sm text-gray-900"},Pt={class:"text-xs text-gray-500"},Dt={class:"bg-white rounded-lg shadow p-6"},Tt={class:"space-y-3"},Ut={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Ft={class:"bg-white rounded-lg shadow p-6"},Ot={key:0,class:"text-center text-gray-500 py-8"},zt={key:1,class:"space-y-3"},Et={class:"text-sm text-gray-600"},Rt={class:"flex items-center"},Vt={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},Bt={class:"text-sm font-medium"},It={class:"bg-white rounded-lg shadow p-6"},$t={key:0,class:"text-center text-gray-500 py-8"},Lt={key:1,class:"space-y-4"},qt={class:"flex items-center"},Nt={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},Xt={class:"font-medium text-gray-900"},Ht={class:"text-sm text-gray-600"},Gt={class:"text-right"},Wt={class:"font-medium text-gray-900"},Kt={class:"text-sm text-gray-600"};function Jt(d,t,c,s,r,u){return i(),n("div",he,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Tableau de Bord Primea"),e("p",{class:"text-white opacity-80"},"Supervision des paiements et transactions de la plateforme")])],-1)),s.loading?(i(),n("div",we,[...t[15]||(t[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(i(),n("div",_e,[e("div",ke,[e("button",{onClick:t[0]||(t[0]=o=>d.$router.push("/admin/payments")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#272d63"}),onMouseleave:t[2]||(t[2]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#ffffff"})},[e("div",Ce,[t[17]||(t[17]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),e("div",Me,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold"},"Revenus Total",-1)),e("p",Se,a(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])],32),e("button",{onClick:t[3]||(t[3]=o=>d.$router.push("/admin/orders")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#fab511"},onMouseover:t[4]||(t[4]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511")},[e("div",Ae,[t[19]||(t[19]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})],-1)),e("div",je,[t[18]||(t[18]=e("h3",{class:"text-lg font-bold"},"Tickets Vendus",-1)),e("p",Pe,a(s.stats.tickets_sold||0),1)])])],32),e("button",{onClick:t[6]||(t[6]=o=>d.$router.push("/admin/events")),class:"bg-gray-600 text-white p-6 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-105"},[e("div",De,[t[21]||(t[21]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("div",Te,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold"},"Événements Actifs",-1)),e("p",Ue,a(s.stats.active_events||0),1)])])]),e("button",{onClick:t[7]||(t[7]=o=>d.$router.push("/admin/users")),class:"bg-gray-700 text-white p-6 rounded-lg hover:bg-gray-800 transition-all transform hover:scale-105"},[e("div",Fe,[t[23]||(t[23]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),e("div",Oe,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold"},"Utilisateurs Actifs",-1)),e("p",ze,a(s.stats.active_users||0),1)])])])]),e("div",Ee,[e("div",Re,[e("div",Ve,[e("div",Be,[(i(),n("svg",Ie,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",$e,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Paiements Réussis",-1)),e("p",Le,a(s.stats.successful_payments||0),1)])])]),e("div",qe,[e("div",Ne,[e("div",Xe,[(i(),n("svg",He,[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),e("div",Ge,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Paiements En Attente",-1)),e("p",We,a(s.stats.pending_payments||0),1)])])]),e("div",Ke,[e("div",Je,[e("div",Ye,[(i(),n("svg",Qe,[...t[28]||(t[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",Ze,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"Commission Plateforme",-1)),e("p",et,a(s.formatAmount(s.stats.platform_commission||0))+" XAF",1)])])]),e("div",tt,[e("div",st,[t[31]||(t[31]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",ot,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",lt,a(s.stats.failed_payments||0),1)])])])]),e("div",at,[e("div",rt,[e("div",nt,[e("div",it,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold",style:{color:"#272d63"}},"Paiements Récents",-1)),e("button",{onClick:t[8]||(t[8]=o=>d.$router.push("/admin/payments")),class:"text-sm transition-colors duration-200",style:{color:"#272d63"},onMouseover:t[9]||(t[9]=o=>o.currentTarget.style.color="#fab511"),onMouseleave:t[10]||(t[10]=o=>o.currentTarget.style.color="#272d63")},"Voir tous",32)]),s.recentOrders.length===0?(i(),n("div",dt," Aucune commande récente ")):(i(),n("div",ut,[e("table",ct,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",mt,[(i(!0),n(D,null,T(s.recentOrders,o=>(i(),n("tr",{key:o.id},[e("td",gt,[e("button",{onClick:l=>s.viewOrder(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,pt)]),e("td",ft,a(o.customer_name||o.customer_email),1),e("td",xt,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",vt,[o.status==="pending"?(i(),n("span",yt,a(s.getOrderStatusName(o.status)),1)):o.status==="paid"?(i(),n("span",bt,a(s.getOrderStatusName(o.status)),1)):(i(),n("span",{key:2,class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getOrderStatusClass(o.status)])},a(s.getOrderStatusName(o.status)),3))]),e("td",ht,a(s.formatDate(o.created_at)),1)]))),128))])])]))])]),e("div",wt,[e("div",_t,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",kt,[t[35]||(t[35]=re('<div class="flex justify-between items-center" data-v-85cf53a5><span class="text-sm text-gray-600" data-v-85cf53a5>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full" style="background-color:rgba(39, 45, 99, 0.1);color:#272d63;" data-v-85cf53a5> Opérationnel </span></div><div class="flex justify-between items-center" data-v-85cf53a5><span class="text-sm text-gray-600" data-v-85cf53a5>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full" style="background-color:rgba(39, 45, 99, 0.1);color:#272d63;" data-v-85cf53a5> Opérationnel </span></div>',2)),e("div",Ct,[t[34]||(t[34]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[11]||(t[11]=(...o)=>s.checkShapBalance&&s.checkShapBalance(...o)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",Mt,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",St,[(i(!0),n(D,null,T(s.recentActivity,o=>(i(),n("div",{key:o.id,class:"flex items-start"},[e("div",{class:$(["p-1 rounded-full mr-3",s.getActivityIconClass(o.type)])},[...t[37]||(t[37]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",At,[e("p",jt,a(o.description),1),e("p",Pt,a(s.formatDate(o.created_at)),1)])]))),128))])]),e("div",Dt,[t[42]||(t[42]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",Tt,[e("button",{onClick:t[12]||(t[12]=o=>d.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[39]||(t[39]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[13]||(t[13]=o=>d.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[40]||(t[40]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[14]||(t[14]=o=>d.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[41]||(t[41]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",Ut,[e("div",Ft,[t[43]||(t[43]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),s.revenueData.length===0?(i(),n("div",Ot," Aucune donnée disponible ")):(i(),n("div",zt,[(i(!0),n(D,null,T(s.revenueData,o=>(i(),n("div",{key:o.date,class:"flex justify-between items-center"},[e("span",Et,a(s.formatDate(o.date)),1),e("div",Rt,[e("div",Vt,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ie(`width: ${o.amount/s.maxRevenue*100}%`)},null,4)]),e("span",Bt,a(s.formatAmount(o.amount))+" XAF",1)])]))),128))]))]),e("div",It,[t[44]||(t[44]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),s.topEvents.length===0?(i(),n("div",$t," Aucun événement populaire ")):(i(),n("div",Lt,[(i(!0),n(D,null,T(s.topEvents,(o,l)=>(i(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",qt,[e("div",Nt,a(l+1),1),e("div",null,[e("h3",Xt,a(o.title),1),e("p",Ht,a(o.organizer_name),1)])]),e("div",Gt,[e("p",Wt,a(o.tickets_sold)+" tickets",1),e("p",Kt,a(s.formatAmount(o.revenue))+" XAF",1)])]))),128))]))])])]))])}const Yt=te(be,[["render",Jt],["__scopeId","data-v-85cf53a5"]]),_3=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),Qt={name:"ImageUpload",props:{modelValue:{type:Object,default:()=>({})},entityType:{type:String,required:!0,validator:d=>["events","venues","users","organizers"].includes(d)},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},altText:{type:String,default:"Image"}},emits:["update:modelValue","change"],setup(d,{emit:t}){const c=f("upload"),s=f(null),r=f(""),u=f(""),o=f(!1),l=f(!1),v=f(!1),P=f(!1),h=f(!1),E=f(!1),U=f(""),j=de(()=>d.modelValue?.url?d.modelValue.url:d.modelValue?.filename?`/storage/images/${d.entityType}/${d.size}_${d.modelValue.filename}`:null),q=de(()=>{const y="object-cover rounded-lg shadow-sm",A={thumbnail:"w-20 h-20",medium:"w-32 h-32",large:"w-48 h-48"};return`${y} ${A[d.size]||A.medium}`}),W=y=>{y.preventDefault(),v.value=!1;const A=y.dataTransfer.files;A.length>0&&F(A[0])},k=y=>{const A=y.target.files;A.length>0&&F(A[0])},F=y=>{if(U.value="",!y.type.startsWith("image/")){U.value="Veuillez sélectionner un fichier image valide.";return}if(y.size>5*1024*1024){U.value="L'image ne doit pas dépasser 5MB.";return}s.value=y;const A=new FileReader;A.onload=M=>{r.value=M.target.result},A.readAsDataURL(y)},w=async()=>{if(s.value){P.value=!0,E.value=!0,U.value="";try{const y=new FormData;y.append("image",s.value),y.append("type",d.entityType);const M=await(await fetch("/api/v1/images/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:y})).json();if(M.success){const L={filename:M.data.filename,urls:M.data.urls};t("update:modelValue",L),t("change",L),s.value=null,r.value=""}else U.value=M.message||"Erreur lors de l'upload"}catch{U.value="Erreur de connexion lors de l'upload"}finally{P.value=!1,E.value=!1}}},m=async()=>{if(u.value){h.value=!0,E.value=!0,U.value="",l.value=!1;try{const A=await(await fetch("/api/v1/images/validate-url",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({url:u.value,type:d.entityType})})).json();A.success?o.value=!0:(l.value=!0,U.value=A.message)}catch{l.value=!0,U.value="Erreur lors de la validation de l'URL"}finally{h.value=!1,E.value=!1}}},p=()=>{const y={url:u.value};t("update:modelValue",y),t("change",y),u.value="",o.value=!1},S=()=>{t("update:modelValue",{}),t("change",{})},b=y=>{if(y===0)return"0 Bytes";const A=1024,M=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(y)/Math.log(A));return parseFloat((y/Math.pow(A,L)).toFixed(2))+" "+M[L]};return xe([c],()=>{U.value="",l.value=!1}),{activeTab:c,selectedFile:s,previewUrl:r,imageUrl:u,urlPreview:o,urlError:l,isDragOver:v,uploading:P,validating:h,loading:E,error:U,currentImageUrl:j,imageClasses:q,handleDrop:W,handleFileSelect:k,uploadFile:w,validateImageUrl:m,confirmUrl:p,removeImage:S,formatFileSize:b}}},Zt={class:"image-upload-component"},es={key:0,class:"current-image mb-4"},ts=["src","alt"],ss={key:1,class:"upload-options"},os={class:"option-tabs mb-4"},ls={key:0,class:"upload-tab"},as={key:0,class:"file-preview mt-4"},rs=["src"],ns={class:"file-info"},is={class:"file-name"},ds={class:"file-size"},us=["disabled"],cs={key:0},ms={key:1},gs={key:1,class:"url-tab"},ps={class:"url-input-group"},fs=["disabled"],xs={key:0},vs={key:1},ys={key:0,class:"url-preview mt-4"},bs=["src"],hs={key:1,class:"error-message mt-2"},ws={key:2,class:"error-message mt-2"},_s={key:3,class:"loading-overlay"};function ks(d,t,c,s,r,u){return i(),n("div",Zt,[s.currentImageUrl?(i(),n("div",es,[e("img",{src:s.currentImageUrl,alt:c.altText,class:$(s.imageClasses)},null,10,ts),c.disabled?x("",!0):(i(),n("button",{key:0,type:"button",onClick:t[0]||(t[0]=(...o)=>s.removeImage&&s.removeImage(...o)),class:"remove-btn"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]))])):x("",!0),c.disabled?x("",!0):(i(),n("div",ss,[e("div",os,[e("button",{type:"button",onClick:t[1]||(t[1]=o=>s.activeTab="upload"),class:$(["tab-btn",s.activeTab==="upload"?"active":""])}," Uploader une image ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>s.activeTab="url"),class:$(["tab-btn",s.activeTab==="url"?"active":""])}," Utiliser une URL ",2)]),s.activeTab==="upload"?(i(),n("div",ls,[e("div",{class:$(["upload-area",{dragover:s.isDragOver}]),onDrop:t[5]||(t[5]=(...o)=>s.handleDrop&&s.handleDrop(...o)),onDragover:[t[6]||(t[6]=le(()=>{},["prevent"])),t[9]||(t[9]=o=>s.isDragOver=!0)],onDragenter:t[7]||(t[7]=le(()=>{},["prevent"])),onDragleave:t[8]||(t[8]=o=>s.isDragOver=!1)},[e("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:t[3]||(t[3]=(...o)=>s.handleFileSelect&&s.handleFileSelect(...o)),style:{display:"none"}},null,544),e("div",{class:"upload-content",onClick:t[4]||(t[4]=o=>d.$refs.fileInput.click())},[...t[17]||(t[17]=[e("svg",{class:"upload-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),e("p",{class:"upload-text"},"Cliquez pour sélectionner ou glissez-déposez une image",-1),e("p",{class:"upload-subtext"},"PNG, JPG, GIF jusqu'à 5MB",-1)])])],34),s.selectedFile?(i(),n("div",as,[e("img",{src:s.previewUrl,alt:"Prévisualisation",class:"preview-image"},null,8,rs),e("div",ns,[e("p",is,a(s.selectedFile.name),1),e("p",ds,a(s.formatFileSize(s.selectedFile.size)),1)]),e("button",{type:"button",onClick:t[10]||(t[10]=(...o)=>s.uploadFile&&s.uploadFile(...o)),disabled:s.uploading,class:"upload-btn"},[s.uploading?(i(),n("span",cs,"Upload en cours...")):(i(),n("span",ms,"Confirmer l'upload"))],8,us)])):x("",!0)])):x("",!0),s.activeTab==="url"?(i(),n("div",gs,[e("div",ps,[g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.imageUrl=o),type:"url",placeholder:"https://exemple.com/image.jpg",class:"url-input",onBlur:t[12]||(t[12]=(...o)=>s.validateImageUrl&&s.validateImageUrl(...o))},null,544),[[C,s.imageUrl]]),e("button",{type:"button",onClick:t[13]||(t[13]=(...o)=>s.validateImageUrl&&s.validateImageUrl(...o)),disabled:s.validating,class:"validate-btn"},[s.validating?(i(),n("span",xs,"Validation...")):(i(),n("span",vs,"Valider"))],8,fs)]),s.urlPreview?(i(),n("div",ys,[e("img",{src:s.imageUrl,alt:"Prévisualisation URL",class:"preview-image",onError:t[14]||(t[14]=o=>s.urlError=!0)},null,40,bs),e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.confirmUrl&&s.confirmUrl(...o)),class:"confirm-btn"},"Utiliser cette image")])):x("",!0),s.urlError?(i(),n("div",hs," L'URL ne pointe pas vers une image valide ou accessible. ")):x("",!0)])):x("",!0)])),s.error?(i(),n("div",ws,a(s.error),1)):x("",!0),s.loading?(i(),n("div",_s,[...t[18]||(t[18]=[e("div",{class:"loading-spinner"},null,-1)])])):x("",!0)])}const pe=te(Qt,[["render",ks],["__scopeId","data-v-15a93d0e"]]),Cs={name:"UserManagement",components:{ImageUpload:pe},setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(!1),r=f(null),u=f(null),o=f([]),l=G({search:"",role:"",status:""}),v=G({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}});let P=null;const h=async()=>{d.value=!0;try{const b=new URLSearchParams;l.search&&b.append("search",l.search),l.role&&b.append("role",l.role),l.status&&b.append("status",l.status);const A=await(await fetch(`/api/v1/admin/users?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();A.success&&(o.value=A.data.users.data||A.data.users)}catch(b){console.error("Erreur chargement utilisateurs:",b)}finally{d.value=!1}},E=()=>{clearTimeout(P),P=setTimeout(()=>{h()},500)},U=()=>{r.value=null,Object.assign(v,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}}),c.value=!0},j=b=>{r.value=b;let y={};b.avatar_url?y.url=b.avatar_url:b.avatar_file&&(y.filename=b.avatar_file),Object.assign(v,{name:b.name,email:b.email,password:"",is_admin:b.roles?.some(A=>A.slug==="admin")||!1,is_organizer:b.roles?.some(A=>A.slug==="organizer")||!1,is_active:b.status==="active",avatar:y}),c.value=!0},q=async()=>{t.value=!0;try{const b=r.value?`/api/v1/admin/users/${r.value.id}`:"/api/v1/admin/users",y=r.value?"PUT":"POST",A={...v};delete A.password,v.avatar.url?(A.avatar_url=v.avatar.url,A.avatar_file=null):v.avatar.filename&&(A.avatar_file=v.avatar.filename,A.avatar_url=null),delete A.avatar;const L=await(await fetch(b,{method:y,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(A)})).json();L.success?(Toast.fire({icon:"success",title:L.message||(r.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès")}),c.value=!1,h()):Swal.fire({icon:"error",title:"Erreur",text:L.message||"Erreur lors de la sauvegarde"})}catch(b){console.error("Erreur sauvegarde utilisateur:",b),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},W=async b=>{if((await confirmAction("Changer le statut de l'utilisateur",`Êtes-vous sûr de vouloir ${b.status==="active"?"désactiver":"activer"} cet utilisateur ?`,b.status==="active"?"Désactiver":"Activer")).isConfirmed)try{const M=await(await fetch(`/api/v1/admin/users/${b.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();M.success?(Toast.fire({icon:"success",title:M.message||"Statut mis à jour avec succès"}),h()):Swal.fire({icon:"error",title:"Erreur",text:M.message||"Erreur lors du changement de statut"})}catch(A){console.error("Erreur toggle statut:",A),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors du changement de statut"})}},k=b=>{u.value=b,s.value=!0},F=async b=>{if((await confirmAction("Réinitialiser le mot de passe",`Envoyer un email de réinitialisation à ${b.name} (${b.email}) ?`,"Envoyer l'email")).isConfirmed)try{const M=await(await fetch(`/api/v1/admin/users/${b.id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();M.success?Toast.fire({icon:"success",title:M.message||"Email de réinitialisation envoyé avec succès"}):Swal.fire({icon:"error",title:"Erreur",text:M.message||"Erreur lors de l'envoi de l'email"})}catch(A){console.error("Erreur reset mot de passe:",A),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de l'envoi de l'email"})}},w=()=>{Object.assign(l,{search:"",role:"",status:""}),h()},m=b=>{v.avatar=b},p=b=>new Date(b).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=b=>({admin:"Administrateur",organizer:"Organisateur",client:"Client"})[b]||b;return ae(()=>{h()}),{loading:d,saving:t,showModal:c,showDetailsModal:s,editingUser:r,selectedUser:u,users:o,filters:l,userForm:v,loadUsers:h,debouncedSearch:E,openCreateModal:U,editUser:j,saveUser:q,toggleUserStatus:W,viewUserDetails:k,resetUserPassword:F,resetFilters:w,handleImageChange:m,formatDate:p,getRoleName:S}}},Ms={class:"user-management p-6 bg-gray-50 min-h-screen"},Ss={class:"mb-8"},As={class:"flex items-center justify-between"},js={class:"bg-white rounded-lg shadow p-6 mb-8"},Ps={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ds={class:"flex items-end"},Ts={class:"bg-white rounded-lg shadow"},Us={key:0,class:"p-8 text-center"},Fs={key:1,class:"p-8 text-center text-gray-500"},Os={key:2,class:"overflow-x-auto"},zs={class:"w-full"},Es={class:"divide-y divide-gray-200"},Rs={class:"px-6 py-4"},Vs={class:"flex items-center"},Bs={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},Is={class:"ml-4"},$s={class:"text-sm font-medium text-gray-900"},Ls={class:"text-sm text-gray-500"},qs={class:"px-6 py-4 text-sm text-gray-900"},Ns={class:"px-6 py-4 text-sm"},Xs={class:"space-y-1"},Hs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Gs={class:"px-6 py-4 text-sm"},Ws=["onClick"],Ks={class:"px-6 py-4 text-sm text-gray-500"},Js={class:"px-6 py-4 text-sm space-x-2"},Ys=["onClick"],Qs=["onClick"],Zs=["onClick"],eo={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},to={class:"bg-white rounded-lg p-6 w-full max-w-md"},so={class:"text-lg font-bold mb-4"},oo={class:"space-y-4"},lo={key:0,class:"bg-blue-50 p-4 rounded-lg"},ao={class:"space-y-2"},ro={class:"flex items-center"},no={class:"flex items-center"},io={key:1},uo={class:"flex items-center"},co={class:"flex justify-end space-x-3 mt-6"},mo=["disabled"],go={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},po={class:"bg-white rounded-lg p-6 w-full max-w-lg"},fo={class:"flex justify-between items-center mb-4"},xo={key:0,class:"space-y-4"},vo={class:"grid grid-cols-2 gap-4"},yo={class:"text-sm text-gray-900"},bo={class:"text-sm text-gray-900"},ho={class:"text-sm"},wo={class:"space-y-1"},_o={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},ko={class:"text-sm text-gray-900"},Co={class:"text-sm text-gray-900"},Mo={key:0},So={class:"text-sm text-gray-900"};function Ao(d,t,c,s,r,u){const o=ge("ImageUpload");return i(),n("div",Ms,[e("div",Ss,[e("div",As,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...l)=>s.openCreateModal&&s.openCreateModal(...l)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer Utilisateur ",-1)])])])]),e("div",js,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Ps,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.filters.search=l),onInput:t[2]||(t[2]=(...l)=>s.debouncedSearch&&s.debouncedSearch(...l)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.filters.role=l),onChange:t[4]||(t[4]=(...l)=>s.loadUsers&&s.loadUsers(...l)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[V,s.filters.role]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.filters.status=l),onChange:t[6]||(t[6]=(...l)=>s.loadUsers&&s.loadUsers(...l)),class:"w-full border rounded-lg px-3 py-2"},[...t[22]||(t[22]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[V,s.filters.status]])]),e("div",Ds,[e("button",{onClick:t[7]||(t[7]=(...l)=>s.resetFilters&&s.resetFilters(...l)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ts,[t[27]||(t[27]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),s.loading?(i(),n("div",Us,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.users.length===0?(i(),n("div",Fs," Aucun utilisateur trouvé ")):(i(),n("div",Os,[e("table",zs,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Es,[(i(!0),n(D,null,T(s.users,l=>(i(),n("tr",{key:l.id},[e("td",Rs,[e("div",Vs,[e("div",Bs,a(l.name.charAt(0).toUpperCase()),1),e("div",Is,[e("div",$s,a(l.name),1),e("div",Ls,"ID: "+a(l.id),1)])])]),e("td",qs,a(l.email),1),e("td",Ns,[e("div",Xs,[l.roles&&l.roles.length>0?(i(!0),n(D,{key:0},T(l.roles,v=>(i(),n("span",{key:v.id,class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":v.slug==="admin","bg-green-100 text-green-800":v.slug==="organizer","bg-gray-100 text-gray-800":v.slug==="client"}])},a(s.getRoleName(v.slug)),3))),128)):(i(),n("span",Hs," Aucun rôle "))])]),e("td",Gs,[e("button",{onClick:v=>s.toggleUserStatus(l),class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",l.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(l.status==="active"?"Actif":"Inactif"),11,Ws)]),e("td",Ks,a(s.formatDate(l.created_at)),1),e("td",Js,[e("button",{onClick:v=>s.editUser(l),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Ys),e("button",{onClick:v=>s.viewUserDetails(l),class:"text-green-600 hover:text-green-900"}," Détails ",8,Qs),e("button",{onClick:v=>s.resetUserPassword(l),class:"text-orange-600 hover:text-orange-900"}," Reset mot de passe ",8,Zs)])]))),128))])])]))]),s.showModal?(i(),n("div",eo,[e("div",to,[e("h3",so,a(s.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[15]||(t[15]=le((...l)=>s.saveUser&&s.saveUser(...l),["prevent"]))},[e("div",oo,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>s.userForm.name=l),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.userForm.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s.userForm.email=l),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.userForm.email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photo de profil",-1)),me(o,{modelValue:s.userForm.avatar,"onUpdate:modelValue":t[10]||(t[10]=l=>s.userForm.avatar=l),"entity-type":"users",size:"medium","alt-text":"Photo de profil",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),s.editingUser?x("",!0):(i(),n("div",lo,[...t[31]||(t[31]=[e("p",{class:"text-sm text-blue-800"},[e("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),se(" Un email sera envoyé à l'utilisateur pour qu'il définisse son mot de passe ")],-1)])])),e("div",ao,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",ro,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=l=>s.userForm.is_admin=l),class:"rounded border-gray-300"},null,512),[[oe,s.userForm.is_admin]]),t[32]||(t[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",no,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=l=>s.userForm.is_organizer=l),class:"rounded border-gray-300"},null,512),[[oe,s.userForm.is_organizer]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),s.editingUser?(i(),n("div",io,[e("label",uo,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=l=>s.userForm.is_active=l),class:"rounded border-gray-300"},null,512),[[oe,s.userForm.is_active]]),t[35]||(t[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):x("",!0)]),e("div",co,[e("button",{type:"button",onClick:t[14]||(t[14]=l=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingUser?"Mettre à jour":"Créer"),9,mo)])],32)])])):x("",!0),s.showDetailsModal?(i(),n("div",go,[e("div",po,[e("div",fo,[t[37]||(t[37]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{type:"button",onClick:t[16]||(t[16]=l=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[36]||(t[36]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedUser?(i(),n("div",xo,[e("div",vo,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",yo,a(s.selectedUser.name),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",bo,a(s.selectedUser.email),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",ho,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(s.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",wo,[s.selectedUser.roles&&s.selectedUser.roles.length>0?(i(!0),n(D,{key:0},T(s.selectedUser.roles,l=>(i(),n("span",{key:l.id,class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":l.slug==="admin","bg-green-100 text-green-800":l.slug==="organizer","bg-gray-100 text-gray-800":l.slug==="client"}])},a(s.getRoleName(l.slug)),3))),128)):(i(),n("span",_o," Aucun rôle "))])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",ko,a(s.formatDate(s.selectedUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",Co,a(s.selectedUser.email_verified_at?"Oui":"Non"),1)])]),s.selectedUser.is_organizer&&s.selectedUser.organizers_count>0?(i(),n("div",Mo,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",So,a(s.selectedUser.organizers_count)+" organisateur(s)",1)])):x("",!0)])):x("",!0)])])):x("",!0)])}const jo=te(Cs,[["render",Ao],["__scopeId","data-v-14f06e99"]]),k3=Object.freeze(Object.defineProperty({__proto__:null,default:jo},Symbol.toStringTag,{value:"Module"})),Po={name:"OrganizerManagement",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(!1),r=f(!1),u=f(!1),o=f(null),l=f(null),v=f(null),P=f([]),h=f([]),E=f(null);let U=null;const j=G({search:"",status:"",verified:""}),q=G({name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),W=G({user_ids:[]});let k=null;const F=async()=>{d.value=!0;try{const z=new URLSearchParams;j.search&&z.append("search",j.search),j.status&&z.append("status",j.status),j.verified&&z.append("verified",j.verified);const ne=await(await fetch(`/api/v1/admin/organizers?${z}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();ne.success&&(P.value=ne.data.organizers.data||ne.data.organizers)}catch(z){console.error("Erreur chargement organisateurs:",z)}finally{d.value=!1}},w=async()=>{try{const Z=await(await fetch("/api/v1/admin/users?role=organizer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(Z.success){const ne=Z.data.users.data||Z.data.users||[];h.value=ne.filter(ce=>ce.roles&&ce.roles.some(O=>O.slug==="organizer"))}}catch(z){console.error("Erreur chargement utilisateurs:",z)}},m=()=>{clearTimeout(k),k=setTimeout(()=>{F()},500)},p=async()=>{o.value=null,Object.assign(q,{name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),await w(),s.value=!0,await fe(),_()},S=async z=>{o.value=z,Object.assign(q,{name:z.name,bio:z.bio||"",contact_email:z.contact_email,contact_phone:z.contact_phone||"",status:z.status,user_ids:z.users?z.users.map(Z=>Z.id):[]}),await w(),s.value=!0,await fe(),_()},b=async()=>{t.value=!0;try{const z=o.value?`/api/v1/admin/organizers/${o.value.id}`:"/api/v1/admin/organizers",Z=o.value?"PUT":"POST",ne={...q};U&&U.isValidNumber()&&(ne.contact_phone=U.getNumber());const ce=await fetch(z,{method:Z,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(ne)});if(ce.status===404&&o.value){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),s.value=!1,B(),F();return}const O=await ce.json();O.success?(Toast.fire({icon:"success",title:O.message||(o.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès")}),s.value=!1,B(),F()):Swal.fire({icon:"error",title:"Erreur",text:O.message||"Erreur lors de la sauvegarde"})}catch(z){console.error("Erreur sauvegarde organisateur:",z),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},y=z=>{l.value=z,r.value=!0},A=async z=>{v.value=z,W.user_ids=z.users?z.users.map(Z=>Z.id):[],await w(),u.value=!0},M=async()=>{c.value=!0;try{const z=await fetch(`/api/v1/admin/organizers/${v.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(W)});if(z.status===404){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),u.value=!1,F();return}const Z=await z.json();Z.success?(Toast.fire({icon:"success",title:"Utilisateurs mis à jour avec succès"}),u.value=!1,F()):Swal.fire({icon:"error",title:"Erreur",text:Z.message||"Erreur lors de la mise à jour"})}catch(z){console.error("Erreur mise à jour utilisateurs:",z),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la mise à jour"})}finally{c.value=!1}},L=()=>{Object.assign(j,{search:"",status:"",verified:""}),F()},_=()=>{E.value&&!U&&(U=ye(E.value,{initialCountry:"ga",preferredCountries:["ga","cm","cg","ci","sn"],separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.11.1/build/js/utils.js"}),E.value.addEventListener("input",()=>{U.isValidNumber()&&(q.contact_phone=U.getNumber())}),E.value.addEventListener("countrychange",()=>{q.contact_phone=U.getNumber()}))},B=()=>{U&&(U.destroy(),U=null)},Y=()=>{B(),s.value=!1},ue=z=>new Date(z).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=z=>({active:"Actif",inactive:"Inactif"})[z]||z,K=z=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"})[z]||"bg-gray-100 text-gray-800",X=()=>{P.value=[],h.value=[],l.value=null,v.value=null,o.value=null,s.value=!1,r.value=!1,u.value=!1,F()};return ae(()=>{X()}),{loading:d,saving:t,updatingUsers:c,showModal:s,showDetailsModal:r,showUserModal:u,editingOrganizer:o,selectedOrganizer:l,managingOrganizer:v,organizers:P,availableUsers:h,filters:j,organizerForm:q,userManagementForm:W,phoneInput:E,loadOrganizers:F,loadAvailableUsers:w,debouncedSearch:m,openCreateModal:p,editOrganizer:S,saveOrganizer:b,viewOrganizerDetails:y,manageUsers:A,updateOrganizerUsers:M,resetFilters:L,initPhoneInput:_,destroyPhoneInput:B,closeModal:Y,forceRefresh:X,formatDate:ue,getStatusName:I,getStatusBadgeClass:K}}},Do={class:"organizer-management p-6 bg-gray-50 min-h-screen"},To={class:"mb-8"},Uo={class:"flex items-center justify-between"},Fo={class:"bg-white rounded-lg shadow p-6 mb-8"},Oo={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},zo={class:"flex items-end space-x-2"},Eo={class:"bg-white rounded-lg shadow"},Ro={key:0,class:"p-8 text-center"},Vo={key:1,class:"p-8 text-center text-gray-500"},Bo={key:2,class:"overflow-x-auto"},Io={class:"w-full"},$o={class:"divide-y divide-gray-200"},Lo={class:"px-6 py-4"},qo={class:"flex items-center"},No={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},Xo={class:"ml-4"},Ho={class:"text-sm font-medium text-gray-900"},Go={class:"text-sm text-gray-500"},Wo={class:"px-6 py-4"},Ko={class:"text-sm text-gray-900"},Jo={class:"text-sm text-gray-500"},Yo={class:"px-6 py-4 text-sm text-gray-900"},Qo={class:"flex flex-wrap gap-1"},Zo={key:0,class:"text-gray-500 text-xs"},el={class:"px-6 py-4 text-sm text-gray-900"},tl={class:"px-6 py-4 text-sm"},sl={class:"px-6 py-4 text-sm"},ol={class:"px-6 py-4 text-sm space-x-2"},ll=["onClick"],al=["onClick"],rl=["onClick"],nl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},il={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},dl={class:"text-lg font-bold mb-4"},ul={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},cl={class:"md:col-span-2"},ml={class:"md:col-span-2"},gl={class:"md:col-span-2"},pl={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},fl=["value"],xl={class:"ml-2 text-sm"},vl={key:0,class:"text-sm text-gray-500"},yl={class:"flex justify-end space-x-3 mt-6"},bl=["disabled"],hl={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},wl={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},_l={class:"flex justify-between items-center mb-4"},kl={key:0,class:"space-y-4"},Cl={class:"grid grid-cols-2 gap-4"},Ml={class:"text-sm text-gray-900"},Sl={class:"text-sm text-gray-900"},Al={class:"text-sm text-gray-900"},jl={class:"text-sm text-gray-900"},Pl={class:"text-sm"},Dl={class:"text-sm"},Tl={class:"text-sm text-gray-900"},Ul={class:"text-sm text-gray-900"},Fl={key:0},Ol={class:"text-sm text-gray-900"},zl={key:1},El={class:"flex flex-wrap gap-2"},Rl={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Vl={class:"bg-white rounded-lg p-6 w-full max-w-md"},Bl={class:"flex justify-between items-center mb-4"},Il={key:0,class:"space-y-4"},$l={class:"font-medium text-gray-900 mb-2"},Ll={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},ql={class:"text-sm font-medium"},Nl={class:"text-xs text-gray-500 block"},Xl=["value"],Hl={class:"flex justify-end space-x-3"},Gl=["disabled"];function Wl(d,t,c,s,r,u){return i(),n("div",Do,[e("div",To,[e("div",Uo,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer Organisateur ",-1)])])])]),e("div",Fo,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Oo,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[V,s.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut actif",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.verified=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],544),[[V,s.filters.verified]])]),e("div",zo,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser "),e("button",{onClick:t[8]||(t[8]=(...o)=>s.forceRefresh&&s.forceRefresh(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Actualiser ")])])]),e("div",Eo,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),s.loading?(i(),n("div",Ro,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.organizers.length===0?(i(),n("div",Vo," Aucun organisateur trouvé ")):(i(),n("div",Bo,[e("table",Io,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",$o,[(i(!0),n(D,null,T(s.organizers,o=>(i(),n("tr",{key:o.id},[e("td",Lo,[e("div",qo,[e("div",No,a(o.name.charAt(0).toUpperCase()),1),e("div",Xo,[e("div",Ho,a(o.name),1),e("div",Go,a(o.slug),1)])])]),e("td",Wo,[e("div",Ko,a(o.contact_email),1),e("div",Jo,a(o.contact_phone||"-"),1)]),e("td",Yo,[e("div",Qo,[(i(!0),n(D,null,T(o.users,l=>(i(),n("span",{key:l.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(l.name),1))),128)),o.users.length===0?(i(),n("span",Zo," Aucun utilisateur ")):x("",!0)])]),e("td",el,a(o.events_count||0),1),e("td",tl,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",sl,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(o.is_active?"Actif":"Inactif"),3)]),e("td",ol,[e("button",{onClick:l=>s.editOrganizer(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,ll),e("button",{onClick:l=>s.viewOrganizerDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,al),e("button",{onClick:l=>s.manageUsers(o),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,rl)])]))),128))])])]))]),s.showModal?(i(),n("div",nl,[e("div",il,[e("h3",dl,a(s.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=le((...o)=>s.saveOrganizer&&s.saveOrganizer(...o),["prevent"]))},[e("div",ul,[e("div",cl,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.organizerForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.organizerForm.name]])]),e("div",ml,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biographie",-1)),g(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.organizerForm.bio=o),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.organizerForm.bio]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.organizerForm.contact_email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),g(e("input",{ref:"phoneInput","onUpdate:modelValue":t[12]||(t[12]=o=>s.organizerForm.contact_phone=o),type:"tel",class:"w-full border rounded-lg px-3 py-2",placeholder:"Téléphone"},null,512),[[C,s.organizerForm.contact_phone]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.organizerForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[V,s.organizerForm.status]])]),e("div",gl,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",pl,[(i(!0),n(D,null,T(s.availableUsers,o=>(i(),n("div",{key:o.id,class:"flex items-center mb-2"},[g(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[14]||(t[14]=l=>s.organizerForm.user_ids=l),class:"rounded border-gray-300"},null,8,fl),[[oe,s.organizerForm.user_ids]]),e("span",xl,a(o.name)+" ("+a(o.email)+")",1)]))),128)),s.availableUsers.length===0?(i(),n("div",vl," Aucun utilisateur disponible ")):x("",!0)])])]),e("div",yl,[e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingOrganizer?"Mettre à jour":"Créer"),9,bl)])],32)])])):x("",!0),s.showDetailsModal?(i(),n("div",hl,[e("div",wl,[e("div",_l,[t[41]||(t[41]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[40]||(t[40]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrganizer?(i(),n("div",kl,[e("div",Cl,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Ml,a(s.selectedOrganizer.name),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",Sl,a(s.selectedOrganizer.slug),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Al,a(s.selectedOrganizer.contact_email),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",jl,a(s.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Pl,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrganizer.status)])},a(s.getStatusName(s.selectedOrganizer.status)),3)])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut actif",-1)),e("p",Dl,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedOrganizer.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(s.selectedOrganizer.is_active?"Actif":"Inactif"),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Tl,a(s.formatDate(s.selectedOrganizer.created_at)),1)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",Ul,a(s.selectedOrganizer.events_count||0)+" événement(s)",1)])]),s.selectedOrganizer.bio?(i(),n("div",Fl,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Biographie",-1)),e("p",Ol,a(s.selectedOrganizer.bio),1)])):x("",!0),s.selectedOrganizer.users&&s.selectedOrganizer.users.length>0?(i(),n("div",zl,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",El,[(i(!0),n(D,null,T(s.selectedOrganizer.users,o=>(i(),n("span",{key:o.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(o.name),1))),128))])])):x("",!0)])):x("",!0)])])):x("",!0),s.showUserModal?(i(),n("div",Rl,[e("div",Vl,[e("div",Bl,[t[53]||(t[53]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[52]||(t[52]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.managingOrganizer?(i(),n("div",Il,[e("div",null,[e("h4",$l,a(s.managingOrganizer.name),1),t[54]||(t[54]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",Ll,[(i(!0),n(D,null,T(s.availableUsers,o=>(i(),n("div",{key:o.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",ql,a(o.name),1),e("span",Nl,a(o.email),1)]),g(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[19]||(t[19]=l=>s.userManagementForm.user_ids=l),class:"rounded border-gray-300"},null,8,Xl),[[oe,s.userManagementForm.user_ids]])]))),128))]),e("div",Hl,[e("button",{onClick:t[20]||(t[20]=o=>s.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...o)=>s.updateOrganizerUsers&&s.updateOrganizerUsers(...o)),disabled:s.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.updatingUsers?"Mise à jour...":"Mettre à jour"),9,Gl)])])):x("",!0)])])):x("",!0)])}const Kl=te(Po,[["render",Wl],["__scopeId","data-v-21a8738d"]]),C3=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),Jl={name:"EventManagement",components:{ImageUpload:pe},setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(!1),r=f(null),u=f(null),o=f([]),l=f([]),v=f([]),P=f([]),h=f(null),E=G({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),U=G({search:"",status:"",organizer_id:"",category_id:"",page:1}),j=G({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},schedules:[],ticket_types:[],new_venue_name:"",new_venue_city:"",new_venue_address:""}),q=f(!1);let W=null;const k=async()=>{d.value=!0;try{const O=new URLSearchParams;Object.keys(U).forEach(ee=>{U[ee]&&U[ee]!==""&&O.append(ee,U[ee])});const N=await(await fetch(`/api/v1/admin/events?${O}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(N.success){o.value=N.data.events.data,h.value={current_page:N.data.events.current_page,last_page:N.data.events.last_page,from:N.data.events.from,to:N.data.events.to,total:N.data.events.total};const ee=N.data.events.data;E.total_events=h.value.total,E.published_events=ee.filter(H=>H.status==="published").length,E.draft_events=ee.filter(H=>H.status==="draft").length,E.total_tickets_sold=ee.reduce((H,ve)=>H+(ve.tickets_sold||0),0)}}catch(O){console.error("Erreur chargement événements:",O)}finally{d.value=!1}},F=async()=>{try{const Q=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();Q.success&&(l.value=Q.data.organizers.data||Q.data.organizers)}catch(O){console.error("Erreur chargement organisateurs:",O)}},w=async()=>{try{const Q=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();console.log("Categories response:",Q),Q.success&&(v.value=Q.categories||Q.data,console.log("Categories loaded:",v.value))}catch(O){console.error("Erreur chargement catégories:",O)}},m=async()=>{try{const Q=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();Q.success&&(P.value=Q.venues||Q.data)}catch(O){console.error("Erreur chargement lieux:",O),P.value=[]}},p=()=>{clearTimeout(W),W=setTimeout(()=>{U.page=1,k()},500)},S=O=>{O>=1&&O<=h.value.last_page&&(U.page=O,k())},b=()=>{Object.assign(U,{search:"",status:"",organizer_id:"",category_id:"",page:1}),k()},y=()=>{r.value=null,Object.assign(j,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),q.value=!1,c.value=!0},A=async O=>{try{const N=await(await fetch(`/api/v1/admin/events/${O.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(N.success){r.value=N.data.event;let ee={};N.data.event.image_url?ee.url=N.data.event.image_url:N.data.event.image_file&&(ee.filename=N.data.event.image_file),Object.assign(j,{title:N.data.event.title,description:N.data.event.description,organizer_id:N.data.event.organizer_id,category_id:N.data.event.category_id,venue_id:N.data.event.venue_id,status:N.data.event.status,image:ee,schedules:N.data.event.schedules?.map(H=>({starts_at:H.starts_at?H.starts_at.slice(0,16):"",ends_at:H.ends_at?H.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(N.data.event.ticket_types||N.data.event.ticketTypes||[]).map(H=>({name:H.name,price:H.price,capacity:H.capacity||H.available_quantity||H.max_quantity||H.quantity||0,description:H.description||""}))}),(!j.ticket_types||j.ticket_types.length===0)&&(j.ticket_types=[{name:"",price:0,capacity:0,description:""}]),c.value=!0}}catch(Q){console.error("Erreur chargement événement:",Q)}},M=async()=>{t.value=!0;try{const O=r.value?`/api/v1/admin/events/${r.value.id}`:"/api/v1/admin/events",Q=r.value?"PUT":"POST",N={...j};j.image.url?(N.image_url=j.image.url,N.image_file=null):j.image.filename&&(N.image_file=j.image.filename,N.image_url=null),delete N.image;const H=await(await fetch(O,{method:Q,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(N)})).json();H.success?(Swal.fire({icon:"success",title:"Succès",text:r.value?"Événement mis à jour avec succès":"Événement créé avec succès"}),c.value=!1,k()):Swal.fire({icon:"error",title:"Erreur",text:H.message||"Erreur lors de la sauvegarde"})}catch(O){console.error("Erreur sauvegarde événement:",O),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},L=async O=>{try{const N=await(await fetch(`/api/v1/admin/events/${O.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();N.success&&(u.value=N.data.event,s.value=!0)}catch(Q){console.error("Erreur chargement détails événement:",Q)}},_=async O=>{try{const N=await(await fetch(`/api/v1/admin/events/${O.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(N.success){const ee=N.data.event;r.value=null,Object.assign(j,{title:`${ee.title} (Copie)`,description:ee.description||"",organizer_id:ee.organizer_id,category_id:ee.category_id,venue_id:ee.venue_id,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:ee.schedules?.map(H=>({starts_at:H.starts_at?H.starts_at.slice(0,16):"",ends_at:H.ends_at?H.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(ee.ticket_types||ee.ticketTypes||[]).map(H=>({name:H.name,price:H.price,capacity:H.capacity||H.available_quantity||H.max_quantity||H.quantity||0,description:H.description||""}))}),(!j.schedules||j.schedules.length===0)&&(j.schedules=[{starts_at:"",ends_at:""}]),(!j.ticket_types||j.ticket_types.length===0)&&(j.ticket_types=[{name:"",price:0,capacity:0,description:""}]),q.value=!1,c.value=!0}else Swal.fire({icon:"error",title:"Erreur",text:"Impossible de récupérer les détails de l'événement"})}catch(Q){console.error("Erreur duplication événement:",Q),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la duplication"})}},B=()=>{j.schedules.push({starts_at:"",ends_at:""})},Y=O=>{j.schedules.splice(O,1)},ue=()=>{j.ticket_types.push({name:"",price:0,capacity:0,description:""})},I=O=>{j.ticket_types.splice(O,1)},K=O=>new Intl.NumberFormat("fr-FR").format(O),X=O=>new Date(O).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),z=O=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[O]||O,Z=O=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[O]||"bg-gray-100 text-gray-800";xe(()=>j.venue_id,O=>{O==="new"&&(q.value=!0)});const ne=()=>{q.value=!1,j.venue_id="",j.new_venue_name="",j.new_venue_city="",j.new_venue_address=""},ce=O=>{j.image=O};return ae(()=>{k(),F(),w(),m()}),{loading:d,saving:t,showModal:c,showDetailsModal:s,editingEvent:r,selectedEvent:u,events:o,organizers:l,categories:v,venues:P,pagination:h,stats:E,filters:U,eventForm:j,showNewVenue:q,loadEvents:k,loadOrganizers:F,loadCategories:w,loadVenues:m,debouncedSearch:p,changePage:S,resetFilters:b,openCreateModal:y,editEvent:A,saveEvent:M,viewEventDetails:L,duplicateEvent:_,addSchedule:B,removeSchedule:Y,addTicketType:ue,removeTicketType:I,cancelNewVenue:ne,handleImageChange:ce,formatAmount:K,formatDateTime:X,getStatusName:z,getStatusBadgeClass:Z,getTicketCapacity:O=>O.capacity||O.available_quantity||O.max_quantity||O.quantity||0}}},Yl={class:"event-management p-6 bg-gray-50 min-h-screen"},Ql={class:"mb-8"},Zl={class:"flex items-center justify-between"},ea={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ta={class:"bg-white rounded-lg shadow p-6"},sa={class:"flex items-center"},oa={class:"ml-4"},la={class:"text-2xl font-bold text-blue-600"},aa={class:"bg-white rounded-lg shadow p-6"},ra={class:"flex items-center"},na={class:"ml-4"},ia={class:"text-2xl font-bold text-green-600"},da={class:"bg-white rounded-lg shadow p-6"},ua={class:"flex items-center"},ca={class:"ml-4"},ma={class:"text-2xl font-bold text-yellow-600"},ga={class:"bg-white rounded-lg shadow p-6"},pa={class:"flex items-center"},fa={class:"ml-4"},xa={class:"text-2xl font-bold text-purple-600"},va={class:"bg-white rounded-lg shadow p-6 mb-8"},ya={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ba=["value"],ha=["value"],wa={class:"flex items-end"},_a={class:"bg-white rounded-lg shadow"},ka={key:0,class:"p-8 text-center"},Ca={key:1,class:"p-8 text-center text-gray-500"},Ma={key:2,class:"overflow-x-auto"},Sa={class:"w-full"},Aa={class:"divide-y divide-gray-200"},ja={class:"px-6 py-4"},Pa={class:"flex items-center"},Da={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},Ta={class:"ml-4"},Ua={class:"text-sm font-medium text-gray-900"},Fa={class:"text-sm text-gray-500"},Oa={class:"px-6 py-4 text-sm text-gray-900"},za={class:"px-6 py-4 text-sm text-gray-900"},Ea={class:"px-6 py-4 text-sm text-gray-900"},Ra={class:"px-6 py-4 text-sm text-gray-900"},Va={class:"space-y-1"},Ba={class:"text-gray-500"},Ia={class:"px-6 py-4 text-sm"},$a={class:"px-6 py-4 text-sm space-x-2"},La=["onClick"],qa=["onClick"],Na=["onClick"],Xa={key:3,class:"p-6 border-t"},Ha={class:"flex justify-between items-center"},Ga={class:"text-sm text-gray-700"},Wa={class:"flex space-x-2"},Ka=["disabled"],Ja={class:"px-3 py-1 text-sm text-gray-600"},Ya=["disabled"],Qa={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Za={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},er={class:"text-lg font-bold mb-4"},tr={class:"space-y-6"},sr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},or={class:"md:col-span-2"},lr={class:"md:col-span-2"},ar={class:"md:col-span-2"},rr=["value"],nr=["value"],ir={key:0},dr=["value"],ur={key:1,class:"space-y-2"},cr={class:"space-y-3"},mr=["onUpdate:modelValue"],gr=["onUpdate:modelValue"],pr={class:"flex items-end"},fr=["onClick"],xr={class:"space-y-3"},vr=["onUpdate:modelValue"],yr=["onUpdate:modelValue"],br=["onUpdate:modelValue"],hr=["onUpdate:modelValue"],wr={class:"flex items-end"},_r=["onClick"],kr={class:"flex justify-end space-x-3 mt-6"},Cr=["disabled"],Mr={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Sr={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Ar={class:"flex justify-between items-center mb-4"},jr={key:0,class:"space-y-6"},Pr={class:"grid grid-cols-2 gap-6"},Dr={class:"text-sm font-medium text-gray-900"},Tr={class:"text-sm text-gray-900"},Ur={class:"text-sm text-gray-900"},Fr={class:"text-sm text-gray-900"},Or={class:"text-sm text-gray-900"},zr={class:"text-sm text-gray-900"},Er={key:0},Rr={class:"space-y-2"},Vr={class:"text-sm"},Br={key:1},Ir={class:"overflow-x-auto"},$r={class:"w-full text-sm border border-gray-200 rounded-lg"},Lr={class:"bg-white divide-y divide-gray-200"},qr={class:"px-4 py-3 font-medium text-gray-900"},Nr={class:"px-4 py-3 text-gray-900"},Xr={class:"px-4 py-3 text-gray-900"},Hr={class:"px-4 py-3"},Gr={class:"px-4 py-3 text-gray-600"},Wr={key:2};function Kr(d,t,c,s,r,u){const o=ge("ImageUpload");return i(),n("div",Yl,[e("div",Ql,[e("div",Zl,[t[29]||(t[29]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...l)=>s.openCreateModal&&s.openCreateModal(...l)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer Événement ",-1)])])])]),e("div",ea,[e("div",ta,[e("div",sa,[t[31]||(t[31]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",oa,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",la,a(s.stats.total_events||0),1)])])]),e("div",aa,[e("div",ra,[t[33]||(t[33]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",na,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",ia,a(s.stats.published_events||0),1)])])]),e("div",da,[e("div",ua,[t[35]||(t[35]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",ca,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",ma,a(s.stats.draft_events||0),1)])])]),e("div",ga,[e("div",pa,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",fa,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",xa,a(s.stats.total_tickets_sold||0),1)])])])]),e("div",va,[t[45]||(t[45]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ya,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.filters.search=l),onInput:t[2]||(t[2]=(...l)=>s.debouncedSearch&&s.debouncedSearch(...l)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=l=>s.filters.status=l),onChange:t[4]||(t[4]=(...l)=>s.loadEvents&&s.loadEvents(...l)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[V,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.filters.organizer_id=l),onChange:t[6]||(t[6]=(...l)=>s.loadEvents&&s.loadEvents(...l)),class:"w-full border rounded-lg px-3 py-2"},[t[41]||(t[41]=e("option",{value:""},"Tous les organisateurs",-1)),(i(!0),n(D,null,T(s.organizers,l=>(i(),n("option",{key:l.id,value:l.id},a(l.name),9,ba))),128))],544),[[V,s.filters.organizer_id]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>s.filters.category_id=l),onChange:t[8]||(t[8]=(...l)=>s.loadEvents&&s.loadEvents(...l)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Toutes les catégories",-1)),(i(!0),n(D,null,T(s.categories,l=>(i(),n("option",{key:l.id,value:l.id},a(l.name),9,ha))),128))],544),[[V,s.filters.category_id]])]),e("div",wa,[e("button",{onClick:t[9]||(t[9]=(...l)=>s.resetFilters&&s.resetFilters(...l)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",_a,[t[48]||(t[48]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),s.loading?(i(),n("div",ka,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.events.length===0?(i(),n("div",Ca," Aucun événement trouvé ")):(i(),n("div",Ma,[e("table",Sa,[t[47]||(t[47]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Aa,[(i(!0),n(D,null,T(s.events,l=>(i(),n("tr",{key:l.id},[e("td",ja,[e("div",Pa,[e("div",Da,a(l.title.charAt(0).toUpperCase()),1),e("div",Ta,[e("div",Ua,a(l.title),1),e("div",Fa,a(l.slug),1)])])]),e("td",Oa,a(l.organizer?.name||"-"),1),e("td",za,a(l.category?.name||"-"),1),e("td",Ea,a(l.schedules?.[0]?s.formatDateTime(l.schedules[0].starts_at):"Non programmé"),1),e("td",Ra,[e("div",Va,[e("div",null,"Vendus: "+a(l.tickets_sold||0),1),e("div",Ba,"Total: "+a(l.total_capacity||0),1)])]),e("td",Ia,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(l.status)])},a(s.getStatusName(l.status)),3)]),e("td",$a,[e("button",{onClick:v=>s.editEvent(l),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,La),e("button",{onClick:v=>s.viewEventDetails(l),class:"text-green-600 hover:text-green-900"}," Détails ",8,qa),e("button",{onClick:v=>s.duplicateEvent(l),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,Na)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(i(),n("div",Xa,[e("div",Ha,[e("div",Ga," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" événements ",1),e("div",Wa,[e("button",{onClick:t[10]||(t[10]=l=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Ka),e("span",Ja," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=l=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Ya)])])])):x("",!0)]),s.showModal?(i(),n("div",Qa,[e("div",Za,[e("h3",er,a(s.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[26]||(t[26]=le((...l)=>s.saveEvent&&s.saveEvent(...l),["prevent"]))},[e("div",tr,[e("div",sr,[e("div",or,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>s.eventForm.title=l),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.eventForm.title]])]),e("div",lr,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),g(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=l=>s.eventForm.description=l),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.eventForm.description]])]),e("div",ar,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image de l'événement",-1)),me(o,{modelValue:s.eventForm.image,"onUpdate:modelValue":t[14]||(t[14]=l=>s.eventForm.image=l),"entity-type":"events",size:"medium","alt-text":"Image de l'événement",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),g(e("select",{"onUpdate:modelValue":t[15]||(t[15]=l=>s.eventForm.organizer_id=l),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[52]||(t[52]=e("option",{value:""},"Sélectionner un organisateur",-1)),(i(!0),n(D,null,T(s.organizers,l=>(i(),n("option",{key:l.id,value:l.id},a(l.name),9,rr))),128))],512),[[V,s.eventForm.organizer_id]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),g(e("select",{"onUpdate:modelValue":t[16]||(t[16]=l=>s.eventForm.category_id=l),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[54]||(t[54]=e("option",{value:""},"Sélectionner une catégorie",-1)),(i(!0),n(D,null,T(s.categories,l=>(i(),n("option",{key:l.id,value:l.id},a(l.name),9,nr))),128))],512),[[V,s.eventForm.category_id]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),s.showNewVenue?x("",!0):(i(),n("div",ir,[g(e("select",{"onUpdate:modelValue":t[17]||(t[17]=l=>s.eventForm.venue_id=l),class:"w-full border rounded-lg px-3 py-2"},[t[56]||(t[56]=e("option",{value:""},"Sélectionner un lieu",-1)),(i(!0),n(D,null,T(s.venues,l=>(i(),n("option",{key:l.id,value:l.id},a(l.name)+" - "+a(l.city),9,dr))),128)),t[57]||(t[57]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],512),[[V,s.eventForm.venue_id]])])),s.showNewVenue||s.eventForm.venue_id==="new"?(i(),n("div",ur,[g(e("input",{"onUpdate:modelValue":t[18]||(t[18]=l=>s.eventForm.new_venue_name=l),type:"text",placeholder:"Nom du lieu",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[C,s.eventForm.new_venue_name]]),g(e("input",{"onUpdate:modelValue":t[19]||(t[19]=l=>s.eventForm.new_venue_city=l),type:"text",placeholder:"Ville",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[C,s.eventForm.new_venue_city]]),g(e("input",{"onUpdate:modelValue":t[20]||(t[20]=l=>s.eventForm.new_venue_address=l),type:"text",placeholder:"Adresse",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.eventForm.new_venue_address]]),e("button",{type:"button",onClick:t[21]||(t[21]=(...l)=>s.cancelNewVenue&&s.cancelNewVenue(...l)),class:"text-sm text-blue-600 hover:text-blue-800"}," Utiliser un lieu existant ")])):x("",!0)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),g(e("select",{"onUpdate:modelValue":t[22]||(t[22]=l=>s.eventForm.status=l),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[59]||(t[59]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[V,s.eventForm.status]])])]),e("div",null,[t[63]||(t[63]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",cr,[(i(!0),n(D,null,T(s.eventForm.schedules,(l,v)=>(i(),n("div",{key:v,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),g(e("input",{"onUpdate:modelValue":P=>l.starts_at=P,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,mr),[[C,l.starts_at]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),g(e("input",{"onUpdate:modelValue":P=>l.ends_at=P,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,gr),[[C,l.ends_at]])]),e("div",pr,[e("button",{type:"button",onClick:P=>s.removeSchedule(v),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,fr)])]))),128)),e("button",{type:"button",onClick:t[23]||(t[23]=(...l)=>s.addSchedule&&s.addSchedule(...l)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[68]||(t[68]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",xr,[(i(!0),n(D,null,T(s.eventForm.ticket_types,(l,v)=>(i(),n("div",{key:v,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),g(e("input",{"onUpdate:modelValue":P=>l.name=P,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,vr),[[C,l.name]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),g(e("input",{"onUpdate:modelValue":P=>l.price=P,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,yr),[[C,l.price,void 0,{number:!0}]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),g(e("input",{"onUpdate:modelValue":P=>l.capacity=P,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,br),[[C,l.capacity,void 0,{number:!0}]])]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),g(e("input",{"onUpdate:modelValue":P=>l.description=P,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,hr),[[C,l.description]])]),e("div",wr,[e("button",{type:"button",onClick:P=>s.removeTicketType(v),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,_r)])]))),128)),e("button",{type:"button",onClick:t[24]||(t[24]=(...l)=>s.addTicketType&&s.addTicketType(...l)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",kr,[e("button",{type:"button",onClick:t[25]||(t[25]=l=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingEvent?"Mettre à jour":"Créer"),9,Cr)])],32)])])):x("",!0),s.showDetailsModal?(i(),n("div",Mr,[e("div",Sr,[e("div",Ar,[t[70]||(t[70]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[27]||(t[27]=l=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[69]||(t[69]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedEvent?(i(),n("div",jr,[e("div",Pr,[e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Dr,a(s.selectedEvent.title),1)]),e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedEvent.status)])},a(s.getStatusName(s.selectedEvent.status)),3)]),e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Tr,a(s.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",Ur,a(s.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Fr,a(s.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Or,a(s.formatDateTime(s.selectedEvent.created_at)),1)])]),e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",zr,a(s.selectedEvent.description),1)]),s.selectedEvent.schedules&&s.selectedEvent.schedules.length>0?(i(),n("div",Er,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",Rr,[(i(!0),n(D,null,T(s.selectedEvent.schedules,l=>(i(),n("div",{key:l.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",Vr,"Du "+a(s.formatDateTime(l.starts_at))+" au "+a(s.formatDateTime(l.ends_at)),1)]))),128))])])):x("",!0),(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types)&&(s.selectedEvent.ticketTypes?.length>0||s.selectedEvent.ticket_types?.length>0)?(i(),n("div",Br,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",Ir,[e("table",$r,[t[79]||(t[79]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prix"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Capacité"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description")])],-1)),e("tbody",Lr,[(i(!0),n(D,null,T(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types,l=>(i(),n("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",qr,a(l.name),1),e("td",Nr,a(s.formatAmount(l.price))+" XAF",1),e("td",Xr,a(s.getTicketCapacity(l)),1),e("td",Hr,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",l.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(l.status==="active"?"Actif":"Inactif"),3)]),e("td",Gr,a(l.description||"-"),1)]))),128))])])])])):(i(),n("div",Wr,[...t[81]||(t[81]=[e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1),e("div",{class:"bg-gray-50 p-4 rounded-lg text-center"},[e("p",{class:"text-gray-500"},"Aucun type de billet défini pour cet événement")],-1)])]))])):x("",!0)])])):x("",!0)])}const Jr=te(Jl,[["render",Kr],["__scopeId","data-v-07caf94a"]]),M3=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Yr={name:"OrderManagement",setup(){const d=f(!1),t=f(!1),c=f(null),s=f([]),r=f([]),u=f([]),o=f(null),l=G({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),v=G({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let P=null;const h=async()=>{d.value=!0;try{const M=new URLSearchParams;Object.keys(v).forEach(B=>{v[B]&&v[B]!==""&&M.append(B,v[B])});const _=await(await fetch(`/api/v1/admin/orders?${M}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(_.success){s.value=_.data.orders.data,o.value={current_page:_.data.orders.current_page,last_page:_.data.orders.last_page,from:_.data.orders.from,to:_.data.orders.to,total:_.data.orders.total};const B=_.data.orders.data;l.total_orders=o.value.total,l.confirmed_orders=B.filter(Y=>Y.status==="confirmed").length,l.pending_orders=B.filter(Y=>Y.status==="pending").length,l.total_revenue=B.filter(Y=>Y.status==="confirmed").reduce((Y,ue)=>Y+ue.total_amount,0)}}catch(M){console.error("Erreur chargement achats:",M)}finally{d.value=!1}},E=async()=>{try{const L=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(r.value=L.data.organizers.data||L.data.organizers)}catch(M){console.error("Erreur chargement organisateurs:",M)}},U=async()=>{try{const L=await(await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();L.success&&(u.value=L.data.events.data||L.data.events)}catch(M){console.error("Erreur chargement événements:",M)}},j=()=>{clearTimeout(P),P=setTimeout(()=>{v.page=1,h()},500)},q=M=>{M>=1&&M<=o.value.last_page&&(v.page=M,h())},W=()=>{Object.assign(v,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),h()},k=async M=>{try{const _=await(await fetch(`/api/v1/admin/orders/${M.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();_.success&&(c.value=_.data.order,t.value=!0)}catch(L){console.error("Erreur chargement détails commande:",L)}},F=async(M,L)=>{if(confirm(`Êtes-vous sûr de vouloir ${L==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const B=await(await fetch(`/api/v1/admin/orders/${M.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:L})})).json();B.success?(alert(`Commande ${L==="confirmed"?"confirmée":"annulée"} avec succès`),h(),t.value&&(c.value.status=L)):alert(B.message||"Erreur lors de la mise à jour")}catch(_){console.error("Erreur mise à jour statut commande:",_),alert("Erreur technique")}},w=async()=>{try{const M=new URLSearchParams;Object.keys(v).forEach(_=>{v[_]&&v[_]!==""&&_!=="page"&&M.append(_,v[_])});const L=await fetch(`/api/v1/admin/orders/export?${M}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(L.ok){const _=await L.blob(),B=window.URL.createObjectURL(_),Y=document.createElement("a");Y.href=B,Y.download=`achats-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Y),Y.click(),window.URL.revokeObjectURL(B),document.body.removeChild(Y)}}catch(M){console.error("Erreur export:",M),alert("Erreur lors de l'export des données")}},m=M=>new Intl.NumberFormat("fr-FR").format(M),p=M=>new Date(M).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=M=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[M]||M,b=M=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[M]||"bg-gray-100 text-gray-800",y=M=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[M]||M,A=M=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[M]||"bg-gray-100 text-gray-800";return ae(()=>{h(),E(),U()}),{loading:d,showDetailsModal:t,selectedOrder:c,orders:s,organizers:r,events:u,pagination:o,stats:l,filters:v,loadOrders:h,loadOrganizers:E,loadEvents:U,debouncedSearch:j,changePage:q,resetFilters:W,viewOrderDetails:k,updateOrderStatus:F,exportOrders:w,formatAmount:m,formatDateTime:p,getStatusName:S,getStatusBadgeClass:b,getTicketStatusName:y,getTicketStatusClass:A}}},Qr={class:"order-management p-6 bg-gray-50 min-h-screen"},Zr={class:"mb-8"},en={class:"flex items-center justify-between"},tn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},sn={class:"bg-white rounded-lg shadow p-6"},on={class:"flex items-center"},ln={class:"ml-4"},an={class:"text-2xl font-bold text-blue-600"},rn={class:"bg-white rounded-lg shadow p-6"},nn={class:"flex items-center"},dn={class:"ml-4"},un={class:"text-2xl font-bold text-green-600"},cn={class:"bg-white rounded-lg shadow p-6"},mn={class:"flex items-center"},gn={class:"ml-4"},pn={class:"text-2xl font-bold text-yellow-600"},fn={class:"bg-white rounded-lg shadow p-6"},xn={class:"flex items-center"},vn={class:"ml-4"},yn={class:"text-2xl font-bold text-purple-600"},bn={class:"bg-white rounded-lg shadow p-6 mb-8"},hn={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},wn=["value"],_n=["value"],kn={class:"flex justify-between items-center mt-4"},Cn={class:"text-sm text-gray-600"},Mn={class:"bg-white rounded-lg shadow"},Sn={key:0,class:"p-8 text-center"},An={key:1,class:"p-8 text-center text-gray-500"},jn={key:2,class:"overflow-x-auto"},Pn={class:"w-full"},Dn={class:"divide-y divide-gray-200"},Tn={class:"px-6 py-4 text-sm font-mono text-blue-600"},Un=["onClick"],Fn={class:"px-6 py-4 text-sm text-gray-900"},On={class:"font-medium"},zn={class:"text-gray-500"},En={class:"px-6 py-4 text-sm text-gray-900"},Rn={class:"font-medium"},Vn={class:"text-gray-500"},Bn={class:"px-6 py-4 text-sm text-gray-900"},In={class:"space-y-1"},$n={class:"px-6 py-4 text-sm font-medium text-gray-900"},Ln={class:"px-6 py-4 text-sm"},qn={class:"px-6 py-4 text-sm text-gray-500"},Nn={class:"px-6 py-4 text-sm space-x-2"},Xn=["onClick"],Hn=["onClick"],Gn=["onClick"],Wn={key:3,class:"p-6 border-t"},Kn={class:"flex justify-between items-center"},Jn={class:"text-sm text-gray-700"},Yn={class:"flex space-x-2"},Qn=["disabled"],Zn={class:"px-3 py-1 text-sm text-gray-600"},ei=["disabled"],ti={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},si={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},oi={class:"flex justify-between items-center mb-4"},li={key:0,class:"space-y-6"},ai={class:"grid grid-cols-2 gap-6"},ri={class:"space-y-4"},ni={class:"space-y-2"},ii={class:"text-sm font-mono text-gray-900"},di={class:"text-sm text-gray-900"},ui={key:0},ci={class:"text-sm text-gray-900"},mi={class:"space-y-4"},gi={class:"space-y-2"},pi={class:"text-sm text-gray-900"},fi={class:"text-sm text-gray-900"},xi={key:0},vi={class:"text-sm text-gray-900"},yi={key:0,class:"border-t pt-6"},bi={class:"grid grid-cols-2 gap-4"},hi={class:"text-sm text-gray-900"},wi={class:"text-sm text-gray-900"},_i={class:"text-sm text-gray-900"},ki={class:"text-sm text-gray-900"},Ci={class:"border-t pt-6"},Mi={class:"overflow-x-auto"},Si={class:"w-full text-sm"},Ai={class:"divide-y divide-gray-200"},ji={class:"px-4 py-2"},Pi={class:"px-4 py-2"},Di={class:"px-4 py-2"},Ti={class:"px-4 py-2 font-medium"},Ui={class:"bg-gray-50"},Fi={class:"px-4 py-2 font-bold"},Oi={key:1,class:"border-t pt-6"},zi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Ei={class:"flex justify-between items-start mb-2"},Ri={class:"font-mono text-blue-600"},Vi={class:"text-gray-600"},Bi={key:0},Ii={class:"border-t pt-6 flex justify-end space-x-3"};function $i(d,t,c,s,r,u){return i(),n("div",Qr,[e("div",Zr,[e("div",en,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Achats"),e("p",{class:"text-gray-600"},"Gérer et suivre tous les achats de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.exportOrders&&s.exportOrders(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),se(" Exporter ",-1)])])])]),e("div",tn,[e("div",sn,[e("div",on,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",ln,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Achats",-1)),e("p",an,a(s.stats.total_orders||0),1)])])]),e("div",rn,[e("div",nn,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",dn,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",un,a(s.stats.confirmed_orders||0),1)])])]),e("div",cn,[e("div",mn,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",gn,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",pn,a(s.stats.pending_orders||0),1)])])]),e("div",fn,[e("div",xn,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",vn,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",yn,a(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])])]),e("div",bn,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",hn,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[re('<option value="" data-v-e176f2ab>Tous les statuts</option><option value="pending" data-v-e176f2ab>En attente</option><option value="confirmed" data-v-e176f2ab>Confirmée</option><option value="cancelled" data-v-e176f2ab>Annulée</option><option value="refunded" data-v-e176f2ab>Remboursée</option>',5)])],544),[[V,s.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(i(!0),n(D,null,T(s.organizers,o=>(i(),n("option",{key:o.id,value:o.id},a(o.name),9,wn))),128))],544),[[V,s.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.event_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(i(!0),n(D,null,T(s.events,o=>(i(),n("option",{key:o.id,value:o.id},a(o.title),9,_n))),128))],544),[[V,s.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.filters.date_from=o),onChange:t[10]||(t[10]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filters.date_to=o),onChange:t[12]||(t[12]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.date_to]])])]),e("div",kn,[e("button",{onClick:t[13]||(t[13]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Cn,a(s.pagination?`${s.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",Mn,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Achats")],-1)),s.loading?(i(),n("div",Sn,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.orders.length===0?(i(),n("div",An," Aucun achat trouvé ")):(i(),n("div",jn,[e("table",Pn,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Dn,[(i(!0),n(D,null,T(s.orders,o=>(i(),n("tr",{key:o.id},[e("td",Tn,[e("button",{onClick:l=>s.viewOrderDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,Un)]),e("td",Fn,[e("div",null,[e("div",On,a(o.customer_name),1),e("div",zn,a(o.customer_email),1)])]),e("td",En,[e("div",null,[e("div",Rn,a(o.event?.title||"-"),1),e("div",Vn,a(o.event?.organizer?.name||"-"),1)])]),e("td",Bn,[e("div",In,[(i(!0),n(D,null,T(o.items,l=>(i(),n("div",{key:l.id,class:"text-xs"},a(l.quantity)+"x "+a(l.ticket_type_name),1))),128))])]),e("td",$n,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",Ln,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",qn,a(s.formatDateTime(o.created_at)),1),e("td",Nn,[e("button",{onClick:l=>s.viewOrderDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Xn),o.status==="pending"?(i(),n("button",{key:0,onClick:l=>s.updateOrderStatus(o,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,Hn)):x("",!0),["pending","confirmed"].includes(o.status)?(i(),n("button",{key:1,onClick:l=>s.updateOrderStatus(o,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,Gn)):x("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(i(),n("div",Wn,[e("div",Kn,[e("div",Jn," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" achats ",1),e("div",Yn,[e("button",{onClick:t[14]||(t[14]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Qn),e("span",Zn," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,ei)])])])):x("",!0)]),s.showDetailsModal?(i(),n("div",ti,[e("div",si,[e("div",oi,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrder?(i(),n("div",li,[e("div",ai,[e("div",ri,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",ni,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",ii,"#"+a(s.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrder.status)])},a(s.getStatusName(s.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",di,a(s.formatDateTime(s.selectedOrder.created_at)),1)]),s.selectedOrder.confirmed_at?(i(),n("div",ui,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",ci,a(s.formatDateTime(s.selectedOrder.confirmed_at)),1)])):x("",!0)])])]),e("div",mi,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",gi,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",pi,a(s.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",fi,a(s.selectedOrder.customer_email),1)]),s.selectedOrder.customer_phone?(i(),n("div",xi,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",vi,a(s.selectedOrder.customer_phone),1)])):x("",!0)])])])]),s.selectedOrder.event?(i(),n("div",yi,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",bi,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",hi,a(s.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",wi,a(s.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",_i,a(s.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",ki,a(s.selectedOrder.event.schedules?.[0]?s.formatDateTime(s.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):x("",!0),e("div",Ci,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",Mi,[e("table",Si,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",Ai,[(i(!0),n(D,null,T(s.selectedOrder.items,o=>(i(),n("tr",{key:o.id},[e("td",ji,a(o.ticket_type_name),1),e("td",Pi,a(s.formatAmount(o.unit_price))+" XAF",1),e("td",Di,a(o.quantity),1),e("td",Ti,a(s.formatAmount(o.total_price))+" XAF",1)]))),128))]),e("tfoot",Ui,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",Fi,a(s.formatAmount(s.selectedOrder.total_amount))+" XAF",1)])])])])]),s.selectedOrder.tickets&&s.selectedOrder.tickets.length>0?(i(),n("div",Oi,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",zi,[(i(!0),n(D,null,T(s.selectedOrder.tickets,o=>(i(),n("div",{key:o.id,class:"border rounded-lg p-3 text-sm"},[e("div",Ei,[e("span",Ri,a(o.code),1),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getTicketStatusClass(o.status)])},a(s.getTicketStatusName(o.status)),3)]),e("div",Vi,[e("p",null,a(o.ticketType?.name),1),o.used_at?(i(),n("p",Bi,"Utilisé: "+a(s.formatDateTime(o.used_at)),1)):x("",!0)])]))),128))])])):x("",!0),e("div",Ii,[s.selectedOrder.status==="pending"?(i(),n("button",{key:0,onClick:t[17]||(t[17]=o=>s.updateOrderStatus(s.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):x("",!0),["pending","confirmed"].includes(s.selectedOrder.status)?(i(),n("button",{key:1,onClick:t[18]||(t[18]=o=>s.updateOrderStatus(s.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):x("",!0),e("button",{onClick:t[19]||(t[19]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):x("",!0)])])):x("",!0)])}const Li=te(Yr,[["render",$i],["__scopeId","data-v-e176f2ab"]]),S3=Object.freeze(Object.defineProperty({__proto__:null,default:Li},Symbol.toStringTag,{value:"Module"})),qi={name:"PaymentTracking",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(null),r=f([]),u=f([]),o=f(null),l=G({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),v=f([]),P=f([]),h=G({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let E=null;const U=de(()=>P.value.length===0?1:Math.max(...P.value.map(I=>I.volume))),j=async()=>{d.value=!0;try{const I=new URLSearchParams;Object.keys(h).forEach(z=>{h[z]&&h[z]!==""&&I.append(z,h[z])});const X=await(await fetch(`/api/v1/admin/payments?${I}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();X.success&&(r.value=X.data.payments.data,o.value={current_page:X.data.payments.current_page,last_page:X.data.payments.last_page,from:X.data.payments.from,to:X.data.payments.to,total:X.data.payments.total},Object.assign(l,X.data.stats),v.value=X.data.gateway_stats||[],P.value=X.data.daily_stats||[])}catch(I){console.error("Erreur chargement paiements:",I)}finally{d.value=!1}},q=async()=>{try{const K=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success&&(u.value=K.data.organizers.data||K.data.organizers)}catch(I){console.error("Erreur chargement organisateurs:",I)}},W=()=>{clearTimeout(E),E=setTimeout(()=>{h.page=1,j()},500)},k=I=>{I>=1&&I<=o.value.last_page&&(h.page=I,j())},F=()=>{Object.assign(h,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),j()},w=()=>{j()},m=async I=>{try{const X=await(await fetch(`/api/v1/admin/payments/${I.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();X.success&&(s.value=X.data.payment,c.value=!0)}catch(K){console.error("Erreur chargement détails paiement:",K)}},p=async I=>{try{const X=await(await fetch(`/api/v1/admin/payments/${I.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();X.success?(alert(`Statut mis à jour: ${Y(X.data.status)}`),j(),c.value&&(s.value.status=X.data.status)):alert(X.message||"Erreur lors de la vérification")}catch(K){console.error("Erreur vérification statut:",K),alert("Erreur technique")}},S=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const K=await(await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success?(alert(`Vérification terminée. ${K.data.updated_count} paiement(s) mis à jour.`),j()):alert(K.message||"Erreur lors de la vérification")}catch(I){console.error("Erreur vérification paiements en attente:",I),alert("Erreur technique")}finally{t.value=!1}}},b=async I=>{const K=prompt("Raison du remboursement:");if(K&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${A(I.amount)} XAF ?`))try{const z=await(await fetch(`/api/v1/admin/payments/${I.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:K})})).json();z.success?(alert("Remboursement initié avec succès"),j()):alert(z.message||"Erreur lors du remboursement")}catch(X){console.error("Erreur remboursement:",X),alert("Erreur technique")}},y=async()=>{try{const I=new URLSearchParams;Object.keys(h).forEach(X=>{h[X]&&h[X]!==""&&X!=="page"&&I.append(X,h[X])});const K=await fetch(`/api/v1/admin/payments/export?${I}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(K.ok){const X=await K.blob(),z=window.URL.createObjectURL(X),Z=document.createElement("a");Z.href=z,Z.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Z),Z.click(),window.URL.revokeObjectURL(z),document.body.removeChild(Z)}}catch(I){console.error("Erreur export:",I),alert("Erreur lors de l'export des données")}},A=I=>new Intl.NumberFormat("fr-FR").format(I),M=I=>new Date(I).toLocaleDateString("fr-FR"),L=I=>new Date(I).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=I=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[I]||I,B=I=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[I]||"bg-gray-100 text-gray-800",Y=I=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[I]||I,ue=I=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[I]||"bg-gray-100 text-gray-800";return ae(()=>{j(),q()}),{loading:d,checkingPayments:t,showDetailsModal:c,selectedPayment:s,payments:r,organizers:u,pagination:o,stats:l,gatewayStats:v,dailyStats:P,filters:h,maxDailyVolume:U,loadPayments:j,loadOrganizers:q,debouncedSearch:W,changePage:k,resetFilters:F,refreshPayments:w,viewPaymentDetails:m,checkPaymentStatus:p,checkPendingPayments:S,processRefund:b,exportPayments:y,formatAmount:A,formatDate:M,formatDateTime:L,getGatewayName:_,getGatewayBadgeClass:B,getStatusName:Y,getStatusBadgeClass:ue}}},Ni={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},Xi={class:"mb-8"},Hi={class:"flex items-center justify-between"},Gi={class:"flex space-x-3"},Wi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},Ki={class:"bg-white rounded-lg shadow p-6"},Ji={class:"flex items-center"},Yi={class:"ml-4"},Qi={class:"text-2xl font-bold text-blue-600"},Zi={class:"bg-white rounded-lg shadow p-6"},ed={class:"flex items-center"},td={class:"ml-4"},sd={class:"text-2xl font-bold text-green-600"},od={class:"bg-white rounded-lg shadow p-6"},ld={class:"flex items-center"},ad={class:"ml-4"},rd={class:"text-2xl font-bold text-yellow-600"},nd={class:"bg-white rounded-lg shadow p-6"},id={class:"flex items-center"},dd={class:"ml-4"},ud={class:"text-2xl font-bold text-red-600"},cd={class:"bg-white rounded-lg shadow p-6"},md={class:"flex items-center"},gd={class:"ml-4"},pd={class:"text-2xl font-bold text-purple-600"},fd={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},xd={class:"bg-white rounded-lg shadow p-6"},vd={key:0,class:"text-center text-gray-500 py-8"},yd={key:1,class:"space-y-4"},bd={class:"flex items-center"},hd={class:"font-medium text-gray-900"},wd={class:"text-sm text-gray-600"},_d={class:"text-right"},kd={class:"font-bold text-gray-900"},Cd={class:"text-sm text-gray-600"},Md={class:"bg-white rounded-lg shadow p-6"},Sd={key:0,class:"text-center text-gray-500 py-8"},Ad={key:1,class:"space-y-3"},jd={class:"font-medium text-gray-900"},Pd={class:"text-sm text-gray-600"},Dd={class:"text-right"},Td={class:"font-bold text-gray-900"},Ud={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},Fd={class:"bg-white rounded-lg shadow p-6 mb-8"},Od={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},zd=["value"],Ed={class:"flex justify-between items-center mt-4"},Rd={class:"flex space-x-3"},Vd=["disabled"],Bd={class:"bg-white rounded-lg shadow"},Id={class:"p-6 border-b"},$d={class:"flex justify-between items-center"},Ld={class:"text-sm text-gray-600"},qd={key:0,class:"p-8 text-center"},Nd={key:1,class:"p-8 text-center text-gray-500"},Xd={key:2,class:"overflow-x-auto"},Hd={class:"w-full"},Gd={class:"divide-y divide-gray-200"},Wd={class:"px-6 py-4 text-sm font-mono text-blue-600"},Kd=["onClick"],Jd={class:"px-6 py-4 text-sm text-gray-900"},Yd={class:"font-medium"},Qd={class:"text-gray-500"},Zd={class:"px-6 py-4 text-sm text-gray-900"},eu={class:"font-medium"},tu={class:"text-gray-500"},su={class:"px-6 py-4 text-sm font-medium text-gray-900"},ou={class:"px-6 py-4 text-sm"},lu={class:"px-6 py-4 text-sm"},au={class:"px-6 py-4 text-sm text-gray-500"},ru={class:"px-6 py-4 text-sm space-x-2"},nu=["onClick"],iu=["onClick"],du=["onClick"],uu={key:3,class:"p-6 border-t"},cu={class:"flex justify-between items-center"},mu={class:"text-sm text-gray-700"},gu={class:"flex space-x-2"},pu=["disabled"],fu={class:"px-3 py-1 text-sm text-gray-600"},xu=["disabled"],vu={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},yu={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},bu={class:"flex justify-between items-center mb-4"},hu={key:0,class:"space-y-6"},wu={class:"grid grid-cols-2 gap-6"},_u={class:"space-y-4"},ku={class:"space-y-2"},Cu={class:"text-sm font-mono text-gray-900"},Mu={class:"text-sm font-bold text-gray-900"},Su={class:"space-y-4"},Au={class:"space-y-2"},ju={class:"text-sm text-gray-900"},Pu={key:0},Du={class:"text-sm text-gray-900"},Tu={key:1},Uu={class:"text-sm font-mono text-gray-900"},Fu={key:0,class:"border-t pt-6"},Ou={class:"grid grid-cols-2 gap-4"},zu={class:"text-sm font-mono text-gray-900"},Eu={class:"text-sm text-gray-900"},Ru={class:"text-sm text-gray-900"},Vu={class:"text-sm text-gray-900"},Bu={key:1,class:"border-t pt-6"},Iu={class:"bg-gray-50 p-4 rounded-lg"},$u={class:"text-xs text-gray-700 whitespace-pre-wrap"},Lu={class:"border-t pt-6 flex justify-end space-x-3"};function qu(d,t,c,s,r,u){return i(),n("div",Ni,[e("div",Xi,[e("div",Hi,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",Gi,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.refreshPayments&&s.refreshPayments(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),se(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.exportPayments&&s.exportPayments(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),se(" Exporter ",-1)])])])])]),e("div",Wi,[e("div",Ki,[e("div",Ji,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Yi,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",Qi,a(s.stats.total_payments||0),1)])])]),e("div",Zi,[e("div",ed,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",td,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",sd,a(s.stats.successful_payments||0),1)])])]),e("div",od,[e("div",ld,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ad,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",rd,a(s.stats.pending_payments||0),1)])])]),e("div",nd,[e("div",id,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",dd,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",ud,a(s.stats.failed_payments||0),1)])])]),e("div",cd,[e("div",md,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",gd,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",pd,a(s.formatAmount(s.stats.total_volume||0))+" XAF",1)])])])]),e("div",fd,[e("div",xd,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),s.gatewayStats.length===0?(i(),n("div",vd," Aucune donnée disponible ")):(i(),n("div",yd,[(i(!0),n(D,null,T(s.gatewayStats,o=>(i(),n("div",{key:o.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",bd,[e("div",{class:$(["p-2 rounded-lg mr-3",s.getGatewayBadgeClass(o.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",hd,a(s.getGatewayName(o.gateway)),1),e("p",wd,a(o.count)+" paiement(s)",1)])]),e("div",_d,[e("p",kd,a(s.formatAmount(o.volume))+" XAF",1),e("p",Cd,a(Math.round(o.count/s.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",Md,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),s.dailyStats.length===0?(i(),n("div",Sd," Aucune donnée disponible ")):(i(),n("div",Ad,[(i(!0),n(D,null,T(s.dailyStats,o=>(i(),n("div",{key:o.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",jd,a(s.formatDate(o.date)),1),e("p",Pd,a(o.count)+" paiement(s)",1)]),e("div",Dd,[e("p",Td,a(s.formatAmount(o.volume))+" XAF",1),e("div",Ud,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ie(`width: ${Math.min(o.volume/s.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",Fd,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Od,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.search=o),onInput:t[3]||(t[3]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),onChange:t[5]||(t[5]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[re('<option value="" data-v-fc273c00>Tous les statuts</option><option value="success" data-v-fc273c00>Réussi</option><option value="pending" data-v-fc273c00>En attente</option><option value="failed" data-v-fc273c00>Échoué</option><option value="cancelled" data-v-fc273c00>Annulé</option>',5)])],544),[[V,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.filters.gateway=o),onChange:t[7]||(t[7]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[V,s.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.filters.organizer_id=o),onChange:t[9]||(t[9]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(i(!0),n(D,null,T(s.organizers,o=>(i(),n("option",{key:o.id,value:o.id},a(o.name),9,zd))),128))],544),[[V,s.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.filters.date_from=o),onChange:t[11]||(t[11]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.filters.date_to=o),onChange:t[13]||(t[13]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,s.filters.date_to]])])]),e("div",Ed,[e("button",{onClick:t[14]||(t[14]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Rd,[e("button",{onClick:t[15]||(t[15]=(...o)=>s.checkPendingPayments&&s.checkPendingPayments(...o)),disabled:s.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},a(s.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,Vd)])])]),e("div",Bd,[e("div",Id,[e("div",$d,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",Ld,a(s.pagination?`${s.pagination.total} paiement(s) trouvé(s)`:""),1)])]),s.loading?(i(),n("div",qd,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payments.length===0?(i(),n("div",Nd," Aucun paiement trouvé ")):(i(),n("div",Xd,[e("table",Hd,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Gd,[(i(!0),n(D,null,T(s.payments,o=>(i(),n("tr",{key:o.id},[e("td",Wd,[e("button",{onClick:l=>s.viewPaymentDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,Kd)]),e("td",Jd,[e("div",null,[e("div",Yd,"#"+a(o.order?.reference||"-"),1),e("div",Qd,a(o.order?.event?.title||"-"),1)])]),e("td",Zd,[e("div",null,[e("div",eu,a(o.order?.customer_name||"-"),1),e("div",tu,a(o.order?.customer_email||"-"),1)])]),e("td",su,a(s.formatAmount(o.amount))+" XAF",1),e("td",ou,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",lu,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",au,a(s.formatDateTime(o.created_at)),1),e("td",ru,[e("button",{onClick:l=>s.viewPaymentDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,nu),o.status==="pending"?(i(),n("button",{key:0,onClick:l=>s.checkPaymentStatus(o),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,iu)):x("",!0),o.status==="success"?(i(),n("button",{key:1,onClick:l=>s.processRefund(o),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,du)):x("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(i(),n("div",uu,[e("div",cu,[e("div",mu," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" paiements ",1),e("div",gu,[e("button",{onClick:t[16]||(t[16]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,pu),e("span",fu," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,xu)])])])):x("",!0)]),s.showDetailsModal?(i(),n("div",vu,[e("div",yu,[e("div",bu,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedPayment?(i(),n("div",hu,[e("div",wu,[e("div",_u,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",ku,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Cu,"#"+a(s.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",Mu,a(s.formatAmount(s.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(s.selectedPayment.gateway)])},a(s.getGatewayName(s.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedPayment.status)])},a(s.getStatusName(s.selectedPayment.status)),3)])])])]),e("div",Su,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",Au,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",ju,a(s.formatDateTime(s.selectedPayment.created_at)),1)]),s.selectedPayment.processed_at?(i(),n("div",Pu,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",Du,a(s.formatDateTime(s.selectedPayment.processed_at)),1)])):x("",!0),s.selectedPayment.gateway_transaction_id?(i(),n("div",Tu,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",Uu,a(s.selectedPayment.gateway_transaction_id),1)])):x("",!0)])])])]),s.selectedPayment.order?(i(),n("div",Fu,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",Ou,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",zu,a(s.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",Eu,a(s.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",Ru,a(s.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Vu,a(s.selectedPayment.order.customer_email),1)])])])):x("",!0),s.selectedPayment.gateway_response?(i(),n("div",Bu,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",Iu,[e("pre",$u,a(JSON.stringify(s.selectedPayment.gateway_response,null,2)),1)])])):x("",!0),e("div",Lu,[s.selectedPayment.status==="pending"?(i(),n("button",{key:0,onClick:t[19]||(t[19]=o=>s.checkPaymentStatus(s.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):x("",!0),s.selectedPayment.status==="success"?(i(),n("button",{key:1,onClick:t[20]||(t[20]=o=>s.processRefund(s.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):x("",!0),e("button",{onClick:t[21]||(t[21]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):x("",!0)])])):x("",!0)])}const Nu=te(qi,[["render",qu],["__scopeId","data-v-fc273c00"]]),A3=Object.freeze(Object.defineProperty({__proto__:null,default:Nu},Symbol.toStringTag,{value:"Module"})),Xu={name:"PayoutDashboard",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(!1),r=f(!1),u=f([]),o=f([]),l=f([]),v=G({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),P=G({status:"",gateway:"",is_automatic:""}),h=G({organizer_id:"",gateway:"",amount:"",phone_number:""}),E=async()=>{d.value=!0;try{const _=new URLSearchParams;P.status&&_.append("status",P.status),P.gateway&&_.append("gateway",P.gateway),P.is_automatic&&_.append("is_automatic",P.is_automatic);const Y=await(await fetch(`/api/v1/admin/payouts?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();Y.success&&(u.value=Y.data.payouts)}catch(_){console.error("Erreur chargement payouts:",_)}finally{d.value=!1}},U=async()=>{try{const B=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();B.success&&Object.assign(v,B.data.stats)}catch(_){console.error("Erreur chargement stats:",_)}},j=async()=>{c.value=!0;try{const B=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();B.success&&(l.value=B.data.balances)}catch(_){console.error("Erreur chargement solde SHAP:",_)}finally{c.value=!1}},q=async()=>{t.value=!0;try{const B=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();B.success&&(alert(`Vérification terminée: ${B.data.results.length} payouts vérifiés`),E())}catch(_){console.error("Erreur vérification batch:",_)}finally{t.value=!1}},W=async _=>{_.checking=!0;try{const Y=await(await fetch(`/api/v1/admin/payouts/${_.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();Y.success&&(alert(`Statut: ${Y.data.current_status}`),E())}catch(B){console.error("Erreur vérification payout:",B)}finally{_.checking=!1}},k=()=>{s.value=!0,F()},F=async()=>{try{const B=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();B.success&&(o.value=B.data.organizers)}catch(_){console.error("Erreur chargement organisateurs:",_)}},w=async()=>{r.value=!0;try{const B=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(h)})).json();B.success?(alert("Payout créé avec succès"),s.value=!1,Object.assign(h,{organizer_id:"",gateway:"",amount:"",phone_number:""}),E(),U()):alert(B.message||"Erreur lors de la création")}catch(_){console.error("Erreur création payout:",_),alert("Erreur technique")}finally{r.value=!1}},m=()=>{Object.assign(P,{status:"",gateway:"",is_automatic:""}),E()},p=_=>{alert(`Détails du payout #${_.id}
Référence: ${_.reference}
Montant: ${S(_.amount)} XAF`)},S=_=>new Intl.NumberFormat("fr-FR").format(_),b=_=>new Date(_).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=_=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[_]||_,A=_=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[_]||"bg-gray-100 text-gray-800",M=_=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[_]||_,L=_=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[_]||"bg-gray-100 text-gray-800";return ae(()=>{E(),U()}),{loading:d,checkingAll:t,loadingShapBalance:c,showCreateModal:s,creatingPayout:r,payouts:u,organizers:o,shapBalance:l,stats:v,filters:P,newPayout:h,loadPayouts:E,loadStats:U,loadShapBalance:j,checkAllPending:q,checkPayoutStatus:W,openCreatePayoutModal:k,createPayout:w,resetFilters:m,viewPayoutDetails:p,formatAmount:S,formatDate:b,getStatusName:y,getStatusBadgeClass:A,getGatewayName:M,getGatewayBadgeClass:L}}},Hu={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},Gu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Wu={class:"bg-white rounded-lg shadow p-6"},Ku={class:"flex items-center"},Ju={class:"ml-4"},Yu={class:"text-2xl font-bold text-gray-900"},Qu={class:"bg-white rounded-lg shadow p-6"},Zu={class:"flex items-center"},ec={class:"ml-4"},tc={class:"text-2xl font-bold text-green-600"},sc={class:"bg-white rounded-lg shadow p-6"},oc={class:"flex items-center"},lc={class:"ml-4"},ac={class:"text-2xl font-bold text-yellow-600"},rc={class:"bg-white rounded-lg shadow p-6"},nc={class:"flex items-center"},ic={class:"ml-4"},dc={class:"text-2xl font-bold text-purple-600"},uc={class:"flex flex-wrap gap-4 mb-8"},cc=["disabled"],mc=["disabled"],gc={key:0,class:"mb-8"},pc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fc={class:"font-semibold text-gray-900"},xc={class:"text-2xl font-bold text-green-600"},vc={class:"text-sm text-gray-500"},yc={class:"bg-white rounded-lg shadow p-6 mb-8"},bc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},hc={class:"flex items-end"},wc={class:"bg-white rounded-lg shadow"},_c={key:0,class:"p-8 text-center"},kc={key:1,class:"p-8 text-center text-gray-500"},Cc={key:2,class:"overflow-x-auto"},Mc={class:"w-full"},Sc={class:"divide-y divide-gray-200"},Ac={class:"px-6 py-4 text-sm text-gray-900"},jc={class:"px-6 py-4 text-sm text-gray-900"},Pc={class:"px-6 py-4 text-sm font-medium text-gray-900"},Dc={class:"px-6 py-4 text-sm text-gray-900"},Tc={class:"px-6 py-4 text-sm"},Uc={class:"px-6 py-4 text-sm text-gray-900"},Fc={class:"px-6 py-4 text-sm text-gray-500"},Oc={class:"px-6 py-4 text-sm space-x-2"},zc=["onClick","disabled"],Ec=["onClick"],Rc={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Vc={class:"bg-white rounded-lg p-6 w-full max-w-md"},Bc={class:"space-y-4"},Ic=["value"],$c={class:"flex justify-end space-x-3 mt-6"},Lc=["disabled"];function qc(d,t,c,s,r,u){return i(),n("div",Hu,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",Gu,[e("div",Wu,[e("div",Ku,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ju,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",Yu,a(s.stats.total_payouts||0),1)])])]),e("div",Qu,[e("div",Zu,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",ec,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",tc,a(s.stats.successful_payouts||0),1)])])]),e("div",sc,[e("div",oc,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",lc,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",ac,a(s.stats.pending_payouts||0),1)])])]),e("div",rc,[e("div",nc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",ic,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",dc,a(s.stats.automatic_payouts||0),1)])])])]),e("div",uc,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreatePayoutModal&&s.openCreatePayoutModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.checkAllPending&&s.checkAllPending(...o)),disabled:s.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),se(" "+a(s.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,cc),e("button",{onClick:t[2]||(t[2]=(...o)=>s.loadShapBalance&&s.loadShapBalance(...o)),disabled:s.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),se(" "+a(s.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,mc)]),s.shapBalance.length>0?(i(),n("div",gc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",pc,[(i(!0),n(D,null,T(s.shapBalance,o=>(i(),n("div",{key:o.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",fc,a(o.payment_system_displayed_name),1),e("p",xc,a(s.formatAmount(o.amount))+" XAF",1),e("p",vc,"Dernière MAJ: "+a(o.last_updated),1)]))),128))])])):x("",!0),e("div",yc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",bc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[re('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[V,s.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.gateway=o),onChange:t[6]||(t[6]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[V,s.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.is_automatic=o),onChange:t[8]||(t[8]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[V,s.filters.is_automatic]])]),e("div",hc,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",wc,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),s.loading?(i(),n("div",_c,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payouts.length===0?(i(),n("div",kc," Aucun payout trouvé ")):(i(),n("div",Cc,[e("table",Mc,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Sc,[(i(!0),n(D,null,T(s.payouts,o=>(i(),n("tr",{key:o.id},[e("td",Ac,"#"+a(o.id),1),e("td",jc,a(o.organizer?.name),1),e("td",Pc,a(s.formatAmount(o.amount))+" XAF",1),e("td",Dc,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Tc,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",Uc,[e("span",{class:$(["inline-flex px-2 py-1 text-xs rounded-full",o.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},a(o.is_automatic?"Auto":"Manuel"),3)]),e("td",Fc,a(s.formatDate(o.created_at)),1),e("td",Oc,[e("button",{onClick:l=>s.checkPayoutStatus(o),disabled:o.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},a(o.checking?"Vérif...":"Vérifier"),9,zc),e("button",{onClick:l=>s.viewPayoutDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,Ec)])]))),128))])])]))]),s.showCreateModal?(i(),n("div",Rc,[e("div",Vc,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=le((...o)=>s.createPayout&&s.createPayout(...o),["prevent"]))},[e("div",Bc,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.newPayout.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(i(!0),n(D,null,T(s.organizers,o=>(i(),n("option",{key:o.id,value:o.id},a(o.name),9,Ic))),128))],512),[[V,s.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.newPayout.gateway=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[V,s.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.newPayout.amount=o),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),g(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.newPayout.phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.newPayout.phone_number]])])]),e("div",$c,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>s.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.creatingPayout?"Création...":"Créer le Payout"),9,Lc)])],32)])])):x("",!0)])}const Nc=te(Xu,[["render",qc],["__scopeId","data-v-e96f5ab8"]]),j3=Object.freeze(Object.defineProperty({__proto__:null,default:Nc},Symbol.toStringTag,{value:"Module"})),Xc={name:"OrganizerBalanceConfig",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(null),r=f([]),u=G({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),o=G({gateway:"",auto_payout_enabled:""}),l=G({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),v=async()=>{d.value=!0;try{const k=new URLSearchParams;o.gateway&&k.append("gateway",o.gateway),o.auto_payout_enabled&&k.append("auto_payout_enabled",o.auto_payout_enabled);const F=await fetch(`/api/v1/admin/payouts/balances?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"}});if(F.ok){const w=await F.json();w.success&&(r.value=w.data.balances,w.data.stats&&Object.assign(u,w.data.stats))}else P()}catch{console.log("API non disponible, utilisation des données simulées"),P()}finally{d.value=!1}},P=()=>{r.value=[{organizer_id:1,organizer:{name:"EventMaster Pro"},gateway:"airtelmoney",balance:25e4,auto_payout_enabled:!0,auto_payout_threshold:1e5,phone_number:"066123456"},{organizer_id:2,organizer:{name:"Gabon Events"},gateway:"moovmoney",balance:18e4,auto_payout_enabled:!1,auto_payout_threshold:5e4,phone_number:"065987654"},{organizer_id:3,organizer:{name:"Culture & Spectacles"},gateway:"airtelmoney",balance:42e4,auto_payout_enabled:!0,auto_payout_threshold:2e5,phone_number:"067789012"}],Object.assign(u,{total_organizers:15,auto_payout_enabled:8,total_balance:85e4,active_configs:12})},h=k=>{s.value=k,Object.assign(l,{auto_payout_enabled:k.auto_payout_enabled,auto_payout_threshold:k.auto_payout_threshold,payout_phone_number:k.phone_number||""}),t.value=!0},E=async()=>{c.value=!0;try{const F=await(await fetch(`/api/v1/admin/organizers/${s.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({gateway:s.value.gateway,auto_payout_enabled:l.auto_payout_enabled,auto_payout_threshold:l.auto_payout_threshold,payout_phone_number:l.payout_phone_number})})).json();F.success?(alert("Configuration mise à jour avec succès"),t.value=!1,v()):alert(F.message||"Erreur lors de la mise à jour")}catch(k){console.error("Erreur sauvegarde config:",k),alert("Erreur technique")}finally{c.value=!1}},U=()=>{Object.assign(o,{gateway:"",auto_payout_enabled:""}),v()},j=k=>new Intl.NumberFormat("fr-FR").format(k),q=k=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[k]||k,W=k=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[k]||"bg-gray-100 text-gray-800";return ae(()=>{v()}),{loading:d,showConfigModal:t,savingConfig:c,editingBalance:s,balances:r,stats:u,filters:o,configForm:l,loadBalances:v,editBalance:h,saveConfiguration:E,resetFilters:U,formatAmount:j,getGatewayName:q,getGatewayBadgeClass:W}}},Hc={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},Gc={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Wc={class:"bg-white rounded-lg shadow p-6"},Kc={class:"flex items-center"},Jc={class:"ml-4"},Yc={class:"text-2xl font-bold text-gray-900"},Qc={class:"bg-white rounded-lg shadow p-6"},Zc={class:"flex items-center"},em={class:"ml-4"},tm={class:"text-2xl font-bold text-green-600"},sm={class:"bg-white rounded-lg shadow p-6"},om={class:"flex items-center"},lm={class:"ml-4"},am={class:"text-2xl font-bold text-yellow-600"},rm={class:"bg-white rounded-lg shadow p-6"},nm={class:"flex items-center"},im={class:"ml-4"},dm={class:"text-2xl font-bold text-purple-600"},um={class:"bg-white rounded-lg shadow p-6 mb-8"},cm={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},mm={class:"flex items-end"},gm={class:"bg-white rounded-lg shadow"},pm={key:0,class:"p-8 text-center"},fm={key:1,class:"p-8 text-center text-gray-500"},xm={key:2,class:"overflow-x-auto"},vm={class:"w-full"},ym={class:"divide-y divide-gray-200"},bm={class:"px-6 py-4 text-sm font-medium text-gray-900"},hm={class:"px-6 py-4 text-sm text-gray-900"},wm={class:"px-6 py-4 text-sm font-medium text-gray-900"},_m={class:"px-6 py-4 text-sm"},km={class:"px-6 py-4 text-sm text-gray-900"},Cm={class:"px-6 py-4 text-sm text-gray-900"},Mm={class:"px-6 py-4 text-sm space-x-2"},Sm=["onClick"],Am={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},jm={class:"bg-white rounded-lg p-6 w-full max-w-md"},Pm={class:"text-lg font-bold mb-4"},Dm={class:"space-y-4"},Tm=["value"],Um=["value"],Fm={class:"flex items-center space-x-2"},Om={key:0},zm={class:"flex justify-end space-x-3 mt-6"},Em=["disabled"];function Rm(d,t,c,s,r,u){return i(),n("div",Hc,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",Gc,[e("div",Wc,[e("div",Kc,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",Jc,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",Yc,a(s.stats.total_organizers||0),1)])])]),e("div",Qc,[e("div",Zc,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",em,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",tm,a(s.stats.auto_payout_enabled||0),1)])])]),e("div",sm,[e("div",om,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",lm,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",am,a(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])]),e("div",rm,[e("div",nm,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",im,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",dm,a(s.stats.active_configs||0),1)])])])]),e("div",um,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",cm,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filters.gateway=o),onChange:t[1]||(t[1]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[V,s.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.auto_payout_enabled=o),onChange:t[3]||(t[3]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[V,s.filters.auto_payout_enabled]])]),e("div",mm,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",gm,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),s.loading?(i(),n("div",pm,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.balances.length===0?(i(),n("div",fm," Aucune balance trouvée ")):(i(),n("div",xm,[e("table",vm,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",ym,[(i(!0),n(D,null,T(s.balances,o=>(i(),n("tr",{key:`${o.organizer_id}-${o.gateway}`},[e("td",bm,a(o.organizer?.name),1),e("td",hm,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",wm,a(s.formatAmount(o.balance))+" XAF",1),e("td",_m,[e("span",{class:$(["inline-flex px-2 py-1 text-xs rounded-full",o.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",km,a(s.formatAmount(o.auto_payout_threshold))+" XAF",1),e("td",Cm,a(o.phone_number||"-"),1),e("td",Mm,[e("button",{onClick:l=>s.editBalance(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Sm)])]))),128))])])]))]),s.showConfigModal?(i(),n("div",Am,[e("div",jm,[e("h3",Pm,"Configuration Payout - "+a(s.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=le((...o)=>s.saveConfiguration&&s.saveConfiguration(...o),["prevent"]))},[e("div",Dm,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:s.getGatewayName(s.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Tm)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:s.formatAmount(s.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Um)]),e("div",null,[e("label",Fm,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>s.configForm.auto_payout_enabled=o),class:"rounded border-gray-300"},null,512),[[oe,s.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),s.configForm.auto_payout_enabled?(i(),n("div",Om,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.configForm.auto_payout_threshold=o),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):x("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),g(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.configForm.payout_phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,s.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",zm,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.savingConfig?"Enregistrement...":"Enregistrer"),9,Em)])],32)])])):x("",!0)])}const Vm=te(Xc,[["render",Rm],["__scopeId","data-v-f002e652"]]),P3=Object.freeze(Object.defineProperty({__proto__:null,default:Vm},Symbol.toStringTag,{value:"Module"})),Bm={name:"Reports",setup(){const d=f(!1),t=f(!1),c=f([]),s=f(""),r=G({start:new Date().toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),u=G({total_revenue:0,total_tickets:0,active_events:0,active_users:0}),o=async()=>{d.value=!0;try{const w=new URLSearchParams({start_date:r.start,end_date:r.end}),m=await fetch(`/api/v1/admin/reports?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(m.ok){const p=await m.json();p.success&&(c.value=p.data.reports,Object.assign(u,p.data.stats))}else l()}catch{console.log("API non disponible, utilisation des données simulées"),l()}finally{d.value=!1}},l=()=>{c.value=[{id:1,type:"financial",period:"Septembre 2025",created_at:new Date,file_size:"2.3 MB",format:"PDF",status:"ready",download_url:"/reports/financial-sep-2025.pdf"},{id:2,type:"events",period:"Août 2025",created_at:new Date(Date.now()-864e5),file_size:"1.8 MB",format:"Excel",status:"ready",download_url:"/reports/events-aug-2025.xlsx"},{id:3,type:"users",period:"Juillet 2025",created_at:new Date(Date.now()-1728e5),file_size:"980 KB",format:"PDF",status:"ready",download_url:"/reports/users-jul-2025.pdf"}],Object.assign(u,{total_revenue:125e5,total_tickets:3420,active_events:28,active_users:1875})},v=async w=>{t.value=!0;try{const m=await fetch("/api/v1/admin/reports/generate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({type:w,start_date:r.start,end_date:r.end})});if(m.ok){const p=await m.json();p.success&&c.value.unshift(p.data.report)}else{const p={id:Date.now(),type:w,period:`${new Date(r.start).toLocaleDateString("fr-FR")} - ${new Date(r.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${w}-${Date.now()}.pdf`};c.value.unshift(p)}}catch{console.log("API non disponible, génération simulée");const p={id:Date.now(),type:w,period:`${new Date(r.start).toLocaleDateString("fr-FR")} - ${new Date(r.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${w}-${Date.now()}.pdf`};c.value.unshift(p)}finally{t.value=!1}},P=async w=>{try{const m=await fetch(`/api/v1/admin/reports/${w.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(m.ok){const p=await m.blob(),S=window.URL.createObjectURL(p),b=document.createElement("a");b.href=S,b.download=`rapport-${w.type}-${w.id}.pdf`,document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(S),document.body.removeChild(b)}else alert("Téléchargement simulé du rapport: "+w.type)}catch{alert("Téléchargement simulé du rapport: "+w.type)}},h=async w=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce rapport ?"))try{(await fetch(`/api/v1/admin/reports/${w.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?c.value=c.value.filter(p=>p.id!==w.id):c.value=c.value.filter(p=>p.id!==w.id)}catch{c.value=c.value.filter(p=>p.id!==w.id)}},E=async()=>{if(confirm("Êtes-vous sûr de vouloir vider tout l'historique des rapports ?"))try{(await fetch("/api/v1/admin/reports/clear",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?c.value=[]:c.value=[]}catch{c.value=[]}},U=()=>{const w=new Date,m={today:{start:w,end:w},week:{start:new Date(w.getTime()-10080*60*1e3),end:w},month:{start:new Date(w.getFullYear(),w.getMonth(),1),end:w},quarter:{start:new Date(w.getFullYear(),Math.floor(w.getMonth()/3)*3,1),end:w},year:{start:new Date(w.getFullYear(),0,1),end:w}};if(m[s.value]){const p=m[s.value];r.start=p.start.toISOString().split("T")[0],r.end=p.end.toISOString().split("T")[0]}},j=()=>{o()},q=w=>new Intl.NumberFormat("fr-FR").format(w),W=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),k=w=>({financial:"Rapport Financier",events:"Rapport Événements",users:"Rapport Utilisateurs",performance:"Rapport Performance"})[w]||w,F=w=>({financial:"bg-blue-100 text-blue-600",events:"bg-yellow-100 text-yellow-600",users:"bg-green-100 text-green-600",performance:"bg-purple-100 text-purple-600"})[w]||"bg-gray-100 text-gray-600";return ae(()=>{const w=new Date,m=new Date(w.getFullYear(),w.getMonth(),1);r.start=m.toISOString().split("T")[0],r.end=w.toISOString().split("T")[0],o()}),{loading:d,generating:t,reports:c,selectedPeriod:s,dateRange:r,stats:u,loadReports:o,generateReport:v,downloadReport:P,deleteReport:h,clearHistory:E,setPredefinedPeriod:U,refreshReports:j,formatAmount:q,formatDateTime:W,getReportTypeName:k,getReportTypeClass:F}}},Im={class:"reports-management p-6"},$m={class:"bg-white rounded-lg shadow p-4 mb-6"},Lm={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},qm={class:"flex items-end"},Nm={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Xm={class:"bg-white rounded-lg shadow p-6 text-center"},Hm={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Gm={class:"w-8 h-8",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wm=["disabled"],Km={class:"bg-white rounded-lg shadow p-6 text-center"},Jm={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Ym={class:"w-8 h-8",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qm=["disabled"],Zm={class:"bg-white rounded-lg shadow p-6 text-center"},e0=["disabled"],t0={class:"bg-white rounded-lg shadow p-6 text-center"},s0=["disabled"],o0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},l0={class:"bg-white rounded-lg shadow p-4"},a0={class:"flex items-center"},r0={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},n0={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},i0={class:"ml-4"},d0={class:"text-xl font-bold",style:{color:"#272d63"}},u0={class:"bg-white rounded-lg shadow p-4"},c0={class:"flex items-center"},m0={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},g0={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},p0={class:"ml-4"},f0={class:"text-xl font-bold",style:{color:"#fab511"}},x0={class:"bg-white rounded-lg shadow p-4"},v0={class:"flex items-center"},y0={class:"ml-4"},b0={class:"text-xl font-bold text-green-600"},h0={class:"bg-white rounded-lg shadow p-4"},w0={class:"flex items-center"},_0={class:"ml-4"},k0={class:"text-xl font-bold text-purple-600"},C0={class:"bg-white rounded-lg shadow overflow-hidden"},M0={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},S0={key:0,class:"p-8 text-center"},A0={key:1,class:"p-8 text-center"},j0={key:2,class:"overflow-x-auto"},P0={class:"w-full"},D0={class:"divide-y divide-gray-200"},T0={class:"px-6 py-4"},U0={class:"flex items-center"},F0={class:"text-sm font-medium text-gray-900"},O0={class:"text-sm text-gray-500"},z0={class:"px-6 py-4 text-sm text-gray-900"},E0={class:"px-6 py-4 text-sm text-gray-500"},R0={class:"px-6 py-4 text-sm text-gray-500"},V0={class:"px-6 py-4"},B0={class:"px-6 py-4"},I0={class:"flex space-x-2"},$0=["onClick"],L0=["onClick"];function q0(d,t,c,s,r,u){return i(),n("div",Im,[t[43]||(t[43]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Rapports et Analyses"),e("p",{class:"text-gray-600"},"Générez et consultez les rapports de performance de la plateforme")],-1)),e("div",$m,[e("div",Lm,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),g(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=o=>s.dateRange.start=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.dateRange.start]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),g(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>s.dateRange.end=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.dateRange.end]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période prédéfinie",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.selectedPeriod=o),onChange:t[3]||(t[3]=(...o)=>s.setPredefinedPeriod&&s.setPredefinedPeriod(...o)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[20]||(t[20]=[re('<option value="" data-v-04ad1860>Personnalisée</option><option value="today" data-v-04ad1860>Aujourd&#39;hui</option><option value="week" data-v-04ad1860>Cette semaine</option><option value="month" data-v-04ad1860>Ce mois</option><option value="quarter" data-v-04ad1860>Ce trimestre</option><option value="year" data-v-04ad1860>Cette année</option>',6)])],544),[[V,s.selectedPeriod]])]),e("div",qm,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.refreshReports&&s.refreshReports(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Actualiser ",32)])])]),e("div",Nm,[e("div",Xm,[e("div",Hm,[(i(),n("svg",Gm,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Financier",-1)),t[24]||(t[24]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, paiements et remboursements",-1)),e("button",{onClick:t[7]||(t[7]=o=>s.generateReport("financial")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[9]||(t[9]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.generating?"Génération...":"Générer"),41,Wm)]),e("div",Km,[e("div",Jm,[(i(),n("svg",Ym,[...t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t[26]||(t[26]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Événements",-1)),t[27]||(t[27]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes de tickets et tendances",-1)),e("button",{onClick:t[10]||(t[10]=o=>s.generateReport("events")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[11]||(t[11]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#fab511")},a(s.generating?"Génération...":"Générer"),41,Qm)]),e("div",Zm,[t[28]||(t[28]=re('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-green-100" data-v-04ad1860><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Utilisateurs</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Croissance, activité et segments d&#39;utilisateurs</p>',3)),e("button",{onClick:t[13]||(t[13]=o=>s.generateReport("users")),disabled:s.generating,class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},a(s.generating?"Génération...":"Générer"),9,e0)]),e("div",t0,[t[29]||(t[29]=re('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-purple-100" data-v-04ad1860><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Performance</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Métriques de performance de la plateforme</p>',3)),e("button",{onClick:t[14]||(t[14]=o=>s.generateReport("performance")),disabled:s.generating,class:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},a(s.generating?"Génération...":"Générer"),9,s0)])]),e("div",o0,[e("div",l0,[e("div",a0,[e("div",r0,[(i(),n("svg",n0,[...t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",i0,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",d0,a(s.formatAmount(s.stats.total_revenue))+" XAF",1)])])]),e("div",u0,[e("div",c0,[e("div",m0,[(i(),n("svg",g0,[...t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])]))]),e("div",p0,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",f0,a(s.stats.total_tickets),1)])])]),e("div",x0,[e("div",v0,[t[35]||(t[35]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",y0,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Événements Actifs",-1)),e("p",b0,a(s.stats.active_events),1)])])]),e("div",h0,[e("div",w0,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",_0,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Utilisateurs Actifs",-1)),e("p",k0,a(s.stats.active_users),1)])])])]),e("div",C0,[e("div",M0,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold",style:{color:"#272d63"}},"Historique des Rapports",-1)),e("button",{onClick:t[15]||(t[15]=(...o)=>s.clearHistory&&s.clearHistory(...o)),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Vider l'historique ")]),s.loading?(i(),n("div",S0,[...t[39]||(t[39]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{"border-color":"#272d63"}},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)])])):s.reports.length===0?(i(),n("div",A0,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun rapport",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par générer votre premier rapport.",-1)])])):(i(),n("div",j0,[e("table",P0,[t[42]||(t[42]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Taille"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",D0,[(i(!0),n(D,null,T(s.reports,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",T0,[e("div",U0,[e("div",{class:$(["w-8 h-8 rounded-full flex items-center justify-center mr-3",s.getReportTypeClass(o.type)])},[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1)])],2),e("div",null,[e("p",F0,a(s.getReportTypeName(o.type)),1),e("p",O0,a(o.format),1)])])]),e("td",z0,a(o.period),1),e("td",E0,a(s.formatDateTime(o.created_at)),1),e("td",R0,a(o.file_size),1),e("td",V0,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="ready"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(o.status==="ready"?"Prêt":"En cours"),3)]),e("td",B0,[e("div",I0,[o.status==="ready"?(i(),n("button",{key:0,onClick:l=>s.downloadReport(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[16]||(t[16]=l=>{l.currentTarget.style.backgroundColor="#fab511",l.currentTarget.style.color="#fff"}),onMouseleave:t[17]||(t[17]=l=>{l.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",l.currentTarget.style.color="#272d63"})}," Télécharger ",40,$0)):x("",!0),e("button",{onClick:l=>s.deleteReport(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,L0)])])]))),128))])])]))])])}const N0=te(Bm,[["render",q0],["__scopeId","data-v-04ad1860"]]),D3=Object.freeze(Object.defineProperty({__proto__:null,default:N0},Symbol.toStringTag,{value:"Module"})),X0={name:"Settings",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(!1),r=f(!1),u=G({platform_name:"",site_url:"",contact_email:"",timezone:"Africa/Libreville",currency:"XAF"}),o=G({airtel_money:!0,moov_money:!0,bank_cards:!1}),l=G({email_enabled:!0,sms_enabled:!1,push_enabled:!0}),v=G({maintenance_mode:!1,maintenance_message:""}),P=G({fixed_commission:500,percentage_commission:5}),h=async()=>{d.value=!0;try{const m=await fetch("/api/v1/admin/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(m.ok){const p=await m.json();p.success&&(Object.assign(u,p.data.general||{}),Object.assign(o,p.data.payment||{}),Object.assign(l,p.data.notification||{}),Object.assign(v,p.data.maintenance||{}),Object.assign(P,p.data.commission||{}))}else E()}catch{console.log("API non disponible, utilisation des données locales"),E()}finally{d.value=!1}},E=()=>{Object.assign(u,{platform_name:"Primea Ticketing",site_url:"https://primea.ga",contact_email:"contact@primea.ga",timezone:"Africa/Libreville",currency:"XAF"}),Object.assign(o,{airtel_money:!0,moov_money:!0,bank_cards:!1}),Object.assign(l,{email_enabled:!0,sms_enabled:!1,push_enabled:!0}),Object.assign(v,{maintenance_mode:!1,maintenance_message:"Le site est temporairement en maintenance pour amélioration. Nous reviendrons bientôt !"}),Object.assign(P,{fixed_commission:500,percentage_commission:5})},U=async()=>{t.value=!0;try{(await fetch("/api/v1/admin/settings/general",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).ok?alert("Paramètres généraux sauvegardés avec succès"):alert("Paramètres généraux sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres généraux sauvegardés avec succès (simulé)")}finally{t.value=!1}},j=async()=>{c.value=!0;try{(await fetch("/api/v1/admin/settings/payment",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).ok?alert("Paramètres de paiement sauvegardés avec succès"):alert("Paramètres de paiement sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de paiement sauvegardés avec succès (simulé)")}finally{c.value=!1}},q=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/settings/notifications",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)})).ok?alert("Paramètres de notification sauvegardés avec succès"):alert("Paramètres de notification sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de notification sauvegardés avec succès (simulé)")}finally{s.value=!1}},W=async()=>{r.value=!0;try{(await fetch("/api/v1/admin/settings/security",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...v,...P})})).ok?alert("Paramètres de sécurité sauvegardés avec succès"):alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}finally{r.value=!1}},k=()=>{const m={general:u,payment:o,notification:l,maintenance:v,commission:P,exported_at:new Date().toISOString()},p=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),S=window.URL.createObjectURL(p),b=document.createElement("a");b.href=S,b.download=`primea-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(S),document.body.removeChild(b)},F=m=>{const p=m.target.files[0];if(!p)return;const S=new FileReader;S.onload=b=>{try{const y=JSON.parse(b.target.result);confirm("Êtes-vous sûr de vouloir importer cette configuration ? Cela remplacera tous les paramètres actuels.")&&(y.general&&Object.assign(u,y.general),y.payment&&Object.assign(o,y.payment),y.notification&&Object.assign(l,y.notification),y.maintenance&&Object.assign(v,y.maintenance),y.commission&&Object.assign(P,y.commission),alert("Configuration importée avec succès"))}catch{alert("Erreur lors de l'importation du fichier : format invalide")}},S.readAsText(p),m.target.value=""},w=()=>{confirm("Êtes-vous sûr de vouloir réinitialiser tous les paramètres ? Cette action est irréversible.")&&(E(),alert("Tous les paramètres ont été réinitialisés aux valeurs par défaut"))};return ae(()=>{h()}),{loading:d,savingGeneral:t,savingPayment:c,savingNotifications:s,savingSecurity:r,generalForm:u,paymentForm:o,notificationForm:l,maintenanceForm:v,commissionForm:P,saveGeneralSettings:U,savePaymentSettings:j,saveNotificationSettings:q,saveSecuritySettings:W,exportSettings:k,importSettings:F,resetAllSettings:w}}},H0={class:"settings-management p-6"},G0={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},W0={class:"bg-white rounded-lg shadow p-6"},K0=["disabled"],J0={class:"bg-white rounded-lg shadow p-6"},Y0={class:"space-y-4"},Q0={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},Z0={class:"relative inline-flex items-center cursor-pointer"},eg={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},tg={class:"relative inline-flex items-center cursor-pointer"},sg={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},og={class:"relative inline-flex items-center cursor-pointer"},lg=["disabled"],ag={class:"bg-white rounded-lg shadow p-6"},rg={class:"space-y-4"},ng={class:"flex items-center justify-between"},ig={class:"relative inline-flex items-center cursor-pointer"},dg={class:"flex items-center justify-between"},ug={class:"relative inline-flex items-center cursor-pointer"},cg={class:"flex items-center justify-between"},mg={class:"relative inline-flex items-center cursor-pointer"},gg=["disabled"],pg={class:"bg-white rounded-lg shadow p-6"},fg={class:"space-y-6"},xg={class:"p-4 border border-orange-200 bg-orange-50 rounded-lg"},vg={class:"flex items-center justify-between"},yg={class:"relative inline-flex items-center cursor-pointer"},bg={key:0,class:"mt-4"},hg={class:"grid grid-cols-2 gap-4"},wg=["disabled"],_g={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},kg={class:"bg-white rounded-lg shadow p-4 text-center"},Cg={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Mg={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Sg={class:"bg-white rounded-lg shadow p-4 text-center"},Ag={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},jg={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pg={class:"bg-white rounded-lg shadow p-4 text-center"};function Dg(d,t,c,s,r,u){return i(),n("div",H0,[t[62]||(t[62]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Paramètres Système"),e("p",{class:"text-gray-600"},"Configurez les paramètres généraux de la plateforme Primea")],-1)),e("div",G0,[e("div",W0,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Configuration Générale",-1)),e("form",{onSubmit:t[7]||(t[7]=le((...o)=>s.saveGeneralSettings&&s.saveGeneralSettings(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.generalForm.platform_name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.generalForm.platform_name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site *",-1)),g(e("input",{type:"url","onUpdate:modelValue":t[1]||(t[1]=o=>s.generalForm.site_url=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.generalForm.site_url]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),g(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=o=>s.generalForm.contact_email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.generalForm.contact_email]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.generalForm.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[34]||(t[34]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Paris (GMT+1)",-1)])],512),[[V,s.generalForm.timezone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.generalForm.currency=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[36]||(t[36]=[e("option",{value:"XAF"},"Franc CFA (XAF)",-1),e("option",{value:"EUR"},"Euro (EUR)",-1),e("option",{value:"USD"},"Dollar US (USD)",-1)])],512),[[V,s.generalForm.currency]])]),e("button",{type:"submit",disabled:s.savingGeneral,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.savingGeneral?"Sauvegarde...":"Sauvegarder"),41,K0)],32)]),e("div",J0,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Moyens de Paiement",-1)),e("div",Y0,[e("div",Q0,[t[39]||(t[39]=re('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-red-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-red-600 font-bold text-xs" data-v-b0f1a205>AM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Airtel Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Airtel</p></div></div>',1)),e("label",Z0,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=o=>s.paymentForm.airtel_money=o),class:"sr-only peer"},null,512),[[oe,s.paymentForm.airtel_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(s.paymentForm.airtel_money?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",eg,[t[40]||(t[40]=re('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-orange-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-orange-600 font-bold text-xs" data-v-b0f1a205>MM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Moov Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Moov</p></div></div>',1)),e("label",tg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>s.paymentForm.moov_money=o),class:"sr-only peer"},null,512),[[oe,s.paymentForm.moov_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(s.paymentForm.moov_money?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",sg,[t[42]||(t[42]=re('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-blue-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b0f1a205><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" data-v-b0f1a205></path></svg></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Cartes Bancaires</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Visa, Mastercard, etc.</p></div></div>',1)),e("label",og,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>s.paymentForm.bank_cards=o),class:"sr-only peer"},null,512),[[oe,s.paymentForm.bank_cards]]),t[41]||(t[41]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),e("button",{onClick:t[11]||(t[11]=(...o)=>s.savePaymentSettings&&s.savePaymentSettings(...o)),disabled:s.savingPayment,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#fab511")},a(s.savingPayment?"Sauvegarde...":"Sauvegarder les paiements"),41,lg)])]),e("div",ag,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Paramètres de Notifications",-1)),e("div",rg,[e("div",ng,[t[44]||(t[44]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par email")],-1)),e("label",ig,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>s.notificationForm.email_enabled=o),class:"sr-only peer"},null,512),[[oe,s.notificationForm.email_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(s.notificationForm.email_enabled?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",dg,[t[45]||(t[45]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications SMS"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par SMS")],-1)),e("label",ug,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=o=>s.notificationForm.sms_enabled=o),class:"sr-only peer"},null,512),[[oe,s.notificationForm.sms_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(s.notificationForm.sms_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",cg,[t[47]||(t[47]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Push"),e("p",{class:"text-sm text-gray-600"},"Notifications navigateur et mobile")],-1)),e("label",mg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.notificationForm.push_enabled=o),class:"sr-only peer"},null,512),[[oe,s.notificationForm.push_enabled]]),t[46]||(t[46]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("button",{onClick:t[17]||(t[17]=(...o)=>s.saveNotificationSettings&&s.saveNotificationSettings(...o)),disabled:s.savingNotifications,class:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},a(s.savingNotifications?"Sauvegarde...":"Sauvegarder les notifications"),9,gg)])]),e("div",pg,[t[55]||(t[55]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité et Maintenance",-1)),e("div",fg,[e("div",xg,[e("div",vg,[t[50]||(t[50]=e("div",null,[e("h4",{class:"font-medium text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 text-orange-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),se(" Mode Maintenance ")]),e("p",{class:"text-sm text-gray-600"},"Rendre le site temporairement indisponible")],-1)),e("label",yg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=o=>s.maintenanceForm.maintenance_mode=o),class:"sr-only peer"},null,512),[[oe,s.maintenanceForm.maintenance_mode]]),t[49]||(t[49]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"},null,-1))])]),s.maintenanceForm.maintenance_mode?(i(),n("div",bg,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message de maintenance",-1)),g(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.maintenanceForm.maintenance_message=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"},placeholder:"Le site est temporairement en maintenance..."},null,512),[[C,s.maintenanceForm.maintenance_message]])])):x("",!0)]),e("div",null,[t[54]||(t[54]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Commission Plateforme",-1)),e("div",hg,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission fixe (XAF)",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=o=>s.commissionForm.fixed_commission=o),min:"0",step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.commissionForm.fixed_commission]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission % du ticket",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[21]||(t[21]=o=>s.commissionForm.percentage_commission=o),min:"0",max:"100",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.commissionForm.percentage_commission]])])])]),e("button",{onClick:t[22]||(t[22]=(...o)=>s.saveSecuritySettings&&s.saveSecuritySettings(...o)),disabled:s.savingSecurity,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},a(s.savingSecurity?"Sauvegarde...":"Sauvegarder la sécurité"),9,wg)])])]),e("div",_g,[e("div",kg,[e("div",Cg,[(i(),n("svg",Mg,[...t[56]||(t[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)])]))]),t[57]||(t[57]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Exporter Configuration",-1)),e("button",{onClick:t[23]||(t[23]=(...o)=>s.exportSettings&&s.exportSettings(...o)),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[24]||(t[24]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#fff"}),onMouseleave:t[25]||(t[25]=o=>{o.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",o.currentTarget.style.color="#272d63"})}," Exporter ",32)]),e("div",Sg,[e("div",Ag,[(i(),n("svg",jg,[...t[58]||(t[58]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])]))]),t[59]||(t[59]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Importer Configuration",-1)),e("input",{type:"file",ref:"importFile",onChange:t[26]||(t[26]=(...o)=>s.importSettings&&s.importSettings(...o)),accept:".json",class:"hidden"},null,544),e("button",{onClick:t[27]||(t[27]=o=>d.$refs.importFile.click()),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#fab511","background-color":"rgba(250, 181, 17, 0.1)"},onMouseover:t[28]||(t[28]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#fff"}),onMouseleave:t[29]||(t[29]=o=>{o.currentTarget.style.backgroundColor="rgba(250, 181, 17, 0.1)",o.currentTarget.style.color="#fab511"})}," Importer ",32)]),e("div",Pg,[t[60]||(t[60]=e("div",{class:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),t[61]||(t[61]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Réinitialiser",-1)),e("button",{onClick:t[30]||(t[30]=(...o)=>s.resetAllSettings&&s.resetAllSettings(...o)),class:"text-sm text-red-600 hover:text-red-800 px-4 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Tout Réinitialiser ")])])])}const Tg=te(X0,[["render",Dg],["__scopeId","data-v-b0f1a205"]]),T3=Object.freeze(Object.defineProperty({__proto__:null,default:Tg},Symbol.toStringTag,{value:"Module"})),Ug={name:"Profile",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f(!1),r=f(!1),u=f(""),o=f({id:1,name:"",email:"",phone:"",position:"",created_at:new Date,login_count:0}),l=G({name:"",email:"",phone:"",position:""}),v=G({current_password:"",new_password:"",new_password_confirmation:""}),P=G({email_notifications:!0,two_factor_enabled:!1,language:"fr",timezone:"Africa/Libreville"}),h=f([]),E=async()=>{d.value=!0;try{const y=await fetch("/api/v1/admin/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(y.ok){const A=await y.json();A.success&&(o.value=A.data.user,Object.assign(l,A.data.user),Object.assign(P,A.data.preferences||P),h.value=A.data.sessions||[])}else U()}catch{console.log("API non disponible, utilisation des données locales"),U()}finally{d.value=!1}},U=()=>{const y={id:1,name:localStorage.getItem("userName")||"Admin Primea",email:localStorage.getItem("userEmail")||"admin@primea.ga",phone:"+241 01 23 45 67",position:"Super Administrateur",created_at:new Date("2024-01-15"),login_count:127};o.value=y,Object.assign(l,y),h.value=[{id:1,device:"Chrome sur macOS",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]},j=async()=>{t.value=!0;try{const y=await fetch("/api/v1/admin/profile",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)});y.ok?(await y.json()).success&&(o.value={...o.value,...l},localStorage.setItem("userName",l.name),localStorage.setItem("userEmail",l.email),alert("Profil mis à jour avec succès")):(o.value={...o.value,...l},localStorage.setItem("userName",l.name),localStorage.setItem("userEmail",l.email),alert("Profil mis à jour avec succès (simulé)"))}catch{console.log("API non disponible, mise à jour locale"),o.value={...o.value,...l},localStorage.setItem("userName",l.name),localStorage.setItem("userEmail",l.email),alert("Profil mis à jour avec succès (simulé)")}finally{t.value=!1}},q=async()=>{if(u.value="",v.new_password!==v.new_password_confirmation){u.value="Les mots de passe ne correspondent pas";return}if(v.new_password.length<8){u.value="Le mot de passe doit contenir au moins 8 caractères";return}c.value=!0;try{const y=await fetch("/api/v1/admin/profile/password",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v)});y.ok?(await y.json()).success&&(Object.assign(v,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès")):(Object.assign(v,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)"))}catch{console.log("API non disponible, changement simulé"),Object.assign(v,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)")}finally{c.value=!1}},W=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/profile/preferences",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(P)})).ok?alert("Préférences sauvegardées avec succès"):alert("Préférences sauvegardées avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Préférences sauvegardées avec succès (simulé)")}finally{s.value=!1}},k=()=>{r.value=!0},F=async y=>{if(confirm("Êtes-vous sûr de vouloir révoquer cette session ?"))try{(await fetch(`/api/v1/admin/profile/sessions/${y.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?h.value=h.value.filter(M=>M.id!==y.id):h.value=h.value.filter(M=>M.id!==y.id)}catch{h.value=h.value.filter(M=>M.id!==y.id)}},w=async()=>{if(confirm("Cela déconnectera toutes les autres sessions. Continuer ?"))try{(await fetch("/api/v1/admin/profile/sessions/logout-all",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?(h.value=h.value.filter(A=>A.current),alert("Toutes les autres sessions ont été déconnectées")):(h.value=h.value.filter(A=>A.current),alert("Toutes les autres sessions ont été déconnectées (simulé)"))}catch{h.value=h.value.filter(A=>A.current),alert("Toutes les autres sessions ont été déconnectées (simulé)")}},m=()=>{alert("Téléchargement des données du compte (fonctionnalité à venir)")},p=y=>y.split(" ").map(A=>A.charAt(0)).join("").toUpperCase().substring(0,2),S=y=>new Date(y).toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),b=y=>{const M=new Date-new Date(y),L=Math.floor(M/6e4),_=Math.floor(M/36e5),B=Math.floor(M/864e5);return L<1?"À l'instant":L<60?`Il y a ${L} min`:_<24?`Il y a ${_}h`:`Il y a ${B}j`};return ae(()=>{E()}),{loading:d,updatingProfile:t,changingPassword:c,updatingPreferences:s,showAvatarModal:r,passwordError:u,profile:o,profileForm:l,passwordForm:v,preferences:P,activeSessions:h,updateProfile:j,changePassword:q,updatePreferences:W,changeAvatar:k,revokeSession:F,logoutAllSessions:w,downloadAccountData:m,getInitials:p,formatDate:S,formatRelativeTime:b}}},Fg={class:"profile-management p-6"},Og={class:"bg-white rounded-lg shadow p-6 mb-6"},zg={class:"flex items-center space-x-6"},Eg={class:"relative"},Rg={class:"w-24 h-24 rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},Vg={class:"flex-1"},Bg={class:"text-xl font-bold",style:{color:"#272d63"}},Ig={class:"text-gray-600 mb-1"},$g={class:"flex items-center space-x-4 text-sm text-gray-500"},Lg={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},qg={class:"bg-white rounded-lg shadow p-6"},Ng=["disabled"],Xg={class:"bg-white rounded-lg shadow p-6"},Hg={key:0,class:"text-red-600 text-sm"},Gg=["disabled"],Wg={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},Kg={class:"bg-white rounded-lg shadow p-6"},Jg={class:"space-y-4"},Yg={class:"flex items-center justify-between"},Qg={class:"relative inline-flex items-center cursor-pointer"},Zg={class:"flex items-center justify-between"},ep={class:"relative inline-flex items-center cursor-pointer"},tp=["disabled"],sp={class:"bg-white rounded-lg shadow p-6"},op={class:"grid grid-cols-2 gap-4 mb-6"},lp={class:"text-center p-3 bg-gray-50 rounded-lg"},ap={class:"text-xl font-bold",style:{color:"#272d63"}},rp={class:"text-center p-3 bg-gray-50 rounded-lg"},np={class:"text-xl font-bold",style:{color:"#fab511"}},ip={class:"space-y-3"},dp={class:"flex items-center"},up={class:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},cp={class:"w-4 h-4",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mp={class:"text-sm font-medium text-gray-900"},gp={class:"text-xs text-gray-500"},pp={class:"flex items-center space-x-2"},fp={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},xp=["onClick"],vp={class:"mt-6 space-y-2"},yp={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},bp={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},hp={class:"text-center mb-4"},wp={class:"w-24 h-24 mx-auto rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},_p={class:"flex space-x-3"};function kp(d,t,c,s,r,u){return i(),n("div",Fg,[t[52]||(t[52]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Mon Profil"),e("p",{class:"text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",Og,[e("div",zg,[e("div",Eg,[e("div",Rg,a(s.getInitials(s.profile.name)),1),e("button",{onClick:t[0]||(t[0]=(...o)=>s.changeAvatar&&s.changeAvatar(...o)),class:"absolute bottom-0 right-0 text-white p-2 rounded-full transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#fab511")},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],32)]),e("div",Vg,[e("h3",Bg,a(s.profile.name),1),e("p",Ig,a(s.profile.email),1),e("div",$g,[t[28]||(t[28]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),se(" Administrateur ")],-1)),e("span",null,"Membre depuis "+a(s.formatDate(s.profile.created_at)),1)])])])]),e("div",Lg,[e("div",qg,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Informations Personnelles",-1)),e("form",{onSubmit:t[9]||(t[9]=le((...o)=>s.updateProfile&&s.updateProfile(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.profileForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.profileForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=o=>s.profileForm.email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.profileForm.email]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),g(e("input",{type:"tel","onUpdate:modelValue":t[5]||(t[5]=o=>s.profileForm.phone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.profileForm.phone]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Poste",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.profileForm.position=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.profileForm.position]])]),e("button",{type:"submit",disabled:s.updatingProfile,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.updatingProfile?"Mise à jour...":"Mettre à jour"),41,Ng)],32)]),e("div",Xg,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Changer le Mot de Passe",-1)),e("form",{onSubmit:t[15]||(t[15]=le((...o)=>s.changePassword&&s.changePassword(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel *",-1)),g(e("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=o=>s.passwordForm.current_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.passwordForm.current_password]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe *",-1)),g(e("input",{type:"password","onUpdate:modelValue":t[11]||(t[11]=o=>s.passwordForm.new_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.passwordForm.new_password]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe *",-1)),g(e("input",{type:"password","onUpdate:modelValue":t[12]||(t[12]=o=>s.passwordForm.new_password_confirmation=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.passwordForm.new_password_confirmation]])]),s.passwordError?(i(),n("div",Hg,a(s.passwordError),1)):x("",!0),e("button",{type:"submit",disabled:s.changingPassword,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511")},a(s.changingPassword?"Changement...":"Changer le mot de passe"),41,Gg)],32)])]),e("div",Wg,[e("div",Kg,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Préférences",-1)),e("div",Jg,[e("div",Yg,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications importantes par email")],-1)),e("label",Qg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.preferences.email_notifications=o),class:"sr-only peer"},null,512),[[oe,s.preferences.email_notifications]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ie(s.preferences.email_notifications?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",Zg,[t[39]||(t[39]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Authentification 2FA"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée avec un code à usage unique")],-1)),e("label",ep,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>s.preferences.two_factor_enabled=o),class:"sr-only peer"},null,512),[[oe,s.preferences.two_factor_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ie(s.preferences.two_factor_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue de l'interface",-1)),g(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.preferences.language=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[40]||(t[40]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[V,s.preferences.language]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),g(e("select",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.preferences.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[42]||(t[42]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1)])],512),[[V,s.preferences.timezone]])]),e("button",{onClick:t[20]||(t[20]=(...o)=>s.updatePreferences&&s.updatePreferences(...o)),disabled:s.updatingPreferences,class:"w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},a(s.updatingPreferences?"Sauvegarde...":"Sauvegarder les préférences"),9,tp)])]),e("div",sp,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité & Sessions",-1)),e("div",op,[e("div",lp,[e("div",ap,a(s.profile.login_count||0),1),t[45]||(t[45]=e("div",{class:"text-sm text-gray-600"},"Connexions",-1))]),e("div",rp,[e("div",np,a(s.activeSessions.length),1),t[46]||(t[46]=e("div",{class:"text-sm text-gray-600"},"Sessions actives",-1))])]),e("div",ip,[t[48]||(t[48]=e("h4",{class:"font-medium text-gray-900"},"Sessions Actives",-1)),(i(!0),n(D,null,T(s.activeSessions,o=>(i(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",dp,[e("div",up,[(i(),n("svg",cp,[...t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])]))]),e("div",null,[e("p",mp,a(o.device),1),e("p",gp,a(o.location)+" • "+a(s.formatRelativeTime(o.last_activity)),1)])]),e("div",pp,[o.current?(i(),n("span",fp," Actuelle ")):(i(),n("button",{key:1,onClick:l=>s.revokeSession(o),class:"text-xs text-red-600 hover:text-red-800 px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Révoquer ",8,xp))])]))),128))]),e("div",vp,[e("button",{onClick:t[21]||(t[21]=(...o)=>s.logoutAllSessions&&s.logoutAllSessions(...o)),class:"w-full text-orange-600 hover:text-orange-800 py-2 px-4 bg-orange-100 hover:bg-orange-200 rounded-lg font-medium transition-colors duration-200"}," Déconnecter toutes les autres sessions "),e("button",{onClick:t[22]||(t[22]=(...o)=>s.downloadAccountData&&s.downloadAccountData(...o)),class:"w-full text-gray-600 hover:text-gray-800 py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200"}," Télécharger mes données ")])])]),s.showAvatarModal?(i(),n("div",yp,[e("div",bp,[t[51]||(t[51]=e("h3",{class:"text-lg font-bold mb-4",style:{color:"#272d63"}},"Changer la photo de profil",-1)),e("div",hp,[e("div",wp,a(s.getInitials(s.profile.name)),1),t[50]||(t[50]=e("p",{class:"text-sm text-gray-600 mt-2"},"Fonctionnalité à venir : upload d'image",-1))]),e("div",_p,[e("button",{onClick:t[23]||(t[23]=o=>s.showAvatarModal=!1),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler "),e("button",{onClick:t[24]||(t[24]=o=>s.showAvatarModal=!1),class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[25]||(t[25]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[26]||(t[26]=o=>o.currentTarget.style.backgroundColor="#272d63")}," Fermer ",32)])])])):x("",!0)])}const Cp=te(Ug,[["render",kp],["__scopeId","data-v-baf281fd"]]),U3=Object.freeze(Object.defineProperty({__proto__:null,default:Cp},Symbol.toStringTag,{value:"Module"})),Mp={name:"CategoryManagement",setup(){const d=f(!1),t=f(!1),c=f(!1),s=f([]),r=f(null),u=G({search:"",status:""}),o=G({name:"",description:"",color:"#272d63",status:"active"}),l=G({current_page:1,per_page:10,total:0,from:0,to:0}),v=de(()=>{if(!Array.isArray(s.value))return[];let m=s.value;return u.search&&(m=m.filter(p=>p.name.toLowerCase().includes(u.search.toLowerCase())||p.description?.toLowerCase().includes(u.search.toLowerCase()))),u.status&&(m=m.filter(p=>p.status===u.status)),m}),P=de(()=>{const m=[];if(!l.total||!l.per_page)return[1];const p=Math.ceil(l.total/l.per_page);for(let S=1;S<=p;S++)m.push(S);return m}),h=async(m=1)=>{d.value=!0;try{const p=new URLSearchParams({page:m,per_page:l.per_page,...u.search&&{search:u.search},...u.status&&{status:u.status}}),S=await fetch(`/api/v1/admin/categories?${p}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(S.ok){const b=await S.json();if(b.success){const y=b.data?.data||b.categories?.data||b.data||[];s.value=y,b.data?.total&&Object.assign(l,{current_page:b.data.current_page||1,per_page:b.data.per_page||20,total:b.data.total||0,from:b.data.from||0,to:b.data.to||0,last_page:b.data.last_page||1})}}else E()}catch{console.log("API non disponible, utilisation des données simulées"),E()}finally{d.value=!1}},E=()=>{s.value=[{id:1,name:"Concerts",slug:"concerts",description:"Événements musicaux et concerts live",color:"#272d63",status:"active",events_count:25,created_at:new Date},{id:2,name:"Conférences",slug:"conferences",description:"Événements professionnels et éducatifs",color:"#fab511",status:"active",events_count:12,created_at:new Date(Date.now()-864e5)},{id:3,name:"Sport",slug:"sport",description:"Événements sportifs et compétitions",color:"#10b981",status:"active",events_count:8,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Culture",slug:"culture",description:"Événements culturels et artistiques",color:"#8b5cf6",status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}],Object.assign(l,{current_page:1,per_page:10,total:s.value.length,from:1,to:s.value.length})},U=async()=>{try{const m=await fetch("/api/v1/admin/categories",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(m.ok)(await m.json()).success&&(F(),h());else{const p={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(p),F()}}catch{console.log("API non disponible, ajout local simulé");const p={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(p),F()}},j=m=>{r.value=m,Object.assign(o,m),c.value=!0},q=async()=>{try{const m=await fetch(`/api/v1/admin/categories/${r.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(m.ok)(await m.json()).success&&(F(),h());else{const p=s.value.findIndex(S=>S.id===r.value.id);p!==-1&&(s.value[p]={...s.value[p],...o}),F()}}catch{console.log("API non disponible, mise à jour locale simulée");const p=s.value.findIndex(S=>S.id===r.value.id);p!==-1&&(s.value[p]={...s.value[p],...o}),F()}},W=async m=>{if(confirm(`Êtes-vous sûr de vouloir supprimer la catégorie "${m.name}" ?`))try{(await fetch(`/api/v1/admin/categories/${m.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?h():s.value=s.value.filter(S=>S.id!==m.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(S=>S.id!==m.id)}},k=m=>{l.current_page=m,h(m)},F=()=>{t.value=!1,c.value=!1,r.value=null,Object.assign(o,{name:"",description:"",color:"#272d63",status:"active"})},w=m=>new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return ae(()=>{h()}),{loading:d,showCreateModal:t,showEditModal:c,categories:s,filters:u,categoryForm:o,pagination:l,filteredCategories:v,paginationPages:P,loadCategories:h,createCategory:U,editCategory:j,updateCategory:q,deleteCategory:W,changePage:k,closeModals:F,formatDate:w}}},Sp={class:"category-management p-6"},Ap={class:"mb-6 flex justify-between items-center"},jp={class:"bg-white rounded-lg shadow p-4 mb-6"},Pp={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Dp={class:"flex items-end"},Tp={key:0,class:"flex justify-center items-center h-64"},Up={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},Fp={class:"overflow-x-auto"},Op={class:"w-full"},zp={class:"divide-y divide-gray-200"},Ep={class:"px-6 py-4"},Rp={class:"flex items-center"},Vp={class:"text-sm font-medium text-gray-900"},Bp={class:"text-sm text-gray-500"},Ip={class:"px-6 py-4"},$p={class:"text-sm text-gray-900"},Lp={class:"px-6 py-4"},qp={class:"text-sm font-medium",style:{color:"#272d63"}},Np={class:"px-6 py-4"},Xp={class:"px-6 py-4 text-sm text-gray-500"},Hp={class:"px-6 py-4"},Gp={class:"flex space-x-2"},Wp=["onClick"],Kp=["onClick"],Jp={key:0,class:"text-center py-12"},Yp={key:2,class:"mt-6 flex justify-between items-center"},Qp={class:"text-sm text-gray-700"},Zp={class:"flex space-x-2"},e1=["onClick"],t1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},s1={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},o1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},l1={class:"space-y-4"},a1={class:"flex space-x-3 mt-6"};function r1(d,t,c,s,r,u){return i(),n("div",Sp,[e("div",Ap,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Catégories"),e("p",{class:"text-gray-600 mt-1"},"Organisez et gérez les catégories d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Nouvelle Catégorie ",-1)])],32)]),e("div",jp,[e("div",Pp,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Nom de catégorie...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[V,s.filters.status]])]),e("div",Dp,[e("button",{onClick:t[5]||(t[5]=(...o)=>s.loadCategories&&s.loadCategories(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(i(),n("div",Tp,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(i(),n("div",Up,[e("div",Fp,[e("table",Op,[t[25]||(t[25]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",zp,[(i(!0),n(D,null,T(s.filteredCategories,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Ep,[e("div",Rp,[e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:ie({backgroundColor:o.color+"20",color:o.color})},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],4),e("div",null,[e("p",Vp,a(o.name),1),e("p",Bp,a(o.slug),1)])])]),e("td",Ip,[e("p",$p,a(o.description||"Aucune description"),1)]),e("td",Lp,[e("span",qp,a(o.events_count||0)+" événements",1)]),e("td",Np,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.status==="active"?"Actif":"Inactif"),3)]),e("td",Xp,a(s.formatDate(o.created_at)),1),e("td",Hp,[e("div",Gp,[e("button",{onClick:l=>s.editCategory(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[8]||(t[8]=l=>{l.currentTarget.style.backgroundColor="#fab511",l.currentTarget.style.color="#fff"}),onMouseleave:t[9]||(t[9]=l=>{l.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",l.currentTarget.style.color="#272d63"})}," Modifier ",40,Wp),e("button",{onClick:l=>s.deleteCategory(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,Kp)])])]))),128))])])]),s.categories.length===0?(i(),n("div",Jp,[...t[26]||(t[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucune catégorie",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre première catégorie.",-1)])])):x("",!0)])),s.pagination.total>s.pagination.per_page?(i(),n("div",Yp,[e("div",Qp," Affichage de "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" catégories ",1),e("div",Zp,[(i(!0),n(D,null,T(s.paginationPages,o=>(i(),n("button",{key:o,onClick:l=>s.changePage(o),class:$(["px-3 py-2 text-sm rounded-lg transition-colors duration-200",o===s.pagination.current_page?"text-white":"text-gray-700 hover:bg-gray-100"]),style:ie(o===s.pagination.current_page?{backgroundColor:"#272d63"}:{})},a(o),15,e1))),128))])])):x("",!0),s.showCreateModal||s.showEditModal?(i(),n("div",t1,[e("div",s1,[e("h3",o1,a(s.showCreateModal?"Nouvelle Catégorie":"Modifier la Catégorie"),1),e("form",{onSubmit:t[17]||(t[17]=le(o=>s.showCreateModal?s.createCategory():s.updateCategory(),["prevent"]))},[e("div",l1,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.categoryForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.categoryForm.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.categoryForm.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.categoryForm.description]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),g(e("input",{type:"color","onUpdate:modelValue":t[12]||(t[12]=o=>s.categoryForm.color=o),class:"w-full h-10 border border-gray-300 rounded-lg"},null,512),[[C,s.categoryForm.color]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.categoryForm.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[V,s.categoryForm.status]])])]),e("div",a1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[15]||(t[15]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[16]||(t[16]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):x("",!0)])}const n1=te(Mp,[["render",r1],["__scopeId","data-v-a15d9acb"]]),F3=Object.freeze(Object.defineProperty({__proto__:null,default:n1},Symbol.toStringTag,{value:"Module"})),i1={name:"VenueManagement",components:{ImageUpload:pe},setup(){const d=f(!1),t=f(!1),c=f(!1),s=f([]),r=f(null),u=f(null),o=G({search:"",city:"",status:""}),l=G({name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},status:"active"}),v=de(()=>{let m=s.value;return o.search&&(m=m.filter(p=>p.name.toLowerCase().includes(o.search.toLowerCase())||p.address.toLowerCase().includes(o.search.toLowerCase()))),o.city&&(m=m.filter(p=>p.city===o.city)),o.status&&(m=m.filter(p=>p.status===o.status)),m}),P=de(()=>!Array.isArray(s.value)||s.value.length===0?[]:[...new Set(s.value.map(m=>m.city))].sort()),h=async()=>{d.value=!0;try{const m=new URLSearchParams({...o.search&&{search:o.search},...o.city&&{city:o.city},...o.status&&{status:o.status}}),p=await fetch(`/api/v1/admin/venues?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(p.ok){const S=await p.json();if(S.success){const b=S.data?.data||S.venues?.data||S.data||[];s.value=b,S.data?.total&&(u.value={total:S.data.total,per_page:S.data.per_page,current_page:S.data.current_page,last_page:S.data.last_page})}}else E()}catch{console.log("API non disponible, utilisation des données simulées"),E()}finally{d.value=!1}},E=()=>{s.value||(s.value=[]),s.value=[{id:1,name:"Centre de Conférences Mbolo",description:"Centre moderne pour événements d'entreprise",address:"Avenue de l'Indépendance",city:"Libreville",postal_code:"BP 123",country:"Gabon",capacity:500,phone:"+241 01 23 45 67",email:"contact@mbolo.ga",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",status:"active",events_count:15,created_at:new Date},{id:2,name:"Salle Polyvalente Akanda",description:"Espace polyvalent pour tous types d'événements",address:"Quartier Akanda",city:"Akanda",postal_code:"BP 456",country:"Gabon",capacity:300,phone:"+241 01 34 56 78",email:"akanda@venues.ga",image:"https://images.unsplash.com/photo-1511578314322-379afb476865?w=400",status:"active",events_count:8,created_at:new Date(Date.now()-864e5)},{id:3,name:"Stade Omnisports",description:"Grand stade pour événements sportifs et concerts",address:"Zone Industrielle Owendo",city:"Owendo",postal_code:"BP 789",country:"Gabon",capacity:5e3,phone:"+241 01 45 67 89",email:"stade@owendo.ga",image:"https://images.unsplash.com/photo-1459865264687-595d652de67e?w=400",status:"active",events_count:12,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Salle des Fêtes Port-Gentil",description:"Salle traditionnelle rénovée",address:"Centre-ville",city:"Port-Gentil",postal_code:"BP 012",country:"Gabon",capacity:200,phone:"+241 01 56 78 90",email:"fetes@portgentil.ga",image:null,status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}]},U=async()=>{try{const m=new FormData;if(m.append("name",l.name),l.description&&m.append("description",l.description),m.append("address",l.address),m.append("city",l.city),l.postal_code&&m.append("postal_code",l.postal_code),l.country&&m.append("country",l.country),l.capacity&&m.append("capacity",l.capacity),l.phone&&m.append("phone",l.phone),l.email&&m.append("email",l.email),l.status&&m.append("status",l.status),l.image.url)m.append("image_url",l.image.url);else if(l.image.urls&&l.image.urls.medium)m.append("image_url",l.image.urls.medium);else if(l.image.filename){const S=`${window.location.origin}/storage/images/venues/medium_${l.image.filename}`;m.append("image_url",S)}const p=await fetch("/api/v1/admin/venues",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:m});if(p.ok)(await p.json()).success&&(k(),h());else{const S={id:Date.now(),...l,events_count:0,created_at:new Date};s.value.unshift(S),k()}}catch{console.log("API non disponible, ajout local simulé");const p={id:Date.now(),...l,events_count:0,created_at:new Date};s.value.unshift(p),k()}},j=m=>{r.value=m;let p={};m.image_url?p={url:m.image_url}:m.image_file&&(p={url:`/storage/${m.image_file}`}),Object.assign(l,{...m,image:p}),c.value=!0},q=async()=>{try{const m=new FormData;if(m.append("name",l.name),l.description&&m.append("description",l.description),m.append("address",l.address),m.append("city",l.city),l.postal_code&&m.append("postal_code",l.postal_code),l.country&&m.append("country",l.country),l.capacity&&m.append("capacity",l.capacity),l.phone&&m.append("phone",l.phone),l.email&&m.append("email",l.email),l.status&&m.append("status",l.status),l.image.url)m.append("image_url",l.image.url);else if(l.image.urls&&l.image.urls.medium)m.append("image_url",l.image.urls.medium);else if(l.image.filename){const S=`${window.location.origin}/storage/images/venues/medium_${l.image.filename}`;m.append("image_url",S)}m.append("_method","PUT");const p=await fetch(`/api/v1/admin/venues/${r.value.id}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:m});if(p.ok)(await p.json()).success&&(k(),h());else{const S=s.value.findIndex(b=>b.id===r.value.id);S!==-1&&(s.value[S]={...s.value[S],...l}),k()}}catch{console.log("API non disponible, mise à jour locale simulée");const p=s.value.findIndex(S=>S.id===r.value.id);p!==-1&&(s.value[p]={...s.value[p],...l}),k()}},W=async m=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le lieu "${m.name}" ?`))try{(await fetch(`/api/v1/admin/venues/${m.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?h():s.value=s.value.filter(S=>S.id!==m.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(S=>S.id!==m.id)}},k=()=>{t.value=!1,c.value=!1,r.value=null,Object.assign(l,{name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},status:"active"})},F=m=>m.image_url&&(m.image_url.startsWith("http://")||m.image_url.startsWith("https://"))?m.image_url:m.image_file?`/storage/${m.image_file}`:m.image?m.image.startsWith("http://")||m.image.startsWith("https://")?m.image:`/storage/${m.image}`:null,w=m=>{m.target.style.display="none"};return ae(()=>{h()}),{loading:d,showCreateModal:t,showEditModal:c,venues:s,filters:o,venueForm:l,filteredVenues:v,cities:P,loadVenues:h,createVenue:U,editVenue:j,updateVenue:q,deleteVenue:W,closeModals:k,getVenueImageUrl:F,handleImageError:w}}},d1={class:"venue-management p-6"},u1={class:"mb-6 flex justify-between items-center"},c1={class:"bg-white rounded-lg shadow p-4 mb-6"},m1={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},g1=["value"],p1={class:"flex items-end"},f1={key:0,class:"flex justify-center items-center h-64"},x1={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},v1={class:"h-48 bg-gray-200 rounded-t-lg relative overflow-hidden"},y1=["src","alt"],b1={key:1,class:"w-full h-full flex items-center justify-center"},h1={class:"absolute top-3 right-3"},w1={class:"p-4"},_1={class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},k1={class:"space-y-2 text-sm text-gray-600"},C1={class:"flex items-center"},M1={class:"flex items-center"},S1={class:"flex items-center"},A1={class:"flex space-x-2 mt-4"},j1=["onClick"],P1=["onClick"],D1={key:2,class:"text-center py-12"},T1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},U1={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-90vh overflow-y-auto"},F1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},O1={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z1={class:"md:col-span-2"},E1={class:"md:col-span-2"},R1={class:"md:col-span-2"},V1={class:"flex space-x-3 mt-6"};function B1(d,t,c,s,r,u){const o=ge("ImageUpload");return i(),n("div",d1,[e("div",u1,[t[28]||(t[28]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Lieux"),e("p",{class:"text-gray-600 mt-1"},"Gérez les lieux et salles d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=l=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=l=>l.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=l=>l.currentTarget.style.backgroundColor="#272d63")},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Nouveau Lieu ",-1)])],32)]),e("div",c1,[e("div",m1,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>s.filters.search=l),placeholder:"Nom du lieu...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.filters.search]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>s.filters.city=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[t[30]||(t[30]=e("option",{value:""},"Toutes les villes",-1)),(i(!0),n(D,null,T(s.cities,l=>(i(),n("option",{key:l,value:l},a(l),9,g1))),128))],512),[[V,s.filters.city]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>s.filters.status=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[32]||(t[32]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[V,s.filters.status]])]),e("div",p1,[e("button",{onClick:t[6]||(t[6]=(...l)=>s.loadVenues&&s.loadVenues(...l)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[7]||(t[7]=l=>l.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[8]||(t[8]=l=>l.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(i(),n("div",f1,[...t[34]||(t[34]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(i(),n("div",x1,[(i(!0),n(D,null,T(s.filteredVenues,l=>(i(),n("div",{key:l.id,class:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-200"},[e("div",v1,[s.getVenueImageUrl(l)?(i(),n("img",{key:0,src:s.getVenueImageUrl(l),alt:l.name,class:"w-full h-full object-cover",onError:t[9]||(t[9]=(...v)=>s.handleImageError&&s.handleImageError(...v))},null,40,y1)):(i(),n("div",b1,[...t[35]||(t[35]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),e("div",h1,[e("span",{class:$(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",l.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(l.status==="active"?"Actif":"Inactif"),3)])]),e("div",w1,[e("h3",_1,a(l.name),1),e("div",k1,[e("div",C1,[t[36]||(t[36]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),se(" "+a(l.address)+", "+a(l.city),1)]),e("div",M1,[t[37]||(t[37]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),se(" Capacité: "+a(l.capacity)+" personnes ",1)]),e("div",S1,[t[38]||(t[38]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),se(" "+a(l.events_count||0)+" événements ",1)])]),e("div",A1,[e("button",{onClick:v=>s.editVenue(l),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[10]||(t[10]=v=>{v.currentTarget.style.backgroundColor="#fab511",v.currentTarget.style.color="#fff"}),onMouseleave:t[11]||(t[11]=v=>{v.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",v.currentTarget.style.color="#272d63"})}," Modifier ",40,j1),e("button",{onClick:v=>s.deleteVenue(l),class:"flex-1 text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,P1)])])]))),128))])),s.venues.length===0&&!s.loading?(i(),n("div",D1,[...t[39]||(t[39]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun lieu",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par ajouter votre premier lieu.",-1)])])):x("",!0),s.showCreateModal||s.showEditModal?(i(),n("div",T1,[e("div",U1,[e("h3",F1,a(s.showCreateModal?"Nouveau Lieu":"Modifier le Lieu"),1),e("form",{onSubmit:t[26]||(t[26]=le(l=>s.showCreateModal?s.createVenue():s.updateVenue(),["prevent"]))},[e("div",O1,[e("div",z1,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du lieu *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=l=>s.venueForm.name=l),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.name]])]),e("div",E1,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=l=>s.venueForm.description=l),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.description]])]),e("div",R1,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image du lieu",-1)),me(o,{modelValue:s.venueForm.image,"onUpdate:modelValue":t[14]||(t[14]=l=>s.venueForm.image=l),"entity-type":"venues",size:"medium","alt-text":"Image du lieu"},null,8,["modelValue"])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=l=>s.venueForm.address=l),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.address]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=l=>s.venueForm.city=l),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.city]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=l=>s.venueForm.postal_code=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.postal_code]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=l=>s.venueForm.country=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.country]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Capacité *",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=l=>s.venueForm.capacity=l),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.capacity]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[20]||(t[20]=l=>s.venueForm.status=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[48]||(t[48]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[V,s.venueForm.status]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),g(e("input",{type:"tel","onUpdate:modelValue":t[21]||(t[21]=l=>s.venueForm.phone=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.phone]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),g(e("input",{type:"email","onUpdate:modelValue":t[22]||(t[22]=l=>s.venueForm.email=l),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[C,s.venueForm.email]])])]),e("div",V1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[23]||(t[23]=l=>l.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[24]||(t[24]=l=>l.currentTarget.style.backgroundColor="#272d63")},a(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[25]||(t[25]=(...l)=>s.closeModals&&s.closeModals(...l)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):x("",!0)])}const I1=te(i1,[["render",B1],["__scopeId","data-v-44a0f23c"]]),O3=Object.freeze(Object.defineProperty({__proto__:null,default:I1},Symbol.toStringTag,{value:"Module"})),$1={name:"UserTypes",data(){return{userTypes:[],loading:!1,showDetailsModal:!1,selectedUserType:null,filters:{status:""},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadUserTypes()},methods:{async loadUserTypes(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/user-types",{params:t});c.data.success&&(this.userTypes=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement types utilisateurs:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les types d'utilisateurs"})}finally{this.loading=!1}},resetFilters(){this.filters={status:""},this.loadUserTypes()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadUserTypes(d)},viewDetails(d){this.selectedUserType=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedUserType=null},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}},L1={class:"user-types-page p-6 bg-gray-50 min-h-screen"},q1={class:"bg-white rounded-lg shadow p-6 mb-8"},N1={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},X1={class:"flex items-end"},H1={class:"bg-white rounded-lg shadow"},G1={key:0,class:"p-8 text-center"},W1={key:1,class:"p-8 text-center text-gray-500"},K1={key:2,class:"overflow-x-auto"},J1={class:"w-full"},Y1={class:"divide-y divide-gray-200"},Q1={class:"px-6 py-4 text-sm text-gray-900"},Z1={class:"px-6 py-4 text-sm font-medium text-gray-900"},ef={class:"px-6 py-4 text-sm text-gray-900"},tf={class:"px-6 py-4 text-sm text-gray-600"},sf={class:"px-6 py-4 text-sm text-gray-900"},of={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},lf={class:"px-6 py-4 text-sm"},af={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},rf={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},nf={class:"px-6 py-4 text-sm"},df=["onClick"],uf={key:3,class:"p-6 border-t"},cf={class:"flex items-center justify-between"},mf={class:"text-sm text-gray-700"},gf={class:"flex space-x-2"},pf=["disabled"],ff=["disabled"],xf={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vf={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},yf={class:"p-6 border-b"},bf={class:"flex items-center justify-between"},hf={key:0,class:"p-6"},wf={class:"space-y-4"},_f={class:"text-gray-900"},kf={class:"text-gray-900 font-medium"},Cf={class:"text-gray-900"},Mf={class:"text-gray-900"},Sf={class:"text-gray-900"},Af={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},jf={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},Pf={class:"text-gray-900"},Df={class:"text-gray-900"},Tf={class:"p-6 border-t bg-gray-50"};function Uf(d,t,c,s,r,u){return i(),n("div",L1,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Types d'Utilisateurs"),e("p",{class:"text-gray-600"},"Consultation des types d'utilisateurs du système")])])],-1)),e("div",q1,[t[9]||(t[9]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",N1,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.filters.status=o),onChange:t[1]||(t[1]=(...o)=>u.loadUserTypes&&u.loadUserTypes(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[7]||(t[7]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[V,r.filters.status]])]),e("div",X1,[e("button",{onClick:t[2]||(t[2]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",H1,[t[13]||(t[13]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Types d'Utilisateurs")],-1)),r.loading?(i(),n("div",G1,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.userTypes.length===0?(i(),n("div",W1," Aucun type d'utilisateur trouvé ")):(i(),n("div",K1,[e("table",J1,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Label"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Y1,[(i(!0),n(D,null,T(r.userTypes,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Q1,a(o.id),1),e("td",Z1,a(o.name),1),e("td",ef,a(o.label),1),e("td",tf,a(o.description||"N/A"),1),e("td",sf,[e("span",of,a(o.users_count||0),1)]),e("td",lf,[o.is_active?(i(),n("span",af," Actif ")):(i(),n("span",rf," Inactif "))]),e("td",nf,[e("button",{onClick:l=>u.viewDetails(o),class:"text-primea-blue hover:text-blue-800"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,df)])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",uf,[e("div",cf,[e("div",mf," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",gf,[e("button",{onClick:t[3]||(t[3]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,pf),e("button",{onClick:t[4]||(t[4]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,ff)])])])):x("",!0)]),r.showDetailsModal?(i(),n("div",xf,[e("div",vf,[e("div",yf,[e("div",bf,[t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Type d'Utilisateur",-1)),e("button",{onClick:t[5]||(t[5]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedUserType?(i(),n("div",hf,[e("div",wf,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID",-1)),e("p",_f,a(r.selectedUserType.id),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",kf,a(r.selectedUserType.name),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Label",-1)),e("p",Cf,a(r.selectedUserType.label),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",Mf,a(r.selectedUserType.description||"Aucune description"),1)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre d'utilisateurs",-1)),e("p",Sf,a(r.selectedUserType.users_count||0),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),r.selectedUserType.is_active?(i(),n("span",Af," Actif ")):(i(),n("span",jf," Inactif "))]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de création",-1)),e("p",Pf,a(u.formatDate(r.selectedUserType.created_at)),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dernière modification",-1)),e("p",Df,a(u.formatDate(r.selectedUserType.updated_at)),1)])])])):x("",!0),e("div",Tf,[e("button",{onClick:t[6]||(t[6]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const Ff=te($1,[["render",Uf]]),z3=Object.freeze(Object.defineProperty({__proto__:null,default:Ff},Symbol.toStringTag,{value:"Module"})),Of={name:"Privileges",data(){return{privileges:[],loading:!1,showDetailsModal:!1,selectedPrivilege:null,filters:{module:"",action:"",status:""},pagination:{current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}}},mounted(){this.loadPrivileges()},methods:{async loadPrivileges(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/privileges",{params:t});c.data.success&&(this.privileges=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement privilèges:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loading=!1}},resetFilters(){this.filters={module:"",action:"",status:""},this.loadPrivileges()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadPrivileges(d)},viewDetails(d){this.selectedPrivilege=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedPrivilege=null},formatModule(d){return{auth:"Authentification",events:"Événements",orders:"Commandes",payments:"Paiements",tickets:"Billets",scanning:"Scan",organizers:"Organisateurs",users:"Utilisateurs",admin:"Administration"}[d]||d},formatAction(d){return{create:"Créer",read:"Lire",view:"Voir",update:"Modifier",delete:"Supprimer",manage:"Gérer",access:"Accéder"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}},zf={class:"privileges-page p-6 bg-gray-50 min-h-screen"},Ef={class:"bg-white rounded-lg shadow p-6 mb-8"},Rf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Vf={class:"flex items-end"},Bf={class:"bg-white rounded-lg shadow"},If={class:"p-6 border-b"},$f={class:"text-sm text-gray-600 mt-1"},Lf={key:0,class:"p-8 text-center"},qf={key:1,class:"p-8 text-center text-gray-500"},Nf={key:2,class:"overflow-x-auto"},Xf={class:"w-full"},Hf={class:"divide-y divide-gray-200"},Gf={class:"px-6 py-4 text-sm text-gray-900"},Wf={class:"px-6 py-4 text-sm font-medium text-gray-900"},Kf={class:"px-6 py-4 text-sm text-gray-600 font-mono"},Jf={class:"px-6 py-4 text-sm"},Yf={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium"},Qf={class:"px-6 py-4 text-sm"},Zf={class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium"},e2={class:"px-6 py-4 text-sm text-gray-900"},t2={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},s2={class:"px-6 py-4 text-sm"},o2={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},l2={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},a2={class:"px-6 py-4 text-sm"},r2=["onClick"],n2={key:3,class:"p-6 border-t"},i2={class:"flex items-center justify-between"},d2={class:"text-sm text-gray-700"},u2={class:"flex space-x-2"},c2=["disabled"],m2=["disabled"],g2={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},p2={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},f2={class:"p-6 border-b"},x2={class:"flex items-center justify-between"},v2={key:0,class:"p-6"},y2={class:"space-y-4"},b2={class:"text-gray-900"},h2={class:"text-gray-900 font-medium"},w2={class:"text-gray-900 font-mono bg-gray-100 px-3 py-2 rounded"},_2={class:"text-gray-900"},k2={class:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium"},C2={class:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium"},M2={key:0,class:"flex flex-wrap gap-2 mt-2"},S2={key:1,class:"text-gray-500"},A2={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},j2={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},P2={class:"text-gray-900"},D2={class:"text-gray-900"},T2={class:"p-6 border-t bg-gray-50"};function U2(d,t,c,s,r,u){return i(),n("div",zf,[t[34]||(t[34]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Privilèges"),e("p",{class:"text-gray-600"},"Consultation des privilèges du système")])])],-1)),e("div",Ef,[t[17]||(t[17]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Rf,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Module",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.filters.module=o),onChange:t[1]||(t[1]=(...o)=>u.loadPrivileges&&u.loadPrivileges(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[11]||(t[11]=[re('<option value="">Tous les modules</option><option value="auth">Authentification</option><option value="events">Événements</option><option value="orders">Commandes</option><option value="payments">Paiements</option><option value="tickets">Billets</option><option value="scanning">Scan</option><option value="organizers">Organisateurs</option><option value="users">Utilisateurs</option><option value="admin">Administration</option>',10)])],544),[[V,r.filters.module]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Action",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.filters.action=o),onChange:t[3]||(t[3]=(...o)=>u.loadPrivileges&&u.loadPrivileges(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[13]||(t[13]=[re('<option value="">Toutes les actions</option><option value="create">Créer</option><option value="read">Lire</option><option value="view">Voir</option><option value="update">Modifier</option><option value="delete">Supprimer</option><option value="manage">Gérer</option><option value="access">Accéder</option>',8)])],544),[[V,r.filters.action]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>r.filters.status=o),onChange:t[5]||(t[5]=(...o)=>u.loadPrivileges&&u.loadPrivileges(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[15]||(t[15]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[V,r.filters.status]])]),e("div",Vf,[e("button",{onClick:t[6]||(t[6]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Bf,[e("div",If,[t[18]||(t[18]=e("h2",{class:"text-xl font-bold"},"Liste des Privilèges",-1)),e("p",$f,"Total: "+a(r.pagination.total)+" privilège(s)",1)]),r.loading?(i(),n("div",Lf,[...t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.privileges.length===0?(i(),n("div",qf," Aucun privilège trouvé ")):(i(),n("div",Nf,[e("table",Xf,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Slug"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Module"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Hf,[(i(!0),n(D,null,T(r.privileges,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Gf,a(o.id),1),e("td",Wf,a(o.name),1),e("td",Kf,a(o.slug),1),e("td",Jf,[e("span",Yf,a(u.formatModule(o.module)),1)]),e("td",Qf,[e("span",Zf,a(u.formatAction(o.action)),1)]),e("td",e2,[e("span",t2,a(o.roles_count||0),1)]),e("td",s2,[o.is_active?(i(),n("span",o2," Actif ")):(i(),n("span",l2," Inactif "))]),e("td",a2,[e("button",{onClick:l=>u.viewDetails(o),class:"text-primea-blue hover:text-blue-800"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,r2)])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",n2,[e("div",i2,[e("div",d2," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",u2,[e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,c2),e("button",{onClick:t[8]||(t[8]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,m2)])])])):x("",!0)]),r.showDetailsModal?(i(),n("div",g2,[e("div",p2,[e("div",f2,[e("div",x2,[t[23]||(t[23]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Privilège",-1)),e("button",{onClick:t[9]||(t[9]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[22]||(t[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedPrivilege?(i(),n("div",v2,[e("div",y2,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID",-1)),e("p",b2,a(r.selectedPrivilege.id),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",h2,a(r.selectedPrivilege.name),1)]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),e("p",w2,a(r.selectedPrivilege.slug),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",_2,a(r.selectedPrivilege.description||"Aucune description"),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Module",-1)),e("span",k2,a(u.formatModule(r.selectedPrivilege.module)),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Action",-1)),e("span",C2,a(u.formatAction(r.selectedPrivilege.action)),1)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rôles associés",-1)),r.selectedPrivilege.roles&&r.selectedPrivilege.roles.length>0?(i(),n("div",M2,[(i(!0),n(D,null,T(r.selectedPrivilege.roles,o=>(i(),n("span",{key:o.id,class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},a(o.name),1))),128))])):(i(),n("p",S2,"Aucun rôle associé"))]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),r.selectedPrivilege.is_active?(i(),n("span",A2," Actif ")):(i(),n("span",j2," Inactif "))]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de création",-1)),e("p",P2,a(u.formatDate(r.selectedPrivilege.created_at)),1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dernière modification",-1)),e("p",D2,a(u.formatDate(r.selectedPrivilege.updated_at)),1)])])])):x("",!0),e("div",T2,[e("button",{onClick:t[10]||(t[10]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const F2=te(Of,[["render",U2]]),E3=Object.freeze(Object.defineProperty({__proto__:null,default:F2},Symbol.toStringTag,{value:"Module"})),O2={name:"Roles",data(){return{roles:[],allPrivileges:[],availablePrivileges:[],userTypes:[],loading:!1,loadingPrivileges:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,showPrivilegesModal:!1,isEditMode:!1,selectedRole:null,privilegeSearch:"",selectedPrivilegeIds:[],filters:{type:"",status:""},formData:{name:"",description:"",user_type_id:"",type:"custom",level:10,is_active:!0,privilege_ids:[]},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},computed:{filteredPrivileges(){if(!this.privilegeSearch)return this.allPrivileges;const d=this.privilegeSearch.toLowerCase();return this.allPrivileges.filter(t=>t.name.toLowerCase().includes(d)||t.slug.toLowerCase().includes(d)||t.module.toLowerCase().includes(d)||t.action.toLowerCase().includes(d))},filteredAvailablePrivileges(){if(!this.privilegeSearch)return this.availablePrivileges;const d=this.privilegeSearch.toLowerCase();return this.availablePrivileges.filter(t=>t.name.toLowerCase().includes(d)||t.slug.toLowerCase().includes(d)||t.module.toLowerCase().includes(d)||t.action.toLowerCase().includes(d))}},mounted(){this.loadRoles(),this.loadUserTypes()},methods:{async loadRoles(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/roles",{params:t});c.data.success&&(this.roles=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement rôles:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les rôles"})}finally{this.loading=!1}},async loadUserTypes(){try{const d=await J.get("/api/v1/admin/user-types",{params:{per_page:100}});d.data.success&&(this.userTypes=d.data.data.data)}catch(d){console.error("Erreur chargement types utilisateurs:",d)}},async loadAllPrivileges(){this.loadingPrivileges=!0;try{const d=await J.get("/api/v1/admin/privileges",{params:{per_page:1e3}});d.data.success&&(this.allPrivileges=d.data.data.data)}catch(d){console.error("Erreur chargement privilèges:",d),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loadingPrivileges=!1}},async loadPrivilegesForUserType(){if(!this.formData.user_type_id){this.availablePrivileges=[];return}this.loadingPrivileges=!0;try{const d=await J.get("/api/v1/admin/privileges",{params:{per_page:1e3,user_type_id:this.formData.user_type_id}});d.data.success&&(this.availablePrivileges=d.data.data.data)}catch(d){console.error("Erreur chargement privilèges:",d),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loadingPrivileges=!1}},togglePrivilegeInForm(d){const t=this.formData.privilege_ids.indexOf(d);t>-1?this.formData.privilege_ids.splice(t,1):this.formData.privilege_ids.push(d)},resetFilters(){this.filters={type:"",status:""},this.loadRoles()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadRoles(d)},async openCreateModal(){this.isEditMode=!1,this.formData={name:"",description:"",user_type_id:"",type:"custom",level:10,is_active:!0,privilege_ids:[]},this.availablePrivileges=[],this.privilegeSearch="",this.showFormModal=!0},async openEditModal(d){this.isEditMode=!0,this.selectedRole=d,this.formData={name:d.name,description:d.description,user_type_id:d.user_type_id,type:d.type||"custom",level:d.level,is_active:d.is_active,privilege_ids:d.privileges?.map(t=>t.id)||[]},this.privilegeSearch="",this.showFormModal=!0,d.user_type_id&&await this.loadPrivilegesForUserType()},closeFormModal(){this.showFormModal=!1,this.selectedRole=null},async submitForm(){this.submitting=!0;try{const d=this.isEditMode?`/api/v1/admin/roles/${this.selectedRole.id}`:"/api/v1/admin/roles",t=this.isEditMode?"put":"post",c={name:this.formData.name,description:this.formData.description,user_type_id:this.formData.user_type_id,type:this.formData.type,level:this.formData.level,is_active:this.formData.is_active,privilege_ids:this.formData.privilege_ids},s=await J[t](d,c);s.data.success&&(R.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadRoles(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),R.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedRole=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedRole=null},async managePrivileges(d){this.selectedRole=d,this.selectedPrivilegeIds=d.privileges?.map(t=>t.id)||[],this.privilegeSearch="",this.showPrivilegesModal=!0,await this.loadAllPrivileges()},closePrivilegesModal(){this.showPrivilegesModal=!1,this.selectedRole=null,this.selectedPrivilegeIds=[]},togglePrivilege(d){const t=this.selectedPrivilegeIds.indexOf(d);t>-1?this.selectedPrivilegeIds.splice(t,1):this.selectedPrivilegeIds.push(d)},async savePrivileges(){this.submitting=!0;try{(await J.post(`/api/v1/admin/roles/${this.selectedRole.id}/privileges`,{privilege_ids:this.selectedPrivilegeIds})).data.success&&(R.fire({icon:"success",title:"Succès",text:"Privilèges mis à jour avec succès",timer:2e3}),this.closePrivilegesModal(),this.loadRoles(this.pagination.current_page))}catch(d){console.error("Erreur sauvegarde privilèges:",d),R.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},confirmDelete(d){R.fire({title:"Supprimer ce rôle ?",html:`
          <p>Voulez-vous vraiment supprimer le rôle <strong>${d.name}</strong> ?</p>
          ${d.users_count>0?'<p class="text-red-600 mt-2">⚠️ Ce rôle est assigné à '+d.users_count+" utilisateur(s)</p>":""}
        `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteRole(d)})},async deleteRole(d){try{const t=await J.delete(`/api/v1/admin/roles/${d.id}`);t.data.success&&(R.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadRoles(this.pagination.current_page))}catch(t){console.error("Erreur suppression rôle:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer ce rôle"})}},getTypeClass(d){return{system:"bg-red-100 text-red-800",organizer:"bg-yellow-100 text-yellow-800",custom:"bg-green-100 text-green-800"}[d]||"bg-gray-100 text-gray-800"},formatType(d){return{system:"Système",organizer:"Organisateur",custom:"Personnalisé"}[d]||d}}},z2={class:"roles-page p-6 bg-gray-50 min-h-screen"},E2={class:"mb-8"},R2={class:"flex items-center justify-between"},V2={class:"bg-white rounded-lg shadow p-6 mb-8"},B2={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},I2={class:"flex items-end"},$2={class:"bg-white rounded-lg shadow"},L2={class:"p-6 border-b"},q2={class:"text-sm text-gray-600 mt-1"},N2={key:0,class:"p-8 text-center"},X2={key:1,class:"p-8 text-center text-gray-500"},H2={key:2,class:"overflow-x-auto"},G2={class:"w-full"},W2={class:"divide-y divide-gray-200"},K2={class:"px-6 py-4"},J2={class:"text-sm font-medium text-gray-900"},Y2={class:"text-xs text-gray-500 font-mono"},Q2={class:"px-6 py-4 text-sm"},Z2={class:"px-6 py-4 text-sm text-gray-900"},ex={class:"bg-gray-100 px-2 py-1 rounded text-xs font-medium"},tx={class:"px-6 py-4 text-sm text-gray-900"},sx={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},ox={class:"px-6 py-4 text-sm text-gray-900"},lx=["onClick"],ax={class:"px-6 py-4 text-sm"},rx={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},nx={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},ix={class:"px-6 py-4 text-sm"},dx={class:"flex items-center space-x-2"},ux=["onClick"],cx=["onClick"],mx=["onClick"],gx={key:3,class:"p-6 border-t"},px={class:"flex items-center justify-between"},fx={class:"text-sm text-gray-700"},xx={class:"flex space-x-2"},vx=["disabled"],yx=["disabled"],bx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},hx={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},wx={class:"p-6 border-b"},_x={class:"flex items-center justify-between"},kx={class:"text-xl font-bold text-primea-blue"},Cx={class:"space-y-4"},Mx=["value"],Sx={class:"flex items-center"},Ax={key:0,class:"border-t pt-4"},jx={class:"block text-sm font-medium text-gray-700 mb-3"},Px={key:0,class:"text-center py-4"},Dx={key:1,class:"text-center py-4 text-gray-500"},Tx={key:2},Ux={class:"mb-3"},Fx={class:"space-y-2 max-h-80 overflow-y-auto border rounded-lg p-3"},Ox=["id","checked","onChange"],zx=["for"],Ex={class:"font-medium text-sm"},Rx={class:"text-xs text-gray-500"},Vx={class:"flex gap-1 ml-2"},Bx={class:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs"},Ix={class:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-xs"},$x={class:"mt-6 flex justify-end space-x-3"},Lx=["disabled"],qx={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Nx={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Xx={class:"p-6 border-b"},Hx={class:"flex items-center justify-between"},Gx={key:0,class:"p-6"},Wx={class:"grid grid-cols-2 gap-6"},Kx={class:"text-gray-900 font-medium"},Jx={class:"text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded"},Yx={class:"bg-gray-100 px-3 py-1 rounded text-sm font-medium"},Qx={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},Zx={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},ev={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},tv={class:"mt-6"},sv={class:"text-gray-900"},ov={class:"mt-6"},lv={class:"block text-sm font-medium text-gray-700 mb-2"},av={key:0,class:"flex flex-wrap gap-2 mt-2"},rv={key:1,class:"text-gray-500"},nv={class:"p-6 border-t bg-gray-50"},iv={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},dv={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},uv={class:"p-6 border-b"},cv={class:"flex items-center justify-between"},mv={class:"text-xl font-bold text-primea-blue"},gv={class:"p-6"},pv={key:0,class:"text-center py-8"},fv={key:1},xv={class:"mb-4"},vv={class:"space-y-4 max-h-96 overflow-y-auto"},yv=["id","checked","onChange"],bv=["for"],hv={class:"font-medium"},wv={class:"text-xs text-gray-500"},_v={class:"flex gap-2"},kv={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs"},Cv={class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-xs"},Mv={class:"mt-4 text-sm text-gray-600"},Sv={class:"p-6 border-t bg-gray-50 flex justify-end space-x-3"},Av=["disabled"];function jv(d,t,c,s,r,u){return i(),n("div",z2,[e("div",E2,[e("div",R2,[t[25]||(t[25]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Rôles"),e("p",{class:"text-gray-600"},"Créer et gérer les rôles personnalisés")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>u.openCreateModal&&u.openCreateModal(...o)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer un Rôle ",-1)])])])]),e("div",V2,[t[30]||(t[30]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",B2,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.filters.type=o),onChange:t[2]||(t[2]=(...o)=>u.loadRoles&&u.loadRoles(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[26]||(t[26]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"system"},"Système",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"custom"},"Personnalisé",-1)])],544),[[V,r.filters.type]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.filters.status=o),onChange:t[4]||(t[4]=(...o)=>u.loadRoles&&u.loadRoles(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[V,r.filters.status]])]),e("div",I2,[e("button",{onClick:t[5]||(t[5]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",$2,[e("div",L2,[t[31]||(t[31]=e("h2",{class:"text-xl font-bold"},"Liste des Rôles",-1)),e("p",q2,"Total: "+a(r.pagination.total)+" rôle(s)",1)]),r.loading?(i(),n("div",N2,[...t[32]||(t[32]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.roles.length===0?(i(),n("div",X2," Aucun rôle trouvé ")):(i(),n("div",H2,[e("table",G2,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Niveau"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Privilèges"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",W2,[(i(!0),n(D,null,T(r.roles,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",K2,[e("div",null,[e("div",J2,a(o.name),1),e("div",Y2,a(o.slug),1)])]),e("td",Q2,[e("span",{class:$([u.getTypeClass(o.type),"px-2 py-1 rounded-full text-xs font-medium"])},a(u.formatType(o.type)),3)]),e("td",Z2,[e("span",ex," Niveau "+a(o.level),1)]),e("td",tx,[e("span",sx,a(o.users_count||0),1)]),e("td",ox,[e("button",{onClick:l=>u.managePrivileges(o),class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-purple-200"},a(o.privileges_count||0)+" privilège(s) ",9,lx)]),e("td",ax,[o.is_active?(i(),n("span",rx," Actif ")):(i(),n("span",nx," Inactif "))]),e("td",ix,[e("div",dx,[e("button",{onClick:l=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[33]||(t[33]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,ux),o.type!=="system"?(i(),n("button",{key:0,onClick:l=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[34]||(t[34]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,cx)):x("",!0),o.type!=="system"?(i(),n("button",{key:1,onClick:l=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,mx)):x("",!0)])])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",gx,[e("div",px,[e("div",fx," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",xx,[e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,vx),e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,yx)])])])):x("",!0)]),r.showFormModal?(i(),n("div",bx,[e("div",hx,[e("div",wx,[e("div",_x,[e("h3",kx,a(r.isEditMode?"Modifier le Rôle":"Créer un Rôle"),1),e("button",{onClick:t[8]||(t[8]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[37]||(t[37]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[17]||(t[17]=le((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",Cx,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type d'utilisateur *",-1)),g(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>r.formData.user_type_id=o),onChange:t[10]||(t[10]=(...o)=>u.loadPrivilegesForUserType&&u.loadPrivilegesForUserType(...o)),required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un type",-1)),(i(!0),n(D,null,T(r.userTypes,o=>(i(),n("option",{key:o.id,value:o.id},a(o.label),9,Mx))),128))],544),[[V,r.formData.user_type_id]]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1"},"Les privilèges disponibles dépendent du type d'utilisateur",-1))]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du rôle *",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>r.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue",placeholder:"Ex: Modérateur"},null,512),[[C,r.formData.name]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=o=>r.formData.description=o),rows:"3",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue",placeholder:"Description du rôle"},null,512),[[C,r.formData.description]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Niveau (0-100) *",-1)),g(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>r.formData.level=o),type:"number",min:"0",max:"100",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.level,void 0,{number:!0}]]),t[44]||(t[44]=e("p",{class:"text-xs text-gray-500 mt-1"},"Plus le niveau est élevé, plus le rôle a de priorité",-1))]),e("div",null,[e("label",Sx,[g(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>r.formData.is_active=o),type:"checkbox",class:"mr-2"},null,512),[[oe,r.formData.is_active]]),t[45]||(t[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Actif",-1))])]),r.formData.user_type_id?(i(),n("div",Ax,[e("label",jx," Privilèges ("+a(r.formData.privilege_ids.length)+" sélectionné(s)) ",1),r.loadingPrivileges?(i(),n("div",Px,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Chargement...",-1)])])):r.availablePrivileges.length===0?(i(),n("div",Dx," Aucun privilège disponible pour ce type d'utilisateur ")):(i(),n("div",Tx,[e("div",Ux,[g(e("input",{"onUpdate:modelValue":t[15]||(t[15]=o=>r.privilegeSearch=o),type:"text",placeholder:"Rechercher un privilège...",class:"w-full border rounded-lg px-3 py-2 text-sm"},null,512),[[C,r.privilegeSearch]])]),e("div",Fx,[(i(!0),n(D,null,T(u.filteredAvailablePrivileges,o=>(i(),n("div",{key:o.id,class:"flex items-start p-2 hover:bg-gray-50 rounded"},[e("input",{type:"checkbox",id:`priv-form-${o.id}`,checked:r.formData.privilege_ids.includes(o.id),onChange:l=>u.togglePrivilegeInForm(o.id),class:"mt-1 mr-3"},null,40,Ox),e("label",{for:`priv-form-${o.id}`,class:"flex-1 cursor-pointer"},[e("div",Ex,a(o.name),1),e("div",Rx,a(o.description||o.slug),1)],8,zx),e("div",Vx,[e("span",Bx,a(o.module),1),e("span",Ix,a(o.action),1)])]))),128))])]))])):x("",!0)]),e("div",$x,[e("button",{type:"button",onClick:t[16]||(t[16]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:r.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},a(r.submitting?"En cours...":r.isEditMode?"Modifier":"Créer"),9,Lx)])],32)])])):x("",!0),r.showDetailsModal?(i(),n("div",qx,[e("div",Nx,[e("div",Xx,[e("div",Hx,[t[48]||(t[48]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Rôle",-1)),e("button",{onClick:t[18]||(t[18]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[47]||(t[47]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedRole?(i(),n("div",Gx,[e("div",Wx,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",Kx,a(r.selectedRole.name),1)]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),e("p",Jx,a(r.selectedRole.slug),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("span",{class:$([u.getTypeClass(r.selectedRole.type),"px-3 py-1 rounded-full text-sm font-medium"])},a(u.formatType(r.selectedRole.type)),3)]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau",-1)),e("span",Yx," Niveau "+a(r.selectedRole.level),1)]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Utilisateurs",-1)),e("span",Qx,a(r.selectedRole.users_count||0),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),r.selectedRole.is_active?(i(),n("span",Zx," Actif ")):(i(),n("span",ev," Inactif "))])]),e("div",tv,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),e("p",sv,a(r.selectedRole.description||"Aucune description"),1)]),e("div",ov,[e("label",lv,"Privilèges associés ("+a(r.selectedRole.privileges?.length||0)+")",1),r.selectedRole.privileges&&r.selectedRole.privileges.length>0?(i(),n("div",av,[(i(!0),n(D,null,T(r.selectedRole.privileges,o=>(i(),n("span",{key:o.id,class:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm"},a(o.name),1))),128))])):(i(),n("p",rv,"Aucun privilège associé"))])])):x("",!0),e("div",nv,[e("button",{onClick:t[19]||(t[19]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0),r.showPrivilegesModal?(i(),n("div",iv,[e("div",dv,[e("div",uv,[e("div",cv,[e("h3",mv," Gérer les Privilèges - "+a(r.selectedRole?.name),1),e("button",{onClick:t[20]||(t[20]=(...o)=>u.closePrivilegesModal&&u.closePrivilegesModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[56]||(t[56]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",gv,[r.loadingPrivileges?(i(),n("div",pv,[...t[57]||(t[57]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des privilèges...",-1)])])):(i(),n("div",fv,[e("div",xv,[g(e("input",{"onUpdate:modelValue":t[21]||(t[21]=o=>r.privilegeSearch=o),type:"text",placeholder:"Rechercher un privilège...",class:"w-full border rounded-lg px-3 py-2"},null,512),[[C,r.privilegeSearch]])]),e("div",vv,[(i(!0),n(D,null,T(u.filteredPrivileges,o=>(i(),n("div",{key:o.id,class:"flex items-center p-3 border rounded-lg hover:bg-gray-50"},[e("input",{type:"checkbox",id:`priv-${o.id}`,checked:r.selectedPrivilegeIds.includes(o.id),onChange:l=>u.togglePrivilege(o.id),class:"mr-3"},null,40,yv),e("label",{for:`priv-${o.id}`,class:"flex-1 cursor-pointer"},[e("div",hv,a(o.name),1),e("div",wv,a(o.description||o.slug),1)],8,bv),e("div",_v,[e("span",kv,a(o.module),1),e("span",Cv,a(o.action),1)])]))),128))]),e("div",Mv,a(r.selectedPrivilegeIds.length)+" privilège(s) sélectionné(s) ",1)]))]),e("div",Sv,[e("button",{onClick:t[22]||(t[22]=(...o)=>u.closePrivilegesModal&&u.closePrivilegesModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{onClick:t[23]||(t[23]=(...o)=>u.savePrivileges&&u.savePrivileges(...o)),disabled:r.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},a(r.submitting?"Enregistrement...":"Enregistrer"),9,Av)])])])):x("",!0)])}const Pv=te(O2,[["render",jv]]),R3=Object.freeze(Object.defineProperty({__proto__:null,default:Pv},Symbol.toStringTag,{value:"Module"})),Dv={name:"Admins",data(){return{admins:[],availableRoles:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedAdmin:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",role_id:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadAdmins(),this.loadAdminRoles()},methods:{async loadAdmins(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/admins",{params:t});c.data.success&&(this.admins=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement admins:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les administrateurs"})}finally{this.loading=!1}},async loadAdminRoles(){try{const d=await J.get("/api/v1/admin/roles",{params:{per_page:100}});if(console.log("Réponse API roles:",d.data),d.data.success){const t=d.data.data.data;console.log("Tous les rôles:",t),this.availableRoles=t.filter(c=>(console.log("Vérification rôle:",c.name,"user_type:",c.user_type),c.user_type&&c.user_type.name==="admin"&&c.slug!=="super_admin")),console.log("Rôles admin filtrés:",this.availableRoles)}}catch(d){console.error("Erreur chargement rôles admin:",d)}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadAdmins()},500)},resetFilters(){this.filters={search:"",status:""},this.loadAdmins()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadAdmins(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",role_id:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedAdmin=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedAdmin=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_admin:!0};if(!this.isEditMode&&!d.role_id){R.fire({icon:"error",title:"Erreur",text:"Veuillez sélectionner un rôle admin"}),this.submitting=!1;return}const t=this.isEditMode?`/api/v1/admin/users/${this.selectedAdmin.id}`:"/api/v1/admin/users",c=this.isEditMode?"put":"post",s=await J[c](t,d);s.data.success&&(R.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadAdmins(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),R.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedAdmin=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedAdmin=null},async toggleStatus(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(R.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadAdmins(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){R.fire({title:"Supprimer cet administrateur ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteAdmin(d)})},async deleteAdmin(d){try{const t=await J.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(R.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadAdmins(this.pagination.current_page))}catch(t){console.error("Erreur suppression admin:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer cet administrateur"})}},async resetPassword(d){R.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const c=await J.post(`/api/v1/admin/users/${d.id}/reset-password`);c.data.success&&R.fire({icon:"success",title:"Email envoyé",text:c.data.message})}catch(c){R.fire({icon:"error",title:"Erreur",text:c.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},Tv={class:"admins-page p-6 bg-gray-50 min-h-screen"},Uv={class:"mb-8"},Fv={class:"flex items-center justify-between"},Ov={class:"bg-white rounded-lg shadow p-6 mb-8"},zv={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ev={class:"flex items-end"},Rv={class:"bg-white rounded-lg shadow"},Vv={class:"p-6 border-b"},Bv={class:"text-sm text-gray-600 mt-1"},Iv={key:0,class:"p-8 text-center"},$v={key:1,class:"p-8 text-center text-gray-500"},Lv={key:2,class:"overflow-x-auto"},qv={class:"w-full"},Nv={class:"divide-y divide-gray-200"},Xv={class:"px-6 py-4"},Hv={class:"flex items-center"},Gv={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},Wv={class:"ml-4"},Kv={class:"text-sm font-medium text-gray-900"},Jv={class:"text-xs text-gray-500"},Yv={class:"px-6 py-4 text-sm text-gray-900"},Qv={class:"px-6 py-4 text-sm"},Zv={class:"flex flex-wrap gap-1"},ey={class:"px-6 py-4 text-sm"},ty={class:"px-6 py-4 text-sm text-gray-600"},sy={class:"px-6 py-4 text-sm"},oy={class:"flex items-center space-x-2"},ly=["onClick"],ay=["onClick"],ry=["onClick","title"],ny=["onClick"],iy={key:3,class:"p-6 border-t"},dy={class:"flex items-center justify-between"},uy={class:"text-sm text-gray-700"},cy={class:"flex space-x-2"},my=["disabled"],gy=["disabled"],py={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fy={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},xy={class:"p-6 border-b"},vy={class:"flex items-center justify-between"},yy={class:"text-xl font-bold text-primea-blue"},by={class:"space-y-4"},hy={key:0},wy=["value"],_y={key:1},ky={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Cy={class:"text-sm text-blue-800"},My={class:"mt-6 flex justify-end space-x-3"},Sy=["disabled"],Ay={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},jy={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Py={class:"p-6 border-b"},Dy={class:"flex items-center justify-between"},Ty={key:0,class:"p-6"},Uy={class:"grid grid-cols-2 gap-6"},Fy={class:"text-gray-900 font-medium"},Oy={class:"text-gray-900"},zy={class:"text-gray-900"},Ey={class:"text-gray-900"},Ry={key:0,class:"text-green-600"},Vy={key:1,class:"text-orange-600"},By={class:"mt-6"},Iy={class:"flex flex-wrap gap-2"},$y={class:"p-6 border-t bg-gray-50 flex justify-between"};function Ly(d,t,c,s,r,u){return i(),n("div",Tv,[e("div",Uv,[e("div",Fv,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Administrateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les comptes administrateurs")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>u.openCreateModal&&u.openCreateModal(...o)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer un Admin ",-1)])])])]),e("div",Ov,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",zv,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.filters.search=o),onInput:t[2]||(t[2]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,r.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.filters.status=o),onChange:t[4]||(t[4]=(...o)=>u.loadAdmins&&u.loadAdmins(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[V,r.filters.status]])]),e("div",Ev,[e("button",{onClick:t[5]||(t[5]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Rv,[e("div",Vv,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold"},"Liste des Administrateurs",-1)),e("p",Bv,"Total: "+a(r.pagination.total)+" admin(s)",1)]),r.loading?(i(),n("div",Iv,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.admins.length===0?(i(),n("div",$v," Aucun administrateur trouvé ")):(i(),n("div",Lv,[e("table",qv,[t[30]||(t[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Nv,[(i(!0),n(D,null,T(r.admins,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Xv,[e("div",Hv,[e("div",Gv,a(o.name.charAt(0).toUpperCase()),1),e("div",Wv,[e("div",Kv,a(o.name),1),e("div",Jv,"ID: "+a(o.id),1)])])]),e("td",Yv,a(o.email),1),e("td",Qv,[e("div",Zv,[(i(!0),n(D,null,T(o.roles,l=>(i(),n("span",{key:l.id,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},a(l.name),1))),128))])]),e("td",ey,[e("span",{class:$([u.getStatusClass(o.status),"px-2 py-1 rounded-full text-xs font-medium"])},a(u.formatStatus(o.status)),3)]),e("td",ty,a(u.formatDate(o.created_at)),1),e("td",sy,[e("div",oy,[e("button",{onClick:l=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,ly),e("button",{onClick:l=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ay),e("button",{onClick:l=>u.toggleStatus(o),class:$(o.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:o.status==="active"?"Désactiver":"Activer"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,ry),e("button",{onClick:l=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ny)])])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",iy,[e("div",dy,[e("div",uy," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",cy,[e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,my),e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,gy)])])])):x("",!0)]),r.showFormModal?(i(),n("div",py,[e("div",fy,[e("div",xy,[e("div",vy,[e("h3",yy,a(r.isEditMode?"Modifier l'Administrateur":"Créer un Administrateur"),1),e("button",{onClick:t[8]||(t[8]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[31]||(t[31]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[14]||(t[14]=le((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",by,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>r.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>r.formData.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.email]])]),r.isEditMode?x("",!0):(i(),n("div",hy,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle Admin *",-1)),g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>r.formData.role_id=o),required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[t[34]||(t[34]=e("option",{value:""},"Sélectionner un rôle",-1)),(i(!0),n(D,null,T(r.availableRoles,o=>(i(),n("option",{key:o.id,value:o.id},a(o.name),9,wy))),128))],512),[[V,r.formData.role_id]]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"},"Rôles disponibles : Admin, Support (Super Admin exclu)",-1))])),r.isEditMode?(i(),n("div",_y,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>r.formData.status=o),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[V,r.formData.status]])])):x("",!0),e("div",ky,[e("p",Cy,a(r.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",My,[e("button",{type:"button",onClick:t[13]||(t[13]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:r.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},a(r.submitting?"En cours...":r.isEditMode?"Modifier":"Créer"),9,Sy)])],32)])])):x("",!0),r.showDetailsModal?(i(),n("div",Ay,[e("div",jy,[e("div",Py,[e("div",Dy,[t[40]||(t[40]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Administrateur",-1)),e("button",{onClick:t[15]||(t[15]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[39]||(t[39]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedAdmin?(i(),n("div",Ty,[e("div",Uy,[e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",Fy,a(r.selectedAdmin.name),1)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",Oy,a(r.selectedAdmin.email),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",zy,a(r.selectedAdmin.phone||"N/A"),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:$([u.getStatusClass(r.selectedAdmin.status),"px-3 py-1 rounded-full text-sm font-medium"])},a(u.formatStatus(r.selectedAdmin.status)),3)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",Ey,a(u.formatDate(r.selectedAdmin.created_at)),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),r.selectedAdmin.email_verified_at?(i(),n("span",Ry," ✓ Vérifié le "+a(u.formatDate(r.selectedAdmin.email_verified_at)),1)):(i(),n("span",Vy,"✗ Non vérifié"))])]),e("div",By,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",Iy,[(i(!0),n(D,null,T(r.selectedAdmin.roles,o=>(i(),n("span",{key:o.id,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},a(o.name),1))),128))])])])):x("",!0),e("div",$y,[e("button",{onClick:t[16]||(t[16]=o=>u.resetPassword(r.selectedAdmin)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[17]||(t[17]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const qy=te(Dv,[["render",Ly]]),V3=Object.freeze(Object.defineProperty({__proto__:null,default:qy},Symbol.toStringTag,{value:"Module"})),Ny={name:"Clients",data(){return{clients:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedClient:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadClients()},methods:{async loadClients(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/clients",{params:t});c.data.success&&(this.clients=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement clients:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les clients"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadClients()},500)},resetFilters(){this.filters={search:"",status:""},this.loadClients()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadClients(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedClient=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedClient=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_admin:!1},t=this.isEditMode?`/api/v1/admin/users/${this.selectedClient.id}`:"/api/v1/admin/users",c=this.isEditMode?"put":"post",s=await J[c](t,d);s.data.success&&(R.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadClients(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),R.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedClient=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedClient=null},async toggleStatus(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(R.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadClients(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){R.fire({title:"Supprimer ce client ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteClient(d)})},async deleteClient(d){try{const t=await J.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(R.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadClients(this.pagination.current_page))}catch(t){console.error("Erreur suppression client:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer ce client"})}},async resetPassword(d){R.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const c=await J.post(`/api/v1/admin/users/${d.id}/reset-password`);c.data.success&&R.fire({icon:"success",title:"Email envoyé",text:c.data.message})}catch(c){R.fire({icon:"error",title:"Erreur",text:c.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},Xy={class:"clients-page p-6 bg-gray-50 min-h-screen"},Hy={class:"bg-white rounded-lg shadow p-6 mb-8"},Gy={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Wy={class:"flex items-end"},Ky={class:"bg-white rounded-lg shadow"},Jy={class:"p-6 border-b"},Yy={class:"text-sm text-gray-600 mt-1"},Qy={key:0,class:"p-8 text-center"},Zy={key:1,class:"p-8 text-center text-gray-500"},eb={key:2,class:"overflow-x-auto"},tb={class:"w-full"},sb={class:"divide-y divide-gray-200"},ob={class:"px-6 py-4"},lb={class:"flex items-center"},ab={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},rb={class:"ml-4"},nb={class:"text-sm font-medium text-gray-900"},ib={class:"text-xs text-gray-500"},db={class:"px-6 py-4 text-sm text-gray-900"},ub={class:"px-6 py-4 text-sm"},cb={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},mb={class:"px-6 py-4 text-sm"},gb={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},pb={class:"px-6 py-4 text-sm"},fb={class:"flex flex-wrap gap-1"},xb={class:"px-6 py-4 text-sm"},vb={class:"px-6 py-4 text-sm text-gray-600"},yb={class:"px-6 py-4 text-sm"},bb={class:"flex items-center space-x-2"},hb=["onClick"],wb=["onClick"],_b=["onClick","title"],kb=["onClick"],Cb={key:3,class:"p-6 border-t"},Mb={class:"flex items-center justify-between"},Sb={class:"text-sm text-gray-700"},Ab={class:"flex space-x-2"},jb=["disabled"],Pb=["disabled"],Db={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Tb={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Ub={class:"p-6 border-b"},Fb={class:"flex items-center justify-between"},Ob={class:"text-xl font-bold text-primea-blue"},zb={class:"space-y-4"},Eb={key:0},Rb={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Vb={class:"text-sm text-blue-800"},Bb={class:"mt-6 flex justify-end space-x-3"},Ib=["disabled"],$b={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Lb={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},qb={class:"p-6 border-b"},Nb={class:"flex items-center justify-between"},Xb={key:0,class:"p-6"},Hb={class:"grid grid-cols-2 gap-6"},Gb={class:"text-gray-900 font-medium"},Wb={class:"text-gray-900"},Kb={class:"text-gray-900"},Jb={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},Yb={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},Qb={class:"text-gray-900"},Zb={key:0,class:"text-green-600"},eh={key:1,class:"text-orange-600"},th={class:"mt-6"},sh={class:"flex flex-wrap gap-2"},oh={class:"p-6 border-t bg-gray-50 flex justify-between"};function lh(d,t,c,s,r,u){return i(),n("div",Xy,[t[43]||(t[43]=e("div",{class:"mb-8"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Clients"),e("p",{class:"text-gray-600"},"Gérer les comptes clients")])],-1)),e("div",Hy,[t[19]||(t[19]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Gy,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.filters.search=o),onInput:t[1]||(t[1]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,r.filters.search]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.filters.status=o),onChange:t[3]||(t[3]=(...o)=>u.loadClients&&u.loadClients(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[17]||(t[17]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[V,r.filters.status]])]),e("div",Wy,[e("button",{onClick:t[4]||(t[4]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ky,[e("div",Jy,[t[20]||(t[20]=e("h2",{class:"text-xl font-bold"},"Liste des Clients",-1)),e("p",Yy,"Total: "+a(r.pagination.total)+" client(s)",1)]),r.loading?(i(),n("div",Qy,[...t[21]||(t[21]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.clients.length===0?(i(),n("div",Zy," Aucun client trouvé ")):(i(),n("div",eb,[e("table",tb,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commandes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",sb,[(i(!0),n(D,null,T(r.clients,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",ob,[e("div",lb,[e("div",ab,a(o.name.charAt(0).toUpperCase()),1),e("div",rb,[e("div",nb,a(o.name),1),e("div",ib,"ID: "+a(o.id),1)])])]),e("td",db,a(o.email),1),e("td",ub,[e("span",cb,a(o.orders_count||0),1)]),e("td",mb,[e("span",gb,a(o.tickets_count||0),1)]),e("td",pb,[e("div",fb,[(i(!0),n(D,null,T(o.roles,l=>(i(),n("span",{key:l.id,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},a(l.name),1))),128))])]),e("td",xb,[e("span",{class:$([u.getStatusClass(o.status),"px-2 py-1 rounded-full text-xs font-medium"])},a(u.formatStatus(o.status)),3)]),e("td",vb,a(u.formatDate(o.created_at)),1),e("td",yb,[e("div",bb,[e("button",{onClick:l=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,hb),e("button",{onClick:l=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,wb),e("button",{onClick:l=>u.toggleStatus(o),class:$(o.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:o.status==="active"?"Désactiver":"Activer"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,_b),e("button",{onClick:l=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,kb)])])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",Cb,[e("div",Mb,[e("div",Sb," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",Ab,[e("button",{onClick:t[5]||(t[5]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,jb),e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Pb)])])])):x("",!0)]),r.showFormModal?(i(),n("div",Db,[e("div",Tb,[e("div",Ub,[e("div",Fb,[e("h3",Ob,a(r.isEditMode?"Modifier le Client":"Créer un Client"),1),e("button",{onClick:t[7]||(t[7]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[27]||(t[27]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[12]||(t[12]=le((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",zb,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>r.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>r.formData.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.email]])]),r.isEditMode?(i(),n("div",Eb,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>r.formData.status=o),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[V,r.formData.status]])])):x("",!0),e("div",Rb,[e("p",Vb,a(r.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",Bb,[e("button",{type:"button",onClick:t[11]||(t[11]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:r.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},a(r.submitting?"En cours...":r.isEditMode?"Modifier":"Créer"),9,Ib)])],32)])])):x("",!0),r.showDetailsModal?(i(),n("div",$b,[e("div",Lb,[e("div",qb,[e("div",Nb,[t[33]||(t[33]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Client",-1)),e("button",{onClick:t[13]||(t[13]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[32]||(t[32]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedClient?(i(),n("div",Xb,[e("div",Hb,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",Gb,a(r.selectedClient.name),1)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",Wb,a(r.selectedClient.email),1)]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",Kb,a(r.selectedClient.phone||"N/A"),1)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:$([u.getStatusClass(r.selectedClient.status),"px-3 py-1 rounded-full text-sm font-medium"])},a(u.formatStatus(r.selectedClient.status)),3)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Commandes",-1)),e("span",Jb,a(r.selectedClient.orders_count||0),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Billets",-1)),e("span",Yb,a(r.selectedClient.tickets_count||0),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",Qb,a(u.formatDate(r.selectedClient.created_at)),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),r.selectedClient.email_verified_at?(i(),n("span",Zb," ✓ Vérifié le "+a(u.formatDate(r.selectedClient.email_verified_at)),1)):(i(),n("span",eh,"✗ Non vérifié"))])]),e("div",th,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",sh,[(i(!0),n(D,null,T(r.selectedClient.roles,o=>(i(),n("span",{key:o.id,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},a(o.name),1))),128))])])])):x("",!0),e("div",oh,[e("button",{onClick:t[14]||(t[14]=o=>u.resetPassword(r.selectedClient)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[15]||(t[15]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const ah=te(Ny,[["render",lh]]),B3=Object.freeze(Object.defineProperty({__proto__:null,default:ah},Symbol.toStringTag,{value:"Module"})),rh={name:"OrganizersUsers",data(){return{organizersUsers:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedOrganizerUser:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadOrganizersUsers()},methods:{async loadOrganizersUsers(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/organizers-users",{params:t});c.data.success&&(this.organizersUsers=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement organisateurs users:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les utilisateurs organisateurs"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadOrganizersUsers()},500)},resetFilters(){this.filters={search:"",status:""},this.loadOrganizersUsers()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadOrganizersUsers(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedOrganizerUser=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedOrganizerUser=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_organizer:!0},t=this.isEditMode?`/api/v1/admin/users/${this.selectedOrganizerUser.id}`:"/api/v1/admin/users",c=this.isEditMode?"put":"post",s=await J[c](t,d);s.data.success&&(R.fire({icon:"success",title:"Succès",text:s.data.message,timer:2e3}),this.closeFormModal(),this.loadOrganizersUsers(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),R.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedOrganizerUser=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedOrganizerUser=null},async toggleStatus(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(R.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadOrganizersUsers(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){R.fire({title:"Supprimer cet utilisateur organisateur ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteOrganizerUser(d)})},async deleteOrganizerUser(d){try{const t=await J.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(R.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadOrganizersUsers(this.pagination.current_page))}catch(t){console.error("Erreur suppression organisateur user:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer cet utilisateur organisateur"})}},async resetPassword(d){R.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const c=await J.post(`/api/v1/admin/users/${d.id}/reset-password`);c.data.success&&R.fire({icon:"success",title:"Email envoyé",text:c.data.message})}catch(c){R.fire({icon:"error",title:"Erreur",text:c.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},nh={class:"organizers-users-page p-6 bg-gray-50 min-h-screen"},ih={class:"mb-8"},dh={class:"flex items-center justify-between"},uh={class:"bg-white rounded-lg shadow p-6 mb-8"},ch={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},mh={class:"flex items-end"},gh={class:"bg-white rounded-lg shadow"},ph={class:"p-6 border-b"},fh={class:"text-sm text-gray-600 mt-1"},xh={key:0,class:"p-8 text-center"},vh={key:1,class:"p-8 text-center text-gray-500"},yh={key:2,class:"overflow-x-auto"},bh={class:"w-full"},hh={class:"divide-y divide-gray-200"},wh={class:"px-6 py-4"},_h={class:"flex items-center"},kh={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},Ch={class:"ml-4"},Mh={class:"text-sm font-medium text-gray-900"},Sh={class:"text-xs text-gray-500"},Ah={class:"px-6 py-4 text-sm text-gray-900"},jh={class:"px-6 py-4 text-sm"},Ph={class:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium"},Dh={class:"px-6 py-4 text-sm"},Th={class:"flex flex-wrap gap-1"},Uh={class:"px-6 py-4 text-sm"},Fh={class:"px-6 py-4 text-sm text-gray-600"},Oh={class:"px-6 py-4 text-sm"},zh={class:"flex items-center space-x-2"},Eh=["onClick"],Rh=["onClick"],Vh=["onClick","title"],Bh=["onClick"],Ih={key:3,class:"p-6 border-t"},$h={class:"flex items-center justify-between"},Lh={class:"text-sm text-gray-700"},qh={class:"flex space-x-2"},Nh=["disabled"],Xh=["disabled"],Hh={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Gh={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Wh={class:"p-6 border-b"},Kh={class:"flex items-center justify-between"},Jh={class:"text-xl font-bold text-primea-blue"},Yh={class:"space-y-4"},Qh={key:0},Zh={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},e4={class:"text-sm text-blue-800"},t4={class:"mt-6 flex justify-end space-x-3"},s4=["disabled"],o4={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},l4={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},a4={class:"p-6 border-b"},r4={class:"flex items-center justify-between"},n4={key:0,class:"p-6"},i4={class:"grid grid-cols-2 gap-6"},d4={class:"text-gray-900 font-medium"},u4={class:"text-gray-900"},c4={class:"text-gray-900"},m4={class:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium"},g4={class:"text-gray-900"},p4={key:0,class:"text-green-600"},f4={key:1,class:"text-orange-600"},x4={class:"mt-6"},v4={class:"flex flex-wrap gap-2"},y4={class:"p-6 border-t bg-gray-50 flex justify-between"};function b4(d,t,c,s,r,u){return i(),n("div",nh,[e("div",ih,[e("div",dh,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Utilisateurs Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les comptes utilisateurs organisateurs")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>u.openCreateModal&&u.openCreateModal(...o)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer un Organisateur User ",-1)])])])]),e("div",uh,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ch,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.filters.search=o),onInput:t[2]||(t[2]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,r.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>r.filters.status=o),onChange:t[4]||(t[4]=(...o)=>u.loadOrganizersUsers&&u.loadOrganizersUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[V,r.filters.status]])]),e("div",mh,[e("button",{onClick:t[5]||(t[5]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",gh,[e("div",ph,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs Organisateurs",-1)),e("p",fh,"Total: "+a(r.pagination.total)+" utilisateur(s) organisateur(s)",1)]),r.loading?(i(),n("div",xh,[...t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.organizersUsers.length===0?(i(),n("div",vh," Aucun utilisateur organisateur trouvé ")):(i(),n("div",yh,[e("table",bh,[t[29]||(t[29]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",hh,[(i(!0),n(D,null,T(r.organizersUsers,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",wh,[e("div",_h,[e("div",kh,a(o.name.charAt(0).toUpperCase()),1),e("div",Ch,[e("div",Mh,a(o.name),1),e("div",Sh,"ID: "+a(o.id),1)])])]),e("td",Ah,a(o.email),1),e("td",jh,[e("span",Ph,a(o.organizers_count||0),1)]),e("td",Dh,[e("div",Th,[(i(!0),n(D,null,T(o.roles,l=>(i(),n("span",{key:l.id,class:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium"},a(l.name),1))),128))])]),e("td",Uh,[e("span",{class:$([u.getStatusClass(o.status),"px-2 py-1 rounded-full text-xs font-medium"])},a(u.formatStatus(o.status)),3)]),e("td",Fh,a(u.formatDate(o.created_at)),1),e("td",Oh,[e("div",zh,[e("button",{onClick:l=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Eh),e("button",{onClick:l=>u.openEditModal(o),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Rh),e("button",{onClick:l=>u.toggleStatus(o),class:$(o.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:o.status==="active"?"Désactiver":"Activer"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,Vh),e("button",{onClick:l=>u.confirmDelete(o),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Bh)])])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",Ih,[e("div",$h,[e("div",Lh," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",qh,[e("button",{onClick:t[6]||(t[6]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Nh),e("button",{onClick:t[7]||(t[7]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Xh)])])])):x("",!0)]),r.showFormModal?(i(),n("div",Hh,[e("div",Gh,[e("div",Wh,[e("div",Kh,[e("h3",Jh,a(r.isEditMode?"Modifier l'Utilisateur Organisateur":"Créer un Utilisateur Organisateur"),1),e("button",{onClick:t[8]||(t[8]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[30]||(t[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[13]||(t[13]=le((...o)=>u.submitForm&&u.submitForm(...o),["prevent"])),class:"p-6"},[e("div",Yh,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>r.formData.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>r.formData.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[C,r.formData.email]])]),r.isEditMode?(i(),n("div",Qh,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>r.formData.status=o),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[33]||(t[33]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[V,r.formData.status]])])):x("",!0),e("div",Zh,[e("p",e4,a(r.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",t4,[e("button",{type:"button",onClick:t[12]||(t[12]=(...o)=>u.closeFormModal&&u.closeFormModal(...o)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:r.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},a(r.submitting?"En cours...":r.isEditMode?"Modifier":"Créer"),9,s4)])],32)])])):x("",!0),r.showDetailsModal?(i(),n("div",o4,[e("div",l4,[e("div",a4,[e("div",r4,[t[36]||(t[36]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Utilisateur Organisateur",-1)),e("button",{onClick:t[14]||(t[14]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[35]||(t[35]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedOrganizerUser?(i(),n("div",n4,[e("div",i4,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",d4,a(r.selectedOrganizerUser.name),1)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",u4,a(r.selectedOrganizerUser.email),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",c4,a(r.selectedOrganizerUser.phone||"N/A"),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisateurs",-1)),e("span",m4,a(r.selectedOrganizerUser.organizers_count||0),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:$([u.getStatusClass(r.selectedOrganizerUser.status),"px-3 py-1 rounded-full text-sm font-medium"])},a(u.formatStatus(r.selectedOrganizerUser.status)),3)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",g4,a(u.formatDate(r.selectedOrganizerUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),r.selectedOrganizerUser.email_verified_at?(i(),n("span",p4," ✓ Vérifié le "+a(u.formatDate(r.selectedOrganizerUser.email_verified_at)),1)):(i(),n("span",f4,"✗ Non vérifié"))])]),e("div",x4,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",v4,[(i(!0),n(D,null,T(r.selectedOrganizerUser.roles,o=>(i(),n("span",{key:o.id,class:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium"},a(o.name),1))),128))])])])):x("",!0),e("div",y4,[e("button",{onClick:t[15]||(t[15]=o=>u.resetPassword(r.selectedOrganizerUser)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[16]||(t[16]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const h4=te(rh,[["render",b4]]),I3=Object.freeze(Object.defineProperty({__proto__:null,default:h4},Symbol.toStringTag,{value:"Module"})),w4={name:"TrashedUsers",data(){return{trashedUsers:[],loading:!1,showDetailsModal:!1,selectedUser:null,searchTimeout:null,filters:{search:""},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadTrashedUsers()},methods:{async loadTrashedUsers(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/trashed",{params:t});c.data.success&&(this.trashedUsers=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement utilisateurs supprimés:",t),R.fire({icon:"error",title:"Erreur",text:"Impossible de charger les utilisateurs supprimés"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadTrashedUsers()},500)},resetFilters(){this.filters={search:""},this.loadTrashedUsers()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadTrashedUsers(d)},viewDetails(d){this.selectedUser=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedUser=null},confirmRestore(d){R.fire({title:"Restaurer cet utilisateur ?",html:`<p>Voulez-vous vraiment restaurer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">L'utilisateur sera réactivé et pourra à nouveau accéder à son compte.</p>`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, restaurer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.restoreUser(d)})},async restoreUser(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/restore`);t.data.success&&(R.fire({icon:"success",title:"Restauré",text:t.data.message,timer:2e3}),this.loadTrashedUsers(this.pagination.current_page))}catch(t){console.error("Erreur restauration utilisateur:",t),R.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de restaurer cet utilisateur"})}},getUserTypeClass(d){return d.is_admin?"bg-red-100 text-red-800":d.is_organizer?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"},getUserTypeLabel(d){return d.is_admin?"Admin":d.is_organizer?"Organisateur":"Client"},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},_4={class:"trashed-users-page p-6 bg-gray-50 min-h-screen"},k4={class:"bg-white rounded-lg shadow p-6 mb-8"},C4={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M4={class:"flex items-end"},S4={class:"bg-white rounded-lg shadow"},A4={class:"p-6 border-b"},j4={class:"text-sm text-gray-600 mt-1"},P4={key:0,class:"p-8 text-center"},D4={key:1,class:"p-8 text-center text-gray-500"},T4={key:2,class:"overflow-x-auto"},U4={class:"w-full"},F4={class:"divide-y divide-gray-200"},O4={class:"px-6 py-4"},z4={class:"flex items-center"},E4={class:"w-10 h-10 bg-gray-400 text-white rounded-full flex items-center justify-center font-bold"},R4={class:"ml-4"},V4={class:"text-sm font-medium text-gray-900"},B4={class:"text-xs text-gray-500"},I4={class:"px-6 py-4 text-sm text-gray-900"},$4={class:"px-6 py-4 text-sm"},L4={class:"flex flex-wrap gap-1"},q4={class:"px-6 py-4 text-sm"},N4={class:"px-6 py-4 text-sm text-gray-600"},X4={class:"px-6 py-4 text-sm"},H4={class:"flex items-center space-x-2"},G4=["onClick"],W4=["onClick"],K4={key:3,class:"p-6 border-t"},J4={class:"flex items-center justify-between"},Y4={class:"text-sm text-gray-700"},Q4={class:"flex space-x-2"},Z4=["disabled"],e3=["disabled"],t3={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},s3={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},o3={class:"p-6 border-b"},l3={class:"flex items-center justify-between"},a3={key:0,class:"p-6"},r3={class:"grid grid-cols-2 gap-6"},n3={class:"text-gray-900 font-medium"},i3={class:"text-gray-900"},d3={class:"text-gray-900"},u3={class:"text-gray-900"},c3={class:"text-red-600 font-medium"},m3={key:0,class:"text-green-600"},g3={key:1,class:"text-orange-600"},p3={class:"mt-6"},f3={class:"flex flex-wrap gap-2"},x3={class:"p-6 border-t bg-gray-50 flex justify-end"};function v3(d,t,c,s,r,u){return i(),n("div",_4,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Corbeille - Utilisateurs Supprimés"),e("p",{class:"text-gray-600"},"Consulter et restaurer les utilisateurs supprimés")])],-1)),e("div",k4,[t[8]||(t[8]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",C4,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.filters.search=o),onInput:t[1]||(t[1]=(...o)=>u.debouncedSearch&&u.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[C,r.filters.search]])]),e("div",M4,[e("button",{onClick:t[2]||(t[2]=(...o)=>u.resetFilters&&u.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",S4,[e("div",A4,[t[9]||(t[9]=e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs Supprimés",-1)),e("p",j4,"Total: "+a(r.pagination.total)+" utilisateur(s) supprimé(s)",1)]),r.loading?(i(),n("div",P4,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):r.trashedUsers.length===0?(i(),n("div",D4," Aucun utilisateur supprimé trouvé ")):(i(),n("div",T4,[e("table",U4,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date de suppression"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",F4,[(i(!0),n(D,null,T(r.trashedUsers,o=>(i(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",O4,[e("div",z4,[e("div",E4,a(o.name.charAt(0).toUpperCase()),1),e("div",R4,[e("div",V4,a(o.name),1),e("div",B4,"ID: "+a(o.id),1)])])]),e("td",I4,a(o.email),1),e("td",$4,[e("div",L4,[(i(!0),n(D,null,T(o.roles,l=>(i(),n("span",{key:l.id,class:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium"},a(l.name),1))),128))])]),e("td",q4,[e("span",{class:$([u.getUserTypeClass(o),"px-2 py-1 rounded-full text-xs font-medium"])},a(u.getUserTypeLabel(o)),3)]),e("td",N4,a(u.formatDate(o.deleted_at)),1),e("td",X4,[e("div",H4,[e("button",{onClick:l=>u.viewDetails(o),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,G4),e("button",{onClick:l=>u.confirmRestore(o),class:"text-green-600 hover:text-green-800",title:"Restaurer"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,W4)])])]))),128))])])])),r.pagination.total>r.pagination.per_page?(i(),n("div",K4,[e("div",J4,[e("div",Y4," Affichage de "+a(r.pagination.from)+" à "+a(r.pagination.to)+" sur "+a(r.pagination.total)+" résultats ",1),e("div",Q4,[e("button",{onClick:t[3]||(t[3]=o=>u.goToPage(r.pagination.current_page-1)),disabled:r.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Z4),e("button",{onClick:t[4]||(t[4]=o=>u.goToPage(r.pagination.current_page+1)),disabled:r.pagination.current_page===r.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,e3)])])])):x("",!0)]),r.showDetailsModal?(i(),n("div",t3,[e("div",s3,[e("div",o3,[e("div",l3,[t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Utilisateur Supprimé",-1)),e("button",{onClick:t[5]||(t[5]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),r.selectedUser?(i(),n("div",a3,[e("div",r3,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",n3,a(r.selectedUser.name),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",i3,a(r.selectedUser.email),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",d3,a(r.selectedUser.phone||"N/A"),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("span",{class:$([u.getUserTypeClass(r.selectedUser),"px-3 py-1 rounded-full text-sm font-medium"])},a(u.getUserTypeLabel(r.selectedUser)),3)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",u3,a(u.formatDate(r.selectedUser.created_at)),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de suppression",-1)),e("p",c3,a(u.formatDate(r.selectedUser.deleted_at)),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),r.selectedUser.email_verified_at?(i(),n("span",m3," ✓ Vérifié le "+a(u.formatDate(r.selectedUser.email_verified_at)),1)):(i(),n("span",g3,"✗ Non vérifié"))])]),e("div",p3,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",f3,[(i(!0),n(D,null,T(r.selectedUser.roles,o=>(i(),n("span",{key:o.id,class:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium"},a(o.name),1))),128))])])])):x("",!0),e("div",x3,[e("button",{onClick:t[6]||(t[6]=(...o)=>u.closeDetailsModal&&u.closeDetailsModal(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const y3=te(w4,[["render",v3]]),$3=Object.freeze(Object.defineProperty({__proto__:null,default:y3},Symbol.toStringTag,{value:"Module"}));export{_3 as A,F3 as C,M3 as E,C3 as O,A3 as P,D3 as R,T3 as S,$3 as T,k3 as U,O3 as V,S3 as a,j3 as b,P3 as c,U3 as d,z3 as e,E3 as f,R3 as g,V3 as h,B3 as i,I3 as j};
