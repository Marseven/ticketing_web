import{b as A,Y as Z,d as te,Z as ie,j as l,o as d,k as e,t as m,a1 as C,l as y,a2 as oe,a3 as $e,g as me,O as xe,w as J,a4 as ne,a as re,y as ye,N as Ce,e as Ee,a5 as je,G as q,H as X,q as L,p as F,n as T,D as w,E as S,F as de,P as Ae,X as Se,_ as Pe,J as ge,K as _e,a6 as ve,R as be,T as he,a7 as De,L as Ue,a8 as Ve,u as we,W as ae,a9 as ce,$ as pe,C as ze,S as Ie}from"./vue-vendor-CDZB1Wme.js";import{_ as le,u as ke}from"./account-SYOFlVBk.js";import{a as ue,S as I}from"./vendor-BvANJOFB.js";const R=ue.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}});R.interceptors.request.use(x=>{const s=localStorage.getItem("auth_token")||localStorage.getItem("token");return s&&(x.headers.Authorization=`Bearer ${s}`),x.headers["X-Requested-With"]="XMLHttpRequest",x},x=>Promise.reject(x));R.interceptors.response.use(x=>x,x=>(console.log("Erreur API:",x.response?.status,x.response?.data),x.response?.status===401?(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"):x.response?.status===419&&console.error("CSRF token mismatch. Vérifiez la configuration Sanctum."),Promise.reject(x)));const Ql={getTicket(x){return R.get(`/tickets/${x}`)},retrieveTickets(x){return R.get(`/tickets/retrieve/${x}`)},validateTicket(x,s="validate"){return R.post("/tickets/validate",{qr_code:x,action:s})},searchTickets(x){const{reference:s,phone:D,email:r}=x;return s?this.getTicket(s):r||D?new Promise((U,c)=>{setTimeout(()=>{r?.includes("test")||D?.includes("123")||s?.includes("TKT")?U({data:{tickets:[{id:1,code:"TKT-2024-ABC123",status:"issued",event:{id:1,title:"L'OISEAU RARE",slug:"oiseau-rare",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",venue_name:"Entre Nous Bar"},ticket_type:{id:1,name:"Standard",description:"Accès standard"},buyer:{name:"John Doe",email:r||"john@example.com"},issued_at:"27/07/2025 10:00:00",used_at:null,schedule:{starts_at:"27/07/2025 20:00:00",ends_at:"27/07/2025 23:00:00",door_time:"27/07/2025 19:30:00"}}]}}):c(new Error("Aucun ticket trouvé avec ces informations"))},1500)}):Promise.reject(new Error("Veuillez fournir au moins un critère de recherche"))}},Zl={createGuestOrder(x){return ue.post("/api/guest/orders",x,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestOrder(x){return ue.get(`/api/guest/orders/${x}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestTicket(x){return ue.get(`/api/guest/tickets/${x}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},retrieveGuestTickets(x){return ue.get(`/api/guest/tickets/retrieve/${encodeURIComponent(x)}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}},N={getDashboardStats(){return R.get("/organizer/dashboard/stats")},getRecentEvents(){return R.get("/organizer/events/recent")},getNotifications(){return R.get("/organizer/notifications")},getEvents(x={}){return R.get("/organizer/events",{params:x})},createEvent(x){return R.post("/organizer/events",x)},createEventWithFile(x){return R.post("/organizer/events",x,{headers:{"Content-Type":"multipart/form-data"}})},updateEvent(x,s){return R.put(`/organizer/events/${x}`,s)},updateEventWithFile(x,s){return s.append("_method","PUT"),R.post(`/organizer/events/${x}`,s,{headers:{"Content-Type":"multipart/form-data"}})},getEvent(x){return R.get(`/organizer/events/${x}`)},getEventStats(x){return R.get(`/organizer/events/${x}/stats`)},getBalance(){return R.get("/organizer/balance")},getPaymentHistory(){return R.get("/organizer/payments")},getProfile(){return R.get("/organizer/profile")},updateProfile(x){return R.put("/organizer/profile",x)},uploadAvatar(x){return R.post("/organizer/profile/avatar",x,{headers:{"Content-Type":"multipart/form-data"}})},getCategories(){return R.get("/categories")},getVenues(){return R.get("/venues")}},Te={class:"organizer-dashboard min-h-screen"},Fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Be={class:"mb-8"},Me={class:"flex items-center justify-between"},Re={class:"flex items-center space-x-4"},Oe={class:"text-right"},qe={class:"text-sm font-semibold text-primea-blue font-primea"},Ne={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},Le=["src","alt"],Xe={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},Ge={class:"text-lg font-bold font-primea"},We={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},He={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},Je={class:"flex items-center"},Ke={class:"p-2 bg-primea-blue/10 rounded-lg"},Qe={class:"ml-4"},Ze={class:"text-2xl font-bold text-primea-blue font-primea"},Ye={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},et={class:"flex items-center"},tt={class:"p-2 bg-green-100 rounded-lg"},st={class:"ml-4"},ot={class:"text-2xl font-bold text-green-600 font-primea"},rt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},at={class:"flex items-center"},nt={class:"p-2 bg-primea-yellow/10 rounded-lg"},it={class:"ml-4"},lt={class:"text-2xl font-bold text-primea-yellow font-primea"},dt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},ut={class:"flex items-center"},mt={class:"p-2 bg-purple-100 rounded-lg"},pt={class:"ml-4"},ct={class:"text-2xl font-bold text-purple-600 font-primea"},gt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},ft={class:"lg:col-span-2"},bt={class:"bg-white rounded-primea shadow-primea p-6"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt={class:"bg-white rounded-primea shadow-primea p-6"},yt={class:"space-y-4"},_t={key:0,class:"text-center text-gray-500 py-8"},ht={class:"text-sm font-medium font-primea"},wt={class:"text-xs text-gray-600 mt-1"},kt={class:"text-xs text-gray-400 mt-2"},$t={class:"bg-white rounded-primea shadow-primea overflow-hidden"},Ct={class:"p-6 border-b border-gray-200"},Et={class:"flex items-center justify-between"},jt={key:0,class:"p-8 text-center text-gray-500"},At={key:1,class:"overflow-x-auto"},St={class:"w-full"},Pt={class:"divide-y divide-gray-200"},Dt={class:"px-6 py-4"},Ut={class:"text-sm font-medium text-gray-900 font-primea"},Vt={class:"text-sm text-gray-500"},zt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},It={class:"px-6 py-4"},Tt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Ft={class:"px-6 py-4 text-sm"},Bt={__name:"OrganizerDashboard",setup(x){const s=ke(),D=A(!1),r=Z({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),U=A([]),c=A([]),i=te(()=>{const V=s.user;return V?.name?V.name.split(" ").map(_=>_[0]).join("").toUpperCase().slice(0,2):"U"}),j=te(()=>s.user?.avatar_url||null),u=async()=>{D.value=!0;try{const[V,_,O]=await Promise.all([N.getDashboardStats(),N.getRecentEvents(),N.getNotifications()]);Object.assign(r,V.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),U.value=_.data.data||[],c.value=O.data.data||[]}catch(V){console.error("Erreur lors du chargement du dashboard:",V),Object.assign(r,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),U.value=[],c.value=[]}finally{D.value=!1}},f=V=>new Intl.NumberFormat("fr-FR").format(V),P=V=>new Date(V).toLocaleDateString("fr-FR"),p=V=>new Date(V).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=V=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[V]||V,H=V=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[V]||"bg-gray-100 text-gray-800",G=V=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[V]||"border-gray-300";return ie(()=>{u()}),(V,_)=>{const O=re("router-link");return d(),l("div",Te,[e("div",Fe,[e("div",Be,[e("div",Me,[_[1]||(_[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",Re,[e("div",Oe,[_[0]||(_[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",qe,m(P(new Date)),1)]),j.value?(d(),l("div",Ne,[e("img",{src:j.value,alt:C(s).user?.name,class:"w-full h-full object-cover"},null,8,Le)])):(d(),l("div",Xe,[e("span",Ge,m(i.value),1)]))])])]),e("div",We,[e("div",He,[e("div",Je,[e("div",Ke,[y(C(oe),{class:"w-6 h-6 text-primea-blue"})]),e("div",Qe,[_[2]||(_[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",Ze,m(r.total_events),1)])])]),e("div",Ye,[e("div",et,[e("div",tt,[y(C($e),{class:"w-6 h-6 text-green-600"})]),e("div",st,[_[3]||(_[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",ot,m(r.active_events),1)])])]),e("div",rt,[e("div",at,[e("div",nt,[y(C(me),{class:"w-6 h-6 text-primea-yellow"})]),e("div",it,[_[4]||(_[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",lt,m(r.tickets_sold),1)])])]),e("div",dt,[e("div",ut,[e("div",mt,[y(C(xe),{class:"w-6 h-6 text-purple-600"})]),e("div",pt,[_[5]||(_[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",ct,m(f(r.total_revenue))+" XAF",1)])])])]),e("div",gt,[e("div",ft,[e("div",bt,[_[10]||(_[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",vt,[y(O,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:J(()=>[y(C(ne),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),_[6]||(_[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),y(O,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:J(()=>[y(C(ye),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),_[7]||(_[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),y(O,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:J(()=>[y(C(Ce),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),_[8]||(_[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),y(O,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:J(()=>[y(C(Ee),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),_[9]||(_[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",xt,[_[12]||(_[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",yt,[c.value.length===0?(d(),l("div",_t,[y(C(je),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),_[11]||(_[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(d(!0),l(q,{key:1},X(c.value,z=>(d(),l("div",{key:z.id,class:L(["p-3 bg-gray-50 rounded-primea border-l-4",G(z.type)])},[e("p",ht,m(z.title),1),e("p",wt,m(z.message),1),e("p",kt,m(p(z.created_at)),1)],2))),128))])])]),e("div",$t,[e("div",Ct,[e("div",Et,[_[14]||(_[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),y(O,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:J(()=>[..._[13]||(_[13]=[F(" Voir tous ",-1)])]),_:1})])]),U.value.length===0?(d(),l("div",jt,[y(C(oe),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),_[16]||(_[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),_[17]||(_[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),y(O,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[y(C(ne),{class:"w-4 h-4 mr-2"}),_[15]||(_[15]=F(" Créer un événement ",-1))]),_:1})])):(d(),l("div",At,[e("table",St,[_[19]||(_[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",Pt,[(d(!0),l(q,null,X(U.value,z=>(d(),l("tr",{key:z.id,class:"hover:bg-gray-50"},[e("td",Dt,[e("div",null,[e("p",Ut,m(z.title),1),e("p",Vt,m(z.venue_name),1)])]),e("td",zt,m(P(z.event_date)),1),e("td",It,[e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",H(z.status)])},m(B(z.status)),3)]),e("td",Tt,m(z.tickets_sold||0),1),e("td",Ft,[y(O,{to:{name:"organizer-event-detail",params:{slug:z.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:J(()=>[..._[18]||(_[18]=[F(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},Mt=le(Bt,[["__scopeId","data-v-1685f411"]]),Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"})),Rt={name:"OrganizerEvents",components:{PlusIcon:ne,CalendarIcon:oe},setup(){const x=ge(),s=A(""),D=A(""),r=A("grid"),U=A(!1),c=A([]),i=Z({current:1,total:1,perPage:15}),j=async()=>{U.value=!0;try{const $=(await N.getEvents({page:i.current,status:D.value,search:s.value})).data.data.events;c.value=$.data.map(a=>({...a,tickets_sold:a.tickets?.filter(t=>["issued","used"].includes(t.status)).length||0,total_tickets:a.ticket_types?.reduce((t,o)=>t+o.capacity,0)||0,revenue:a.tickets?.filter(t=>["issued","used"].includes(t.status)).reduce((t,o)=>t+(o.ticket_type?.price||0),0)||0,venue:a.venue?.name||"",date:a.event_date||a.schedules?.[0]?.starts_at,isFavorite:!1})),i.current=$.current_page,i.total=$.last_page,i.perPage=$.per_page}catch(v){console.error("Erreur chargement événements:",v),I.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{U.value=!1}},u=te(()=>{let v=[...c.value];if(s.value){const $=s.value.toLowerCase();v=v.filter(a=>a.title.toLowerCase().includes($)||a.venue.toLowerCase().includes($))}return D.value&&(v=v.filter($=>$.status===D.value)),v}),f=te(()=>{const v=c.value.filter(o=>o.is_active&&o.status!=="cancelled").length,$=c.value.filter(o=>!o.is_active).length,a=c.value.reduce((o,g)=>o+(g.tickets_sold||0),0),t=c.value.reduce((o,g)=>o+(g.revenue||0),0);return{published:v,draft:$,totalTicketsSold:a,totalRevenue:t}}),P=v=>new Intl.NumberFormat("fr-FR").format(v),p=(v,$="full")=>{const a=new Date(v);return $==="short"?a.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):a.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},B=v=>v.is_active?v.status==="cancelled"?"bg-red-100 text-red-800":new Date(v.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",H=v=>v.is_active?v.status==="cancelled"?"Annulé":new Date(v.date)<new Date?"Terminé":"Actif":"Brouillon",G=v=>{v.isFavorite=!v.isFavorite},V=async v=>{try{const $={title:`${v.title} (Copie)`,description:v.description,event_date:v.date,venue_id:v.venue_id,category_id:v.category_id,is_active:!1};await N.createEvent($),await j(),I.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{I.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},_=v=>{x.push({name:"organizer-event-edit",params:{slug:v.slug}})},O=async v=>{if((await I.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${v.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await j(),I.fire("Supprimé !","L'événement a été supprimé.","success")}catch{I.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};Pe([s,D],()=>{i.current=1,j()},{debounce:300});const z=v=>{i.current=v,j()},K=v=>{if(!v)return!1;const $=v.image_url||v.image||v.image_file;return $&&$.trim()!==""},Y=(v,$="400")=>{let a=v.image_url||v.image||v.image_file;return console.log("Image URL pour événement:",v.title,"URL brute:",a),a&&a.trim()!==""?a.startsWith("http://")||a.startsWith("https://")?(console.log("URL complète détectée:",a),a):a.startsWith("/")?(a=window.location.origin+a,console.log("URL construite depuis chemin relatif:",a),a):(a.includes("/")||(a=`${window.location.origin}/storage/images/events/${a}`,console.log("URL construite depuis nom de fichier:",a)),a):(console.log("Aucune image trouvée pour:",v.title),"")},ee=v=>{console.log("Erreur de chargement d'image:",v.target.src),v.target.style.display="none"},Q=v=>{console.log("Image chargée avec succès:",v.target.src)};return ie(()=>{j()}),{searchQuery:s,statusFilter:D,viewMode:r,loading:U,events:c,filteredEvents:u,stats:f,pagination:i,formatPrice:P,formatEventDate:p,getStatusClass:B,getStatusText:H,toggleFavorite:G,duplicateEvent:V,editEvent:_,deleteEvent:O,loadEvents:j,changePage:z,hasEventImage:K,getEventImageUrl:Y,handleImageError:ee,handleImageLoad:Q}}},Ot={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},qt={class:"bg-white shadow-sm border-b border-gray-200"},Nt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Lt={class:"flex items-center justify-between"},Xt={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Gt={class:"bg-white rounded-lg shadow-md p-6 mb-8"},Wt={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},Ht={class:"flex items-center space-x-4"},Jt={class:"relative"},Kt={class:"flex items-center space-x-4"},Qt={class:"text-sm text-gray-600"},Zt={class:"flex bg-gray-100 rounded-lg p-1"},Yt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},es={class:"text-center"},ts={class:"text-2xl font-bold text-blue-600"},ss={class:"text-center"},os={class:"text-2xl font-bold text-yellow-600"},rs={class:"text-center"},as={class:"text-2xl font-bold text-green-600"},ns={class:"text-center"},is={class:"text-2xl font-bold text-purple-600"},ls={key:0},ds={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},us={class:"relative"},ms=["src","alt"],ps={key:1,class:"w-full h-48 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},cs={class:"absolute top-4 left-4"},gs={class:"absolute top-4 right-4"},fs=["onClick"],bs={class:"p-6"},vs={class:"text-lg font-bold text-gray-800 mb-2"},xs={class:"text-gray-600 text-sm mb-4"},ys={class:"flex items-center justify-between mb-4"},_s={class:"text-sm text-gray-600 font-primea"},hs={class:"font-medium font-primea"},ws={class:"text-sm font-bold text-green-600 font-primea"},ks={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},$s={class:"flex space-x-2"},Cs=["onClick"],Es={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},js={class:"w-full"},As={class:"bg-white divide-y divide-gray-200"},Ss={class:"px-6 py-4 whitespace-nowrap"},Ps={class:"flex items-center"},Ds=["src","alt"],Us={key:1,class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center rounded-lg mr-4"},Vs={class:"text-sm font-medium text-gray-900"},zs={class:"text-sm text-gray-500"},Is={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Ts={class:"px-6 py-4 whitespace-nowrap"},Fs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Bs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},Ms={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Rs=["onClick"],Os=["onClick"],qs={key:1,class:"text-center py-16"},Ns={class:"text-gray-600 mb-6"},Ls={key:0},Xs={key:1},Gs={key:2,class:"mt-8 flex justify-center"},Ws={class:"flex items-center space-x-2"},Hs=["disabled"],Js=["onClick"],Ks={key:1,class:"px-2 text-gray-500"},Qs=["disabled"];function Zs(x,s,D,r,U,c){const i=re("PlusIcon"),j=re("router-link"),u=re("CalendarIcon");return d(),l("div",Ot,[e("div",qt,[e("div",Nt,[e("div",Lt,[s[11]||(s[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),y(j,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:J(()=>[y(i,{class:"w-4 h-4 inline mr-2"}),s[10]||(s[10]=F(" Nouvel événement ",-1))]),_:1})])])]),e("div",Xt,[e("div",Gt,[e("div",Wt,[e("div",Ht,[e("div",Jt,[s[12]||(s[12]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),w(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=f=>r.searchQuery=f),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[S,r.searchQuery]])]),w(e("select",{"onUpdate:modelValue":s[1]||(s[1]=f=>r.statusFilter=f),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...s[13]||(s[13]=[Ae('<option value="" data-v-d66d4597>Tous les statuts</option><option value="draft" data-v-d66d4597>Brouillons</option><option value="published" data-v-d66d4597>Publiés</option><option value="completed" data-v-d66d4597>Terminés</option><option value="cancelled" data-v-d66d4597>Annulés</option>',5)])],512),[[de,r.statusFilter]])]),e("div",Kt,[e("div",Qt,m(r.filteredEvents.length)+" événement"+m(r.filteredEvents.length>1?"s":""),1),e("div",Zt,[e("button",{onClick:s[2]||(s[2]=f=>r.viewMode="grid"),class:L(["px-3 py-2 rounded-lg transition-colors",r.viewMode==="grid"?"bg-white shadow-sm":""])},[...s[14]||(s[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:s[3]||(s[3]=f=>r.viewMode="list"),class:L(["px-3 py-2 rounded-lg transition-colors",r.viewMode==="list"?"bg-white shadow-sm":""])},[...s[15]||(s[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",Yt,[e("div",es,[e("p",ts,m(r.stats.published),1),s[16]||(s[16]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",ss,[e("p",os,m(r.stats.draft),1),s[17]||(s[17]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",rs,[e("p",as,m(r.stats.totalTicketsSold),1),s[18]||(s[18]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",ns,[e("p",is,m(r.formatPrice(r.stats.totalRevenue))+" XAF",1),s[19]||(s[19]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),r.filteredEvents.length>0?(d(),l("div",ls,[r.viewMode==="grid"?(d(),l("div",ds,[(d(!0),l(q,null,X(r.filteredEvents,f=>(d(),l("div",{key:f.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",us,[r.hasEventImage(f)?(d(),l("img",{key:0,src:r.getEventImageUrl(f),alt:f.title,class:"w-full h-48 object-cover",onError:s[4]||(s[4]=(...P)=>r.handleImageError&&r.handleImageError(...P)),onLoad:s[5]||(s[5]=(...P)=>r.handleImageLoad&&r.handleImageLoad(...P))},null,40,ms)):(d(),l("div",ps,[y(u,{class:"w-16 h-16 text-gray-400"})])),e("div",cs,[e("span",{class:L(["px-3 py-1 rounded-full text-xs font-semibold",r.getStatusClass(f.status)])},m(r.getStatusText(f.status)),3)]),e("div",gs,[e("button",{onClick:P=>r.toggleFavorite(f),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(d(),l("svg",{class:L(["w-4 h-4",f.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...s[20]||(s[20]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,fs)])]),e("div",bs,[e("h3",vs,m(f.title),1),e("p",xs,m(r.formatEventDate(f.date)),1),e("div",ys,[e("div",_s,[e("span",hs,m(f.tickets_sold||0),1),F(" / "+m(f.total_tickets||0)+" tickets vendus ",1)]),e("div",ws,m(r.formatPrice(f.revenue||0))+" XAF ",1)]),e("div",ks,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Se({width:`${Math.min((f.ticketsSold||0)/(f.totalTickets||100)*100,100)}%`})},null,4)]),e("div",$s,[y(j,{to:{name:"organizer-event-detail",params:{slug:f.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:J(()=>[...s[21]||(s[21]=[F(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:P=>r.duplicateEvent(f),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,Cs)])])]))),128))])):(d(),l("div",Es,[e("table",js,[s[23]||(s[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",As,[(d(!0),l(q,null,X(r.filteredEvents,f=>(d(),l("tr",{key:f.id,class:"hover:bg-gray-50"},[e("td",Ss,[e("div",Ps,[r.hasEventImage(f)?(d(),l("img",{key:0,src:r.getEventImageUrl(f,"60"),alt:f.title,class:"w-12 h-12 object-cover rounded-lg mr-4",onError:s[6]||(s[6]=(...P)=>r.handleImageError&&r.handleImageError(...P)),onLoad:s[7]||(s[7]=(...P)=>r.handleImageLoad&&r.handleImageLoad(...P))},null,40,Ds)):(d(),l("div",Us,[y(u,{class:"w-6 h-6 text-gray-400"})])),e("div",null,[e("div",Vs,m(f.title),1),e("div",zs,m(f.venue),1)])])]),e("td",Is,m(r.formatEventDate(f.date,"short")),1),e("td",Ts,[e("span",{class:L(["px-2 py-1 rounded-full text-xs font-medium font-primea",r.getStatusClass(f)])},m(r.getStatusText(f)),3)]),e("td",Fs,m(f.tickets_sold||0)+" / "+m(f.total_tickets||0),1),e("td",Bs,m(r.formatPrice(f.revenue||0))+" XAF ",1),e("td",Ms,[y(j,{to:{name:"organizer-event-detail",params:{slug:f.slug}},class:"text-blue-600 hover:text-blue-900"},{default:J(()=>[...s[22]||(s[22]=[F(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:P=>r.editEvent(f),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,Rs),e("button",{onClick:P=>r.deleteEvent(f),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Os)])]))),128))])])]))])):(d(),l("div",qs,[s[25]||(s[25]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),s[26]||(s[26]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",Ns,[r.searchQuery||r.statusFilter?(d(),l("span",Ls," Aucun événement ne correspond à vos critères de recherche. ")):(d(),l("span",Xs," Commencez par créer votre premier événement ! "))]),y(j,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:J(()=>[...s[24]||(s[24]=[F(" + Créer mon premier événement ",-1)])]),_:1})])),r.events.length>0&&r.pagination.total>1?(d(),l("div",Gs,[e("nav",Ws,[e("button",{onClick:s[8]||(s[8]=f=>r.changePage(r.pagination.current-1)),disabled:r.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,Hs),(d(!0),l(q,null,X(r.pagination.total,f=>(d(),l(q,{key:f},[f===1||f===r.pagination.total||f>=r.pagination.current-1&&f<=r.pagination.current+1?(d(),l("button",{key:0,onClick:P=>r.changePage(f),class:L(["px-3 py-2 text-sm font-medium rounded-lg font-primea",f===r.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},m(f),11,Js)):f===r.pagination.current-2||f===r.pagination.current+2?(d(),l("span",Ks," ... ")):T("",!0)],64))),128)),e("button",{onClick:s[9]||(s[9]=f=>r.changePage(r.pagination.current+1)),disabled:r.pagination.current===r.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,Qs)])])):T("",!0)])])}const Ys=le(Rt,[["render",Zs],["__scopeId","data-v-d66d4597"]]),ed=Object.freeze(Object.defineProperty({__proto__:null,default:Ys},Symbol.toStringTag,{value:"Module"})),eo={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},to={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},so={key:0,class:"flex justify-center items-center h-64"},oo={key:1,class:"text-center py-16"},ro={class:"mb-4"},ao={class:"text-gray-600 mb-6"},no={key:2},io={class:"mb-8"},lo={class:"flex items-center justify-between"},uo={class:"flex items-center space-x-4"},mo={class:"text-3xl font-bold text-primea-blue font-primea"},po={class:"flex items-center space-x-3"},co={class:"flex space-x-2"},go={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},fo={class:"bg-white rounded-primea shadow-primea p-6"},bo={class:"flex items-center"},vo={class:"p-2 bg-blue-100 rounded-lg"},xo={class:"ml-4"},yo={class:"text-2xl font-bold text-blue-600 font-primea"},_o={class:"bg-white rounded-primea shadow-primea p-6"},ho={class:"flex items-center"},wo={class:"p-2 bg-green-100 rounded-lg"},ko={class:"ml-4"},$o={class:"text-2xl font-bold text-green-600 font-primea"},Co={class:"bg-white rounded-primea shadow-primea p-6"},Eo={class:"flex items-center"},jo={class:"p-2 bg-yellow-100 rounded-lg"},Ao={class:"ml-4"},So={class:"text-2xl font-bold text-yellow-600 font-primea"},Po={class:"bg-white rounded-primea shadow-primea p-6"},Do={class:"flex items-center"},Uo={class:"p-2 bg-purple-100 rounded-lg"},Vo={class:"ml-4"},zo={class:"text-lg font-bold text-purple-600 font-primea"},Io={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},To={class:"lg:col-span-2 space-y-6"},Fo={class:"bg-white rounded-primea shadow-primea p-6"},Bo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Mo={class:"mt-1 text-gray-900 font-primea"},Ro={class:"mt-1 text-gray-900 font-primea"},Oo={class:"mt-1 text-gray-900 font-primea"},qo={class:"md:col-span-2"},No={class:"mt-1 text-gray-900 font-primea leading-relaxed"},Lo={class:"bg-white rounded-primea shadow-primea p-6"},Xo={key:0,class:"space-y-4"},Go={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Wo={class:"mt-1 text-gray-900 font-primea"},Ho={class:"mt-1 text-gray-900 font-primea"},Jo={class:"mt-1 text-gray-900 font-primea"},Ko={key:1,class:"text-center py-8 text-gray-500"},Qo={class:"bg-white rounded-primea shadow-primea p-6"},Zo={key:0,class:"space-y-4"},Yo={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},er={class:"md:col-span-2"},tr={class:"flex items-center justify-between mb-2"},sr={class:"font-semibold text-gray-900 font-primea"},or={class:"text-gray-600 text-sm font-primea"},rr={class:"text-center"},ar={class:"text-lg font-bold text-primea-blue font-primea"},nr={class:"text-center"},ir={class:"text-sm font-primea"},lr={class:"font-medium text-gray-900"},dr={class:"font-medium text-gray-900"},ur={class:"text-xs text-gray-500 mt-1"},mr={key:1,class:"text-center py-8 text-gray-500"},pr={class:"bg-white rounded-primea shadow-primea p-6"},cr={key:0,class:"overflow-x-auto"},gr={class:"w-full"},fr={class:"divide-y divide-gray-200"},br={class:"px-4 py-3 text-sm text-gray-900 font-primea"},vr={class:"px-4 py-3 text-sm text-gray-900 font-primea"},xr={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},yr={class:"px-4 py-3 text-sm text-gray-500 font-primea"},_r={key:1,class:"text-center py-8 text-gray-500"},hr={class:"space-y-6"},wr={class:"bg-white rounded-primea shadow-primea p-6"},kr={class:"space-y-3"},$r={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Cr={class:"w-full h-48 rounded-primea overflow-hidden"},Er=["src","alt"],jr={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Ar={class:"bg-white rounded-primea shadow-primea p-6"},Sr={class:"space-y-3"},Pr={class:"flex items-center justify-between"},Dr={class:"flex items-center justify-between"},Ur={class:"flex items-center justify-between"},Vr={class:"text-sm text-gray-600 font-primea"},zr={__name:"EventDetail",setup(x){const s=we(),D=ge(),r=A(!0),U=A(null),c=A(null),i=A([]),j=async()=>{r.value=!0,U.value=null;try{let t=s.params.slug,o;if(/^\d+$/.test(t))o=(await N.getEvent(t)).data.data;else try{const h=await N.getEvents();if(o=(h.data.data.events.data||h.data.data.events).find(fe=>fe.slug===t),!o)throw new Error(`Événement avec le slug "${t}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${t}" non trouvé`)}if(!o)throw new Error("Événement introuvable");c.value={...o,venue_name:o.venue?.name||"Lieu non spécifié",venue_address:o.venue?.address||"",category_name:o.category?.name||"Non spécifiée",tickets_sold:o.tickets?.filter(h=>["issued","used"].includes(h.status)).length||0,total_revenue:o.tickets?.filter(h=>["issued","used"].includes(h.status)).reduce((h,M)=>h+(M.ticket_type?.price||0),0)||0,is_public:o.is_active||!1,sales_active:o.is_active||!1,ticket_types:o.ticket_types||o.ticketTypes||[]};const g=o.ticket_types||o.ticketTypes||[];g.length>0&&(c.value.ticket_types=g.map(h=>({...h,sold:o.tickets?.filter(M=>M.ticket_type_id===h.id&&["issued","used"].includes(M.status)).length||0}))),c.value.tickets_sold>0?i.value=[{id:1,customer_name:"Kofi Asante",ticket_quantity:2,total_amount:c.value.ticket_types?.[0]?.price*2||5e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:2,customer_name:"Aminata Traore",ticket_quantity:1,total_amount:c.value.ticket_types?.[0]?.price||25e3,created_at:new Date(Date.now()-1728e5).toISOString()}]:i.value=[]}catch(t){console.error("Erreur lors du chargement de l'événement:",t),t.response?.status===404?U.value=`Événement avec l'identifiant "${s.params.slug}" non trouvé`:t.message?U.value=t.message:U.value="Erreur lors du chargement de l'événement"}finally{r.value=!1}},u=()=>{D.push({name:"organizer-event-edit",params:{slug:c.value.slug}})},f=async()=>{if((await I.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await N.updateEvent(c.value.id,{status:"published",is_active:!0}),c.value.status="published",c.value.is_active=!0,I.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(o){console.error("Erreur publication:",o),I.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},P=async()=>{const t=`${window.location.origin}/events/${c.value.slug}`;try{await navigator.clipboard.writeText(t),I.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{I.fire({title:"Lien de l'événement",html:`<input type="text" value="${t}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},p=()=>{const t=`/events/${c.value.slug}`;window.open(t,"_blank")},B=()=>{I.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},H=t=>new Intl.NumberFormat("fr-FR").format(t),G=t=>new Date(t).toLocaleDateString("fr-FR"),V=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=t=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[t]||t,O=t=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",z=t=>{const o=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return o==null?"Illimité":typeof o=="number"?new Intl.NumberFormat("fr-FR").format(o):o},K=t=>{const o=t.sold||0,g=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return g==null||g<=0?0:Math.round(o/g*100)},Y=t=>{console.log("Erreur de chargement d'image:",t.target.src),t.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},ee=t=>{console.log("Image chargée avec succès:",t.target.src)},Q=()=>{if(!c.value||!c.value.ticket_types)return"Non définie";const t=c.value.ticket_types.reduce((o,g)=>{const h=g.capacity||g.available_quantity||g.max_quantity||g.quantity||0;return o+(typeof h=="number"?h:0)},0);return t>0?new Intl.NumberFormat("fr-FR").format(t):"Non définie"},v=()=>{if(!c.value)return"Non définie";if(c.value.event_date&&c.value.event_date!=="Invalid Date")return G(c.value.event_date);if(c.value.schedules&&c.value.schedules.length>0){const t=c.value.schedules[0];if(t.starts_at)return G(t.starts_at)}return"Non définie"},$=()=>{if(!c.value)return!1;const t=c.value.image_url||c.value.image||c.value.image_file;return t&&t.trim()!==""},a=()=>{if(!c.value)return"";let t=c.value.image_url||c.value.image||c.value.image_file;return console.log("EventDetail - Image URL pour événement:",c.value.title,"URL brute:",t),t&&t.trim()!==""?t.startsWith("http://")||t.startsWith("https://")?(console.log("EventDetail - URL complète détectée:",t),t):t.startsWith("/")?(t=window.location.origin+t,console.log("EventDetail - URL construite depuis chemin relatif:",t),t):(t.includes("/")||(t=`${window.location.origin}/storage/images/events/${t}`,console.log("EventDetail - URL construite depuis nom de fichier:",t)),t):(console.log("EventDetail - Aucune image trouvée pour:",c.value.title),"")};return ie(()=>{j()}),(t,o)=>{const g=re("router-link");return d(),l("div",eo,[e("div",to,[r.value?(d(),l("div",so,[...o[1]||(o[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):U.value?(d(),l("div",oo,[e("div",ro,[y(C(_e),{class:"w-16 h-16 mx-auto text-red-500"})]),o[3]||(o[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",ao,m(U.value),1),y(g,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[...o[2]||(o[2]=[F(" Retour aux événements ",-1)])]),_:1})])):c.value?(d(),l("div",no,[e("div",io,[e("div",lo,[e("div",uo,[e("button",{onClick:o[0]||(o[0]=h=>t.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[y(C(ve),{class:"w-6 h-6"})]),e("div",null,[e("h1",mo,m(c.value.title),1),o[4]||(o[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",po,[e("span",{class:L(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",O(c.value.status)])},m(_(c.value.status)),3),e("div",co,[e("button",{onClick:u,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[y(C(be),{class:"w-4 h-4 inline mr-2"}),o[5]||(o[5]=F(" Modifier ",-1))]),c.value.status==="draft"?(d(),l("button",{key:0,onClick:f,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[y(C(he),{class:"w-4 h-4 inline mr-2"}),o[6]||(o[6]=F(" Publier ",-1))])):T("",!0)])])])]),e("div",go,[e("div",fo,[e("div",bo,[e("div",vo,[y(C(me),{class:"w-6 h-6 text-blue-600"})]),e("div",xo,[o[7]||(o[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",yo,m(c.value.tickets_sold||0),1)])])]),e("div",_o,[e("div",ho,[e("div",wo,[y(C(xe),{class:"w-6 h-6 text-green-600"})]),e("div",ko,[o[8]||(o[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",$o,m(H(c.value.total_revenue||0))+" XAF",1)])])]),e("div",Co,[e("div",Eo,[e("div",jo,[y(C(De),{class:"w-6 h-6 text-yellow-600"})]),e("div",Ao,[o[9]||(o[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",So,m(Q()),1)])])]),e("div",Po,[e("div",Do,[e("div",Uo,[y(C(oe),{class:"w-6 h-6 text-purple-600"})]),e("div",Vo,[o[10]||(o[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",zo,m(v()),1)])])])]),e("div",Io,[e("div",To,[e("div",Fo,[o[15]||(o[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",Bo,[e("div",null,[o[11]||(o[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",Mo,m(c.value.title),1)]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",Ro,m(c.value.venue_name),1)]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",Oo,m(c.value.category_name||"Non spécifiée"),1)]),e("div",qo,[o[14]||(o[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",No,m(c.value.description||"Aucune description"),1)])])]),e("div",Lo,[o[20]||(o[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),c.value.schedules&&c.value.schedules.length>0?(d(),l("div",Xo,[(d(!0),l(q,null,X(c.value.schedules,h=>(d(),l("div",{key:h.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Go,[e("div",null,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",Wo,m(V(h.starts_at)),1)]),e("div",null,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",Ho,m(V(h.ends_at)),1)]),e("div",null,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",Jo,m(h.door_time?V(h.door_time):"Non spécifiée"),1)])])]))),128))])):(d(),l("div",Ko,[y(C(oe),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[19]||(o[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",Qo,[o[25]||(o[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),c.value.ticket_types&&c.value.ticket_types.length>0?(d(),l("div",Zo,[(d(!0),l(q,null,X(c.value.ticket_types,h=>(d(),l("div",{key:h.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Yo,[e("div",er,[e("div",tr,[e("h3",sr,m(h.name),1),e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},m(h.is_active?"Actif":"Inactif"),3)]),e("p",or,m(h.description||"Aucune description"),1)]),e("div",rr,[o[21]||(o[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",ar,m(H(h.price))+" XAF ",1)]),e("div",nr,[o[23]||(o[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",ir,[e("span",lr,m(h.sold||0),1),o[22]||(o[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",dr,m(z(h)),1)]),e("div",ur,m(K(h))+"% vendus ",1)])])]))),128))])):(d(),l("div",mr,[y(C(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[24]||(o[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",pr,[o[28]||(o[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Commandes récentes",-1)),i.value.length>0?(d(),l("div",cr,[e("table",gr,[o[26]||(o[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",fr,[(d(!0),l(q,null,X(i.value,h=>(d(),l("tr",{key:h.id},[e("td",br,m(h.customer_name),1),e("td",vr,m(h.ticket_quantity),1),e("td",xr,m(H(h.total_amount))+" XAF",1),e("td",yr,m(G(h.created_at)),1)]))),128))])])])):(d(),l("div",_r,[y(C(Ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[27]||(o[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",hr,[e("div",wr,[o[32]||(o[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",kr,[e("button",{onClick:P,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[y(C(Ve),{class:"w-4 h-4 mr-2"}),o[29]||(o[29]=F(" Partager l'événement ",-1))]),e("button",{onClick:p,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[y(C(ye),{class:"w-4 h-4 mr-2"}),o[30]||(o[30]=F(" Voir la page publique ",-1))]),e("button",{onClick:B,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...o[31]||(o[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),F(" Exporter les données ",-1)])])])]),c.value?(d(),l("div",$r,[o[33]||(o[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("div",Cr,[$()?(d(),l("img",{key:0,src:a(),alt:c.value.title,class:"w-full h-full object-cover",onError:Y,onLoad:ee},null,40,Er)):(d(),l("div",jr,[y(C(oe),{class:"w-16 h-16 text-gray-400"})]))])])):T("",!0),e("div",Ar,[o[37]||(o[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Sr,[e("div",Pr,[o[34]||(o[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:L(["text-sm font-medium",c.value.is_public?"text-green-600":"text-red-600"])},m(c.value.is_public?"Oui":"Non"),3)]),e("div",Dr,[o[35]||(o[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:L(["text-sm font-medium",c.value.sales_active?"text-green-600":"text-red-600"])},m(c.value.sales_active?"Oui":"Non"),3)]),e("div",Ur,[o[36]||(o[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",Vr,m(G(c.value.created_at)),1)])])])])])])):T("",!0)])])}}},Ir=le(zr,[["__scopeId","data-v-006581df"]]),td=Object.freeze(Object.defineProperty({__proto__:null,default:Ir},Symbol.toStringTag,{value:"Module"})),Tr={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Fr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Br={key:0,class:"flex justify-center items-center h-64"},Mr={key:1,class:"text-center py-16"},Rr={class:"mb-4"},Or={class:"text-gray-600 mb-6"},qr={key:2},Nr={class:"mb-8"},Lr={class:"flex items-center justify-between"},Xr={class:"flex items-center space-x-4"},Gr={class:"text-gray-600 font-primea mt-1"},Wr={class:"flex items-center space-x-3"},Hr={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Jr={class:"lg:col-span-2 space-y-6"},Kr={class:"bg-white rounded-primea shadow-primea p-6"},Qr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zr={class:"md:col-span-2"},Yr={class:"md:col-span-2"},ea=["value"],ta={key:0},sa=["value"],oa={key:1,class:"space-y-2"},ra={class:"md:col-span-2"},aa={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},na={key:0,class:"mb-4"},ia=["src"],la={key:1},da={class:"bg-white rounded-primea shadow-primea p-6"},ua={class:"flex items-center justify-between mb-6"},ma={class:"space-y-4"},pa=["onUpdate:modelValue"],ca=["onUpdate:modelValue"],ga=["onUpdate:modelValue"],fa={class:"flex items-end"},ba=["onClick"],va={class:"bg-white rounded-primea shadow-primea p-6"},xa={class:"flex items-center justify-between mb-6"},ya={key:0,class:"text-center py-8 text-gray-500"},_a={key:1,class:"space-y-4"},ha=["onUpdate:modelValue"],wa=["onUpdate:modelValue"],ka=["onUpdate:modelValue"],$a=["onUpdate:modelValue"],Ca={class:"flex items-center space-x-2"},Ea={class:"flex items-center space-x-2"},ja=["onUpdate:modelValue"],Aa=["onClick"],Sa={class:"space-y-6"},Pa={class:"bg-white rounded-primea shadow-primea p-6"},Da={class:"space-y-4"},Ua={class:"flex items-center space-x-2"},Va={class:"bg-white rounded-primea shadow-primea p-6"},za={class:"space-y-3"},Ia=["disabled"],Ta={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Fa={class:"w-full h-48 rounded-primea overflow-hidden"},Ba=["src","alt"],Ma={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Ra={__name:"EventEdit",setup(x){const s=we(),D=ge(),r=A(!0),U=A(!1),c=A(null),i=A(null),j=A([]),u=A([]),f=A(!1),P=A(null),p=Z({title:"",description:"",category_id:"",venue_id:"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:"",image_preview:"",image_file:null,is_active:!1,schedules:[{starts_at:"",ends_at:"",door_time:""}],ticket_types:[]}),B=async()=>{try{const b=await N.getCategories();j.value=b.data.categories||[]}catch(b){console.error("Erreur chargement catégories:",b)}},H=async()=>{try{const b=await N.getVenues();u.value=b.data.venues||b.data.data||[]}catch(b){console.error("Erreur chargement lieux:",b)}},G=async()=>{r.value=!0,c.value=null;try{let b=s.params.slug,n;if(/^\d+$/.test(b))n=(await N.getEvent(b)).data.data;else try{const E=await N.getEvents();if(n=(E.data.data.events.data||E.data.data.events).find(se=>se.slug===b),!n)throw new Error(`Événement avec le slug "${b}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${b}" non trouvé`)}if(!n)throw new Error("Événement introuvable");i.value={...n,venue_name:n.venue?.name||n.venue_name||"",venue_address:n.venue?.address||n.venue_address||"",category_name:n.category?.name||n.category_name||""},Object.assign(p,{title:i.value.title||"",description:i.value.description||"",category_id:i.value.category_id||"",venue_id:i.value.venue_id||"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:i.value.image_url||"",image_preview:i.value.image_url||"",is_active:i.value.is_active??!1,schedules:i.value.schedules&&i.value.schedules.length>0?i.value.schedules.map(E=>({starts_at:E.starts_at?new Date(E.starts_at).toISOString().slice(0,16):"",ends_at:E.ends_at?new Date(E.ends_at).toISOString().slice(0,16):"",door_time:E.door_time?new Date(E.door_time).toISOString().slice(0,16):""})):[{starts_at:"",ends_at:"",door_time:""}],ticket_types:(i.value.ticket_types||i.value.ticketTypes||[]).map(E=>({id:E.id,name:E.name||"",description:E.description||"",price:E.price||0,capacity:E.capacity||E.available_quantity||E.max_quantity||E.quantity||0,is_active:E.is_active??E.status==="active"}))})}catch(b){console.error("Erreur lors du chargement de l'événement:",b),b.response?.status===404?c.value=`Événement avec l'identifiant "${s.params.slug}" non trouvé`:b.message?c.value=b.message:c.value="Erreur lors du chargement de l'événement"}finally{r.value=!1}},V=async()=>{U.value=!0;try{if(!i.value)throw new Error("Aucun événement à mettre à jour");const b={title:p.title,description:p.description,category_id:p.category_id,venue_id:p.venue_id||null,new_venue_name:p.venue_id==="new"?p.new_venue_name:null,new_venue_city:p.venue_id==="new"?p.new_venue_city:null,new_venue_address:p.venue_id==="new"?p.new_venue_address:null,is_active:p.is_active,schedules:p.schedules,ticket_types:p.ticket_types.map(n=>({id:n.id||null,name:n.name,description:n.description,price:n.price,capacity:n.capacity,is_active:n.is_active}))};if(p.image_file){const n=new FormData;console.log("EventEdit - Upload de fichier détecté:",p.image_file),console.log("EventEdit - Données à envoyer:",b),Object.keys(b).forEach(E=>{b[E]!==null&&b[E]!==void 0&&(E==="schedules"||E==="ticket_types"?(n.append(E,JSON.stringify(b[E])),console.log(`EventEdit - Ajout ${E} (JSON):`,JSON.stringify(b[E]))):(n.append(E,b[E]),console.log(`EventEdit - Ajout ${E}:`,b[E])))}),n.append("image_file",p.image_file),console.log("EventEdit - Fichier ajouté à FormData:",p.image_file.name);for(let[E,k]of n.entries())console.log(`EventEdit - FormData ${E}:`,k);await N.updateEventWithFile(i.value.id,n)}else b.image_url=p.image_url||null,b.image_file=null,console.log("EventEdit - Envoi sans fichier, avec URL:",b.image_url),await N.updateEvent(i.value.id,b);await I.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),D.push({name:"organizer-event-detail",params:{slug:i.value.slug}})}catch(b){console.error("Erreur lors de la mise à jour:",b),await I.fire({title:"Erreur",text:b.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{U.value=!1}},_=async()=>{if((await I.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await N.updateEvent(i.value.id,{status:"published",is_active:!0}),i.value.status="published",i.value.is_active=!0,await I.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(n){console.error("Erreur publication:",n),await I.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},O=()=>{p.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},z=async b=>{(await I.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&p.ticket_types.splice(b,1)},K=()=>{p.schedules.push({starts_at:"",ends_at:"",door_time:""})},Y=b=>{p.schedules.length>1&&p.schedules.splice(b,1)},ee=()=>{p.venue_id==="new"&&(f.value=!0)},Q=()=>{f.value=!1,p.venue_id="",p.new_venue_name="",p.new_venue_city="",p.new_venue_address=""},v=b=>{const n=b.target.files[0];if(n){p.image_file=n,p.image_url="";const E=new FileReader;E.onload=k=>{p.image_preview=k.target.result},E.readAsDataURL(n)}},$=()=>{p.image_url&&(p.image_preview=p.image_url,p.image_file=null)},a=()=>{p.image_url="",p.image_preview="",p.image_file=null,P.value&&(P.value.value="")},t=()=>{if(p.image_preview&&p.image_preview.trim()!=="")return!0;if(!i.value)return!1;const b=i.value.image_url||i.value.image||i.value.image_file;return b&&b.trim()!==""},o=()=>{if(p.image_preview)return p.image_preview;if(!i.value)return"";let b=i.value.image_url||i.value.image||i.value.image_file;return b&&b.trim()!==""?b.startsWith("http://")||b.startsWith("https://")?b:b.startsWith("/")?window.location.origin+b:b.includes("/")?b:`${window.location.origin}/storage/images/events/${b}`:""},g=b=>{console.log("Erreur de chargement d'image:",b.target.src),b.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},h=b=>{console.log("Image chargée avec succès:",b.target.src)},M=b=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[b]||b,fe=b=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[b]||"bg-gray-100 text-gray-800";return ie(async()=>{await Promise.all([B(),H(),G()])}),(b,n)=>{const E=re("router-link");return d(),l("div",Tr,[e("div",Fr,[r.value?(d(),l("div",Br,[...n[11]||(n[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):c.value?(d(),l("div",Mr,[e("div",Rr,[y(C(_e),{class:"w-16 h-16 mx-auto text-red-500"})]),n[13]||(n[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",Or,m(c.value),1),y(E,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[...n[12]||(n[12]=[F(" Retour aux événements ",-1)])]),_:1})])):i.value?(d(),l("div",qr,[e("div",Nr,[e("div",Lr,[e("div",Xr,[e("button",{onClick:n[0]||(n[0]=k=>b.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[y(C(ve),{class:"w-6 h-6"})]),e("div",null,[n[14]||(n[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",Gr,m(i.value.title),1)])]),e("div",Wr,[e("span",{class:L(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",fe(i.value.status)])},m(M(i.value.status)),3)])])]),e("form",{onSubmit:ae(V,["prevent"]),class:"space-y-8"},[e("div",Hr,[e("div",Jr,[e("div",Kr,[n[24]||(n[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Qr,[e("div",Zr,[n[15]||(n[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement *",-1)),w(e("input",{"onUpdate:modelValue":n[1]||(n[1]=k=>p.title=k),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[S,p.title]])]),e("div",Yr,[n[16]||(n[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=k=>p.description=k),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[S,p.description]])]),e("div",null,[n[18]||(n[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),w(e("select",{"onUpdate:modelValue":n[3]||(n[3]=k=>p.category_id=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[n[17]||(n[17]=e("option",{value:""},"Sélectionner une catégorie",-1)),(d(!0),l(q,null,X(j.value,k=>(d(),l("option",{key:k.id,value:k.id},m(k.name),9,ea))),128))],512),[[de,p.category_id]])]),e("div",null,[n[21]||(n[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),f.value?T("",!0):(d(),l("div",ta,[w(e("select",{"onUpdate:modelValue":n[4]||(n[4]=k=>p.venue_id=k),onChange:ee,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[n[19]||(n[19]=e("option",{value:""},"Sélectionner un lieu",-1)),(d(!0),l(q,null,X(u.value,k=>(d(),l("option",{key:k.id,value:k.id},m(k.name)+" - "+m(k.city),9,sa))),128)),n[20]||(n[20]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[de,p.venue_id]])])),f.value||p.venue_id==="new"?(d(),l("div",oa,[w(e("input",{"onUpdate:modelValue":n[5]||(n[5]=k=>p.new_venue_name=k),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[S,p.new_venue_name]]),w(e("input",{"onUpdate:modelValue":n[6]||(n[6]=k=>p.new_venue_city=k),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[S,p.new_venue_city]]),w(e("input",{"onUpdate:modelValue":n[7]||(n[7]=k=>p.new_venue_address=k),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[S,p.new_venue_address]]),e("button",{type:"button",onClick:Q,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):T("",!0)]),e("div",ra,[n[23]||(n[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",aa,[p.image_preview?(d(),l("div",na,[e("img",{src:p.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea",onError:g,onLoad:h},null,40,ia),e("button",{type:"button",onClick:a,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(d(),l("div",la,[e("input",{ref_key:"imageInput",ref:P,type:"file",accept:"image/*",onChange:v,class:"hidden"},null,544),e("button",{type:"button",onClick:n[8]||(n[8]=k=>b.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),n[22]||(n[22]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),w(e("input",{"onUpdate:modelValue":n[9]||(n[9]=k=>p.image_url=k),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:$},null,544),[[S,p.image_url]])]))])])])]),e("div",da,[e("div",ua,[n[26]||(n[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:K,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[y(C(ne),{class:"w-4 h-4 inline mr-2"}),n[25]||(n[25]=F(" Ajouter une séance ",-1))])]),e("div",ma,[(d(!0),l(q,null,X(p.schedules,(k,se)=>(d(),l("div",{key:se,class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[n[27]||(n[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),w(e("input",{"onUpdate:modelValue":W=>k.starts_at=W,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,pa),[[S,k.starts_at]])]),e("div",null,[n[28]||(n[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),w(e("input",{"onUpdate:modelValue":W=>k.ends_at=W,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ca),[[S,k.ends_at]])]),e("div",null,[n[29]||(n[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Ouverture des portes",-1)),w(e("input",{"onUpdate:modelValue":W=>k.door_time=W,type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ga),[[S,k.door_time]])]),e("div",fa,[p.schedules.length>1?(d(),l("button",{key:0,type:"button",onClick:W=>Y(se),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[y(C(ce),{class:"w-4 h-4"})],8,ba)):T("",!0)])]))),128))])]),e("div",va,[e("div",xa,[n[31]||(n[31]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:O,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[y(C(ne),{class:"w-4 h-4 inline mr-2"}),n[30]||(n[30]=F(" Ajouter un type ",-1))])]),p.ticket_types.length===0?(d(),l("div",ya,[y(C(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[32]||(n[32]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),n[33]||(n[33]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(d(),l("div",_a,[(d(!0),l(q,null,X(p.ticket_types,(k,se)=>(d(),l("div",{key:se,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[n[34]||(n[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),w(e("input",{"onUpdate:modelValue":W=>k.name=W,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,ha),[[S,k.name]])]),e("div",null,[n[35]||(n[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),w(e("input",{"onUpdate:modelValue":W=>k.price=W,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,wa),[[S,k.price,void 0,{number:!0}]])]),e("div",null,[n[36]||(n[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),w(e("input",{"onUpdate:modelValue":W=>k.capacity=W,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,ka),[[S,k.capacity,void 0,{number:!0}]])]),e("div",null,[n[37]||(n[37]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":W=>k.description=W,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,$a),[[S,k.description]])]),e("div",Ca,[e("label",Ea,[w(e("input",{"onUpdate:modelValue":W=>k.is_active=W,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,ja),[[pe,k.is_active]]),n[38]||(n[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))]),e("button",{type:"button",onClick:W=>z(se),class:"text-red-600 hover:text-red-800 p-1"},[y(C(ce),{class:"w-4 h-4"})],8,Aa)])]))),128))]))])]),e("div",Sa,[e("div",Pa,[n[41]||(n[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Da,[e("div",null,[e("label",Ua,[w(e("input",{"onUpdate:modelValue":n[10]||(n[10]=k=>p.is_active=k),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[pe,p.is_active]]),n[39]||(n[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement actif",-1))]),n[40]||(n[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Publier l'événement et activer les ventes",-1))])])]),e("div",Va,[n[44]||(n[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",za,[e("button",{type:"submit",disabled:U.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},m(U.value?"Enregistrement...":"Enregistrer les modifications"),9,Ia),y(E,{to:{name:"organizer-event-detail",params:{slug:i.value?.slug||C(s).params.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:J(()=>[...n[42]||(n[42]=[F(" Annuler les modifications ",-1)])]),_:1},8,["to"]),i.value&&!i.value.is_active?(d(),l("button",{key:0,type:"button",onClick:_,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[y(C(he),{class:"w-4 h-4 inline mr-2"}),n[43]||(n[43]=F(" Publier l'événement ",-1))])):T("",!0)])]),i.value?(d(),l("div",Ta,[n[45]||(n[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image actuelle",-1)),e("div",Fa,[t()?(d(),l("img",{key:0,src:o(),alt:i.value.title,class:"w-full h-full object-cover",onError:g,onLoad:h},null,40,Ba)):(d(),l("div",Ma,[y(C(oe),{class:"w-16 h-16 text-gray-400"})]))])])):T("",!0)])])],32)])):T("",!0)])])}}},Oa=le(Ra,[["__scopeId","data-v-a5121c89"]]),sd=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),qa={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Na={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},La={class:"mb-8"},Xa={class:"flex items-center justify-between"},Ga={class:"flex items-center space-x-4"},Wa={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ha={class:"lg:col-span-2 space-y-6"},Ja={class:"bg-white rounded-primea shadow-primea p-6"},Ka={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Qa={class:"md:col-span-2"},Za={class:"md:col-span-2"},Ya=["value"],en={key:0},tn=["value"],sn={key:1,class:"space-y-2"},on={class:"md:col-span-2"},rn={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},an={key:0,class:"mb-4"},nn=["src"],ln={key:1},dn={class:"bg-white rounded-primea shadow-primea p-6"},un={class:"flex items-center justify-between mb-6"},mn={class:"space-y-4"},pn=["onUpdate:modelValue","onChange"],cn=["onUpdate:modelValue","min"],gn={class:"flex items-end"},fn=["onClick"],bn={class:"bg-white rounded-primea shadow-primea p-6"},vn={class:"flex items-center justify-between mb-6"},xn={key:0,class:"text-center py-8 text-gray-500"},yn={key:1,class:"space-y-4"},_n=["onUpdate:modelValue"],hn=["onUpdate:modelValue"],wn=["onUpdate:modelValue"],kn=["onUpdate:modelValue"],$n={class:"flex items-end"},Cn=["onClick"],En={class:"space-y-6"},jn={class:"bg-white rounded-primea shadow-primea p-6"},An={class:"space-y-4"},Sn={class:"flex items-center space-x-2"},Pn={class:"flex items-center space-x-2"},Dn={class:"bg-white rounded-primea shadow-primea p-6"},Un={class:"space-y-3"},Vn=["disabled"],zn={key:0,class:"bg-white rounded-primea shadow-primea p-6"},In=["src","alt"],Tn={class:"bg-white rounded-primea shadow-primea p-6"},Fn={class:"space-y-2 text-sm"},Bn={class:"flex justify-between"},Mn={class:"font-medium font-primea"},Rn={class:"flex justify-between"},On={class:"font-medium font-primea"},qn={key:0,class:"flex justify-between"},Nn={class:"font-medium font-primea"},Ln={key:1,class:"flex justify-between"},Xn={class:"font-medium font-primea"},Gn={__name:"EventCreate",setup(x){const s=ge(),D=A(!1),r=A([]),U=A([]),c=A(!1),i=A(!1),j=A(null),u=Z({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),f=te(()=>u.ticket_types.reduce((a,t)=>a+(parseInt(t.capacity)||0),0)),P=te(()=>{if(u.ticket_types.length===0)return 0;const a=u.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return a.length>0?Math.min(...a):0}),p=te(()=>{if(u.ticket_types.length===0)return 0;const a=u.ticket_types.map(t=>parseInt(t.price)||0);return a.length>0?Math.max(...a):0}),B=()=>{u.ticket_types.push({name:"",description:"",price:"",capacity:""})},H=()=>{u.schedules.push({starts_at:"",ends_at:""})},G=a=>{u.schedules.length>1&&u.schedules.splice(a,1)},V=()=>{u.venue_id==="new"?i.value=!0:i.value=!1},_=()=>{i.value=!1,u.venue_id="",u.new_venue_name="",u.new_venue_city="",u.new_venue_address=""},O=a=>{const t=a.target.files[0];if(t){u.image_file=t;const o=new FileReader;o.onload=g=>{u.image_preview=g.target.result,u.image_url=""},o.readAsDataURL(t)}},z=()=>{u.image_url&&(u.image_preview=u.image_url,u.image_file=null)},K=()=>{u.image_url="",u.image_preview="",u.image_file=null,j.value&&(j.value.value="")},Y=a=>{u.ticket_types.length>1&&u.ticket_types.splice(a,1)},ee=a=>{if(a.starts_at&&(!a.ends_at||new Date(a.ends_at)<new Date(a.starts_at))){const t=new Date(a.starts_at);t.setHours(t.getHours()+2),a.ends_at=t.toISOString().slice(0,16)}},Q=async()=>{if(u.ticket_types.length===0){I.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!u.title){I.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}D.value=!0;try{if(!u.category_id){I.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!u.venue_id&&!u.new_venue_name){I.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(u.schedules.some(o=>!o.starts_at||!o.ends_at)){I.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}if(u.schedules.some(o=>new Date(o.ends_at)<new Date(o.starts_at))){I.fire({title:"Erreur",text:"La date de fin doit être égale ou postérieure à la date de début",icon:"error",confirmButtonColor:"#272d63"});return}const a={title:u.title,description:u.description,category_id:u.category_id,venue_id:u.venue_id!=="new"?u.venue_id:null,venue_name:u.venue_id==="new"?u.new_venue_name:null,venue_city:u.venue_id==="new"?u.new_venue_city:"Abidjan",venue_address:u.venue_id==="new"?u.new_venue_address:null,is_active:u.status==="published"?1:0,schedules:u.schedules.map(o=>({starts_at:o.starts_at,ends_at:o.ends_at,door_time:o.starts_at})),ticket_types:u.ticket_types.map(o=>({name:o.name,description:o.description,price:parseFloat(o.price),capacity:parseInt(o.capacity),is_active:!0}))};let t;if(u.image_file){const o=new FormData;Object.keys(a).forEach(g=>{a[g]!==null&&a[g]!==void 0&&(g==="schedules"||g==="ticket_types"?o.append(g,JSON.stringify(a[g])):o.append(g,a[g]))}),o.append("image_file",u.image_file),t=await N.createEventWithFile(o)}else a.image_url=u.image_url||null,t=await N.createEvent(a);if(t.data.success)I.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{s.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(a){console.error("Erreur création événement:",a),console.error("Détails erreur:",a.response?.data);let t=a.response?.data?.message||"Erreur lors de la création de l'événement";if(a.response?.data?.errors){const o=a.response.data.errors,g=Object.keys(o).map(h=>`${h}: ${o[h].join(", ")}`).join(`
`);t+=`

Détails:
`+g}I.fire({title:"Erreur de validation",text:t,icon:"error",confirmButtonColor:"#272d63"})}finally{D.value=!1}},v=async()=>{c.value=!0;try{const a=await N.getCategories();a.data.success&&(r.value=a.data.categories||a.data.data);const t=await N.getVenues();t.data.success&&(U.value=t.data.venues||t.data.data)}catch(a){console.error("Erreur chargement données initiales:",a)}finally{c.value=!1}},$=a=>new Intl.NumberFormat("fr-FR").format(a);return ie(()=>{v()}),(a,t)=>{const o=re("router-link");return d(),l("div",qa,[e("div",Na,[e("div",La,[e("div",Xa,[e("div",Ga,[e("button",{onClick:t[0]||(t[0]=g=>a.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[y(C(ve),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:ae(Q,["prevent"]),class:"space-y-8"},[e("div",Wa,[e("div",Ha,[e("div",Ja,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Ka,[e("div",Qa,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=g=>u.title=g),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[S,u.title]])]),e("div",Za,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=g=>u.description=g),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[S,u.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>u.category_id=g),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(d(!0),l(q,null,X(r.value,g=>(d(),l("option",{key:g.id,value:g.id},m(g.name),9,Ya))),128))],512),[[de,u.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),i.value?T("",!0):(d(),l("div",en,[w(e("select",{"onUpdate:modelValue":t[4]||(t[4]=g=>u.venue_id=g),onChange:V,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(d(!0),l(q,null,X(U.value,g=>(d(),l("option",{key:g.id,value:g.id},m(g.name)+" - "+m(g.city),9,tn))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[de,u.venue_id]])])),i.value||u.venue_id==="new"?(d(),l("div",sn,[w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=g=>u.new_venue_name=g),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[S,u.new_venue_name]]),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=g=>u.new_venue_city=g),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[S,u.new_venue_city]]),w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=g=>u.new_venue_address=g),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[S,u.new_venue_address]]),e("button",{type:"button",onClick:_,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):T("",!0)]),e("div",on,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",rn,[u.image_preview?(d(),l("div",an,[e("img",{src:u.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,nn),e("button",{type:"button",onClick:K,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(d(),l("div",ln,[e("input",{ref_key:"imageInput",ref:j,type:"file",accept:"image/*",onChange:O,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=g=>a.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),w(e("input",{"onUpdate:modelValue":t[9]||(t[9]=g=>u.image_url=g),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:z},null,544),[[S,u.image_url]])]))])])])]),e("div",dn,[e("div",un,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:H,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[y(C(ne),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=F(" Ajouter une séance ",-1))])]),e("div",mn,[(d(!0),l(q,null,X(u.schedules,(g,h)=>(d(),l("div",{key:h,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),w(e("input",{"onUpdate:modelValue":M=>g.starts_at=M,type:"datetime-local",required:"",onChange:M=>ee(g),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,40,pn),[[S,g.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),w(e("input",{"onUpdate:modelValue":M=>g.ends_at=M,type:"datetime-local",required:"",min:g.starts_at,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,cn),[[S,g.ends_at]]),t[28]||(t[28]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"La date de fin doit être égale ou postérieure à la date de début",-1))]),e("div",gn,[u.schedules.length>1?(d(),l("button",{key:0,type:"button",onClick:M=>G(h),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[y(C(ce),{class:"w-4 h-4"})],8,fn)):T("",!0)])]))),128))])]),e("div",bn,[e("div",vn,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:B,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[y(C(ne),{class:"w-4 h-4 inline mr-2"}),t[29]||(t[29]=F(" Ajouter un type ",-1))])]),u.ticket_types.length===0?(d(),l("div",xn,[y(C(me),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[31]||(t[31]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[32]||(t[32]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(d(),l("div",yn,[(d(!0),l(q,null,X(u.ticket_types,(g,h)=>(d(),l("div",{key:h,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),w(e("input",{"onUpdate:modelValue":M=>g.name=M,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,_n),[[S,g.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),w(e("input",{"onUpdate:modelValue":M=>g.price=M,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,hn),[[S,g.price,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),w(e("input",{"onUpdate:modelValue":M=>g.capacity=M,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,wn),[[S,g.capacity,void 0,{number:!0}]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),w(e("input",{"onUpdate:modelValue":M=>g.description=M,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,kn),[[S,g.description]])]),e("div",$n,[u.ticket_types.length>1?(d(),l("button",{key:0,type:"button",onClick:M=>Y(h),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[y(C(ce),{class:"w-4 h-4"})],8,Cn)):T("",!0)])]))),128))]))])]),e("div",En,[e("div",jn,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",An,[e("div",null,[e("label",Sn,[w(e("input",{"onUpdate:modelValue":t[10]||(t[10]=g=>u.is_public=g),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[pe,u.is_public]]),t[37]||(t[37]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",Pn,[w(e("input",{"onUpdate:modelValue":t[11]||(t[11]=g=>u.sales_active=g),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[pe,u.sales_active]]),t[39]||(t[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),w(e("select",{"onUpdate:modelValue":t[12]||(t[12]=g=>u.status=g),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[41]||(t[41]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[de,u.status]]),t[43]||(t[43]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",Dn,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",Un,[e("button",{type:"submit",disabled:D.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},m(D.value?"Création en cours...":"Créer l'événement"),9,Vn),y(o,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:J(()=>[...t[45]||(t[45]=[F(" Annuler ",-1)])]),_:1})])]),u.image_url||u.image_preview?(d(),l("div",zn,[t[47]||(t[47]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:u.image_preview||u.image_url,alt:u.title,class:"w-full h-48 object-cover rounded-primea"},null,8,In)])):T("",!0),e("div",Tn,[t[52]||(t[52]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",Fn,[e("div",Bn,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",Mn,m(u.ticket_types.length),1)]),e("div",Rn,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",On,m(f.value||"Illimitée"),1)]),P.value>0?(d(),l("div",qn,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",Nn,m($(P.value))+" XAF",1)])):T("",!0),p.value>0?(d(),l("div",Ln,[t[51]||(t[51]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",Xn,m($(p.value))+" XAF",1)])):T("",!0)])])])])],32)])])}}},Wn=le(Gn,[["__scopeId","data-v-9749d093"]]),od=Object.freeze(Object.defineProperty({__proto__:null,default:Wn},Symbol.toStringTag,{value:"Module"})),Hn={name:"BalanceManagement",setup(){const x=A(!1),s=A(!1),D=A(!1),r=A(!1),U=A(!1),c=A([]),i=A([]),j=Z({pending_payouts:0,total_payouts:0}),u=Z({gateway:"",available_balance:0,amount:"",phone_number:""}),f=Z({gateway:"",auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),P=te(()=>c.value.reduce((t,o)=>t+o.balance,0)),p=async()=>{x.value=!0;try{const o=await(await fetch("/api/v1/organizer/balances",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();o.success&&(c.value=o.data.balances)}catch(t){console.error("Erreur chargement soldes:",t)}finally{x.value=!1}},B=async()=>{try{const o=await(await fetch("/api/v1/organizer/payouts?limit=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();o.success&&(i.value=o.data.payouts.data||o.data.payouts,j.pending_payouts=i.value.filter(g=>["pending","processing"].includes(g.status)).length,j.total_payouts=i.value.reduce((g,h)=>g+h.amount,0))}catch(t){console.error("Erreur chargement payouts récents:",t)}},H=t=>{Object.assign(u,{gateway:t.gateway,available_balance:t.balance,amount:"",phone_number:t.payout_phone_number||""}),r.value=!0},G=async()=>{s.value=!0;try{const o=await(await fetch("/api/v1/organizer/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).json();o.success?(alert("Demande de payout envoyée avec succès"),r.value=!1,p(),B()):alert(o.message||"Erreur lors de la demande")}catch(t){console.error("Erreur demande payout:",t),alert("Erreur technique")}finally{s.value=!1}},V=t=>{Object.assign(f,{gateway:t.gateway,auto_payout_enabled:t.auto_payout_enabled,auto_payout_threshold:t.auto_payout_threshold,payout_phone_number:t.payout_phone_number||""}),U.value=!0},_=async()=>{D.value=!0;try{const o=await(await fetch("/api/v1/organizer/auto-payout-config",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(f)})).json();o.success?(alert("Configuration mise à jour avec succès"),U.value=!1,p()):alert(o.message||"Erreur lors de la mise à jour")}catch(t){console.error("Erreur sauvegarde config:",t),alert("Erreur technique")}finally{D.value=!1}},O=t=>i.value.filter(o=>o.gateway===t).slice(0,3),z=t=>{alert(`Détails du payout #${t.reference}
Montant: ${K(t.amount)} XAF
Statut: ${$(t.status)}`)},K=t=>new Intl.NumberFormat("fr-FR").format(t),Y=t=>new Date(t).toLocaleDateString("fr-FR"),ee=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),Q=t=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[t]||t,v=t=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[t]||"bg-gray-100 text-gray-800",$=t=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[t]||t,a=t=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800";return ie(()=>{p(),B()}),{loading:x,requestingPayout:s,savingConfig:D,showPayoutModal:r,showConfigModal:U,balances:c,recentPayouts:i,stats:j,payoutForm:u,configForm:f,totalBalance:P,loadBalances:p,loadRecentPayouts:B,requestPayout:H,submitPayoutRequest:G,configureAutoPayout:V,saveAutoPayoutConfig:_,getRecentPayouts:O,viewPayoutDetails:z,formatAmount:K,formatDate:Y,formatDateTime:ee,getGatewayName:Q,getGatewayBadgeClass:v,getPayoutStatusName:$,getPayoutStatusClass:a}}},Jn={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Kn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Qn={class:"mb-8"},Zn={class:"flex items-center justify-between"},Yn={key:0,class:"flex justify-center items-center h-64"},ei={key:1},ti={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},si={class:"bg-white rounded-lg shadow p-6"},oi={class:"flex items-center"},ri={class:"ml-4"},ai={class:"text-2xl font-bold text-green-600"},ni={class:"bg-white rounded-lg shadow p-6"},ii={class:"flex items-center"},li={class:"ml-4"},di={class:"text-2xl font-bold text-yellow-600"},ui={class:"bg-white rounded-lg shadow p-6"},mi={class:"flex items-center"},pi={class:"ml-4"},ci={class:"text-2xl font-bold text-blue-600"},gi={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},fi={class:"flex items-center justify-between mb-4"},bi={class:"flex items-center"},vi={class:"text-lg font-semibold text-gray-900"},xi={class:"text-right"},yi={class:"text-2xl font-bold text-green-600"},_i={class:"mb-4 p-3 bg-gray-50 rounded-lg"},hi={class:"flex items-center justify-between mb-2"},wi={key:0,class:"text-sm text-gray-600"},ki={key:0},$i={class:"space-y-3"},Ci=["onClick","disabled"],Ei=["onClick"],ji={class:"mt-6 pt-6 border-t"},Ai={key:0,class:"text-sm text-gray-500"},Si={key:1,class:"space-y-2"},Pi={class:"font-medium"},Di={class:"text-gray-500 ml-2"},Ui={class:"bg-white rounded-lg shadow"},Vi={class:"p-6 border-b"},zi={class:"flex justify-between items-center"},Ii={key:0,class:"p-8 text-center text-gray-500"},Ti={key:1,class:"overflow-x-auto"},Fi={class:"w-full"},Bi={class:"divide-y divide-gray-200"},Mi={class:"px-6 py-4 text-sm font-mono text-gray-900"},Ri={class:"px-6 py-4 text-sm"},Oi={class:"px-6 py-4 text-sm font-medium text-gray-900"},qi={class:"px-6 py-4 text-sm"},Ni={class:"px-6 py-4 text-sm"},Li={class:"px-6 py-4 text-sm text-gray-500"},Xi={class:"px-6 py-4 text-sm"},Gi=["onClick"],Wi={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Hi={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ji={class:"space-y-4"},Ki=["value"],Qi=["value"],Zi=["max"],Yi={class:"flex justify-end space-x-3 mt-6"},el=["disabled"],tl={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},sl={class:"bg-white rounded-lg p-6 w-full max-w-md"},ol={class:"text-lg font-bold mb-4"},rl={class:"space-y-4"},al={class:"flex items-center space-x-2"},nl={key:0},il={class:"flex justify-end space-x-3 mt-6"},ll=["disabled"];function dl(x,s,D,r,U,c){return d(),l("div",Jn,[e("div",Kn,[e("div",Qn,[e("div",Zn,[s[12]||(s[12]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Soldes & Payouts"),e("p",{class:"text-gray-600"},"Consultez vos soldes et gérez vos demandes de payout")],-1)),e("button",{onClick:s[0]||(s[0]=i=>x.$router.push("/organizer/payouts/history")),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...s[11]||(s[11]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),F(" Historique Payouts ",-1)])])])]),r.loading?(d(),l("div",Yn,[...s[13]||(s[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(d(),l("div",ei,[e("div",ti,[e("div",si,[e("div",oi,[s[15]||(s[15]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",ri,[s[14]||(s[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",ai,m(r.formatAmount(r.totalBalance))+" XAF",1)])])]),e("div",ni,[e("div",ii,[s[17]||(s[17]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",li,[s[16]||(s[16]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",di,m(r.stats.pending_payouts||0),1)])])]),e("div",ui,[e("div",mi,[s[19]||(s[19]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",pi,[s[18]||(s[18]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",ci,m(r.formatAmount(r.stats.total_payouts||0))+" XAF",1)])])])]),e("div",gi,[(d(!0),l(q,null,X(r.balances,i=>(d(),l("div",{key:i.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",fi,[e("div",bi,[e("div",{class:L(["p-2 rounded-lg mr-4",r.getGatewayBadgeClass(i.gateway)])},[...s[20]||(s[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",vi,m(r.getGatewayName(i.gateway)),1),s[21]||(s[21]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",xi,[e("p",yi,m(r.formatAmount(i.balance))+" XAF",1)])]),e("div",_i,[e("div",hi,[s[22]||(s[22]=e("span",{class:"text-sm font-medium text-gray-700"},"Payout Automatique",-1)),e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",i.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},m(i.auto_payout_enabled?"Activé":"Désactivé"),3)]),i.auto_payout_enabled?(d(),l("div",wi,[e("p",null,"Seuil: "+m(r.formatAmount(i.auto_payout_threshold))+" XAF",1),i.payout_phone_number?(d(),l("p",ki,"Téléphone: "+m(i.payout_phone_number),1)):T("",!0)])):T("",!0)]),e("div",$i,[e("button",{onClick:j=>r.requestPayout(i),disabled:i.balance<1e3,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[s[23]||(s[23]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),F(" "+m(i.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Payout"),1)],8,Ci),e("button",{onClick:j=>r.configureAutoPayout(i),class:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700"},[...s[24]||(s[24]=[e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),F(" Configurer Auto-Payout ",-1)])],8,Ei)]),e("div",ji,[s[25]||(s[25]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),r.getRecentPayouts(i.gateway).length===0?(d(),l("div",Ai," Aucune transaction récente ")):(d(),l("div",Si,[(d(!0),l(q,null,X(r.getRecentPayouts(i.gateway),j=>(d(),l("div",{key:j.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",Pi,m(r.formatAmount(j.amount))+" XAF",1),e("span",Di,m(r.formatDate(j.created_at)),1)]),e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.getPayoutStatusClass(j.status)])},m(r.getPayoutStatusName(j.status)),3)]))),128))]))])]))),128))]),e("div",Ui,[e("div",Vi,[e("div",zi,[s[26]||(s[26]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:s[1]||(s[1]=i=>x.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),r.recentPayouts.length===0?(d(),l("div",Ii," Aucun payout récent ")):(d(),l("div",Ti,[e("table",Fi,[s[27]||(s[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Bi,[(d(!0),l(q,null,X(r.recentPayouts,i=>(d(),l("tr",{key:i.id},[e("td",Mi,"#"+m(i.reference),1),e("td",Ri,[e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.getGatewayBadgeClass(i.gateway)])},m(r.getGatewayName(i.gateway)),3)]),e("td",Oi,m(r.formatAmount(i.amount))+" XAF",1),e("td",qi,[e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.getPayoutStatusClass(i.status)])},m(r.getPayoutStatusName(i.status)),3)]),e("td",Ni,[e("span",{class:L(["inline-flex px-2 py-1 text-xs rounded-full",i.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},m(i.is_automatic?"Auto":"Manuel"),3)]),e("td",Li,m(r.formatDateTime(i.created_at)),1),e("td",Xi,[e("button",{onClick:j=>r.viewPayoutDetails(i),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Gi)])]))),128))])])]))])])),r.showPayoutModal?(d(),l("div",Wi,[e("div",Hi,[s[34]||(s[34]=e("h3",{class:"text-lg font-bold mb-4"},"Demande de Payout",-1)),e("form",{onSubmit:s[5]||(s[5]=ae((...i)=>r.submitPayoutRequest&&r.submitPayoutRequest(...i),["prevent"]))},[e("div",Ji,[e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:r.getGatewayName(r.payoutForm.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ki)]),e("div",null,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:r.formatAmount(r.payoutForm.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Qi)]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),w(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>r.payoutForm.amount=i),type:"number",min:1e3,max:r.payoutForm.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Zi),[[S,r.payoutForm.amount,void 0,{number:!0}]]),s[31]||(s[31]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),w(e("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>r.payoutForm.phone_number=i),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,r.payoutForm.phone_number]]),s[33]||(s[33]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",Yi,[e("button",{type:"button",onClick:s[4]||(s[4]=i=>r.showPayoutModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:r.requestingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},m(r.requestingPayout?"Demande en cours...":"Demander le Payout"),9,el)])],32)])])):T("",!0),r.showConfigModal?(d(),l("div",tl,[e("div",sl,[e("h3",ol,"Configuration Auto-Payout - "+m(r.getGatewayName(r.configForm.gateway)),1),e("form",{onSubmit:s[10]||(s[10]=ae((...i)=>r.saveAutoPayoutConfig&&r.saveAutoPayoutConfig(...i),["prevent"]))},[e("div",rl,[e("div",null,[e("label",al,[w(e("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=i=>r.configForm.auto_payout_enabled=i),class:"rounded border-gray-300"},null,512),[[pe,r.configForm.auto_payout_enabled]]),s[35]||(s[35]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),r.configForm.auto_payout_enabled?(d(),l("div",nl,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),w(e("input",{"onUpdate:modelValue":s[7]||(s[7]=i=>r.configForm.auto_payout_threshold=i),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,r.configForm.auto_payout_threshold,void 0,{number:!0}]]),s[37]||(s[37]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):T("",!0),e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),w(e("input",{"onUpdate:modelValue":s[8]||(s[8]=i=>r.configForm.payout_phone_number=i),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,r.configForm.payout_phone_number]]),s[39]||(s[39]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts automatiques",-1))])]),e("div",il,[e("button",{type:"button",onClick:s[9]||(s[9]=i=>r.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:r.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},m(r.savingConfig?"Enregistrement...":"Enregistrer"),9,ll)])],32)])])):T("",!0)])])}const ul=le(Hn,[["render",dl],["__scopeId","data-v-e6c5fcd5"]]),rd=Object.freeze(Object.defineProperty({__proto__:null,default:ul},Symbol.toStringTag,{value:"Module"})),ml={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},pl={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},cl={key:0,class:"flex justify-center items-center h-64"},gl={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},fl={class:"bg-white rounded-primea shadow-primea p-6"},bl={class:"flex items-center justify-between mb-6"},vl=["disabled"],xl=["disabled"],yl=["disabled"],_l={key:0,class:"flex space-x-3 pt-4"},hl=["disabled"],wl={class:"bg-white rounded-primea shadow-primea p-6"},kl={class:"flex items-center justify-between mb-6"},$l=["disabled"],Cl=["disabled"],El=["disabled"],jl=["disabled"],Al=["disabled"],Sl={key:0,class:"flex space-x-3 pt-4"},Pl=["disabled"],Dl={class:"bg-white rounded-primea shadow-primea p-6"},Ul=["disabled"],Vl={class:"bg-white rounded-primea shadow-primea p-6"},zl={class:"space-y-4"},Il={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},Tl={class:"flex items-center space-x-3"},Fl={class:"text-xs text-green-600 font-primea"},Bl={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},Ml={class:"flex items-center space-x-3"},Rl={class:"text-xs text-blue-600 font-primea"},Ol={class:"grid grid-cols-2 gap-4 pt-4"},ql={class:"text-center p-3 border rounded-primea"},Nl={class:"text-2xl font-bold text-primea-blue font-primea"},Ll={class:"text-center p-3 border rounded-primea"},Xl={class:"text-2xl font-bold text-primea-yellow font-primea"},Gl={__name:"OrganizerProfile",setup(x){ke();const s=A(!1),D=A(!1),r=A(!1),U=A(!1),c=A(!1),i=A(!1),j=A(null),u=A(null),f=A({events:0,tickets:0}),P=Z({name:"",email:"",phone:""}),p=Z({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),B=Z({current_password:"",password:"",password_confirmation:""}),H=Z({}),G=Z({}),V=()=>{D.value||Object.assign(H,P),D.value=!D.value},_=()=>{r.value||Object.assign(G,p),r.value=!r.value},O=()=>{Object.assign(P,H),D.value=!1},z=()=>{Object.assign(p,G),r.value=!1},K=async()=>{U.value=!0;try{console.log("Mise à jour des informations personnelles:",P),await new Promise($=>setTimeout($,1e3)),D.value=!1}catch($){console.error("Erreur lors de la mise à jour:",$)}finally{U.value=!1}},Y=async()=>{c.value=!0;try{console.log("Mise à jour de l'organisation:",p),await new Promise($=>setTimeout($,1e3)),r.value=!1}catch($){console.error("Erreur lors de la mise à jour:",$)}finally{c.value=!1}},ee=async()=>{if(B.password!==B.password_confirmation){alert("Les mots de passe ne correspondent pas");return}i.value=!0;try{console.log("Changement de mot de passe"),await new Promise($=>setTimeout($,1e3)),Object.assign(B,{current_password:"",password:"",password_confirmation:""})}catch($){console.error("Erreur lors du changement de mot de passe:",$)}finally{i.value=!1}},Q=$=>$?new Date($).toLocaleDateString("fr-FR"):"Non disponible",v=async()=>{s.value=!0;try{j.value={name:"Marie Nzougou",email:"marie@example.com",phone:"+225 07 12 34 56 78",email_verified_at:"2024-01-15T10:30:00Z"},u.value={name:"Mon Organisation",description:"Organisation spécialisée dans l'événementiel",website_url:"https://monorganisation.com",contact_email:"contact@monorganisation.com",contact_phone:"+225 07 12 34 56 79",verified_at:"2024-01-20T14:00:00Z"},f.value={events:12,tickets:345},Object.assign(P,{name:j.value.name,email:j.value.email,phone:j.value.phone}),Object.assign(p,{name:u.value.name,description:u.value.description,website_url:u.value.website_url,contact_email:u.value.contact_email,contact_phone:u.value.contact_phone})}catch($){console.error("Erreur lors du chargement du profil:",$)}finally{s.value=!1}};return ie(()=>{v()}),($,a)=>(d(),l("div",ml,[e("div",pl,[a[31]||(a[31]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),s.value?(d(),l("div",cl,[...a[11]||(a[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(d(),l("div",gl,[e("div",fl,[e("div",bl,[a[12]||(a[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:V,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[y(C(be),{class:"w-5 h-5"})])]),e("form",{onSubmit:ae(K,["prevent"]),class:"space-y-4"},[e("div",null,[a[13]||(a[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),w(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>P.name=t),type:"text",disabled:!D.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,vl),[[S,P.name]])]),e("div",null,[a[14]||(a[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),w(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>P.email=t),type:"email",disabled:!D.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,xl),[[S,P.email]])]),e("div",null,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),w(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>P.phone=t),type:"tel",disabled:!D.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,yl),[[S,P.phone]])]),D.value?(d(),l("div",_l,[e("button",{type:"submit",disabled:U.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},m(U.value?"Enregistrement...":"Enregistrer"),9,hl),e("button",{type:"button",onClick:O,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):T("",!0)],32)]),e("div",wl,[e("div",kl,[a[16]||(a[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:_,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[y(C(be),{class:"w-5 h-5"})])]),e("form",{onSubmit:ae(Y,["prevent"]),class:"space-y-4"},[e("div",null,[a[17]||(a[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),w(e("input",{"onUpdate:modelValue":a[3]||(a[3]=t=>p.name=t),type:"text",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,$l),[[S,p.name]])]),e("div",null,[a[18]||(a[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=t=>p.description=t),disabled:!r.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,Cl),[[S,p.description]])]),e("div",null,[a[19]||(a[19]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),w(e("input",{"onUpdate:modelValue":a[5]||(a[5]=t=>p.website_url=t),type:"url",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,El),[[S,p.website_url]])]),e("div",null,[a[20]||(a[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),w(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>p.contact_email=t),type:"email",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,jl),[[S,p.contact_email]])]),e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),w(e("input",{"onUpdate:modelValue":a[7]||(a[7]=t=>p.contact_phone=t),type:"tel",disabled:!r.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,Al),[[S,p.contact_phone]])]),r.value?(d(),l("div",Sl,[e("button",{type:"submit",disabled:c.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},m(c.value?"Enregistrement...":"Enregistrer"),9,Pl),e("button",{type:"button",onClick:z,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):T("",!0)],32)]),e("div",Dl,[a[25]||(a[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:ae(ee,["prevent"]),class:"space-y-4"},[e("div",null,[a[22]||(a[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),w(e("input",{"onUpdate:modelValue":a[8]||(a[8]=t=>B.current_password=t),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[S,B.current_password]])]),e("div",null,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),w(e("input",{"onUpdate:modelValue":a[9]||(a[9]=t=>B.password=t),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[S,B.password]])]),e("div",null,[a[24]||(a[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),w(e("input",{"onUpdate:modelValue":a[10]||(a[10]=t=>B.password_confirmation=t),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[S,B.password_confirmation]])]),e("button",{type:"submit",disabled:i.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},m(i.value?"Mise à jour...":"Changer le mot de passe"),9,Ul)],32)]),e("div",Vl,[a[30]||(a[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",zl,[e("div",Il,[e("div",Tl,[y(C(ze),{class:"w-5 h-5 text-green-600"}),a[26]||(a[26]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",Fl,m(Q(j.value?.email_verified_at)),1)]),u.value?.verified_at?(d(),l("div",Bl,[e("div",Ml,[y(C(Ie),{class:"w-5 h-5 text-blue-600"}),a[27]||(a[27]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",Rl,m(Q(u.value.verified_at)),1)])):T("",!0),e("div",Ol,[e("div",ql,[e("p",Nl,m(f.value.events||0),1),a[28]||(a[28]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",Ll,[e("p",Xl,m(f.value.tickets||0),1),a[29]||(a[29]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])]))])]))}},Wl=le(Gl,[["__scopeId","data-v-88f51db0"]]),ad=Object.freeze(Object.defineProperty({__proto__:null,default:Wl},Symbol.toStringTag,{value:"Module"}));export{rd as B,ed as E,Yl as O,R as a,td as b,sd as c,od as d,ad as e,Zl as g,Ql as t};
