import{d as x,j as n,o as d,k as e,q as c,n as p,t as m,p as u,l as w,a as E,P as k,G as R,b as h,Z as S,u as I,J as z}from"./vue-vendor-CDZB1Wme.js";import{_ as T}from"./account-SYOFlVBk.js";import{t as y}from"./organizer-C0LQVtev.js";import"./pinia-vendor-n9B0B4v6.js";import"./vendor-BvANJOFB.js";const D={name:"TicketComponent",props:{ticket:{type:Object,required:!0},size:{type:String,default:"large",validator:o=>["small","large"].includes(o)}},setup(o){const t=x(()=>o.ticket?.event?.date?new Date(o.ticket.event.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).toUpperCase():"DIMANCHE 27 JUILLET 2025"),s=x(()=>o.ticket?.event?.date?new Date(o.ticket.event.date).getDate():"27"),a=x(()=>o.ticket?.event?.date?new Date(o.ticket.event.date).toLocaleDateString("fr-FR",{month:"long"}).toUpperCase():"JUILLET"),v=x(()=>o.ticket?.event?.time?`DÈS ${o.ticket.event.time}`:"DÈS 13H");return{formatEventDate:t,eventDay:s,eventMonth:a,eventTime:v,formatPrice:r=>r?new Intl.NumberFormat("fr-FR").format(r):"10.000",generateQRCode:()=>{if(o.ticket?.qrCode)return o.ticket.qrCode;const r=o.ticket?.reference||"PRIMEA-TICKET";return`data:image/svg+xml;base64,${btoa(`
        <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="qr" patternUnits="userSpaceOnUse" width="10" height="10">
              <rect width="5" height="5" fill="#000"/>
              <rect x="5" y="5" width="5" height="5" fill="#000"/>
            </pattern>
          </defs>
          <rect width="100" height="100" fill="url(#qr)"/>
          <text x="50" y="50" text-anchor="middle" fill="#333" font-size="8">${r.slice(-4)}</text>
        </svg>
      `)}`}}}},N={class:"relative"},B=["src","alt"],j={class:"flex justify-between items-start"},M={class:"flex-1"},U={class:"mb-4"},A={class:"mb-4 space-y-1"},L={class:"font-semibold text-gray-800"},P={class:"text-gray-600 text-sm"},F={class:"mb-4"},V={class:"font-semibold text-gray-800"},q={class:"mb-4"},O={class:"mb-3"},Q={class:"bg-white p-2 border-2 border-gray-300 rounded-primea"},K=["src"];function H(o,t,s,a,v,f){return d(),n("div",{class:c(["ticket-component bg-white rounded-primea-xl overflow-hidden font-primea",s.size==="small"?"max-w-sm":"max-w-2xl","shadow-primea-lg"])},[e("div",N,[e("div",{class:c(["relative overflow-hidden bg-primea-gradient",s.size==="small"?"h-40":"h-56"])},[s.ticket?.event?.image?(d(),n("img",{key:0,src:s.ticket.event.image,alt:s.ticket.event?.title,class:"w-full h-full object-cover"},null,8,B)):p("",!0),t[0]||(t[0]=e("div",{class:"absolute inset-0 bg-black/30"},null,-1))],2)]),e("div",{class:c(["p-4 bg-gray-50 border-t-4 border-dashed border-gray-300",s.size==="small"?"text-sm":"text-base"])},[e("div",j,[e("div",M,[e("div",U,[e("h3",{class:c(["font-bold text-primea-blue mb-2",s.size==="small"?"text-lg":"text-3xl"])},m(s.ticket?.event?.title||"L'OISEAU RARE"),3)]),e("div",A,[e("div",L,m(a.formatEventDate),1),e("div",P,"À "+m(s.ticket?.event?.venue_name?.toUpperCase()||"ENTRE NOUS BAR"),1)]),e("div",F,[t[1]||(t[1]=e("span",{class:"text-sm text-gray-600"},"Catégorie : ",-1)),e("span",V,m(s.ticket?.ticketType||"standard"),1)]),e("div",q,[e("div",{class:c(["font-bold text-primea-blue",s.size==="small"?"text-lg":"text-2xl"])},m(a.formatPrice(s.ticket?.price))+" XAF ",3)]),t[2]||(t[2]=e("div",{class:"text-xs text-red-600 leading-tight mb-4"},[e("strong",null,"*ATTENTION:*"),e("br"),u(" CE TICKET EST STRICTEMENT PERSONNEL ET À USAGE"),e("br"),u(" UNIQUE. IL NE PEUT ÊTRE NI VENDU NI DONNÉ À AUTRUI"),e("br"),u(" SOUS PEINE D'ÊTRE REFUSÉ À L'ENTRÉE. ")],-1)),t[3]||(t[3]=e("div",{class:"flex justify-start"},[e("img",{src:"/images/logo.png",alt:"Primea",class:"h-6"})],-1))]),e("div",{class:c(["ml-4 text-center",s.size==="small"?"w-20":"w-32"])},[e("div",O,[e("div",{class:c(["font-bold text-primea-blue",s.size==="small"?"text-sm":"text-lg"])},m(s.ticket?.reference||"0001"),3)]),e("div",Q,[e("img",{src:s.ticket?.qrCode||a.generateQRCode(),alt:"QR Code",class:c(["object-contain mx-auto",s.size==="small"?"w-16 h-16":"w-24 h-24"])},null,10,K)]),t[4]||(t[4]=e("p",{class:"text-xs text-gray-500 mt-2 leading-tight"},[u(" Ce QR Code est unique"),e("br"),u(" et ne peut être scanné"),e("br"),u(" qu'une seule fois ")],-1))],2)])],2)],2)}const J=T(D,[["render",H],["__scopeId","data-v-90a5349e"]]),Z={name:"TicketDownload",components:{TicketComponent:J},setup(){const o=I(),t=z(),s=h(null),a=h(!0),v=h(""),f=async()=>{try{a.value=!0,v.value="";const l=o.params.id;let b;if(/^\d+$/.test(l)){const i=`TKT-2024-${l.padStart(3,"0")}`;b=await y.getTicket(i)}else b=await y.getTicket(l);if(b.data?.ticket){const i=b.data.ticket;s.value={id:i.id,reference:i.code,event:{id:i.event.id,title:i.event.title,date:i.schedule?.starts_at?new Date(i.schedule.starts_at.split("/").reverse().join("-")).toISOString():"2025-07-27T20:00:00",venue_name:i.event.venue_name||"Entre Nous Bar",image:i.event.image_url||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",time:i.schedule?.door_time?new Date(i.schedule.door_time.split("/").reverse().join("-")).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"13H"},ticketType:i.ticket_type?.name||"Standard",price:i.ticket_type?.price||1e4,qrCode:null,status:i.status,buyer_name:i.buyer?.name,buyer_email:i.buyer?.email,issued_at:i.issued_at,used_at:i.used_at}}}catch(l){console.error("Erreur lors du chargement du ticket:",l),v.value=l.response?.data?.message||"Erreur lors du chargement du ticket",s.value={id:o.params.id,reference:"TKT-2024-ABC123",event:{title:"L'OISEAU RARE",date:"2025-07-27T20:00:00",venue_name:"Entre Nous Bar",image:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",time:"13H"},ticketType:"Standard",price:1e4,status:"issued"}}finally{a.value=!1}},g=x(()=>s.value?.event?.date?new Date(s.value.event.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).toUpperCase():"DIMANCHE 27 JUILLET 2025"),r=l=>l?new Intl.NumberFormat("fr-FR").format(l):"10.000",C=async()=>{try{const l=document.createElement("a");l.href="data:application/pdf;base64,JVBERi0xLjMKJf////8KMSAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovT3V0bGluZXMgMiAwIFIKL1BhZ2VzIDMgMCBSCj4+CmVuZG9iago=",l.download=`ticket-${s.value?.reference||"primea"}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}catch(l){console.error("Erreur lors du téléchargement:",l),alert("Erreur lors du téléchargement du ticket")}},_=()=>{t.back()};return S(()=>{f()}),{ticket:s,loading:a,error:v,formatEventDate:g,formatPrice:r,downloadTicket:C,goBack:_,loadTicket:f}}},G={class:"ticket-download-page font-primea min-h-screen"},X={class:"hidden md:block bg-gray-50 min-h-screen"},W={class:"container mx-auto px-4 py-12"},Y={class:"max-w-6xl mx-auto"},$={key:0,class:"text-center py-12"},ee={key:1,class:"bg-red-50 border border-red-200 rounded-primea-xl p-6 text-center"},te={class:"text-red-600 mb-4"},ae={key:2,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},se={class:"lg:col-span-2 flex justify-center"},re={class:"lg:col-span-1 space-y-6"},ie={class:"bg-white rounded-primea-xl shadow-primea p-6"},oe={class:"space-y-3"},le={class:"md:hidden bg-gray-100 min-h-screen py-8 px-4"},ne={class:"max-w-md mx-auto"},de={key:0,class:"text-center py-12"},ce={key:1,class:"bg-red-50 border border-red-200 rounded-primea-xl p-6 text-center"},me={class:"text-red-600 mb-4"},ve={class:"flex items-center justify-between mb-8"},ue={class:"mb-6"},fe={class:"mb-8"};function ge(o,t,s,a,v,f){const g=E("TicketComponent");return d(),n("div",G,[e("div",X,[e("div",W,[e("div",Y,[t[12]||(t[12]=e("div",{class:"text-center mb-12"},[e("img",{src:"/images/logo.png",alt:"Primea",class:"h-16 mx-auto mb-6"}),e("h1",{class:"text-4xl font-bold text-primea-blue mb-4"},"Votre ticket électronique"),e("p",{class:"text-lg text-gray-600"},"Téléchargez ou capturez votre ticket pour l'événement")],-1)),a.loading?(d(),n("div",$,[...t[6]||(t[6]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement du ticket...",-1)])])):a.error?(d(),n("div",ee,[t[7]||(t[7]=e("div",{class:"flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-red-800 mb-2"},"Ticket introuvable",-1)),e("p",te,m(a.error),1),e("button",{onClick:t[0]||(t[0]=(...r)=>a.loadTicket&&a.loadTicket(...r)),class:"bg-primea-blue text-white px-6 py-2 rounded-primea-lg hover:bg-primea-yellow hover:text-primea-blue transition-colors"}," Réessayer ")])):a.ticket?(d(),n("div",ae,[e("div",se,[w(g,{ticket:a.ticket,size:"large"},null,8,["ticket"])]),e("div",re,[t[11]||(t[11]=k('<div class="bg-white rounded-primea-xl shadow-primea p-6" data-v-f56a9740><h3 class="text-xl font-bold text-primea-blue mb-4" data-v-f56a9740>Comment utiliser votre ticket</h3><div class="space-y-4 text-gray-600" data-v-f56a9740><div class="flex items-start gap-3" data-v-f56a9740><div class="rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mt-0.5 flex-shrink-0" style="background-color:#272d63;color:white;" data-v-f56a9740>1</div><div data-v-f56a9740><p class="font-semibold text-gray-800" data-v-f56a9740>Téléchargez votre ticket</p><p class="text-sm" data-v-f56a9740>Cliquez sur le bouton de téléchargement pour sauvegarder votre ticket en PDF</p></div></div><div class="flex items-start gap-3" data-v-f56a9740><div class="rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mt-0.5 flex-shrink-0" style="background-color:#272d63;color:white;" data-v-f56a9740>2</div><div data-v-f56a9740><p class="font-semibold text-gray-800" data-v-f56a9740>Présentez le QR code</p><p class="text-sm" data-v-f56a9740>À l&#39;entrée, montrez le QR code pour validation</p></div></div><div class="flex items-start gap-3" data-v-f56a9740><div class="rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mt-0.5 flex-shrink-0" style="background-color:#fab511;color:#272d63;" data-v-f56a9740>!</div><div data-v-f56a9740><p class="font-semibold text-red-600" data-v-f56a9740>Important</p><p class="text-sm" data-v-f56a9740>Ce ticket est personnel et à usage unique. Il ne peut être ni vendu ni donné</p></div></div></div></div>',1)),e("div",ie,[t[10]||(t[10]=e("h3",{class:"text-xl font-bold text-primea-blue mb-4"},"Actions",-1)),e("div",oe,[e("button",{onClick:t[1]||(t[1]=(...r)=>a.downloadTicket&&a.downloadTicket(...r)),class:"w-full py-3 px-6 rounded-primea-lg font-semibold transition-all duration-200 shadow-primea flex items-center justify-center gap-2",style:{"background-color":"#fab511",color:"#272d63"}},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),u(" Télécharger le ticket PDF ",-1)])]),e("button",{onClick:t[2]||(t[2]=(...r)=>a.goBack&&a.goBack(...r)),class:"w-full border-2 border-primea-blue text-primea-blue py-3 px-6 rounded-primea-lg font-semibold hover:bg-primea-blue hover:text-white transition-all duration-200"}," Retour aux événements ")])])])])):p("",!0)])])]),e("div",le,[e("div",ne,[a.loading?(d(),n("div",de,[...t[13]||(t[13]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement du ticket...",-1)])])):a.error?(d(),n("div",ce,[t[14]||(t[14]=e("div",{class:"flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-red-800 mb-2"},"Ticket introuvable",-1)),e("p",me,m(a.error),1),e("button",{onClick:t[3]||(t[3]=(...r)=>a.loadTicket&&a.loadTicket(...r)),class:"bg-primea-blue text-white px-6 py-2 rounded-primea-lg hover:bg-primea-yellow hover:text-primea-blue transition-colors"}," Réessayer ")])):a.ticket?(d(),n(R,{key:2},[e("div",ve,[e("button",{onClick:t[4]||(t[4]=(...r)=>a.goBack&&a.goBack(...r)),class:"text-gray-600 hover:text-gray-800"},[...t[16]||(t[16]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t[17]||(t[17]=k('<div class="text-center" data-v-f56a9740><img src="/images/logo.png" alt="Primea" class="h-8 mx-auto mb-2" data-v-f56a9740><div class="text-center" data-v-f56a9740><div class="text-lg font-bold text-primea-blue" data-v-f56a9740>La Billetterie</div><div class="text-xs text-gray-500" data-v-f56a9740>Simple, Rapide et Sécurisée</div></div></div><button class="text-gray-600" data-v-f56a9740><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-f56a9740><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" data-v-f56a9740></path></svg></button>',2))]),t[18]||(t[18]=k('<div class="text-center mb-8" data-v-f56a9740><h1 class="text-lg font-medium text-gray-700 mb-2" data-v-f56a9740> Téléchargez ou capturez l&#39;écran </h1><p class="text-gray-600" data-v-f56a9740> pour conserver votre ticket </p></div><div class="text-center mb-6" data-v-f56a9740><h2 class="text-lg font-bold text-primea-blue" data-v-f56a9740>VOTRE TICKET</h2></div>',2)),e("div",ue,[w(g,{ticket:a.ticket,size:"small"},null,8,["ticket"])]),e("div",fe,[e("button",{onClick:t[5]||(t[5]=(...r)=>a.downloadTicket&&a.downloadTicket(...r)),class:"w-full py-3 px-6 rounded-primea-lg font-semibold transition-colors duration-200",style:{"background-color":"#fab511",color:"#272d63"}}," Télécharger ")]),t[19]||(t[19]=k('<div class="bg-gray-200 rounded-primea-lg p-8 text-center mb-6" data-v-f56a9740><div class="text-xl text-gray-400 font-light mb-4" data-v-f56a9740>ESPACE PUB</div><a href="#" class="text-primea-blue text-sm hover:text-primea-yellow" data-v-f56a9740>En savoir plus...</a></div><div class="text-center" data-v-f56a9740><img src="/images/logo.png" alt="Primea" class="h-8 mx-auto mb-4" data-v-f56a9740><div class="flex justify-center space-x-4" data-v-f56a9740><a href="#" class="text-green-500 hover:text-green-600" data-v-f56a9740><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-f56a9740><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488" data-v-f56a9740></path></svg></a><a href="#" class="text-blue-600 hover:text-blue-700" data-v-f56a9740><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-f56a9740><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" data-v-f56a9740></path></svg></a><a href="#" class="text-pink-500 hover:text-pink-600" data-v-f56a9740><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" data-v-f56a9740><path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.347-.09.375-.293 1.199-.332 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.746-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z" data-v-f56a9740></path></svg></a></div></div>',2))],64)):p("",!0)])])])}const we=T(Z,[["render",ge],["__scopeId","data-v-f56a9740"]]);export{we as default};
