import{g as n,o as i,h as e,t as l,F as D,q as T,n as I,U as ae,$ as ie,b as f,a0 as G,d as de,e as re,w as ge,l as x,p as le,i as g,v as M,A as se,L as R,j as pe,a as fe,a1 as oe,a2 as me}from"./vue-vendor-CGc-1SHl.js";import{_ as te}from"./account-Bq59lNxC.js";import{i as ye,a as J,S as E}from"./vendor-BvANJOFB.js";const be={name:"AdminDashboard",setup(){const d=f(!1),t=G({total_revenue:0,tickets_sold:0,active_events:0,active_users:0,total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,failed_payments:0,successful_payments:0,pending_payments:0,payments_in_transit:0,platform_commission:0}),c=f([]),o=f([]),a=f([]),u=f([]),s=de(()=>a.value.length===0?1:Math.max(...a.value.map(S=>S.amount))),r=async()=>{d.value=!0;try{const P=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();P.success&&(Object.assign(t,P.data.stats),c.value=P.data.recent_orders,o.value=P.data.recent_activity,a.value=P.data.revenue_data,u.value=P.data.top_events)}catch(S){console.error("Erreur chargement dashboard admin:",S)}finally{d.value=!1}},y=async()=>{try{const P=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(P.success){const b=P.data.balances.reduce((w,L)=>w+L.amount,0);alert(`Solde SHAP total: ${k(b)} XAF`)}}catch(S){console.error("Erreur vérification solde SHAP:",S)}},j=S=>{this.$router.push(`/admin/orders/${S.id}`)},k=S=>new Intl.NumberFormat("fr-FR").format(S),O=S=>new Date(S).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),U=S=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[S]||S,A=S=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[S]||"bg-gray-100 text-gray-800",q=S=>({order:"bg-blue-100 text-blue-600",payment:"bg-green-100 text-green-600",payout:"bg-yellow-100 text-yellow-600",user:"bg-purple-100 text-purple-600"})[S]||"bg-gray-100 text-gray-600",W=()=>{Object.assign(t,{total_revenue:85e5,tickets_sold:342,active_events:23,active_users:156,total_users:1247,total_organizers:89,total_events:156,orders_today:23,revenue_today:285e4,successful_payments:142,pending_payments:8,failed_payments:3,payments_in_transit:475e4,platform_commission:285e3}),c.value=[{id:1,reference:"PMT-2025-001",customer_name:"Jean Dupont",customer_email:"jean@email.com",total_amount:15e3,status:"paid",created_at:new Date},{id:2,reference:"PMT-2025-002",customer_name:"Marie Martin",customer_email:"marie@email.com",total_amount:25e3,status:"pending",created_at:new Date(Date.now()-3e5)}]};return re(()=>{r(),setTimeout(()=>{t.total_users===0&&W()},2e3)}),{loading:d,stats:t,recentOrders:c,recentActivity:o,revenueData:a,topEvents:u,maxRevenue:s,loadDashboardData:r,checkShapBalance:y,viewOrder:j,formatAmount:k,formatDate:O,getOrderStatusName:U,getOrderStatusClass:A,getActivityIconClass:q}}},he={class:"admin-dashboard p-6"},we={key:0,class:"flex justify-center items-center h-64"},_e={key:1},ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ce={class:"flex items-center"},Me={class:"text-left"},Se={class:"text-white opacity-80 text-sm"},Ae={class:"flex items-center"},je={class:"text-left"},Pe={class:"text-white opacity-80 text-sm"},De={class:"flex items-center"},Te={class:"text-left"},Ue={class:"text-gray-200 text-sm"},Fe={class:"flex items-center"},Oe={class:"text-left"},ze={class:"text-gray-200 text-sm"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Re={class:"bg-white rounded-lg shadow p-6"},Ve={class:"flex items-center"},Be={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Ie={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$e={class:"ml-4"},Le={class:"text-2xl font-bold",style:{color:"#272d63"}},qe={class:"bg-white rounded-lg shadow p-6"},Ne={class:"flex items-center"},Xe={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},He={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={class:"ml-4"},We={class:"text-2xl font-bold",style:{color:"#fab511"}},Ke={class:"bg-white rounded-lg shadow p-6"},Je={class:"flex items-center"},Ye={class:"ml-4"},Qe={class:"text-2xl font-bold text-green-600"},Ze={class:"bg-white rounded-lg shadow p-6"},et={class:"flex items-center"},tt={class:"ml-4"},st={class:"text-2xl font-bold text-red-600"},ot={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},lt={class:"lg:col-span-2"},rt={class:"bg-white rounded-lg shadow p-6"},at={class:"flex justify-between items-center mb-4"},nt={key:0,class:"text-center text-gray-500 py-8"},it={key:1,class:"overflow-x-auto"},dt={class:"w-full"},ut={class:"divide-y divide-gray-200"},ct={class:"px-4 py-4 text-sm font-medium text-blue-600"},mt=["onClick"],gt={class:"px-4 py-4 text-sm text-gray-900"},pt={class:"px-4 py-4 text-sm font-medium text-gray-900"},ft={class:"px-4 py-4 text-sm"},xt={class:"px-4 py-4 text-sm text-gray-500"},vt={class:"lg:col-span-1 space-y-6"},yt={class:"bg-white rounded-lg shadow p-6"},bt={class:"space-y-3"},ht={class:"flex justify-between items-center"},wt={class:"bg-white rounded-lg shadow p-6"},_t={class:"space-y-3"},kt={class:"flex-1"},Ct={class:"text-sm text-gray-900"},Mt={class:"text-xs text-gray-500"},St={class:"bg-white rounded-lg shadow p-6"},At={class:"space-y-3"},jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Pt={class:"bg-white rounded-lg shadow p-6"},Dt={key:0,class:"text-center text-gray-500 py-8"},Tt={key:1,class:"space-y-3"},Ut={class:"text-sm text-gray-600"},Ft={class:"flex items-center"},Ot={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},zt={class:"text-sm font-medium"},Et={class:"bg-white rounded-lg shadow p-6"},Rt={key:0,class:"text-center text-gray-500 py-8"},Vt={key:1,class:"space-y-4"},Bt={class:"flex items-center"},It={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},$t={class:"font-medium text-gray-900"},Lt={class:"text-sm text-gray-600"},qt={class:"text-right"},Nt={class:"font-medium text-gray-900"},Xt={class:"text-sm text-gray-600"};function Ht(d,t,c,o,a,u){return i(),n("div",he,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Tableau de Bord Primea"),e("p",{class:"text-white opacity-80"},"Supervision des paiements et transactions de la plateforme")])],-1)),o.loading?(i(),n("div",we,[...t[15]||(t[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(i(),n("div",_e,[e("div",ke,[e("button",{onClick:t[0]||(t[0]=s=>d.$router.push("/admin/payments")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=s=>{s.currentTarget.style.backgroundColor="#fab511",s.currentTarget.style.color="#272d63"}),onMouseleave:t[2]||(t[2]=s=>{s.currentTarget.style.backgroundColor="#272d63",s.currentTarget.style.color="#ffffff"})},[e("div",Ce,[t[17]||(t[17]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),e("div",Me,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold"},"Revenus Total",-1)),e("p",Se,l(o.formatAmount(o.stats.total_revenue||0))+" XAF",1)])])],32),e("button",{onClick:t[3]||(t[3]=s=>d.$router.push("/admin/orders")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#fab511"},onMouseover:t[4]||(t[4]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[5]||(t[5]=s=>s.currentTarget.style.backgroundColor="#fab511")},[e("div",Ae,[t[19]||(t[19]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})],-1)),e("div",je,[t[18]||(t[18]=e("h3",{class:"text-lg font-bold"},"Tickets Vendus",-1)),e("p",Pe,l(o.stats.tickets_sold||0),1)])])],32),e("button",{onClick:t[6]||(t[6]=s=>d.$router.push("/admin/events")),class:"bg-gray-600 text-white p-6 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-105"},[e("div",De,[t[21]||(t[21]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("div",Te,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold"},"Événements Actifs",-1)),e("p",Ue,l(o.stats.active_events||0),1)])])]),e("button",{onClick:t[7]||(t[7]=s=>d.$router.push("/admin/users")),class:"bg-gray-700 text-white p-6 rounded-lg hover:bg-gray-800 transition-all transform hover:scale-105"},[e("div",Fe,[t[23]||(t[23]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),e("div",Oe,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold"},"Utilisateurs Actifs",-1)),e("p",ze,l(o.stats.active_users||0),1)])])])]),e("div",Ee,[e("div",Re,[e("div",Ve,[e("div",Be,[(i(),n("svg",Ie,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",$e,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Paiements Réussis",-1)),e("p",Le,l(o.stats.successful_payments||0),1)])])]),e("div",qe,[e("div",Ne,[e("div",Xe,[(i(),n("svg",He,[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),e("div",Ge,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Paiements En Attente",-1)),e("p",We,l(o.stats.pending_payments||0),1)])])]),e("div",Ke,[e("div",Je,[t[29]||(t[29]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ye,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Commission Plateforme",-1)),e("p",Qe,l(o.formatAmount(o.stats.platform_commission||0))+" XAF",1)])])]),e("div",Ze,[e("div",et,[t[31]||(t[31]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",tt,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",st,l(o.stats.failed_payments||0),1)])])])]),e("div",ot,[e("div",lt,[e("div",rt,[e("div",at,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold",style:{color:"#272d63"}},"Paiements Récents",-1)),e("button",{onClick:t[8]||(t[8]=s=>d.$router.push("/admin/payments")),class:"text-sm transition-colors duration-200",style:{color:"#272d63"},onMouseover:t[9]||(t[9]=s=>s.currentTarget.style.color="#fab511"),onMouseleave:t[10]||(t[10]=s=>s.currentTarget.style.color="#272d63")},"Voir tous",32)]),o.recentOrders.length===0?(i(),n("div",nt," Aucune commande récente ")):(i(),n("div",it,[e("table",dt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",ut,[(i(!0),n(D,null,T(o.recentOrders,s=>(i(),n("tr",{key:s.id},[e("td",ct,[e("button",{onClick:r=>o.viewOrder(s),class:"hover:text-blue-800"}," #"+l(s.reference),9,mt)]),e("td",gt,l(s.customer_name||s.customer_email),1),e("td",pt,l(o.formatAmount(s.total_amount))+" XAF",1),e("td",ft,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getOrderStatusClass(s.status)])},l(o.getOrderStatusName(s.status)),3)]),e("td",xt,l(o.formatDate(s.created_at)),1)]))),128))])])]))])]),e("div",vt,[e("div",yt,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",bt,[t[35]||(t[35]=ae('<div class="flex justify-between items-center" data-v-cff6e497><span class="text-sm text-gray-600" data-v-cff6e497>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-cff6e497> Opérationnel </span></div><div class="flex justify-between items-center" data-v-cff6e497><span class="text-sm text-gray-600" data-v-cff6e497>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-cff6e497> Opérationnel </span></div>',2)),e("div",ht,[t[34]||(t[34]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[11]||(t[11]=(...s)=>o.checkShapBalance&&o.checkShapBalance(...s)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",wt,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",_t,[(i(!0),n(D,null,T(o.recentActivity,s=>(i(),n("div",{key:s.id,class:"flex items-start"},[e("div",{class:I(["p-1 rounded-full mr-3",o.getActivityIconClass(s.type)])},[...t[37]||(t[37]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",kt,[e("p",Ct,l(s.description),1),e("p",Mt,l(o.formatDate(s.created_at)),1)])]))),128))])]),e("div",St,[t[42]||(t[42]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",At,[e("button",{onClick:t[12]||(t[12]=s=>d.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[39]||(t[39]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[13]||(t[13]=s=>d.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[40]||(t[40]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[14]||(t[14]=s=>d.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[41]||(t[41]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",jt,[e("div",Pt,[t[43]||(t[43]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),o.revenueData.length===0?(i(),n("div",Dt," Aucune donnée disponible ")):(i(),n("div",Tt,[(i(!0),n(D,null,T(o.revenueData,s=>(i(),n("div",{key:s.date,class:"flex justify-between items-center"},[e("span",Ut,l(o.formatDate(s.date)),1),e("div",Ft,[e("div",Ot,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ie(`width: ${s.amount/o.maxRevenue*100}%`)},null,4)]),e("span",zt,l(o.formatAmount(s.amount))+" XAF",1)])]))),128))]))]),e("div",Et,[t[44]||(t[44]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),o.topEvents.length===0?(i(),n("div",Rt," Aucun événement populaire ")):(i(),n("div",Vt,[(i(!0),n(D,null,T(o.topEvents,(s,r)=>(i(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Bt,[e("div",It,l(r+1),1),e("div",null,[e("h3",$t,l(s.title),1),e("p",Lt,l(s.organizer_name),1)])]),e("div",qt,[e("p",Nt,l(s.tickets_sold)+" tickets",1),e("p",Xt,l(o.formatAmount(s.revenue))+" XAF",1)])]))),128))]))])])]))])}const Gt=te(be,[["render",Ht],["__scopeId","data-v-cff6e497"]]),h3=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"})),Wt={name:"ImageUpload",props:{modelValue:{type:Object,default:()=>({})},entityType:{type:String,required:!0,validator:d=>["events","venues","users","organizers"].includes(d)},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},altText:{type:String,default:"Image"}},emits:["update:modelValue","change"],setup(d,{emit:t}){const c=f("upload"),o=f(null),a=f(""),u=f(""),s=f(!1),r=f(!1),y=f(!1),j=f(!1),k=f(!1),O=f(!1),U=f(""),A=de(()=>d.modelValue?.url?d.modelValue.url:d.modelValue?.filename?`/storage/images/${d.entityType}/${d.size}_${d.modelValue.filename}`:null),q=de(()=>{const p="object-cover rounded-lg shadow-sm",v={thumbnail:"w-20 h-20",medium:"w-32 h-32",large:"w-48 h-48"};return`${p} ${v[d.size]||v.medium}`}),W=p=>{p.preventDefault(),y.value=!1;const v=p.dataTransfer.files;v.length>0&&P(v[0])},S=p=>{const v=p.target.files;v.length>0&&P(v[0])},P=p=>{if(U.value="",!p.type.startsWith("image/")){U.value="Veuillez sélectionner un fichier image valide.";return}if(p.size>5*1024*1024){U.value="L'image ne doit pas dépasser 5MB.";return}o.value=p;const v=new FileReader;v.onload=_=>{a.value=_.target.result},v.readAsDataURL(p)},h=async()=>{if(o.value){j.value=!0,O.value=!0,U.value="";try{const p=new FormData;p.append("image",o.value),p.append("type",d.entityType);const _=await(await fetch("/api/v1/images/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:p})).json();if(_.success){const $={filename:_.data.filename,urls:_.data.urls};t("update:modelValue",$),t("change",$),o.value=null,a.value=""}else U.value=_.message||"Erreur lors de l'upload"}catch{U.value="Erreur de connexion lors de l'upload"}finally{j.value=!1,O.value=!1}}},b=async()=>{if(u.value){k.value=!0,O.value=!0,U.value="",r.value=!1;try{const v=await(await fetch("/api/v1/images/validate-url",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({url:u.value,type:d.entityType})})).json();v.success?s.value=!0:(r.value=!0,U.value=v.message)}catch{r.value=!0,U.value="Erreur lors de la validation de l'URL"}finally{k.value=!1,O.value=!1}}},w=()=>{const p={url:u.value};t("update:modelValue",p),t("change",p),u.value="",s.value=!1},L=()=>{t("update:modelValue",{}),t("change",{})},m=p=>{if(p===0)return"0 Bytes";const v=1024,_=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(p)/Math.log(v));return parseFloat((p/Math.pow(v,$)).toFixed(2))+" "+_[$]};return ge([c],()=>{U.value="",r.value=!1}),{activeTab:c,selectedFile:o,previewUrl:a,imageUrl:u,urlPreview:s,urlError:r,isDragOver:y,uploading:j,validating:k,loading:O,error:U,currentImageUrl:A,imageClasses:q,handleDrop:W,handleFileSelect:S,uploadFile:h,validateImageUrl:b,confirmUrl:w,removeImage:L,formatFileSize:m}}},Kt={class:"image-upload-component"},Jt={key:0,class:"current-image mb-4"},Yt=["src","alt"],Qt={key:1,class:"upload-options"},Zt={class:"option-tabs mb-4"},es={key:0,class:"upload-tab"},ts={key:0,class:"file-preview mt-4"},ss=["src"],os={class:"file-info"},ls={class:"file-name"},rs={class:"file-size"},as=["disabled"],ns={key:0},is={key:1},ds={key:1,class:"url-tab"},us={class:"url-input-group"},cs=["disabled"],ms={key:0},gs={key:1},ps={key:0,class:"url-preview mt-4"},fs=["src"],xs={key:1,class:"error-message mt-2"},vs={key:2,class:"error-message mt-2"},ys={key:3,class:"loading-overlay"};function bs(d,t,c,o,a,u){return i(),n("div",Kt,[o.currentImageUrl?(i(),n("div",Jt,[e("img",{src:o.currentImageUrl,alt:c.altText,class:I(o.imageClasses)},null,10,Yt),c.disabled?x("",!0):(i(),n("button",{key:0,type:"button",onClick:t[0]||(t[0]=(...s)=>o.removeImage&&o.removeImage(...s)),class:"remove-btn"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]))])):x("",!0),c.disabled?x("",!0):(i(),n("div",Qt,[e("div",Zt,[e("button",{type:"button",onClick:t[1]||(t[1]=s=>o.activeTab="upload"),class:I(["tab-btn",o.activeTab==="upload"?"active":""])}," Uploader une image ",2),e("button",{type:"button",onClick:t[2]||(t[2]=s=>o.activeTab="url"),class:I(["tab-btn",o.activeTab==="url"?"active":""])}," Utiliser une URL ",2)]),o.activeTab==="upload"?(i(),n("div",es,[e("div",{class:I(["upload-area",{dragover:o.isDragOver}]),onDrop:t[5]||(t[5]=(...s)=>o.handleDrop&&o.handleDrop(...s)),onDragover:[t[6]||(t[6]=le(()=>{},["prevent"])),t[9]||(t[9]=s=>o.isDragOver=!0)],onDragenter:t[7]||(t[7]=le(()=>{},["prevent"])),onDragleave:t[8]||(t[8]=s=>o.isDragOver=!1)},[e("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:t[3]||(t[3]=(...s)=>o.handleFileSelect&&o.handleFileSelect(...s)),style:{display:"none"}},null,544),e("div",{class:"upload-content",onClick:t[4]||(t[4]=s=>d.$refs.fileInput.click())},[...t[17]||(t[17]=[e("svg",{class:"upload-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),e("p",{class:"upload-text"},"Cliquez pour sélectionner ou glissez-déposez une image",-1),e("p",{class:"upload-subtext"},"PNG, JPG, GIF jusqu'à 5MB",-1)])])],34),o.selectedFile?(i(),n("div",ts,[e("img",{src:o.previewUrl,alt:"Prévisualisation",class:"preview-image"},null,8,ss),e("div",os,[e("p",ls,l(o.selectedFile.name),1),e("p",rs,l(o.formatFileSize(o.selectedFile.size)),1)]),e("button",{type:"button",onClick:t[10]||(t[10]=(...s)=>o.uploadFile&&o.uploadFile(...s)),disabled:o.uploading,class:"upload-btn"},[o.uploading?(i(),n("span",ns,"Upload en cours...")):(i(),n("span",is,"Confirmer l'upload"))],8,as)])):x("",!0)])):x("",!0),o.activeTab==="url"?(i(),n("div",ds,[e("div",us,[g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.imageUrl=s),type:"url",placeholder:"https://exemple.com/image.jpg",class:"url-input",onBlur:t[12]||(t[12]=(...s)=>o.validateImageUrl&&o.validateImageUrl(...s))},null,544),[[M,o.imageUrl]]),e("button",{type:"button",onClick:t[13]||(t[13]=(...s)=>o.validateImageUrl&&o.validateImageUrl(...s)),disabled:o.validating,class:"validate-btn"},[o.validating?(i(),n("span",ms,"Validation...")):(i(),n("span",gs,"Valider"))],8,cs)]),o.urlPreview?(i(),n("div",ps,[e("img",{src:o.imageUrl,alt:"Prévisualisation URL",class:"preview-image",onError:t[14]||(t[14]=s=>o.urlError=!0)},null,40,fs),e("button",{type:"button",onClick:t[15]||(t[15]=(...s)=>o.confirmUrl&&o.confirmUrl(...s)),class:"confirm-btn"},"Utiliser cette image")])):x("",!0),o.urlError?(i(),n("div",xs," L'URL ne pointe pas vers une image valide ou accessible. ")):x("",!0)])):x("",!0)])),o.error?(i(),n("div",vs,l(o.error),1)):x("",!0),o.loading?(i(),n("div",ys,[...t[18]||(t[18]=[e("div",{class:"loading-spinner"},null,-1)])])):x("",!0)])}const xe=te(Wt,[["render",bs],["__scopeId","data-v-15a93d0e"]]),hs={name:"UserManagement",components:{ImageUpload:xe},setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(!1),a=f(null),u=f(null),s=f([]),r=G({search:"",role:"",status:""}),y=G({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}});let j=null;const k=async()=>{d.value=!0;try{const m=new URLSearchParams;r.search&&m.append("search",r.search),r.role&&m.append("role",r.role),r.status&&m.append("status",r.status);const v=await(await fetch(`/api/v1/admin/users?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();v.success&&(s.value=v.data.users.data||v.data.users)}catch(m){console.error("Erreur chargement utilisateurs:",m)}finally{d.value=!1}},O=()=>{clearTimeout(j),j=setTimeout(()=>{k()},500)},U=()=>{a.value=null,Object.assign(y,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}}),c.value=!0},A=m=>{a.value=m;let p={};m.avatar_url?p.url=m.avatar_url:m.avatar_file&&(p.filename=m.avatar_file),Object.assign(y,{name:m.name,email:m.email,password:"",is_admin:m.roles?.some(v=>v.slug==="admin")||!1,is_organizer:m.roles?.some(v=>v.slug==="organizer")||!1,is_active:m.status==="active",avatar:p}),c.value=!0},q=async()=>{t.value=!0;try{const m=a.value?`/api/v1/admin/users/${a.value.id}`:"/api/v1/admin/users",p=a.value?"PUT":"POST",v={...y};delete v.password,y.avatar.url?(v.avatar_url=y.avatar.url,v.avatar_file=null):y.avatar.filename&&(v.avatar_file=y.avatar.filename,v.avatar_url=null),delete v.avatar;const $=await(await fetch(m,{method:p,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(v)})).json();$.success?(Toast.fire({icon:"success",title:$.message||(a.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès")}),c.value=!1,k()):Swal.fire({icon:"error",title:"Erreur",text:$.message||"Erreur lors de la sauvegarde"})}catch(m){console.error("Erreur sauvegarde utilisateur:",m),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},W=async m=>{if((await confirmAction("Changer le statut de l'utilisateur",`Êtes-vous sûr de vouloir ${m.status==="active"?"désactiver":"activer"} cet utilisateur ?`,m.status==="active"?"Désactiver":"Activer")).isConfirmed)try{const _=await(await fetch(`/api/v1/admin/users/${m.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();_.success?(Toast.fire({icon:"success",title:_.message||"Statut mis à jour avec succès"}),k()):Swal.fire({icon:"error",title:"Erreur",text:_.message||"Erreur lors du changement de statut"})}catch(v){console.error("Erreur toggle statut:",v),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors du changement de statut"})}},S=m=>{u.value=m,o.value=!0},P=async m=>{if((await confirmAction("Réinitialiser le mot de passe",`Envoyer un email de réinitialisation à ${m.name} (${m.email}) ?`,"Envoyer l'email")).isConfirmed)try{const _=await(await fetch(`/api/v1/admin/users/${m.id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();_.success?Toast.fire({icon:"success",title:_.message||"Email de réinitialisation envoyé avec succès"}):Swal.fire({icon:"error",title:"Erreur",text:_.message||"Erreur lors de l'envoi de l'email"})}catch(v){console.error("Erreur reset mot de passe:",v),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de l'envoi de l'email"})}},h=()=>{Object.assign(r,{search:"",role:"",status:""}),k()},b=m=>{y.avatar=m},w=m=>new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=m=>({admin:"Administrateur",organizer:"Organisateur",client:"Client"})[m]||m;return re(()=>{k()}),{loading:d,saving:t,showModal:c,showDetailsModal:o,editingUser:a,selectedUser:u,users:s,filters:r,userForm:y,loadUsers:k,debouncedSearch:O,openCreateModal:U,editUser:A,saveUser:q,toggleUserStatus:W,viewUserDetails:S,resetUserPassword:P,resetFilters:h,handleImageChange:b,formatDate:w,getRoleName:L}}},ws={class:"user-management p-6 bg-gray-50 min-h-screen"},_s={class:"mb-8"},ks={class:"flex items-center justify-between"},Cs={class:"bg-white rounded-lg shadow p-6 mb-8"},Ms={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ss={class:"flex items-end"},As={class:"bg-white rounded-lg shadow"},js={key:0,class:"p-8 text-center"},Ps={key:1,class:"p-8 text-center text-gray-500"},Ds={key:2,class:"overflow-x-auto"},Ts={class:"w-full"},Us={class:"divide-y divide-gray-200"},Fs={class:"px-6 py-4"},Os={class:"flex items-center"},zs={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},Es={class:"ml-4"},Rs={class:"text-sm font-medium text-gray-900"},Vs={class:"text-sm text-gray-500"},Bs={class:"px-6 py-4 text-sm text-gray-900"},Is={class:"px-6 py-4 text-sm"},$s={class:"space-y-1"},Ls={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},qs={class:"px-6 py-4 text-sm"},Ns=["onClick"],Xs={class:"px-6 py-4 text-sm text-gray-500"},Hs={class:"px-6 py-4 text-sm space-x-2"},Gs=["onClick"],Ws=["onClick"],Ks=["onClick"],Js={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ys={class:"bg-white rounded-lg p-6 w-full max-w-md"},Qs={class:"text-lg font-bold mb-4"},Zs={class:"space-y-4"},eo={key:0,class:"bg-blue-50 p-4 rounded-lg"},to={class:"space-y-2"},so={class:"flex items-center"},oo={class:"flex items-center"},lo={key:1},ro={class:"flex items-center"},ao={class:"flex justify-end space-x-3 mt-6"},no=["disabled"],io={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},uo={class:"bg-white rounded-lg p-6 w-full max-w-lg"},co={class:"flex justify-between items-center mb-4"},mo={key:0,class:"space-y-4"},go={class:"grid grid-cols-2 gap-4"},po={class:"text-sm text-gray-900"},fo={class:"text-sm text-gray-900"},xo={class:"text-sm"},vo={class:"space-y-1"},yo={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},bo={class:"text-sm text-gray-900"},ho={class:"text-sm text-gray-900"},wo={key:0},_o={class:"text-sm text-gray-900"};function ko(d,t,c,o,a,u){const s=fe("ImageUpload");return i(),n("div",ws,[e("div",_s,[e("div",ks,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...r)=>o.openCreateModal&&o.openCreateModal(...r)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer Utilisateur ",-1)])])])]),e("div",Cs,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Ms,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.filters.search=r),onInput:t[2]||(t[2]=(...r)=>o.debouncedSearch&&o.debouncedSearch(...r)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.filters.role=r),onChange:t[4]||(t[4]=(...r)=>o.loadUsers&&o.loadUsers(...r)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[R,o.filters.role]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>o.filters.status=r),onChange:t[6]||(t[6]=(...r)=>o.loadUsers&&o.loadUsers(...r)),class:"w-full border rounded-lg px-3 py-2"},[...t[22]||(t[22]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[R,o.filters.status]])]),e("div",Ss,[e("button",{onClick:t[7]||(t[7]=(...r)=>o.resetFilters&&o.resetFilters(...r)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",As,[t[27]||(t[27]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),o.loading?(i(),n("div",js,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.users.length===0?(i(),n("div",Ps," Aucun utilisateur trouvé ")):(i(),n("div",Ds,[e("table",Ts,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Us,[(i(!0),n(D,null,T(o.users,r=>(i(),n("tr",{key:r.id},[e("td",Fs,[e("div",Os,[e("div",zs,l(r.name.charAt(0).toUpperCase()),1),e("div",Es,[e("div",Rs,l(r.name),1),e("div",Vs,"ID: "+l(r.id),1)])])]),e("td",Bs,l(r.email),1),e("td",Is,[e("div",$s,[r.roles&&r.roles.length>0?(i(!0),n(D,{key:0},T(r.roles,y=>(i(),n("span",{key:y.id,class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":y.slug==="admin","bg-green-100 text-green-800":y.slug==="organizer","bg-gray-100 text-gray-800":y.slug==="client"}])},l(o.getRoleName(y.slug)),3))),128)):(i(),n("span",Ls," Aucun rôle "))])]),e("td",qs,[e("button",{onClick:y=>o.toggleUserStatus(r),class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(r.status==="active"?"Actif":"Inactif"),11,Ns)]),e("td",Xs,l(o.formatDate(r.created_at)),1),e("td",Hs,[e("button",{onClick:y=>o.editUser(r),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Gs),e("button",{onClick:y=>o.viewUserDetails(r),class:"text-green-600 hover:text-green-900"}," Détails ",8,Ws),e("button",{onClick:y=>o.resetUserPassword(r),class:"text-orange-600 hover:text-orange-900"}," Reset mot de passe ",8,Ks)])]))),128))])])]))]),o.showModal?(i(),n("div",Js,[e("div",Ys,[e("h3",Qs,l(o.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[15]||(t[15]=le((...r)=>o.saveUser&&o.saveUser(...r),["prevent"]))},[e("div",Zs,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>o.userForm.name=r),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.userForm.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>o.userForm.email=r),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.userForm.email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photo de profil",-1)),pe(s,{modelValue:o.userForm.avatar,"onUpdate:modelValue":t[10]||(t[10]=r=>o.userForm.avatar=r),"entity-type":"users",size:"medium","alt-text":"Photo de profil",onChange:o.handleImageChange},null,8,["modelValue","onChange"])]),o.editingUser?x("",!0):(i(),n("div",eo,[...t[31]||(t[31]=[e("p",{class:"text-sm text-blue-800"},[e("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),se(" Un email sera envoyé à l'utilisateur pour qu'il définisse son mot de passe ")],-1)])])),e("div",to,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",so,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=r=>o.userForm.is_admin=r),class:"rounded border-gray-300"},null,512),[[oe,o.userForm.is_admin]]),t[32]||(t[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",oo,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=r=>o.userForm.is_organizer=r),class:"rounded border-gray-300"},null,512),[[oe,o.userForm.is_organizer]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),o.editingUser?(i(),n("div",lo,[e("label",ro,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=r=>o.userForm.is_active=r),class:"rounded border-gray-300"},null,512),[[oe,o.userForm.is_active]]),t[35]||(t[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):x("",!0)]),e("div",ao,[e("button",{type:"button",onClick:t[14]||(t[14]=r=>o.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:o.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(o.saving?"Enregistrement...":o.editingUser?"Mettre à jour":"Créer"),9,no)])],32)])])):x("",!0),o.showDetailsModal?(i(),n("div",io,[e("div",uo,[e("div",co,[t[37]||(t[37]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{type:"button",onClick:t[16]||(t[16]=r=>o.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[36]||(t[36]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o.selectedUser?(i(),n("div",mo,[e("div",go,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",po,l(o.selectedUser.name),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",fo,l(o.selectedUser.email),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",xo,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},l(o.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",vo,[o.selectedUser.roles&&o.selectedUser.roles.length>0?(i(!0),n(D,{key:0},T(o.selectedUser.roles,r=>(i(),n("span",{key:r.id,class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":r.slug==="admin","bg-green-100 text-green-800":r.slug==="organizer","bg-gray-100 text-gray-800":r.slug==="client"}])},l(o.getRoleName(r.slug)),3))),128)):(i(),n("span",yo," Aucun rôle "))])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",bo,l(o.formatDate(o.selectedUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",ho,l(o.selectedUser.email_verified_at?"Oui":"Non"),1)])]),o.selectedUser.is_organizer&&o.selectedUser.organizers_count>0?(i(),n("div",wo,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",_o,l(o.selectedUser.organizers_count)+" organisateur(s)",1)])):x("",!0)])):x("",!0)])])):x("",!0)])}const Co=te(hs,[["render",ko],["__scopeId","data-v-14f06e99"]]),w3=Object.freeze(Object.defineProperty({__proto__:null,default:Co},Symbol.toStringTag,{value:"Module"})),Mo={name:"OrganizerManagement",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(!1),a=f(!1),u=f(!1),s=f(null),r=f(null),y=f(null),j=f([]),k=f([]),O=f(null);let U=null;const A=G({search:"",status:"",verified:""}),q=G({name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),W=G({user_ids:[]});let S=null;const P=async()=>{d.value=!0;try{const z=new URLSearchParams;A.search&&z.append("search",A.search),A.status&&z.append("status",A.status),A.verified&&z.append("verified",A.verified);const ne=await(await fetch(`/api/v1/admin/organizers?${z}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();ne.success&&(j.value=ne.data.organizers.data||ne.data.organizers)}catch(z){console.error("Erreur chargement organisateurs:",z)}finally{d.value=!1}},h=async()=>{try{const Z=await(await fetch("/api/v1/admin/users?role=organizer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(Z.success){const ne=Z.data.users.data||Z.data.users||[];k.value=ne.filter(ce=>ce.roles&&ce.roles.some(F=>F.slug==="organizer"))}}catch(z){console.error("Erreur chargement utilisateurs:",z)}},b=()=>{clearTimeout(S),S=setTimeout(()=>{P()},500)},w=async()=>{s.value=null,Object.assign(q,{name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),await h(),o.value=!0,await me(),C()},L=async z=>{s.value=z,Object.assign(q,{name:z.name,bio:z.bio||"",contact_email:z.contact_email,contact_phone:z.contact_phone||"",status:z.status,user_ids:z.users?z.users.map(Z=>Z.id):[]}),await h(),o.value=!0,await me(),C()},m=async()=>{t.value=!0;try{const z=s.value?`/api/v1/admin/organizers/${s.value.id}`:"/api/v1/admin/organizers",Z=s.value?"PUT":"POST",ne={...q};U&&U.isValidNumber()&&(ne.contact_phone=U.getNumber());const ce=await fetch(z,{method:Z,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(ne)});if(ce.status===404&&s.value){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),o.value=!1,V(),P();return}const F=await ce.json();F.success?(Toast.fire({icon:"success",title:F.message||(s.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès")}),o.value=!1,V(),P()):Swal.fire({icon:"error",title:"Erreur",text:F.message||"Erreur lors de la sauvegarde"})}catch(z){console.error("Erreur sauvegarde organisateur:",z),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},p=z=>{r.value=z,a.value=!0},v=async z=>{y.value=z,W.user_ids=z.users?z.users.map(Z=>Z.id):[],await h(),u.value=!0},_=async()=>{c.value=!0;try{const z=await fetch(`/api/v1/admin/organizers/${y.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(W)});if(z.status===404){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),u.value=!1,P();return}const Z=await z.json();Z.success?(Toast.fire({icon:"success",title:"Utilisateurs mis à jour avec succès"}),u.value=!1,P()):Swal.fire({icon:"error",title:"Erreur",text:Z.message||"Erreur lors de la mise à jour"})}catch(z){console.error("Erreur mise à jour utilisateurs:",z),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la mise à jour"})}finally{c.value=!1}},$=()=>{Object.assign(A,{search:"",status:"",verified:""}),P()},C=()=>{O.value&&!U&&(U=ye(O.value,{initialCountry:"ga",preferredCountries:["ga","cm","cg","ci","sn"],separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.11.1/build/js/utils.js"}),O.value.addEventListener("input",()=>{U.isValidNumber()&&(q.contact_phone=U.getNumber())}),O.value.addEventListener("countrychange",()=>{q.contact_phone=U.getNumber()}))},V=()=>{U&&(U.destroy(),U=null)},Y=()=>{V(),o.value=!1},ue=z=>new Date(z).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=z=>({active:"Actif",inactive:"Inactif"})[z]||z,K=z=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"})[z]||"bg-gray-100 text-gray-800",X=()=>{j.value=[],k.value=[],r.value=null,y.value=null,s.value=null,o.value=!1,a.value=!1,u.value=!1,P()};return re(()=>{X()}),{loading:d,saving:t,updatingUsers:c,showModal:o,showDetailsModal:a,showUserModal:u,editingOrganizer:s,selectedOrganizer:r,managingOrganizer:y,organizers:j,availableUsers:k,filters:A,organizerForm:q,userManagementForm:W,phoneInput:O,loadOrganizers:P,loadAvailableUsers:h,debouncedSearch:b,openCreateModal:w,editOrganizer:L,saveOrganizer:m,viewOrganizerDetails:p,manageUsers:v,updateOrganizerUsers:_,resetFilters:$,initPhoneInput:C,destroyPhoneInput:V,closeModal:Y,forceRefresh:X,formatDate:ue,getStatusName:B,getStatusBadgeClass:K}}},So={class:"organizer-management p-6 bg-gray-50 min-h-screen"},Ao={class:"mb-8"},jo={class:"flex items-center justify-between"},Po={class:"bg-white rounded-lg shadow p-6 mb-8"},Do={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},To={class:"flex items-end space-x-2"},Uo={class:"bg-white rounded-lg shadow"},Fo={key:0,class:"p-8 text-center"},Oo={key:1,class:"p-8 text-center text-gray-500"},zo={key:2,class:"overflow-x-auto"},Eo={class:"w-full"},Ro={class:"divide-y divide-gray-200"},Vo={class:"px-6 py-4"},Bo={class:"flex items-center"},Io={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},$o={class:"ml-4"},Lo={class:"text-sm font-medium text-gray-900"},qo={class:"text-sm text-gray-500"},No={class:"px-6 py-4"},Xo={class:"text-sm text-gray-900"},Ho={class:"text-sm text-gray-500"},Go={class:"px-6 py-4 text-sm text-gray-900"},Wo={class:"flex flex-wrap gap-1"},Ko={key:0,class:"text-gray-500 text-xs"},Jo={class:"px-6 py-4 text-sm text-gray-900"},Yo={class:"px-6 py-4 text-sm"},Qo={class:"px-6 py-4 text-sm"},Zo={class:"px-6 py-4 text-sm space-x-2"},el=["onClick"],tl=["onClick"],sl=["onClick"],ol={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ll={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},rl={class:"text-lg font-bold mb-4"},al={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},nl={class:"md:col-span-2"},il={class:"md:col-span-2"},dl={class:"md:col-span-2"},ul={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},cl=["value"],ml={class:"ml-2 text-sm"},gl={key:0,class:"text-sm text-gray-500"},pl={class:"flex justify-end space-x-3 mt-6"},fl=["disabled"],xl={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vl={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},yl={class:"flex justify-between items-center mb-4"},bl={key:0,class:"space-y-4"},hl={class:"grid grid-cols-2 gap-4"},wl={class:"text-sm text-gray-900"},_l={class:"text-sm text-gray-900"},kl={class:"text-sm text-gray-900"},Cl={class:"text-sm text-gray-900"},Ml={class:"text-sm"},Sl={class:"text-sm"},Al={class:"text-sm text-gray-900"},jl={class:"text-sm text-gray-900"},Pl={key:0},Dl={class:"text-sm text-gray-900"},Tl={key:1},Ul={class:"flex flex-wrap gap-2"},Fl={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ol={class:"bg-white rounded-lg p-6 w-full max-w-md"},zl={class:"flex justify-between items-center mb-4"},El={key:0,class:"space-y-4"},Rl={class:"font-medium text-gray-900 mb-2"},Vl={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},Bl={class:"text-sm font-medium"},Il={class:"text-xs text-gray-500 block"},$l=["value"],Ll={class:"flex justify-end space-x-3"},ql=["disabled"];function Nl(d,t,c,o,a,u){return i(),n("div",So,[e("div",Ao,[e("div",jo,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>o.openCreateModal&&o.openCreateModal(...s)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer Organisateur ",-1)])])])]),e("div",Po,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Do,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.filters.search=s),onInput:t[2]||(t[2]=(...s)=>o.debouncedSearch&&o.debouncedSearch(...s)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.filters.status=s),onChange:t[4]||(t[4]=(...s)=>o.loadOrganizers&&o.loadOrganizers(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[R,o.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut actif",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.filters.verified=s),onChange:t[6]||(t[6]=(...s)=>o.loadOrganizers&&o.loadOrganizers(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],544),[[R,o.filters.verified]])]),e("div",To,[e("button",{onClick:t[7]||(t[7]=(...s)=>o.resetFilters&&o.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser "),e("button",{onClick:t[8]||(t[8]=(...s)=>o.forceRefresh&&o.forceRefresh(...s)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Actualiser ")])])]),e("div",Uo,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),o.loading?(i(),n("div",Fo,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.organizers.length===0?(i(),n("div",Oo," Aucun organisateur trouvé ")):(i(),n("div",zo,[e("table",Eo,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ro,[(i(!0),n(D,null,T(o.organizers,s=>(i(),n("tr",{key:s.id},[e("td",Vo,[e("div",Bo,[e("div",Io,l(s.name.charAt(0).toUpperCase()),1),e("div",$o,[e("div",Lo,l(s.name),1),e("div",qo,l(s.slug),1)])])]),e("td",No,[e("div",Xo,l(s.contact_email),1),e("div",Ho,l(s.contact_phone||"-"),1)]),e("td",Go,[e("div",Wo,[(i(!0),n(D,null,T(s.users,r=>(i(),n("span",{key:r.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},l(r.name),1))),128)),s.users.length===0?(i(),n("span",Ko," Aucun utilisateur ")):x("",!0)])]),e("td",Jo,l(s.events_count||0),1),e("td",Yo,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(s.status)])},l(o.getStatusName(s.status)),3)]),e("td",Qo,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(s.is_active?"Actif":"Inactif"),3)]),e("td",Zo,[e("button",{onClick:r=>o.editOrganizer(s),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,el),e("button",{onClick:r=>o.viewOrganizerDetails(s),class:"text-green-600 hover:text-green-900"}," Détails ",8,tl),e("button",{onClick:r=>o.manageUsers(s),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,sl)])]))),128))])])]))]),o.showModal?(i(),n("div",ol,[e("div",ll,[e("h3",rl,l(o.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=le((...s)=>o.saveOrganizer&&o.saveOrganizer(...s),["prevent"]))},[e("div",al,[e("div",nl,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.organizerForm.name=s),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.organizerForm.name]])]),e("div",il,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biographie",-1)),g(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.organizerForm.bio=s),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.organizerForm.bio]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.organizerForm.contact_email=s),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),g(e("input",{ref:"phoneInput","onUpdate:modelValue":t[12]||(t[12]=s=>o.organizerForm.contact_phone=s),type:"tel",class:"w-full border rounded-lg px-3 py-2",placeholder:"Téléphone"},null,512),[[M,o.organizerForm.contact_phone]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.organizerForm.status=s),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[R,o.organizerForm.status]])]),e("div",dl,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",ul,[(i(!0),n(D,null,T(o.availableUsers,s=>(i(),n("div",{key:s.id,class:"flex items-center mb-2"},[g(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[14]||(t[14]=r=>o.organizerForm.user_ids=r),class:"rounded border-gray-300"},null,8,cl),[[oe,o.organizerForm.user_ids]]),e("span",ml,l(s.name)+" ("+l(s.email)+")",1)]))),128)),o.availableUsers.length===0?(i(),n("div",gl," Aucun utilisateur disponible ")):x("",!0)])])]),e("div",pl,[e("button",{type:"button",onClick:t[15]||(t[15]=(...s)=>o.closeModal&&o.closeModal(...s)),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:o.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(o.saving?"Enregistrement...":o.editingOrganizer?"Mettre à jour":"Créer"),9,fl)])],32)])])):x("",!0),o.showDetailsModal?(i(),n("div",xl,[e("div",vl,[e("div",yl,[t[41]||(t[41]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=s=>o.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[40]||(t[40]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o.selectedOrganizer?(i(),n("div",bl,[e("div",hl,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",wl,l(o.selectedOrganizer.name),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",_l,l(o.selectedOrganizer.slug),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",kl,l(o.selectedOrganizer.contact_email),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Cl,l(o.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Ml,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(o.selectedOrganizer.status)])},l(o.getStatusName(o.selectedOrganizer.status)),3)])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut actif",-1)),e("p",Sl,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.selectedOrganizer.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(o.selectedOrganizer.is_active?"Actif":"Inactif"),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Al,l(o.formatDate(o.selectedOrganizer.created_at)),1)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",jl,l(o.selectedOrganizer.events_count||0)+" événement(s)",1)])]),o.selectedOrganizer.bio?(i(),n("div",Pl,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Biographie",-1)),e("p",Dl,l(o.selectedOrganizer.bio),1)])):x("",!0),o.selectedOrganizer.users&&o.selectedOrganizer.users.length>0?(i(),n("div",Tl,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",Ul,[(i(!0),n(D,null,T(o.selectedOrganizer.users,s=>(i(),n("span",{key:s.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},l(s.name),1))),128))])])):x("",!0)])):x("",!0)])])):x("",!0),o.showUserModal?(i(),n("div",Fl,[e("div",Ol,[e("div",zl,[t[53]||(t[53]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=s=>o.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[52]||(t[52]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o.managingOrganizer?(i(),n("div",El,[e("div",null,[e("h4",Rl,l(o.managingOrganizer.name),1),t[54]||(t[54]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",Vl,[(i(!0),n(D,null,T(o.availableUsers,s=>(i(),n("div",{key:s.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",Bl,l(s.name),1),e("span",Il,l(s.email),1)]),g(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[19]||(t[19]=r=>o.userManagementForm.user_ids=r),class:"rounded border-gray-300"},null,8,$l),[[oe,o.userManagementForm.user_ids]])]))),128))]),e("div",Ll,[e("button",{onClick:t[20]||(t[20]=s=>o.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...s)=>o.updateOrganizerUsers&&o.updateOrganizerUsers(...s)),disabled:o.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(o.updatingUsers?"Mise à jour...":"Mettre à jour"),9,ql)])])):x("",!0)])])):x("",!0)])}const Xl=te(Mo,[["render",Nl],["__scopeId","data-v-21a8738d"]]),_3=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"})),Hl={name:"EventManagement",components:{ImageUpload:xe},setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(!1),a=f(null),u=f(null),s=f([]),r=f([]),y=f([]),j=f([]),k=f(null),O=G({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),U=G({search:"",status:"",organizer_id:"",category_id:"",page:1}),A=G({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},schedules:[],ticket_types:[],new_venue_name:"",new_venue_city:"",new_venue_address:""}),q=f(!1);let W=null;const S=async()=>{d.value=!0;try{const F=new URLSearchParams;Object.keys(U).forEach(ee=>{U[ee]&&U[ee]!==""&&F.append(ee,U[ee])});const N=await(await fetch(`/api/v1/admin/events?${F}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(N.success){s.value=N.data.events.data,k.value={current_page:N.data.events.current_page,last_page:N.data.events.last_page,from:N.data.events.from,to:N.data.events.to,total:N.data.events.total};const ee=N.data.events.data;O.total_events=k.value.total,O.published_events=ee.filter(H=>H.status==="published").length,O.draft_events=ee.filter(H=>H.status==="draft").length,O.total_tickets_sold=ee.reduce((H,ve)=>H+(ve.tickets_sold||0),0)}}catch(F){console.error("Erreur chargement événements:",F)}finally{d.value=!1}},P=async()=>{try{const Q=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();Q.success&&(r.value=Q.data.organizers.data||Q.data.organizers)}catch(F){console.error("Erreur chargement organisateurs:",F)}},h=async()=>{try{const Q=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();console.log("Categories response:",Q),Q.success&&(y.value=Q.categories||Q.data,console.log("Categories loaded:",y.value))}catch(F){console.error("Erreur chargement catégories:",F)}},b=async()=>{try{const Q=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();Q.success&&(j.value=Q.venues||Q.data)}catch(F){console.error("Erreur chargement lieux:",F),j.value=[]}},w=()=>{clearTimeout(W),W=setTimeout(()=>{U.page=1,S()},500)},L=F=>{F>=1&&F<=k.value.last_page&&(U.page=F,S())},m=()=>{Object.assign(U,{search:"",status:"",organizer_id:"",category_id:"",page:1}),S()},p=()=>{a.value=null,Object.assign(A,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),q.value=!1,c.value=!0},v=async F=>{try{const N=await(await fetch(`/api/v1/admin/events/${F.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(N.success){a.value=N.data.event;let ee={};N.data.event.image_url?ee.url=N.data.event.image_url:N.data.event.image_file&&(ee.filename=N.data.event.image_file),Object.assign(A,{title:N.data.event.title,description:N.data.event.description,organizer_id:N.data.event.organizer_id,category_id:N.data.event.category_id,venue_id:N.data.event.venue_id,status:N.data.event.status,image:ee,schedules:N.data.event.schedules?.map(H=>({starts_at:H.starts_at?H.starts_at.slice(0,16):"",ends_at:H.ends_at?H.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(N.data.event.ticket_types||N.data.event.ticketTypes||[]).map(H=>({name:H.name,price:H.price,capacity:H.capacity||H.available_quantity||H.max_quantity||H.quantity||0,description:H.description||""}))}),(!A.ticket_types||A.ticket_types.length===0)&&(A.ticket_types=[{name:"",price:0,capacity:0,description:""}]),c.value=!0}}catch(Q){console.error("Erreur chargement événement:",Q)}},_=async()=>{t.value=!0;try{const F=a.value?`/api/v1/admin/events/${a.value.id}`:"/api/v1/admin/events",Q=a.value?"PUT":"POST",N={...A};A.image.url?(N.image_url=A.image.url,N.image_file=null):A.image.filename&&(N.image_file=A.image.filename,N.image_url=null),delete N.image;const H=await(await fetch(F,{method:Q,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(N)})).json();H.success?(Swal.fire({icon:"success",title:"Succès",text:a.value?"Événement mis à jour avec succès":"Événement créé avec succès"}),c.value=!1,S()):Swal.fire({icon:"error",title:"Erreur",text:H.message||"Erreur lors de la sauvegarde"})}catch(F){console.error("Erreur sauvegarde événement:",F),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},$=async F=>{try{const N=await(await fetch(`/api/v1/admin/events/${F.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();N.success&&(u.value=N.data.event,o.value=!0)}catch(Q){console.error("Erreur chargement détails événement:",Q)}},C=async F=>{try{const N=await(await fetch(`/api/v1/admin/events/${F.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(N.success){const ee=N.data.event;a.value=null,Object.assign(A,{title:`${ee.title} (Copie)`,description:ee.description||"",organizer_id:ee.organizer_id,category_id:ee.category_id,venue_id:ee.venue_id,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:ee.schedules?.map(H=>({starts_at:H.starts_at?H.starts_at.slice(0,16):"",ends_at:H.ends_at?H.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(ee.ticket_types||ee.ticketTypes||[]).map(H=>({name:H.name,price:H.price,capacity:H.capacity||H.available_quantity||H.max_quantity||H.quantity||0,description:H.description||""}))}),(!A.schedules||A.schedules.length===0)&&(A.schedules=[{starts_at:"",ends_at:""}]),(!A.ticket_types||A.ticket_types.length===0)&&(A.ticket_types=[{name:"",price:0,capacity:0,description:""}]),q.value=!1,c.value=!0}else Swal.fire({icon:"error",title:"Erreur",text:"Impossible de récupérer les détails de l'événement"})}catch(Q){console.error("Erreur duplication événement:",Q),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la duplication"})}},V=()=>{A.schedules.push({starts_at:"",ends_at:""})},Y=F=>{A.schedules.splice(F,1)},ue=()=>{A.ticket_types.push({name:"",price:0,capacity:0,description:""})},B=F=>{A.ticket_types.splice(F,1)},K=F=>new Intl.NumberFormat("fr-FR").format(F),X=F=>new Date(F).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),z=F=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[F]||F,Z=F=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[F]||"bg-gray-100 text-gray-800";ge(()=>A.venue_id,F=>{F==="new"&&(q.value=!0)});const ne=()=>{q.value=!1,A.venue_id="",A.new_venue_name="",A.new_venue_city="",A.new_venue_address=""},ce=F=>{A.image=F};return re(()=>{S(),P(),h(),b()}),{loading:d,saving:t,showModal:c,showDetailsModal:o,editingEvent:a,selectedEvent:u,events:s,organizers:r,categories:y,venues:j,pagination:k,stats:O,filters:U,eventForm:A,showNewVenue:q,loadEvents:S,loadOrganizers:P,loadCategories:h,loadVenues:b,debouncedSearch:w,changePage:L,resetFilters:m,openCreateModal:p,editEvent:v,saveEvent:_,viewEventDetails:$,duplicateEvent:C,addSchedule:V,removeSchedule:Y,addTicketType:ue,removeTicketType:B,cancelNewVenue:ne,handleImageChange:ce,formatAmount:K,formatDateTime:X,getStatusName:z,getStatusBadgeClass:Z,getTicketCapacity:F=>F.capacity||F.available_quantity||F.max_quantity||F.quantity||0}}},Gl={class:"event-management p-6 bg-gray-50 min-h-screen"},Wl={class:"mb-8"},Kl={class:"flex items-center justify-between"},Jl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Yl={class:"bg-white rounded-lg shadow p-6"},Ql={class:"flex items-center"},Zl={class:"ml-4"},er={class:"text-2xl font-bold text-blue-600"},tr={class:"bg-white rounded-lg shadow p-6"},sr={class:"flex items-center"},or={class:"ml-4"},lr={class:"text-2xl font-bold text-green-600"},rr={class:"bg-white rounded-lg shadow p-6"},ar={class:"flex items-center"},nr={class:"ml-4"},ir={class:"text-2xl font-bold text-yellow-600"},dr={class:"bg-white rounded-lg shadow p-6"},ur={class:"flex items-center"},cr={class:"ml-4"},mr={class:"text-2xl font-bold text-purple-600"},gr={class:"bg-white rounded-lg shadow p-6 mb-8"},pr={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},fr=["value"],xr=["value"],vr={class:"flex items-end"},yr={class:"bg-white rounded-lg shadow"},br={key:0,class:"p-8 text-center"},hr={key:1,class:"p-8 text-center text-gray-500"},wr={key:2,class:"overflow-x-auto"},_r={class:"w-full"},kr={class:"divide-y divide-gray-200"},Cr={class:"px-6 py-4"},Mr={class:"flex items-center"},Sr={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},Ar={class:"ml-4"},jr={class:"text-sm font-medium text-gray-900"},Pr={class:"text-sm text-gray-500"},Dr={class:"px-6 py-4 text-sm text-gray-900"},Tr={class:"px-6 py-4 text-sm text-gray-900"},Ur={class:"px-6 py-4 text-sm text-gray-900"},Fr={class:"px-6 py-4 text-sm text-gray-900"},Or={class:"space-y-1"},zr={class:"text-gray-500"},Er={class:"px-6 py-4 text-sm"},Rr={class:"px-6 py-4 text-sm space-x-2"},Vr=["onClick"],Br=["onClick"],Ir=["onClick"],$r={key:3,class:"p-6 border-t"},Lr={class:"flex justify-between items-center"},qr={class:"text-sm text-gray-700"},Nr={class:"flex space-x-2"},Xr=["disabled"],Hr={class:"px-3 py-1 text-sm text-gray-600"},Gr=["disabled"],Wr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Kr={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Jr={class:"text-lg font-bold mb-4"},Yr={class:"space-y-6"},Qr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Zr={class:"md:col-span-2"},ea={class:"md:col-span-2"},ta={class:"md:col-span-2"},sa=["value"],oa=["value"],la={key:0},ra=["value"],aa={key:1,class:"space-y-2"},na={class:"space-y-3"},ia=["onUpdate:modelValue"],da=["onUpdate:modelValue"],ua={class:"flex items-end"},ca=["onClick"],ma={class:"space-y-3"},ga=["onUpdate:modelValue"],pa=["onUpdate:modelValue"],fa=["onUpdate:modelValue"],xa=["onUpdate:modelValue"],va={class:"flex items-end"},ya=["onClick"],ba={class:"flex justify-end space-x-3 mt-6"},ha=["disabled"],wa={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_a={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},ka={class:"flex justify-between items-center mb-4"},Ca={key:0,class:"space-y-6"},Ma={class:"grid grid-cols-2 gap-6"},Sa={class:"text-sm font-medium text-gray-900"},Aa={class:"text-sm text-gray-900"},ja={class:"text-sm text-gray-900"},Pa={class:"text-sm text-gray-900"},Da={class:"text-sm text-gray-900"},Ta={class:"text-sm text-gray-900"},Ua={key:0},Fa={class:"space-y-2"},Oa={class:"text-sm"},za={key:1},Ea={class:"overflow-x-auto"},Ra={class:"w-full text-sm border border-gray-200 rounded-lg"},Va={class:"bg-white divide-y divide-gray-200"},Ba={class:"px-4 py-3 font-medium text-gray-900"},Ia={class:"px-4 py-3 text-gray-900"},$a={class:"px-4 py-3 text-gray-900"},La={class:"px-4 py-3"},qa={class:"px-4 py-3 text-gray-600"},Na={key:2};function Xa(d,t,c,o,a,u){const s=fe("ImageUpload");return i(),n("div",Gl,[e("div",Wl,[e("div",Kl,[t[29]||(t[29]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...r)=>o.openCreateModal&&o.openCreateModal(...r)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer Événement ",-1)])])])]),e("div",Jl,[e("div",Yl,[e("div",Ql,[t[31]||(t[31]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",Zl,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",er,l(o.stats.total_events||0),1)])])]),e("div",tr,[e("div",sr,[t[33]||(t[33]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",or,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",lr,l(o.stats.published_events||0),1)])])]),e("div",rr,[e("div",ar,[t[35]||(t[35]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",nr,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",ir,l(o.stats.draft_events||0),1)])])]),e("div",dr,[e("div",ur,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",cr,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",mr,l(o.stats.total_tickets_sold||0),1)])])])]),e("div",gr,[t[45]||(t[45]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",pr,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.filters.search=r),onInput:t[2]||(t[2]=(...r)=>o.debouncedSearch&&o.debouncedSearch(...r)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.filters.status=r),onChange:t[4]||(t[4]=(...r)=>o.loadEvents&&o.loadEvents(...r)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[R,o.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>o.filters.organizer_id=r),onChange:t[6]||(t[6]=(...r)=>o.loadEvents&&o.loadEvents(...r)),class:"w-full border rounded-lg px-3 py-2"},[t[41]||(t[41]=e("option",{value:""},"Tous les organisateurs",-1)),(i(!0),n(D,null,T(o.organizers,r=>(i(),n("option",{key:r.id,value:r.id},l(r.name),9,fr))),128))],544),[[R,o.filters.organizer_id]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>o.filters.category_id=r),onChange:t[8]||(t[8]=(...r)=>o.loadEvents&&o.loadEvents(...r)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Toutes les catégories",-1)),(i(!0),n(D,null,T(o.categories,r=>(i(),n("option",{key:r.id,value:r.id},l(r.name),9,xr))),128))],544),[[R,o.filters.category_id]])]),e("div",vr,[e("button",{onClick:t[9]||(t[9]=(...r)=>o.resetFilters&&o.resetFilters(...r)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",yr,[t[48]||(t[48]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),o.loading?(i(),n("div",br,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.events.length===0?(i(),n("div",hr," Aucun événement trouvé ")):(i(),n("div",wr,[e("table",_r,[t[47]||(t[47]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",kr,[(i(!0),n(D,null,T(o.events,r=>(i(),n("tr",{key:r.id},[e("td",Cr,[e("div",Mr,[e("div",Sr,l(r.title.charAt(0).toUpperCase()),1),e("div",Ar,[e("div",jr,l(r.title),1),e("div",Pr,l(r.slug),1)])])]),e("td",Dr,l(r.organizer?.name||"-"),1),e("td",Tr,l(r.category?.name||"-"),1),e("td",Ur,l(r.schedules?.[0]?o.formatDateTime(r.schedules[0].starts_at):"Non programmé"),1),e("td",Fr,[e("div",Or,[e("div",null,"Vendus: "+l(r.tickets_sold||0),1),e("div",zr,"Total: "+l(r.total_capacity||0),1)])]),e("td",Er,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(r.status)])},l(o.getStatusName(r.status)),3)]),e("td",Rr,[e("button",{onClick:y=>o.editEvent(r),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Vr),e("button",{onClick:y=>o.viewEventDetails(r),class:"text-green-600 hover:text-green-900"}," Détails ",8,Br),e("button",{onClick:y=>o.duplicateEvent(r),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,Ir)])]))),128))])])])),o.pagination&&o.pagination.last_page>1?(i(),n("div",$r,[e("div",Lr,[e("div",qr," Affichage "+l(o.pagination.from)+" à "+l(o.pagination.to)+" sur "+l(o.pagination.total)+" événements ",1),e("div",Nr,[e("button",{onClick:t[10]||(t[10]=r=>o.changePage(o.pagination.current_page-1)),disabled:o.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Xr),e("span",Hr," Page "+l(o.pagination.current_page)+" sur "+l(o.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=r=>o.changePage(o.pagination.current_page+1)),disabled:o.pagination.current_page>=o.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Gr)])])])):x("",!0)]),o.showModal?(i(),n("div",Wr,[e("div",Kr,[e("h3",Jr,l(o.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[26]||(t[26]=le((...r)=>o.saveEvent&&o.saveEvent(...r),["prevent"]))},[e("div",Yr,[e("div",Qr,[e("div",Zr,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>o.eventForm.title=r),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.eventForm.title]])]),e("div",ea,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),g(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=r=>o.eventForm.description=r),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.eventForm.description]])]),e("div",ta,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image de l'événement",-1)),pe(s,{modelValue:o.eventForm.image,"onUpdate:modelValue":t[14]||(t[14]=r=>o.eventForm.image=r),"entity-type":"events",size:"medium","alt-text":"Image de l'événement",onChange:o.handleImageChange},null,8,["modelValue","onChange"])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),g(e("select",{"onUpdate:modelValue":t[15]||(t[15]=r=>o.eventForm.organizer_id=r),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[52]||(t[52]=e("option",{value:""},"Sélectionner un organisateur",-1)),(i(!0),n(D,null,T(o.organizers,r=>(i(),n("option",{key:r.id,value:r.id},l(r.name),9,sa))),128))],512),[[R,o.eventForm.organizer_id]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),g(e("select",{"onUpdate:modelValue":t[16]||(t[16]=r=>o.eventForm.category_id=r),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[54]||(t[54]=e("option",{value:""},"Sélectionner une catégorie",-1)),(i(!0),n(D,null,T(o.categories,r=>(i(),n("option",{key:r.id,value:r.id},l(r.name),9,oa))),128))],512),[[R,o.eventForm.category_id]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),o.showNewVenue?x("",!0):(i(),n("div",la,[g(e("select",{"onUpdate:modelValue":t[17]||(t[17]=r=>o.eventForm.venue_id=r),class:"w-full border rounded-lg px-3 py-2"},[t[56]||(t[56]=e("option",{value:""},"Sélectionner un lieu",-1)),(i(!0),n(D,null,T(o.venues,r=>(i(),n("option",{key:r.id,value:r.id},l(r.name)+" - "+l(r.city),9,ra))),128)),t[57]||(t[57]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],512),[[R,o.eventForm.venue_id]])])),o.showNewVenue||o.eventForm.venue_id==="new"?(i(),n("div",aa,[g(e("input",{"onUpdate:modelValue":t[18]||(t[18]=r=>o.eventForm.new_venue_name=r),type:"text",placeholder:"Nom du lieu",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[M,o.eventForm.new_venue_name]]),g(e("input",{"onUpdate:modelValue":t[19]||(t[19]=r=>o.eventForm.new_venue_city=r),type:"text",placeholder:"Ville",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[M,o.eventForm.new_venue_city]]),g(e("input",{"onUpdate:modelValue":t[20]||(t[20]=r=>o.eventForm.new_venue_address=r),type:"text",placeholder:"Adresse",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.eventForm.new_venue_address]]),e("button",{type:"button",onClick:t[21]||(t[21]=(...r)=>o.cancelNewVenue&&o.cancelNewVenue(...r)),class:"text-sm text-blue-600 hover:text-blue-800"}," Utiliser un lieu existant ")])):x("",!0)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),g(e("select",{"onUpdate:modelValue":t[22]||(t[22]=r=>o.eventForm.status=r),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[59]||(t[59]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[R,o.eventForm.status]])])]),e("div",null,[t[63]||(t[63]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",na,[(i(!0),n(D,null,T(o.eventForm.schedules,(r,y)=>(i(),n("div",{key:y,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),g(e("input",{"onUpdate:modelValue":j=>r.starts_at=j,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,ia),[[M,r.starts_at]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),g(e("input",{"onUpdate:modelValue":j=>r.ends_at=j,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,da),[[M,r.ends_at]])]),e("div",ua,[e("button",{type:"button",onClick:j=>o.removeSchedule(y),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,ca)])]))),128)),e("button",{type:"button",onClick:t[23]||(t[23]=(...r)=>o.addSchedule&&o.addSchedule(...r)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[68]||(t[68]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",ma,[(i(!0),n(D,null,T(o.eventForm.ticket_types,(r,y)=>(i(),n("div",{key:y,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),g(e("input",{"onUpdate:modelValue":j=>r.name=j,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,ga),[[M,r.name]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),g(e("input",{"onUpdate:modelValue":j=>r.price=j,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,pa),[[M,r.price,void 0,{number:!0}]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),g(e("input",{"onUpdate:modelValue":j=>r.capacity=j,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,fa),[[M,r.capacity,void 0,{number:!0}]])]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),g(e("input",{"onUpdate:modelValue":j=>r.description=j,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,xa),[[M,r.description]])]),e("div",va,[e("button",{type:"button",onClick:j=>o.removeTicketType(y),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,ya)])]))),128)),e("button",{type:"button",onClick:t[24]||(t[24]=(...r)=>o.addTicketType&&o.addTicketType(...r)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",ba,[e("button",{type:"button",onClick:t[25]||(t[25]=r=>o.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:o.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(o.saving?"Enregistrement...":o.editingEvent?"Mettre à jour":"Créer"),9,ha)])],32)])])):x("",!0),o.showDetailsModal?(i(),n("div",wa,[e("div",_a,[e("div",ka,[t[70]||(t[70]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[27]||(t[27]=r=>o.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[69]||(t[69]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o.selectedEvent?(i(),n("div",Ca,[e("div",Ma,[e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Sa,l(o.selectedEvent.title),1)]),e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(o.selectedEvent.status)])},l(o.getStatusName(o.selectedEvent.status)),3)]),e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Aa,l(o.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",ja,l(o.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Pa,l(o.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Da,l(o.formatDateTime(o.selectedEvent.created_at)),1)])]),e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",Ta,l(o.selectedEvent.description),1)]),o.selectedEvent.schedules&&o.selectedEvent.schedules.length>0?(i(),n("div",Ua,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",Fa,[(i(!0),n(D,null,T(o.selectedEvent.schedules,r=>(i(),n("div",{key:r.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",Oa,"Du "+l(o.formatDateTime(r.starts_at))+" au "+l(o.formatDateTime(r.ends_at)),1)]))),128))])])):x("",!0),(o.selectedEvent.ticketTypes||o.selectedEvent.ticket_types)&&(o.selectedEvent.ticketTypes?.length>0||o.selectedEvent.ticket_types?.length>0)?(i(),n("div",za,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",Ea,[e("table",Ra,[t[79]||(t[79]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prix"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Capacité"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description")])],-1)),e("tbody",Va,[(i(!0),n(D,null,T(o.selectedEvent.ticketTypes||o.selectedEvent.ticket_types,r=>(i(),n("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",Ba,l(r.name),1),e("td",Ia,l(o.formatAmount(r.price))+" XAF",1),e("td",$a,l(o.getTicketCapacity(r)),1),e("td",La,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",r.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(r.status==="active"?"Actif":"Inactif"),3)]),e("td",qa,l(r.description||"-"),1)]))),128))])])])])):(i(),n("div",Na,[...t[81]||(t[81]=[e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1),e("div",{class:"bg-gray-50 p-4 rounded-lg text-center"},[e("p",{class:"text-gray-500"},"Aucun type de billet défini pour cet événement")],-1)])]))])):x("",!0)])])):x("",!0)])}const Ha=te(Hl,[["render",Xa],["__scopeId","data-v-07caf94a"]]),k3=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"})),Ga={name:"OrderManagement",setup(){const d=f(!1),t=f(!1),c=f(null),o=f([]),a=f([]),u=f([]),s=f(null),r=G({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),y=G({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let j=null;const k=async()=>{d.value=!0;try{const _=new URLSearchParams;Object.keys(y).forEach(V=>{y[V]&&y[V]!==""&&_.append(V,y[V])});const C=await(await fetch(`/api/v1/admin/orders?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(C.success){o.value=C.data.orders.data,s.value={current_page:C.data.orders.current_page,last_page:C.data.orders.last_page,from:C.data.orders.from,to:C.data.orders.to,total:C.data.orders.total};const V=C.data.orders.data;r.total_orders=s.value.total,r.confirmed_orders=V.filter(Y=>Y.status==="confirmed").length,r.pending_orders=V.filter(Y=>Y.status==="pending").length,r.total_revenue=V.filter(Y=>Y.status==="confirmed").reduce((Y,ue)=>Y+ue.total_amount,0)}}catch(_){console.error("Erreur chargement achats:",_)}finally{d.value=!1}},O=async()=>{try{const $=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success&&(a.value=$.data.organizers.data||$.data.organizers)}catch(_){console.error("Erreur chargement organisateurs:",_)}},U=async()=>{try{const $=await(await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success&&(u.value=$.data.events.data||$.data.events)}catch(_){console.error("Erreur chargement événements:",_)}},A=()=>{clearTimeout(j),j=setTimeout(()=>{y.page=1,k()},500)},q=_=>{_>=1&&_<=s.value.last_page&&(y.page=_,k())},W=()=>{Object.assign(y,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),k()},S=async _=>{try{const C=await(await fetch(`/api/v1/admin/orders/${_.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();C.success&&(c.value=C.data.order,t.value=!0)}catch($){console.error("Erreur chargement détails commande:",$)}},P=async(_,$)=>{if(confirm(`Êtes-vous sûr de vouloir ${$==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const V=await(await fetch(`/api/v1/admin/orders/${_.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:$})})).json();V.success?(alert(`Commande ${$==="confirmed"?"confirmée":"annulée"} avec succès`),k(),t.value&&(c.value.status=$)):alert(V.message||"Erreur lors de la mise à jour")}catch(C){console.error("Erreur mise à jour statut commande:",C),alert("Erreur technique")}},h=async()=>{try{const _=new URLSearchParams;Object.keys(y).forEach(C=>{y[C]&&y[C]!==""&&C!=="page"&&_.append(C,y[C])});const $=await fetch(`/api/v1/admin/orders/export?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if($.ok){const C=await $.blob(),V=window.URL.createObjectURL(C),Y=document.createElement("a");Y.href=V,Y.download=`achats-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Y),Y.click(),window.URL.revokeObjectURL(V),document.body.removeChild(Y)}}catch(_){console.error("Erreur export:",_),alert("Erreur lors de l'export des données")}},b=_=>new Intl.NumberFormat("fr-FR").format(_),w=_=>new Date(_).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=_=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[_]||_,m=_=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[_]||"bg-gray-100 text-gray-800",p=_=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[_]||_,v=_=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[_]||"bg-gray-100 text-gray-800";return re(()=>{k(),O(),U()}),{loading:d,showDetailsModal:t,selectedOrder:c,orders:o,organizers:a,events:u,pagination:s,stats:r,filters:y,loadOrders:k,loadOrganizers:O,loadEvents:U,debouncedSearch:A,changePage:q,resetFilters:W,viewOrderDetails:S,updateOrderStatus:P,exportOrders:h,formatAmount:b,formatDateTime:w,getStatusName:L,getStatusBadgeClass:m,getTicketStatusName:p,getTicketStatusClass:v}}},Wa={class:"order-management p-6 bg-gray-50 min-h-screen"},Ka={class:"mb-8"},Ja={class:"flex items-center justify-between"},Ya={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Qa={class:"bg-white rounded-lg shadow p-6"},Za={class:"flex items-center"},en={class:"ml-4"},tn={class:"text-2xl font-bold text-blue-600"},sn={class:"bg-white rounded-lg shadow p-6"},on={class:"flex items-center"},ln={class:"ml-4"},rn={class:"text-2xl font-bold text-green-600"},an={class:"bg-white rounded-lg shadow p-6"},nn={class:"flex items-center"},dn={class:"ml-4"},un={class:"text-2xl font-bold text-yellow-600"},cn={class:"bg-white rounded-lg shadow p-6"},mn={class:"flex items-center"},gn={class:"ml-4"},pn={class:"text-2xl font-bold text-purple-600"},fn={class:"bg-white rounded-lg shadow p-6 mb-8"},xn={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},vn=["value"],yn=["value"],bn={class:"flex justify-between items-center mt-4"},hn={class:"text-sm text-gray-600"},wn={class:"bg-white rounded-lg shadow"},_n={key:0,class:"p-8 text-center"},kn={key:1,class:"p-8 text-center text-gray-500"},Cn={key:2,class:"overflow-x-auto"},Mn={class:"w-full"},Sn={class:"divide-y divide-gray-200"},An={class:"px-6 py-4 text-sm font-mono text-blue-600"},jn=["onClick"],Pn={class:"px-6 py-4 text-sm text-gray-900"},Dn={class:"font-medium"},Tn={class:"text-gray-500"},Un={class:"px-6 py-4 text-sm text-gray-900"},Fn={class:"font-medium"},On={class:"text-gray-500"},zn={class:"px-6 py-4 text-sm text-gray-900"},En={class:"space-y-1"},Rn={class:"px-6 py-4 text-sm font-medium text-gray-900"},Vn={class:"px-6 py-4 text-sm"},Bn={class:"px-6 py-4 text-sm text-gray-500"},In={class:"px-6 py-4 text-sm space-x-2"},$n=["onClick"],Ln=["onClick"],qn=["onClick"],Nn={key:3,class:"p-6 border-t"},Xn={class:"flex justify-between items-center"},Hn={class:"text-sm text-gray-700"},Gn={class:"flex space-x-2"},Wn=["disabled"],Kn={class:"px-3 py-1 text-sm text-gray-600"},Jn=["disabled"],Yn={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Qn={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Zn={class:"flex justify-between items-center mb-4"},ei={key:0,class:"space-y-6"},ti={class:"grid grid-cols-2 gap-6"},si={class:"space-y-4"},oi={class:"space-y-2"},li={class:"text-sm font-mono text-gray-900"},ri={class:"text-sm text-gray-900"},ai={key:0},ni={class:"text-sm text-gray-900"},ii={class:"space-y-4"},di={class:"space-y-2"},ui={class:"text-sm text-gray-900"},ci={class:"text-sm text-gray-900"},mi={key:0},gi={class:"text-sm text-gray-900"},pi={key:0,class:"border-t pt-6"},fi={class:"grid grid-cols-2 gap-4"},xi={class:"text-sm text-gray-900"},vi={class:"text-sm text-gray-900"},yi={class:"text-sm text-gray-900"},bi={class:"text-sm text-gray-900"},hi={class:"border-t pt-6"},wi={class:"overflow-x-auto"},_i={class:"w-full text-sm"},ki={class:"divide-y divide-gray-200"},Ci={class:"px-4 py-2"},Mi={class:"px-4 py-2"},Si={class:"px-4 py-2"},Ai={class:"px-4 py-2 font-medium"},ji={class:"bg-gray-50"},Pi={class:"px-4 py-2 font-bold"},Di={key:1,class:"border-t pt-6"},Ti={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Ui={class:"flex justify-between items-start mb-2"},Fi={class:"font-mono text-blue-600"},Oi={class:"text-gray-600"},zi={key:0},Ei={class:"border-t pt-6 flex justify-end space-x-3"};function Ri(d,t,c,o,a,u){return i(),n("div",Wa,[e("div",Ka,[e("div",Ja,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Achats"),e("p",{class:"text-gray-600"},"Gérer et suivre tous les achats de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>o.exportOrders&&o.exportOrders(...s)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),se(" Exporter ",-1)])])])]),e("div",Ya,[e("div",Qa,[e("div",Za,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",en,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Achats",-1)),e("p",tn,l(o.stats.total_orders||0),1)])])]),e("div",sn,[e("div",on,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ln,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",rn,l(o.stats.confirmed_orders||0),1)])])]),e("div",an,[e("div",nn,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",dn,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",un,l(o.stats.pending_orders||0),1)])])]),e("div",cn,[e("div",mn,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",gn,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",pn,l(o.formatAmount(o.stats.total_revenue||0))+" XAF",1)])])])]),e("div",fn,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",xn,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.filters.search=s),onInput:t[2]||(t[2]=(...s)=>o.debouncedSearch&&o.debouncedSearch(...s)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.filters.status=s),onChange:t[4]||(t[4]=(...s)=>o.loadOrders&&o.loadOrders(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[ae('<option value="" data-v-e176f2ab>Tous les statuts</option><option value="pending" data-v-e176f2ab>En attente</option><option value="confirmed" data-v-e176f2ab>Confirmée</option><option value="cancelled" data-v-e176f2ab>Annulée</option><option value="refunded" data-v-e176f2ab>Remboursée</option>',5)])],544),[[R,o.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.filters.organizer_id=s),onChange:t[6]||(t[6]=(...s)=>o.loadOrders&&o.loadOrders(...s)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(i(!0),n(D,null,T(o.organizers,s=>(i(),n("option",{key:s.id,value:s.id},l(s.name),9,vn))),128))],544),[[R,o.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.filters.event_id=s),onChange:t[8]||(t[8]=(...s)=>o.loadOrders&&o.loadOrders(...s)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(i(!0),n(D,null,T(o.events,s=>(i(),n("option",{key:s.id,value:s.id},l(s.title),9,yn))),128))],544),[[R,o.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.filters.date_from=s),onChange:t[10]||(t[10]=(...s)=>o.loadOrders&&o.loadOrders(...s)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.filters.date_to=s),onChange:t[12]||(t[12]=(...s)=>o.loadOrders&&o.loadOrders(...s)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.date_to]])])]),e("div",bn,[e("button",{onClick:t[13]||(t[13]=(...s)=>o.resetFilters&&o.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",hn,l(o.pagination?`${o.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",wn,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Achats")],-1)),o.loading?(i(),n("div",_n,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.orders.length===0?(i(),n("div",kn," Aucun achat trouvé ")):(i(),n("div",Cn,[e("table",Mn,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Sn,[(i(!0),n(D,null,T(o.orders,s=>(i(),n("tr",{key:s.id},[e("td",An,[e("button",{onClick:r=>o.viewOrderDetails(s),class:"hover:text-blue-800"}," #"+l(s.reference),9,jn)]),e("td",Pn,[e("div",null,[e("div",Dn,l(s.customer_name),1),e("div",Tn,l(s.customer_email),1)])]),e("td",Un,[e("div",null,[e("div",Fn,l(s.event?.title||"-"),1),e("div",On,l(s.event?.organizer?.name||"-"),1)])]),e("td",zn,[e("div",En,[(i(!0),n(D,null,T(s.items,r=>(i(),n("div",{key:r.id,class:"text-xs"},l(r.quantity)+"x "+l(r.ticket_type_name),1))),128))])]),e("td",Rn,l(o.formatAmount(s.total_amount))+" XAF",1),e("td",Vn,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(s.status)])},l(o.getStatusName(s.status)),3)]),e("td",Bn,l(o.formatDateTime(s.created_at)),1),e("td",In,[e("button",{onClick:r=>o.viewOrderDetails(s),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,$n),s.status==="pending"?(i(),n("button",{key:0,onClick:r=>o.updateOrderStatus(s,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,Ln)):x("",!0),["pending","confirmed"].includes(s.status)?(i(),n("button",{key:1,onClick:r=>o.updateOrderStatus(s,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,qn)):x("",!0)])]))),128))])])])),o.pagination&&o.pagination.last_page>1?(i(),n("div",Nn,[e("div",Xn,[e("div",Hn," Affichage "+l(o.pagination.from)+" à "+l(o.pagination.to)+" sur "+l(o.pagination.total)+" achats ",1),e("div",Gn,[e("button",{onClick:t[14]||(t[14]=s=>o.changePage(o.pagination.current_page-1)),disabled:o.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Wn),e("span",Kn," Page "+l(o.pagination.current_page)+" sur "+l(o.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=s=>o.changePage(o.pagination.current_page+1)),disabled:o.pagination.current_page>=o.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Jn)])])])):x("",!0)]),o.showDetailsModal?(i(),n("div",Yn,[e("div",Qn,[e("div",Zn,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=s=>o.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o.selectedOrder?(i(),n("div",ei,[e("div",ti,[e("div",si,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",oi,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",li,"#"+l(o.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(o.selectedOrder.status)])},l(o.getStatusName(o.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",ri,l(o.formatDateTime(o.selectedOrder.created_at)),1)]),o.selectedOrder.confirmed_at?(i(),n("div",ai,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",ni,l(o.formatDateTime(o.selectedOrder.confirmed_at)),1)])):x("",!0)])])]),e("div",ii,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",di,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",ui,l(o.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",ci,l(o.selectedOrder.customer_email),1)]),o.selectedOrder.customer_phone?(i(),n("div",mi,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",gi,l(o.selectedOrder.customer_phone),1)])):x("",!0)])])])]),o.selectedOrder.event?(i(),n("div",pi,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",fi,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",xi,l(o.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",vi,l(o.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",yi,l(o.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",bi,l(o.selectedOrder.event.schedules?.[0]?o.formatDateTime(o.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):x("",!0),e("div",hi,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",wi,[e("table",_i,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",ki,[(i(!0),n(D,null,T(o.selectedOrder.items,s=>(i(),n("tr",{key:s.id},[e("td",Ci,l(s.ticket_type_name),1),e("td",Mi,l(o.formatAmount(s.unit_price))+" XAF",1),e("td",Si,l(s.quantity),1),e("td",Ai,l(o.formatAmount(s.total_price))+" XAF",1)]))),128))]),e("tfoot",ji,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",Pi,l(o.formatAmount(o.selectedOrder.total_amount))+" XAF",1)])])])])]),o.selectedOrder.tickets&&o.selectedOrder.tickets.length>0?(i(),n("div",Di,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",Ti,[(i(!0),n(D,null,T(o.selectedOrder.tickets,s=>(i(),n("div",{key:s.id,class:"border rounded-lg p-3 text-sm"},[e("div",Ui,[e("span",Fi,l(s.code),1),e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getTicketStatusClass(s.status)])},l(o.getTicketStatusName(s.status)),3)]),e("div",Oi,[e("p",null,l(s.ticketType?.name),1),s.used_at?(i(),n("p",zi,"Utilisé: "+l(o.formatDateTime(s.used_at)),1)):x("",!0)])]))),128))])])):x("",!0),e("div",Ei,[o.selectedOrder.status==="pending"?(i(),n("button",{key:0,onClick:t[17]||(t[17]=s=>o.updateOrderStatus(o.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):x("",!0),["pending","confirmed"].includes(o.selectedOrder.status)?(i(),n("button",{key:1,onClick:t[18]||(t[18]=s=>o.updateOrderStatus(o.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):x("",!0),e("button",{onClick:t[19]||(t[19]=s=>o.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):x("",!0)])])):x("",!0)])}const Vi=te(Ga,[["render",Ri],["__scopeId","data-v-e176f2ab"]]),C3=Object.freeze(Object.defineProperty({__proto__:null,default:Vi},Symbol.toStringTag,{value:"Module"})),Bi={name:"PaymentTracking",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(null),a=f([]),u=f([]),s=f(null),r=G({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),y=f([]),j=f([]),k=G({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let O=null;const U=de(()=>j.value.length===0?1:Math.max(...j.value.map(B=>B.volume))),A=async()=>{d.value=!0;try{const B=new URLSearchParams;Object.keys(k).forEach(z=>{k[z]&&k[z]!==""&&B.append(z,k[z])});const X=await(await fetch(`/api/v1/admin/payments?${B}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();X.success&&(a.value=X.data.payments.data,s.value={current_page:X.data.payments.current_page,last_page:X.data.payments.last_page,from:X.data.payments.from,to:X.data.payments.to,total:X.data.payments.total},Object.assign(r,X.data.stats),y.value=X.data.gateway_stats||[],j.value=X.data.daily_stats||[])}catch(B){console.error("Erreur chargement paiements:",B)}finally{d.value=!1}},q=async()=>{try{const K=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success&&(u.value=K.data.organizers.data||K.data.organizers)}catch(B){console.error("Erreur chargement organisateurs:",B)}},W=()=>{clearTimeout(O),O=setTimeout(()=>{k.page=1,A()},500)},S=B=>{B>=1&&B<=s.value.last_page&&(k.page=B,A())},P=()=>{Object.assign(k,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),A()},h=()=>{A()},b=async B=>{try{const X=await(await fetch(`/api/v1/admin/payments/${B.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();X.success&&(o.value=X.data.payment,c.value=!0)}catch(K){console.error("Erreur chargement détails paiement:",K)}},w=async B=>{try{const X=await(await fetch(`/api/v1/admin/payments/${B.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();X.success?(alert(`Statut mis à jour: ${Y(X.data.status)}`),A(),c.value&&(o.value.status=X.data.status)):alert(X.message||"Erreur lors de la vérification")}catch(K){console.error("Erreur vérification statut:",K),alert("Erreur technique")}},L=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const K=await(await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success?(alert(`Vérification terminée. ${K.data.updated_count} paiement(s) mis à jour.`),A()):alert(K.message||"Erreur lors de la vérification")}catch(B){console.error("Erreur vérification paiements en attente:",B),alert("Erreur technique")}finally{t.value=!1}}},m=async B=>{const K=prompt("Raison du remboursement:");if(K&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${v(B.amount)} XAF ?`))try{const z=await(await fetch(`/api/v1/admin/payments/${B.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:K})})).json();z.success?(alert("Remboursement initié avec succès"),A()):alert(z.message||"Erreur lors du remboursement")}catch(X){console.error("Erreur remboursement:",X),alert("Erreur technique")}},p=async()=>{try{const B=new URLSearchParams;Object.keys(k).forEach(X=>{k[X]&&k[X]!==""&&X!=="page"&&B.append(X,k[X])});const K=await fetch(`/api/v1/admin/payments/export?${B}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(K.ok){const X=await K.blob(),z=window.URL.createObjectURL(X),Z=document.createElement("a");Z.href=z,Z.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Z),Z.click(),window.URL.revokeObjectURL(z),document.body.removeChild(Z)}}catch(B){console.error("Erreur export:",B),alert("Erreur lors de l'export des données")}},v=B=>new Intl.NumberFormat("fr-FR").format(B),_=B=>new Date(B).toLocaleDateString("fr-FR"),$=B=>new Date(B).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),C=B=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[B]||B,V=B=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[B]||"bg-gray-100 text-gray-800",Y=B=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[B]||B,ue=B=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[B]||"bg-gray-100 text-gray-800";return re(()=>{A(),q()}),{loading:d,checkingPayments:t,showDetailsModal:c,selectedPayment:o,payments:a,organizers:u,pagination:s,stats:r,gatewayStats:y,dailyStats:j,filters:k,maxDailyVolume:U,loadPayments:A,loadOrganizers:q,debouncedSearch:W,changePage:S,resetFilters:P,refreshPayments:h,viewPaymentDetails:b,checkPaymentStatus:w,checkPendingPayments:L,processRefund:m,exportPayments:p,formatAmount:v,formatDate:_,formatDateTime:$,getGatewayName:C,getGatewayBadgeClass:V,getStatusName:Y,getStatusBadgeClass:ue}}},Ii={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},$i={class:"mb-8"},Li={class:"flex items-center justify-between"},qi={class:"flex space-x-3"},Ni={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},Xi={class:"bg-white rounded-lg shadow p-6"},Hi={class:"flex items-center"},Gi={class:"ml-4"},Wi={class:"text-2xl font-bold text-blue-600"},Ki={class:"bg-white rounded-lg shadow p-6"},Ji={class:"flex items-center"},Yi={class:"ml-4"},Qi={class:"text-2xl font-bold text-green-600"},Zi={class:"bg-white rounded-lg shadow p-6"},ed={class:"flex items-center"},td={class:"ml-4"},sd={class:"text-2xl font-bold text-yellow-600"},od={class:"bg-white rounded-lg shadow p-6"},ld={class:"flex items-center"},rd={class:"ml-4"},ad={class:"text-2xl font-bold text-red-600"},nd={class:"bg-white rounded-lg shadow p-6"},id={class:"flex items-center"},dd={class:"ml-4"},ud={class:"text-2xl font-bold text-purple-600"},cd={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},md={class:"bg-white rounded-lg shadow p-6"},gd={key:0,class:"text-center text-gray-500 py-8"},pd={key:1,class:"space-y-4"},fd={class:"flex items-center"},xd={class:"font-medium text-gray-900"},vd={class:"text-sm text-gray-600"},yd={class:"text-right"},bd={class:"font-bold text-gray-900"},hd={class:"text-sm text-gray-600"},wd={class:"bg-white rounded-lg shadow p-6"},_d={key:0,class:"text-center text-gray-500 py-8"},kd={key:1,class:"space-y-3"},Cd={class:"font-medium text-gray-900"},Md={class:"text-sm text-gray-600"},Sd={class:"text-right"},Ad={class:"font-bold text-gray-900"},jd={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},Pd={class:"bg-white rounded-lg shadow p-6 mb-8"},Dd={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Td=["value"],Ud={class:"flex justify-between items-center mt-4"},Fd={class:"flex space-x-3"},Od=["disabled"],zd={class:"bg-white rounded-lg shadow"},Ed={class:"p-6 border-b"},Rd={class:"flex justify-between items-center"},Vd={class:"text-sm text-gray-600"},Bd={key:0,class:"p-8 text-center"},Id={key:1,class:"p-8 text-center text-gray-500"},$d={key:2,class:"overflow-x-auto"},Ld={class:"w-full"},qd={class:"divide-y divide-gray-200"},Nd={class:"px-6 py-4 text-sm font-mono text-blue-600"},Xd=["onClick"],Hd={class:"px-6 py-4 text-sm text-gray-900"},Gd={class:"font-medium"},Wd={class:"text-gray-500"},Kd={class:"px-6 py-4 text-sm text-gray-900"},Jd={class:"font-medium"},Yd={class:"text-gray-500"},Qd={class:"px-6 py-4 text-sm font-medium text-gray-900"},Zd={class:"px-6 py-4 text-sm"},eu={class:"px-6 py-4 text-sm"},tu={class:"px-6 py-4 text-sm text-gray-500"},su={class:"px-6 py-4 text-sm space-x-2"},ou=["onClick"],lu=["onClick"],ru=["onClick"],au={key:3,class:"p-6 border-t"},nu={class:"flex justify-between items-center"},iu={class:"text-sm text-gray-700"},du={class:"flex space-x-2"},uu=["disabled"],cu={class:"px-3 py-1 text-sm text-gray-600"},mu=["disabled"],gu={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},pu={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},fu={class:"flex justify-between items-center mb-4"},xu={key:0,class:"space-y-6"},vu={class:"grid grid-cols-2 gap-6"},yu={class:"space-y-4"},bu={class:"space-y-2"},hu={class:"text-sm font-mono text-gray-900"},wu={class:"text-sm font-bold text-gray-900"},_u={class:"space-y-4"},ku={class:"space-y-2"},Cu={class:"text-sm text-gray-900"},Mu={key:0},Su={class:"text-sm text-gray-900"},Au={key:1},ju={class:"text-sm font-mono text-gray-900"},Pu={key:0,class:"border-t pt-6"},Du={class:"grid grid-cols-2 gap-4"},Tu={class:"text-sm font-mono text-gray-900"},Uu={class:"text-sm text-gray-900"},Fu={class:"text-sm text-gray-900"},Ou={class:"text-sm text-gray-900"},zu={key:1,class:"border-t pt-6"},Eu={class:"bg-gray-50 p-4 rounded-lg"},Ru={class:"text-xs text-gray-700 whitespace-pre-wrap"},Vu={class:"border-t pt-6 flex justify-end space-x-3"};function Bu(d,t,c,o,a,u){return i(),n("div",Ii,[e("div",$i,[e("div",Li,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",qi,[e("button",{onClick:t[0]||(t[0]=(...s)=>o.refreshPayments&&o.refreshPayments(...s)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),se(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...s)=>o.exportPayments&&o.exportPayments(...s)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),se(" Exporter ",-1)])])])])]),e("div",Ni,[e("div",Xi,[e("div",Hi,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Gi,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",Wi,l(o.stats.total_payments||0),1)])])]),e("div",Ki,[e("div",Ji,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Yi,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Qi,l(o.stats.successful_payments||0),1)])])]),e("div",Zi,[e("div",ed,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",td,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",sd,l(o.stats.pending_payments||0),1)])])]),e("div",od,[e("div",ld,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",rd,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",ad,l(o.stats.failed_payments||0),1)])])]),e("div",nd,[e("div",id,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",dd,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",ud,l(o.formatAmount(o.stats.total_volume||0))+" XAF",1)])])])]),e("div",cd,[e("div",md,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),o.gatewayStats.length===0?(i(),n("div",gd," Aucune donnée disponible ")):(i(),n("div",pd,[(i(!0),n(D,null,T(o.gatewayStats,s=>(i(),n("div",{key:s.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",fd,[e("div",{class:I(["p-2 rounded-lg mr-3",o.getGatewayBadgeClass(s.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",xd,l(o.getGatewayName(s.gateway)),1),e("p",vd,l(s.count)+" paiement(s)",1)])]),e("div",yd,[e("p",bd,l(o.formatAmount(s.volume))+" XAF",1),e("p",hd,l(Math.round(s.count/o.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",wd,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),o.dailyStats.length===0?(i(),n("div",_d," Aucune donnée disponible ")):(i(),n("div",kd,[(i(!0),n(D,null,T(o.dailyStats,s=>(i(),n("div",{key:s.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Cd,l(o.formatDate(s.date)),1),e("p",Md,l(s.count)+" paiement(s)",1)]),e("div",Sd,[e("p",Ad,l(o.formatAmount(s.volume))+" XAF",1),e("div",jd,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ie(`width: ${Math.min(s.volume/o.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",Pd,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Dd,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.filters.search=s),onInput:t[3]||(t[3]=(...s)=>o.debouncedSearch&&o.debouncedSearch(...s)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.filters.status=s),onChange:t[5]||(t[5]=(...s)=>o.loadPayments&&o.loadPayments(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[ae('<option value="" data-v-fc273c00>Tous les statuts</option><option value="success" data-v-fc273c00>Réussi</option><option value="pending" data-v-fc273c00>En attente</option><option value="failed" data-v-fc273c00>Échoué</option><option value="cancelled" data-v-fc273c00>Annulé</option>',5)])],544),[[R,o.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.filters.gateway=s),onChange:t[7]||(t[7]=(...s)=>o.loadPayments&&o.loadPayments(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[R,o.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.filters.organizer_id=s),onChange:t[9]||(t[9]=(...s)=>o.loadPayments&&o.loadPayments(...s)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(i(!0),n(D,null,T(o.organizers,s=>(i(),n("option",{key:s.id,value:s.id},l(s.name),9,Td))),128))],544),[[R,o.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.filters.date_from=s),onChange:t[11]||(t[11]=(...s)=>o.loadPayments&&o.loadPayments(...s)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.filters.date_to=s),onChange:t[13]||(t[13]=(...s)=>o.loadPayments&&o.loadPayments(...s)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,o.filters.date_to]])])]),e("div",Ud,[e("button",{onClick:t[14]||(t[14]=(...s)=>o.resetFilters&&o.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Fd,[e("button",{onClick:t[15]||(t[15]=(...s)=>o.checkPendingPayments&&o.checkPendingPayments(...s)),disabled:o.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},l(o.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,Od)])])]),e("div",zd,[e("div",Ed,[e("div",Rd,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",Vd,l(o.pagination?`${o.pagination.total} paiement(s) trouvé(s)`:""),1)])]),o.loading?(i(),n("div",Bd,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.payments.length===0?(i(),n("div",Id," Aucun paiement trouvé ")):(i(),n("div",$d,[e("table",Ld,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",qd,[(i(!0),n(D,null,T(o.payments,s=>(i(),n("tr",{key:s.id},[e("td",Nd,[e("button",{onClick:r=>o.viewPaymentDetails(s),class:"hover:text-blue-800"}," #"+l(s.reference),9,Xd)]),e("td",Hd,[e("div",null,[e("div",Gd,"#"+l(s.order?.reference||"-"),1),e("div",Wd,l(s.order?.event?.title||"-"),1)])]),e("td",Kd,[e("div",null,[e("div",Jd,l(s.order?.customer_name||"-"),1),e("div",Yd,l(s.order?.customer_email||"-"),1)])]),e("td",Qd,l(o.formatAmount(s.amount))+" XAF",1),e("td",Zd,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getGatewayBadgeClass(s.gateway)])},l(o.getGatewayName(s.gateway)),3)]),e("td",eu,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(s.status)])},l(o.getStatusName(s.status)),3)]),e("td",tu,l(o.formatDateTime(s.created_at)),1),e("td",su,[e("button",{onClick:r=>o.viewPaymentDetails(s),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,ou),s.status==="pending"?(i(),n("button",{key:0,onClick:r=>o.checkPaymentStatus(s),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,lu)):x("",!0),s.status==="success"?(i(),n("button",{key:1,onClick:r=>o.processRefund(s),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,ru)):x("",!0)])]))),128))])])])),o.pagination&&o.pagination.last_page>1?(i(),n("div",au,[e("div",nu,[e("div",iu," Affichage "+l(o.pagination.from)+" à "+l(o.pagination.to)+" sur "+l(o.pagination.total)+" paiements ",1),e("div",du,[e("button",{onClick:t[16]||(t[16]=s=>o.changePage(o.pagination.current_page-1)),disabled:o.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,uu),e("span",cu," Page "+l(o.pagination.current_page)+" sur "+l(o.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=s=>o.changePage(o.pagination.current_page+1)),disabled:o.pagination.current_page>=o.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,mu)])])])):x("",!0)]),o.showDetailsModal?(i(),n("div",gu,[e("div",pu,[e("div",fu,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=s=>o.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),o.selectedPayment?(i(),n("div",xu,[e("div",vu,[e("div",yu,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",bu,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",hu,"#"+l(o.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",wu,l(o.formatAmount(o.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getGatewayBadgeClass(o.selectedPayment.gateway)])},l(o.getGatewayName(o.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(o.selectedPayment.status)])},l(o.getStatusName(o.selectedPayment.status)),3)])])])]),e("div",_u,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",ku,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",Cu,l(o.formatDateTime(o.selectedPayment.created_at)),1)]),o.selectedPayment.processed_at?(i(),n("div",Mu,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",Su,l(o.formatDateTime(o.selectedPayment.processed_at)),1)])):x("",!0),o.selectedPayment.gateway_transaction_id?(i(),n("div",Au,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",ju,l(o.selectedPayment.gateway_transaction_id),1)])):x("",!0)])])])]),o.selectedPayment.order?(i(),n("div",Pu,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",Du,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",Tu,l(o.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",Uu,l(o.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",Fu,l(o.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Ou,l(o.selectedPayment.order.customer_email),1)])])])):x("",!0),o.selectedPayment.gateway_response?(i(),n("div",zu,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",Eu,[e("pre",Ru,l(JSON.stringify(o.selectedPayment.gateway_response,null,2)),1)])])):x("",!0),e("div",Vu,[o.selectedPayment.status==="pending"?(i(),n("button",{key:0,onClick:t[19]||(t[19]=s=>o.checkPaymentStatus(o.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):x("",!0),o.selectedPayment.status==="success"?(i(),n("button",{key:1,onClick:t[20]||(t[20]=s=>o.processRefund(o.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):x("",!0),e("button",{onClick:t[21]||(t[21]=s=>o.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):x("",!0)])])):x("",!0)])}const Iu=te(Bi,[["render",Bu],["__scopeId","data-v-fc273c00"]]),M3=Object.freeze(Object.defineProperty({__proto__:null,default:Iu},Symbol.toStringTag,{value:"Module"})),$u={name:"PayoutDashboard",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(!1),a=f(!1),u=f([]),s=f([]),r=f([]),y=G({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),j=G({status:"",gateway:"",is_automatic:""}),k=G({organizer_id:"",gateway:"",amount:"",phone_number:""}),O=async()=>{d.value=!0;try{const C=new URLSearchParams;j.status&&C.append("status",j.status),j.gateway&&C.append("gateway",j.gateway),j.is_automatic&&C.append("is_automatic",j.is_automatic);const Y=await(await fetch(`/api/v1/admin/payouts?${C}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();Y.success&&(u.value=Y.data.payouts)}catch(C){console.error("Erreur chargement payouts:",C)}finally{d.value=!1}},U=async()=>{try{const V=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&Object.assign(y,V.data.stats)}catch(C){console.error("Erreur chargement stats:",C)}},A=async()=>{c.value=!0;try{const V=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(r.value=V.data.balances)}catch(C){console.error("Erreur chargement solde SHAP:",C)}finally{c.value=!1}},q=async()=>{t.value=!0;try{const V=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(alert(`Vérification terminée: ${V.data.results.length} payouts vérifiés`),O())}catch(C){console.error("Erreur vérification batch:",C)}finally{t.value=!1}},W=async C=>{C.checking=!0;try{const Y=await(await fetch(`/api/v1/admin/payouts/${C.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();Y.success&&(alert(`Statut: ${Y.data.current_status}`),O())}catch(V){console.error("Erreur vérification payout:",V)}finally{C.checking=!1}},S=()=>{o.value=!0,P()},P=async()=>{try{const V=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(s.value=V.data.organizers)}catch(C){console.error("Erreur chargement organisateurs:",C)}},h=async()=>{a.value=!0;try{const V=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(k)})).json();V.success?(alert("Payout créé avec succès"),o.value=!1,Object.assign(k,{organizer_id:"",gateway:"",amount:"",phone_number:""}),O(),U()):alert(V.message||"Erreur lors de la création")}catch(C){console.error("Erreur création payout:",C),alert("Erreur technique")}finally{a.value=!1}},b=()=>{Object.assign(j,{status:"",gateway:"",is_automatic:""}),O()},w=C=>{alert(`Détails du payout #${C.id}
Référence: ${C.reference}
Montant: ${L(C.amount)} XAF`)},L=C=>new Intl.NumberFormat("fr-FR").format(C),m=C=>new Date(C).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),p=C=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[C]||C,v=C=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[C]||"bg-gray-100 text-gray-800",_=C=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[C]||C,$=C=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[C]||"bg-gray-100 text-gray-800";return re(()=>{O(),U()}),{loading:d,checkingAll:t,loadingShapBalance:c,showCreateModal:o,creatingPayout:a,payouts:u,organizers:s,shapBalance:r,stats:y,filters:j,newPayout:k,loadPayouts:O,loadStats:U,loadShapBalance:A,checkAllPending:q,checkPayoutStatus:W,openCreatePayoutModal:S,createPayout:h,resetFilters:b,viewPayoutDetails:w,formatAmount:L,formatDate:m,getStatusName:p,getStatusBadgeClass:v,getGatewayName:_,getGatewayBadgeClass:$}}},Lu={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},qu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Nu={class:"bg-white rounded-lg shadow p-6"},Xu={class:"flex items-center"},Hu={class:"ml-4"},Gu={class:"text-2xl font-bold text-gray-900"},Wu={class:"bg-white rounded-lg shadow p-6"},Ku={class:"flex items-center"},Ju={class:"ml-4"},Yu={class:"text-2xl font-bold text-green-600"},Qu={class:"bg-white rounded-lg shadow p-6"},Zu={class:"flex items-center"},ec={class:"ml-4"},tc={class:"text-2xl font-bold text-yellow-600"},sc={class:"bg-white rounded-lg shadow p-6"},oc={class:"flex items-center"},lc={class:"ml-4"},rc={class:"text-2xl font-bold text-purple-600"},ac={class:"flex flex-wrap gap-4 mb-8"},nc=["disabled"],ic=["disabled"],dc={key:0,class:"mb-8"},uc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cc={class:"font-semibold text-gray-900"},mc={class:"text-2xl font-bold text-green-600"},gc={class:"text-sm text-gray-500"},pc={class:"bg-white rounded-lg shadow p-6 mb-8"},fc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},xc={class:"flex items-end"},vc={class:"bg-white rounded-lg shadow"},yc={key:0,class:"p-8 text-center"},bc={key:1,class:"p-8 text-center text-gray-500"},hc={key:2,class:"overflow-x-auto"},wc={class:"w-full"},_c={class:"divide-y divide-gray-200"},kc={class:"px-6 py-4 text-sm text-gray-900"},Cc={class:"px-6 py-4 text-sm text-gray-900"},Mc={class:"px-6 py-4 text-sm font-medium text-gray-900"},Sc={class:"px-6 py-4 text-sm text-gray-900"},Ac={class:"px-6 py-4 text-sm"},jc={class:"px-6 py-4 text-sm text-gray-900"},Pc={class:"px-6 py-4 text-sm text-gray-500"},Dc={class:"px-6 py-4 text-sm space-x-2"},Tc=["onClick","disabled"],Uc=["onClick"],Fc={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Oc={class:"bg-white rounded-lg p-6 w-full max-w-md"},zc={class:"space-y-4"},Ec=["value"],Rc={class:"flex justify-end space-x-3 mt-6"},Vc=["disabled"];function Bc(d,t,c,o,a,u){return i(),n("div",Lu,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",qu,[e("div",Nu,[e("div",Xu,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Hu,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",Gu,l(o.stats.total_payouts||0),1)])])]),e("div",Wu,[e("div",Ku,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",Ju,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Yu,l(o.stats.successful_payouts||0),1)])])]),e("div",Qu,[e("div",Zu,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ec,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",tc,l(o.stats.pending_payouts||0),1)])])]),e("div",sc,[e("div",oc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",lc,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",rc,l(o.stats.automatic_payouts||0),1)])])])]),e("div",ac,[e("button",{onClick:t[0]||(t[0]=(...s)=>o.openCreatePayoutModal&&o.openCreatePayoutModal(...s)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...s)=>o.checkAllPending&&o.checkAllPending(...s)),disabled:o.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),se(" "+l(o.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,nc),e("button",{onClick:t[2]||(t[2]=(...s)=>o.loadShapBalance&&o.loadShapBalance(...s)),disabled:o.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),se(" "+l(o.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,ic)]),o.shapBalance.length>0?(i(),n("div",dc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",uc,[(i(!0),n(D,null,T(o.shapBalance,s=>(i(),n("div",{key:s.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",cc,l(s.payment_system_displayed_name),1),e("p",mc,l(o.formatAmount(s.amount))+" XAF",1),e("p",gc,"Dernière MAJ: "+l(s.last_updated),1)]))),128))])])):x("",!0),e("div",pc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",fc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.filters.status=s),onChange:t[4]||(t[4]=(...s)=>o.loadPayouts&&o.loadPayouts(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[ae('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[R,o.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.filters.gateway=s),onChange:t[6]||(t[6]=(...s)=>o.loadPayouts&&o.loadPayouts(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[R,o.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.filters.is_automatic=s),onChange:t[8]||(t[8]=(...s)=>o.loadPayouts&&o.loadPayouts(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[R,o.filters.is_automatic]])]),e("div",xc,[e("button",{onClick:t[9]||(t[9]=(...s)=>o.resetFilters&&o.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",vc,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),o.loading?(i(),n("div",yc,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.payouts.length===0?(i(),n("div",bc," Aucun payout trouvé ")):(i(),n("div",hc,[e("table",wc,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",_c,[(i(!0),n(D,null,T(o.payouts,s=>(i(),n("tr",{key:s.id},[e("td",kc,"#"+l(s.id),1),e("td",Cc,l(s.organizer?.name),1),e("td",Mc,l(o.formatAmount(s.amount))+" XAF",1),e("td",Sc,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getGatewayBadgeClass(s.gateway)])},l(o.getGatewayName(s.gateway)),3)]),e("td",Ac,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getStatusBadgeClass(s.status)])},l(o.getStatusName(s.status)),3)]),e("td",jc,[e("span",{class:I(["inline-flex px-2 py-1 text-xs rounded-full",s.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},l(s.is_automatic?"Auto":"Manuel"),3)]),e("td",Pc,l(o.formatDate(s.created_at)),1),e("td",Dc,[e("button",{onClick:r=>o.checkPayoutStatus(s),disabled:s.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},l(s.checking?"Vérif...":"Vérifier"),9,Tc),e("button",{onClick:r=>o.viewPayoutDetails(s),class:"text-green-600 hover:text-green-900"}," Détails ",8,Uc)])]))),128))])])]))]),o.showCreateModal?(i(),n("div",Fc,[e("div",Oc,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=le((...s)=>o.createPayout&&o.createPayout(...s),["prevent"]))},[e("div",zc,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),g(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.newPayout.organizer_id=s),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(i(!0),n(D,null,T(o.organizers,s=>(i(),n("option",{key:s.id,value:s.id},l(s.name),9,Ec))),128))],512),[[R,o.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.newPayout.gateway=s),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[R,o.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),g(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.newPayout.amount=s),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),g(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.newPayout.phone_number=s),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.newPayout.phone_number]])])]),e("div",Rc,[e("button",{type:"button",onClick:t[14]||(t[14]=s=>o.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:o.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(o.creatingPayout?"Création...":"Créer le Payout"),9,Vc)])],32)])])):x("",!0)])}const Ic=te($u,[["render",Bc],["__scopeId","data-v-e96f5ab8"]]),S3=Object.freeze(Object.defineProperty({__proto__:null,default:Ic},Symbol.toStringTag,{value:"Module"})),$c={name:"OrganizerBalanceConfig",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(null),a=f([]),u=G({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),s=G({gateway:"",auto_payout_enabled:""}),r=G({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),y=async()=>{d.value=!0;try{const S=new URLSearchParams;s.gateway&&S.append("gateway",s.gateway),s.auto_payout_enabled&&S.append("auto_payout_enabled",s.auto_payout_enabled);const P=await fetch(`/api/v1/admin/payouts/balances?${S}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"}});if(P.ok){const h=await P.json();h.success&&(a.value=h.data.balances,h.data.stats&&Object.assign(u,h.data.stats))}else j()}catch{console.log("API non disponible, utilisation des données simulées"),j()}finally{d.value=!1}},j=()=>{a.value=[{organizer_id:1,organizer:{name:"EventMaster Pro"},gateway:"airtelmoney",balance:25e4,auto_payout_enabled:!0,auto_payout_threshold:1e5,phone_number:"066123456"},{organizer_id:2,organizer:{name:"Gabon Events"},gateway:"moovmoney",balance:18e4,auto_payout_enabled:!1,auto_payout_threshold:5e4,phone_number:"065987654"},{organizer_id:3,organizer:{name:"Culture & Spectacles"},gateway:"airtelmoney",balance:42e4,auto_payout_enabled:!0,auto_payout_threshold:2e5,phone_number:"067789012"}],Object.assign(u,{total_organizers:15,auto_payout_enabled:8,total_balance:85e4,active_configs:12})},k=S=>{o.value=S,Object.assign(r,{auto_payout_enabled:S.auto_payout_enabled,auto_payout_threshold:S.auto_payout_threshold,payout_phone_number:S.phone_number||""}),t.value=!0},O=async()=>{c.value=!0;try{const P=await(await fetch(`/api/v1/admin/organizers/${o.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({gateway:o.value.gateway,auto_payout_enabled:r.auto_payout_enabled,auto_payout_threshold:r.auto_payout_threshold,payout_phone_number:r.payout_phone_number})})).json();P.success?(alert("Configuration mise à jour avec succès"),t.value=!1,y()):alert(P.message||"Erreur lors de la mise à jour")}catch(S){console.error("Erreur sauvegarde config:",S),alert("Erreur technique")}finally{c.value=!1}},U=()=>{Object.assign(s,{gateway:"",auto_payout_enabled:""}),y()},A=S=>new Intl.NumberFormat("fr-FR").format(S),q=S=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[S]||S,W=S=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[S]||"bg-gray-100 text-gray-800";return re(()=>{y()}),{loading:d,showConfigModal:t,savingConfig:c,editingBalance:o,balances:a,stats:u,filters:s,configForm:r,loadBalances:y,editBalance:k,saveConfiguration:O,resetFilters:U,formatAmount:A,getGatewayName:q,getGatewayBadgeClass:W}}},Lc={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},qc={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Nc={class:"bg-white rounded-lg shadow p-6"},Xc={class:"flex items-center"},Hc={class:"ml-4"},Gc={class:"text-2xl font-bold text-gray-900"},Wc={class:"bg-white rounded-lg shadow p-6"},Kc={class:"flex items-center"},Jc={class:"ml-4"},Yc={class:"text-2xl font-bold text-green-600"},Qc={class:"bg-white rounded-lg shadow p-6"},Zc={class:"flex items-center"},em={class:"ml-4"},tm={class:"text-2xl font-bold text-yellow-600"},sm={class:"bg-white rounded-lg shadow p-6"},om={class:"flex items-center"},lm={class:"ml-4"},rm={class:"text-2xl font-bold text-purple-600"},am={class:"bg-white rounded-lg shadow p-6 mb-8"},nm={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},im={class:"flex items-end"},dm={class:"bg-white rounded-lg shadow"},um={key:0,class:"p-8 text-center"},cm={key:1,class:"p-8 text-center text-gray-500"},mm={key:2,class:"overflow-x-auto"},gm={class:"w-full"},pm={class:"divide-y divide-gray-200"},fm={class:"px-6 py-4 text-sm font-medium text-gray-900"},xm={class:"px-6 py-4 text-sm text-gray-900"},vm={class:"px-6 py-4 text-sm font-medium text-gray-900"},ym={class:"px-6 py-4 text-sm"},bm={class:"px-6 py-4 text-sm text-gray-900"},hm={class:"px-6 py-4 text-sm text-gray-900"},wm={class:"px-6 py-4 text-sm space-x-2"},_m=["onClick"],km={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Cm={class:"bg-white rounded-lg p-6 w-full max-w-md"},Mm={class:"text-lg font-bold mb-4"},Sm={class:"space-y-4"},Am=["value"],jm=["value"],Pm={class:"flex items-center space-x-2"},Dm={key:0},Tm={class:"flex justify-end space-x-3 mt-6"},Um=["disabled"];function Fm(d,t,c,o,a,u){return i(),n("div",Lc,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",qc,[e("div",Nc,[e("div",Xc,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",Hc,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",Gc,l(o.stats.total_organizers||0),1)])])]),e("div",Wc,[e("div",Kc,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Jc,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",Yc,l(o.stats.auto_payout_enabled||0),1)])])]),e("div",Qc,[e("div",Zc,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",em,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",tm,l(o.formatAmount(o.stats.total_balance||0))+" XAF",1)])])]),e("div",sm,[e("div",om,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",lm,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",rm,l(o.stats.active_configs||0),1)])])])]),e("div",am,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",nm,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.filters.gateway=s),onChange:t[1]||(t[1]=(...s)=>o.loadBalances&&o.loadBalances(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[R,o.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.filters.auto_payout_enabled=s),onChange:t[3]||(t[3]=(...s)=>o.loadBalances&&o.loadBalances(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[R,o.filters.auto_payout_enabled]])]),e("div",im,[e("button",{onClick:t[4]||(t[4]=(...s)=>o.resetFilters&&o.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",dm,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),o.loading?(i(),n("div",um,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):o.balances.length===0?(i(),n("div",cm," Aucune balance trouvée ")):(i(),n("div",mm,[e("table",gm,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",pm,[(i(!0),n(D,null,T(o.balances,s=>(i(),n("tr",{key:`${s.organizer_id}-${s.gateway}`},[e("td",fm,l(s.organizer?.name),1),e("td",xm,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.getGatewayBadgeClass(s.gateway)])},l(o.getGatewayName(s.gateway)),3)]),e("td",vm,l(o.formatAmount(s.balance))+" XAF",1),e("td",ym,[e("span",{class:I(["inline-flex px-2 py-1 text-xs rounded-full",s.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(s.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",bm,l(o.formatAmount(s.auto_payout_threshold))+" XAF",1),e("td",hm,l(s.phone_number||"-"),1),e("td",wm,[e("button",{onClick:r=>o.editBalance(s),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,_m)])]))),128))])])]))]),o.showConfigModal?(i(),n("div",km,[e("div",Cm,[e("h3",Mm,"Configuration Payout - "+l(o.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=le((...s)=>o.saveConfiguration&&o.saveConfiguration(...s),["prevent"]))},[e("div",Sm,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:o.getGatewayName(o.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Am)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:o.formatAmount(o.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,jm)]),e("div",null,[e("label",Pm,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=s=>o.configForm.auto_payout_enabled=s),class:"rounded border-gray-300"},null,512),[[oe,o.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),o.configForm.auto_payout_enabled?(i(),n("div",Dm,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.configForm.auto_payout_threshold=s),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):x("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),g(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.configForm.payout_phone_number=s),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,o.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",Tm,[e("button",{type:"button",onClick:t[8]||(t[8]=s=>o.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:o.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(o.savingConfig?"Enregistrement...":"Enregistrer"),9,Um)])],32)])])):x("",!0)])}const Om=te($c,[["render",Fm],["__scopeId","data-v-f002e652"]]),A3=Object.freeze(Object.defineProperty({__proto__:null,default:Om},Symbol.toStringTag,{value:"Module"})),zm={name:"Reports",setup(){const d=f(!1),t=f(!1),c=f([]),o=f(""),a=G({start:new Date().toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),u=G({total_revenue:0,total_tickets:0,active_events:0,active_users:0}),s=async()=>{d.value=!0;try{const h=new URLSearchParams({start_date:a.start,end_date:a.end}),b=await fetch(`/api/v1/admin/reports?${h}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(b.ok){const w=await b.json();w.success&&(c.value=w.data.reports,Object.assign(u,w.data.stats))}else r()}catch{console.log("API non disponible, utilisation des données simulées"),r()}finally{d.value=!1}},r=()=>{c.value=[{id:1,type:"financial",period:"Septembre 2025",created_at:new Date,file_size:"2.3 MB",format:"PDF",status:"ready",download_url:"/reports/financial-sep-2025.pdf"},{id:2,type:"events",period:"Août 2025",created_at:new Date(Date.now()-864e5),file_size:"1.8 MB",format:"Excel",status:"ready",download_url:"/reports/events-aug-2025.xlsx"},{id:3,type:"users",period:"Juillet 2025",created_at:new Date(Date.now()-1728e5),file_size:"980 KB",format:"PDF",status:"ready",download_url:"/reports/users-jul-2025.pdf"}],Object.assign(u,{total_revenue:125e5,total_tickets:3420,active_events:28,active_users:1875})},y=async h=>{t.value=!0;try{const b=await fetch("/api/v1/admin/reports/generate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({type:h,start_date:a.start,end_date:a.end})});if(b.ok){const w=await b.json();w.success&&c.value.unshift(w.data.report)}else{const w={id:Date.now(),type:h,period:`${new Date(a.start).toLocaleDateString("fr-FR")} - ${new Date(a.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${h}-${Date.now()}.pdf`};c.value.unshift(w)}}catch{console.log("API non disponible, génération simulée");const w={id:Date.now(),type:h,period:`${new Date(a.start).toLocaleDateString("fr-FR")} - ${new Date(a.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${h}-${Date.now()}.pdf`};c.value.unshift(w)}finally{t.value=!1}},j=async h=>{try{const b=await fetch(`/api/v1/admin/reports/${h.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(b.ok){const w=await b.blob(),L=window.URL.createObjectURL(w),m=document.createElement("a");m.href=L,m.download=`rapport-${h.type}-${h.id}.pdf`,document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(L),document.body.removeChild(m)}else alert("Téléchargement simulé du rapport: "+h.type)}catch{alert("Téléchargement simulé du rapport: "+h.type)}},k=async h=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce rapport ?"))try{(await fetch(`/api/v1/admin/reports/${h.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?c.value=c.value.filter(w=>w.id!==h.id):c.value=c.value.filter(w=>w.id!==h.id)}catch{c.value=c.value.filter(w=>w.id!==h.id)}},O=async()=>{if(confirm("Êtes-vous sûr de vouloir vider tout l'historique des rapports ?"))try{(await fetch("/api/v1/admin/reports/clear",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?c.value=[]:c.value=[]}catch{c.value=[]}},U=()=>{const h=new Date,b={today:{start:h,end:h},week:{start:new Date(h.getTime()-10080*60*1e3),end:h},month:{start:new Date(h.getFullYear(),h.getMonth(),1),end:h},quarter:{start:new Date(h.getFullYear(),Math.floor(h.getMonth()/3)*3,1),end:h},year:{start:new Date(h.getFullYear(),0,1),end:h}};if(b[o.value]){const w=b[o.value];a.start=w.start.toISOString().split("T")[0],a.end=w.end.toISOString().split("T")[0]}},A=()=>{s()},q=h=>new Intl.NumberFormat("fr-FR").format(h),W=h=>new Date(h).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=h=>({financial:"Rapport Financier",events:"Rapport Événements",users:"Rapport Utilisateurs",performance:"Rapport Performance"})[h]||h,P=h=>({financial:"bg-blue-100 text-blue-600",events:"bg-yellow-100 text-yellow-600",users:"bg-green-100 text-green-600",performance:"bg-purple-100 text-purple-600"})[h]||"bg-gray-100 text-gray-600";return re(()=>{const h=new Date,b=new Date(h.getFullYear(),h.getMonth(),1);a.start=b.toISOString().split("T")[0],a.end=h.toISOString().split("T")[0],s()}),{loading:d,generating:t,reports:c,selectedPeriod:o,dateRange:a,stats:u,loadReports:s,generateReport:y,downloadReport:j,deleteReport:k,clearHistory:O,setPredefinedPeriod:U,refreshReports:A,formatAmount:q,formatDateTime:W,getReportTypeName:S,getReportTypeClass:P}}},Em={class:"reports-management p-6"},Rm={class:"bg-white rounded-lg shadow p-4 mb-6"},Vm={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Bm={class:"flex items-end"},Im={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},$m={class:"bg-white rounded-lg shadow p-6 text-center"},Lm={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},qm={class:"w-8 h-8",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Nm=["disabled"],Xm={class:"bg-white rounded-lg shadow p-6 text-center"},Hm={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Gm={class:"w-8 h-8",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wm=["disabled"],Km={class:"bg-white rounded-lg shadow p-6 text-center"},Jm=["disabled"],Ym={class:"bg-white rounded-lg shadow p-6 text-center"},Qm=["disabled"],Zm={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},e0={class:"bg-white rounded-lg shadow p-4"},t0={class:"flex items-center"},s0={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},o0={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l0={class:"ml-4"},r0={class:"text-xl font-bold",style:{color:"#272d63"}},a0={class:"bg-white rounded-lg shadow p-4"},n0={class:"flex items-center"},i0={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},d0={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},u0={class:"ml-4"},c0={class:"text-xl font-bold",style:{color:"#fab511"}},m0={class:"bg-white rounded-lg shadow p-4"},g0={class:"flex items-center"},p0={class:"ml-4"},f0={class:"text-xl font-bold text-green-600"},x0={class:"bg-white rounded-lg shadow p-4"},v0={class:"flex items-center"},y0={class:"ml-4"},b0={class:"text-xl font-bold text-purple-600"},h0={class:"bg-white rounded-lg shadow overflow-hidden"},w0={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},_0={key:0,class:"p-8 text-center"},k0={key:1,class:"p-8 text-center"},C0={key:2,class:"overflow-x-auto"},M0={class:"w-full"},S0={class:"divide-y divide-gray-200"},A0={class:"px-6 py-4"},j0={class:"flex items-center"},P0={class:"text-sm font-medium text-gray-900"},D0={class:"text-sm text-gray-500"},T0={class:"px-6 py-4 text-sm text-gray-900"},U0={class:"px-6 py-4 text-sm text-gray-500"},F0={class:"px-6 py-4 text-sm text-gray-500"},O0={class:"px-6 py-4"},z0={class:"px-6 py-4"},E0={class:"flex space-x-2"},R0=["onClick"],V0=["onClick"];function B0(d,t,c,o,a,u){return i(),n("div",Em,[t[43]||(t[43]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Rapports et Analyses"),e("p",{class:"text-gray-600"},"Générez et consultez les rapports de performance de la plateforme")],-1)),e("div",Rm,[e("div",Vm,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),g(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=s=>o.dateRange.start=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.dateRange.start]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),g(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>o.dateRange.end=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.dateRange.end]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période prédéfinie",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.selectedPeriod=s),onChange:t[3]||(t[3]=(...s)=>o.setPredefinedPeriod&&o.setPredefinedPeriod(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[20]||(t[20]=[ae('<option value="" data-v-04ad1860>Personnalisée</option><option value="today" data-v-04ad1860>Aujourd&#39;hui</option><option value="week" data-v-04ad1860>Cette semaine</option><option value="month" data-v-04ad1860>Ce mois</option><option value="quarter" data-v-04ad1860>Ce trimestre</option><option value="year" data-v-04ad1860>Cette année</option>',6)])],544),[[R,o.selectedPeriod]])]),e("div",Bm,[e("button",{onClick:t[4]||(t[4]=(...s)=>o.refreshReports&&o.refreshReports(...s)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[5]||(t[5]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[6]||(t[6]=s=>s.currentTarget.style.backgroundColor="#fab511")}," Actualiser ",32)])])]),e("div",Im,[e("div",$m,[e("div",Lm,[(i(),n("svg",qm,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Financier",-1)),t[24]||(t[24]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, paiements et remboursements",-1)),e("button",{onClick:t[7]||(t[7]=s=>o.generateReport("financial")),disabled:o.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[8]||(t[8]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[9]||(t[9]=s=>s.currentTarget.style.backgroundColor="#272d63")},l(o.generating?"Génération...":"Générer"),41,Nm)]),e("div",Xm,[e("div",Hm,[(i(),n("svg",Gm,[...t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t[26]||(t[26]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Événements",-1)),t[27]||(t[27]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes de tickets et tendances",-1)),e("button",{onClick:t[10]||(t[10]=s=>o.generateReport("events")),disabled:o.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[11]||(t[11]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[12]||(t[12]=s=>s.currentTarget.style.backgroundColor="#fab511")},l(o.generating?"Génération...":"Générer"),41,Wm)]),e("div",Km,[t[28]||(t[28]=ae('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-green-100" data-v-04ad1860><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Utilisateurs</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Croissance, activité et segments d&#39;utilisateurs</p>',3)),e("button",{onClick:t[13]||(t[13]=s=>o.generateReport("users")),disabled:o.generating,class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},l(o.generating?"Génération...":"Générer"),9,Jm)]),e("div",Ym,[t[29]||(t[29]=ae('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-purple-100" data-v-04ad1860><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Performance</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Métriques de performance de la plateforme</p>',3)),e("button",{onClick:t[14]||(t[14]=s=>o.generateReport("performance")),disabled:o.generating,class:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},l(o.generating?"Génération...":"Générer"),9,Qm)])]),e("div",Zm,[e("div",e0,[e("div",t0,[e("div",s0,[(i(),n("svg",o0,[...t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",l0,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",r0,l(o.formatAmount(o.stats.total_revenue))+" XAF",1)])])]),e("div",a0,[e("div",n0,[e("div",i0,[(i(),n("svg",d0,[...t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])]))]),e("div",u0,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",c0,l(o.stats.total_tickets),1)])])]),e("div",m0,[e("div",g0,[t[35]||(t[35]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",p0,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Événements Actifs",-1)),e("p",f0,l(o.stats.active_events),1)])])]),e("div",x0,[e("div",v0,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",y0,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Utilisateurs Actifs",-1)),e("p",b0,l(o.stats.active_users),1)])])])]),e("div",h0,[e("div",w0,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold",style:{color:"#272d63"}},"Historique des Rapports",-1)),e("button",{onClick:t[15]||(t[15]=(...s)=>o.clearHistory&&o.clearHistory(...s)),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Vider l'historique ")]),o.loading?(i(),n("div",_0,[...t[39]||(t[39]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{"border-color":"#272d63"}},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)])])):o.reports.length===0?(i(),n("div",k0,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun rapport",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par générer votre premier rapport.",-1)])])):(i(),n("div",C0,[e("table",M0,[t[42]||(t[42]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Taille"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",S0,[(i(!0),n(D,null,T(o.reports,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",A0,[e("div",j0,[e("div",{class:I(["w-8 h-8 rounded-full flex items-center justify-center mr-3",o.getReportTypeClass(s.type)])},[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1)])],2),e("div",null,[e("p",P0,l(o.getReportTypeName(s.type)),1),e("p",D0,l(s.format),1)])])]),e("td",T0,l(s.period),1),e("td",U0,l(o.formatDateTime(s.created_at)),1),e("td",F0,l(s.file_size),1),e("td",O0,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.status==="ready"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(s.status==="ready"?"Prêt":"En cours"),3)]),e("td",z0,[e("div",E0,[s.status==="ready"?(i(),n("button",{key:0,onClick:r=>o.downloadReport(s),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[16]||(t[16]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[17]||(t[17]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Télécharger ",40,R0)):x("",!0),e("button",{onClick:r=>o.deleteReport(s),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,V0)])])]))),128))])])]))])])}const I0=te(zm,[["render",B0],["__scopeId","data-v-04ad1860"]]),j3=Object.freeze(Object.defineProperty({__proto__:null,default:I0},Symbol.toStringTag,{value:"Module"})),$0={name:"Settings",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(!1),a=f(!1),u=G({platform_name:"",site_url:"",contact_email:"",timezone:"Africa/Libreville",currency:"XAF"}),s=G({airtel_money:!0,moov_money:!0,bank_cards:!1}),r=G({email_enabled:!0,sms_enabled:!1,push_enabled:!0}),y=G({maintenance_mode:!1,maintenance_message:""}),j=G({fixed_commission:500,percentage_commission:5}),k=async()=>{d.value=!0;try{const b=await fetch("/api/v1/admin/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(b.ok){const w=await b.json();w.success&&(Object.assign(u,w.data.general||{}),Object.assign(s,w.data.payment||{}),Object.assign(r,w.data.notification||{}),Object.assign(y,w.data.maintenance||{}),Object.assign(j,w.data.commission||{}))}else O()}catch{console.log("API non disponible, utilisation des données locales"),O()}finally{d.value=!1}},O=()=>{Object.assign(u,{platform_name:"Primea Ticketing",site_url:"https://primea.ga",contact_email:"contact@primea.ga",timezone:"Africa/Libreville",currency:"XAF"}),Object.assign(s,{airtel_money:!0,moov_money:!0,bank_cards:!1}),Object.assign(r,{email_enabled:!0,sms_enabled:!1,push_enabled:!0}),Object.assign(y,{maintenance_mode:!1,maintenance_message:"Le site est temporairement en maintenance pour amélioration. Nous reviendrons bientôt !"}),Object.assign(j,{fixed_commission:500,percentage_commission:5})},U=async()=>{t.value=!0;try{(await fetch("/api/v1/admin/settings/general",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).ok?alert("Paramètres généraux sauvegardés avec succès"):alert("Paramètres généraux sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres généraux sauvegardés avec succès (simulé)")}finally{t.value=!1}},A=async()=>{c.value=!0;try{(await fetch("/api/v1/admin/settings/payment",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)})).ok?alert("Paramètres de paiement sauvegardés avec succès"):alert("Paramètres de paiement sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de paiement sauvegardés avec succès (simulé)")}finally{c.value=!1}},q=async()=>{o.value=!0;try{(await fetch("/api/v1/admin/settings/notifications",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).ok?alert("Paramètres de notification sauvegardés avec succès"):alert("Paramètres de notification sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de notification sauvegardés avec succès (simulé)")}finally{o.value=!1}},W=async()=>{a.value=!0;try{(await fetch("/api/v1/admin/settings/security",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...y,...j})})).ok?alert("Paramètres de sécurité sauvegardés avec succès"):alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}finally{a.value=!1}},S=()=>{const b={general:u,payment:s,notification:r,maintenance:y,commission:j,exported_at:new Date().toISOString()},w=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),L=window.URL.createObjectURL(w),m=document.createElement("a");m.href=L,m.download=`primea-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),window.URL.revokeObjectURL(L),document.body.removeChild(m)},P=b=>{const w=b.target.files[0];if(!w)return;const L=new FileReader;L.onload=m=>{try{const p=JSON.parse(m.target.result);confirm("Êtes-vous sûr de vouloir importer cette configuration ? Cela remplacera tous les paramètres actuels.")&&(p.general&&Object.assign(u,p.general),p.payment&&Object.assign(s,p.payment),p.notification&&Object.assign(r,p.notification),p.maintenance&&Object.assign(y,p.maintenance),p.commission&&Object.assign(j,p.commission),alert("Configuration importée avec succès"))}catch{alert("Erreur lors de l'importation du fichier : format invalide")}},L.readAsText(w),b.target.value=""},h=()=>{confirm("Êtes-vous sûr de vouloir réinitialiser tous les paramètres ? Cette action est irréversible.")&&(O(),alert("Tous les paramètres ont été réinitialisés aux valeurs par défaut"))};return re(()=>{k()}),{loading:d,savingGeneral:t,savingPayment:c,savingNotifications:o,savingSecurity:a,generalForm:u,paymentForm:s,notificationForm:r,maintenanceForm:y,commissionForm:j,saveGeneralSettings:U,savePaymentSettings:A,saveNotificationSettings:q,saveSecuritySettings:W,exportSettings:S,importSettings:P,resetAllSettings:h}}},L0={class:"settings-management p-6"},q0={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},N0={class:"bg-white rounded-lg shadow p-6"},X0=["disabled"],H0={class:"bg-white rounded-lg shadow p-6"},G0={class:"space-y-4"},W0={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},K0={class:"relative inline-flex items-center cursor-pointer"},J0={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},Y0={class:"relative inline-flex items-center cursor-pointer"},Q0={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},Z0={class:"relative inline-flex items-center cursor-pointer"},eg=["disabled"],tg={class:"bg-white rounded-lg shadow p-6"},sg={class:"space-y-4"},og={class:"flex items-center justify-between"},lg={class:"relative inline-flex items-center cursor-pointer"},rg={class:"flex items-center justify-between"},ag={class:"relative inline-flex items-center cursor-pointer"},ng={class:"flex items-center justify-between"},ig={class:"relative inline-flex items-center cursor-pointer"},dg=["disabled"],ug={class:"bg-white rounded-lg shadow p-6"},cg={class:"space-y-6"},mg={class:"p-4 border border-orange-200 bg-orange-50 rounded-lg"},gg={class:"flex items-center justify-between"},pg={class:"relative inline-flex items-center cursor-pointer"},fg={key:0,class:"mt-4"},xg={class:"grid grid-cols-2 gap-4"},vg=["disabled"],yg={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},bg={class:"bg-white rounded-lg shadow p-4 text-center"},hg={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},wg={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},_g={class:"bg-white rounded-lg shadow p-4 text-center"},kg={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Cg={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Mg={class:"bg-white rounded-lg shadow p-4 text-center"};function Sg(d,t,c,o,a,u){return i(),n("div",L0,[t[62]||(t[62]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Paramètres Système"),e("p",{class:"text-gray-600"},"Configurez les paramètres généraux de la plateforme Primea")],-1)),e("div",q0,[e("div",N0,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Configuration Générale",-1)),e("form",{onSubmit:t[7]||(t[7]=le((...s)=>o.saveGeneralSettings&&o.saveGeneralSettings(...s),["prevent"])),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.generalForm.platform_name=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.generalForm.platform_name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site *",-1)),g(e("input",{type:"url","onUpdate:modelValue":t[1]||(t[1]=s=>o.generalForm.site_url=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.generalForm.site_url]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),g(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=s=>o.generalForm.contact_email=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.generalForm.contact_email]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.generalForm.timezone=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[34]||(t[34]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Paris (GMT+1)",-1)])],512),[[R,o.generalForm.timezone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.generalForm.currency=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[36]||(t[36]=[e("option",{value:"XAF"},"Franc CFA (XAF)",-1),e("option",{value:"EUR"},"Euro (EUR)",-1),e("option",{value:"USD"},"Dollar US (USD)",-1)])],512),[[R,o.generalForm.currency]])]),e("button",{type:"submit",disabled:o.savingGeneral,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[5]||(t[5]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[6]||(t[6]=s=>s.currentTarget.style.backgroundColor="#272d63")},l(o.savingGeneral?"Sauvegarde...":"Sauvegarder"),41,X0)],32)]),e("div",H0,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Moyens de Paiement",-1)),e("div",G0,[e("div",W0,[t[39]||(t[39]=ae('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-red-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-red-600 font-bold text-xs" data-v-b0f1a205>AM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Airtel Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Airtel</p></div></div>',1)),e("label",K0,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=s=>o.paymentForm.airtel_money=s),class:"sr-only peer"},null,512),[[oe,o.paymentForm.airtel_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(o.paymentForm.airtel_money?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",J0,[t[40]||(t[40]=ae('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-orange-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-orange-600 font-bold text-xs" data-v-b0f1a205>MM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Moov Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Moov</p></div></div>',1)),e("label",Y0,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=s=>o.paymentForm.moov_money=s),class:"sr-only peer"},null,512),[[oe,o.paymentForm.moov_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(o.paymentForm.moov_money?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",Q0,[t[42]||(t[42]=ae('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-blue-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b0f1a205><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" data-v-b0f1a205></path></svg></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Cartes Bancaires</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Visa, Mastercard, etc.</p></div></div>',1)),e("label",Z0,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>o.paymentForm.bank_cards=s),class:"sr-only peer"},null,512),[[oe,o.paymentForm.bank_cards]]),t[41]||(t[41]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),e("button",{onClick:t[11]||(t[11]=(...s)=>o.savePaymentSettings&&o.savePaymentSettings(...s)),disabled:o.savingPayment,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[12]||(t[12]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[13]||(t[13]=s=>s.currentTarget.style.backgroundColor="#fab511")},l(o.savingPayment?"Sauvegarde...":"Sauvegarder les paiements"),41,eg)])]),e("div",tg,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Paramètres de Notifications",-1)),e("div",sg,[e("div",og,[t[44]||(t[44]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par email")],-1)),e("label",lg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=s=>o.notificationForm.email_enabled=s),class:"sr-only peer"},null,512),[[oe,o.notificationForm.email_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(o.notificationForm.email_enabled?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",rg,[t[45]||(t[45]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications SMS"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par SMS")],-1)),e("label",ag,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=s=>o.notificationForm.sms_enabled=s),class:"sr-only peer"},null,512),[[oe,o.notificationForm.sms_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ie(o.notificationForm.sms_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",ng,[t[47]||(t[47]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Push"),e("p",{class:"text-sm text-gray-600"},"Notifications navigateur et mobile")],-1)),e("label",ig,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=s=>o.notificationForm.push_enabled=s),class:"sr-only peer"},null,512),[[oe,o.notificationForm.push_enabled]]),t[46]||(t[46]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("button",{onClick:t[17]||(t[17]=(...s)=>o.saveNotificationSettings&&o.saveNotificationSettings(...s)),disabled:o.savingNotifications,class:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},l(o.savingNotifications?"Sauvegarde...":"Sauvegarder les notifications"),9,dg)])]),e("div",ug,[t[55]||(t[55]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité et Maintenance",-1)),e("div",cg,[e("div",mg,[e("div",gg,[t[50]||(t[50]=e("div",null,[e("h4",{class:"font-medium text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 text-orange-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),se(" Mode Maintenance ")]),e("p",{class:"text-sm text-gray-600"},"Rendre le site temporairement indisponible")],-1)),e("label",pg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=s=>o.maintenanceForm.maintenance_mode=s),class:"sr-only peer"},null,512),[[oe,o.maintenanceForm.maintenance_mode]]),t[49]||(t[49]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"},null,-1))])]),o.maintenanceForm.maintenance_mode?(i(),n("div",fg,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message de maintenance",-1)),g(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=s=>o.maintenanceForm.maintenance_message=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"},placeholder:"Le site est temporairement en maintenance..."},null,512),[[M,o.maintenanceForm.maintenance_message]])])):x("",!0)]),e("div",null,[t[54]||(t[54]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Commission Plateforme",-1)),e("div",xg,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission fixe (XAF)",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=s=>o.commissionForm.fixed_commission=s),min:"0",step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.commissionForm.fixed_commission]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission % du ticket",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[21]||(t[21]=s=>o.commissionForm.percentage_commission=s),min:"0",max:"100",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.commissionForm.percentage_commission]])])])]),e("button",{onClick:t[22]||(t[22]=(...s)=>o.saveSecuritySettings&&o.saveSecuritySettings(...s)),disabled:o.savingSecurity,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},l(o.savingSecurity?"Sauvegarde...":"Sauvegarder la sécurité"),9,vg)])])]),e("div",yg,[e("div",bg,[e("div",hg,[(i(),n("svg",wg,[...t[56]||(t[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)])]))]),t[57]||(t[57]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Exporter Configuration",-1)),e("button",{onClick:t[23]||(t[23]=(...s)=>o.exportSettings&&o.exportSettings(...s)),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[24]||(t[24]=s=>{s.currentTarget.style.backgroundColor="#fab511",s.currentTarget.style.color="#fff"}),onMouseleave:t[25]||(t[25]=s=>{s.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",s.currentTarget.style.color="#272d63"})}," Exporter ",32)]),e("div",_g,[e("div",kg,[(i(),n("svg",Cg,[...t[58]||(t[58]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])]))]),t[59]||(t[59]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Importer Configuration",-1)),e("input",{type:"file",ref:"importFile",onChange:t[26]||(t[26]=(...s)=>o.importSettings&&o.importSettings(...s)),accept:".json",class:"hidden"},null,544),e("button",{onClick:t[27]||(t[27]=s=>d.$refs.importFile.click()),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#fab511","background-color":"rgba(250, 181, 17, 0.1)"},onMouseover:t[28]||(t[28]=s=>{s.currentTarget.style.backgroundColor="#272d63",s.currentTarget.style.color="#fff"}),onMouseleave:t[29]||(t[29]=s=>{s.currentTarget.style.backgroundColor="rgba(250, 181, 17, 0.1)",s.currentTarget.style.color="#fab511"})}," Importer ",32)]),e("div",Mg,[t[60]||(t[60]=e("div",{class:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),t[61]||(t[61]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Réinitialiser",-1)),e("button",{onClick:t[30]||(t[30]=(...s)=>o.resetAllSettings&&o.resetAllSettings(...s)),class:"text-sm text-red-600 hover:text-red-800 px-4 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Tout Réinitialiser ")])])])}const Ag=te($0,[["render",Sg],["__scopeId","data-v-b0f1a205"]]),P3=Object.freeze(Object.defineProperty({__proto__:null,default:Ag},Symbol.toStringTag,{value:"Module"})),jg={name:"Profile",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f(!1),a=f(!1),u=f(""),s=f({id:1,name:"",email:"",phone:"",position:"",created_at:new Date,login_count:0}),r=G({name:"",email:"",phone:"",position:""}),y=G({current_password:"",new_password:"",new_password_confirmation:""}),j=G({email_notifications:!0,two_factor_enabled:!1,language:"fr",timezone:"Africa/Libreville"}),k=f([]),O=async()=>{d.value=!0;try{const p=await fetch("/api/v1/admin/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(p.ok){const v=await p.json();v.success&&(s.value=v.data.user,Object.assign(r,v.data.user),Object.assign(j,v.data.preferences||j),k.value=v.data.sessions||[])}else U()}catch{console.log("API non disponible, utilisation des données locales"),U()}finally{d.value=!1}},U=()=>{const p={id:1,name:localStorage.getItem("userName")||"Admin Primea",email:localStorage.getItem("userEmail")||"admin@primea.ga",phone:"+241 01 23 45 67",position:"Super Administrateur",created_at:new Date("2024-01-15"),login_count:127};s.value=p,Object.assign(r,p),k.value=[{id:1,device:"Chrome sur macOS",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]},A=async()=>{t.value=!0;try{const p=await fetch("/api/v1/admin/profile",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});p.ok?(await p.json()).success&&(s.value={...s.value,...r},localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),alert("Profil mis à jour avec succès")):(s.value={...s.value,...r},localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),alert("Profil mis à jour avec succès (simulé)"))}catch{console.log("API non disponible, mise à jour locale"),s.value={...s.value,...r},localStorage.setItem("userName",r.name),localStorage.setItem("userEmail",r.email),alert("Profil mis à jour avec succès (simulé)")}finally{t.value=!1}},q=async()=>{if(u.value="",y.new_password!==y.new_password_confirmation){u.value="Les mots de passe ne correspondent pas";return}if(y.new_password.length<8){u.value="Le mot de passe doit contenir au moins 8 caractères";return}c.value=!0;try{const p=await fetch("/api/v1/admin/profile/password",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(y)});p.ok?(await p.json()).success&&(Object.assign(y,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès")):(Object.assign(y,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)"))}catch{console.log("API non disponible, changement simulé"),Object.assign(y,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)")}finally{c.value=!1}},W=async()=>{o.value=!0;try{(await fetch("/api/v1/admin/profile/preferences",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(j)})).ok?alert("Préférences sauvegardées avec succès"):alert("Préférences sauvegardées avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Préférences sauvegardées avec succès (simulé)")}finally{o.value=!1}},S=()=>{a.value=!0},P=async p=>{if(confirm("Êtes-vous sûr de vouloir révoquer cette session ?"))try{(await fetch(`/api/v1/admin/profile/sessions/${p.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?k.value=k.value.filter(_=>_.id!==p.id):k.value=k.value.filter(_=>_.id!==p.id)}catch{k.value=k.value.filter(_=>_.id!==p.id)}},h=async()=>{if(confirm("Cela déconnectera toutes les autres sessions. Continuer ?"))try{(await fetch("/api/v1/admin/profile/sessions/logout-all",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?(k.value=k.value.filter(v=>v.current),alert("Toutes les autres sessions ont été déconnectées")):(k.value=k.value.filter(v=>v.current),alert("Toutes les autres sessions ont été déconnectées (simulé)"))}catch{k.value=k.value.filter(v=>v.current),alert("Toutes les autres sessions ont été déconnectées (simulé)")}},b=()=>{alert("Téléchargement des données du compte (fonctionnalité à venir)")},w=p=>p.split(" ").map(v=>v.charAt(0)).join("").toUpperCase().substring(0,2),L=p=>new Date(p).toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),m=p=>{const _=new Date-new Date(p),$=Math.floor(_/6e4),C=Math.floor(_/36e5),V=Math.floor(_/864e5);return $<1?"À l'instant":$<60?`Il y a ${$} min`:C<24?`Il y a ${C}h`:`Il y a ${V}j`};return re(()=>{O()}),{loading:d,updatingProfile:t,changingPassword:c,updatingPreferences:o,showAvatarModal:a,passwordError:u,profile:s,profileForm:r,passwordForm:y,preferences:j,activeSessions:k,updateProfile:A,changePassword:q,updatePreferences:W,changeAvatar:S,revokeSession:P,logoutAllSessions:h,downloadAccountData:b,getInitials:w,formatDate:L,formatRelativeTime:m}}},Pg={class:"profile-management p-6"},Dg={class:"bg-white rounded-lg shadow p-6 mb-6"},Tg={class:"flex items-center space-x-6"},Ug={class:"relative"},Fg={class:"w-24 h-24 rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},Og={class:"flex-1"},zg={class:"text-xl font-bold",style:{color:"#272d63"}},Eg={class:"text-gray-600 mb-1"},Rg={class:"flex items-center space-x-4 text-sm text-gray-500"},Vg={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Bg={class:"bg-white rounded-lg shadow p-6"},Ig=["disabled"],$g={class:"bg-white rounded-lg shadow p-6"},Lg={key:0,class:"text-red-600 text-sm"},qg=["disabled"],Ng={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},Xg={class:"bg-white rounded-lg shadow p-6"},Hg={class:"space-y-4"},Gg={class:"flex items-center justify-between"},Wg={class:"relative inline-flex items-center cursor-pointer"},Kg={class:"flex items-center justify-between"},Jg={class:"relative inline-flex items-center cursor-pointer"},Yg=["disabled"],Qg={class:"bg-white rounded-lg shadow p-6"},Zg={class:"grid grid-cols-2 gap-4 mb-6"},ep={class:"text-center p-3 bg-gray-50 rounded-lg"},tp={class:"text-xl font-bold",style:{color:"#272d63"}},sp={class:"text-center p-3 bg-gray-50 rounded-lg"},op={class:"text-xl font-bold",style:{color:"#fab511"}},lp={class:"space-y-3"},rp={class:"flex items-center"},ap={class:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},np={class:"w-4 h-4",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ip={class:"text-sm font-medium text-gray-900"},dp={class:"text-xs text-gray-500"},up={class:"flex items-center space-x-2"},cp={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},mp=["onClick"],gp={class:"mt-6 space-y-2"},pp={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fp={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},xp={class:"text-center mb-4"},vp={class:"w-24 h-24 mx-auto rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},yp={class:"flex space-x-3"};function bp(d,t,c,o,a,u){return i(),n("div",Pg,[t[52]||(t[52]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Mon Profil"),e("p",{class:"text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",Dg,[e("div",Tg,[e("div",Ug,[e("div",Fg,l(o.getInitials(o.profile.name)),1),e("button",{onClick:t[0]||(t[0]=(...s)=>o.changeAvatar&&o.changeAvatar(...s)),class:"absolute bottom-0 right-0 text-white p-2 rounded-full transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[1]||(t[1]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[2]||(t[2]=s=>s.currentTarget.style.backgroundColor="#fab511")},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],32)]),e("div",Og,[e("h3",zg,l(o.profile.name),1),e("p",Eg,l(o.profile.email),1),e("div",Rg,[t[28]||(t[28]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),se(" Administrateur ")],-1)),e("span",null,"Membre depuis "+l(o.formatDate(o.profile.created_at)),1)])])])]),e("div",Vg,[e("div",Bg,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Informations Personnelles",-1)),e("form",{onSubmit:t[9]||(t[9]=le((...s)=>o.updateProfile&&o.updateProfile(...s),["prevent"])),class:"space-y-4"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.profileForm.name=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.profileForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=s=>o.profileForm.email=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.profileForm.email]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),g(e("input",{type:"tel","onUpdate:modelValue":t[5]||(t[5]=s=>o.profileForm.phone=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.profileForm.phone]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Poste",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=s=>o.profileForm.position=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.profileForm.position]])]),e("button",{type:"submit",disabled:o.updatingProfile,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[7]||(t[7]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[8]||(t[8]=s=>s.currentTarget.style.backgroundColor="#272d63")},l(o.updatingProfile?"Mise à jour...":"Mettre à jour"),41,Ig)],32)]),e("div",$g,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Changer le Mot de Passe",-1)),e("form",{onSubmit:t[15]||(t[15]=le((...s)=>o.changePassword&&o.changePassword(...s),["prevent"])),class:"space-y-4"},[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel *",-1)),g(e("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=s=>o.passwordForm.current_password=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.passwordForm.current_password]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe *",-1)),g(e("input",{type:"password","onUpdate:modelValue":t[11]||(t[11]=s=>o.passwordForm.new_password=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.passwordForm.new_password]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe *",-1)),g(e("input",{type:"password","onUpdate:modelValue":t[12]||(t[12]=s=>o.passwordForm.new_password_confirmation=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.passwordForm.new_password_confirmation]])]),o.passwordError?(i(),n("div",Lg,l(o.passwordError),1)):x("",!0),e("button",{type:"submit",disabled:o.changingPassword,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[13]||(t[13]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[14]||(t[14]=s=>s.currentTarget.style.backgroundColor="#fab511")},l(o.changingPassword?"Changement...":"Changer le mot de passe"),41,qg)],32)])]),e("div",Ng,[e("div",Xg,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Préférences",-1)),e("div",Hg,[e("div",Gg,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications importantes par email")],-1)),e("label",Wg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=s=>o.preferences.email_notifications=s),class:"sr-only peer"},null,512),[[oe,o.preferences.email_notifications]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ie(o.preferences.email_notifications?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",Kg,[t[39]||(t[39]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Authentification 2FA"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée avec un code à usage unique")],-1)),e("label",Jg,[g(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=s=>o.preferences.two_factor_enabled=s),class:"sr-only peer"},null,512),[[oe,o.preferences.two_factor_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ie(o.preferences.two_factor_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue de l'interface",-1)),g(e("select",{"onUpdate:modelValue":t[18]||(t[18]=s=>o.preferences.language=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[40]||(t[40]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[R,o.preferences.language]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),g(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>o.preferences.timezone=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[42]||(t[42]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1)])],512),[[R,o.preferences.timezone]])]),e("button",{onClick:t[20]||(t[20]=(...s)=>o.updatePreferences&&o.updatePreferences(...s)),disabled:o.updatingPreferences,class:"w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},l(o.updatingPreferences?"Sauvegarde...":"Sauvegarder les préférences"),9,Yg)])]),e("div",Qg,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité & Sessions",-1)),e("div",Zg,[e("div",ep,[e("div",tp,l(o.profile.login_count||0),1),t[45]||(t[45]=e("div",{class:"text-sm text-gray-600"},"Connexions",-1))]),e("div",sp,[e("div",op,l(o.activeSessions.length),1),t[46]||(t[46]=e("div",{class:"text-sm text-gray-600"},"Sessions actives",-1))])]),e("div",lp,[t[48]||(t[48]=e("h4",{class:"font-medium text-gray-900"},"Sessions Actives",-1)),(i(!0),n(D,null,T(o.activeSessions,s=>(i(),n("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",rp,[e("div",ap,[(i(),n("svg",np,[...t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])]))]),e("div",null,[e("p",ip,l(s.device),1),e("p",dp,l(s.location)+" • "+l(o.formatRelativeTime(s.last_activity)),1)])]),e("div",up,[s.current?(i(),n("span",cp," Actuelle ")):(i(),n("button",{key:1,onClick:r=>o.revokeSession(s),class:"text-xs text-red-600 hover:text-red-800 px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Révoquer ",8,mp))])]))),128))]),e("div",gp,[e("button",{onClick:t[21]||(t[21]=(...s)=>o.logoutAllSessions&&o.logoutAllSessions(...s)),class:"w-full text-orange-600 hover:text-orange-800 py-2 px-4 bg-orange-100 hover:bg-orange-200 rounded-lg font-medium transition-colors duration-200"}," Déconnecter toutes les autres sessions "),e("button",{onClick:t[22]||(t[22]=(...s)=>o.downloadAccountData&&o.downloadAccountData(...s)),class:"w-full text-gray-600 hover:text-gray-800 py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200"}," Télécharger mes données ")])])]),o.showAvatarModal?(i(),n("div",pp,[e("div",fp,[t[51]||(t[51]=e("h3",{class:"text-lg font-bold mb-4",style:{color:"#272d63"}},"Changer la photo de profil",-1)),e("div",xp,[e("div",vp,l(o.getInitials(o.profile.name)),1),t[50]||(t[50]=e("p",{class:"text-sm text-gray-600 mt-2"},"Fonctionnalité à venir : upload d'image",-1))]),e("div",yp,[e("button",{onClick:t[23]||(t[23]=s=>o.showAvatarModal=!1),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler "),e("button",{onClick:t[24]||(t[24]=s=>o.showAvatarModal=!1),class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[25]||(t[25]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[26]||(t[26]=s=>s.currentTarget.style.backgroundColor="#272d63")}," Fermer ",32)])])])):x("",!0)])}const hp=te(jg,[["render",bp],["__scopeId","data-v-baf281fd"]]),D3=Object.freeze(Object.defineProperty({__proto__:null,default:hp},Symbol.toStringTag,{value:"Module"})),wp={name:"CategoryManagement",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f([]),a=f(null),u=G({search:"",status:""}),s=G({name:"",description:"",color:"#272d63",status:"active"}),r=G({current_page:1,per_page:10,total:0,from:0,to:0}),y=de(()=>{if(!Array.isArray(o.value))return[];let b=o.value;return u.search&&(b=b.filter(w=>w.name.toLowerCase().includes(u.search.toLowerCase())||w.description?.toLowerCase().includes(u.search.toLowerCase()))),u.status&&(b=b.filter(w=>w.status===u.status)),b}),j=de(()=>{const b=[];if(!r.total||!r.per_page)return[1];const w=Math.ceil(r.total/r.per_page);for(let L=1;L<=w;L++)b.push(L);return b}),k=async(b=1)=>{d.value=!0;try{const w=new URLSearchParams({page:b,per_page:r.per_page,...u.search&&{search:u.search},...u.status&&{status:u.status}}),L=await fetch(`/api/v1/admin/categories?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(L.ok){const m=await L.json();if(m.success){const p=m.data?.data||m.categories?.data||m.data||[];o.value=p,m.data?.total&&Object.assign(r,{current_page:m.data.current_page||1,per_page:m.data.per_page||20,total:m.data.total||0,from:m.data.from||0,to:m.data.to||0,last_page:m.data.last_page||1})}}else O()}catch{console.log("API non disponible, utilisation des données simulées"),O()}finally{d.value=!1}},O=()=>{o.value=[{id:1,name:"Concerts",slug:"concerts",description:"Événements musicaux et concerts live",color:"#272d63",status:"active",events_count:25,created_at:new Date},{id:2,name:"Conférences",slug:"conferences",description:"Événements professionnels et éducatifs",color:"#fab511",status:"active",events_count:12,created_at:new Date(Date.now()-864e5)},{id:3,name:"Sport",slug:"sport",description:"Événements sportifs et compétitions",color:"#10b981",status:"active",events_count:8,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Culture",slug:"culture",description:"Événements culturels et artistiques",color:"#8b5cf6",status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}],Object.assign(r,{current_page:1,per_page:10,total:o.value.length,from:1,to:o.value.length})},U=async()=>{try{const b=await fetch("/api/v1/admin/categories",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(s)});if(b.ok)(await b.json()).success&&(P(),k());else{const w={id:Date.now(),...s,slug:s.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};o.value.unshift(w),P()}}catch{console.log("API non disponible, ajout local simulé");const w={id:Date.now(),...s,slug:s.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};o.value.unshift(w),P()}},A=b=>{a.value=b,Object.assign(s,b),c.value=!0},q=async()=>{try{const b=await fetch(`/api/v1/admin/categories/${a.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(s)});if(b.ok)(await b.json()).success&&(P(),k());else{const w=o.value.findIndex(L=>L.id===a.value.id);w!==-1&&(o.value[w]={...o.value[w],...s}),P()}}catch{console.log("API non disponible, mise à jour locale simulée");const w=o.value.findIndex(L=>L.id===a.value.id);w!==-1&&(o.value[w]={...o.value[w],...s}),P()}},W=async b=>{if(confirm(`Êtes-vous sûr de vouloir supprimer la catégorie "${b.name}" ?`))try{(await fetch(`/api/v1/admin/categories/${b.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?k():o.value=o.value.filter(L=>L.id!==b.id)}catch{console.log("API non disponible, suppression locale simulée"),o.value=o.value.filter(L=>L.id!==b.id)}},S=b=>{r.current_page=b,k(b)},P=()=>{t.value=!1,c.value=!1,a.value=null,Object.assign(s,{name:"",description:"",color:"#272d63",status:"active"})},h=b=>new Date(b).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return re(()=>{k()}),{loading:d,showCreateModal:t,showEditModal:c,categories:o,filters:u,categoryForm:s,pagination:r,filteredCategories:y,paginationPages:j,loadCategories:k,createCategory:U,editCategory:A,updateCategory:q,deleteCategory:W,changePage:S,closeModals:P,formatDate:h}}},_p={class:"category-management p-6"},kp={class:"mb-6 flex justify-between items-center"},Cp={class:"bg-white rounded-lg shadow p-4 mb-6"},Mp={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Sp={class:"flex items-end"},Ap={key:0,class:"flex justify-center items-center h-64"},jp={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},Pp={class:"overflow-x-auto"},Dp={class:"w-full"},Tp={class:"divide-y divide-gray-200"},Up={class:"px-6 py-4"},Fp={class:"flex items-center"},Op={class:"text-sm font-medium text-gray-900"},zp={class:"text-sm text-gray-500"},Ep={class:"px-6 py-4"},Rp={class:"text-sm text-gray-900"},Vp={class:"px-6 py-4"},Bp={class:"text-sm font-medium",style:{color:"#272d63"}},Ip={class:"px-6 py-4"},$p={class:"px-6 py-4 text-sm text-gray-500"},Lp={class:"px-6 py-4"},qp={class:"flex space-x-2"},Np=["onClick"],Xp=["onClick"],Hp={key:0,class:"text-center py-12"},Gp={key:2,class:"mt-6 flex justify-between items-center"},Wp={class:"text-sm text-gray-700"},Kp={class:"flex space-x-2"},Jp=["onClick"],Yp={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Qp={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Zp={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},e1={class:"space-y-4"},t1={class:"flex space-x-3 mt-6"};function s1(d,t,c,o,a,u){return i(),n("div",_p,[e("div",kp,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Catégories"),e("p",{class:"text-gray-600 mt-1"},"Organisez et gérez les catégories d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=s=>o.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=s=>s.currentTarget.style.backgroundColor="#272d63")},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Nouvelle Catégorie ",-1)])],32)]),e("div",Cp,[e("div",Mp,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.filters.search=s),placeholder:"Nom de catégorie...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.filters.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[R,o.filters.status]])]),e("div",Sp,[e("button",{onClick:t[5]||(t[5]=(...s)=>o.loadCategories&&o.loadCategories(...s)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[6]||(t[6]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[7]||(t[7]=s=>s.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),o.loading?(i(),n("div",Ap,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(i(),n("div",jp,[e("div",Pp,[e("table",Dp,[t[25]||(t[25]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Tp,[(i(!0),n(D,null,T(o.filteredCategories,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Up,[e("div",Fp,[e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:ie({backgroundColor:s.color+"20",color:s.color})},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],4),e("div",null,[e("p",Op,l(s.name),1),e("p",zp,l(s.slug),1)])])]),e("td",Ep,[e("p",Rp,l(s.description||"Aucune description"),1)]),e("td",Vp,[e("span",Bp,l(s.events_count||0)+" événements",1)]),e("td",Ip,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(s.status==="active"?"Actif":"Inactif"),3)]),e("td",$p,l(o.formatDate(s.created_at)),1),e("td",Lp,[e("div",qp,[e("button",{onClick:r=>o.editCategory(s),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[8]||(t[8]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[9]||(t[9]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Modifier ",40,Np),e("button",{onClick:r=>o.deleteCategory(s),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,Xp)])])]))),128))])])]),o.categories.length===0?(i(),n("div",Hp,[...t[26]||(t[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucune catégorie",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre première catégorie.",-1)])])):x("",!0)])),o.pagination.total>o.pagination.per_page?(i(),n("div",Gp,[e("div",Wp," Affichage de "+l(o.pagination.from)+" à "+l(o.pagination.to)+" sur "+l(o.pagination.total)+" catégories ",1),e("div",Kp,[(i(!0),n(D,null,T(o.paginationPages,s=>(i(),n("button",{key:s,onClick:r=>o.changePage(s),class:I(["px-3 py-2 text-sm rounded-lg transition-colors duration-200",s===o.pagination.current_page?"text-white":"text-gray-700 hover:bg-gray-100"]),style:ie(s===o.pagination.current_page?{backgroundColor:"#272d63"}:{})},l(s),15,Jp))),128))])])):x("",!0),o.showCreateModal||o.showEditModal?(i(),n("div",Yp,[e("div",Qp,[e("h3",Zp,l(o.showCreateModal?"Nouvelle Catégorie":"Modifier la Catégorie"),1),e("form",{onSubmit:t[17]||(t[17]=le(s=>o.showCreateModal?o.createCategory():o.updateCategory(),["prevent"]))},[e("div",e1,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=s=>o.categoryForm.name=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.categoryForm.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.categoryForm.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.categoryForm.description]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),g(e("input",{type:"color","onUpdate:modelValue":t[12]||(t[12]=s=>o.categoryForm.color=s),class:"w-full h-10 border border-gray-300 rounded-lg"},null,512),[[M,o.categoryForm.color]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.categoryForm.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[R,o.categoryForm.status]])])]),e("div",t1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[14]||(t[14]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[15]||(t[15]=s=>s.currentTarget.style.backgroundColor="#272d63")},l(o.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[16]||(t[16]=(...s)=>o.closeModals&&o.closeModals(...s)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):x("",!0)])}const o1=te(wp,[["render",s1],["__scopeId","data-v-a15d9acb"]]),T3=Object.freeze(Object.defineProperty({__proto__:null,default:o1},Symbol.toStringTag,{value:"Module"})),l1={name:"VenueManagement",setup(){const d=f(!1),t=f(!1),c=f(!1),o=f([]),a=f(null),u=f(null),s=G({search:"",city:"",status:""}),r=G({name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},imagePreview:null,status:"active"}),y=f(null),j=de(()=>{let m=o.value;return s.search&&(m=m.filter(p=>p.name.toLowerCase().includes(s.search.toLowerCase())||p.address.toLowerCase().includes(s.search.toLowerCase()))),s.city&&(m=m.filter(p=>p.city===s.city)),s.status&&(m=m.filter(p=>p.status===s.status)),m}),k=de(()=>!Array.isArray(o.value)||o.value.length===0?[]:[...new Set(o.value.map(m=>m.city))].sort()),O=async()=>{d.value=!0;try{const m=new URLSearchParams({...s.search&&{search:s.search},...s.city&&{city:s.city},...s.status&&{status:s.status}}),p=await fetch(`/api/v1/admin/venues?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(p.ok){const v=await p.json();if(v.success){const _=v.data?.data||v.venues?.data||v.data||[];o.value=_,v.data?.total&&(u.value={total:v.data.total,per_page:v.data.per_page,current_page:v.data.current_page,last_page:v.data.last_page})}}else U()}catch{console.log("API non disponible, utilisation des données simulées"),U()}finally{d.value=!1}},U=()=>{o.value||(o.value=[]),o.value=[{id:1,name:"Centre de Conférences Mbolo",description:"Centre moderne pour événements d'entreprise",address:"Avenue de l'Indépendance",city:"Libreville",postal_code:"BP 123",country:"Gabon",capacity:500,phone:"+241 01 23 45 67",email:"contact@mbolo.ga",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",status:"active",events_count:15,created_at:new Date},{id:2,name:"Salle Polyvalente Akanda",description:"Espace polyvalent pour tous types d'événements",address:"Quartier Akanda",city:"Akanda",postal_code:"BP 456",country:"Gabon",capacity:300,phone:"+241 01 34 56 78",email:"akanda@venues.ga",image:"https://images.unsplash.com/photo-1511578314322-379afb476865?w=400",status:"active",events_count:8,created_at:new Date(Date.now()-864e5)},{id:3,name:"Stade Omnisports",description:"Grand stade pour événements sportifs et concerts",address:"Zone Industrielle Owendo",city:"Owendo",postal_code:"BP 789",country:"Gabon",capacity:5e3,phone:"+241 01 45 67 89",email:"stade@owendo.ga",image:"https://images.unsplash.com/photo-1459865264687-595d652de67e?w=400",status:"active",events_count:12,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Salle des Fêtes Port-Gentil",description:"Salle traditionnelle rénovée",address:"Centre-ville",city:"Port-Gentil",postal_code:"BP 012",country:"Gabon",capacity:200,phone:"+241 01 56 78 90",email:"fetes@portgentil.ga",image:null,status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}]},A=async()=>{try{const m=new FormData;m.append("name",r.name),r.description&&m.append("description",r.description),m.append("address",r.address),m.append("city",r.city),r.postal_code&&m.append("postal_code",r.postal_code),r.country&&m.append("country",r.country),r.capacity&&m.append("capacity",r.capacity),r.phone&&m.append("phone",r.phone),r.email&&m.append("email",r.email),r.status&&m.append("status",r.status),r.image.url?m.append("image_url",r.image.url):r.image.file&&m.append("cover_image",r.image.file);const p=await fetch("/api/v1/admin/venues",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:m});if(p.ok)(await p.json()).success&&(P(),O());else{const v={id:Date.now(),...r,events_count:0,created_at:new Date};o.value.unshift(v),P()}}catch{console.log("API non disponible, ajout local simulé");const p={id:Date.now(),...r,events_count:0,created_at:new Date};o.value.unshift(p),P()}},q=m=>{a.value=m;let p=null;m.image_url?p=m.image_url:m.image_file&&(p=`/storage/${m.image_file}`),Object.assign(r,{...m,image:{},imagePreview:p}),c.value=!0},W=async()=>{try{const m=new FormData;m.append("name",r.name),r.description&&m.append("description",r.description),m.append("address",r.address),m.append("city",r.city),r.postal_code&&m.append("postal_code",r.postal_code),r.country&&m.append("country",r.country),r.capacity&&m.append("capacity",r.capacity),r.phone&&m.append("phone",r.phone),r.email&&m.append("email",r.email),r.status&&m.append("status",r.status),r.image.url?m.append("image_url",r.image.url):r.image.file&&m.append("cover_image",r.image.file),m.append("_method","PUT");const p=await fetch(`/api/v1/admin/venues/${a.value.id}`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:m});if(p.ok)(await p.json()).success&&(P(),O());else{const v=o.value.findIndex(_=>_.id===a.value.id);v!==-1&&(o.value[v]={...o.value[v],...r}),P()}}catch{console.log("API non disponible, mise à jour locale simulée");const p=o.value.findIndex(v=>v.id===a.value.id);p!==-1&&(o.value[p]={...o.value[p],...r}),P()}},S=async m=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le lieu "${m.name}" ?`))try{(await fetch(`/api/v1/admin/venues/${m.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?O():o.value=o.value.filter(v=>v.id!==m.id)}catch{console.log("API non disponible, suppression locale simulée"),o.value=o.value.filter(v=>v.id!==m.id)}},P=()=>{t.value=!1,c.value=!1,a.value=null,Object.assign(r,{name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},imagePreview:null,status:"active"}),y.value&&(y.value.value="")},h=m=>{const p=m.target.files[0];if(p){if(p.size>5*1024*1024){alert("L'image ne doit pas dépasser 5MB");return}r.image.file=p;const v=new FileReader;v.onload=_=>{r.imagePreview=_.target.result},v.readAsDataURL(p)}},b=()=>{r.image={},r.imagePreview=null,y.value&&(y.value.value="")},w=m=>m.image_url&&(m.image_url.startsWith("http://")||m.image_url.startsWith("https://"))?m.image_url:m.image_file?`/storage/${m.image_file}`:m.image?m.image.startsWith("http://")||m.image.startsWith("https://")?m.image:`/storage/${m.image}`:null,L=m=>{m.target.style.display="none"};return re(()=>{O()}),{loading:d,showCreateModal:t,showEditModal:c,venues:o,filters:s,venueForm:r,filteredVenues:j,cities:k,loadVenues:O,createVenue:A,editVenue:q,updateVenue:W,deleteVenue:S,closeModals:P,handleImageSelect:h,removeImage:b,getVenueImageUrl:w,handleImageError:L,imageInput:y}}},r1={class:"venue-management p-6"},a1={class:"mb-6 flex justify-between items-center"},n1={class:"bg-white rounded-lg shadow p-4 mb-6"},i1={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},d1=["value"],u1={class:"flex items-end"},c1={key:0,class:"flex justify-center items-center h-64"},m1={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},g1={class:"h-48 bg-gray-200 rounded-t-lg relative overflow-hidden"},p1=["src","alt"],f1={key:1,class:"w-full h-full flex items-center justify-center"},x1={class:"absolute top-3 right-3"},v1={class:"p-4"},y1={class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},b1={class:"space-y-2 text-sm text-gray-600"},h1={class:"flex items-center"},w1={class:"flex items-center"},_1={class:"flex items-center"},k1={class:"flex space-x-2 mt-4"},C1=["onClick"],M1=["onClick"],S1={key:2,class:"text-center py-12"},A1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},j1={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-90vh overflow-y-auto"},P1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},D1={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T1={class:"md:col-span-2"},U1={class:"md:col-span-2"},F1={class:"md:col-span-2"},O1={key:0,class:"mb-3"},z1=["src"],E1={class:"flex space-x-3 mt-6"};function R1(d,t,c,o,a,u){return i(),n("div",r1,[e("div",a1,[t[29]||(t[29]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Lieux"),e("p",{class:"text-gray-600 mt-1"},"Gérez les lieux et salles d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=s=>o.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=s=>s.currentTarget.style.backgroundColor="#272d63")},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Nouveau Lieu ",-1)])],32)]),e("div",n1,[e("div",i1,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=s=>o.filters.search=s),placeholder:"Nom du lieu...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.filters.city=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[t[31]||(t[31]=e("option",{value:""},"Toutes les villes",-1)),(i(!0),n(D,null,T(o.cities,s=>(i(),n("option",{key:s,value:s},l(s),9,d1))),128))],512),[[R,o.filters.city]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.filters.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[33]||(t[33]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[R,o.filters.status]])]),e("div",u1,[e("button",{onClick:t[6]||(t[6]=(...s)=>o.loadVenues&&o.loadVenues(...s)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[7]||(t[7]=s=>s.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[8]||(t[8]=s=>s.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),o.loading?(i(),n("div",c1,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(i(),n("div",m1,[(i(!0),n(D,null,T(o.filteredVenues,s=>(i(),n("div",{key:s.id,class:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-200"},[e("div",g1,[o.getVenueImageUrl(s)?(i(),n("img",{key:0,src:o.getVenueImageUrl(s),alt:s.name,class:"w-full h-full object-cover",onError:t[9]||(t[9]=(...r)=>o.handleImageError&&o.handleImageError(...r))},null,40,p1)):(i(),n("div",f1,[...t[36]||(t[36]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),e("div",x1,[e("span",{class:I(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(s.status==="active"?"Actif":"Inactif"),3)])]),e("div",v1,[e("h3",y1,l(s.name),1),e("div",b1,[e("div",h1,[t[37]||(t[37]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),se(" "+l(s.address)+", "+l(s.city),1)]),e("div",w1,[t[38]||(t[38]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),se(" Capacité: "+l(s.capacity)+" personnes ",1)]),e("div",_1,[t[39]||(t[39]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),se(" "+l(s.events_count||0)+" événements ",1)])]),e("div",k1,[e("button",{onClick:r=>o.editVenue(s),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[10]||(t[10]=r=>{r.currentTarget.style.backgroundColor="#fab511",r.currentTarget.style.color="#fff"}),onMouseleave:t[11]||(t[11]=r=>{r.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",r.currentTarget.style.color="#272d63"})}," Modifier ",40,C1),e("button",{onClick:r=>o.deleteVenue(s),class:"flex-1 text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,M1)])])]))),128))])),o.venues.length===0&&!o.loading?(i(),n("div",S1,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun lieu",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par ajouter votre premier lieu.",-1)])])):x("",!0),o.showCreateModal||o.showEditModal?(i(),n("div",A1,[e("div",j1,[e("h3",P1,l(o.showCreateModal?"Nouveau Lieu":"Modifier le Lieu"),1),e("form",{onSubmit:t[27]||(t[27]=le(s=>o.showCreateModal?o.createVenue():o.updateVenue(),["prevent"]))},[e("div",D1,[e("div",T1,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du lieu *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=s=>o.venueForm.name=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.name]])]),e("div",U1,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.venueForm.description=s),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.description]])]),e("div",F1,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image du lieu",-1)),o.venueForm.imagePreview?(i(),n("div",O1,[e("img",{src:o.venueForm.imagePreview,alt:"Prévisualisation",class:"w-32 h-32 object-cover rounded-lg"},null,8,z1),e("button",{type:"button",onClick:t[14]||(t[14]=(...s)=>o.removeImage&&o.removeImage(...s)),class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):x("",!0),e("input",{ref:"imageInput",type:"file",accept:"image/*",onChange:t[15]||(t[15]=(...s)=>o.handleImageSelect&&o.handleImageSelect(...s)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,544),t[44]||(t[44]=e("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG, GIF, WEBP jusqu'à 5MB",-1))]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=s=>o.venueForm.address=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.address]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville *",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=s=>o.venueForm.city=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.city]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=s=>o.venueForm.postal_code=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.postal_code]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),g(e("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=s=>o.venueForm.country=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.country]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Capacité *",-1)),g(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=s=>o.venueForm.capacity=s),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.capacity]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>o.venueForm.status=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[50]||(t[50]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[R,o.venueForm.status]])]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),g(e("input",{type:"tel","onUpdate:modelValue":t[22]||(t[22]=s=>o.venueForm.phone=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.phone]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),g(e("input",{type:"email","onUpdate:modelValue":t[23]||(t[23]=s=>o.venueForm.email=s),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[M,o.venueForm.email]])])]),e("div",E1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[24]||(t[24]=s=>s.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[25]||(t[25]=s=>s.currentTarget.style.backgroundColor="#272d63")},l(o.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[26]||(t[26]=(...s)=>o.closeModals&&o.closeModals(...s)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):x("",!0)])}const V1=te(l1,[["render",R1],["__scopeId","data-v-fdae2659"]]),U3=Object.freeze(Object.defineProperty({__proto__:null,default:V1},Symbol.toStringTag,{value:"Module"})),B1={name:"UserTypes",data(){return{userTypes:[],loading:!1,showDetailsModal:!1,selectedUserType:null,filters:{status:""},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadUserTypes()},methods:{async loadUserTypes(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/user-types",{params:t});c.data.success&&(this.userTypes=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement types utilisateurs:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les types d'utilisateurs"})}finally{this.loading=!1}},resetFilters(){this.filters={status:""},this.loadUserTypes()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadUserTypes(d)},viewDetails(d){this.selectedUserType=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedUserType=null},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}},I1={class:"user-types-page p-6 bg-gray-50 min-h-screen"},$1={class:"bg-white rounded-lg shadow p-6 mb-8"},L1={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},q1={class:"flex items-end"},N1={class:"bg-white rounded-lg shadow"},X1={key:0,class:"p-8 text-center"},H1={key:1,class:"p-8 text-center text-gray-500"},G1={key:2,class:"overflow-x-auto"},W1={class:"w-full"},K1={class:"divide-y divide-gray-200"},J1={class:"px-6 py-4 text-sm text-gray-900"},Y1={class:"px-6 py-4 text-sm font-medium text-gray-900"},Q1={class:"px-6 py-4 text-sm text-gray-900"},Z1={class:"px-6 py-4 text-sm text-gray-600"},ef={class:"px-6 py-4 text-sm text-gray-900"},tf={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},sf={class:"px-6 py-4 text-sm"},of={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},lf={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},rf={class:"px-6 py-4 text-sm"},af=["onClick"],nf={key:3,class:"p-6 border-t"},df={class:"flex items-center justify-between"},uf={class:"text-sm text-gray-700"},cf={class:"flex space-x-2"},mf=["disabled"],gf=["disabled"],pf={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ff={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},xf={class:"p-6 border-b"},vf={class:"flex items-center justify-between"},yf={key:0,class:"p-6"},bf={class:"space-y-4"},hf={class:"text-gray-900"},wf={class:"text-gray-900 font-medium"},_f={class:"text-gray-900"},kf={class:"text-gray-900"},Cf={class:"text-gray-900"},Mf={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},Sf={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},Af={class:"text-gray-900"},jf={class:"text-gray-900"},Pf={class:"p-6 border-t bg-gray-50"};function Df(d,t,c,o,a,u){return i(),n("div",I1,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Types d'Utilisateurs"),e("p",{class:"text-gray-600"},"Consultation des types d'utilisateurs du système")])])],-1)),e("div",$1,[t[9]||(t[9]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",L1,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.filters.status=s),onChange:t[1]||(t[1]=(...s)=>u.loadUserTypes&&u.loadUserTypes(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[7]||(t[7]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[R,a.filters.status]])]),e("div",q1,[e("button",{onClick:t[2]||(t[2]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",N1,[t[13]||(t[13]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Types d'Utilisateurs")],-1)),a.loading?(i(),n("div",X1,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.userTypes.length===0?(i(),n("div",H1," Aucun type d'utilisateur trouvé ")):(i(),n("div",G1,[e("table",W1,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Label"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",K1,[(i(!0),n(D,null,T(a.userTypes,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",J1,l(s.id),1),e("td",Y1,l(s.name),1),e("td",Q1,l(s.label),1),e("td",Z1,l(s.description||"N/A"),1),e("td",ef,[e("span",tf,l(s.users_count||0),1)]),e("td",sf,[s.is_active?(i(),n("span",of," Actif ")):(i(),n("span",lf," Inactif "))]),e("td",rf,[e("button",{onClick:r=>u.viewDetails(s),class:"text-primea-blue hover:text-blue-800"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,af)])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",nf,[e("div",df,[e("div",uf," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",cf,[e("button",{onClick:t[3]||(t[3]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,mf),e("button",{onClick:t[4]||(t[4]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,gf)])])])):x("",!0)]),a.showDetailsModal?(i(),n("div",pf,[e("div",ff,[e("div",xf,[e("div",vf,[t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Type d'Utilisateur",-1)),e("button",{onClick:t[5]||(t[5]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedUserType?(i(),n("div",yf,[e("div",bf,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID",-1)),e("p",hf,l(a.selectedUserType.id),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",wf,l(a.selectedUserType.name),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Label",-1)),e("p",_f,l(a.selectedUserType.label),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",kf,l(a.selectedUserType.description||"Aucune description"),1)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nombre d'utilisateurs",-1)),e("p",Cf,l(a.selectedUserType.users_count||0),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),a.selectedUserType.is_active?(i(),n("span",Mf," Actif ")):(i(),n("span",Sf," Inactif "))]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de création",-1)),e("p",Af,l(u.formatDate(a.selectedUserType.created_at)),1)]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dernière modification",-1)),e("p",jf,l(u.formatDate(a.selectedUserType.updated_at)),1)])])])):x("",!0),e("div",Pf,[e("button",{onClick:t[6]||(t[6]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const Tf=te(B1,[["render",Df]]),F3=Object.freeze(Object.defineProperty({__proto__:null,default:Tf},Symbol.toStringTag,{value:"Module"})),Uf={name:"Privileges",data(){return{privileges:[],loading:!1,showDetailsModal:!1,selectedPrivilege:null,filters:{module:"",action:"",status:""},pagination:{current_page:1,last_page:1,per_page:50,total:0,from:0,to:0}}},mounted(){this.loadPrivileges()},methods:{async loadPrivileges(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/privileges",{params:t});c.data.success&&(this.privileges=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement privilèges:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loading=!1}},resetFilters(){this.filters={module:"",action:"",status:""},this.loadPrivileges()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadPrivileges(d)},viewDetails(d){this.selectedPrivilege=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedPrivilege=null},formatModule(d){return{auth:"Authentification",events:"Événements",orders:"Commandes",payments:"Paiements",tickets:"Billets",scanning:"Scan",organizers:"Organisateurs",users:"Utilisateurs",admin:"Administration"}[d]||d},formatAction(d){return{create:"Créer",read:"Lire",view:"Voir",update:"Modifier",delete:"Supprimer",manage:"Gérer",access:"Accéder"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}},Ff={class:"privileges-page p-6 bg-gray-50 min-h-screen"},Of={class:"bg-white rounded-lg shadow p-6 mb-8"},zf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ef={class:"flex items-end"},Rf={class:"bg-white rounded-lg shadow"},Vf={class:"p-6 border-b"},Bf={class:"text-sm text-gray-600 mt-1"},If={key:0,class:"p-8 text-center"},$f={key:1,class:"p-8 text-center text-gray-500"},Lf={key:2,class:"overflow-x-auto"},qf={class:"w-full"},Nf={class:"divide-y divide-gray-200"},Xf={class:"px-6 py-4 text-sm text-gray-900"},Hf={class:"px-6 py-4 text-sm font-medium text-gray-900"},Gf={class:"px-6 py-4 text-sm text-gray-600 font-mono"},Wf={class:"px-6 py-4 text-sm"},Kf={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium"},Jf={class:"px-6 py-4 text-sm"},Yf={class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full text-xs font-medium"},Qf={class:"px-6 py-4 text-sm text-gray-900"},Zf={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},ex={class:"px-6 py-4 text-sm"},tx={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},sx={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},ox={class:"px-6 py-4 text-sm"},lx=["onClick"],rx={key:3,class:"p-6 border-t"},ax={class:"flex items-center justify-between"},nx={class:"text-sm text-gray-700"},ix={class:"flex space-x-2"},dx=["disabled"],ux=["disabled"],cx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},mx={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},gx={class:"p-6 border-b"},px={class:"flex items-center justify-between"},fx={key:0,class:"p-6"},xx={class:"space-y-4"},vx={class:"text-gray-900"},yx={class:"text-gray-900 font-medium"},bx={class:"text-gray-900 font-mono bg-gray-100 px-3 py-2 rounded"},hx={class:"text-gray-900"},wx={class:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium"},_x={class:"bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium"},kx={key:0,class:"flex flex-wrap gap-2 mt-2"},Cx={key:1,class:"text-gray-500"},Mx={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},Sx={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},Ax={class:"text-gray-900"},jx={class:"text-gray-900"},Px={class:"p-6 border-t bg-gray-50"};function Dx(d,t,c,o,a,u){return i(),n("div",Ff,[t[34]||(t[34]=e("div",{class:"mb-8"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Privilèges"),e("p",{class:"text-gray-600"},"Consultation des privilèges du système")])])],-1)),e("div",Of,[t[17]||(t[17]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",zf,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Module",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.filters.module=s),onChange:t[1]||(t[1]=(...s)=>u.loadPrivileges&&u.loadPrivileges(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[11]||(t[11]=[ae('<option value="">Tous les modules</option><option value="auth">Authentification</option><option value="events">Événements</option><option value="orders">Commandes</option><option value="payments">Paiements</option><option value="tickets">Billets</option><option value="scanning">Scan</option><option value="organizers">Organisateurs</option><option value="users">Utilisateurs</option><option value="admin">Administration</option>',10)])],544),[[R,a.filters.module]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Action",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.filters.action=s),onChange:t[3]||(t[3]=(...s)=>u.loadPrivileges&&u.loadPrivileges(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[13]||(t[13]=[ae('<option value="">Toutes les actions</option><option value="create">Créer</option><option value="read">Lire</option><option value="view">Voir</option><option value="update">Modifier</option><option value="delete">Supprimer</option><option value="manage">Gérer</option><option value="access">Accéder</option>',8)])],544),[[R,a.filters.action]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>a.filters.status=s),onChange:t[5]||(t[5]=(...s)=>u.loadPrivileges&&u.loadPrivileges(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[15]||(t[15]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[R,a.filters.status]])]),e("div",Ef,[e("button",{onClick:t[6]||(t[6]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Rf,[e("div",Vf,[t[18]||(t[18]=e("h2",{class:"text-xl font-bold"},"Liste des Privilèges",-1)),e("p",Bf,"Total: "+l(a.pagination.total)+" privilège(s)",1)]),a.loading?(i(),n("div",If,[...t[19]||(t[19]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.privileges.length===0?(i(),n("div",$f," Aucun privilège trouvé ")):(i(),n("div",Lf,[e("table",qf,[t[21]||(t[21]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Slug"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Module"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Action"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Nf,[(i(!0),n(D,null,T(a.privileges,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Xf,l(s.id),1),e("td",Hf,l(s.name),1),e("td",Gf,l(s.slug),1),e("td",Wf,[e("span",Kf,l(u.formatModule(s.module)),1)]),e("td",Jf,[e("span",Yf,l(u.formatAction(s.action)),1)]),e("td",Qf,[e("span",Zf,l(s.roles_count||0),1)]),e("td",ex,[s.is_active?(i(),n("span",tx," Actif ")):(i(),n("span",sx," Inactif "))]),e("td",ox,[e("button",{onClick:r=>u.viewDetails(s),class:"text-primea-blue hover:text-blue-800"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,lx)])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",rx,[e("div",ax,[e("div",nx," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",ix,[e("button",{onClick:t[7]||(t[7]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,dx),e("button",{onClick:t[8]||(t[8]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,ux)])])])):x("",!0)]),a.showDetailsModal?(i(),n("div",cx,[e("div",mx,[e("div",gx,[e("div",px,[t[23]||(t[23]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Privilège",-1)),e("button",{onClick:t[9]||(t[9]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[22]||(t[22]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedPrivilege?(i(),n("div",fx,[e("div",xx,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ID",-1)),e("p",vx,l(a.selectedPrivilege.id),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",yx,l(a.selectedPrivilege.name),1)]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),e("p",bx,l(a.selectedPrivilege.slug),1)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",hx,l(a.selectedPrivilege.description||"Aucune description"),1)]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Module",-1)),e("span",wx,l(u.formatModule(a.selectedPrivilege.module)),1)]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Action",-1)),e("span",_x,l(u.formatAction(a.selectedPrivilege.action)),1)]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rôles associés",-1)),a.selectedPrivilege.roles&&a.selectedPrivilege.roles.length>0?(i(),n("div",kx,[(i(!0),n(D,null,T(a.selectedPrivilege.roles,s=>(i(),n("span",{key:s.id,class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},l(s.name),1))),128))])):(i(),n("p",Cx,"Aucun rôle associé"))]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),a.selectedPrivilege.is_active?(i(),n("span",Mx," Actif ")):(i(),n("span",Sx," Inactif "))]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de création",-1)),e("p",Ax,l(u.formatDate(a.selectedPrivilege.created_at)),1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Dernière modification",-1)),e("p",jx,l(u.formatDate(a.selectedPrivilege.updated_at)),1)])])])):x("",!0),e("div",Px,[e("button",{onClick:t[10]||(t[10]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const Tx=te(Uf,[["render",Dx]]),O3=Object.freeze(Object.defineProperty({__proto__:null,default:Tx},Symbol.toStringTag,{value:"Module"})),Ux={name:"Roles",data(){return{roles:[],allPrivileges:[],availablePrivileges:[],userTypes:[],loading:!1,loadingPrivileges:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,showPrivilegesModal:!1,isEditMode:!1,selectedRole:null,privilegeSearch:"",selectedPrivilegeIds:[],filters:{type:"",status:""},formData:{name:"",description:"",user_type_id:"",type:"custom",level:10,is_active:!0,privilege_ids:[]},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},computed:{filteredPrivileges(){if(!this.privilegeSearch)return this.allPrivileges;const d=this.privilegeSearch.toLowerCase();return this.allPrivileges.filter(t=>t.name.toLowerCase().includes(d)||t.slug.toLowerCase().includes(d)||t.module.toLowerCase().includes(d)||t.action.toLowerCase().includes(d))},filteredAvailablePrivileges(){if(!this.privilegeSearch)return this.availablePrivileges;const d=this.privilegeSearch.toLowerCase();return this.availablePrivileges.filter(t=>t.name.toLowerCase().includes(d)||t.slug.toLowerCase().includes(d)||t.module.toLowerCase().includes(d)||t.action.toLowerCase().includes(d))}},mounted(){this.loadRoles(),this.loadUserTypes()},methods:{async loadRoles(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/roles",{params:t});c.data.success&&(this.roles=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement rôles:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les rôles"})}finally{this.loading=!1}},async loadUserTypes(){try{const d=await J.get("/api/v1/admin/user-types",{params:{per_page:100}});d.data.success&&(this.userTypes=d.data.data.data)}catch(d){console.error("Erreur chargement types utilisateurs:",d)}},async loadAllPrivileges(){this.loadingPrivileges=!0;try{const d=await J.get("/api/v1/admin/privileges",{params:{per_page:1e3}});d.data.success&&(this.allPrivileges=d.data.data.data)}catch(d){console.error("Erreur chargement privilèges:",d),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loadingPrivileges=!1}},async loadPrivilegesForUserType(){if(!this.formData.user_type_id){this.availablePrivileges=[];return}this.loadingPrivileges=!0;try{const d=await J.get("/api/v1/admin/privileges",{params:{per_page:1e3,user_type_id:this.formData.user_type_id}});d.data.success&&(this.availablePrivileges=d.data.data.data)}catch(d){console.error("Erreur chargement privilèges:",d),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les privilèges"})}finally{this.loadingPrivileges=!1}},togglePrivilegeInForm(d){const t=this.formData.privilege_ids.indexOf(d);t>-1?this.formData.privilege_ids.splice(t,1):this.formData.privilege_ids.push(d)},resetFilters(){this.filters={type:"",status:""},this.loadRoles()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadRoles(d)},async openCreateModal(){this.isEditMode=!1,this.formData={name:"",description:"",user_type_id:"",type:"custom",level:10,is_active:!0,privilege_ids:[]},this.availablePrivileges=[],this.privilegeSearch="",this.showFormModal=!0},async openEditModal(d){this.isEditMode=!0,this.selectedRole=d,this.formData={name:d.name,description:d.description,user_type_id:d.user_type_id,type:d.type||"custom",level:d.level,is_active:d.is_active,privilege_ids:d.privileges?.map(t=>t.id)||[]},this.privilegeSearch="",this.showFormModal=!0,d.user_type_id&&await this.loadPrivilegesForUserType()},closeFormModal(){this.showFormModal=!1,this.selectedRole=null},async submitForm(){this.submitting=!0;try{const d=this.isEditMode?`/api/v1/admin/roles/${this.selectedRole.id}`:"/api/v1/admin/roles",t=this.isEditMode?"put":"post",c={name:this.formData.name,description:this.formData.description,user_type_id:this.formData.user_type_id,type:this.formData.type,level:this.formData.level,is_active:this.formData.is_active,privilege_ids:this.formData.privilege_ids},o=await J[t](d,c);o.data.success&&(E.fire({icon:"success",title:"Succès",text:o.data.message,timer:2e3}),this.closeFormModal(),this.loadRoles(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),E.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedRole=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedRole=null},async managePrivileges(d){this.selectedRole=d,this.selectedPrivilegeIds=d.privileges?.map(t=>t.id)||[],this.privilegeSearch="",this.showPrivilegesModal=!0,await this.loadAllPrivileges()},closePrivilegesModal(){this.showPrivilegesModal=!1,this.selectedRole=null,this.selectedPrivilegeIds=[]},togglePrivilege(d){const t=this.selectedPrivilegeIds.indexOf(d);t>-1?this.selectedPrivilegeIds.splice(t,1):this.selectedPrivilegeIds.push(d)},async savePrivileges(){this.submitting=!0;try{(await J.post(`/api/v1/admin/roles/${this.selectedRole.id}/privileges`,{privilege_ids:this.selectedPrivilegeIds})).data.success&&(E.fire({icon:"success",title:"Succès",text:"Privilèges mis à jour avec succès",timer:2e3}),this.closePrivilegesModal(),this.loadRoles(this.pagination.current_page))}catch(d){console.error("Erreur sauvegarde privilèges:",d),E.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},confirmDelete(d){E.fire({title:"Supprimer ce rôle ?",html:`
          <p>Voulez-vous vraiment supprimer le rôle <strong>${d.name}</strong> ?</p>
          ${d.users_count>0?'<p class="text-red-600 mt-2">⚠️ Ce rôle est assigné à '+d.users_count+" utilisateur(s)</p>":""}
        `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteRole(d)})},async deleteRole(d){try{const t=await J.delete(`/api/v1/admin/roles/${d.id}`);t.data.success&&(E.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadRoles(this.pagination.current_page))}catch(t){console.error("Erreur suppression rôle:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer ce rôle"})}},getTypeClass(d){return{system:"bg-red-100 text-red-800",organizer:"bg-yellow-100 text-yellow-800",custom:"bg-green-100 text-green-800"}[d]||"bg-gray-100 text-gray-800"},formatType(d){return{system:"Système",organizer:"Organisateur",custom:"Personnalisé"}[d]||d}}},Fx={class:"roles-page p-6 bg-gray-50 min-h-screen"},Ox={class:"mb-8"},zx={class:"flex items-center justify-between"},Ex={class:"bg-white rounded-lg shadow p-6 mb-8"},Rx={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Vx={class:"flex items-end"},Bx={class:"bg-white rounded-lg shadow"},Ix={class:"p-6 border-b"},$x={class:"text-sm text-gray-600 mt-1"},Lx={key:0,class:"p-8 text-center"},qx={key:1,class:"p-8 text-center text-gray-500"},Nx={key:2,class:"overflow-x-auto"},Xx={class:"w-full"},Hx={class:"divide-y divide-gray-200"},Gx={class:"px-6 py-4"},Wx={class:"text-sm font-medium text-gray-900"},Kx={class:"text-xs text-gray-500 font-mono"},Jx={class:"px-6 py-4 text-sm"},Yx={class:"px-6 py-4 text-sm text-gray-900"},Qx={class:"bg-gray-100 px-2 py-1 rounded text-xs font-medium"},Zx={class:"px-6 py-4 text-sm text-gray-900"},e2={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},t2={class:"px-6 py-4 text-sm text-gray-900"},s2=["onClick"],o2={class:"px-6 py-4 text-sm"},l2={key:0,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},r2={key:1,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},a2={class:"px-6 py-4 text-sm"},n2={class:"flex items-center space-x-2"},i2=["onClick"],d2=["onClick"],u2=["onClick"],c2={key:3,class:"p-6 border-t"},m2={class:"flex items-center justify-between"},g2={class:"text-sm text-gray-700"},p2={class:"flex space-x-2"},f2=["disabled"],x2=["disabled"],v2={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},y2={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},b2={class:"p-6 border-b"},h2={class:"flex items-center justify-between"},w2={class:"text-xl font-bold text-primea-blue"},_2={class:"space-y-4"},k2=["value"],C2={class:"flex items-center"},M2={key:0,class:"border-t pt-4"},S2={class:"block text-sm font-medium text-gray-700 mb-3"},A2={key:0,class:"text-center py-4"},j2={key:1,class:"text-center py-4 text-gray-500"},P2={key:2},D2={class:"mb-3"},T2={class:"space-y-2 max-h-80 overflow-y-auto border rounded-lg p-3"},U2=["id","checked","onChange"],F2=["for"],O2={class:"font-medium text-sm"},z2={class:"text-xs text-gray-500"},E2={class:"flex gap-1 ml-2"},R2={class:"bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs"},V2={class:"bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-xs"},B2={class:"mt-6 flex justify-end space-x-3"},I2=["disabled"],$2={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},L2={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},q2={class:"p-6 border-b"},N2={class:"flex items-center justify-between"},X2={key:0,class:"p-6"},H2={class:"grid grid-cols-2 gap-6"},G2={class:"text-gray-900 font-medium"},W2={class:"text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded"},K2={class:"bg-gray-100 px-3 py-1 rounded text-sm font-medium"},J2={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},Y2={key:0,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},Q2={key:1,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},Z2={class:"mt-6"},ev={class:"text-gray-900"},tv={class:"mt-6"},sv={class:"block text-sm font-medium text-gray-700 mb-2"},ov={key:0,class:"flex flex-wrap gap-2 mt-2"},lv={key:1,class:"text-gray-500"},rv={class:"p-6 border-t bg-gray-50"},av={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},nv={class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"},iv={class:"p-6 border-b"},dv={class:"flex items-center justify-between"},uv={class:"text-xl font-bold text-primea-blue"},cv={class:"p-6"},mv={key:0,class:"text-center py-8"},gv={key:1},pv={class:"mb-4"},fv={class:"space-y-4 max-h-96 overflow-y-auto"},xv=["id","checked","onChange"],vv=["for"],yv={class:"font-medium"},bv={class:"text-xs text-gray-500"},hv={class:"flex gap-2"},wv={class:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs"},_v={class:"bg-indigo-100 text-indigo-800 px-2 py-1 rounded text-xs"},kv={class:"mt-4 text-sm text-gray-600"},Cv={class:"p-6 border-t bg-gray-50 flex justify-end space-x-3"},Mv=["disabled"];function Sv(d,t,c,o,a,u){return i(),n("div",Fx,[e("div",Ox,[e("div",zx,[t[25]||(t[25]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Rôles"),e("p",{class:"text-gray-600"},"Créer et gérer les rôles personnalisés")],-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>u.openCreateModal&&u.openCreateModal(...s)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer un Rôle ",-1)])])])]),e("div",Ex,[t[30]||(t[30]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Rx,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.filters.type=s),onChange:t[2]||(t[2]=(...s)=>u.loadRoles&&u.loadRoles(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[26]||(t[26]=[e("option",{value:""},"Tous les types",-1),e("option",{value:"system"},"Système",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"custom"},"Personnalisé",-1)])],544),[[R,a.filters.type]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.filters.status=s),onChange:t[4]||(t[4]=(...s)=>u.loadRoles&&u.loadRoles(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[R,a.filters.status]])]),e("div",Vx,[e("button",{onClick:t[5]||(t[5]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Bx,[e("div",Ix,[t[31]||(t[31]=e("h2",{class:"text-xl font-bold"},"Liste des Rôles",-1)),e("p",$x,"Total: "+l(a.pagination.total)+" rôle(s)",1)]),a.loading?(i(),n("div",Lx,[...t[32]||(t[32]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.roles.length===0?(i(),n("div",qx," Aucun rôle trouvé ")):(i(),n("div",Nx,[e("table",Xx,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nom"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Niveau"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Privilèges"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Hx,[(i(!0),n(D,null,T(a.roles,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Gx,[e("div",null,[e("div",Wx,l(s.name),1),e("div",Kx,l(s.slug),1)])]),e("td",Jx,[e("span",{class:I([u.getTypeClass(s.type),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatType(s.type)),3)]),e("td",Yx,[e("span",Qx," Niveau "+l(s.level),1)]),e("td",Zx,[e("span",e2,l(s.users_count||0),1)]),e("td",t2,[e("button",{onClick:r=>u.managePrivileges(s),class:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium hover:bg-purple-200"},l(s.privileges_count||0)+" privilège(s) ",9,s2)]),e("td",o2,[s.is_active?(i(),n("span",l2," Actif ")):(i(),n("span",r2," Inactif "))]),e("td",a2,[e("div",n2,[e("button",{onClick:r=>u.viewDetails(s),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[33]||(t[33]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,i2),s.type!=="system"?(i(),n("button",{key:0,onClick:r=>u.openEditModal(s),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[34]||(t[34]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,d2)):x("",!0),s.type!=="system"?(i(),n("button",{key:1,onClick:r=>u.confirmDelete(s),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,u2)):x("",!0)])])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",c2,[e("div",m2,[e("div",g2," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",p2,[e("button",{onClick:t[6]||(t[6]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,f2),e("button",{onClick:t[7]||(t[7]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,x2)])])])):x("",!0)]),a.showFormModal?(i(),n("div",v2,[e("div",y2,[e("div",b2,[e("div",h2,[e("h3",w2,l(a.isEditMode?"Modifier le Rôle":"Créer un Rôle"),1),e("button",{onClick:t[8]||(t[8]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[37]||(t[37]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[17]||(t[17]=le((...s)=>u.submitForm&&u.submitForm(...s),["prevent"])),class:"p-6"},[e("div",_2,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type d'utilisateur *",-1)),g(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.formData.user_type_id=s),onChange:t[10]||(t[10]=(...s)=>u.loadPrivilegesForUserType&&u.loadPrivilegesForUserType(...s)),required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un type",-1)),(i(!0),n(D,null,T(a.userTypes,s=>(i(),n("option",{key:s.id,value:s.id},l(s.label),9,k2))),128))],544),[[R,a.formData.user_type_id]]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1"},"Les privilèges disponibles dépendent du type d'utilisateur",-1))]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du rôle *",-1)),g(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.formData.name=s),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue",placeholder:"Ex: Modérateur"},null,512),[[M,a.formData.name]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),g(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=s=>a.formData.description=s),rows:"3",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue",placeholder:"Description du rôle"},null,512),[[M,a.formData.description]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Niveau (0-100) *",-1)),g(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>a.formData.level=s),type:"number",min:"0",max:"100",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.level,void 0,{number:!0}]]),t[44]||(t[44]=e("p",{class:"text-xs text-gray-500 mt-1"},"Plus le niveau est élevé, plus le rôle a de priorité",-1))]),e("div",null,[e("label",C2,[g(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>a.formData.is_active=s),type:"checkbox",class:"mr-2"},null,512),[[oe,a.formData.is_active]]),t[45]||(t[45]=e("span",{class:"text-sm font-medium text-gray-700"},"Actif",-1))])]),a.formData.user_type_id?(i(),n("div",M2,[e("label",S2," Privilèges ("+l(a.formData.privilege_ids.length)+" sélectionné(s)) ",1),a.loadingPrivileges?(i(),n("div",A2,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-2 text-sm text-gray-600"},"Chargement...",-1)])])):a.availablePrivileges.length===0?(i(),n("div",j2," Aucun privilège disponible pour ce type d'utilisateur ")):(i(),n("div",P2,[e("div",D2,[g(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>a.privilegeSearch=s),type:"text",placeholder:"Rechercher un privilège...",class:"w-full border rounded-lg px-3 py-2 text-sm"},null,512),[[M,a.privilegeSearch]])]),e("div",T2,[(i(!0),n(D,null,T(u.filteredAvailablePrivileges,s=>(i(),n("div",{key:s.id,class:"flex items-start p-2 hover:bg-gray-50 rounded"},[e("input",{type:"checkbox",id:`priv-form-${s.id}`,checked:a.formData.privilege_ids.includes(s.id),onChange:r=>u.togglePrivilegeInForm(s.id),class:"mt-1 mr-3"},null,40,U2),e("label",{for:`priv-form-${s.id}`,class:"flex-1 cursor-pointer"},[e("div",O2,l(s.name),1),e("div",z2,l(s.description||s.slug),1)],8,F2),e("div",E2,[e("span",R2,l(s.module),1),e("span",V2,l(s.action),1)])]))),128))])]))])):x("",!0)]),e("div",B2,[e("button",{type:"button",onClick:t[16]||(t[16]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:a.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(a.submitting?"En cours...":a.isEditMode?"Modifier":"Créer"),9,I2)])],32)])])):x("",!0),a.showDetailsModal?(i(),n("div",$2,[e("div",L2,[e("div",q2,[e("div",N2,[t[48]||(t[48]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Rôle",-1)),e("button",{onClick:t[18]||(t[18]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[47]||(t[47]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedRole?(i(),n("div",X2,[e("div",H2,[e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",G2,l(a.selectedRole.name),1)]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Slug",-1)),e("p",W2,l(a.selectedRole.slug),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("span",{class:I([u.getTypeClass(a.selectedRole.type),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatType(a.selectedRole.type)),3)]),e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau",-1)),e("span",K2," Niveau "+l(a.selectedRole.level),1)]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Utilisateurs",-1)),e("span",J2,l(a.selectedRole.users_count||0),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),a.selectedRole.is_active?(i(),n("span",Y2," Actif ")):(i(),n("span",Q2," Inactif "))])]),e("div",Z2,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),e("p",ev,l(a.selectedRole.description||"Aucune description"),1)]),e("div",tv,[e("label",sv,"Privilèges associés ("+l(a.selectedRole.privileges?.length||0)+")",1),a.selectedRole.privileges&&a.selectedRole.privileges.length>0?(i(),n("div",ov,[(i(!0),n(D,null,T(a.selectedRole.privileges,s=>(i(),n("span",{key:s.id,class:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm"},l(s.name),1))),128))])):(i(),n("p",lv,"Aucun privilège associé"))])])):x("",!0),e("div",rv,[e("button",{onClick:t[19]||(t[19]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0),a.showPrivilegesModal?(i(),n("div",av,[e("div",nv,[e("div",iv,[e("div",dv,[e("h3",uv," Gérer les Privilèges - "+l(a.selectedRole?.name),1),e("button",{onClick:t[20]||(t[20]=(...s)=>u.closePrivilegesModal&&u.closePrivilegesModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[56]||(t[56]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",cv,[a.loadingPrivileges?(i(),n("div",mv,[...t[57]||(t[57]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement des privilèges...",-1)])])):(i(),n("div",gv,[e("div",pv,[g(e("input",{"onUpdate:modelValue":t[21]||(t[21]=s=>a.privilegeSearch=s),type:"text",placeholder:"Rechercher un privilège...",class:"w-full border rounded-lg px-3 py-2"},null,512),[[M,a.privilegeSearch]])]),e("div",fv,[(i(!0),n(D,null,T(u.filteredPrivileges,s=>(i(),n("div",{key:s.id,class:"flex items-center p-3 border rounded-lg hover:bg-gray-50"},[e("input",{type:"checkbox",id:`priv-${s.id}`,checked:a.selectedPrivilegeIds.includes(s.id),onChange:r=>u.togglePrivilege(s.id),class:"mr-3"},null,40,xv),e("label",{for:`priv-${s.id}`,class:"flex-1 cursor-pointer"},[e("div",yv,l(s.name),1),e("div",bv,l(s.description||s.slug),1)],8,vv),e("div",hv,[e("span",wv,l(s.module),1),e("span",_v,l(s.action),1)])]))),128))]),e("div",kv,l(a.selectedPrivilegeIds.length)+" privilège(s) sélectionné(s) ",1)]))]),e("div",Cv,[e("button",{onClick:t[22]||(t[22]=(...s)=>u.closePrivilegesModal&&u.closePrivilegesModal(...s)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{onClick:t[23]||(t[23]=(...s)=>u.savePrivileges&&u.savePrivileges(...s)),disabled:a.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(a.submitting?"Enregistrement...":"Enregistrer"),9,Mv)])])])):x("",!0)])}const Av=te(Ux,[["render",Sv]]),z3=Object.freeze(Object.defineProperty({__proto__:null,default:Av},Symbol.toStringTag,{value:"Module"})),jv={name:"Admins",data(){return{admins:[],availableRoles:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedAdmin:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",role_id:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadAdmins(),this.loadAdminRoles()},methods:{async loadAdmins(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/admins",{params:t});c.data.success&&(this.admins=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement admins:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les administrateurs"})}finally{this.loading=!1}},async loadAdminRoles(){try{const d=await J.get("/api/v1/admin/roles",{params:{per_page:100}});if(console.log("Réponse API roles:",d.data),d.data.success){const t=d.data.data.data;console.log("Tous les rôles:",t),this.availableRoles=t.filter(c=>(console.log("Vérification rôle:",c.name,"user_type:",c.user_type),c.user_type&&c.user_type.name==="admin"&&c.slug!=="super_admin")),console.log("Rôles admin filtrés:",this.availableRoles)}}catch(d){console.error("Erreur chargement rôles admin:",d)}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadAdmins()},500)},resetFilters(){this.filters={search:"",status:""},this.loadAdmins()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadAdmins(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",role_id:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedAdmin=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedAdmin=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_admin:!0};if(!this.isEditMode&&!d.role_id){E.fire({icon:"error",title:"Erreur",text:"Veuillez sélectionner un rôle admin"}),this.submitting=!1;return}const t=this.isEditMode?`/api/v1/admin/users/${this.selectedAdmin.id}`:"/api/v1/admin/users",c=this.isEditMode?"put":"post",o=await J[c](t,d);o.data.success&&(E.fire({icon:"success",title:"Succès",text:o.data.message,timer:2e3}),this.closeFormModal(),this.loadAdmins(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),E.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedAdmin=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedAdmin=null},async toggleStatus(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(E.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadAdmins(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){E.fire({title:"Supprimer cet administrateur ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteAdmin(d)})},async deleteAdmin(d){try{const t=await J.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(E.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadAdmins(this.pagination.current_page))}catch(t){console.error("Erreur suppression admin:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer cet administrateur"})}},async resetPassword(d){E.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const c=await J.post(`/api/v1/admin/users/${d.id}/reset-password`);c.data.success&&E.fire({icon:"success",title:"Email envoyé",text:c.data.message})}catch(c){E.fire({icon:"error",title:"Erreur",text:c.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},Pv={class:"admins-page p-6 bg-gray-50 min-h-screen"},Dv={class:"mb-8"},Tv={class:"flex items-center justify-between"},Uv={class:"bg-white rounded-lg shadow p-6 mb-8"},Fv={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ov={class:"flex items-end"},zv={class:"bg-white rounded-lg shadow"},Ev={class:"p-6 border-b"},Rv={class:"text-sm text-gray-600 mt-1"},Vv={key:0,class:"p-8 text-center"},Bv={key:1,class:"p-8 text-center text-gray-500"},Iv={key:2,class:"overflow-x-auto"},$v={class:"w-full"},Lv={class:"divide-y divide-gray-200"},qv={class:"px-6 py-4"},Nv={class:"flex items-center"},Xv={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},Hv={class:"ml-4"},Gv={class:"text-sm font-medium text-gray-900"},Wv={class:"text-xs text-gray-500"},Kv={class:"px-6 py-4 text-sm text-gray-900"},Jv={class:"px-6 py-4 text-sm"},Yv={class:"flex flex-wrap gap-1"},Qv={class:"px-6 py-4 text-sm"},Zv={class:"px-6 py-4 text-sm text-gray-600"},ey={class:"px-6 py-4 text-sm"},ty={class:"flex items-center space-x-2"},sy=["onClick"],oy=["onClick"],ly=["onClick","title"],ry=["onClick"],ay={key:3,class:"p-6 border-t"},ny={class:"flex items-center justify-between"},iy={class:"text-sm text-gray-700"},dy={class:"flex space-x-2"},uy=["disabled"],cy=["disabled"],my={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},gy={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},py={class:"p-6 border-b"},fy={class:"flex items-center justify-between"},xy={class:"text-xl font-bold text-primea-blue"},vy={class:"space-y-4"},yy={key:0},by=["value"],hy={key:1},wy={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},_y={class:"text-sm text-blue-800"},ky={class:"mt-6 flex justify-end space-x-3"},Cy=["disabled"],My={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Sy={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Ay={class:"p-6 border-b"},jy={class:"flex items-center justify-between"},Py={key:0,class:"p-6"},Dy={class:"grid grid-cols-2 gap-6"},Ty={class:"text-gray-900 font-medium"},Uy={class:"text-gray-900"},Fy={class:"text-gray-900"},Oy={class:"text-gray-900"},zy={key:0,class:"text-green-600"},Ey={key:1,class:"text-orange-600"},Ry={class:"mt-6"},Vy={class:"flex flex-wrap gap-2"},By={class:"p-6 border-t bg-gray-50 flex justify-between"};function Iy(d,t,c,o,a,u){return i(),n("div",Pv,[e("div",Dv,[e("div",Tv,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Administrateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les comptes administrateurs")],-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>u.openCreateModal&&u.openCreateModal(...s)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer un Admin ",-1)])])])]),e("div",Uv,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Fv,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.filters.search=s),onInput:t[2]||(t[2]=(...s)=>u.debouncedSearch&&u.debouncedSearch(...s)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,a.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.filters.status=s),onChange:t[4]||(t[4]=(...s)=>u.loadAdmins&&u.loadAdmins(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[R,a.filters.status]])]),e("div",Ov,[e("button",{onClick:t[5]||(t[5]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",zv,[e("div",Ev,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold"},"Liste des Administrateurs",-1)),e("p",Rv,"Total: "+l(a.pagination.total)+" admin(s)",1)]),a.loading?(i(),n("div",Vv,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.admins.length===0?(i(),n("div",Bv," Aucun administrateur trouvé ")):(i(),n("div",Iv,[e("table",$v,[t[30]||(t[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Lv,[(i(!0),n(D,null,T(a.admins,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",qv,[e("div",Nv,[e("div",Xv,l(s.name.charAt(0).toUpperCase()),1),e("div",Hv,[e("div",Gv,l(s.name),1),e("div",Wv,"ID: "+l(s.id),1)])])]),e("td",Kv,l(s.email),1),e("td",Jv,[e("div",Yv,[(i(!0),n(D,null,T(s.roles,r=>(i(),n("span",{key:r.id,class:"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",Qv,[e("span",{class:I([u.getStatusClass(s.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatStatus(s.status)),3)]),e("td",Zv,l(u.formatDate(s.created_at)),1),e("td",ey,[e("div",ty,[e("button",{onClick:r=>u.viewDetails(s),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,sy),e("button",{onClick:r=>u.openEditModal(s),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,oy),e("button",{onClick:r=>u.toggleStatus(s),class:I(s.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:s.status==="active"?"Désactiver":"Activer"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,ly),e("button",{onClick:r=>u.confirmDelete(s),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ry)])])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",ay,[e("div",ny,[e("div",iy," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",dy,[e("button",{onClick:t[6]||(t[6]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,uy),e("button",{onClick:t[7]||(t[7]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,cy)])])])):x("",!0)]),a.showFormModal?(i(),n("div",my,[e("div",gy,[e("div",py,[e("div",fy,[e("h3",xy,l(a.isEditMode?"Modifier l'Administrateur":"Créer un Administrateur"),1),e("button",{onClick:t[8]||(t[8]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[31]||(t[31]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[14]||(t[14]=le((...s)=>u.submitForm&&u.submitForm(...s),["prevent"])),class:"p-6"},[e("div",vy,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.formData.name=s),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.formData.email=s),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.email]])]),a.isEditMode?x("",!0):(i(),n("div",yy,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle Admin *",-1)),g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.formData.role_id=s),required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[t[34]||(t[34]=e("option",{value:""},"Sélectionner un rôle",-1)),(i(!0),n(D,null,T(a.availableRoles,s=>(i(),n("option",{key:s.id,value:s.id},l(s.name),9,by))),128))],512),[[R,a.formData.role_id]]),t[36]||(t[36]=e("p",{class:"text-xs text-gray-500 mt-1"},"Rôles disponibles : Admin, Support (Super Admin exclu)",-1))])),a.isEditMode?(i(),n("div",hy,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>a.formData.status=s),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[R,a.formData.status]])])):x("",!0),e("div",wy,[e("p",_y,l(a.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",ky,[e("button",{type:"button",onClick:t[13]||(t[13]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:a.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(a.submitting?"En cours...":a.isEditMode?"Modifier":"Créer"),9,Cy)])],32)])])):x("",!0),a.showDetailsModal?(i(),n("div",My,[e("div",Sy,[e("div",Ay,[e("div",jy,[t[40]||(t[40]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Administrateur",-1)),e("button",{onClick:t[15]||(t[15]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[39]||(t[39]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedAdmin?(i(),n("div",Py,[e("div",Dy,[e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",Ty,l(a.selectedAdmin.name),1)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",Uy,l(a.selectedAdmin.email),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",Fy,l(a.selectedAdmin.phone||"N/A"),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:I([u.getStatusClass(a.selectedAdmin.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatStatus(a.selectedAdmin.status)),3)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",Oy,l(u.formatDate(a.selectedAdmin.created_at)),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),a.selectedAdmin.email_verified_at?(i(),n("span",zy," ✓ Vérifié le "+l(u.formatDate(a.selectedAdmin.email_verified_at)),1)):(i(),n("span",Ey,"✗ Non vérifié"))])]),e("div",Ry,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",Vy,[(i(!0),n(D,null,T(a.selectedAdmin.roles,s=>(i(),n("span",{key:s.id,class:"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium"},l(s.name),1))),128))])])])):x("",!0),e("div",By,[e("button",{onClick:t[16]||(t[16]=s=>u.resetPassword(a.selectedAdmin)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[17]||(t[17]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const $y=te(jv,[["render",Iy]]),E3=Object.freeze(Object.defineProperty({__proto__:null,default:$y},Symbol.toStringTag,{value:"Module"})),Ly={name:"Clients",data(){return{clients:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedClient:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadClients()},methods:{async loadClients(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/clients",{params:t});c.data.success&&(this.clients=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement clients:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les clients"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadClients()},500)},resetFilters(){this.filters={search:"",status:""},this.loadClients()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadClients(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedClient=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedClient=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_admin:!1},t=this.isEditMode?`/api/v1/admin/users/${this.selectedClient.id}`:"/api/v1/admin/users",c=this.isEditMode?"put":"post",o=await J[c](t,d);o.data.success&&(E.fire({icon:"success",title:"Succès",text:o.data.message,timer:2e3}),this.closeFormModal(),this.loadClients(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),E.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedClient=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedClient=null},async toggleStatus(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(E.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadClients(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){E.fire({title:"Supprimer ce client ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteClient(d)})},async deleteClient(d){try{const t=await J.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(E.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadClients(this.pagination.current_page))}catch(t){console.error("Erreur suppression client:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer ce client"})}},async resetPassword(d){E.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const c=await J.post(`/api/v1/admin/users/${d.id}/reset-password`);c.data.success&&E.fire({icon:"success",title:"Email envoyé",text:c.data.message})}catch(c){E.fire({icon:"error",title:"Erreur",text:c.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},qy={class:"clients-page p-6 bg-gray-50 min-h-screen"},Ny={class:"bg-white rounded-lg shadow p-6 mb-8"},Xy={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Hy={class:"flex items-end"},Gy={class:"bg-white rounded-lg shadow"},Wy={class:"p-6 border-b"},Ky={class:"text-sm text-gray-600 mt-1"},Jy={key:0,class:"p-8 text-center"},Yy={key:1,class:"p-8 text-center text-gray-500"},Qy={key:2,class:"overflow-x-auto"},Zy={class:"w-full"},eb={class:"divide-y divide-gray-200"},tb={class:"px-6 py-4"},sb={class:"flex items-center"},ob={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},lb={class:"ml-4"},rb={class:"text-sm font-medium text-gray-900"},ab={class:"text-xs text-gray-500"},nb={class:"px-6 py-4 text-sm text-gray-900"},ib={class:"px-6 py-4 text-sm"},db={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},ub={class:"px-6 py-4 text-sm"},cb={class:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},mb={class:"px-6 py-4 text-sm"},gb={class:"flex flex-wrap gap-1"},pb={class:"px-6 py-4 text-sm"},fb={class:"px-6 py-4 text-sm text-gray-600"},xb={class:"px-6 py-4 text-sm"},vb={class:"flex items-center space-x-2"},yb=["onClick"],bb=["onClick"],hb=["onClick","title"],wb=["onClick"],_b={key:3,class:"p-6 border-t"},kb={class:"flex items-center justify-between"},Cb={class:"text-sm text-gray-700"},Mb={class:"flex space-x-2"},Sb=["disabled"],Ab=["disabled"],jb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Pb={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Db={class:"p-6 border-b"},Tb={class:"flex items-center justify-between"},Ub={class:"text-xl font-bold text-primea-blue"},Fb={class:"space-y-4"},Ob={key:0},zb={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Eb={class:"text-sm text-blue-800"},Rb={class:"mt-6 flex justify-end space-x-3"},Vb=["disabled"],Bb={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ib={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},$b={class:"p-6 border-b"},Lb={class:"flex items-center justify-between"},qb={key:0,class:"p-6"},Nb={class:"grid grid-cols-2 gap-6"},Xb={class:"text-gray-900 font-medium"},Hb={class:"text-gray-900"},Gb={class:"text-gray-900"},Wb={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},Kb={class:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium"},Jb={class:"text-gray-900"},Yb={key:0,class:"text-green-600"},Qb={key:1,class:"text-orange-600"},Zb={class:"mt-6"},eh={class:"flex flex-wrap gap-2"},th={class:"p-6 border-t bg-gray-50 flex justify-between"};function sh(d,t,c,o,a,u){return i(),n("div",qy,[t[43]||(t[43]=e("div",{class:"mb-8"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Clients"),e("p",{class:"text-gray-600"},"Gérer les comptes clients")])],-1)),e("div",Ny,[t[19]||(t[19]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Xy,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.filters.search=s),onInput:t[1]||(t[1]=(...s)=>u.debouncedSearch&&u.debouncedSearch(...s)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,a.filters.search]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a.filters.status=s),onChange:t[3]||(t[3]=(...s)=>u.loadClients&&u.loadClients(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[17]||(t[17]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[R,a.filters.status]])]),e("div",Hy,[e("button",{onClick:t[4]||(t[4]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Gy,[e("div",Wy,[t[20]||(t[20]=e("h2",{class:"text-xl font-bold"},"Liste des Clients",-1)),e("p",Ky,"Total: "+l(a.pagination.total)+" client(s)",1)]),a.loading?(i(),n("div",Jy,[...t[21]||(t[21]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.clients.length===0?(i(),n("div",Yy," Aucun client trouvé ")):(i(),n("div",Qy,[e("table",Zy,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commandes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",eb,[(i(!0),n(D,null,T(a.clients,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",tb,[e("div",sb,[e("div",ob,l(s.name.charAt(0).toUpperCase()),1),e("div",lb,[e("div",rb,l(s.name),1),e("div",ab,"ID: "+l(s.id),1)])])]),e("td",nb,l(s.email),1),e("td",ib,[e("span",db,l(s.orders_count||0),1)]),e("td",ub,[e("span",cb,l(s.tickets_count||0),1)]),e("td",mb,[e("div",gb,[(i(!0),n(D,null,T(s.roles,r=>(i(),n("span",{key:r.id,class:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",pb,[e("span",{class:I([u.getStatusClass(s.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatStatus(s.status)),3)]),e("td",fb,l(u.formatDate(s.created_at)),1),e("td",xb,[e("div",vb,[e("button",{onClick:r=>u.viewDetails(s),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,yb),e("button",{onClick:r=>u.openEditModal(s),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,bb),e("button",{onClick:r=>u.toggleStatus(s),class:I(s.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:s.status==="active"?"Désactiver":"Activer"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,hb),e("button",{onClick:r=>u.confirmDelete(s),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,wb)])])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",_b,[e("div",kb,[e("div",Cb," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",Mb,[e("button",{onClick:t[5]||(t[5]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Sb),e("button",{onClick:t[6]||(t[6]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Ab)])])])):x("",!0)]),a.showFormModal?(i(),n("div",jb,[e("div",Pb,[e("div",Db,[e("div",Tb,[e("h3",Ub,l(a.isEditMode?"Modifier le Client":"Créer un Client"),1),e("button",{onClick:t[7]||(t[7]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[27]||(t[27]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[12]||(t[12]=le((...s)=>u.submitForm&&u.submitForm(...s),["prevent"])),class:"p-6"},[e("div",Fb,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>a.formData.name=s),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.formData.email=s),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.email]])]),a.isEditMode?(i(),n("div",Ob,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.formData.status=s),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[R,a.formData.status]])])):x("",!0),e("div",zb,[e("p",Eb,l(a.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",Rb,[e("button",{type:"button",onClick:t[11]||(t[11]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:a.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(a.submitting?"En cours...":a.isEditMode?"Modifier":"Créer"),9,Vb)])],32)])])):x("",!0),a.showDetailsModal?(i(),n("div",Bb,[e("div",Ib,[e("div",$b,[e("div",Lb,[t[33]||(t[33]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails du Client",-1)),e("button",{onClick:t[13]||(t[13]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[32]||(t[32]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedClient?(i(),n("div",qb,[e("div",Nb,[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",Xb,l(a.selectedClient.name),1)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",Hb,l(a.selectedClient.email),1)]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",Gb,l(a.selectedClient.phone||"N/A"),1)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:I([u.getStatusClass(a.selectedClient.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatStatus(a.selectedClient.status)),3)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Commandes",-1)),e("span",Wb,l(a.selectedClient.orders_count||0),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Billets",-1)),e("span",Kb,l(a.selectedClient.tickets_count||0),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",Jb,l(u.formatDate(a.selectedClient.created_at)),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),a.selectedClient.email_verified_at?(i(),n("span",Yb," ✓ Vérifié le "+l(u.formatDate(a.selectedClient.email_verified_at)),1)):(i(),n("span",Qb,"✗ Non vérifié"))])]),e("div",Zb,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",eh,[(i(!0),n(D,null,T(a.selectedClient.roles,s=>(i(),n("span",{key:s.id,class:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium"},l(s.name),1))),128))])])])):x("",!0),e("div",th,[e("button",{onClick:t[14]||(t[14]=s=>u.resetPassword(a.selectedClient)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[15]||(t[15]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const oh=te(Ly,[["render",sh]]),R3=Object.freeze(Object.defineProperty({__proto__:null,default:oh},Symbol.toStringTag,{value:"Module"})),lh={name:"OrganizersUsers",data(){return{organizersUsers:[],loading:!1,submitting:!1,showFormModal:!1,showDetailsModal:!1,isEditMode:!1,selectedOrganizerUser:null,searchTimeout:null,filters:{search:"",status:""},formData:{name:"",email:"",status:"active"},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadOrganizersUsers()},methods:{async loadOrganizersUsers(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/organizers-users",{params:t});c.data.success&&(this.organizersUsers=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement organisateurs users:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les utilisateurs organisateurs"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadOrganizersUsers()},500)},resetFilters(){this.filters={search:"",status:""},this.loadOrganizersUsers()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadOrganizersUsers(d)},openCreateModal(){this.isEditMode=!1,this.formData={name:"",email:"",status:"active"},this.showFormModal=!0},openEditModal(d){this.isEditMode=!0,this.selectedOrganizerUser=d,this.formData={name:d.name,email:d.email,status:d.status},this.showFormModal=!0},closeFormModal(){this.showFormModal=!1,this.selectedOrganizerUser=null},async submitForm(){this.submitting=!0;try{const d={...this.formData,is_organizer:!0},t=this.isEditMode?`/api/v1/admin/users/${this.selectedOrganizerUser.id}`:"/api/v1/admin/users",c=this.isEditMode?"put":"post",o=await J[c](t,d);o.data.success&&(E.fire({icon:"success",title:"Succès",text:o.data.message,timer:2e3}),this.closeFormModal(),this.loadOrganizersUsers(this.pagination.current_page))}catch(d){console.error("Erreur soumission formulaire:",d),E.fire({icon:"error",title:"Erreur",text:d.response?.data?.message||"Une erreur est survenue"})}finally{this.submitting=!1}},viewDetails(d){this.selectedOrganizerUser=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedOrganizerUser=null},async toggleStatus(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/toggle-status`);t.data.success&&(E.fire({icon:"success",title:"Succès",text:t.data.message,timer:2e3}),this.loadOrganizersUsers(this.pagination.current_page))}catch(t){console.error("Erreur changement statut:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Une erreur est survenue"})}},confirmDelete(d){E.fire({title:"Supprimer cet utilisateur organisateur ?",html:`<p>Voulez-vous vraiment supprimer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">Cette action effectue une suppression douce (soft delete). L'utilisateur peut être restauré.</p>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.deleteOrganizerUser(d)})},async deleteOrganizerUser(d){try{const t=await J.delete(`/api/v1/admin/users/${d.id}`);t.data.success&&(E.fire({icon:"success",title:"Supprimé",text:t.data.message,timer:2e3}),this.loadOrganizersUsers(this.pagination.current_page))}catch(t){console.error("Erreur suppression organisateur user:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de supprimer cet utilisateur organisateur"})}},async resetPassword(d){E.fire({title:"Réinitialiser le mot de passe ?",html:`<p>Un email de réinitialisation sera envoyé à <strong>${d.email}</strong></p>`,icon:"question",showCancelButton:!0,confirmButtonText:"Oui, envoyer",cancelButtonText:"Annuler"}).then(async t=>{if(t.isConfirmed)try{const c=await J.post(`/api/v1/admin/users/${d.id}/reset-password`);c.data.success&&E.fire({icon:"success",title:"Email envoyé",text:c.data.message})}catch(c){E.fire({icon:"error",title:"Erreur",text:c.response?.data?.message||"Impossible d'envoyer l'email"})}})},getStatusClass(d){return{active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"}[d]||"bg-gray-100 text-gray-800"},formatStatus(d){return{active:"Actif",inactive:"Inactif",suspended:"Suspendu"}[d]||d},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},rh={class:"organizers-users-page p-6 bg-gray-50 min-h-screen"},ah={class:"mb-8"},nh={class:"flex items-center justify-between"},ih={class:"bg-white rounded-lg shadow p-6 mb-8"},dh={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},uh={class:"flex items-end"},ch={class:"bg-white rounded-lg shadow"},mh={class:"p-6 border-b"},gh={class:"text-sm text-gray-600 mt-1"},ph={key:0,class:"p-8 text-center"},fh={key:1,class:"p-8 text-center text-gray-500"},xh={key:2,class:"overflow-x-auto"},vh={class:"w-full"},yh={class:"divide-y divide-gray-200"},bh={class:"px-6 py-4"},hh={class:"flex items-center"},wh={class:"w-10 h-10 bg-primea-blue text-white rounded-full flex items-center justify-center font-bold"},_h={class:"ml-4"},kh={class:"text-sm font-medium text-gray-900"},Ch={class:"text-xs text-gray-500"},Mh={class:"px-6 py-4 text-sm text-gray-900"},Sh={class:"px-6 py-4 text-sm"},Ah={class:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium"},jh={class:"px-6 py-4 text-sm"},Ph={class:"flex flex-wrap gap-1"},Dh={class:"px-6 py-4 text-sm"},Th={class:"px-6 py-4 text-sm text-gray-600"},Uh={class:"px-6 py-4 text-sm"},Fh={class:"flex items-center space-x-2"},Oh=["onClick"],zh=["onClick"],Eh=["onClick","title"],Rh=["onClick"],Vh={key:3,class:"p-6 border-t"},Bh={class:"flex items-center justify-between"},Ih={class:"text-sm text-gray-700"},$h={class:"flex space-x-2"},Lh=["disabled"],qh=["disabled"],Nh={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Xh={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Hh={class:"p-6 border-b"},Gh={class:"flex items-center justify-between"},Wh={class:"text-xl font-bold text-primea-blue"},Kh={class:"space-y-4"},Jh={key:0},Yh={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},Qh={class:"text-sm text-blue-800"},Zh={class:"mt-6 flex justify-end space-x-3"},e4=["disabled"],t4={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},s4={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},o4={class:"p-6 border-b"},l4={class:"flex items-center justify-between"},r4={key:0,class:"p-6"},a4={class:"grid grid-cols-2 gap-6"},n4={class:"text-gray-900 font-medium"},i4={class:"text-gray-900"},d4={class:"text-gray-900"},u4={class:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium"},c4={class:"text-gray-900"},m4={key:0,class:"text-green-600"},g4={key:1,class:"text-orange-600"},p4={class:"mt-6"},f4={class:"flex flex-wrap gap-2"},x4={class:"p-6 border-t bg-gray-50 flex justify-between"};function v4(d,t,c,o,a,u){return i(),n("div",rh,[e("div",ah,[e("div",nh,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Gestion des Utilisateurs Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les comptes utilisateurs organisateurs")],-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>u.openCreateModal&&u.openCreateModal(...s)),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),se(" Créer un Organisateur User ",-1)])])])]),e("div",ih,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",dh,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.filters.search=s),onInput:t[2]||(t[2]=(...s)=>u.debouncedSearch&&u.debouncedSearch(...s)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,a.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>a.filters.status=s),onChange:t[4]||(t[4]=(...s)=>u.loadOrganizersUsers&&u.loadOrganizersUsers(...s)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[R,a.filters.status]])]),e("div",uh,[e("button",{onClick:t[5]||(t[5]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",ch,[e("div",mh,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs Organisateurs",-1)),e("p",gh,"Total: "+l(a.pagination.total)+" utilisateur(s) organisateur(s)",1)]),a.loading?(i(),n("div",ph,[...t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.organizersUsers.length===0?(i(),n("div",fh," Aucun utilisateur organisateur trouvé ")):(i(),n("div",xh,[e("table",vh,[t[29]||(t[29]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",yh,[(i(!0),n(D,null,T(a.organizersUsers,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",bh,[e("div",hh,[e("div",wh,l(s.name.charAt(0).toUpperCase()),1),e("div",_h,[e("div",kh,l(s.name),1),e("div",Ch,"ID: "+l(s.id),1)])])]),e("td",Mh,l(s.email),1),e("td",Sh,[e("span",Ah,l(s.organizers_count||0),1)]),e("td",jh,[e("div",Ph,[(i(!0),n(D,null,T(s.roles,r=>(i(),n("span",{key:r.id,class:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",Dh,[e("span",{class:I([u.getStatusClass(s.status),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.formatStatus(s.status)),3)]),e("td",Th,l(u.formatDate(s.created_at)),1),e("td",Uh,[e("div",Fh,[e("button",{onClick:r=>u.viewDetails(s),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Oh),e("button",{onClick:r=>u.openEditModal(s),class:"text-green-600 hover:text-green-800",title:"Modifier"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,zh),e("button",{onClick:r=>u.toggleStatus(s),class:I(s.status==="active"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"),title:s.status==="active"?"Désactiver":"Activer"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],10,Eh),e("button",{onClick:r=>u.confirmDelete(s),class:"text-red-600 hover:text-red-800",title:"Supprimer"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Rh)])])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",Vh,[e("div",Bh,[e("div",Ih," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",$h,[e("button",{onClick:t[6]||(t[6]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Lh),e("button",{onClick:t[7]||(t[7]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,qh)])])])):x("",!0)]),a.showFormModal?(i(),n("div",Nh,[e("div",Xh,[e("div",Hh,[e("div",Gh,[e("h3",Wh,l(a.isEditMode?"Modifier l'Utilisateur Organisateur":"Créer un Utilisateur Organisateur"),1),e("button",{onClick:t[8]||(t[8]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[30]||(t[30]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:t[13]||(t[13]=le((...s)=>u.submitForm&&u.submitForm(...s),["prevent"])),class:"p-6"},[e("div",Kh,[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>a.formData.name=s),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>a.formData.email=s),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},null,512),[[M,a.formData.email]])]),a.isEditMode?(i(),n("div",Jh,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>a.formData.status=s),class:"w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-primea-blue"},[...t[33]||(t[33]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[R,a.formData.status]])])):x("",!0),e("div",Yh,[e("p",Qh,l(a.isEditMode?"Les modifications seront appliquées immédiatement.":"Un email sera envoyé à l'utilisateur pour définir son mot de passe."),1)])]),e("div",Zh,[e("button",{type:"button",onClick:t[12]||(t[12]=(...s)=>u.closeFormModal&&u.closeFormModal(...s)),class:"px-4 py-2 border rounded-lg hover:bg-gray-50"}," Annuler "),e("button",{type:"submit",disabled:a.submitting,class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-blue-800 disabled:opacity-50"},l(a.submitting?"En cours...":a.isEditMode?"Modifier":"Créer"),9,e4)])],32)])])):x("",!0),a.showDetailsModal?(i(),n("div",t4,[e("div",s4,[e("div",o4,[e("div",l4,[t[36]||(t[36]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Utilisateur Organisateur",-1)),e("button",{onClick:t[14]||(t[14]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[35]||(t[35]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedOrganizerUser?(i(),n("div",r4,[e("div",a4,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",n4,l(a.selectedOrganizerUser.name),1)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",i4,l(a.selectedOrganizerUser.email),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",d4,l(a.selectedOrganizerUser.phone||"N/A"),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisateurs",-1)),e("span",u4,l(a.selectedOrganizerUser.organizers_count||0),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Statut",-1)),e("span",{class:I([u.getStatusClass(a.selectedOrganizerUser.status),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.formatStatus(a.selectedOrganizerUser.status)),3)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",c4,l(u.formatDate(a.selectedOrganizerUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),a.selectedOrganizerUser.email_verified_at?(i(),n("span",m4," ✓ Vérifié le "+l(u.formatDate(a.selectedOrganizerUser.email_verified_at)),1)):(i(),n("span",g4,"✗ Non vérifié"))])]),e("div",p4,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",f4,[(i(!0),n(D,null,T(a.selectedOrganizerUser.roles,s=>(i(),n("span",{key:s.id,class:"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium"},l(s.name),1))),128))])])])):x("",!0),e("div",x4,[e("button",{onClick:t[15]||(t[15]=s=>u.resetPassword(a.selectedOrganizerUser)),class:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600"}," Réinitialiser le mot de passe "),e("button",{onClick:t[16]||(t[16]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const y4=te(lh,[["render",v4]]),V3=Object.freeze(Object.defineProperty({__proto__:null,default:y4},Symbol.toStringTag,{value:"Module"})),b4={name:"TrashedUsers",data(){return{trashedUsers:[],loading:!1,showDetailsModal:!1,selectedUser:null,searchTimeout:null,filters:{search:""},pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}}},mounted(){this.loadTrashedUsers()},methods:{async loadTrashedUsers(d=1){this.loading=!0;try{const t={page:d,per_page:this.pagination.per_page,...this.filters},c=await J.get("/api/v1/admin/users/trashed",{params:t});c.data.success&&(this.trashedUsers=c.data.data.data,this.pagination={current_page:c.data.data.current_page,last_page:c.data.data.last_page,per_page:c.data.data.per_page,total:c.data.data.total,from:c.data.data.from,to:c.data.data.to})}catch(t){console.error("Erreur chargement utilisateurs supprimés:",t),E.fire({icon:"error",title:"Erreur",text:"Impossible de charger les utilisateurs supprimés"})}finally{this.loading=!1}},debouncedSearch(){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.loadTrashedUsers()},500)},resetFilters(){this.filters={search:""},this.loadTrashedUsers()},goToPage(d){d>=1&&d<=this.pagination.last_page&&this.loadTrashedUsers(d)},viewDetails(d){this.selectedUser=d,this.showDetailsModal=!0},closeDetailsModal(){this.showDetailsModal=!1,this.selectedUser=null},confirmRestore(d){E.fire({title:"Restaurer cet utilisateur ?",html:`<p>Voulez-vous vraiment restaurer <strong>${d.name}</strong> ?</p><p class="text-sm text-gray-600 mt-2">L'utilisateur sera réactivé et pourra à nouveau accéder à son compte.</p>`,icon:"question",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, restaurer",cancelButtonText:"Annuler"}).then(t=>{t.isConfirmed&&this.restoreUser(d)})},async restoreUser(d){try{const t=await J.post(`/api/v1/admin/users/${d.id}/restore`);t.data.success&&(E.fire({icon:"success",title:"Restauré",text:t.data.message,timer:2e3}),this.loadTrashedUsers(this.pagination.current_page))}catch(t){console.error("Erreur restauration utilisateur:",t),E.fire({icon:"error",title:"Erreur",text:t.response?.data?.message||"Impossible de restaurer cet utilisateur"})}},getUserTypeClass(d){return d.is_admin?"bg-red-100 text-red-800":d.is_organizer?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"},getUserTypeLabel(d){return d.is_admin?"Admin":d.is_organizer?"Organisateur":"Client"},formatDate(d){return d?new Date(d).toLocaleDateString("fr-FR",{year:"numeric",month:"short",day:"numeric"}):"N/A"}}},h4={class:"trashed-users-page p-6 bg-gray-50 min-h-screen"},w4={class:"bg-white rounded-lg shadow p-6 mb-8"},_4={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},k4={class:"flex items-end"},C4={class:"bg-white rounded-lg shadow"},M4={class:"p-6 border-b"},S4={class:"text-sm text-gray-600 mt-1"},A4={key:0,class:"p-8 text-center"},j4={key:1,class:"p-8 text-center text-gray-500"},P4={key:2,class:"overflow-x-auto"},D4={class:"w-full"},T4={class:"divide-y divide-gray-200"},U4={class:"px-6 py-4"},F4={class:"flex items-center"},O4={class:"w-10 h-10 bg-gray-400 text-white rounded-full flex items-center justify-center font-bold"},z4={class:"ml-4"},E4={class:"text-sm font-medium text-gray-900"},R4={class:"text-xs text-gray-500"},V4={class:"px-6 py-4 text-sm text-gray-900"},B4={class:"px-6 py-4 text-sm"},I4={class:"flex flex-wrap gap-1"},$4={class:"px-6 py-4 text-sm"},L4={class:"px-6 py-4 text-sm text-gray-600"},q4={class:"px-6 py-4 text-sm"},N4={class:"flex items-center space-x-2"},X4=["onClick"],H4=["onClick"],G4={key:3,class:"p-6 border-t"},W4={class:"flex items-center justify-between"},K4={class:"text-sm text-gray-700"},J4={class:"flex space-x-2"},Y4=["disabled"],Q4=["disabled"],Z4={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},e3={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},t3={class:"p-6 border-b"},s3={class:"flex items-center justify-between"},o3={key:0,class:"p-6"},l3={class:"grid grid-cols-2 gap-6"},r3={class:"text-gray-900 font-medium"},a3={class:"text-gray-900"},n3={class:"text-gray-900"},i3={class:"text-gray-900"},d3={class:"text-red-600 font-medium"},u3={key:0,class:"text-green-600"},c3={key:1,class:"text-orange-600"},m3={class:"mt-6"},g3={class:"flex flex-wrap gap-2"},p3={class:"p-6 border-t bg-gray-50 flex justify-end"};function f3(d,t,c,o,a,u){return i(),n("div",h4,[t[24]||(t[24]=e("div",{class:"mb-8"},[e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue mb-2"},"Corbeille - Utilisateurs Supprimés"),e("p",{class:"text-gray-600"},"Consulter et restaurer les utilisateurs supprimés")])],-1)),e("div",w4,[t[8]||(t[8]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",_4,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.filters.search=s),onInput:t[1]||(t[1]=(...s)=>u.debouncedSearch&&u.debouncedSearch(...s)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[M,a.filters.search]])]),e("div",k4,[e("button",{onClick:t[2]||(t[2]=(...s)=>u.resetFilters&&u.resetFilters(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",C4,[e("div",M4,[t[9]||(t[9]=e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs Supprimés",-1)),e("p",S4,"Total: "+l(a.pagination.total)+" utilisateur(s) supprimé(s)",1)]),a.loading?(i(),n("div",A4,[...t[10]||(t[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):a.trashedUsers.length===0?(i(),n("div",j4," Aucun utilisateur supprimé trouvé ")):(i(),n("div",P4,[e("table",D4,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date de suppression"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",T4,[(i(!0),n(D,null,T(a.trashedUsers,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",U4,[e("div",F4,[e("div",O4,l(s.name.charAt(0).toUpperCase()),1),e("div",z4,[e("div",E4,l(s.name),1),e("div",R4,"ID: "+l(s.id),1)])])]),e("td",V4,l(s.email),1),e("td",B4,[e("div",I4,[(i(!0),n(D,null,T(s.roles,r=>(i(),n("span",{key:r.id,class:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium"},l(r.name),1))),128))])]),e("td",$4,[e("span",{class:I([u.getUserTypeClass(s),"px-2 py-1 rounded-full text-xs font-medium"])},l(u.getUserTypeLabel(s)),3)]),e("td",L4,l(u.formatDate(s.deleted_at)),1),e("td",q4,[e("div",N4,[e("button",{onClick:r=>u.viewDetails(s),class:"text-blue-600 hover:text-blue-800",title:"Voir les détails"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,X4),e("button",{onClick:r=>u.confirmRestore(s),class:"text-green-600 hover:text-green-800",title:"Restaurer"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,H4)])])]))),128))])])])),a.pagination.total>a.pagination.per_page?(i(),n("div",G4,[e("div",W4,[e("div",K4," Affichage de "+l(a.pagination.from)+" à "+l(a.pagination.to)+" sur "+l(a.pagination.total)+" résultats ",1),e("div",J4,[e("button",{onClick:t[3]||(t[3]=s=>u.goToPage(a.pagination.current_page-1)),disabled:a.pagination.current_page===1,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Précédent ",8,Y4),e("button",{onClick:t[4]||(t[4]=s=>u.goToPage(a.pagination.current_page+1)),disabled:a.pagination.current_page===a.pagination.last_page,class:"px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," Suivant ",8,Q4)])])])):x("",!0)]),a.showDetailsModal?(i(),n("div",Z4,[e("div",e3,[e("div",t3,[e("div",s3,[t[15]||(t[15]=e("h3",{class:"text-xl font-bold text-primea-blue"},"Détails de l'Utilisateur Supprimé",-1)),e("button",{onClick:t[5]||(t[5]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"text-gray-400 hover:text-gray-600"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),a.selectedUser?(i(),n("div",o3,[e("div",l3,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),e("p",r3,l(a.selectedUser.name),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),e("p",a3,l(a.selectedUser.email),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Téléphone",-1)),e("p",n3,l(a.selectedUser.phone||"N/A"),1)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),e("span",{class:I([u.getUserTypeClass(a.selectedUser),"px-3 py-1 rounded-full text-sm font-medium"])},l(u.getUserTypeLabel(a.selectedUser)),3)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date d'inscription",-1)),e("p",i3,l(u.formatDate(a.selectedUser.created_at)),1)]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date de suppression",-1)),e("p",d3,l(u.formatDate(a.selectedUser.deleted_at)),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email vérifié",-1)),a.selectedUser.email_verified_at?(i(),n("span",u3," ✓ Vérifié le "+l(u.formatDate(a.selectedUser.email_verified_at)),1)):(i(),n("span",c3,"✗ Non vérifié"))])]),e("div",m3,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôles",-1)),e("div",g3,[(i(!0),n(D,null,T(a.selectedUser.roles,s=>(i(),n("span",{key:s.id,class:"bg-gray-100 text-gray-800 px-3 py-1 rounded-full text-sm font-medium"},l(s.name),1))),128))])])])):x("",!0),e("div",p3,[e("button",{onClick:t[6]||(t[6]=(...s)=>u.closeDetailsModal&&u.closeDetailsModal(...s)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])])):x("",!0)])}const x3=te(b4,[["render",f3]]),B3=Object.freeze(Object.defineProperty({__proto__:null,default:x3},Symbol.toStringTag,{value:"Module"}));export{h3 as A,T3 as C,k3 as E,_3 as O,M3 as P,j3 as R,P3 as S,B3 as T,w3 as U,U3 as V,C3 as a,S3 as b,A3 as c,D3 as d,F3 as e,O3 as f,z3 as g,E3 as h,R3 as i,V3 as j};
