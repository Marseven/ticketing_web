import{b as A,Y as H,d as K,Z as Q,j as d,o as u,k as e,t as l,a1 as $,l as _,a2 as ae,a3 as ve,g as re,O as ue,w as L,a4 as ee,a as te,y as me,N as xe,e as ye,a5 as _e,G as R,H as N,q,p as T,n as M,D as w,E,F as oe,P as pe,X as he,_ as we,J as ne,K as ce,a6 as de,R as ie,T as ge,a7 as ke,L as $e,a8 as Ce,u as fe,W as J,a9 as le,$ as Y,C as Ee,S as je}from"./vue-vendor-CDZB1Wme.js";import{_ as Z,u as be}from"./account-SYOFlVBk.js";import{a as se,S as V}from"./vendor-BvANJOFB.js";const U=se.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}});U.interceptors.request.use(async x=>{const s=localStorage.getItem("auth_token")||localStorage.getItem("token");s&&(x.headers.Authorization=`Bearer ${s}`);const C=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");return C&&(x.headers["X-CSRF-TOKEN"]=C),x.headers["X-Requested-With"]="XMLHttpRequest",x},x=>Promise.reject(x));U.interceptors.response.use(x=>x,x=>(x.response?.status===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(x)));const Cl={getTicket(x){return U.get(`/tickets/${x}`)},retrieveTickets(x){return U.get(`/tickets/retrieve/${x}`)},validateTicket(x,s="validate"){return U.post("/tickets/validate",{qr_code:x,action:s})},searchTickets(x){const{reference:s,phone:C,email:a}=x;return s?this.getTicket(s):a||C?new Promise((P,c)=>{setTimeout(()=>{a?.includes("test")||C?.includes("123")||s?.includes("TKT")?P({data:{tickets:[{id:1,code:"TKT-2024-ABC123",status:"issued",event:{id:1,title:"L'OISEAU RARE",slug:"oiseau-rare",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",venue_name:"Entre Nous Bar"},ticket_type:{id:1,name:"Standard",description:"Accès standard"},buyer:{name:"John Doe",email:a||"john@example.com"},issued_at:"27/07/2025 10:00:00",used_at:null,schedule:{starts_at:"27/07/2025 20:00:00",ends_at:"27/07/2025 23:00:00",door_time:"27/07/2025 19:30:00"}}]}}):c(new Error("Aucun ticket trouvé avec ces informations"))},1500)}):Promise.reject(new Error("Veuillez fournir au moins un critère de recherche"))}},El={createGuestOrder(x){return se.post("/api/guest/orders",x,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestOrder(x){return se.get(`/api/guest/orders/${x}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestTicket(x){return se.get(`/api/guest/tickets/${x}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},retrieveGuestTickets(x){return se.get(`/api/guest/tickets/retrieve/${encodeURIComponent(x)}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}},G={getDashboardStats(){return U.get("/organizer/dashboard/stats")},getRecentEvents(){return U.get("/organizer/events/recent")},getNotifications(){return U.get("/organizer/notifications")},getEvents(x={}){return U.get("/organizer/events",{params:x})},createEvent(x){return U.post("/organizer/events",x)},updateEvent(x,s){return U.put(`/organizer/events/${x}`,s)},getEvent(x){return U.get(`/organizer/events/${x}`)},getEventStats(x){return U.get(`/organizer/events/${x}/stats`)},getBalance(){return U.get("/organizer/balance")},getPaymentHistory(){return U.get("/organizer/payments")},getProfile(){return U.get("/organizer/profile")},updateProfile(x){return U.put("/organizer/profile",x)},uploadAvatar(x){return U.post("/organizer/profile/avatar",x,{headers:{"Content-Type":"multipart/form-data"}})},getCategories(){return U.get("/categories")},getVenues(){return U.get("/venues")}},Ae={class:"organizer-dashboard min-h-screen"},Se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Pe={class:"mb-8"},ze={class:"flex items-center justify-between"},Ve={class:"flex items-center space-x-4"},De={class:"text-right"},Te={class:"text-sm font-semibold text-primea-blue font-primea"},Be={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},Me=["src","alt"],Fe={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},Ue={class:"text-lg font-bold font-primea"},qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Re={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},Oe={class:"flex items-center"},Ie={class:"p-2 bg-primea-blue/10 rounded-lg"},Ne={class:"ml-4"},Xe={class:"text-2xl font-bold text-primea-blue font-primea"},Le={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},Ge={class:"flex items-center"},He={class:"p-2 bg-green-100 rounded-lg"},We={class:"ml-4"},Ke={class:"text-2xl font-bold text-green-600 font-primea"},Je={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},Qe={class:"flex items-center"},Ze={class:"p-2 bg-primea-yellow/10 rounded-lg"},Ye={class:"ml-4"},et={class:"text-2xl font-bold text-primea-yellow font-primea"},tt={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},st={class:"flex items-center"},ot={class:"p-2 bg-purple-100 rounded-lg"},rt={class:"ml-4"},at={class:"text-2xl font-bold text-purple-600 font-primea"},nt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},it={class:"lg:col-span-2"},lt={class:"bg-white rounded-primea shadow-primea p-6"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ut={class:"bg-white rounded-primea shadow-primea p-6"},mt={class:"space-y-4"},pt={key:0,class:"text-center text-gray-500 py-8"},ct={class:"text-sm font-medium font-primea"},gt={class:"text-xs text-gray-600 mt-1"},ft={class:"text-xs text-gray-400 mt-2"},bt={class:"bg-white rounded-primea shadow-primea overflow-hidden"},vt={class:"p-6 border-b border-gray-200"},xt={class:"flex items-center justify-between"},yt={key:0,class:"p-8 text-center text-gray-500"},_t={key:1,class:"overflow-x-auto"},ht={class:"w-full"},wt={class:"divide-y divide-gray-200"},kt={class:"px-6 py-4"},$t={class:"text-sm font-medium text-gray-900 font-primea"},Ct={class:"text-sm text-gray-500"},Et={class:"px-6 py-4 text-sm text-gray-900 font-primea"},jt={class:"px-6 py-4"},At={class:"px-6 py-4 text-sm text-gray-900 font-primea"},St={class:"px-6 py-4 text-sm"},Pt={__name:"OrganizerDashboard",setup(x){const s=be(),C=A(!1),a=H({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),P=A([]),c=A([]),i=K(()=>{const b=s.user;return b?.name?b.name.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2):"U"}),g=K(()=>s.user?.avatar_url||null),r=async()=>{C.value=!0;try{const[b,o,j]=await Promise.all([G.getDashboardStats(),G.getRecentEvents(),G.getNotifications()]);Object.assign(a,b.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),P.value=o.data.data||[],c.value=j.data.data||[]}catch(b){console.error("Erreur lors du chargement du dashboard:",b),Object.assign(a,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),P.value=[],c.value=[]}finally{C.value=!1}},F=b=>new Intl.NumberFormat("fr-FR").format(b),D=b=>new Date(b).toLocaleDateString("fr-FR"),z=b=>new Date(b).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=b=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[b]||b,O=b=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[b]||"bg-gray-100 text-gray-800",I=b=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[b]||"border-gray-300";return Q(()=>{r()}),(b,o)=>{const j=te("router-link");return u(),d("div",Ae,[e("div",Se,[e("div",Pe,[e("div",ze,[o[1]||(o[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",Ve,[e("div",De,[o[0]||(o[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",Te,l(D(new Date)),1)]),g.value?(u(),d("div",Be,[e("img",{src:g.value,alt:$(s).user?.name,class:"w-full h-full object-cover"},null,8,Me)])):(u(),d("div",Fe,[e("span",Ue,l(i.value),1)]))])])]),e("div",qe,[e("div",Re,[e("div",Oe,[e("div",Ie,[_($(ae),{class:"w-6 h-6 text-primea-blue"})]),e("div",Ne,[o[2]||(o[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",Xe,l(a.total_events),1)])])]),e("div",Le,[e("div",Ge,[e("div",He,[_($(ve),{class:"w-6 h-6 text-green-600"})]),e("div",We,[o[3]||(o[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",Ke,l(a.active_events),1)])])]),e("div",Je,[e("div",Qe,[e("div",Ze,[_($(re),{class:"w-6 h-6 text-primea-yellow"})]),e("div",Ye,[o[4]||(o[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",et,l(a.tickets_sold),1)])])]),e("div",tt,[e("div",st,[e("div",ot,[_($(ue),{class:"w-6 h-6 text-purple-600"})]),e("div",rt,[o[5]||(o[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",at,l(F(a.total_revenue))+" XAF",1)])])])]),e("div",nt,[e("div",it,[e("div",lt,[o[10]||(o[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",dt,[_(j,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:L(()=>[_($(ee),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),o[6]||(o[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),_(j,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:L(()=>[_($(me),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),o[7]||(o[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),_(j,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:L(()=>[_($(xe),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),o[8]||(o[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),_(j,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:L(()=>[_($(ye),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),o[9]||(o[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",ut,[o[12]||(o[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",mt,[c.value.length===0?(u(),d("div",pt,[_($(_e),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[11]||(o[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(u(!0),d(R,{key:1},N(c.value,v=>(u(),d("div",{key:v.id,class:q(["p-3 bg-gray-50 rounded-primea border-l-4",I(v.type)])},[e("p",ct,l(v.title),1),e("p",gt,l(v.message),1),e("p",ft,l(z(v.created_at)),1)],2))),128))])])]),e("div",bt,[e("div",vt,[e("div",xt,[o[14]||(o[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),_(j,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:L(()=>[...o[13]||(o[13]=[T(" Voir tous ",-1)])]),_:1})])]),P.value.length===0?(u(),d("div",yt,[_($(ae),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),o[16]||(o[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),o[17]||(o[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),_(j,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:L(()=>[_($(ee),{class:"w-4 h-4 mr-2"}),o[15]||(o[15]=T(" Créer un événement ",-1))]),_:1})])):(u(),d("div",_t,[e("table",ht,[o[19]||(o[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",wt,[(u(!0),d(R,null,N(P.value,v=>(u(),d("tr",{key:v.id,class:"hover:bg-gray-50"},[e("td",kt,[e("div",null,[e("p",$t,l(v.title),1),e("p",Ct,l(v.venue_name),1)])]),e("td",Et,l(D(v.event_date)),1),e("td",jt,[e("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",O(v.status)])},l(B(v.status)),3)]),e("td",At,l(v.tickets_sold||0),1),e("td",St,[_(j,{to:{name:"organizer-event-detail",params:{slug:v.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:L(()=>[...o[18]||(o[18]=[T(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},zt=Z(Pt,[["__scopeId","data-v-1685f411"]]),jl=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),Vt={name:"OrganizerEvents",components:{PlusIcon:ee},setup(){const x=ne(),s=A(""),C=A(""),a=A("grid"),P=A(!1),c=A([]),i=H({current:1,total:1,perPage:15}),g=async()=>{P.value=!0;try{const p=(await G.getEvents({page:i.current,status:C.value,search:s.value})).data.data.events;c.value=p.data.map(n=>({...n,tickets_sold:n.tickets?.filter(S=>["issued","used"].includes(S.status)).length||0,total_tickets:n.ticket_types?.reduce((S,k)=>S+k.capacity,0)||0,revenue:n.tickets?.filter(S=>["issued","used"].includes(S.status)).reduce((S,k)=>S+(k.ticket_type?.price||0),0)||0,venue:n.venue?.name||"",image:n.image_url||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",date:n.event_date||n.schedules?.[0]?.starts_at,isFavorite:!1})),i.current=p.current_page,i.total=p.last_page,i.perPage=p.per_page}catch(h){console.error("Erreur chargement événements:",h),V.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{P.value=!1}},r=K(()=>{let h=[...c.value];if(s.value){const p=s.value.toLowerCase();h=h.filter(n=>n.title.toLowerCase().includes(p)||n.venue.toLowerCase().includes(p))}return C.value&&(h=h.filter(p=>p.status===C.value)),h}),F=K(()=>{const h=c.value.filter(k=>k.is_active&&k.status!=="cancelled").length,p=c.value.filter(k=>!k.is_active).length,n=c.value.reduce((k,y)=>k+(y.tickets_sold||0),0),S=c.value.reduce((k,y)=>k+(y.revenue||0),0);return{published:h,draft:p,totalTicketsSold:n,totalRevenue:S}}),D=h=>new Intl.NumberFormat("fr-FR").format(h),z=(h,p="full")=>{const n=new Date(h);return p==="short"?n.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):n.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},B=h=>h.is_active?h.status==="cancelled"?"bg-red-100 text-red-800":new Date(h.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",O=h=>h.is_active?h.status==="cancelled"?"Annulé":new Date(h.date)<new Date?"Terminé":"Actif":"Brouillon",I=h=>{h.isFavorite=!h.isFavorite},b=async h=>{try{const p={title:`${h.title} (Copie)`,description:h.description,event_date:h.date,venue_id:h.venue_id,category_id:h.category_id,is_active:!1};await G.createEvent(p),await g(),V.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{V.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},o=h=>{x.push({name:"organizer-event-edit",params:{slug:h.slug}})},j=async h=>{if((await V.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${h.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await g(),V.fire("Supprimé !","L'événement a été supprimé.","success")}catch{V.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};we([s,C],()=>{i.current=1,g()},{debounce:300});const v=h=>{i.current=h,g()};return Q(()=>{g()}),{searchQuery:s,statusFilter:C,viewMode:a,loading:P,events:c,filteredEvents:r,stats:F,pagination:i,formatPrice:D,formatEventDate:z,getStatusClass:B,getStatusText:O,toggleFavorite:I,duplicateEvent:b,editEvent:o,deleteEvent:j,loadEvents:g,changePage:v}}},Dt={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Tt={class:"bg-white shadow-sm border-b border-gray-200"},Bt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Mt={class:"flex items-center justify-between"},Ft={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Ut={class:"bg-white rounded-lg shadow-md p-6 mb-8"},qt={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},Rt={class:"flex items-center space-x-4"},Ot={class:"relative"},It={class:"flex items-center space-x-4"},Nt={class:"text-sm text-gray-600"},Xt={class:"flex bg-gray-100 rounded-lg p-1"},Lt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Gt={class:"text-center"},Ht={class:"text-2xl font-bold text-blue-600"},Wt={class:"text-center"},Kt={class:"text-2xl font-bold text-yellow-600"},Jt={class:"text-center"},Qt={class:"text-2xl font-bold text-green-600"},Zt={class:"text-center"},Yt={class:"text-2xl font-bold text-purple-600"},es={key:0},ts={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ss={class:"relative"},os=["src","alt"],rs={class:"absolute top-4 left-4"},as={class:"absolute top-4 right-4"},ns=["onClick"],is={class:"p-6"},ls={class:"text-lg font-bold text-gray-800 mb-2"},ds={class:"text-gray-600 text-sm mb-4"},us={class:"flex items-center justify-between mb-4"},ms={class:"text-sm text-gray-600 font-primea"},ps={class:"font-medium font-primea"},cs={class:"text-sm font-bold text-green-600 font-primea"},gs={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},fs={class:"flex space-x-2"},bs=["onClick"],vs={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},xs={class:"w-full"},ys={class:"bg-white divide-y divide-gray-200"},_s={class:"px-6 py-4 whitespace-nowrap"},hs={class:"flex items-center"},ws=["src","alt"],ks={class:"text-sm font-medium text-gray-900"},$s={class:"text-sm text-gray-500"},Cs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Es={class:"px-6 py-4 whitespace-nowrap"},js={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},As={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},Ss={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Ps=["onClick"],zs=["onClick"],Vs={key:1,class:"text-center py-16"},Ds={class:"text-gray-600 mb-6"},Ts={key:0},Bs={key:1},Ms={key:2,class:"mt-8 flex justify-center"},Fs={class:"flex items-center space-x-2"},Us=["disabled"],qs=["onClick"],Rs={key:1,class:"px-2 text-gray-500"},Os=["disabled"];function Is(x,s,C,a,P,c){const i=te("PlusIcon"),g=te("router-link");return u(),d("div",Dt,[e("div",Tt,[e("div",Bt,[e("div",Mt,[s[7]||(s[7]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),_(g,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:L(()=>[_(i,{class:"w-4 h-4 inline mr-2"}),s[6]||(s[6]=T(" Nouvel événement ",-1))]),_:1})])])]),e("div",Ft,[e("div",Ut,[e("div",qt,[e("div",Rt,[e("div",Ot,[s[8]||(s[8]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),w(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>a.searchQuery=r),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[E,a.searchQuery]])]),w(e("select",{"onUpdate:modelValue":s[1]||(s[1]=r=>a.statusFilter=r),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...s[9]||(s[9]=[pe('<option value="" data-v-b1abcf34>Tous les statuts</option><option value="draft" data-v-b1abcf34>Brouillons</option><option value="published" data-v-b1abcf34>Publiés</option><option value="completed" data-v-b1abcf34>Terminés</option><option value="cancelled" data-v-b1abcf34>Annulés</option>',5)])],512),[[oe,a.statusFilter]])]),e("div",It,[e("div",Nt,l(a.filteredEvents.length)+" événement"+l(a.filteredEvents.length>1?"s":""),1),e("div",Xt,[e("button",{onClick:s[2]||(s[2]=r=>a.viewMode="grid"),class:q(["px-3 py-2 rounded-lg transition-colors",a.viewMode==="grid"?"bg-white shadow-sm":""])},[...s[10]||(s[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:s[3]||(s[3]=r=>a.viewMode="list"),class:q(["px-3 py-2 rounded-lg transition-colors",a.viewMode==="list"?"bg-white shadow-sm":""])},[...s[11]||(s[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",Lt,[e("div",Gt,[e("p",Ht,l(a.stats.published),1),s[12]||(s[12]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",Wt,[e("p",Kt,l(a.stats.draft),1),s[13]||(s[13]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",Jt,[e("p",Qt,l(a.stats.totalTicketsSold),1),s[14]||(s[14]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",Zt,[e("p",Yt,l(a.formatPrice(a.stats.totalRevenue))+" XAF",1),s[15]||(s[15]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),a.filteredEvents.length>0?(u(),d("div",es,[a.viewMode==="grid"?(u(),d("div",ts,[(u(!0),d(R,null,N(a.filteredEvents,r=>(u(),d("div",{key:r.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",ss,[e("img",{src:r.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400",alt:r.title,class:"w-full h-48 object-cover"},null,8,os),e("div",rs,[e("span",{class:q(["px-3 py-1 rounded-full text-xs font-semibold",a.getStatusClass(r.status)])},l(a.getStatusText(r.status)),3)]),e("div",as,[e("button",{onClick:F=>a.toggleFavorite(r),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(u(),d("svg",{class:q(["w-4 h-4",r.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...s[16]||(s[16]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,ns)])]),e("div",is,[e("h3",ls,l(r.title),1),e("p",ds,l(a.formatEventDate(r.date)),1),e("div",us,[e("div",ms,[e("span",ps,l(r.tickets_sold||0),1),T(" / "+l(r.total_tickets||0)+" tickets vendus ",1)]),e("div",cs,l(a.formatPrice(r.revenue||0))+" XAF ",1)]),e("div",gs,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:he({width:`${Math.min((r.ticketsSold||0)/(r.totalTickets||100)*100,100)}%`})},null,4)]),e("div",fs,[_(g,{to:{name:"organizer-event-detail",params:{slug:r.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:L(()=>[...s[17]||(s[17]=[T(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:F=>a.duplicateEvent(r),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,bs)])])]))),128))])):(u(),d("div",vs,[e("table",xs,[s[19]||(s[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ys,[(u(!0),d(R,null,N(a.filteredEvents,r=>(u(),d("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",_s,[e("div",hs,[e("img",{src:r.image||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=60",alt:r.title,class:"w-12 h-12 object-cover rounded-lg mr-4"},null,8,ws),e("div",null,[e("div",ks,l(r.title),1),e("div",$s,l(r.venue),1)])])]),e("td",Cs,l(a.formatEventDate(r.date,"short")),1),e("td",Es,[e("span",{class:q(["px-2 py-1 rounded-full text-xs font-medium font-primea",a.getStatusClass(r)])},l(a.getStatusText(r)),3)]),e("td",js,l(r.tickets_sold||0)+" / "+l(r.total_tickets||0),1),e("td",As,l(a.formatPrice(r.revenue||0))+" XAF ",1),e("td",Ss,[_(g,{to:{name:"organizer-event-detail",params:{slug:r.slug}},class:"text-blue-600 hover:text-blue-900"},{default:L(()=>[...s[18]||(s[18]=[T(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:F=>a.editEvent(r),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,Ps),e("button",{onClick:F=>a.deleteEvent(r),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,zs)])]))),128))])])]))])):(u(),d("div",Vs,[s[21]||(s[21]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),s[22]||(s[22]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",Ds,[a.searchQuery||a.statusFilter?(u(),d("span",Ts," Aucun événement ne correspond à vos critères de recherche. ")):(u(),d("span",Bs," Commencez par créer votre premier événement ! "))]),_(g,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:L(()=>[...s[20]||(s[20]=[T(" + Créer mon premier événement ",-1)])]),_:1})])),a.events.length>0&&a.pagination.total>1?(u(),d("div",Ms,[e("nav",Fs,[e("button",{onClick:s[4]||(s[4]=r=>a.changePage(a.pagination.current-1)),disabled:a.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,Us),(u(!0),d(R,null,N(a.pagination.total,r=>(u(),d(R,{key:r},[r===1||r===a.pagination.total||r>=a.pagination.current-1&&r<=a.pagination.current+1?(u(),d("button",{key:0,onClick:F=>a.changePage(r),class:q(["px-3 py-2 text-sm font-medium rounded-lg font-primea",r===a.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},l(r),11,qs)):r===a.pagination.current-2||r===a.pagination.current+2?(u(),d("span",Rs," ... ")):M("",!0)],64))),128)),e("button",{onClick:s[5]||(s[5]=r=>a.changePage(a.pagination.current+1)),disabled:a.pagination.current===a.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,Os)])])):M("",!0)])])}const Ns=Z(Vt,[["render",Is],["__scopeId","data-v-b1abcf34"]]),Al=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"})),Xs={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Ls={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Gs={key:0,class:"flex justify-center items-center h-64"},Hs={key:1,class:"text-center py-16"},Ws={class:"mb-4"},Ks={class:"text-gray-600 mb-6"},Js={key:2},Qs={class:"mb-8"},Zs={class:"flex items-center justify-between"},Ys={class:"flex items-center space-x-4"},eo={class:"text-3xl font-bold text-primea-blue font-primea"},to={class:"flex items-center space-x-3"},so={class:"flex space-x-2"},oo={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},ro={class:"bg-white rounded-primea shadow-primea p-6"},ao={class:"flex items-center"},no={class:"p-2 bg-blue-100 rounded-lg"},io={class:"ml-4"},lo={class:"text-2xl font-bold text-blue-600 font-primea"},uo={class:"bg-white rounded-primea shadow-primea p-6"},mo={class:"flex items-center"},po={class:"p-2 bg-green-100 rounded-lg"},co={class:"ml-4"},go={class:"text-2xl font-bold text-green-600 font-primea"},fo={class:"bg-white rounded-primea shadow-primea p-6"},bo={class:"flex items-center"},vo={class:"p-2 bg-yellow-100 rounded-lg"},xo={class:"ml-4"},yo={class:"text-2xl font-bold text-yellow-600 font-primea"},_o={class:"bg-white rounded-primea shadow-primea p-6"},ho={class:"flex items-center"},wo={class:"p-2 bg-purple-100 rounded-lg"},ko={class:"ml-4"},$o={class:"text-lg font-bold text-purple-600 font-primea"},Co={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Eo={class:"lg:col-span-2 space-y-6"},jo={class:"bg-white rounded-primea shadow-primea p-6"},Ao={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},So={class:"mt-1 text-gray-900 font-primea"},Po={class:"mt-1 text-gray-900 font-primea"},zo={class:"mt-1 text-gray-900 font-primea"},Vo={class:"md:col-span-2"},Do={class:"mt-1 text-gray-900 font-primea leading-relaxed"},To={class:"bg-white rounded-primea shadow-primea p-6"},Bo={key:0,class:"space-y-4"},Mo={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Fo={class:"mt-1 text-gray-900 font-primea"},Uo={class:"mt-1 text-gray-900 font-primea"},qo={class:"mt-1 text-gray-900 font-primea"},Ro={key:1,class:"text-center py-8 text-gray-500"},Oo={class:"bg-white rounded-primea shadow-primea p-6"},Io={key:0,class:"space-y-4"},No={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},Xo={class:"md:col-span-2"},Lo={class:"flex items-center justify-between mb-2"},Go={class:"font-semibold text-gray-900 font-primea"},Ho={class:"text-gray-600 text-sm font-primea"},Wo={class:"text-center"},Ko={class:"text-lg font-bold text-primea-blue font-primea"},Jo={class:"text-center"},Qo={class:"text-sm font-primea"},Zo={class:"font-medium text-gray-900"},Yo={class:"font-medium text-gray-900"},er={class:"text-xs text-gray-500 mt-1"},tr={key:1,class:"text-center py-8 text-gray-500"},sr={class:"bg-white rounded-primea shadow-primea p-6"},or={key:0,class:"overflow-x-auto"},rr={class:"w-full"},ar={class:"divide-y divide-gray-200"},nr={class:"px-4 py-3 text-sm text-gray-900 font-primea"},ir={class:"px-4 py-3 text-sm text-gray-900 font-primea"},lr={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},dr={class:"px-4 py-3 text-sm text-gray-500 font-primea"},ur={key:1,class:"text-center py-8 text-gray-500"},mr={class:"space-y-6"},pr={class:"bg-white rounded-primea shadow-primea p-6"},cr={class:"space-y-3"},gr={key:0,class:"bg-white rounded-primea shadow-primea p-6"},fr=["src","alt"],br={class:"bg-white rounded-primea shadow-primea p-6"},vr={class:"space-y-3"},xr={class:"flex items-center justify-between"},yr={class:"flex items-center justify-between"},_r={class:"flex items-center justify-between"},hr={class:"text-sm text-gray-600 font-primea"},wr={__name:"EventDetail",setup(x){const s=fe(),C=ne(),a=A(!0),P=A(null),c=A(null),i=A([]),g=async()=>{a.value=!0,P.value=null;try{let p=s.params.slug,n;if(/^\d+$/.test(p))n=(await G.getEvent(p)).data.data;else try{const S=await G.getEvents();if(n=(S.data.data.events.data||S.data.data.events).find(y=>y.slug===p),!n)throw new Error(`Événement avec le slug "${p}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${p}" non trouvé`)}if(!n)throw new Error("Événement introuvable");c.value={...n,venue_name:n.venue?.name||"Lieu non spécifié",venue_address:n.venue?.address||"",category_name:n.category?.name||"Non spécifiée",tickets_sold:n.tickets?.filter(S=>["issued","used"].includes(S.status)).length||0,total_revenue:n.tickets?.filter(S=>["issued","used"].includes(S.status)).reduce((S,k)=>S+(k.ticket_type?.price||0),0)||0,is_public:n.is_active||!1,sales_active:n.is_active||!1},n.ticket_types&&(c.value.ticket_types=n.ticket_types.map(S=>({...S,sold:n.tickets?.filter(k=>k.ticket_type_id===S.id&&["issued","used"].includes(k.status)).length||0}))),c.value.tickets_sold>0?i.value=[{id:1,customer_name:"Kofi Asante",ticket_quantity:2,total_amount:c.value.ticket_types?.[0]?.price*2||5e4,created_at:new Date(Date.now()-864e5).toISOString()},{id:2,customer_name:"Aminata Traore",ticket_quantity:1,total_amount:c.value.ticket_types?.[0]?.price||25e3,created_at:new Date(Date.now()-1728e5).toISOString()}]:i.value=[]}catch(p){console.error("Erreur lors du chargement de l'événement:",p),p.response?.status===404?P.value=`Événement avec l'identifiant "${s.params.slug}" non trouvé`:p.message?P.value=p.message:P.value="Erreur lors du chargement de l'événement"}finally{a.value=!1}},r=()=>{C.push({name:"organizer-event-edit",params:{slug:c.value.slug}})},F=async()=>{if((await V.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await G.updateEvent(c.value.id,{status:"published",is_active:!0}),c.value.status="published",c.value.is_active=!0,V.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(n){console.error("Erreur publication:",n),V.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},D=async()=>{const p=`${window.location.origin}/events/${c.value.slug}`;try{await navigator.clipboard.writeText(p),V.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{V.fire({title:"Lien de l'événement",html:`<input type="text" value="${p}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},z=()=>{const p=`/events/${c.value.slug}`;window.open(p,"_blank")},B=()=>{V.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},O=p=>new Intl.NumberFormat("fr-FR").format(p),I=p=>new Date(p).toLocaleDateString("fr-FR"),b=p=>new Date(p).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),o=p=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[p]||p,j=p=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[p]||"bg-gray-100 text-gray-800",v=p=>p.capacity||p.available_quantity||p.max_quantity||p.quantity||"Illimité",h=p=>{const n=p.sold||0,S=p.capacity||p.available_quantity||p.max_quantity||p.quantity;return!S||S==="Illimité"||S<=0?0:Math.round(n/S*100)};return Q(()=>{g()}),(p,n)=>{const S=te("router-link");return u(),d("div",Xs,[e("div",Ls,[a.value?(u(),d("div",Gs,[...n[1]||(n[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):P.value?(u(),d("div",Hs,[e("div",Ws,[_($(ce),{class:"w-16 h-16 mx-auto text-red-500"})]),n[3]||(n[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",Ks,l(P.value),1),_(S,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:L(()=>[...n[2]||(n[2]=[T(" Retour aux événements ",-1)])]),_:1})])):c.value?(u(),d("div",Js,[e("div",Qs,[e("div",Zs,[e("div",Ys,[e("button",{onClick:n[0]||(n[0]=k=>p.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_($(de),{class:"w-6 h-6"})]),e("div",null,[e("h1",eo,l(c.value.title),1),n[4]||(n[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",to,[e("span",{class:q(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",j(c.value.status)])},l(o(c.value.status)),3),e("div",so,[e("button",{onClick:r,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_($(ie),{class:"w-4 h-4 inline mr-2"}),n[5]||(n[5]=T(" Modifier ",-1))]),c.value.status==="draft"?(u(),d("button",{key:0,onClick:F,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[_($(ge),{class:"w-4 h-4 inline mr-2"}),n[6]||(n[6]=T(" Publier ",-1))])):M("",!0)])])])]),e("div",oo,[e("div",ro,[e("div",ao,[e("div",no,[_($(re),{class:"w-6 h-6 text-blue-600"})]),e("div",io,[n[7]||(n[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",lo,l(c.value.tickets_sold||0),1)])])]),e("div",uo,[e("div",mo,[e("div",po,[_($(ue),{class:"w-6 h-6 text-green-600"})]),e("div",co,[n[8]||(n[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",go,l(O(c.value.total_revenue||0))+" XAF",1)])])]),e("div",fo,[e("div",bo,[e("div",vo,[_($(ke),{class:"w-6 h-6 text-yellow-600"})]),e("div",xo,[n[9]||(n[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",yo,l(c.value.max_attendees||"Illimitée"),1)])])]),e("div",_o,[e("div",ho,[e("div",wo,[_($(ae),{class:"w-6 h-6 text-purple-600"})]),e("div",ko,[n[10]||(n[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",$o,l(I(c.value.event_date)),1)])])])]),e("div",Co,[e("div",Eo,[e("div",jo,[n[15]||(n[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",Ao,[e("div",null,[n[11]||(n[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",So,l(c.value.title),1)]),e("div",null,[n[12]||(n[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",Po,l(c.value.venue_name),1)]),e("div",null,[n[13]||(n[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",zo,l(c.value.category_name||"Non spécifiée"),1)]),e("div",Vo,[n[14]||(n[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",Do,l(c.value.description||"Aucune description"),1)])])]),e("div",To,[n[20]||(n[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),c.value.schedules&&c.value.schedules.length>0?(u(),d("div",Bo,[(u(!0),d(R,null,N(c.value.schedules,k=>(u(),d("div",{key:k.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Mo,[e("div",null,[n[16]||(n[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",Fo,l(b(k.starts_at)),1)]),e("div",null,[n[17]||(n[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",Uo,l(b(k.ends_at)),1)]),e("div",null,[n[18]||(n[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",qo,l(k.door_time?b(k.door_time):"Non spécifiée"),1)])])]))),128))])):(u(),d("div",Ro,[_($(ae),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[19]||(n[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",Oo,[n[25]||(n[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),c.value.ticket_types&&c.value.ticket_types.length>0?(u(),d("div",Io,[(u(!0),d(R,null,N(c.value.ticket_types,k=>(u(),d("div",{key:k.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",No,[e("div",Xo,[e("div",Lo,[e("h3",Go,l(k.name),1),e("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",k.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},l(k.is_active?"Actif":"Inactif"),3)]),e("p",Ho,l(k.description||"Aucune description"),1)]),e("div",Wo,[n[21]||(n[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",Ko,l(O(k.price))+" XAF ",1)]),e("div",Jo,[n[23]||(n[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",Qo,[e("span",Zo,l(k.sold||0),1),n[22]||(n[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",Yo,l(v(k)),1)]),e("div",er,l(h(k))+"% vendus ",1)])])]))),128))])):(u(),d("div",tr,[_($(re),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[24]||(n[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",sr,[n[28]||(n[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Commandes récentes",-1)),i.value.length>0?(u(),d("div",or,[e("table",rr,[n[26]||(n[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",ar,[(u(!0),d(R,null,N(i.value,k=>(u(),d("tr",{key:k.id},[e("td",nr,l(k.customer_name),1),e("td",ir,l(k.ticket_quantity),1),e("td",lr,l(O(k.total_amount))+" XAF",1),e("td",dr,l(I(k.created_at)),1)]))),128))])])])):(u(),d("div",ur,[_($($e),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),n[27]||(n[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",mr,[e("div",pr,[n[32]||(n[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",cr,[e("button",{onClick:D,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[_($(Ce),{class:"w-4 h-4 mr-2"}),n[29]||(n[29]=T(" Partager l'événement ",-1))]),e("button",{onClick:z,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[_($(me),{class:"w-4 h-4 mr-2"}),n[30]||(n[30]=T(" Voir la page publique ",-1))]),e("button",{onClick:B,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...n[31]||(n[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),T(" Exporter les données ",-1)])])])]),c.value.image_url?(u(),d("div",gr,[n[33]||(n[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("img",{src:c.value.image_url,alt:c.value.title,class:"w-full h-48 object-cover rounded-primea"},null,8,fr)])):M("",!0),e("div",br,[n[37]||(n[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",vr,[e("div",xr,[n[34]||(n[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:q(["text-sm font-medium",c.value.is_public?"text-green-600":"text-red-600"])},l(c.value.is_public?"Oui":"Non"),3)]),e("div",yr,[n[35]||(n[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:q(["text-sm font-medium",c.value.sales_active?"text-green-600":"text-red-600"])},l(c.value.sales_active?"Oui":"Non"),3)]),e("div",_r,[n[36]||(n[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",hr,l(I(c.value.created_at)),1)])])])])])])):M("",!0)])])}}},kr=Z(wr,[["__scopeId","data-v-46b527dc"]]),Sl=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),$r={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Cr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Er={key:0,class:"flex justify-center items-center h-64"},jr={key:1,class:"text-center py-16"},Ar={class:"mb-4"},Sr={class:"text-gray-600 mb-6"},Pr={key:2},zr={class:"mb-8"},Vr={class:"flex items-center justify-between"},Dr={class:"flex items-center space-x-4"},Tr={class:"text-gray-600 font-primea mt-1"},Br={class:"flex items-center space-x-3"},Mr={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Fr={class:"lg:col-span-2 space-y-6"},Ur={class:"bg-white rounded-primea shadow-primea p-6"},qr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rr={class:"md:col-span-2"},Or={class:"md:col-span-2"},Ir={class:"bg-white rounded-primea shadow-primea p-6"},Nr={class:"flex items-center justify-between mb-6"},Xr={key:0,class:"text-center py-8 text-gray-500"},Lr={key:1,class:"space-y-4"},Gr={class:"flex justify-between items-start mb-4"},Hr={class:"font-semibold text-gray-900 font-primea"},Wr=["onClick"],Kr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Jr=["onUpdate:modelValue"],Qr=["onUpdate:modelValue"],Zr=["onUpdate:modelValue"],Yr={class:"flex items-center"},ea={class:"flex items-center space-x-2"},ta=["onUpdate:modelValue"],sa={class:"md:col-span-2"},oa=["onUpdate:modelValue"],ra={class:"space-y-6"},aa={class:"bg-white rounded-primea shadow-primea p-6"},na={class:"space-y-4"},ia={class:"flex items-center space-x-2"},la={class:"flex items-center space-x-2"},da={class:"bg-white rounded-primea shadow-primea p-6"},ua={class:"space-y-3"},ma=["disabled"],pa={key:0,class:"bg-white rounded-primea shadow-primea p-6"},ca=["src","alt"],ga={__name:"EventEdit",setup(x){const s=fe(),C=ne(),a=A(!0),P=A(!1),c=A(null),i=A(null),g=H({title:"",description:"",event_date:"",category_name:"",venue_name:"",venue_address:"",max_attendees:"",image_url:"",is_public:!0,sales_active:!0,ticket_types:[]}),r=async()=>{a.value=!0,c.value=null;try{let b=s.params.slug,o;if(/^\d+$/.test(b))o=(await G.getEvent(b)).data.data;else try{const j=await G.getEvents();if(o=(j.data.data.events.data||j.data.data.events).find(h=>h.slug===b),!o)throw new Error(`Événement avec le slug "${b}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${b}" non trouvé`)}if(!o)throw new Error("Événement introuvable");i.value={...o,venue_name:o.venue?.name||o.venue_name||"",venue_address:o.venue?.address||o.venue_address||"",category_name:o.category?.name||o.category_name||""},Object.assign(g,{title:i.value.title||"",description:i.value.description||"",event_date:i.value.event_date?new Date(i.value.event_date).toISOString().slice(0,16):"",category_name:i.value.category_name||"",venue_name:i.value.venue_name||"",venue_address:i.value.venue_address||"",max_attendees:i.value.max_attendees||"",image_url:i.value.image_url||"",is_public:i.value.is_public??!0,sales_active:i.value.is_active??!0,ticket_types:(i.value.ticket_types||[]).map(j=>({id:j.id,name:j.name||"",description:j.description||"",price:j.price||0,capacity:j.capacity||j.available_quantity||j.max_quantity||j.quantity||0,is_active:j.is_active??j.status==="active"}))})}catch(b){console.error("Erreur lors du chargement de l'événement:",b),b.response?.status===404?c.value=`Événement avec l'identifiant "${s.params.slug}" non trouvé`:b.message?c.value=b.message:c.value="Erreur lors du chargement de l'événement"}finally{a.value=!1}},F=async()=>{P.value=!0;try{if(!i.value)throw new Error("Aucun événement à mettre à jour");const b={title:g.title,description:g.description,is_active:g.sales_active};await G.updateEvent(i.value.id,b),await V.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),C.push({name:"organizer-event-detail",params:{slug:i.value.slug}})}catch(b){console.error("Erreur lors de la mise à jour:",b),await V.fire({title:"Erreur",text:b.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{P.value=!1}},D=async()=>{if((await V.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await G.updateEvent(i.value.id,{status:"published",is_active:!0}),i.value.status="published",i.value.is_active=!0,await V.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(o){console.error("Erreur publication:",o),await V.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},z=()=>{g.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},B=async b=>{(await V.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&g.ticket_types.splice(b,1)},O=b=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[b]||b,I=b=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[b]||"bg-gray-100 text-gray-800";return Q(()=>{r()}),(b,o)=>{const j=te("router-link");return u(),d("div",$r,[e("div",Cr,[a.value?(u(),d("div",Er,[...o[11]||(o[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):c.value?(u(),d("div",jr,[e("div",Ar,[_($(ce),{class:"w-16 h-16 mx-auto text-red-500"})]),o[13]||(o[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",Sr,l(c.value),1),_(j,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:L(()=>[...o[12]||(o[12]=[T(" Retour aux événements ",-1)])]),_:1})])):i.value?(u(),d("div",Pr,[e("div",zr,[e("div",Vr,[e("div",Dr,[e("button",{onClick:o[0]||(o[0]=v=>b.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_($(de),{class:"w-6 h-6"})]),e("div",null,[o[14]||(o[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",Tr,l(i.value.title),1)])]),e("div",Br,[e("span",{class:q(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",I(i.value.status)])},l(O(i.value.status)),3)])])]),e("form",{onSubmit:J(F,["prevent"]),class:"space-y-8"},[e("div",Mr,[e("div",Fr,[e("div",Ur,[o[24]||(o[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",qr,[e("div",Rr,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),w(e("input",{"onUpdate:modelValue":o[1]||(o[1]=v=>g.title=v),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[E,g.title]])]),e("div",Or,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":o[2]||(o[2]=v=>g.description=v),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[E,g.description]])]),e("div",null,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Date et heure",-1)),w(e("input",{"onUpdate:modelValue":o[3]||(o[3]=v=>g.event_date=v),type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[E,g.event_date]])]),e("div",null,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie",-1)),w(e("select",{"onUpdate:modelValue":o[4]||(o[4]=v=>g.category_name=v),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...o[18]||(o[18]=[pe('<option value="" data-v-ce044607>Sélectionner une catégorie</option><option value="Musique" data-v-ce044607>Musique</option><option value="Culture" data-v-ce044607>Culture</option><option value="Gastronomie" data-v-ce044607>Gastronomie</option><option value="Sport" data-v-ce044607>Sport</option><option value="Business" data-v-ce044607>Business</option><option value="Autres" data-v-ce044607>Autres</option>',7)])],512),[[oe,g.category_name]])]),e("div",null,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu",-1)),w(e("input",{"onUpdate:modelValue":o[5]||(o[5]=v=>g.venue_name=v),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom du lieu"},null,512),[[E,g.venue_name]])]),e("div",null,[o[21]||(o[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Adresse",-1)),w(e("input",{"onUpdate:modelValue":o[6]||(o[6]=v=>g.venue_address=v),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Adresse complète"},null,512),[[E,g.venue_address]])]),e("div",null,[o[22]||(o[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Capacité maximale",-1)),w(e("input",{"onUpdate:modelValue":o[7]||(o[7]=v=>g.max_attendees=v),type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nombre de places (optionnel)"},null,512),[[E,g.max_attendees]])]),e("div",null,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"URL de l'image",-1)),w(e("input",{"onUpdate:modelValue":o[8]||(o[8]=v=>g.image_url=v),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"https://exemple.com/image.jpg"},null,512),[[E,g.image_url]])])])]),e("div",Ir,[e("div",Nr,[o[26]||(o[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:z,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_($(ee),{class:"w-4 h-4 inline mr-2"}),o[25]||(o[25]=T(" Ajouter un type ",-1))])]),g.ticket_types.length===0?(u(),d("div",Xr,[_($(re),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),o[27]||(o[27]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),o[28]||(o[28]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(u(),d("div",Lr,[(u(!0),d(R,null,N(g.ticket_types,(v,h)=>(u(),d("div",{key:h,class:"border border-gray-200 rounded-primea p-4"},[e("div",Gr,[e("h3",Hr,"Type de billet "+l(h+1),1),e("button",{type:"button",onClick:p=>B(h),class:"text-red-600 hover:text-red-800"},[_($(le),{class:"w-4 h-4"})],8,Wr)]),e("div",Kr,[e("div",null,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom",-1)),w(e("input",{"onUpdate:modelValue":p=>v.name=p,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,Jr),[[E,v.name]])]),e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF)",-1)),w(e("input",{"onUpdate:modelValue":p=>v.price=p,type:"number",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,Qr),[[E,v.price]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité",-1)),w(e("input",{"onUpdate:modelValue":p=>v.capacity=p,type:"number",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100 (optionnel)"},null,8,Zr),[[E,v.capacity]])]),e("div",Yr,[e("label",ea,[w(e("input",{"onUpdate:modelValue":p=>v.is_active=p,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,ta),[[Y,v.is_active]]),o[32]||(o[32]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))])]),e("div",sa,[o[33]||(o[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":p=>v.description=p,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,oa),[[E,v.description]])])])]))),128))]))])]),e("div",ra,[e("div",aa,[o[38]||(o[38]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",na,[e("div",null,[e("label",ia,[w(e("input",{"onUpdate:modelValue":o[9]||(o[9]=v=>g.is_public=v),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[Y,g.is_public]]),o[34]||(o[34]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),o[35]||(o[35]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",la,[w(e("input",{"onUpdate:modelValue":o[10]||(o[10]=v=>g.sales_active=v),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[Y,g.sales_active]]),o[36]||(o[36]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),o[37]||(o[37]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))])])]),e("div",da,[o[41]||(o[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",ua,[e("button",{type:"submit",disabled:P.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},l(P.value?"Enregistrement...":"Enregistrer les modifications"),9,ma),_(j,{to:{name:"organizer-event-detail",params:{slug:i.value.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:L(()=>[...o[39]||(o[39]=[T(" Annuler ",-1)])]),_:1},8,["to"]),i.value.status==="draft"?(u(),d("button",{key:0,type:"button",onClick:D,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[_($(ge),{class:"w-4 h-4 inline mr-2"}),o[40]||(o[40]=T(" Publier l'événement ",-1))])):M("",!0)])]),g.image_url?(u(),d("div",pa,[o[42]||(o[42]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:g.image_url,alt:g.title,class:"w-full h-48 object-cover rounded-primea"},null,8,ca)])):M("",!0)])])],32)])):M("",!0)])])}}},fa=Z(ga,[["__scopeId","data-v-ce044607"]]),Pl=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"})),ba={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},va={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},xa={class:"mb-8"},ya={class:"flex items-center justify-between"},_a={class:"flex items-center space-x-4"},ha={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},wa={class:"lg:col-span-2 space-y-6"},ka={class:"bg-white rounded-primea shadow-primea p-6"},$a={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ca={class:"md:col-span-2"},Ea={class:"md:col-span-2"},ja=["value"],Aa={key:0},Sa=["value"],Pa={key:1,class:"space-y-2"},za={class:"md:col-span-2"},Va={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},Da={key:0,class:"mb-4"},Ta=["src"],Ba={key:1},Ma={class:"bg-white rounded-primea shadow-primea p-6"},Fa={class:"flex items-center justify-between mb-6"},Ua={class:"space-y-4"},qa=["onUpdate:modelValue"],Ra=["onUpdate:modelValue"],Oa={class:"flex items-end"},Ia=["onClick"],Na={class:"bg-white rounded-primea shadow-primea p-6"},Xa={class:"flex items-center justify-between mb-6"},La={key:0,class:"text-center py-8 text-gray-500"},Ga={key:1,class:"space-y-4"},Ha=["onUpdate:modelValue"],Wa=["onUpdate:modelValue"],Ka=["onUpdate:modelValue"],Ja=["onUpdate:modelValue"],Qa={class:"flex items-end"},Za=["onClick"],Ya={class:"space-y-6"},en={class:"bg-white rounded-primea shadow-primea p-6"},tn={class:"space-y-4"},sn={class:"flex items-center space-x-2"},on={class:"flex items-center space-x-2"},rn={class:"bg-white rounded-primea shadow-primea p-6"},an={class:"space-y-3"},nn=["disabled"],ln={key:0,class:"bg-white rounded-primea shadow-primea p-6"},dn=["src","alt"],un={class:"bg-white rounded-primea shadow-primea p-6"},mn={class:"space-y-2 text-sm"},pn={class:"flex justify-between"},cn={class:"font-medium font-primea"},gn={class:"flex justify-between"},fn={class:"font-medium font-primea"},bn={key:0,class:"flex justify-between"},vn={class:"font-medium font-primea"},xn={key:1,class:"flex justify-between"},yn={class:"font-medium font-primea"},_n={__name:"EventCreate",setup(x){const s=ne(),C=A(!1),a=A([]),P=A([]),c=A(!1),i=A(!1),g=A(null),r=H({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),F=K(()=>r.ticket_types.reduce((y,t)=>y+(parseInt(t.capacity)||0),0)),D=K(()=>{if(r.ticket_types.length===0)return 0;const y=r.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return y.length>0?Math.min(...y):0}),z=K(()=>{if(r.ticket_types.length===0)return 0;const y=r.ticket_types.map(t=>parseInt(t.price)||0);return y.length>0?Math.max(...y):0}),B=()=>{r.ticket_types.push({name:"",description:"",price:"",capacity:""})},O=()=>{r.schedules.push({starts_at:"",ends_at:""})},I=y=>{r.schedules.length>1&&r.schedules.splice(y,1)},b=()=>{r.venue_id==="new"?i.value=!0:i.value=!1},o=()=>{i.value=!1,r.venue_id="",r.new_venue_name="",r.new_venue_city="",r.new_venue_address=""},j=y=>{const t=y.target.files[0];if(t){r.image_file=t;const m=new FileReader;m.onload=f=>{r.image_preview=f.target.result,r.image_url=""},m.readAsDataURL(t)}},v=()=>{r.image_url&&(r.image_preview=r.image_url,r.image_file=null)},h=()=>{r.image_url="",r.image_preview="",r.image_file=null,g.value&&(g.value.value="")},p=y=>{r.ticket_types.length>1&&r.ticket_types.splice(y,1)},n=async()=>{if(r.ticket_types.length===0){V.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!r.title){V.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}C.value=!0;try{if(!r.category_id){V.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!r.venue_id&&!r.new_venue_name){V.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(r.schedules.some(m=>!m.starts_at||!m.ends_at)){V.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}const y={title:r.title,description:r.description,category_id:r.category_id,venue_id:r.venue_id!=="new"?r.venue_id:null,venue_name:r.venue_id==="new"?r.new_venue_name:null,venue_city:r.venue_id==="new"?r.new_venue_city:"Abidjan",venue_address:r.venue_id==="new"?r.new_venue_address:null,image_url:r.image_url,is_active:r.status==="published",schedules:r.schedules.map(m=>({starts_at:m.starts_at,ends_at:m.ends_at,door_time:new Date(new Date(m.starts_at).getTime()-1800*1e3).toISOString()})),ticket_types:r.ticket_types.map(m=>({name:m.name,description:m.description,price:parseFloat(m.price),capacity:parseInt(m.capacity),is_active:!0}))},t=await G.createEvent(y);if(t.data.success)V.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{s.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(y){console.error("Erreur création événement:",y),V.fire({title:"Erreur",text:y.response?.data?.message||"Erreur lors de la création de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{C.value=!1}},S=async()=>{c.value=!0;try{const y=await G.getCategories();y.data.success&&(a.value=y.data.categories||y.data.data);const t=await G.getVenues();t.data.success&&(P.value=t.data.venues||t.data.data)}catch(y){console.error("Erreur chargement données initiales:",y)}finally{c.value=!1}},k=y=>new Intl.NumberFormat("fr-FR").format(y);return Q(()=>{S()}),(y,t)=>{const m=te("router-link");return u(),d("div",ba,[e("div",va,[e("div",xa,[e("div",ya,[e("div",_a,[e("button",{onClick:t[0]||(t[0]=f=>y.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_($(de),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:J(n,["prevent"]),class:"space-y-8"},[e("div",ha,[e("div",wa,[e("div",ka,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",$a,[e("div",Ca,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>r.title=f),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[E,r.title]])]),e("div",Ea,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=f=>r.description=f),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[E,r.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),w(e("select",{"onUpdate:modelValue":t[3]||(t[3]=f=>r.category_id=f),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(u(!0),d(R,null,N(a.value,f=>(u(),d("option",{key:f.id,value:f.id},l(f.name),9,ja))),128))],512),[[oe,r.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),i.value?M("",!0):(u(),d("div",Aa,[w(e("select",{"onUpdate:modelValue":t[4]||(t[4]=f=>r.venue_id=f),onChange:b,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(u(!0),d(R,null,N(P.value,f=>(u(),d("option",{key:f.id,value:f.id},l(f.name)+" - "+l(f.city),9,Sa))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[oe,r.venue_id]])])),i.value||r.venue_id==="new"?(u(),d("div",Pa,[w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=f=>r.new_venue_name=f),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[E,r.new_venue_name]]),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=f=>r.new_venue_city=f),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[E,r.new_venue_city]]),w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=f=>r.new_venue_address=f),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[E,r.new_venue_address]]),e("button",{type:"button",onClick:o,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):M("",!0)]),e("div",za,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",Va,[r.image_preview?(u(),d("div",Da,[e("img",{src:r.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,Ta),e("button",{type:"button",onClick:h,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(u(),d("div",Ba,[e("input",{ref_key:"imageInput",ref:g,type:"file",accept:"image/*",onChange:j,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=f=>y.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),w(e("input",{"onUpdate:modelValue":t[9]||(t[9]=f=>r.image_url=f),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:v},null,544),[[E,r.image_url]])]))])])])]),e("div",Ma,[e("div",Fa,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:O,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_($(ee),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=T(" Ajouter une séance ",-1))])]),e("div",Ua,[(u(!0),d(R,null,N(r.schedules,(f,W)=>(u(),d("div",{key:W,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),w(e("input",{"onUpdate:modelValue":X=>f.starts_at=X,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,qa),[[E,f.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),w(e("input",{"onUpdate:modelValue":X=>f.ends_at=X,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,Ra),[[E,f.ends_at]])]),e("div",Oa,[r.schedules.length>1?(u(),d("button",{key:0,type:"button",onClick:X=>I(W),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_($(le),{class:"w-4 h-4"})],8,Ia)):M("",!0)])]))),128))])]),e("div",Na,[e("div",Xa,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:B,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[_($(ee),{class:"w-4 h-4 inline mr-2"}),t[28]||(t[28]=T(" Ajouter un type ",-1))])]),r.ticket_types.length===0?(u(),d("div",La,[_($(re),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[30]||(t[30]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[31]||(t[31]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(u(),d("div",Ga,[(u(!0),d(R,null,N(r.ticket_types,(f,W)=>(u(),d("div",{key:W,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),w(e("input",{"onUpdate:modelValue":X=>f.name=X,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,Ha),[[E,f.name]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),w(e("input",{"onUpdate:modelValue":X=>f.price=X,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,Wa),[[E,f.price,void 0,{number:!0}]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),w(e("input",{"onUpdate:modelValue":X=>f.capacity=X,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,Ka),[[E,f.capacity,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),w(e("input",{"onUpdate:modelValue":X=>f.description=X,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,Ja),[[E,f.description]])]),e("div",Qa,[r.ticket_types.length>1?(u(),d("button",{key:0,type:"button",onClick:X=>p(W),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[_($(le),{class:"w-4 h-4"})],8,Za)):M("",!0)])]))),128))]))])]),e("div",Ya,[e("div",en,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",tn,[e("div",null,[e("label",sn,[w(e("input",{"onUpdate:modelValue":t[10]||(t[10]=f=>r.is_public=f),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[Y,r.is_public]]),t[36]||(t[36]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[37]||(t[37]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",on,[w(e("input",{"onUpdate:modelValue":t[11]||(t[11]=f=>r.sales_active=f),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[Y,r.sales_active]]),t[38]||(t[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[39]||(t[39]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),w(e("select",{"onUpdate:modelValue":t[12]||(t[12]=f=>r.status=f),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[40]||(t[40]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[oe,r.status]]),t[42]||(t[42]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",rn,[t[45]||(t[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",an,[e("button",{type:"submit",disabled:C.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},l(C.value?"Création en cours...":"Créer l'événement"),9,nn),_(m,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:L(()=>[...t[44]||(t[44]=[T(" Annuler ",-1)])]),_:1})])]),r.image_url||r.image_preview?(u(),d("div",ln,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:r.image_preview||r.image_url,alt:r.title,class:"w-full h-48 object-cover rounded-primea"},null,8,dn)])):M("",!0),e("div",un,[t[51]||(t[51]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",mn,[e("div",pn,[t[47]||(t[47]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",cn,l(r.ticket_types.length),1)]),e("div",gn,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",fn,l(F.value||"Illimitée"),1)]),D.value>0?(u(),d("div",bn,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",vn,l(k(D.value))+" XAF",1)])):M("",!0),z.value>0?(u(),d("div",xn,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",yn,l(k(z.value))+" XAF",1)])):M("",!0)])])])])],32)])])}}},hn=Z(_n,[["__scopeId","data-v-dbd61bf4"]]),zl=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"})),wn={name:"BalanceManagement",setup(){const x=A(!1),s=A(!1),C=A(!1),a=A(!1),P=A(!1),c=A([]),i=A([]),g=H({pending_payouts:0,total_payouts:0}),r=H({gateway:"",available_balance:0,amount:"",phone_number:""}),F=H({gateway:"",auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),D=K(()=>c.value.reduce((m,f)=>m+f.balance,0)),z=async()=>{x.value=!0;try{const f=await(await fetch("/api/v1/organizer/balances",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();f.success&&(c.value=f.data.balances)}catch(m){console.error("Erreur chargement soldes:",m)}finally{x.value=!1}},B=async()=>{try{const f=await(await fetch("/api/v1/organizer/payouts?limit=10",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();f.success&&(i.value=f.data.payouts.data||f.data.payouts,g.pending_payouts=i.value.filter(W=>["pending","processing"].includes(W.status)).length,g.total_payouts=i.value.reduce((W,X)=>W+X.amount,0))}catch(m){console.error("Erreur chargement payouts récents:",m)}},O=m=>{Object.assign(r,{gateway:m.gateway,available_balance:m.balance,amount:"",phone_number:m.payout_phone_number||""}),a.value=!0},I=async()=>{s.value=!0;try{const f=await(await fetch("/api/v1/organizer/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)})).json();f.success?(alert("Demande de payout envoyée avec succès"),a.value=!1,z(),B()):alert(f.message||"Erreur lors de la demande")}catch(m){console.error("Erreur demande payout:",m),alert("Erreur technique")}finally{s.value=!1}},b=m=>{Object.assign(F,{gateway:m.gateway,auto_payout_enabled:m.auto_payout_enabled,auto_payout_threshold:m.auto_payout_threshold,payout_phone_number:m.payout_phone_number||""}),P.value=!0},o=async()=>{C.value=!0;try{const f=await(await fetch("/api/v1/organizer/auto-payout-config",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(F)})).json();f.success?(alert("Configuration mise à jour avec succès"),P.value=!1,z()):alert(f.message||"Erreur lors de la mise à jour")}catch(m){console.error("Erreur sauvegarde config:",m),alert("Erreur technique")}finally{C.value=!1}},j=m=>i.value.filter(f=>f.gateway===m).slice(0,3),v=m=>{alert(`Détails du payout #${m.reference}
Montant: ${h(m.amount)} XAF
Statut: ${y(m.status)}`)},h=m=>new Intl.NumberFormat("fr-FR").format(m),p=m=>new Date(m).toLocaleDateString("fr-FR"),n=m=>new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=m=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[m]||m,k=m=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[m]||"bg-gray-100 text-gray-800",y=m=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[m]||m,t=m=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[m]||"bg-gray-100 text-gray-800";return Q(()=>{z(),B()}),{loading:x,requestingPayout:s,savingConfig:C,showPayoutModal:a,showConfigModal:P,balances:c,recentPayouts:i,stats:g,payoutForm:r,configForm:F,totalBalance:D,loadBalances:z,loadRecentPayouts:B,requestPayout:O,submitPayoutRequest:I,configureAutoPayout:b,saveAutoPayoutConfig:o,getRecentPayouts:j,viewPayoutDetails:v,formatAmount:h,formatDate:p,formatDateTime:n,getGatewayName:S,getGatewayBadgeClass:k,getPayoutStatusName:y,getPayoutStatusClass:t}}},kn={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},$n={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Cn={class:"mb-8"},En={class:"flex items-center justify-between"},jn={key:0,class:"flex justify-center items-center h-64"},An={key:1},Sn={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Pn={class:"bg-white rounded-lg shadow p-6"},zn={class:"flex items-center"},Vn={class:"ml-4"},Dn={class:"text-2xl font-bold text-green-600"},Tn={class:"bg-white rounded-lg shadow p-6"},Bn={class:"flex items-center"},Mn={class:"ml-4"},Fn={class:"text-2xl font-bold text-yellow-600"},Un={class:"bg-white rounded-lg shadow p-6"},qn={class:"flex items-center"},Rn={class:"ml-4"},On={class:"text-2xl font-bold text-blue-600"},In={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Nn={class:"flex items-center justify-between mb-4"},Xn={class:"flex items-center"},Ln={class:"text-lg font-semibold text-gray-900"},Gn={class:"text-right"},Hn={class:"text-2xl font-bold text-green-600"},Wn={class:"mb-4 p-3 bg-gray-50 rounded-lg"},Kn={class:"flex items-center justify-between mb-2"},Jn={key:0,class:"text-sm text-gray-600"},Qn={key:0},Zn={class:"space-y-3"},Yn=["onClick","disabled"],ei=["onClick"],ti={class:"mt-6 pt-6 border-t"},si={key:0,class:"text-sm text-gray-500"},oi={key:1,class:"space-y-2"},ri={class:"font-medium"},ai={class:"text-gray-500 ml-2"},ni={class:"bg-white rounded-lg shadow"},ii={class:"p-6 border-b"},li={class:"flex justify-between items-center"},di={key:0,class:"p-8 text-center text-gray-500"},ui={key:1,class:"overflow-x-auto"},mi={class:"w-full"},pi={class:"divide-y divide-gray-200"},ci={class:"px-6 py-4 text-sm font-mono text-gray-900"},gi={class:"px-6 py-4 text-sm"},fi={class:"px-6 py-4 text-sm font-medium text-gray-900"},bi={class:"px-6 py-4 text-sm"},vi={class:"px-6 py-4 text-sm"},xi={class:"px-6 py-4 text-sm text-gray-500"},yi={class:"px-6 py-4 text-sm"},_i=["onClick"],hi={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},wi={class:"bg-white rounded-lg p-6 w-full max-w-md"},ki={class:"space-y-4"},$i=["value"],Ci=["value"],Ei=["max"],ji={class:"flex justify-end space-x-3 mt-6"},Ai=["disabled"],Si={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Pi={class:"bg-white rounded-lg p-6 w-full max-w-md"},zi={class:"text-lg font-bold mb-4"},Vi={class:"space-y-4"},Di={class:"flex items-center space-x-2"},Ti={key:0},Bi={class:"flex justify-end space-x-3 mt-6"},Mi=["disabled"];function Fi(x,s,C,a,P,c){return u(),d("div",kn,[e("div",$n,[e("div",Cn,[e("div",En,[s[12]||(s[12]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Soldes & Payouts"),e("p",{class:"text-gray-600"},"Consultez vos soldes et gérez vos demandes de payout")],-1)),e("button",{onClick:s[0]||(s[0]=i=>x.$router.push("/organizer/payouts/history")),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...s[11]||(s[11]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),T(" Historique Payouts ",-1)])])])]),a.loading?(u(),d("div",jn,[...s[13]||(s[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(u(),d("div",An,[e("div",Sn,[e("div",Pn,[e("div",zn,[s[15]||(s[15]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Vn,[s[14]||(s[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",Dn,l(a.formatAmount(a.totalBalance))+" XAF",1)])])]),e("div",Tn,[e("div",Bn,[s[17]||(s[17]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Mn,[s[16]||(s[16]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",Fn,l(a.stats.pending_payouts||0),1)])])]),e("div",Un,[e("div",qn,[s[19]||(s[19]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",Rn,[s[18]||(s[18]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",On,l(a.formatAmount(a.stats.total_payouts||0))+" XAF",1)])])])]),e("div",In,[(u(!0),d(R,null,N(a.balances,i=>(u(),d("div",{key:i.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",Nn,[e("div",Xn,[e("div",{class:q(["p-2 rounded-lg mr-4",a.getGatewayBadgeClass(i.gateway)])},[...s[20]||(s[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",Ln,l(a.getGatewayName(i.gateway)),1),s[21]||(s[21]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",Gn,[e("p",Hn,l(a.formatAmount(i.balance))+" XAF",1)])]),e("div",Wn,[e("div",Kn,[s[22]||(s[22]=e("span",{class:"text-sm font-medium text-gray-700"},"Payout Automatique",-1)),e("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",i.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(i.auto_payout_enabled?"Activé":"Désactivé"),3)]),i.auto_payout_enabled?(u(),d("div",Jn,[e("p",null,"Seuil: "+l(a.formatAmount(i.auto_payout_threshold))+" XAF",1),i.payout_phone_number?(u(),d("p",Qn,"Téléphone: "+l(i.payout_phone_number),1)):M("",!0)])):M("",!0)]),e("div",Zn,[e("button",{onClick:g=>a.requestPayout(i),disabled:i.balance<1e3,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[s[23]||(s[23]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),T(" "+l(i.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Payout"),1)],8,Yn),e("button",{onClick:g=>a.configureAutoPayout(i),class:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700"},[...s[24]||(s[24]=[e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),T(" Configurer Auto-Payout ",-1)])],8,ei)]),e("div",ti,[s[25]||(s[25]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),a.getRecentPayouts(i.gateway).length===0?(u(),d("div",si," Aucune transaction récente ")):(u(),d("div",oi,[(u(!0),d(R,null,N(a.getRecentPayouts(i.gateway),g=>(u(),d("div",{key:g.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",ri,l(a.formatAmount(g.amount))+" XAF",1),e("span",ai,l(a.formatDate(g.created_at)),1)]),e("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a.getPayoutStatusClass(g.status)])},l(a.getPayoutStatusName(g.status)),3)]))),128))]))])]))),128))]),e("div",ni,[e("div",ii,[e("div",li,[s[26]||(s[26]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:s[1]||(s[1]=i=>x.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),a.recentPayouts.length===0?(u(),d("div",di," Aucun payout récent ")):(u(),d("div",ui,[e("table",mi,[s[27]||(s[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",pi,[(u(!0),d(R,null,N(a.recentPayouts,i=>(u(),d("tr",{key:i.id},[e("td",ci,"#"+l(i.reference),1),e("td",gi,[e("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a.getGatewayBadgeClass(i.gateway)])},l(a.getGatewayName(i.gateway)),3)]),e("td",fi,l(a.formatAmount(i.amount))+" XAF",1),e("td",bi,[e("span",{class:q(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a.getPayoutStatusClass(i.status)])},l(a.getPayoutStatusName(i.status)),3)]),e("td",vi,[e("span",{class:q(["inline-flex px-2 py-1 text-xs rounded-full",i.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},l(i.is_automatic?"Auto":"Manuel"),3)]),e("td",xi,l(a.formatDateTime(i.created_at)),1),e("td",yi,[e("button",{onClick:g=>a.viewPayoutDetails(i),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,_i)])]))),128))])])]))])])),a.showPayoutModal?(u(),d("div",hi,[e("div",wi,[s[34]||(s[34]=e("h3",{class:"text-lg font-bold mb-4"},"Demande de Payout",-1)),e("form",{onSubmit:s[5]||(s[5]=J((...i)=>a.submitPayoutRequest&&a.submitPayoutRequest(...i),["prevent"]))},[e("div",ki,[e("div",null,[s[28]||(s[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:a.getGatewayName(a.payoutForm.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,$i)]),e("div",null,[s[29]||(s[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:a.formatAmount(a.payoutForm.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ci)]),e("div",null,[s[30]||(s[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),w(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>a.payoutForm.amount=i),type:"number",min:1e3,max:a.payoutForm.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Ei),[[E,a.payoutForm.amount,void 0,{number:!0}]]),s[31]||(s[31]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[s[32]||(s[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),w(e("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>a.payoutForm.phone_number=i),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[E,a.payoutForm.phone_number]]),s[33]||(s[33]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",ji,[e("button",{type:"button",onClick:s[4]||(s[4]=i=>a.showPayoutModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:a.requestingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(a.requestingPayout?"Demande en cours...":"Demander le Payout"),9,Ai)])],32)])])):M("",!0),a.showConfigModal?(u(),d("div",Si,[e("div",Pi,[e("h3",zi,"Configuration Auto-Payout - "+l(a.getGatewayName(a.configForm.gateway)),1),e("form",{onSubmit:s[10]||(s[10]=J((...i)=>a.saveAutoPayoutConfig&&a.saveAutoPayoutConfig(...i),["prevent"]))},[e("div",Vi,[e("div",null,[e("label",Di,[w(e("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=i=>a.configForm.auto_payout_enabled=i),class:"rounded border-gray-300"},null,512),[[Y,a.configForm.auto_payout_enabled]]),s[35]||(s[35]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),a.configForm.auto_payout_enabled?(u(),d("div",Ti,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),w(e("input",{"onUpdate:modelValue":s[7]||(s[7]=i=>a.configForm.auto_payout_threshold=i),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[E,a.configForm.auto_payout_threshold,void 0,{number:!0}]]),s[37]||(s[37]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):M("",!0),e("div",null,[s[38]||(s[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),w(e("input",{"onUpdate:modelValue":s[8]||(s[8]=i=>a.configForm.payout_phone_number=i),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[E,a.configForm.payout_phone_number]]),s[39]||(s[39]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts automatiques",-1))])]),e("div",Bi,[e("button",{type:"button",onClick:s[9]||(s[9]=i=>a.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:a.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},l(a.savingConfig?"Enregistrement...":"Enregistrer"),9,Mi)])],32)])])):M("",!0)])])}const Ui=Z(wn,[["render",Fi],["__scopeId","data-v-e6c5fcd5"]]),Vl=Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"})),qi={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Ri={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Oi={key:0,class:"flex justify-center items-center h-64"},Ii={key:1,class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Ni={class:"bg-white rounded-primea shadow-primea p-6"},Xi={class:"flex items-center justify-between mb-6"},Li=["disabled"],Gi=["disabled"],Hi=["disabled"],Wi={key:0,class:"flex space-x-3 pt-4"},Ki=["disabled"],Ji={class:"bg-white rounded-primea shadow-primea p-6"},Qi={class:"flex items-center justify-between mb-6"},Zi=["disabled"],Yi=["disabled"],el=["disabled"],tl=["disabled"],sl=["disabled"],ol={key:0,class:"flex space-x-3 pt-4"},rl=["disabled"],al={class:"bg-white rounded-primea shadow-primea p-6"},nl=["disabled"],il={class:"bg-white rounded-primea shadow-primea p-6"},ll={class:"space-y-4"},dl={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},ul={class:"flex items-center space-x-3"},ml={class:"text-xs text-green-600 font-primea"},pl={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},cl={class:"flex items-center space-x-3"},gl={class:"text-xs text-blue-600 font-primea"},fl={class:"grid grid-cols-2 gap-4 pt-4"},bl={class:"text-center p-3 border rounded-primea"},vl={class:"text-2xl font-bold text-primea-blue font-primea"},xl={class:"text-center p-3 border rounded-primea"},yl={class:"text-2xl font-bold text-primea-yellow font-primea"},_l={__name:"OrganizerProfile",setup(x){be();const s=A(!1),C=A(!1),a=A(!1),P=A(!1),c=A(!1),i=A(!1),g=A(null),r=A(null),F=A({events:0,tickets:0}),D=H({name:"",email:"",phone:""}),z=H({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),B=H({current_password:"",password:"",password_confirmation:""}),O=H({}),I=H({}),b=()=>{C.value||Object.assign(O,D),C.value=!C.value},o=()=>{a.value||Object.assign(I,z),a.value=!a.value},j=()=>{Object.assign(D,O),C.value=!1},v=()=>{Object.assign(z,I),a.value=!1},h=async()=>{P.value=!0;try{console.log("Mise à jour des informations personnelles:",D),await new Promise(y=>setTimeout(y,1e3)),C.value=!1}catch(y){console.error("Erreur lors de la mise à jour:",y)}finally{P.value=!1}},p=async()=>{c.value=!0;try{console.log("Mise à jour de l'organisation:",z),await new Promise(y=>setTimeout(y,1e3)),a.value=!1}catch(y){console.error("Erreur lors de la mise à jour:",y)}finally{c.value=!1}},n=async()=>{if(B.password!==B.password_confirmation){alert("Les mots de passe ne correspondent pas");return}i.value=!0;try{console.log("Changement de mot de passe"),await new Promise(y=>setTimeout(y,1e3)),Object.assign(B,{current_password:"",password:"",password_confirmation:""})}catch(y){console.error("Erreur lors du changement de mot de passe:",y)}finally{i.value=!1}},S=y=>y?new Date(y).toLocaleDateString("fr-FR"):"Non disponible",k=async()=>{s.value=!0;try{g.value={name:"Marie Nzougou",email:"marie@example.com",phone:"+225 07 12 34 56 78",email_verified_at:"2024-01-15T10:30:00Z"},r.value={name:"Mon Organisation",description:"Organisation spécialisée dans l'événementiel",website_url:"https://monorganisation.com",contact_email:"contact@monorganisation.com",contact_phone:"+225 07 12 34 56 79",verified_at:"2024-01-20T14:00:00Z"},F.value={events:12,tickets:345},Object.assign(D,{name:g.value.name,email:g.value.email,phone:g.value.phone}),Object.assign(z,{name:r.value.name,description:r.value.description,website_url:r.value.website_url,contact_email:r.value.contact_email,contact_phone:r.value.contact_phone})}catch(y){console.error("Erreur lors du chargement du profil:",y)}finally{s.value=!1}};return Q(()=>{k()}),(y,t)=>(u(),d("div",qi,[e("div",Ri,[t[31]||(t[31]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),s.value?(u(),d("div",Oi,[...t[11]||(t[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(u(),d("div",Ii,[e("div",Ni,[e("div",Xi,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:b,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_($(ie),{class:"w-5 h-5"})])]),e("form",{onSubmit:J(h,["prevent"]),class:"space-y-4"},[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=m=>D.name=m),type:"text",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,Li),[[E,D.name]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=m=>D.email=m),type:"email",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,Gi),[[E,D.email]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=m=>D.phone=m),type:"tel",disabled:!C.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,Hi),[[E,D.phone]])]),C.value?(u(),d("div",Wi,[e("button",{type:"submit",disabled:P.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},l(P.value?"Enregistrement...":"Enregistrer"),9,Ki),e("button",{type:"button",onClick:j,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):M("",!0)],32)]),e("div",Ji,[e("div",Qi,[t[16]||(t[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:o,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[_($(ie),{class:"w-5 h-5"})])]),e("form",{onSubmit:J(p,["prevent"]),class:"space-y-4"},[e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=m=>z.name=m),type:"text",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,Zi),[[E,z.name]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=m=>z.description=m),disabled:!a.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,Yi),[[E,z.description]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=m=>z.website_url=m),type:"url",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,el),[[E,z.website_url]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=m=>z.contact_email=m),type:"email",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,tl),[[E,z.contact_email]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=m=>z.contact_phone=m),type:"tel",disabled:!a.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"+225 XX XX XX XX XX"},null,8,sl),[[E,z.contact_phone]])]),a.value?(u(),d("div",ol,[e("button",{type:"submit",disabled:c.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},l(c.value?"Enregistrement...":"Enregistrer"),9,rl),e("button",{type:"button",onClick:v,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):M("",!0)],32)]),e("div",al,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:J(n,["prevent"]),class:"space-y-4"},[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),w(e("input",{"onUpdate:modelValue":t[8]||(t[8]=m=>B.current_password=m),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[E,B.current_password]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),w(e("input",{"onUpdate:modelValue":t[9]||(t[9]=m=>B.password=m),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[E,B.password]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),w(e("input",{"onUpdate:modelValue":t[10]||(t[10]=m=>B.password_confirmation=m),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[E,B.password_confirmation]])]),e("button",{type:"submit",disabled:i.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},l(i.value?"Mise à jour...":"Changer le mot de passe"),9,nl)],32)]),e("div",il,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",ll,[e("div",dl,[e("div",ul,[_($(Ee),{class:"w-5 h-5 text-green-600"}),t[26]||(t[26]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",ml,l(S(g.value?.email_verified_at)),1)]),r.value?.verified_at?(u(),d("div",pl,[e("div",cl,[_($(je),{class:"w-5 h-5 text-blue-600"}),t[27]||(t[27]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",gl,l(S(r.value.verified_at)),1)])):M("",!0),e("div",fl,[e("div",bl,[e("p",vl,l(F.value.events||0),1),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",xl,[e("p",yl,l(F.value.tickets||0),1),t[29]||(t[29]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])]))])]))}},hl=Z(_l,[["__scopeId","data-v-88f51db0"]]),Dl=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"}));export{Vl as B,Al as E,jl as O,U as a,Sl as b,Pl as c,zl as d,Dl as e,El as g,Cl as t};
