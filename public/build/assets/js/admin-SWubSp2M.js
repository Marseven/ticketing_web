import{j as n,o as r,k as e,t as a,G as R,H as D,q as H,P as ne,X as ae,b as u,Y as N,d as ie,Z as te,n as j,p as Z,D as i,E as S,F as q,W as re,_ as ee,$ as de,a0 as ue}from"./vue-vendor-sPuA7mMM.js";import{_ as se}from"./account-DCYhQWGx.js";import{i as me}from"./vendor-BvANJOFB.js";const ge={name:"AdminDashboard",setup(){const h=u(!1),t=N({total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,tickets_sold:0,failed_payments:0,successful_payments:0,pending_payments:0,payments_in_transit:0,platform_commission:0}),p=u([]),s=u([]),m=u([]),_=u([]),o=ie(()=>m.value.length===0?1:Math.max(...m.value.map(b=>b.amount))),l=async()=>{h.value=!0;try{const g=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();g.success&&(Object.assign(t,g.data.stats),p.value=g.data.recent_orders,s.value=g.data.recent_activity,m.value=g.data.revenue_data,_.value=g.data.top_events)}catch(b){console.error("Erreur chargement dashboard admin:",b)}finally{h.value=!1}},v=async()=>{try{const g=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(g.success){const d=g.data.balances.reduce((x,w)=>x+w.amount,0);alert(`Solde SHAP total: ${f(d)} XAF`)}}catch(b){console.error("Erreur vérification solde SHAP:",b)}},P=b=>{this.$router.push(`/admin/orders/${b.id}`)},f=b=>new Intl.NumberFormat("fr-FR").format(b),U=b=>new Date(b).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),F=b=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[b]||b,C=b=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[b]||"bg-gray-100 text-gray-800",B=b=>({order:"bg-blue-100 text-blue-600",payment:"bg-green-100 text-green-600",payout:"bg-yellow-100 text-yellow-600",user:"bg-purple-100 text-purple-600"})[b]||"bg-gray-100 text-gray-600",G=()=>{Object.assign(t,{total_users:1247,total_organizers:89,total_events:156,orders_today:23,revenue_today:285e4,successful_payments:142,pending_payments:8,failed_payments:3,payments_in_transit:475e4,platform_commission:285e3}),p.value=[{id:1,reference:"PMT-2025-001",customer_name:"Jean Dupont",customer_email:"jean@email.com",total_amount:15e3,status:"paid",created_at:new Date},{id:2,reference:"PMT-2025-002",customer_name:"Marie Martin",customer_email:"marie@email.com",total_amount:25e3,status:"pending",created_at:new Date(Date.now()-3e5)}]};return te(()=>{l(),setTimeout(()=>{t.total_users===0&&G()},2e3)}),{loading:h,stats:t,recentOrders:p,recentActivity:s,revenueData:m,topEvents:_,maxRevenue:o,loadDashboardData:l,checkShapBalance:v,viewOrder:P,formatAmount:f,formatDate:U,getOrderStatusName:F,getOrderStatusClass:C,getActivityIconClass:B}}},pe={class:"admin-dashboard p-6"},fe={key:0,class:"flex justify-center items-center h-64"},xe={key:1},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ve={class:"flex items-center"},be={class:"text-left"},he={class:"text-white opacity-80 text-sm"},we={class:"flex items-center"},_e={class:"text-left"},ke={class:"text-white opacity-80 text-sm"},Ce={class:"flex items-center"},Se={class:"text-left"},Ae={class:"text-gray-200 text-sm"},je={class:"flex items-center"},Me={class:"text-left"},Pe={class:"text-gray-200 text-sm"},Oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Te={class:"bg-white rounded-lg shadow p-6"},ze={class:"flex items-center"},Fe={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Ue={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={class:"ml-4"},De={class:"text-2xl font-bold",style:{color:"#272d63"}},Ee={class:"bg-white rounded-lg shadow p-6"},Ve={class:"flex items-center"},Be={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Ie={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qe={class:"ml-4"},$e={class:"text-2xl font-bold",style:{color:"#fab511"}},Ne={class:"bg-white rounded-lg shadow p-6"},Le={class:"flex items-center"},Xe={class:"ml-4"},He={class:"text-2xl font-bold text-green-600"},Ge={class:"bg-white rounded-lg shadow p-6"},Ke={class:"flex items-center"},We={class:"ml-4"},Je={class:"text-2xl font-bold text-red-600"},Ye={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},Qe={class:"lg:col-span-2"},Ze={class:"bg-white rounded-lg shadow p-6"},et={class:"flex justify-between items-center mb-4"},tt={key:0,class:"text-center text-gray-500 py-8"},st={key:1,class:"overflow-x-auto"},ot={class:"w-full"},at={class:"divide-y divide-gray-200"},nt={class:"px-4 py-4 text-sm font-medium text-blue-600"},rt=["onClick"],lt={class:"px-4 py-4 text-sm text-gray-900"},it={class:"px-4 py-4 text-sm font-medium text-gray-900"},dt={class:"px-4 py-4 text-sm"},ct={class:"px-4 py-4 text-sm text-gray-500"},ut={class:"lg:col-span-1 space-y-6"},mt={class:"bg-white rounded-lg shadow p-6"},gt={class:"space-y-3"},pt={class:"flex justify-between items-center"},ft={class:"bg-white rounded-lg shadow p-6"},xt={class:"space-y-3"},yt={class:"flex-1"},vt={class:"text-sm text-gray-900"},bt={class:"text-xs text-gray-500"},ht={class:"bg-white rounded-lg shadow p-6"},wt={class:"space-y-3"},_t={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},kt={class:"bg-white rounded-lg shadow p-6"},Ct={key:0,class:"text-center text-gray-500 py-8"},St={key:1,class:"space-y-3"},At={class:"text-sm text-gray-600"},jt={class:"flex items-center"},Mt={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},Pt={class:"text-sm font-medium"},Ot={class:"bg-white rounded-lg shadow p-6"},Tt={key:0,class:"text-center text-gray-500 py-8"},zt={key:1,class:"space-y-4"},Ft={class:"flex items-center"},Ut={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},Rt={class:"font-medium text-gray-900"},Dt={class:"text-sm text-gray-600"},Et={class:"text-right"},Vt={class:"font-medium text-gray-900"},Bt={class:"text-sm text-gray-600"};function It(h,t,p,s,m,_){return r(),n("div",pe,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Tableau de Bord Primea"),e("p",{class:"text-white opacity-80"},"Supervision des paiements et transactions de la plateforme")])],-1)),s.loading?(r(),n("div",fe,[...t[15]||(t[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(r(),n("div",xe,[e("div",ye,[e("button",{onClick:t[0]||(t[0]=o=>h.$router.push("/admin/payments")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#272d63"}),onMouseleave:t[2]||(t[2]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#ffffff"})},[e("div",ve,[t[17]||(t[17]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1)),e("div",be,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold"},"Paiements Transit",-1)),e("p",he,a(s.formatAmount(s.stats.payments_in_transit||0))+" XAF",1)])])],32),e("button",{onClick:t[3]||(t[3]=o=>h.$router.push("/admin/payouts")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#fab511"},onMouseover:t[4]||(t[4]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511")},[e("div",we,[t[19]||(t[19]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),e("div",_e,[t[18]||(t[18]=e("h3",{class:"text-lg font-bold"},"Revenus Journaliers",-1)),e("p",ke,a(s.formatAmount(s.stats.revenue_today||0))+" XAF",1)])])],32),e("button",{onClick:t[6]||(t[6]=o=>h.$router.push("/admin/orders")),class:"bg-gray-600 text-white p-6 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-105"},[e("div",Ce,[t[21]||(t[21]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",Se,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold"},"Commandes",-1)),e("p",Ae,a(s.stats.orders_today||0)+" aujourd'hui",1)])])]),e("button",{onClick:t[7]||(t[7]=o=>h.$router.push("/admin/users")),class:"bg-gray-700 text-white p-6 rounded-lg hover:bg-gray-800 transition-all transform hover:scale-105"},[e("div",je,[t[23]||(t[23]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),e("div",Me,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold"},"Utilisateurs",-1)),e("p",Pe,a(s.stats.total_users||0)+" total",1)])])])]),e("div",Oe,[e("div",Te,[e("div",ze,[e("div",Fe,[(r(),n("svg",Ue,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",Re,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Paiements Réussis",-1)),e("p",De,a(s.stats.successful_payments||0),1)])])]),e("div",Ee,[e("div",Ve,[e("div",Be,[(r(),n("svg",Ie,[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),e("div",qe,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Paiements En Attente",-1)),e("p",$e,a(s.stats.pending_payments||0),1)])])]),e("div",Ne,[e("div",Le,[t[29]||(t[29]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Xe,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Commission Plateforme",-1)),e("p",He,a(s.formatAmount(s.stats.platform_commission||0))+" XAF",1)])])]),e("div",Ge,[e("div",Ke,[t[31]||(t[31]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",We,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",Je,a(s.stats.failed_payments||0),1)])])])]),e("div",Ye,[e("div",Qe,[e("div",Ze,[e("div",et,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold",style:{color:"#272d63"}},"Paiements Récents",-1)),e("button",{onClick:t[8]||(t[8]=o=>h.$router.push("/admin/payments")),class:"text-sm transition-colors duration-200",style:{color:"#272d63"},onMouseover:t[9]||(t[9]=o=>o.currentTarget.style.color="#fab511"),onMouseleave:t[10]||(t[10]=o=>o.currentTarget.style.color="#272d63")},"Voir tous",32)]),s.recentOrders.length===0?(r(),n("div",tt," Aucune commande récente ")):(r(),n("div",st,[e("table",ot,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",at,[(r(!0),n(R,null,D(s.recentOrders,o=>(r(),n("tr",{key:o.id},[e("td",nt,[e("button",{onClick:l=>s.viewOrder(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,rt)]),e("td",lt,a(o.customer_name||o.customer_email),1),e("td",it,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",dt,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getOrderStatusClass(o.status)])},a(s.getOrderStatusName(o.status)),3)]),e("td",ct,a(s.formatDate(o.created_at)),1)]))),128))])])]))])]),e("div",ut,[e("div",mt,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",gt,[t[35]||(t[35]=ne('<div class="flex justify-between items-center" data-v-8191e77a><span class="text-sm text-gray-600" data-v-8191e77a>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8191e77a> Opérationnel </span></div><div class="flex justify-between items-center" data-v-8191e77a><span class="text-sm text-gray-600" data-v-8191e77a>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8191e77a> Opérationnel </span></div>',2)),e("div",pt,[t[34]||(t[34]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[11]||(t[11]=(...o)=>s.checkShapBalance&&s.checkShapBalance(...o)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",ft,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",xt,[(r(!0),n(R,null,D(s.recentActivity,o=>(r(),n("div",{key:o.id,class:"flex items-start"},[e("div",{class:H(["p-1 rounded-full mr-3",s.getActivityIconClass(o.type)])},[...t[37]||(t[37]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",yt,[e("p",vt,a(o.description),1),e("p",bt,a(s.formatDate(o.created_at)),1)])]))),128))])]),e("div",ht,[t[42]||(t[42]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",wt,[e("button",{onClick:t[12]||(t[12]=o=>h.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[39]||(t[39]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[13]||(t[13]=o=>h.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[40]||(t[40]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[14]||(t[14]=o=>h.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[41]||(t[41]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",_t,[e("div",kt,[t[43]||(t[43]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),s.revenueData.length===0?(r(),n("div",Ct," Aucune donnée disponible ")):(r(),n("div",St,[(r(!0),n(R,null,D(s.revenueData,o=>(r(),n("div",{key:o.date,class:"flex justify-between items-center"},[e("span",At,a(s.formatDate(o.date)),1),e("div",jt,[e("div",Mt,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ae(`width: ${o.amount/s.maxRevenue*100}%`)},null,4)]),e("span",Pt,a(s.formatAmount(o.amount))+" XAF",1)])]))),128))]))]),e("div",Ot,[t[44]||(t[44]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),s.topEvents.length===0?(r(),n("div",Tt," Aucun événement populaire ")):(r(),n("div",zt,[(r(!0),n(R,null,D(s.topEvents,(o,l)=>(r(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Ft,[e("div",Ut,a(l+1),1),e("div",null,[e("h3",Rt,a(o.title),1),e("p",Dt,a(o.organizer_name),1)])]),e("div",Et,[e("p",Vt,a(o.tickets_sold)+" tickets",1),e("p",Bt,a(s.formatAmount(o.revenue))+" XAF",1)])]))),128))]))])])]))])}const qt=se(ge,[["render",It],["__scopeId","data-v-8191e77a"]]),l2=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"})),$t={name:"UserManagement",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(!1),m=u(null),_=u(null),o=u([]),l=N({search:"",role:"",status:""}),v=N({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0});let P=null;const f=async()=>{h.value=!0;try{const w=new URLSearchParams;l.search&&w.append("search",l.search),l.role&&w.append("role",l.role),l.status&&w.append("status",l.status);const k=await(await fetch(`/api/v1/admin/users?${w}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();k.success&&(o.value=k.data.users.data||k.data.users)}catch(w){console.error("Erreur chargement utilisateurs:",w)}finally{h.value=!1}},U=()=>{clearTimeout(P),P=setTimeout(()=>{f()},500)},F=()=>{m.value=null,Object.assign(v,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0}),p.value=!0},C=w=>{m.value=w,Object.assign(v,{name:w.name,email:w.email,password:"",is_admin:w.roles?.some(E=>E.slug==="admin")||!1,is_organizer:w.roles?.some(E=>E.slug==="organizer")||!1,is_active:w.status==="active"}),p.value=!0},B=async()=>{t.value=!0;try{const w=m.value?`/api/v1/admin/users/${m.value.id}`:"/api/v1/admin/users",E=m.value?"PUT":"POST",k={...v};delete k.password;const A=await(await fetch(w,{method:E,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(k)})).json();A.success?(Toast.fire({icon:"success",title:A.message||(m.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès")}),p.value=!1,f()):Swal.fire({icon:"error",title:"Erreur",text:A.message||"Erreur lors de la sauvegarde"})}catch(w){console.error("Erreur sauvegarde utilisateur:",w),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},G=async w=>{if((await confirmAction("Changer le statut de l'utilisateur",`Êtes-vous sûr de vouloir ${w.status==="active"?"désactiver":"activer"} cet utilisateur ?`,w.status==="active"?"Désactiver":"Activer")).isConfirmed)try{const V=await(await fetch(`/api/v1/admin/users/${w.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();V.success?(Toast.fire({icon:"success",title:V.message||"Statut mis à jour avec succès"}),f()):Swal.fire({icon:"error",title:"Erreur",text:V.message||"Erreur lors du changement de statut"})}catch(k){console.error("Erreur toggle statut:",k),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors du changement de statut"})}},b=w=>{_.value=w,s.value=!0},g=async w=>{if((await confirmAction("Réinitialiser le mot de passe",`Envoyer un email de réinitialisation à ${w.name} (${w.email}) ?`,"Envoyer l'email")).isConfirmed)try{const V=await(await fetch(`/api/v1/admin/users/${w.id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();V.success?Toast.fire({icon:"success",title:V.message||"Email de réinitialisation envoyé avec succès"}):Swal.fire({icon:"error",title:"Erreur",text:V.message||"Erreur lors de l'envoi de l'email"})}catch(k){console.error("Erreur reset mot de passe:",k),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de l'envoi de l'email"})}},c=()=>{Object.assign(l,{search:"",role:"",status:""}),f()},d=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),x=w=>({admin:"Administrateur",organizer:"Organisateur",client:"Client"})[w]||w;return te(()=>{f()}),{loading:h,saving:t,showModal:p,showDetailsModal:s,editingUser:m,selectedUser:_,users:o,filters:l,userForm:v,loadUsers:f,debouncedSearch:U,openCreateModal:F,editUser:C,saveUser:B,toggleUserStatus:G,viewUserDetails:b,resetUserPassword:g,resetFilters:c,formatDate:d,getRoleName:x}}},Nt={class:"user-management p-6 bg-gray-50 min-h-screen"},Lt={class:"mb-8"},Xt={class:"flex items-center justify-between"},Ht={class:"bg-white rounded-lg shadow p-6 mb-8"},Gt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Kt={class:"flex items-end"},Wt={class:"bg-white rounded-lg shadow"},Jt={key:0,class:"p-8 text-center"},Yt={key:1,class:"p-8 text-center text-gray-500"},Qt={key:2,class:"overflow-x-auto"},Zt={class:"w-full"},es={class:"divide-y divide-gray-200"},ts={class:"px-6 py-4"},ss={class:"flex items-center"},os={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},as={class:"ml-4"},ns={class:"text-sm font-medium text-gray-900"},rs={class:"text-sm text-gray-500"},ls={class:"px-6 py-4 text-sm text-gray-900"},is={class:"px-6 py-4 text-sm"},ds={class:"space-y-1"},cs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},us={class:"px-6 py-4 text-sm"},ms=["onClick"],gs={class:"px-6 py-4 text-sm text-gray-500"},ps={class:"px-6 py-4 text-sm space-x-2"},fs=["onClick"],xs=["onClick"],ys=["onClick"],vs={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},bs={class:"bg-white rounded-lg p-6 w-full max-w-md"},hs={class:"text-lg font-bold mb-4"},ws={class:"space-y-4"},_s={key:0,class:"bg-blue-50 p-4 rounded-lg"},ks={class:"space-y-2"},Cs={class:"flex items-center"},Ss={class:"flex items-center"},As={key:1},js={class:"flex items-center"},Ms={class:"flex justify-end space-x-3 mt-6"},Ps=["disabled"],Os={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ts={class:"bg-white rounded-lg p-6 w-full max-w-lg"},zs={class:"flex justify-between items-center mb-4"},Fs={key:0,class:"space-y-4"},Us={class:"grid grid-cols-2 gap-4"},Rs={class:"text-sm text-gray-900"},Ds={class:"text-sm text-gray-900"},Es={class:"text-sm"},Vs={class:"space-y-1"},Bs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Is={class:"text-sm text-gray-900"},qs={class:"text-sm text-gray-900"},$s={key:0},Ns={class:"text-sm text-gray-900"};function Ls(h,t,p,s,m,_){return r(),n("div",Nt,[e("div",Lt,[e("div",Xt,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[16]||(t[16]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Créer Utilisateur ",-1)])])])]),e("div",Ht,[t[23]||(t[23]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Gt,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.search]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.role=o),onChange:t[4]||(t[4]=(...o)=>s.loadUsers&&s.loadUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[19]||(t[19]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[q,s.filters.role]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.status=o),onChange:t[6]||(t[6]=(...o)=>s.loadUsers&&s.loadUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[q,s.filters.status]])]),e("div",Kt,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Wt,[t[26]||(t[26]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),s.loading?(r(),n("div",Jt,[...t[24]||(t[24]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.users.length===0?(r(),n("div",Yt," Aucun utilisateur trouvé ")):(r(),n("div",Qt,[e("table",Zt,[t[25]||(t[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",es,[(r(!0),n(R,null,D(s.users,o=>(r(),n("tr",{key:o.id},[e("td",ts,[e("div",ss,[e("div",os,a(o.name.charAt(0).toUpperCase()),1),e("div",as,[e("div",ns,a(o.name),1),e("div",rs,"ID: "+a(o.id),1)])])]),e("td",ls,a(o.email),1),e("td",is,[e("div",ds,[o.roles&&o.roles.length>0?(r(!0),n(R,{key:0},D(o.roles,l=>(r(),n("span",{key:l.id,class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":l.slug==="admin","bg-green-100 text-green-800":l.slug==="organizer","bg-gray-100 text-gray-800":l.slug==="client"}])},a(s.getRoleName(l.slug)),3))),128)):(r(),n("span",cs," Aucun rôle "))])]),e("td",us,[e("button",{onClick:l=>s.toggleUserStatus(o),class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.status==="active"?"Actif":"Inactif"),11,ms)]),e("td",gs,a(s.formatDate(o.created_at)),1),e("td",ps,[e("button",{onClick:l=>s.editUser(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,fs),e("button",{onClick:l=>s.viewUserDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,xs),e("button",{onClick:l=>s.resetUserPassword(o),class:"text-orange-600 hover:text-orange-900"}," Reset mot de passe ",8,ys)])]))),128))])])]))]),s.showModal?(r(),n("div",vs,[e("div",bs,[e("h3",hs,a(s.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[14]||(t[14]=re((...o)=>s.saveUser&&s.saveUser(...o),["prevent"]))},[e("div",ws,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.userForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.userForm.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.userForm.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.userForm.email]])]),s.editingUser?j("",!0):(r(),n("div",_s,[...t[29]||(t[29]=[e("p",{class:"text-sm text-blue-800"},[e("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),Z(" Un email sera envoyé à l'utilisateur pour qu'il définisse son mot de passe ")],-1)])])),e("div",ks,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",Cs,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>s.userForm.is_admin=o),class:"rounded border-gray-300"},null,512),[[ee,s.userForm.is_admin]]),t[30]||(t[30]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",Ss,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=o=>s.userForm.is_organizer=o),class:"rounded border-gray-300"},null,512),[[ee,s.userForm.is_organizer]]),t[31]||(t[31]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),s.editingUser?(r(),n("div",As,[e("label",js,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=o=>s.userForm.is_active=o),class:"rounded border-gray-300"},null,512),[[ee,s.userForm.is_active]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):j("",!0)]),e("div",Ms,[e("button",{type:"button",onClick:t[13]||(t[13]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingUser?"Mettre à jour":"Créer"),9,Ps)])],32)])])):j("",!0),s.showDetailsModal?(r(),n("div",Os,[e("div",Ts,[e("div",zs,[t[35]||(t[35]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{onClick:t[15]||(t[15]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[34]||(t[34]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedUser?(r(),n("div",Fs,[e("div",Us,[e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Rs,a(s.selectedUser.name),1)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Ds,a(s.selectedUser.email),1)]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Es,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(s.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",Vs,[s.selectedUser.roles&&s.selectedUser.roles.length>0?(r(!0),n(R,{key:0},D(s.selectedUser.roles,o=>(r(),n("span",{key:o.id,class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":o.slug==="admin","bg-green-100 text-green-800":o.slug==="organizer","bg-gray-100 text-gray-800":o.slug==="client"}])},a(s.getRoleName(o.slug)),3))),128)):(r(),n("span",Bs," Aucun rôle "))])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",Is,a(s.formatDate(s.selectedUser.created_at)),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",qs,a(s.selectedUser.email_verified_at?"Oui":"Non"),1)])]),s.selectedUser.is_organizer&&s.selectedUser.organizers_count>0?(r(),n("div",$s,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",Ns,a(s.selectedUser.organizers_count)+" organisateur(s)",1)])):j("",!0)])):j("",!0)])])):j("",!0)])}const Xs=se($t,[["render",Ls],["__scopeId","data-v-8b04b4fe"]]),i2=Object.freeze(Object.defineProperty({__proto__:null,default:Xs},Symbol.toStringTag,{value:"Module"})),Hs={name:"OrganizerManagement",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(!1),m=u(!1),_=u(!1),o=u(null),l=u(null),v=u(null),P=u([]),f=u([]),U=u(null);let F=null;const C=N({search:"",status:"",verified:""}),B=N({name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),G=N({user_ids:[]});let b=null;const g=async()=>{h.value=!0;try{const M=new URLSearchParams;C.search&&M.append("search",C.search),C.status&&M.append("status",C.status),C.verified&&M.append("verified",C.verified);const oe=await(await fetch(`/api/v1/admin/organizers?${M}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();oe.success&&(P.value=oe.data.organizers.data||oe.data.organizers)}catch(M){console.error("Erreur chargement organisateurs:",M)}finally{h.value=!1}},c=async()=>{try{const Y=await(await fetch("/api/v1/admin/users?role=organizer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(Y.success){const oe=Y.data.users.data||Y.data.users||[];f.value=oe.filter(z=>z.roles&&z.roles.some(L=>L.slug==="organizer"))}}catch(M){console.error("Erreur chargement utilisateurs:",M)}},d=()=>{clearTimeout(b),b=setTimeout(()=>{g()},500)},x=async()=>{o.value=null,Object.assign(B,{name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),await c(),s.value=!0,await de(),y()},w=async M=>{o.value=M,Object.assign(B,{name:M.name,bio:M.bio||"",contact_email:M.contact_email,contact_phone:M.contact_phone||"",status:M.status,user_ids:M.users?M.users.map(Y=>Y.id):[]}),await c(),s.value=!0,await de(),y()},E=async()=>{t.value=!0;try{const M=o.value?`/api/v1/admin/organizers/${o.value.id}`:"/api/v1/admin/organizers",Y=o.value?"PUT":"POST",oe={...B};F&&F.isValidNumber()&&(oe.contact_phone=F.getNumber());const z=await fetch(M,{method:Y,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(oe)});if(z.status===404&&o.value){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),s.value=!1,O(),g();return}const L=await z.json();L.success?(Toast.fire({icon:"success",title:L.message||(o.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès")}),s.value=!1,O(),g()):Swal.fire({icon:"error",title:"Erreur",text:L.message||"Erreur lors de la sauvegarde"})}catch(M){console.error("Erreur sauvegarde organisateur:",M),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},k=M=>{l.value=M,m.value=!0},V=async M=>{v.value=M,G.user_ids=M.users?M.users.map(Y=>Y.id):[],await c(),_.value=!0},A=async()=>{p.value=!0;try{const M=await fetch(`/api/v1/admin/organizers/${v.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(G)});if(M.status===404){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),_.value=!1,g();return}const Y=await M.json();Y.success?(Toast.fire({icon:"success",title:"Utilisateurs mis à jour avec succès"}),_.value=!1,g()):Swal.fire({icon:"error",title:"Erreur",text:Y.message||"Erreur lors de la mise à jour"})}catch(M){console.error("Erreur mise à jour utilisateurs:",M),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la mise à jour"})}finally{p.value=!1}},I=()=>{Object.assign(C,{search:"",status:"",verified:""}),g()},y=()=>{U.value&&!F&&(F=me(U.value,{initialCountry:"ga",preferredCountries:["ga","cm","cg","ci","sn"],separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.11.1/build/js/utils.js"}),U.value.addEventListener("input",()=>{F.isValidNumber()&&(B.contact_phone=F.getNumber())}),U.value.addEventListener("countrychange",()=>{B.contact_phone=F.getNumber()}))},O=()=>{F&&(F.destroy(),F=null)},J=()=>{O(),s.value=!1},le=M=>new Date(M).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),T=M=>({active:"Actif",inactive:"Inactif"})[M]||M,K=M=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"})[M]||"bg-gray-100 text-gray-800",$=()=>{P.value=[],f.value=[],l.value=null,v.value=null,o.value=null,s.value=!1,m.value=!1,_.value=!1,g()};return te(()=>{$()}),{loading:h,saving:t,updatingUsers:p,showModal:s,showDetailsModal:m,showUserModal:_,editingOrganizer:o,selectedOrganizer:l,managingOrganizer:v,organizers:P,availableUsers:f,filters:C,organizerForm:B,userManagementForm:G,phoneInput:U,loadOrganizers:g,loadAvailableUsers:c,debouncedSearch:d,openCreateModal:x,editOrganizer:w,saveOrganizer:E,viewOrganizerDetails:k,manageUsers:V,updateOrganizerUsers:A,resetFilters:I,initPhoneInput:y,destroyPhoneInput:O,closeModal:J,forceRefresh:$,formatDate:le,getStatusName:T,getStatusBadgeClass:K}}},Gs={class:"organizer-management p-6 bg-gray-50 min-h-screen"},Ks={class:"mb-8"},Ws={class:"flex items-center justify-between"},Js={class:"bg-white rounded-lg shadow p-6 mb-8"},Ys={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Qs={class:"flex items-end space-x-2"},Zs={class:"bg-white rounded-lg shadow"},eo={key:0,class:"p-8 text-center"},to={key:1,class:"p-8 text-center text-gray-500"},so={key:2,class:"overflow-x-auto"},oo={class:"w-full"},ao={class:"divide-y divide-gray-200"},no={class:"px-6 py-4"},ro={class:"flex items-center"},lo={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},io={class:"ml-4"},co={class:"text-sm font-medium text-gray-900"},uo={class:"text-sm text-gray-500"},mo={class:"px-6 py-4"},go={class:"text-sm text-gray-900"},po={class:"text-sm text-gray-500"},fo={class:"px-6 py-4 text-sm text-gray-900"},xo={class:"flex flex-wrap gap-1"},yo={key:0,class:"text-gray-500 text-xs"},vo={class:"px-6 py-4 text-sm text-gray-900"},bo={class:"px-6 py-4 text-sm"},ho={class:"px-6 py-4 text-sm"},wo={class:"px-6 py-4 text-sm space-x-2"},_o=["onClick"],ko=["onClick"],Co=["onClick"],So={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ao={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},jo={class:"text-lg font-bold mb-4"},Mo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Po={class:"md:col-span-2"},Oo={class:"md:col-span-2"},To={class:"md:col-span-2"},zo={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},Fo=["value"],Uo={class:"ml-2 text-sm"},Ro={key:0,class:"text-sm text-gray-500"},Do={class:"flex justify-end space-x-3 mt-6"},Eo=["disabled"],Vo={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Bo={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},Io={class:"flex justify-between items-center mb-4"},qo={key:0,class:"space-y-4"},$o={class:"grid grid-cols-2 gap-4"},No={class:"text-sm text-gray-900"},Lo={class:"text-sm text-gray-900"},Xo={class:"text-sm text-gray-900"},Ho={class:"text-sm text-gray-900"},Go={class:"text-sm"},Ko={class:"text-sm"},Wo={class:"text-sm text-gray-900"},Jo={class:"text-sm text-gray-900"},Yo={key:0},Qo={class:"text-sm text-gray-900"},Zo={key:1},ea={class:"flex flex-wrap gap-2"},ta={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},sa={class:"bg-white rounded-lg p-6 w-full max-w-md"},oa={class:"flex justify-between items-center mb-4"},aa={key:0,class:"space-y-4"},na={class:"font-medium text-gray-900 mb-2"},ra={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},la={class:"text-sm font-medium"},ia={class:"text-xs text-gray-500 block"},da=["value"],ca={class:"flex justify-end space-x-3"},ua=["disabled"];function ma(h,t,p,s,m,_){return r(),n("div",Gs,[e("div",Ks,[e("div",Ws,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Créer Organisateur ",-1)])])])]),e("div",Js,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Ys,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[q,s.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut actif",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.verified=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],544),[[q,s.filters.verified]])]),e("div",Qs,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser "),e("button",{onClick:t[8]||(t[8]=(...o)=>s.forceRefresh&&s.forceRefresh(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Actualiser ")])])]),e("div",Zs,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),s.loading?(r(),n("div",eo,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.organizers.length===0?(r(),n("div",to," Aucun organisateur trouvé ")):(r(),n("div",so,[e("table",oo,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",ao,[(r(!0),n(R,null,D(s.organizers,o=>(r(),n("tr",{key:o.id},[e("td",no,[e("div",ro,[e("div",lo,a(o.name.charAt(0).toUpperCase()),1),e("div",io,[e("div",co,a(o.name),1),e("div",uo,a(o.slug),1)])])]),e("td",mo,[e("div",go,a(o.contact_email),1),e("div",po,a(o.contact_phone||"-"),1)]),e("td",fo,[e("div",xo,[(r(!0),n(R,null,D(o.users,l=>(r(),n("span",{key:l.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(l.name),1))),128)),o.users.length===0?(r(),n("span",yo," Aucun utilisateur ")):j("",!0)])]),e("td",vo,a(o.events_count||0),1),e("td",bo,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",ho,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(o.is_active?"Actif":"Inactif"),3)]),e("td",wo,[e("button",{onClick:l=>s.editOrganizer(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,_o),e("button",{onClick:l=>s.viewOrganizerDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,ko),e("button",{onClick:l=>s.manageUsers(o),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,Co)])]))),128))])])]))]),s.showModal?(r(),n("div",So,[e("div",Ao,[e("h3",jo,a(s.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=re((...o)=>s.saveOrganizer&&s.saveOrganizer(...o),["prevent"]))},[e("div",Mo,[e("div",Po,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.organizerForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.organizerForm.name]])]),e("div",Oo,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biographie",-1)),i(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.organizerForm.bio=o),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.organizerForm.bio]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.organizerForm.contact_email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),i(e("input",{ref:"phoneInput","onUpdate:modelValue":t[12]||(t[12]=o=>s.organizerForm.contact_phone=o),type:"tel",class:"w-full border rounded-lg px-3 py-2",placeholder:"Téléphone"},null,512),[[S,s.organizerForm.contact_phone]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),i(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.organizerForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[q,s.organizerForm.status]])]),e("div",To,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",zo,[(r(!0),n(R,null,D(s.availableUsers,o=>(r(),n("div",{key:o.id,class:"flex items-center mb-2"},[i(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[14]||(t[14]=l=>s.organizerForm.user_ids=l),class:"rounded border-gray-300"},null,8,Fo),[[ee,s.organizerForm.user_ids]]),e("span",Uo,a(o.name)+" ("+a(o.email)+")",1)]))),128)),s.availableUsers.length===0?(r(),n("div",Ro," Aucun utilisateur disponible ")):j("",!0)])])]),e("div",Do,[e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingOrganizer?"Mettre à jour":"Créer"),9,Eo)])],32)])])):j("",!0),s.showDetailsModal?(r(),n("div",Vo,[e("div",Bo,[e("div",Io,[t[41]||(t[41]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[40]||(t[40]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrganizer?(r(),n("div",qo,[e("div",$o,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",No,a(s.selectedOrganizer.name),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",Lo,a(s.selectedOrganizer.slug),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Xo,a(s.selectedOrganizer.contact_email),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Ho,a(s.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Go,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrganizer.status)])},a(s.getStatusName(s.selectedOrganizer.status)),3)])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut actif",-1)),e("p",Ko,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedOrganizer.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(s.selectedOrganizer.is_active?"Actif":"Inactif"),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Wo,a(s.formatDate(s.selectedOrganizer.created_at)),1)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",Jo,a(s.selectedOrganizer.events_count||0)+" événement(s)",1)])]),s.selectedOrganizer.bio?(r(),n("div",Yo,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Biographie",-1)),e("p",Qo,a(s.selectedOrganizer.bio),1)])):j("",!0),s.selectedOrganizer.users&&s.selectedOrganizer.users.length>0?(r(),n("div",Zo,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",ea,[(r(!0),n(R,null,D(s.selectedOrganizer.users,o=>(r(),n("span",{key:o.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(o.name),1))),128))])])):j("",!0)])):j("",!0)])])):j("",!0),s.showUserModal?(r(),n("div",ta,[e("div",sa,[e("div",oa,[t[53]||(t[53]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[52]||(t[52]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.managingOrganizer?(r(),n("div",aa,[e("div",null,[e("h4",na,a(s.managingOrganizer.name),1),t[54]||(t[54]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",ra,[(r(!0),n(R,null,D(s.availableUsers,o=>(r(),n("div",{key:o.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",la,a(o.name),1),e("span",ia,a(o.email),1)]),i(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[19]||(t[19]=l=>s.userManagementForm.user_ids=l),class:"rounded border-gray-300"},null,8,da),[[ee,s.userManagementForm.user_ids]])]))),128))]),e("div",ca,[e("button",{onClick:t[20]||(t[20]=o=>s.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...o)=>s.updateOrganizerUsers&&s.updateOrganizerUsers(...o)),disabled:s.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.updatingUsers?"Mise à jour...":"Mettre à jour"),9,ua)])])):j("",!0)])])):j("",!0)])}const ga=se(Hs,[["render",ma],["__scopeId","data-v-21a8738d"]]),d2=Object.freeze(Object.defineProperty({__proto__:null,default:ga},Symbol.toStringTag,{value:"Module"})),pa={name:"EventManagement",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(!1),m=u(null),_=u(null),o=u([]),l=u([]),v=u([]),P=u([]),f=u(null),U=N({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),F=N({search:"",status:"",organizer_id:"",category_id:"",page:1}),C=N({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",schedules:[],ticket_types:[],new_venue_name:"",new_venue_city:"",new_venue_address:""}),B=u(!1);let G=null;const b=async()=>{h.value=!0;try{const z=new URLSearchParams;Object.keys(F).forEach(X=>{F[X]&&F[X]!==""&&z.append(X,F[X])});const W=await(await fetch(`/api/v1/admin/events?${z}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(W.success){o.value=W.data.events.data,f.value={current_page:W.data.events.current_page,last_page:W.data.events.last_page,from:W.data.events.from,to:W.data.events.to,total:W.data.events.total};const X=W.data.events.data;U.total_events=f.value.total,U.published_events=X.filter(Q=>Q.status==="published").length,U.draft_events=X.filter(Q=>Q.status==="draft").length,U.total_tickets_sold=X.reduce((Q,ce)=>Q+(ce.tickets_sold||0),0)}}catch(z){console.error("Erreur chargement événements:",z)}finally{h.value=!1}},g=async()=>{try{const L=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();L.success&&(l.value=L.data.organizers.data||L.data.organizers)}catch(z){console.error("Erreur chargement organisateurs:",z)}},c=async()=>{try{const L=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();console.log("Categories response:",L),L.success&&(v.value=L.categories||L.data,console.log("Categories loaded:",v.value))}catch(z){console.error("Erreur chargement catégories:",z)}},d=async()=>{try{const L=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();L.success&&(P.value=L.venues||L.data)}catch(z){console.error("Erreur chargement lieux:",z),P.value=[]}},x=()=>{clearTimeout(G),G=setTimeout(()=>{F.page=1,b()},500)},w=z=>{z>=1&&z<=f.value.last_page&&(F.page=z,b())},E=()=>{Object.assign(F,{search:"",status:"",organizer_id:"",category_id:"",page:1}),b()},k=()=>{m.value=null,Object.assign(C,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),B.value=!1,p.value=!0},V=async z=>{try{const W=await(await fetch(`/api/v1/admin/events/${z.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();W.success&&(m.value=W.data.event,Object.assign(C,{title:W.data.event.title,description:W.data.event.description,organizer_id:W.data.event.organizer_id,category_id:W.data.event.category_id,venue_id:W.data.event.venue_id,status:W.data.event.status,schedules:W.data.event.schedules?.map(X=>({starts_at:X.starts_at?X.starts_at.slice(0,16):"",ends_at:X.ends_at?X.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(W.data.event.ticket_types||W.data.event.ticketTypes||[]).map(X=>({name:X.name,price:X.price,capacity:X.available_quantity||X.capacity||0,description:X.description||""}))}),(!C.ticket_types||C.ticket_types.length===0)&&(C.ticket_types=[{name:"",price:0,capacity:0,description:""}]),p.value=!0)}catch(L){console.error("Erreur chargement événement:",L)}},A=async()=>{t.value=!0;try{const z=m.value?`/api/v1/admin/events/${m.value.id}`:"/api/v1/admin/events",L=m.value?"PUT":"POST",X=await(await fetch(z,{method:L,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(C)})).json();X.success?(Swal.fire({icon:"success",title:"Succès",text:m.value?"Événement mis à jour avec succès":"Événement créé avec succès"}),p.value=!1,b()):Swal.fire({icon:"error",title:"Erreur",text:X.message||"Erreur lors de la sauvegarde"})}catch(z){console.error("Erreur sauvegarde événement:",z),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},I=async z=>{try{const W=await(await fetch(`/api/v1/admin/events/${z.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();W.success&&(_.value=W.data.event,s.value=!0)}catch(L){console.error("Erreur chargement détails événement:",L)}},y=async z=>{try{const W=await(await fetch(`/api/v1/admin/events/${z.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(W.success){const X=W.data.event;m.value=null,Object.assign(C,{title:`${X.title} (Copie)`,description:X.description||"",organizer_id:X.organizer_id,category_id:X.category_id,venue_id:X.venue_id,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:X.schedules?.map(Q=>({starts_at:Q.starts_at?Q.starts_at.slice(0,16):"",ends_at:Q.ends_at?Q.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(X.ticket_types||X.ticketTypes||[]).map(Q=>({name:Q.name,price:Q.price,capacity:Q.available_quantity||Q.max_quantity||Q.capacity||0,description:Q.description||""}))}),(!C.schedules||C.schedules.length===0)&&(C.schedules=[{starts_at:"",ends_at:""}]),(!C.ticket_types||C.ticket_types.length===0)&&(C.ticket_types=[{name:"",price:0,capacity:0,description:""}]),B.value=!1,p.value=!0}else Swal.fire({icon:"error",title:"Erreur",text:"Impossible de récupérer les détails de l'événement"})}catch(L){console.error("Erreur duplication événement:",L),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la duplication"})}},O=()=>{C.schedules.push({starts_at:"",ends_at:""})},J=z=>{C.schedules.splice(z,1)},le=()=>{C.ticket_types.push({name:"",price:0,capacity:0,description:""})},T=z=>{C.ticket_types.splice(z,1)},K=z=>new Intl.NumberFormat("fr-FR").format(z),$=z=>new Date(z).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),M=z=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[z]||z,Y=z=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[z]||"bg-gray-100 text-gray-800";ue(()=>C.venue_id,z=>{z==="new"&&(B.value=!0)});const oe=()=>{B.value=!1,C.venue_id="",C.new_venue_name="",C.new_venue_city="",C.new_venue_address=""};return te(()=>{b(),g(),c(),d()}),{loading:h,saving:t,showModal:p,showDetailsModal:s,editingEvent:m,selectedEvent:_,events:o,organizers:l,categories:v,venues:P,pagination:f,stats:U,filters:F,eventForm:C,showNewVenue:B,loadEvents:b,loadOrganizers:g,loadCategories:c,loadVenues:d,debouncedSearch:x,changePage:w,resetFilters:E,openCreateModal:k,editEvent:V,saveEvent:A,viewEventDetails:I,duplicateEvent:y,addSchedule:O,removeSchedule:J,addTicketType:le,removeTicketType:T,cancelNewVenue:oe,formatAmount:K,formatDateTime:$,getStatusName:M,getStatusBadgeClass:Y}}},fa={class:"event-management p-6 bg-gray-50 min-h-screen"},xa={class:"mb-8"},ya={class:"flex items-center justify-between"},va={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ba={class:"bg-white rounded-lg shadow p-6"},ha={class:"flex items-center"},wa={class:"ml-4"},_a={class:"text-2xl font-bold text-blue-600"},ka={class:"bg-white rounded-lg shadow p-6"},Ca={class:"flex items-center"},Sa={class:"ml-4"},Aa={class:"text-2xl font-bold text-green-600"},ja={class:"bg-white rounded-lg shadow p-6"},Ma={class:"flex items-center"},Pa={class:"ml-4"},Oa={class:"text-2xl font-bold text-yellow-600"},Ta={class:"bg-white rounded-lg shadow p-6"},za={class:"flex items-center"},Fa={class:"ml-4"},Ua={class:"text-2xl font-bold text-purple-600"},Ra={class:"bg-white rounded-lg shadow p-6 mb-8"},Da={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Ea=["value"],Va=["value"],Ba={class:"flex items-end"},Ia={class:"bg-white rounded-lg shadow"},qa={key:0,class:"p-8 text-center"},$a={key:1,class:"p-8 text-center text-gray-500"},Na={key:2,class:"overflow-x-auto"},La={class:"w-full"},Xa={class:"divide-y divide-gray-200"},Ha={class:"px-6 py-4"},Ga={class:"flex items-center"},Ka={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},Wa={class:"ml-4"},Ja={class:"text-sm font-medium text-gray-900"},Ya={class:"text-sm text-gray-500"},Qa={class:"px-6 py-4 text-sm text-gray-900"},Za={class:"px-6 py-4 text-sm text-gray-900"},en={class:"px-6 py-4 text-sm text-gray-900"},tn={class:"px-6 py-4 text-sm text-gray-900"},sn={class:"space-y-1"},on={class:"text-gray-500"},an={class:"px-6 py-4 text-sm"},nn={class:"px-6 py-4 text-sm space-x-2"},rn=["onClick"],ln=["onClick"],dn=["onClick"],cn={key:3,class:"p-6 border-t"},un={class:"flex justify-between items-center"},mn={class:"text-sm text-gray-700"},gn={class:"flex space-x-2"},pn=["disabled"],fn={class:"px-3 py-1 text-sm text-gray-600"},xn=["disabled"],yn={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},vn={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},bn={class:"text-lg font-bold mb-4"},hn={class:"space-y-6"},wn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_n={class:"md:col-span-2"},kn={class:"md:col-span-2"},Cn=["value"],Sn=["value"],An={key:0},jn=["value"],Mn={key:1,class:"space-y-2"},Pn={class:"space-y-3"},On=["onUpdate:modelValue"],Tn=["onUpdate:modelValue"],zn={class:"flex items-end"},Fn=["onClick"],Un={class:"space-y-3"},Rn=["onUpdate:modelValue"],Dn=["onUpdate:modelValue"],En=["onUpdate:modelValue"],Vn=["onUpdate:modelValue"],Bn={class:"flex items-end"},In=["onClick"],qn={class:"flex justify-end space-x-3 mt-6"},$n=["disabled"],Nn={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ln={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Xn={class:"flex justify-between items-center mb-4"},Hn={key:0,class:"space-y-6"},Gn={class:"grid grid-cols-2 gap-6"},Kn={class:"text-sm font-medium text-gray-900"},Wn={class:"text-sm text-gray-900"},Jn={class:"text-sm text-gray-900"},Yn={class:"text-sm text-gray-900"},Qn={class:"text-sm text-gray-900"},Zn={class:"text-sm text-gray-900"},er={key:0},tr={class:"space-y-2"},sr={class:"text-sm"},or={key:1},ar={class:"overflow-x-auto"},nr={class:"w-full text-sm border border-gray-200 rounded-lg"},rr={class:"bg-white divide-y divide-gray-200"},lr={class:"px-4 py-3 font-medium text-gray-900"},ir={class:"px-4 py-3 text-gray-900"},dr={class:"px-4 py-3 text-gray-900"},cr={class:"px-4 py-3"},ur={class:"px-4 py-3 text-gray-600"},mr={key:2};function gr(h,t,p,s,m,_){return r(),n("div",fa,[e("div",xa,[e("div",ya,[t[28]||(t[28]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Créer Événement ",-1)])])])]),e("div",va,[e("div",ba,[e("div",ha,[t[30]||(t[30]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",wa,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",_a,a(s.stats.total_events||0),1)])])]),e("div",ka,[e("div",Ca,[t[32]||(t[32]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Sa,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",Aa,a(s.stats.published_events||0),1)])])]),e("div",ja,[e("div",Ma,[t[34]||(t[34]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",Pa,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",Oa,a(s.stats.draft_events||0),1)])])]),e("div",Ta,[e("div",za,[t[36]||(t[36]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",Fa,[t[35]||(t[35]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",Ua,a(s.stats.total_tickets_sold||0),1)])])])]),e("div",Ra,[t[44]||(t[44]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Da,[e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.search]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[38]||(t[38]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[q,s.filters.status]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[40]||(t[40]=e("option",{value:""},"Tous les organisateurs",-1)),(r(!0),n(R,null,D(s.organizers,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,Ea))),128))],544),[[q,s.filters.organizer_id]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.category_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[42]||(t[42]=e("option",{value:""},"Toutes les catégories",-1)),(r(!0),n(R,null,D(s.categories,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,Va))),128))],544),[[q,s.filters.category_id]])]),e("div",Ba,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ia,[t[47]||(t[47]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),s.loading?(r(),n("div",qa,[...t[45]||(t[45]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.events.length===0?(r(),n("div",$a," Aucun événement trouvé ")):(r(),n("div",Na,[e("table",La,[t[46]||(t[46]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Xa,[(r(!0),n(R,null,D(s.events,o=>(r(),n("tr",{key:o.id},[e("td",Ha,[e("div",Ga,[e("div",Ka,a(o.title.charAt(0).toUpperCase()),1),e("div",Wa,[e("div",Ja,a(o.title),1),e("div",Ya,a(o.slug),1)])])]),e("td",Qa,a(o.organizer?.name||"-"),1),e("td",Za,a(o.category?.name||"-"),1),e("td",en,a(o.schedules?.[0]?s.formatDateTime(o.schedules[0].starts_at):"Non programmé"),1),e("td",tn,[e("div",sn,[e("div",null,"Vendus: "+a(o.tickets_sold||0),1),e("div",on,"Total: "+a(o.total_capacity||0),1)])]),e("td",an,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",nn,[e("button",{onClick:l=>s.editEvent(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,rn),e("button",{onClick:l=>s.viewEventDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,ln),e("button",{onClick:l=>s.duplicateEvent(o),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,dn)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(r(),n("div",cn,[e("div",un,[e("div",mn," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" événements ",1),e("div",gn,[e("button",{onClick:t[10]||(t[10]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,pn),e("span",fn," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,xn)])])])):j("",!0)]),s.showModal?(r(),n("div",yn,[e("div",vn,[e("h3",bn,a(s.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[25]||(t[25]=re((...o)=>s.saveEvent&&s.saveEvent(...o),["prevent"]))},[e("div",hn,[e("div",wn,[e("div",_n,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.eventForm.title=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.eventForm.title]])]),e("div",kn,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),i(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.eventForm.description=o),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.eventForm.description]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),i(e("select",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.eventForm.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[50]||(t[50]=e("option",{value:""},"Sélectionner un organisateur",-1)),(r(!0),n(R,null,D(s.organizers,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,Cn))),128))],512),[[q,s.eventForm.organizer_id]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),i(e("select",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.eventForm.category_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[52]||(t[52]=e("option",{value:""},"Sélectionner une catégorie",-1)),(r(!0),n(R,null,D(s.categories,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,Sn))),128))],512),[[q,s.eventForm.category_id]])]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),s.showNewVenue?j("",!0):(r(),n("div",An,[i(e("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.eventForm.venue_id=o),class:"w-full border rounded-lg px-3 py-2"},[t[54]||(t[54]=e("option",{value:""},"Sélectionner un lieu",-1)),(r(!0),n(R,null,D(s.venues,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name)+" - "+a(o.city),9,jn))),128)),t[55]||(t[55]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],512),[[q,s.eventForm.venue_id]])])),s.showNewVenue||s.eventForm.venue_id==="new"?(r(),n("div",Mn,[i(e("input",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.eventForm.new_venue_name=o),type:"text",placeholder:"Nom du lieu",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[S,s.eventForm.new_venue_name]]),i(e("input",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.eventForm.new_venue_city=o),type:"text",placeholder:"Ville",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[S,s.eventForm.new_venue_city]]),i(e("input",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.eventForm.new_venue_address=o),type:"text",placeholder:"Adresse",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.eventForm.new_venue_address]]),e("button",{type:"button",onClick:t[20]||(t[20]=(...o)=>s.cancelNewVenue&&s.cancelNewVenue(...o)),class:"text-sm text-blue-600 hover:text-blue-800"}," Utiliser un lieu existant ")])):j("",!0)]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),i(e("select",{"onUpdate:modelValue":t[21]||(t[21]=o=>s.eventForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[57]||(t[57]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[q,s.eventForm.status]])])]),e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",Pn,[(r(!0),n(R,null,D(s.eventForm.schedules,(o,l)=>(r(),n("div",{key:l,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),i(e("input",{"onUpdate:modelValue":v=>o.starts_at=v,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,On),[[S,o.starts_at]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),i(e("input",{"onUpdate:modelValue":v=>o.ends_at=v,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Tn),[[S,o.ends_at]])]),e("div",zn,[e("button",{type:"button",onClick:v=>s.removeSchedule(l),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,Fn)])]))),128)),e("button",{type:"button",onClick:t[22]||(t[22]=(...o)=>s.addSchedule&&s.addSchedule(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",Un,[(r(!0),n(R,null,D(s.eventForm.ticket_types,(o,l)=>(r(),n("div",{key:l,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":v=>o.name=v,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Rn),[[S,o.name]])]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),i(e("input",{"onUpdate:modelValue":v=>o.price=v,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Dn),[[S,o.price,void 0,{number:!0}]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),i(e("input",{"onUpdate:modelValue":v=>o.capacity=v,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,En),[[S,o.capacity,void 0,{number:!0}]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),i(e("input",{"onUpdate:modelValue":v=>o.description=v,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,Vn),[[S,o.description]])]),e("div",Bn,[e("button",{type:"button",onClick:v=>s.removeTicketType(l),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,In)])]))),128)),e("button",{type:"button",onClick:t[23]||(t[23]=(...o)=>s.addTicketType&&s.addTicketType(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",qn,[e("button",{type:"button",onClick:t[24]||(t[24]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingEvent?"Mettre à jour":"Créer"),9,$n)])],32)])])):j("",!0),s.showDetailsModal?(r(),n("div",Nn,[e("div",Ln,[e("div",Xn,[t[68]||(t[68]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[26]||(t[26]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[67]||(t[67]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedEvent?(r(),n("div",Hn,[e("div",Gn,[e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Kn,a(s.selectedEvent.title),1)]),e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedEvent.status)])},a(s.getStatusName(s.selectedEvent.status)),3)]),e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Wn,a(s.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",Jn,a(s.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Yn,a(s.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Qn,a(s.formatDateTime(s.selectedEvent.created_at)),1)])]),e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",Zn,a(s.selectedEvent.description),1)]),s.selectedEvent.schedules&&s.selectedEvent.schedules.length>0?(r(),n("div",er,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",tr,[(r(!0),n(R,null,D(s.selectedEvent.schedules,o=>(r(),n("div",{key:o.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",sr,"Du "+a(s.formatDateTime(o.starts_at))+" au "+a(s.formatDateTime(o.ends_at)),1)]))),128))])])):j("",!0),(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types)&&(s.selectedEvent.ticketTypes?.length>0||s.selectedEvent.ticket_types?.length>0)?(r(),n("div",or,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",ar,[e("table",nr,[t[77]||(t[77]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prix"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Capacité"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description")])],-1)),e("tbody",rr,[(r(!0),n(R,null,D(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types,o=>(r(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",lr,a(o.name),1),e("td",ir,a(s.formatAmount(o.price))+" XAF",1),e("td",dr,a(o.available_quantity||o.max_quantity||o.capacity||0),1),e("td",cr,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.status==="active"?"Actif":"Inactif"),3)]),e("td",ur,a(o.description||"-"),1)]))),128))])])])])):(r(),n("div",mr,[...t[79]||(t[79]=[e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1),e("div",{class:"bg-gray-50 p-4 rounded-lg text-center"},[e("p",{class:"text-gray-500"},"Aucun type de billet défini pour cet événement")],-1)])]))])):j("",!0)])])):j("",!0)])}const pr=se(pa,[["render",gr],["__scopeId","data-v-223bbb5e"]]),c2=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"})),fr={name:"OrderManagement",setup(){const h=u(!1),t=u(!1),p=u(null),s=u([]),m=u([]),_=u([]),o=u(null),l=N({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),v=N({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let P=null;const f=async()=>{h.value=!0;try{const A=new URLSearchParams;Object.keys(v).forEach(O=>{v[O]&&v[O]!==""&&A.append(O,v[O])});const y=await(await fetch(`/api/v1/admin/orders?${A}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(y.success){s.value=y.data.orders.data,o.value={current_page:y.data.orders.current_page,last_page:y.data.orders.last_page,from:y.data.orders.from,to:y.data.orders.to,total:y.data.orders.total};const O=y.data.orders.data;l.total_orders=o.value.total,l.confirmed_orders=O.filter(J=>J.status==="confirmed").length,l.pending_orders=O.filter(J=>J.status==="pending").length,l.total_revenue=O.filter(J=>J.status==="confirmed").reduce((J,le)=>J+le.total_amount,0)}}catch(A){console.error("Erreur chargement commandes:",A)}finally{h.value=!1}},U=async()=>{try{const I=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();I.success&&(m.value=I.data.organizers.data||I.data.organizers)}catch(A){console.error("Erreur chargement organisateurs:",A)}},F=async()=>{try{const I=await(await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();I.success&&(_.value=I.data.events.data||I.data.events)}catch(A){console.error("Erreur chargement événements:",A)}},C=()=>{clearTimeout(P),P=setTimeout(()=>{v.page=1,f()},500)},B=A=>{A>=1&&A<=o.value.last_page&&(v.page=A,f())},G=()=>{Object.assign(v,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),f()},b=async A=>{try{const y=await(await fetch(`/api/v1/admin/orders/${A.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();y.success&&(p.value=y.data.order,t.value=!0)}catch(I){console.error("Erreur chargement détails commande:",I)}},g=async(A,I)=>{if(confirm(`Êtes-vous sûr de vouloir ${I==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const O=await(await fetch(`/api/v1/admin/orders/${A.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:I})})).json();O.success?(alert(`Commande ${I==="confirmed"?"confirmée":"annulée"} avec succès`),f(),t.value&&(p.value.status=I)):alert(O.message||"Erreur lors de la mise à jour")}catch(y){console.error("Erreur mise à jour statut commande:",y),alert("Erreur technique")}},c=async()=>{try{const A=new URLSearchParams;Object.keys(v).forEach(y=>{v[y]&&v[y]!==""&&y!=="page"&&A.append(y,v[y])});const I=await fetch(`/api/v1/admin/orders/export?${A}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(I.ok){const y=await I.blob(),O=window.URL.createObjectURL(y),J=document.createElement("a");J.href=O,J.download=`commandes-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(J),J.click(),window.URL.revokeObjectURL(O),document.body.removeChild(J)}}catch(A){console.error("Erreur export:",A),alert("Erreur lors de l'export des données")}},d=A=>new Intl.NumberFormat("fr-FR").format(A),x=A=>new Date(A).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),w=A=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[A]||A,E=A=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[A]||"bg-gray-100 text-gray-800",k=A=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[A]||A,V=A=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[A]||"bg-gray-100 text-gray-800";return te(()=>{f(),U(),F()}),{loading:h,showDetailsModal:t,selectedOrder:p,orders:s,organizers:m,events:_,pagination:o,stats:l,filters:v,loadOrders:f,loadOrganizers:U,loadEvents:F,debouncedSearch:C,changePage:B,resetFilters:G,viewOrderDetails:b,updateOrderStatus:g,exportOrders:c,formatAmount:d,formatDateTime:x,getStatusName:w,getStatusBadgeClass:E,getTicketStatusName:k,getTicketStatusClass:V}}},xr={class:"order-management p-6 bg-gray-50 min-h-screen"},yr={class:"mb-8"},vr={class:"flex items-center justify-between"},br={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},hr={class:"bg-white rounded-lg shadow p-6"},wr={class:"flex items-center"},_r={class:"ml-4"},kr={class:"text-2xl font-bold text-blue-600"},Cr={class:"bg-white rounded-lg shadow p-6"},Sr={class:"flex items-center"},Ar={class:"ml-4"},jr={class:"text-2xl font-bold text-green-600"},Mr={class:"bg-white rounded-lg shadow p-6"},Pr={class:"flex items-center"},Or={class:"ml-4"},Tr={class:"text-2xl font-bold text-yellow-600"},zr={class:"bg-white rounded-lg shadow p-6"},Fr={class:"flex items-center"},Ur={class:"ml-4"},Rr={class:"text-2xl font-bold text-purple-600"},Dr={class:"bg-white rounded-lg shadow p-6 mb-8"},Er={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Vr=["value"],Br=["value"],Ir={class:"flex justify-between items-center mt-4"},qr={class:"text-sm text-gray-600"},$r={class:"bg-white rounded-lg shadow"},Nr={key:0,class:"p-8 text-center"},Lr={key:1,class:"p-8 text-center text-gray-500"},Xr={key:2,class:"overflow-x-auto"},Hr={class:"w-full"},Gr={class:"divide-y divide-gray-200"},Kr={class:"px-6 py-4 text-sm font-mono text-blue-600"},Wr=["onClick"],Jr={class:"px-6 py-4 text-sm text-gray-900"},Yr={class:"font-medium"},Qr={class:"text-gray-500"},Zr={class:"px-6 py-4 text-sm text-gray-900"},el={class:"font-medium"},tl={class:"text-gray-500"},sl={class:"px-6 py-4 text-sm text-gray-900"},ol={class:"space-y-1"},al={class:"px-6 py-4 text-sm font-medium text-gray-900"},nl={class:"px-6 py-4 text-sm"},rl={class:"px-6 py-4 text-sm text-gray-500"},ll={class:"px-6 py-4 text-sm space-x-2"},il=["onClick"],dl=["onClick"],cl=["onClick"],ul={key:3,class:"p-6 border-t"},ml={class:"flex justify-between items-center"},gl={class:"text-sm text-gray-700"},pl={class:"flex space-x-2"},fl=["disabled"],xl={class:"px-3 py-1 text-sm text-gray-600"},yl=["disabled"],vl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},bl={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},hl={class:"flex justify-between items-center mb-4"},wl={key:0,class:"space-y-6"},_l={class:"grid grid-cols-2 gap-6"},kl={class:"space-y-4"},Cl={class:"space-y-2"},Sl={class:"text-sm font-mono text-gray-900"},Al={class:"text-sm text-gray-900"},jl={key:0},Ml={class:"text-sm text-gray-900"},Pl={class:"space-y-4"},Ol={class:"space-y-2"},Tl={class:"text-sm text-gray-900"},zl={class:"text-sm text-gray-900"},Fl={key:0},Ul={class:"text-sm text-gray-900"},Rl={key:0,class:"border-t pt-6"},Dl={class:"grid grid-cols-2 gap-4"},El={class:"text-sm text-gray-900"},Vl={class:"text-sm text-gray-900"},Bl={class:"text-sm text-gray-900"},Il={class:"text-sm text-gray-900"},ql={class:"border-t pt-6"},$l={class:"overflow-x-auto"},Nl={class:"w-full text-sm"},Ll={class:"divide-y divide-gray-200"},Xl={class:"px-4 py-2"},Hl={class:"px-4 py-2"},Gl={class:"px-4 py-2"},Kl={class:"px-4 py-2 font-medium"},Wl={class:"bg-gray-50"},Jl={class:"px-4 py-2 font-bold"},Yl={key:1,class:"border-t pt-6"},Ql={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Zl={class:"flex justify-between items-start mb-2"},ei={class:"font-mono text-blue-600"},ti={class:"text-gray-600"},si={key:0},oi={class:"border-t pt-6 flex justify-end space-x-3"};function ai(h,t,p,s,m,_){return r(),n("div",xr,[e("div",yr,[e("div",vr,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Commandes"),e("p",{class:"text-gray-600"},"Gérer et suivre toutes les commandes de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.exportOrders&&s.exportOrders(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),Z(" Exporter ",-1)])])])]),e("div",br,[e("div",hr,[e("div",wr,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",_r,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Commandes",-1)),e("p",kr,a(s.stats.total_orders||0),1)])])]),e("div",Cr,[e("div",Sr,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Ar,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",jr,a(s.stats.confirmed_orders||0),1)])])]),e("div",Mr,[e("div",Pr,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Or,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",Tr,a(s.stats.pending_orders||0),1)])])]),e("div",zr,[e("div",Fr,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ur,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",Rr,a(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])])]),e("div",Dr,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Er,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[ne('<option value="" data-v-e0d05b6e>Tous les statuts</option><option value="pending" data-v-e0d05b6e>En attente</option><option value="confirmed" data-v-e0d05b6e>Confirmée</option><option value="cancelled" data-v-e0d05b6e>Annulée</option><option value="refunded" data-v-e0d05b6e>Remboursée</option>',5)])],544),[[q,s.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(r(!0),n(R,null,D(s.organizers,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,Vr))),128))],544),[[q,s.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.event_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(r(!0),n(R,null,D(s.events,o=>(r(),n("option",{key:o.id,value:o.id},a(o.title),9,Br))),128))],544),[[q,s.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.filters.date_from=o),onChange:t[10]||(t[10]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filters.date_to=o),onChange:t[12]||(t[12]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.date_to]])])]),e("div",Ir,[e("button",{onClick:t[13]||(t[13]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",qr,a(s.pagination?`${s.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",$r,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Commandes")],-1)),s.loading?(r(),n("div",Nr,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.orders.length===0?(r(),n("div",Lr," Aucune commande trouvée ")):(r(),n("div",Xr,[e("table",Hr,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Gr,[(r(!0),n(R,null,D(s.orders,o=>(r(),n("tr",{key:o.id},[e("td",Kr,[e("button",{onClick:l=>s.viewOrderDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,Wr)]),e("td",Jr,[e("div",null,[e("div",Yr,a(o.customer_name),1),e("div",Qr,a(o.customer_email),1)])]),e("td",Zr,[e("div",null,[e("div",el,a(o.event?.title||"-"),1),e("div",tl,a(o.event?.organizer?.name||"-"),1)])]),e("td",sl,[e("div",ol,[(r(!0),n(R,null,D(o.items,l=>(r(),n("div",{key:l.id,class:"text-xs"},a(l.quantity)+"x "+a(l.ticket_type_name),1))),128))])]),e("td",al,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",nl,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",rl,a(s.formatDateTime(o.created_at)),1),e("td",ll,[e("button",{onClick:l=>s.viewOrderDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,il),o.status==="pending"?(r(),n("button",{key:0,onClick:l=>s.updateOrderStatus(o,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,dl)):j("",!0),["pending","confirmed"].includes(o.status)?(r(),n("button",{key:1,onClick:l=>s.updateOrderStatus(o,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,cl)):j("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(r(),n("div",ul,[e("div",ml,[e("div",gl," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" commandes ",1),e("div",pl,[e("button",{onClick:t[14]||(t[14]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,fl),e("span",xl," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,yl)])])])):j("",!0)]),s.showDetailsModal?(r(),n("div",vl,[e("div",bl,[e("div",hl,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrder?(r(),n("div",wl,[e("div",_l,[e("div",kl,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",Cl,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Sl,"#"+a(s.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrder.status)])},a(s.getStatusName(s.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Al,a(s.formatDateTime(s.selectedOrder.created_at)),1)]),s.selectedOrder.confirmed_at?(r(),n("div",jl,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",Ml,a(s.formatDateTime(s.selectedOrder.confirmed_at)),1)])):j("",!0)])])]),e("div",Pl,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",Ol,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Tl,a(s.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",zl,a(s.selectedOrder.customer_email),1)]),s.selectedOrder.customer_phone?(r(),n("div",Fl,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Ul,a(s.selectedOrder.customer_phone),1)])):j("",!0)])])])]),s.selectedOrder.event?(r(),n("div",Rl,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",Dl,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",El,a(s.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Vl,a(s.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Bl,a(s.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",Il,a(s.selectedOrder.event.schedules?.[0]?s.formatDateTime(s.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):j("",!0),e("div",ql,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",$l,[e("table",Nl,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",Ll,[(r(!0),n(R,null,D(s.selectedOrder.items,o=>(r(),n("tr",{key:o.id},[e("td",Xl,a(o.ticket_type_name),1),e("td",Hl,a(s.formatAmount(o.unit_price))+" XAF",1),e("td",Gl,a(o.quantity),1),e("td",Kl,a(s.formatAmount(o.total_price))+" XAF",1)]))),128))]),e("tfoot",Wl,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",Jl,a(s.formatAmount(s.selectedOrder.total_amount))+" XAF",1)])])])])]),s.selectedOrder.tickets&&s.selectedOrder.tickets.length>0?(r(),n("div",Yl,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",Ql,[(r(!0),n(R,null,D(s.selectedOrder.tickets,o=>(r(),n("div",{key:o.id,class:"border rounded-lg p-3 text-sm"},[e("div",Zl,[e("span",ei,a(o.code),1),e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getTicketStatusClass(o.status)])},a(s.getTicketStatusName(o.status)),3)]),e("div",ti,[e("p",null,a(o.ticketType?.name),1),o.used_at?(r(),n("p",si,"Utilisé: "+a(s.formatDateTime(o.used_at)),1)):j("",!0)])]))),128))])])):j("",!0),e("div",oi,[s.selectedOrder.status==="pending"?(r(),n("button",{key:0,onClick:t[17]||(t[17]=o=>s.updateOrderStatus(s.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):j("",!0),["pending","confirmed"].includes(s.selectedOrder.status)?(r(),n("button",{key:1,onClick:t[18]||(t[18]=o=>s.updateOrderStatus(s.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):j("",!0),e("button",{onClick:t[19]||(t[19]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):j("",!0)])])):j("",!0)])}const ni=se(fr,[["render",ai],["__scopeId","data-v-e0d05b6e"]]),u2=Object.freeze(Object.defineProperty({__proto__:null,default:ni},Symbol.toStringTag,{value:"Module"})),ri={name:"PaymentTracking",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(null),m=u([]),_=u([]),o=u(null),l=N({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),v=u([]),P=u([]),f=N({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let U=null;const F=ie(()=>P.value.length===0?1:Math.max(...P.value.map(T=>T.volume))),C=async()=>{h.value=!0;try{const T=new URLSearchParams;Object.keys(f).forEach(M=>{f[M]&&f[M]!==""&&T.append(M,f[M])});const $=await(await fetch(`/api/v1/admin/payments?${T}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success&&(m.value=$.data.payments.data,o.value={current_page:$.data.payments.current_page,last_page:$.data.payments.last_page,from:$.data.payments.from,to:$.data.payments.to,total:$.data.payments.total},Object.assign(l,$.data.stats),v.value=$.data.gateway_stats||[],P.value=$.data.daily_stats||[])}catch(T){console.error("Erreur chargement paiements:",T)}finally{h.value=!1}},B=async()=>{try{const K=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success&&(_.value=K.data.organizers.data||K.data.organizers)}catch(T){console.error("Erreur chargement organisateurs:",T)}},G=()=>{clearTimeout(U),U=setTimeout(()=>{f.page=1,C()},500)},b=T=>{T>=1&&T<=o.value.last_page&&(f.page=T,C())},g=()=>{Object.assign(f,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),C()},c=()=>{C()},d=async T=>{try{const $=await(await fetch(`/api/v1/admin/payments/${T.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success&&(s.value=$.data.payment,p.value=!0)}catch(K){console.error("Erreur chargement détails paiement:",K)}},x=async T=>{try{const $=await(await fetch(`/api/v1/admin/payments/${T.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success?(alert(`Statut mis à jour: ${J($.data.status)}`),C(),p.value&&(s.value.status=$.data.status)):alert($.message||"Erreur lors de la vérification")}catch(K){console.error("Erreur vérification statut:",K),alert("Erreur technique")}},w=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const K=await(await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success?(alert(`Vérification terminée. ${K.data.updated_count} paiement(s) mis à jour.`),C()):alert(K.message||"Erreur lors de la vérification")}catch(T){console.error("Erreur vérification paiements en attente:",T),alert("Erreur technique")}finally{t.value=!1}}},E=async T=>{const K=prompt("Raison du remboursement:");if(K&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${V(T.amount)} XAF ?`))try{const M=await(await fetch(`/api/v1/admin/payments/${T.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:K})})).json();M.success?(alert("Remboursement initié avec succès"),C()):alert(M.message||"Erreur lors du remboursement")}catch($){console.error("Erreur remboursement:",$),alert("Erreur technique")}},k=async()=>{try{const T=new URLSearchParams;Object.keys(f).forEach($=>{f[$]&&f[$]!==""&&$!=="page"&&T.append($,f[$])});const K=await fetch(`/api/v1/admin/payments/export?${T}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(K.ok){const $=await K.blob(),M=window.URL.createObjectURL($),Y=document.createElement("a");Y.href=M,Y.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Y),Y.click(),window.URL.revokeObjectURL(M),document.body.removeChild(Y)}}catch(T){console.error("Erreur export:",T),alert("Erreur lors de l'export des données")}},V=T=>new Intl.NumberFormat("fr-FR").format(T),A=T=>new Date(T).toLocaleDateString("fr-FR"),I=T=>new Date(T).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=T=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[T]||T,O=T=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[T]||"bg-gray-100 text-gray-800",J=T=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[T]||T,le=T=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[T]||"bg-gray-100 text-gray-800";return te(()=>{C(),B()}),{loading:h,checkingPayments:t,showDetailsModal:p,selectedPayment:s,payments:m,organizers:_,pagination:o,stats:l,gatewayStats:v,dailyStats:P,filters:f,maxDailyVolume:F,loadPayments:C,loadOrganizers:B,debouncedSearch:G,changePage:b,resetFilters:g,refreshPayments:c,viewPaymentDetails:d,checkPaymentStatus:x,checkPendingPayments:w,processRefund:E,exportPayments:k,formatAmount:V,formatDate:A,formatDateTime:I,getGatewayName:y,getGatewayBadgeClass:O,getStatusName:J,getStatusBadgeClass:le}}},li={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},ii={class:"mb-8"},di={class:"flex items-center justify-between"},ci={class:"flex space-x-3"},ui={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},mi={class:"bg-white rounded-lg shadow p-6"},gi={class:"flex items-center"},pi={class:"ml-4"},fi={class:"text-2xl font-bold text-blue-600"},xi={class:"bg-white rounded-lg shadow p-6"},yi={class:"flex items-center"},vi={class:"ml-4"},bi={class:"text-2xl font-bold text-green-600"},hi={class:"bg-white rounded-lg shadow p-6"},wi={class:"flex items-center"},_i={class:"ml-4"},ki={class:"text-2xl font-bold text-yellow-600"},Ci={class:"bg-white rounded-lg shadow p-6"},Si={class:"flex items-center"},Ai={class:"ml-4"},ji={class:"text-2xl font-bold text-red-600"},Mi={class:"bg-white rounded-lg shadow p-6"},Pi={class:"flex items-center"},Oi={class:"ml-4"},Ti={class:"text-2xl font-bold text-purple-600"},zi={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Fi={class:"bg-white rounded-lg shadow p-6"},Ui={key:0,class:"text-center text-gray-500 py-8"},Ri={key:1,class:"space-y-4"},Di={class:"flex items-center"},Ei={class:"font-medium text-gray-900"},Vi={class:"text-sm text-gray-600"},Bi={class:"text-right"},Ii={class:"font-bold text-gray-900"},qi={class:"text-sm text-gray-600"},$i={class:"bg-white rounded-lg shadow p-6"},Ni={key:0,class:"text-center text-gray-500 py-8"},Li={key:1,class:"space-y-3"},Xi={class:"font-medium text-gray-900"},Hi={class:"text-sm text-gray-600"},Gi={class:"text-right"},Ki={class:"font-bold text-gray-900"},Wi={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},Ji={class:"bg-white rounded-lg shadow p-6 mb-8"},Yi={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Qi=["value"],Zi={class:"flex justify-between items-center mt-4"},ed={class:"flex space-x-3"},td=["disabled"],sd={class:"bg-white rounded-lg shadow"},od={class:"p-6 border-b"},ad={class:"flex justify-between items-center"},nd={class:"text-sm text-gray-600"},rd={key:0,class:"p-8 text-center"},ld={key:1,class:"p-8 text-center text-gray-500"},id={key:2,class:"overflow-x-auto"},dd={class:"w-full"},cd={class:"divide-y divide-gray-200"},ud={class:"px-6 py-4 text-sm font-mono text-blue-600"},md=["onClick"],gd={class:"px-6 py-4 text-sm text-gray-900"},pd={class:"font-medium"},fd={class:"text-gray-500"},xd={class:"px-6 py-4 text-sm text-gray-900"},yd={class:"font-medium"},vd={class:"text-gray-500"},bd={class:"px-6 py-4 text-sm font-medium text-gray-900"},hd={class:"px-6 py-4 text-sm"},wd={class:"px-6 py-4 text-sm"},_d={class:"px-6 py-4 text-sm text-gray-500"},kd={class:"px-6 py-4 text-sm space-x-2"},Cd=["onClick"],Sd=["onClick"],Ad=["onClick"],jd={key:3,class:"p-6 border-t"},Md={class:"flex justify-between items-center"},Pd={class:"text-sm text-gray-700"},Od={class:"flex space-x-2"},Td=["disabled"],zd={class:"px-3 py-1 text-sm text-gray-600"},Fd=["disabled"],Ud={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Rd={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Dd={class:"flex justify-between items-center mb-4"},Ed={key:0,class:"space-y-6"},Vd={class:"grid grid-cols-2 gap-6"},Bd={class:"space-y-4"},Id={class:"space-y-2"},qd={class:"text-sm font-mono text-gray-900"},$d={class:"text-sm font-bold text-gray-900"},Nd={class:"space-y-4"},Ld={class:"space-y-2"},Xd={class:"text-sm text-gray-900"},Hd={key:0},Gd={class:"text-sm text-gray-900"},Kd={key:1},Wd={class:"text-sm font-mono text-gray-900"},Jd={key:0,class:"border-t pt-6"},Yd={class:"grid grid-cols-2 gap-4"},Qd={class:"text-sm font-mono text-gray-900"},Zd={class:"text-sm text-gray-900"},ec={class:"text-sm text-gray-900"},tc={class:"text-sm text-gray-900"},sc={key:1,class:"border-t pt-6"},oc={class:"bg-gray-50 p-4 rounded-lg"},ac={class:"text-xs text-gray-700 whitespace-pre-wrap"},nc={class:"border-t pt-6 flex justify-end space-x-3"};function rc(h,t,p,s,m,_){return r(),n("div",li,[e("div",ii,[e("div",di,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",ci,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.refreshPayments&&s.refreshPayments(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Z(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.exportPayments&&s.exportPayments(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),Z(" Exporter ",-1)])])])])]),e("div",ui,[e("div",mi,[e("div",gi,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",pi,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",fi,a(s.stats.total_payments||0),1)])])]),e("div",xi,[e("div",yi,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",vi,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",bi,a(s.stats.successful_payments||0),1)])])]),e("div",hi,[e("div",wi,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",_i,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",ki,a(s.stats.pending_payments||0),1)])])]),e("div",Ci,[e("div",Si,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Ai,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",ji,a(s.stats.failed_payments||0),1)])])]),e("div",Mi,[e("div",Pi,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Oi,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",Ti,a(s.formatAmount(s.stats.total_volume||0))+" XAF",1)])])])]),e("div",zi,[e("div",Fi,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),s.gatewayStats.length===0?(r(),n("div",Ui," Aucune donnée disponible ")):(r(),n("div",Ri,[(r(!0),n(R,null,D(s.gatewayStats,o=>(r(),n("div",{key:o.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Di,[e("div",{class:H(["p-2 rounded-lg mr-3",s.getGatewayBadgeClass(o.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",Ei,a(s.getGatewayName(o.gateway)),1),e("p",Vi,a(o.count)+" paiement(s)",1)])]),e("div",Bi,[e("p",Ii,a(s.formatAmount(o.volume))+" XAF",1),e("p",qi,a(Math.round(o.count/s.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",$i,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),s.dailyStats.length===0?(r(),n("div",Ni," Aucune donnée disponible ")):(r(),n("div",Li,[(r(!0),n(R,null,D(s.dailyStats,o=>(r(),n("div",{key:o.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",Xi,a(s.formatDate(o.date)),1),e("p",Hi,a(o.count)+" paiement(s)",1)]),e("div",Gi,[e("p",Ki,a(s.formatAmount(o.volume))+" XAF",1),e("div",Wi,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ae(`width: ${Math.min(o.volume/s.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",Ji,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Yi,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.search=o),onInput:t[3]||(t[3]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),onChange:t[5]||(t[5]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[ne('<option value="" data-v-fc273c00>Tous les statuts</option><option value="success" data-v-fc273c00>Réussi</option><option value="pending" data-v-fc273c00>En attente</option><option value="failed" data-v-fc273c00>Échoué</option><option value="cancelled" data-v-fc273c00>Annulé</option>',5)])],544),[[q,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.filters.gateway=o),onChange:t[7]||(t[7]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[q,s.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.filters.organizer_id=o),onChange:t[9]||(t[9]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(r(!0),n(R,null,D(s.organizers,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,Qi))),128))],544),[[q,s.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.filters.date_from=o),onChange:t[11]||(t[11]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.filters.date_to=o),onChange:t[13]||(t[13]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[S,s.filters.date_to]])])]),e("div",Zi,[e("button",{onClick:t[14]||(t[14]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",ed,[e("button",{onClick:t[15]||(t[15]=(...o)=>s.checkPendingPayments&&s.checkPendingPayments(...o)),disabled:s.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},a(s.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,td)])])]),e("div",sd,[e("div",od,[e("div",ad,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",nd,a(s.pagination?`${s.pagination.total} paiement(s) trouvé(s)`:""),1)])]),s.loading?(r(),n("div",rd,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payments.length===0?(r(),n("div",ld," Aucun paiement trouvé ")):(r(),n("div",id,[e("table",dd,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",cd,[(r(!0),n(R,null,D(s.payments,o=>(r(),n("tr",{key:o.id},[e("td",ud,[e("button",{onClick:l=>s.viewPaymentDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,md)]),e("td",gd,[e("div",null,[e("div",pd,"#"+a(o.order?.reference||"-"),1),e("div",fd,a(o.order?.event?.title||"-"),1)])]),e("td",xd,[e("div",null,[e("div",yd,a(o.order?.customer_name||"-"),1),e("div",vd,a(o.order?.customer_email||"-"),1)])]),e("td",bd,a(s.formatAmount(o.amount))+" XAF",1),e("td",hd,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",wd,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",_d,a(s.formatDateTime(o.created_at)),1),e("td",kd,[e("button",{onClick:l=>s.viewPaymentDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Cd),o.status==="pending"?(r(),n("button",{key:0,onClick:l=>s.checkPaymentStatus(o),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,Sd)):j("",!0),o.status==="success"?(r(),n("button",{key:1,onClick:l=>s.processRefund(o),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,Ad)):j("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(r(),n("div",jd,[e("div",Md,[e("div",Pd," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" paiements ",1),e("div",Od,[e("button",{onClick:t[16]||(t[16]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Td),e("span",zd," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Fd)])])])):j("",!0)]),s.showDetailsModal?(r(),n("div",Ud,[e("div",Rd,[e("div",Dd,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedPayment?(r(),n("div",Ed,[e("div",Vd,[e("div",Bd,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",Id,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",qd,"#"+a(s.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",$d,a(s.formatAmount(s.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(s.selectedPayment.gateway)])},a(s.getGatewayName(s.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedPayment.status)])},a(s.getStatusName(s.selectedPayment.status)),3)])])])]),e("div",Nd,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",Ld,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",Xd,a(s.formatDateTime(s.selectedPayment.created_at)),1)]),s.selectedPayment.processed_at?(r(),n("div",Hd,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",Gd,a(s.formatDateTime(s.selectedPayment.processed_at)),1)])):j("",!0),s.selectedPayment.gateway_transaction_id?(r(),n("div",Kd,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",Wd,a(s.selectedPayment.gateway_transaction_id),1)])):j("",!0)])])])]),s.selectedPayment.order?(r(),n("div",Jd,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",Yd,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",Qd,a(s.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",Zd,a(s.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",ec,a(s.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",tc,a(s.selectedPayment.order.customer_email),1)])])])):j("",!0),s.selectedPayment.gateway_response?(r(),n("div",sc,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",oc,[e("pre",ac,a(JSON.stringify(s.selectedPayment.gateway_response,null,2)),1)])])):j("",!0),e("div",nc,[s.selectedPayment.status==="pending"?(r(),n("button",{key:0,onClick:t[19]||(t[19]=o=>s.checkPaymentStatus(s.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):j("",!0),s.selectedPayment.status==="success"?(r(),n("button",{key:1,onClick:t[20]||(t[20]=o=>s.processRefund(s.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):j("",!0),e("button",{onClick:t[21]||(t[21]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):j("",!0)])])):j("",!0)])}const lc=se(ri,[["render",rc],["__scopeId","data-v-fc273c00"]]),m2=Object.freeze(Object.defineProperty({__proto__:null,default:lc},Symbol.toStringTag,{value:"Module"})),ic={name:"PayoutDashboard",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(!1),m=u(!1),_=u([]),o=u([]),l=u([]),v=N({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),P=N({status:"",gateway:"",is_automatic:""}),f=N({organizer_id:"",gateway:"",amount:"",phone_number:""}),U=async()=>{h.value=!0;try{const y=new URLSearchParams;P.status&&y.append("status",P.status),P.gateway&&y.append("gateway",P.gateway),P.is_automatic&&y.append("is_automatic",P.is_automatic);const J=await(await fetch(`/api/v1/admin/payouts?${y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();J.success&&(_.value=J.data.payouts)}catch(y){console.error("Erreur chargement payouts:",y)}finally{h.value=!1}},F=async()=>{try{const O=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();O.success&&Object.assign(v,O.data.stats)}catch(y){console.error("Erreur chargement stats:",y)}},C=async()=>{p.value=!0;try{const O=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();O.success&&(l.value=O.data.balances)}catch(y){console.error("Erreur chargement solde SHAP:",y)}finally{p.value=!1}},B=async()=>{t.value=!0;try{const O=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();O.success&&(alert(`Vérification terminée: ${O.data.results.length} payouts vérifiés`),U())}catch(y){console.error("Erreur vérification batch:",y)}finally{t.value=!1}},G=async y=>{y.checking=!0;try{const J=await(await fetch(`/api/v1/admin/payouts/${y.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();J.success&&(alert(`Statut: ${J.data.current_status}`),U())}catch(O){console.error("Erreur vérification payout:",O)}finally{y.checking=!1}},b=()=>{s.value=!0,g()},g=async()=>{try{const O=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();O.success&&(o.value=O.data.organizers)}catch(y){console.error("Erreur chargement organisateurs:",y)}},c=async()=>{m.value=!0;try{const O=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(f)})).json();O.success?(alert("Payout créé avec succès"),s.value=!1,Object.assign(f,{organizer_id:"",gateway:"",amount:"",phone_number:""}),U(),F()):alert(O.message||"Erreur lors de la création")}catch(y){console.error("Erreur création payout:",y),alert("Erreur technique")}finally{m.value=!1}},d=()=>{Object.assign(P,{status:"",gateway:"",is_automatic:""}),U()},x=y=>{alert(`Détails du payout #${y.id}
Référence: ${y.reference}
Montant: ${w(y.amount)} XAF`)},w=y=>new Intl.NumberFormat("fr-FR").format(y),E=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),k=y=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[y]||y,V=y=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[y]||"bg-gray-100 text-gray-800",A=y=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[y]||y,I=y=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[y]||"bg-gray-100 text-gray-800";return te(()=>{U(),F()}),{loading:h,checkingAll:t,loadingShapBalance:p,showCreateModal:s,creatingPayout:m,payouts:_,organizers:o,shapBalance:l,stats:v,filters:P,newPayout:f,loadPayouts:U,loadStats:F,loadShapBalance:C,checkAllPending:B,checkPayoutStatus:G,openCreatePayoutModal:b,createPayout:c,resetFilters:d,viewPayoutDetails:x,formatAmount:w,formatDate:E,getStatusName:k,getStatusBadgeClass:V,getGatewayName:A,getGatewayBadgeClass:I}}},dc={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},cc={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},uc={class:"bg-white rounded-lg shadow p-6"},mc={class:"flex items-center"},gc={class:"ml-4"},pc={class:"text-2xl font-bold text-gray-900"},fc={class:"bg-white rounded-lg shadow p-6"},xc={class:"flex items-center"},yc={class:"ml-4"},vc={class:"text-2xl font-bold text-green-600"},bc={class:"bg-white rounded-lg shadow p-6"},hc={class:"flex items-center"},wc={class:"ml-4"},_c={class:"text-2xl font-bold text-yellow-600"},kc={class:"bg-white rounded-lg shadow p-6"},Cc={class:"flex items-center"},Sc={class:"ml-4"},Ac={class:"text-2xl font-bold text-purple-600"},jc={class:"flex flex-wrap gap-4 mb-8"},Mc=["disabled"],Pc=["disabled"],Oc={key:0,class:"mb-8"},Tc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zc={class:"font-semibold text-gray-900"},Fc={class:"text-2xl font-bold text-green-600"},Uc={class:"text-sm text-gray-500"},Rc={class:"bg-white rounded-lg shadow p-6 mb-8"},Dc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ec={class:"flex items-end"},Vc={class:"bg-white rounded-lg shadow"},Bc={key:0,class:"p-8 text-center"},Ic={key:1,class:"p-8 text-center text-gray-500"},qc={key:2,class:"overflow-x-auto"},$c={class:"w-full"},Nc={class:"divide-y divide-gray-200"},Lc={class:"px-6 py-4 text-sm text-gray-900"},Xc={class:"px-6 py-4 text-sm text-gray-900"},Hc={class:"px-6 py-4 text-sm font-medium text-gray-900"},Gc={class:"px-6 py-4 text-sm text-gray-900"},Kc={class:"px-6 py-4 text-sm"},Wc={class:"px-6 py-4 text-sm text-gray-900"},Jc={class:"px-6 py-4 text-sm text-gray-500"},Yc={class:"px-6 py-4 text-sm space-x-2"},Qc=["onClick","disabled"],Zc=["onClick"],eu={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},tu={class:"bg-white rounded-lg p-6 w-full max-w-md"},su={class:"space-y-4"},ou=["value"],au={class:"flex justify-end space-x-3 mt-6"},nu=["disabled"];function ru(h,t,p,s,m,_){return r(),n("div",dc,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",cc,[e("div",uc,[e("div",mc,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",gc,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",pc,a(s.stats.total_payouts||0),1)])])]),e("div",fc,[e("div",xc,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",yc,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",vc,a(s.stats.successful_payouts||0),1)])])]),e("div",bc,[e("div",hc,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",wc,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",_c,a(s.stats.pending_payouts||0),1)])])]),e("div",kc,[e("div",Cc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Sc,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",Ac,a(s.stats.automatic_payouts||0),1)])])])]),e("div",jc,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreatePayoutModal&&s.openCreatePayoutModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.checkAllPending&&s.checkAllPending(...o)),disabled:s.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),Z(" "+a(s.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,Mc),e("button",{onClick:t[2]||(t[2]=(...o)=>s.loadShapBalance&&s.loadShapBalance(...o)),disabled:s.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),Z(" "+a(s.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,Pc)]),s.shapBalance.length>0?(r(),n("div",Oc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",Tc,[(r(!0),n(R,null,D(s.shapBalance,o=>(r(),n("div",{key:o.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",zc,a(o.payment_system_displayed_name),1),e("p",Fc,a(s.formatAmount(o.amount))+" XAF",1),e("p",Uc,"Dernière MAJ: "+a(o.last_updated),1)]))),128))])])):j("",!0),e("div",Rc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Dc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[ne('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[q,s.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.gateway=o),onChange:t[6]||(t[6]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[q,s.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.is_automatic=o),onChange:t[8]||(t[8]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[q,s.filters.is_automatic]])]),e("div",Ec,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Vc,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),s.loading?(r(),n("div",Bc,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payouts.length===0?(r(),n("div",Ic," Aucun payout trouvé ")):(r(),n("div",qc,[e("table",$c,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Nc,[(r(!0),n(R,null,D(s.payouts,o=>(r(),n("tr",{key:o.id},[e("td",Lc,"#"+a(o.id),1),e("td",Xc,a(o.organizer?.name),1),e("td",Hc,a(s.formatAmount(o.amount))+" XAF",1),e("td",Gc,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Kc,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",Wc,[e("span",{class:H(["inline-flex px-2 py-1 text-xs rounded-full",o.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},a(o.is_automatic?"Auto":"Manuel"),3)]),e("td",Jc,a(s.formatDate(o.created_at)),1),e("td",Yc,[e("button",{onClick:l=>s.checkPayoutStatus(o),disabled:o.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},a(o.checking?"Vérif...":"Vérifier"),9,Qc),e("button",{onClick:l=>s.viewPayoutDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,Zc)])]))),128))])])]))]),s.showCreateModal?(r(),n("div",eu,[e("div",tu,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=re((...o)=>s.createPayout&&s.createPayout(...o),["prevent"]))},[e("div",su,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.newPayout.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(r(!0),n(R,null,D(s.organizers,o=>(r(),n("option",{key:o.id,value:o.id},a(o.name),9,ou))),128))],512),[[q,s.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.newPayout.gateway=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[q,s.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.newPayout.amount=o),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.newPayout.phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.newPayout.phone_number]])])]),e("div",au,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>s.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.creatingPayout?"Création...":"Créer le Payout"),9,nu)])],32)])])):j("",!0)])}const lu=se(ic,[["render",ru],["__scopeId","data-v-e96f5ab8"]]),g2=Object.freeze(Object.defineProperty({__proto__:null,default:lu},Symbol.toStringTag,{value:"Module"})),iu={name:"OrganizerBalanceConfig",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(null),m=u([]),_=N({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),o=N({gateway:"",auto_payout_enabled:""}),l=N({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),v=async()=>{h.value=!0;try{const b=new URLSearchParams;o.gateway&&b.append("gateway",o.gateway),o.auto_payout_enabled&&b.append("auto_payout_enabled",o.auto_payout_enabled);const g=await fetch(`/api/v1/admin/organizers/balances?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(g.ok){const c=await g.json();c.success&&(m.value=c.data.balances,Object.assign(_,c.data.stats))}else P()}catch{console.log("API non disponible, utilisation des données simulées"),P()}finally{h.value=!1}},P=()=>{m.value=[{organizer_id:1,organizer:{name:"EventMaster Pro"},gateway:"shap",balance:25e4,auto_payout_enabled:!0,auto_payout_threshold:1e5,payout_phone_number:"+241066123456"},{organizer_id:2,organizer:{name:"Gabon Events"},gateway:"shap",balance:18e4,auto_payout_enabled:!1,auto_payout_threshold:5e4,payout_phone_number:"+241065987654"},{organizer_id:3,organizer:{name:"Culture & Spectacles"},gateway:"shap",balance:42e4,auto_payout_enabled:!0,auto_payout_threshold:2e5,payout_phone_number:"+241067789012"}],Object.assign(_,{total_organizers:15,auto_payout_enabled:8,total_balance:85e4,active_configs:12})},f=b=>{s.value=b,Object.assign(l,{auto_payout_enabled:b.auto_payout_enabled,auto_payout_threshold:b.auto_payout_threshold,payout_phone_number:b.payout_phone_number||""}),t.value=!0},U=async()=>{p.value=!0;try{const g=await(await fetch(`/api/v1/admin/organizers/${s.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({gateway:s.value.gateway,...l})})).json();g.success?(alert("Configuration mise à jour avec succès"),t.value=!1,v()):alert(g.message||"Erreur lors de la mise à jour")}catch(b){console.error("Erreur sauvegarde config:",b),alert("Erreur technique")}finally{p.value=!1}},F=()=>{Object.assign(o,{gateway:"",auto_payout_enabled:""}),v()},C=b=>new Intl.NumberFormat("fr-FR").format(b),B=b=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[b]||b,G=b=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[b]||"bg-gray-100 text-gray-800";return te(()=>{v()}),{loading:h,showConfigModal:t,savingConfig:p,editingBalance:s,balances:m,stats:_,filters:o,configForm:l,loadBalances:v,editBalance:f,saveConfiguration:U,resetFilters:F,formatAmount:C,getGatewayName:B,getGatewayBadgeClass:G}}},du={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},cu={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},uu={class:"bg-white rounded-lg shadow p-6"},mu={class:"flex items-center"},gu={class:"ml-4"},pu={class:"text-2xl font-bold text-gray-900"},fu={class:"bg-white rounded-lg shadow p-6"},xu={class:"flex items-center"},yu={class:"ml-4"},vu={class:"text-2xl font-bold text-green-600"},bu={class:"bg-white rounded-lg shadow p-6"},hu={class:"flex items-center"},wu={class:"ml-4"},_u={class:"text-2xl font-bold text-yellow-600"},ku={class:"bg-white rounded-lg shadow p-6"},Cu={class:"flex items-center"},Su={class:"ml-4"},Au={class:"text-2xl font-bold text-purple-600"},ju={class:"bg-white rounded-lg shadow p-6 mb-8"},Mu={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Pu={class:"flex items-end"},Ou={class:"bg-white rounded-lg shadow"},Tu={key:0,class:"p-8 text-center"},zu={key:1,class:"p-8 text-center text-gray-500"},Fu={key:2,class:"overflow-x-auto"},Uu={class:"w-full"},Ru={class:"divide-y divide-gray-200"},Du={class:"px-6 py-4 text-sm font-medium text-gray-900"},Eu={class:"px-6 py-4 text-sm text-gray-900"},Vu={class:"px-6 py-4 text-sm font-medium text-gray-900"},Bu={class:"px-6 py-4 text-sm"},Iu={class:"px-6 py-4 text-sm text-gray-900"},qu={class:"px-6 py-4 text-sm text-gray-900"},$u={class:"px-6 py-4 text-sm space-x-2"},Nu=["onClick"],Lu={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Xu={class:"bg-white rounded-lg p-6 w-full max-w-md"},Hu={class:"text-lg font-bold mb-4"},Gu={class:"space-y-4"},Ku=["value"],Wu=["value"],Ju={class:"flex items-center space-x-2"},Yu={key:0},Qu={class:"flex justify-end space-x-3 mt-6"},Zu=["disabled"];function e0(h,t,p,s,m,_){return r(),n("div",du,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",cu,[e("div",uu,[e("div",mu,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",gu,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",pu,a(s.stats.total_organizers||0),1)])])]),e("div",fu,[e("div",xu,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",yu,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",vu,a(s.stats.auto_payout_enabled||0),1)])])]),e("div",bu,[e("div",hu,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",wu,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",_u,a(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])]),e("div",ku,[e("div",Cu,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Su,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",Au,a(s.stats.active_configs||0),1)])])])]),e("div",ju,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Mu,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filters.gateway=o),onChange:t[1]||(t[1]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[q,s.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.auto_payout_enabled=o),onChange:t[3]||(t[3]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[q,s.filters.auto_payout_enabled]])]),e("div",Pu,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ou,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),s.loading?(r(),n("div",Tu,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.balances.length===0?(r(),n("div",zu," Aucune balance trouvée ")):(r(),n("div",Fu,[e("table",Uu,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ru,[(r(!0),n(R,null,D(s.balances,o=>(r(),n("tr",{key:`${o.organizer_id}-${o.gateway}`},[e("td",Du,a(o.organizer?.name),1),e("td",Eu,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Vu,a(s.formatAmount(o.balance))+" XAF",1),e("td",Bu,[e("span",{class:H(["inline-flex px-2 py-1 text-xs rounded-full",o.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",Iu,a(s.formatAmount(o.auto_payout_threshold))+" XAF",1),e("td",qu,a(o.payout_phone_number||"-"),1),e("td",$u,[e("button",{onClick:l=>s.editBalance(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Nu)])]))),128))])])]))]),s.showConfigModal?(r(),n("div",Lu,[e("div",Xu,[e("h3",Hu,"Configuration Payout - "+a(s.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=re((...o)=>s.saveConfiguration&&s.saveConfiguration(...o),["prevent"]))},[e("div",Gu,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:s.getGatewayName(s.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ku)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:s.formatAmount(s.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Wu)]),e("div",null,[e("label",Ju,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>s.configForm.auto_payout_enabled=o),class:"rounded border-gray-300"},null,512),[[ee,s.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),s.configForm.auto_payout_enabled?(r(),n("div",Yu,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.configForm.auto_payout_threshold=o),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):j("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.configForm.payout_phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[S,s.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",Qu,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.savingConfig?"Enregistrement...":"Enregistrer"),9,Zu)])],32)])])):j("",!0)])}const t0=se(iu,[["render",e0],["__scopeId","data-v-bf1f4fcb"]]),p2=Object.freeze(Object.defineProperty({__proto__:null,default:t0},Symbol.toStringTag,{value:"Module"})),s0={name:"Reports",setup(){const h=u(!1),t=u(!1),p=u([]),s=u(""),m=N({start:new Date().toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),_=N({total_revenue:0,total_tickets:0,active_events:0,active_users:0}),o=async()=>{h.value=!0;try{const c=new URLSearchParams({start_date:m.start,end_date:m.end}),d=await fetch(`/api/v1/admin/reports?${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(d.ok){const x=await d.json();x.success&&(p.value=x.data.reports,Object.assign(_,x.data.stats))}else l()}catch{console.log("API non disponible, utilisation des données simulées"),l()}finally{h.value=!1}},l=()=>{p.value=[{id:1,type:"financial",period:"Septembre 2025",created_at:new Date,file_size:"2.3 MB",format:"PDF",status:"ready",download_url:"/reports/financial-sep-2025.pdf"},{id:2,type:"events",period:"Août 2025",created_at:new Date(Date.now()-864e5),file_size:"1.8 MB",format:"Excel",status:"ready",download_url:"/reports/events-aug-2025.xlsx"},{id:3,type:"users",period:"Juillet 2025",created_at:new Date(Date.now()-1728e5),file_size:"980 KB",format:"PDF",status:"ready",download_url:"/reports/users-jul-2025.pdf"}],Object.assign(_,{total_revenue:125e5,total_tickets:3420,active_events:28,active_users:1875})},v=async c=>{t.value=!0;try{const d=await fetch("/api/v1/admin/reports/generate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({type:c,start_date:m.start,end_date:m.end})});if(d.ok){const x=await d.json();x.success&&p.value.unshift(x.data.report)}else{const x={id:Date.now(),type:c,period:`${new Date(m.start).toLocaleDateString("fr-FR")} - ${new Date(m.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${c}-${Date.now()}.pdf`};p.value.unshift(x)}}catch{console.log("API non disponible, génération simulée");const x={id:Date.now(),type:c,period:`${new Date(m.start).toLocaleDateString("fr-FR")} - ${new Date(m.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${c}-${Date.now()}.pdf`};p.value.unshift(x)}finally{t.value=!1}},P=async c=>{try{const d=await fetch(`/api/v1/admin/reports/${c.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(d.ok){const x=await d.blob(),w=window.URL.createObjectURL(x),E=document.createElement("a");E.href=w,E.download=`rapport-${c.type}-${c.id}.pdf`,document.body.appendChild(E),E.click(),window.URL.revokeObjectURL(w),document.body.removeChild(E)}else alert("Téléchargement simulé du rapport: "+c.type)}catch{alert("Téléchargement simulé du rapport: "+c.type)}},f=async c=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce rapport ?"))try{(await fetch(`/api/v1/admin/reports/${c.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?p.value=p.value.filter(x=>x.id!==c.id):p.value=p.value.filter(x=>x.id!==c.id)}catch{p.value=p.value.filter(x=>x.id!==c.id)}},U=async()=>{if(confirm("Êtes-vous sûr de vouloir vider tout l'historique des rapports ?"))try{(await fetch("/api/v1/admin/reports/clear",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?p.value=[]:p.value=[]}catch{p.value=[]}},F=()=>{const c=new Date,d={today:{start:c,end:c},week:{start:new Date(c.getTime()-10080*60*1e3),end:c},month:{start:new Date(c.getFullYear(),c.getMonth(),1),end:c},quarter:{start:new Date(c.getFullYear(),Math.floor(c.getMonth()/3)*3,1),end:c},year:{start:new Date(c.getFullYear(),0,1),end:c}};if(d[s.value]){const x=d[s.value];m.start=x.start.toISOString().split("T")[0],m.end=x.end.toISOString().split("T")[0]}},C=()=>{o()},B=c=>new Intl.NumberFormat("fr-FR").format(c),G=c=>new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),b=c=>({financial:"Rapport Financier",events:"Rapport Événements",users:"Rapport Utilisateurs",performance:"Rapport Performance"})[c]||c,g=c=>({financial:"bg-blue-100 text-blue-600",events:"bg-yellow-100 text-yellow-600",users:"bg-green-100 text-green-600",performance:"bg-purple-100 text-purple-600"})[c]||"bg-gray-100 text-gray-600";return te(()=>{const c=new Date,d=new Date(c.getFullYear(),c.getMonth(),1);m.start=d.toISOString().split("T")[0],m.end=c.toISOString().split("T")[0],o()}),{loading:h,generating:t,reports:p,selectedPeriod:s,dateRange:m,stats:_,loadReports:o,generateReport:v,downloadReport:P,deleteReport:f,clearHistory:U,setPredefinedPeriod:F,refreshReports:C,formatAmount:B,formatDateTime:G,getReportTypeName:b,getReportTypeClass:g}}},o0={class:"reports-management p-6"},a0={class:"bg-white rounded-lg shadow p-4 mb-6"},n0={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},r0={class:"flex items-end"},l0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},i0={class:"bg-white rounded-lg shadow p-6 text-center"},d0={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},c0={class:"w-8 h-8",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},u0=["disabled"],m0={class:"bg-white rounded-lg shadow p-6 text-center"},g0={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},p0={class:"w-8 h-8",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f0=["disabled"],x0={class:"bg-white rounded-lg shadow p-6 text-center"},y0=["disabled"],v0={class:"bg-white rounded-lg shadow p-6 text-center"},b0=["disabled"],h0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},w0={class:"bg-white rounded-lg shadow p-4"},_0={class:"flex items-center"},k0={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},C0={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},S0={class:"ml-4"},A0={class:"text-xl font-bold",style:{color:"#272d63"}},j0={class:"bg-white rounded-lg shadow p-4"},M0={class:"flex items-center"},P0={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},O0={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},T0={class:"ml-4"},z0={class:"text-xl font-bold",style:{color:"#fab511"}},F0={class:"bg-white rounded-lg shadow p-4"},U0={class:"flex items-center"},R0={class:"ml-4"},D0={class:"text-xl font-bold text-green-600"},E0={class:"bg-white rounded-lg shadow p-4"},V0={class:"flex items-center"},B0={class:"ml-4"},I0={class:"text-xl font-bold text-purple-600"},q0={class:"bg-white rounded-lg shadow overflow-hidden"},$0={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},N0={key:0,class:"p-8 text-center"},L0={key:1,class:"p-8 text-center"},X0={key:2,class:"overflow-x-auto"},H0={class:"w-full"},G0={class:"divide-y divide-gray-200"},K0={class:"px-6 py-4"},W0={class:"flex items-center"},J0={class:"text-sm font-medium text-gray-900"},Y0={class:"text-sm text-gray-500"},Q0={class:"px-6 py-4 text-sm text-gray-900"},Z0={class:"px-6 py-4 text-sm text-gray-500"},em={class:"px-6 py-4 text-sm text-gray-500"},tm={class:"px-6 py-4"},sm={class:"px-6 py-4"},om={class:"flex space-x-2"},am=["onClick"],nm=["onClick"];function rm(h,t,p,s,m,_){return r(),n("div",o0,[t[43]||(t[43]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Rapports et Analyses"),e("p",{class:"text-gray-600"},"Générez et consultez les rapports de performance de la plateforme")],-1)),e("div",a0,[e("div",n0,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),i(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=o=>s.dateRange.start=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.dateRange.start]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),i(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>s.dateRange.end=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.dateRange.end]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période prédéfinie",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.selectedPeriod=o),onChange:t[3]||(t[3]=(...o)=>s.setPredefinedPeriod&&s.setPredefinedPeriod(...o)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[20]||(t[20]=[ne('<option value="" data-v-04ad1860>Personnalisée</option><option value="today" data-v-04ad1860>Aujourd&#39;hui</option><option value="week" data-v-04ad1860>Cette semaine</option><option value="month" data-v-04ad1860>Ce mois</option><option value="quarter" data-v-04ad1860>Ce trimestre</option><option value="year" data-v-04ad1860>Cette année</option>',6)])],544),[[q,s.selectedPeriod]])]),e("div",r0,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.refreshReports&&s.refreshReports(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Actualiser ",32)])])]),e("div",l0,[e("div",i0,[e("div",d0,[(r(),n("svg",c0,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Financier",-1)),t[24]||(t[24]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, paiements et remboursements",-1)),e("button",{onClick:t[7]||(t[7]=o=>s.generateReport("financial")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[9]||(t[9]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.generating?"Génération...":"Générer"),41,u0)]),e("div",m0,[e("div",g0,[(r(),n("svg",p0,[...t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t[26]||(t[26]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Événements",-1)),t[27]||(t[27]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes de tickets et tendances",-1)),e("button",{onClick:t[10]||(t[10]=o=>s.generateReport("events")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[11]||(t[11]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#fab511")},a(s.generating?"Génération...":"Générer"),41,f0)]),e("div",x0,[t[28]||(t[28]=ne('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-green-100" data-v-04ad1860><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Utilisateurs</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Croissance, activité et segments d&#39;utilisateurs</p>',3)),e("button",{onClick:t[13]||(t[13]=o=>s.generateReport("users")),disabled:s.generating,class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},a(s.generating?"Génération...":"Générer"),9,y0)]),e("div",v0,[t[29]||(t[29]=ne('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-purple-100" data-v-04ad1860><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Performance</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Métriques de performance de la plateforme</p>',3)),e("button",{onClick:t[14]||(t[14]=o=>s.generateReport("performance")),disabled:s.generating,class:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},a(s.generating?"Génération...":"Générer"),9,b0)])]),e("div",h0,[e("div",w0,[e("div",_0,[e("div",k0,[(r(),n("svg",C0,[...t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",S0,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",A0,a(s.formatAmount(s.stats.total_revenue))+" XAF",1)])])]),e("div",j0,[e("div",M0,[e("div",P0,[(r(),n("svg",O0,[...t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])]))]),e("div",T0,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",z0,a(s.stats.total_tickets),1)])])]),e("div",F0,[e("div",U0,[t[35]||(t[35]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",R0,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Événements Actifs",-1)),e("p",D0,a(s.stats.active_events),1)])])]),e("div",E0,[e("div",V0,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",B0,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Utilisateurs Actifs",-1)),e("p",I0,a(s.stats.active_users),1)])])])]),e("div",q0,[e("div",$0,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold",style:{color:"#272d63"}},"Historique des Rapports",-1)),e("button",{onClick:t[15]||(t[15]=(...o)=>s.clearHistory&&s.clearHistory(...o)),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Vider l'historique ")]),s.loading?(r(),n("div",N0,[...t[39]||(t[39]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{"border-color":"#272d63"}},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)])])):s.reports.length===0?(r(),n("div",L0,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun rapport",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par générer votre premier rapport.",-1)])])):(r(),n("div",X0,[e("table",H0,[t[42]||(t[42]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Taille"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",G0,[(r(!0),n(R,null,D(s.reports,o=>(r(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",K0,[e("div",W0,[e("div",{class:H(["w-8 h-8 rounded-full flex items-center justify-center mr-3",s.getReportTypeClass(o.type)])},[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1)])],2),e("div",null,[e("p",J0,a(s.getReportTypeName(o.type)),1),e("p",Y0,a(o.format),1)])])]),e("td",Q0,a(o.period),1),e("td",Z0,a(s.formatDateTime(o.created_at)),1),e("td",em,a(o.file_size),1),e("td",tm,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="ready"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(o.status==="ready"?"Prêt":"En cours"),3)]),e("td",sm,[e("div",om,[o.status==="ready"?(r(),n("button",{key:0,onClick:l=>s.downloadReport(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[16]||(t[16]=l=>{l.currentTarget.style.backgroundColor="#fab511",l.currentTarget.style.color="#fff"}),onMouseleave:t[17]||(t[17]=l=>{l.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",l.currentTarget.style.color="#272d63"})}," Télécharger ",40,am)):j("",!0),e("button",{onClick:l=>s.deleteReport(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,nm)])])]))),128))])])]))])])}const lm=se(s0,[["render",rm],["__scopeId","data-v-04ad1860"]]),f2=Object.freeze(Object.defineProperty({__proto__:null,default:lm},Symbol.toStringTag,{value:"Module"})),im={name:"Settings",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(!1),m=u(!1),_=N({platform_name:"",site_url:"",contact_email:"",timezone:"Africa/Libreville",currency:"XAF"}),o=N({airtel_money:!0,moov_money:!0,bank_cards:!1}),l=N({email_enabled:!0,sms_enabled:!1,push_enabled:!0}),v=N({maintenance_mode:!1,maintenance_message:""}),P=N({fixed_commission:500,percentage_commission:5}),f=async()=>{h.value=!0;try{const d=await fetch("/api/v1/admin/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(d.ok){const x=await d.json();x.success&&(Object.assign(_,x.data.general||{}),Object.assign(o,x.data.payment||{}),Object.assign(l,x.data.notification||{}),Object.assign(v,x.data.maintenance||{}),Object.assign(P,x.data.commission||{}))}else U()}catch{console.log("API non disponible, utilisation des données locales"),U()}finally{h.value=!1}},U=()=>{Object.assign(_,{platform_name:"Primea Ticketing",site_url:"https://primea.ga",contact_email:"contact@primea.ga",timezone:"Africa/Libreville",currency:"XAF"}),Object.assign(o,{airtel_money:!0,moov_money:!0,bank_cards:!1}),Object.assign(l,{email_enabled:!0,sms_enabled:!1,push_enabled:!0}),Object.assign(v,{maintenance_mode:!1,maintenance_message:"Le site est temporairement en maintenance pour amélioration. Nous reviendrons bientôt !"}),Object.assign(P,{fixed_commission:500,percentage_commission:5})},F=async()=>{t.value=!0;try{(await fetch("/api/v1/admin/settings/general",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(_)})).ok?alert("Paramètres généraux sauvegardés avec succès"):alert("Paramètres généraux sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres généraux sauvegardés avec succès (simulé)")}finally{t.value=!1}},C=async()=>{p.value=!0;try{(await fetch("/api/v1/admin/settings/payment",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).ok?alert("Paramètres de paiement sauvegardés avec succès"):alert("Paramètres de paiement sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de paiement sauvegardés avec succès (simulé)")}finally{p.value=!1}},B=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/settings/notifications",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)})).ok?alert("Paramètres de notification sauvegardés avec succès"):alert("Paramètres de notification sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de notification sauvegardés avec succès (simulé)")}finally{s.value=!1}},G=async()=>{m.value=!0;try{(await fetch("/api/v1/admin/settings/security",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...v,...P})})).ok?alert("Paramètres de sécurité sauvegardés avec succès"):alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}finally{m.value=!1}},b=()=>{const d={general:_,payment:o,notification:l,maintenance:v,commission:P,exported_at:new Date().toISOString()},x=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),w=window.URL.createObjectURL(x),E=document.createElement("a");E.href=w,E.download=`primea-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(E),E.click(),window.URL.revokeObjectURL(w),document.body.removeChild(E)},g=d=>{const x=d.target.files[0];if(!x)return;const w=new FileReader;w.onload=E=>{try{const k=JSON.parse(E.target.result);confirm("Êtes-vous sûr de vouloir importer cette configuration ? Cela remplacera tous les paramètres actuels.")&&(k.general&&Object.assign(_,k.general),k.payment&&Object.assign(o,k.payment),k.notification&&Object.assign(l,k.notification),k.maintenance&&Object.assign(v,k.maintenance),k.commission&&Object.assign(P,k.commission),alert("Configuration importée avec succès"))}catch{alert("Erreur lors de l'importation du fichier : format invalide")}},w.readAsText(x),d.target.value=""},c=()=>{confirm("Êtes-vous sûr de vouloir réinitialiser tous les paramètres ? Cette action est irréversible.")&&(U(),alert("Tous les paramètres ont été réinitialisés aux valeurs par défaut"))};return te(()=>{f()}),{loading:h,savingGeneral:t,savingPayment:p,savingNotifications:s,savingSecurity:m,generalForm:_,paymentForm:o,notificationForm:l,maintenanceForm:v,commissionForm:P,saveGeneralSettings:F,savePaymentSettings:C,saveNotificationSettings:B,saveSecuritySettings:G,exportSettings:b,importSettings:g,resetAllSettings:c}}},dm={class:"settings-management p-6"},cm={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},um={class:"bg-white rounded-lg shadow p-6"},mm=["disabled"],gm={class:"bg-white rounded-lg shadow p-6"},pm={class:"space-y-4"},fm={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},xm={class:"relative inline-flex items-center cursor-pointer"},ym={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},vm={class:"relative inline-flex items-center cursor-pointer"},bm={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},hm={class:"relative inline-flex items-center cursor-pointer"},wm=["disabled"],_m={class:"bg-white rounded-lg shadow p-6"},km={class:"space-y-4"},Cm={class:"flex items-center justify-between"},Sm={class:"relative inline-flex items-center cursor-pointer"},Am={class:"flex items-center justify-between"},jm={class:"relative inline-flex items-center cursor-pointer"},Mm={class:"flex items-center justify-between"},Pm={class:"relative inline-flex items-center cursor-pointer"},Om=["disabled"],Tm={class:"bg-white rounded-lg shadow p-6"},zm={class:"space-y-6"},Fm={class:"p-4 border border-orange-200 bg-orange-50 rounded-lg"},Um={class:"flex items-center justify-between"},Rm={class:"relative inline-flex items-center cursor-pointer"},Dm={key:0,class:"mt-4"},Em={class:"grid grid-cols-2 gap-4"},Vm=["disabled"],Bm={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},Im={class:"bg-white rounded-lg shadow p-4 text-center"},qm={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},$m={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Nm={class:"bg-white rounded-lg shadow p-4 text-center"},Lm={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Xm={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Hm={class:"bg-white rounded-lg shadow p-4 text-center"};function Gm(h,t,p,s,m,_){return r(),n("div",dm,[t[62]||(t[62]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Paramètres Système"),e("p",{class:"text-gray-600"},"Configurez les paramètres généraux de la plateforme Primea")],-1)),e("div",cm,[e("div",um,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Configuration Générale",-1)),e("form",{onSubmit:t[7]||(t[7]=re((...o)=>s.saveGeneralSettings&&s.saveGeneralSettings(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.generalForm.platform_name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.generalForm.platform_name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site *",-1)),i(e("input",{type:"url","onUpdate:modelValue":t[1]||(t[1]=o=>s.generalForm.site_url=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.generalForm.site_url]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),i(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=o=>s.generalForm.contact_email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.generalForm.contact_email]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.generalForm.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[34]||(t[34]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Paris (GMT+1)",-1)])],512),[[q,s.generalForm.timezone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.generalForm.currency=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[36]||(t[36]=[e("option",{value:"XAF"},"Franc CFA (XAF)",-1),e("option",{value:"EUR"},"Euro (EUR)",-1),e("option",{value:"USD"},"Dollar US (USD)",-1)])],512),[[q,s.generalForm.currency]])]),e("button",{type:"submit",disabled:s.savingGeneral,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.savingGeneral?"Sauvegarde...":"Sauvegarder"),41,mm)],32)]),e("div",gm,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Moyens de Paiement",-1)),e("div",pm,[e("div",fm,[t[39]||(t[39]=ne('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-red-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-red-600 font-bold text-xs" data-v-b0f1a205>AM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Airtel Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Airtel</p></div></div>',1)),e("label",xm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=o=>s.paymentForm.airtel_money=o),class:"sr-only peer"},null,512),[[ee,s.paymentForm.airtel_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ae(s.paymentForm.airtel_money?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",ym,[t[40]||(t[40]=ne('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-orange-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-orange-600 font-bold text-xs" data-v-b0f1a205>MM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Moov Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Moov</p></div></div>',1)),e("label",vm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>s.paymentForm.moov_money=o),class:"sr-only peer"},null,512),[[ee,s.paymentForm.moov_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ae(s.paymentForm.moov_money?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",bm,[t[42]||(t[42]=ne('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-blue-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b0f1a205><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" data-v-b0f1a205></path></svg></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Cartes Bancaires</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Visa, Mastercard, etc.</p></div></div>',1)),e("label",hm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>s.paymentForm.bank_cards=o),class:"sr-only peer"},null,512),[[ee,s.paymentForm.bank_cards]]),t[41]||(t[41]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),e("button",{onClick:t[11]||(t[11]=(...o)=>s.savePaymentSettings&&s.savePaymentSettings(...o)),disabled:s.savingPayment,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#fab511")},a(s.savingPayment?"Sauvegarde...":"Sauvegarder les paiements"),41,wm)])]),e("div",_m,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Paramètres de Notifications",-1)),e("div",km,[e("div",Cm,[t[44]||(t[44]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par email")],-1)),e("label",Sm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>s.notificationForm.email_enabled=o),class:"sr-only peer"},null,512),[[ee,s.notificationForm.email_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ae(s.notificationForm.email_enabled?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",Am,[t[45]||(t[45]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications SMS"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par SMS")],-1)),e("label",jm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=o=>s.notificationForm.sms_enabled=o),class:"sr-only peer"},null,512),[[ee,s.notificationForm.sms_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ae(s.notificationForm.sms_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",Mm,[t[47]||(t[47]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Push"),e("p",{class:"text-sm text-gray-600"},"Notifications navigateur et mobile")],-1)),e("label",Pm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.notificationForm.push_enabled=o),class:"sr-only peer"},null,512),[[ee,s.notificationForm.push_enabled]]),t[46]||(t[46]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("button",{onClick:t[17]||(t[17]=(...o)=>s.saveNotificationSettings&&s.saveNotificationSettings(...o)),disabled:s.savingNotifications,class:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},a(s.savingNotifications?"Sauvegarde...":"Sauvegarder les notifications"),9,Om)])]),e("div",Tm,[t[55]||(t[55]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité et Maintenance",-1)),e("div",zm,[e("div",Fm,[e("div",Um,[t[50]||(t[50]=e("div",null,[e("h4",{class:"font-medium text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 text-orange-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),Z(" Mode Maintenance ")]),e("p",{class:"text-sm text-gray-600"},"Rendre le site temporairement indisponible")],-1)),e("label",Rm,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=o=>s.maintenanceForm.maintenance_mode=o),class:"sr-only peer"},null,512),[[ee,s.maintenanceForm.maintenance_mode]]),t[49]||(t[49]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"},null,-1))])]),s.maintenanceForm.maintenance_mode?(r(),n("div",Dm,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message de maintenance",-1)),i(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.maintenanceForm.maintenance_message=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"},placeholder:"Le site est temporairement en maintenance..."},null,512),[[S,s.maintenanceForm.maintenance_message]])])):j("",!0)]),e("div",null,[t[54]||(t[54]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Commission Plateforme",-1)),e("div",Em,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission fixe (XAF)",-1)),i(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=o=>s.commissionForm.fixed_commission=o),min:"0",step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.commissionForm.fixed_commission]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission % du ticket",-1)),i(e("input",{type:"number","onUpdate:modelValue":t[21]||(t[21]=o=>s.commissionForm.percentage_commission=o),min:"0",max:"100",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.commissionForm.percentage_commission]])])])]),e("button",{onClick:t[22]||(t[22]=(...o)=>s.saveSecuritySettings&&s.saveSecuritySettings(...o)),disabled:s.savingSecurity,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},a(s.savingSecurity?"Sauvegarde...":"Sauvegarder la sécurité"),9,Vm)])])]),e("div",Bm,[e("div",Im,[e("div",qm,[(r(),n("svg",$m,[...t[56]||(t[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)])]))]),t[57]||(t[57]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Exporter Configuration",-1)),e("button",{onClick:t[23]||(t[23]=(...o)=>s.exportSettings&&s.exportSettings(...o)),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[24]||(t[24]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#fff"}),onMouseleave:t[25]||(t[25]=o=>{o.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",o.currentTarget.style.color="#272d63"})}," Exporter ",32)]),e("div",Nm,[e("div",Lm,[(r(),n("svg",Xm,[...t[58]||(t[58]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])]))]),t[59]||(t[59]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Importer Configuration",-1)),e("input",{type:"file",ref:"importFile",onChange:t[26]||(t[26]=(...o)=>s.importSettings&&s.importSettings(...o)),accept:".json",class:"hidden"},null,544),e("button",{onClick:t[27]||(t[27]=o=>h.$refs.importFile.click()),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#fab511","background-color":"rgba(250, 181, 17, 0.1)"},onMouseover:t[28]||(t[28]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#fff"}),onMouseleave:t[29]||(t[29]=o=>{o.currentTarget.style.backgroundColor="rgba(250, 181, 17, 0.1)",o.currentTarget.style.color="#fab511"})}," Importer ",32)]),e("div",Hm,[t[60]||(t[60]=e("div",{class:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),t[61]||(t[61]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Réinitialiser",-1)),e("button",{onClick:t[30]||(t[30]=(...o)=>s.resetAllSettings&&s.resetAllSettings(...o)),class:"text-sm text-red-600 hover:text-red-800 px-4 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Tout Réinitialiser ")])])])}const Km=se(im,[["render",Gm],["__scopeId","data-v-b0f1a205"]]),x2=Object.freeze(Object.defineProperty({__proto__:null,default:Km},Symbol.toStringTag,{value:"Module"})),Wm={name:"Profile",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u(!1),m=u(!1),_=u(""),o=u({id:1,name:"",email:"",phone:"",position:"",created_at:new Date,login_count:0}),l=N({name:"",email:"",phone:"",position:""}),v=N({current_password:"",new_password:"",new_password_confirmation:""}),P=N({email_notifications:!0,two_factor_enabled:!1,language:"fr",timezone:"Africa/Libreville"}),f=u([]),U=async()=>{h.value=!0;try{const k=await fetch("/api/v1/admin/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(k.ok){const V=await k.json();V.success&&(o.value=V.data.user,Object.assign(l,V.data.user),Object.assign(P,V.data.preferences||P),f.value=V.data.sessions||[])}else F()}catch{console.log("API non disponible, utilisation des données locales"),F()}finally{h.value=!1}},F=()=>{const k={id:1,name:localStorage.getItem("userName")||"Admin Primea",email:localStorage.getItem("userEmail")||"admin@primea.ga",phone:"+241 01 23 45 67",position:"Super Administrateur",created_at:new Date("2024-01-15"),login_count:127};o.value=k,Object.assign(l,k),f.value=[{id:1,device:"Chrome sur macOS",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]},C=async()=>{t.value=!0;try{const k=await fetch("/api/v1/admin/profile",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(l)});k.ok?(await k.json()).success&&(o.value={...o.value,...l},localStorage.setItem("userName",l.name),localStorage.setItem("userEmail",l.email),alert("Profil mis à jour avec succès")):(o.value={...o.value,...l},localStorage.setItem("userName",l.name),localStorage.setItem("userEmail",l.email),alert("Profil mis à jour avec succès (simulé)"))}catch{console.log("API non disponible, mise à jour locale"),o.value={...o.value,...l},localStorage.setItem("userName",l.name),localStorage.setItem("userEmail",l.email),alert("Profil mis à jour avec succès (simulé)")}finally{t.value=!1}},B=async()=>{if(_.value="",v.new_password!==v.new_password_confirmation){_.value="Les mots de passe ne correspondent pas";return}if(v.new_password.length<8){_.value="Le mot de passe doit contenir au moins 8 caractères";return}p.value=!0;try{const k=await fetch("/api/v1/admin/profile/password",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(v)});k.ok?(await k.json()).success&&(Object.assign(v,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès")):(Object.assign(v,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)"))}catch{console.log("API non disponible, changement simulé"),Object.assign(v,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)")}finally{p.value=!1}},G=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/profile/preferences",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(P)})).ok?alert("Préférences sauvegardées avec succès"):alert("Préférences sauvegardées avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Préférences sauvegardées avec succès (simulé)")}finally{s.value=!1}},b=()=>{m.value=!0},g=async k=>{if(confirm("Êtes-vous sûr de vouloir révoquer cette session ?"))try{(await fetch(`/api/v1/admin/profile/sessions/${k.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?f.value=f.value.filter(A=>A.id!==k.id):f.value=f.value.filter(A=>A.id!==k.id)}catch{f.value=f.value.filter(A=>A.id!==k.id)}},c=async()=>{if(confirm("Cela déconnectera toutes les autres sessions. Continuer ?"))try{(await fetch("/api/v1/admin/profile/sessions/logout-all",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?(f.value=f.value.filter(V=>V.current),alert("Toutes les autres sessions ont été déconnectées")):(f.value=f.value.filter(V=>V.current),alert("Toutes les autres sessions ont été déconnectées (simulé)"))}catch{f.value=f.value.filter(V=>V.current),alert("Toutes les autres sessions ont été déconnectées (simulé)")}},d=()=>{alert("Téléchargement des données du compte (fonctionnalité à venir)")},x=k=>k.split(" ").map(V=>V.charAt(0)).join("").toUpperCase().substring(0,2),w=k=>new Date(k).toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),E=k=>{const A=new Date-new Date(k),I=Math.floor(A/6e4),y=Math.floor(A/36e5),O=Math.floor(A/864e5);return I<1?"À l'instant":I<60?`Il y a ${I} min`:y<24?`Il y a ${y}h`:`Il y a ${O}j`};return te(()=>{U()}),{loading:h,updatingProfile:t,changingPassword:p,updatingPreferences:s,showAvatarModal:m,passwordError:_,profile:o,profileForm:l,passwordForm:v,preferences:P,activeSessions:f,updateProfile:C,changePassword:B,updatePreferences:G,changeAvatar:b,revokeSession:g,logoutAllSessions:c,downloadAccountData:d,getInitials:x,formatDate:w,formatRelativeTime:E}}},Jm={class:"profile-management p-6"},Ym={class:"bg-white rounded-lg shadow p-6 mb-6"},Qm={class:"flex items-center space-x-6"},Zm={class:"relative"},eg={class:"w-24 h-24 rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},tg={class:"flex-1"},sg={class:"text-xl font-bold",style:{color:"#272d63"}},og={class:"text-gray-600 mb-1"},ag={class:"flex items-center space-x-4 text-sm text-gray-500"},ng={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},rg={class:"bg-white rounded-lg shadow p-6"},lg=["disabled"],ig={class:"bg-white rounded-lg shadow p-6"},dg={key:0,class:"text-red-600 text-sm"},cg=["disabled"],ug={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},mg={class:"bg-white rounded-lg shadow p-6"},gg={class:"space-y-4"},pg={class:"flex items-center justify-between"},fg={class:"relative inline-flex items-center cursor-pointer"},xg={class:"flex items-center justify-between"},yg={class:"relative inline-flex items-center cursor-pointer"},vg=["disabled"],bg={class:"bg-white rounded-lg shadow p-6"},hg={class:"grid grid-cols-2 gap-4 mb-6"},wg={class:"text-center p-3 bg-gray-50 rounded-lg"},_g={class:"text-xl font-bold",style:{color:"#272d63"}},kg={class:"text-center p-3 bg-gray-50 rounded-lg"},Cg={class:"text-xl font-bold",style:{color:"#fab511"}},Sg={class:"space-y-3"},Ag={class:"flex items-center"},jg={class:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Mg={class:"w-4 h-4",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pg={class:"text-sm font-medium text-gray-900"},Og={class:"text-xs text-gray-500"},Tg={class:"flex items-center space-x-2"},zg={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},Fg=["onClick"],Ug={class:"mt-6 space-y-2"},Rg={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Dg={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Eg={class:"text-center mb-4"},Vg={class:"w-24 h-24 mx-auto rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},Bg={class:"flex space-x-3"};function Ig(h,t,p,s,m,_){return r(),n("div",Jm,[t[52]||(t[52]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Mon Profil"),e("p",{class:"text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",Ym,[e("div",Qm,[e("div",Zm,[e("div",eg,a(s.getInitials(s.profile.name)),1),e("button",{onClick:t[0]||(t[0]=(...o)=>s.changeAvatar&&s.changeAvatar(...o)),class:"absolute bottom-0 right-0 text-white p-2 rounded-full transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#fab511")},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],32)]),e("div",tg,[e("h3",sg,a(s.profile.name),1),e("p",og,a(s.profile.email),1),e("div",ag,[t[28]||(t[28]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),Z(" Administrateur ")],-1)),e("span",null,"Membre depuis "+a(s.formatDate(s.profile.created_at)),1)])])])]),e("div",ng,[e("div",rg,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Informations Personnelles",-1)),e("form",{onSubmit:t[9]||(t[9]=re((...o)=>s.updateProfile&&s.updateProfile(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.profileForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.profileForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),i(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=o=>s.profileForm.email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.profileForm.email]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),i(e("input",{type:"tel","onUpdate:modelValue":t[5]||(t[5]=o=>s.profileForm.phone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.profileForm.phone]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Poste",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.profileForm.position=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.profileForm.position]])]),e("button",{type:"submit",disabled:s.updatingProfile,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.updatingProfile?"Mise à jour...":"Mettre à jour"),41,lg)],32)]),e("div",ig,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Changer le Mot de Passe",-1)),e("form",{onSubmit:t[15]||(t[15]=re((...o)=>s.changePassword&&s.changePassword(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel *",-1)),i(e("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=o=>s.passwordForm.current_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.passwordForm.current_password]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe *",-1)),i(e("input",{type:"password","onUpdate:modelValue":t[11]||(t[11]=o=>s.passwordForm.new_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.passwordForm.new_password]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe *",-1)),i(e("input",{type:"password","onUpdate:modelValue":t[12]||(t[12]=o=>s.passwordForm.new_password_confirmation=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.passwordForm.new_password_confirmation]])]),s.passwordError?(r(),n("div",dg,a(s.passwordError),1)):j("",!0),e("button",{type:"submit",disabled:s.changingPassword,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511")},a(s.changingPassword?"Changement...":"Changer le mot de passe"),41,cg)],32)])]),e("div",ug,[e("div",mg,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Préférences",-1)),e("div",gg,[e("div",pg,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications importantes par email")],-1)),e("label",fg,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.preferences.email_notifications=o),class:"sr-only peer"},null,512),[[ee,s.preferences.email_notifications]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ae(s.preferences.email_notifications?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",xg,[t[39]||(t[39]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Authentification 2FA"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée avec un code à usage unique")],-1)),e("label",yg,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>s.preferences.two_factor_enabled=o),class:"sr-only peer"},null,512),[[ee,s.preferences.two_factor_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ae(s.preferences.two_factor_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue de l'interface",-1)),i(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.preferences.language=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[40]||(t[40]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[q,s.preferences.language]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),i(e("select",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.preferences.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[42]||(t[42]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1)])],512),[[q,s.preferences.timezone]])]),e("button",{onClick:t[20]||(t[20]=(...o)=>s.updatePreferences&&s.updatePreferences(...o)),disabled:s.updatingPreferences,class:"w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},a(s.updatingPreferences?"Sauvegarde...":"Sauvegarder les préférences"),9,vg)])]),e("div",bg,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité & Sessions",-1)),e("div",hg,[e("div",wg,[e("div",_g,a(s.profile.login_count||0),1),t[45]||(t[45]=e("div",{class:"text-sm text-gray-600"},"Connexions",-1))]),e("div",kg,[e("div",Cg,a(s.activeSessions.length),1),t[46]||(t[46]=e("div",{class:"text-sm text-gray-600"},"Sessions actives",-1))])]),e("div",Sg,[t[48]||(t[48]=e("h4",{class:"font-medium text-gray-900"},"Sessions Actives",-1)),(r(!0),n(R,null,D(s.activeSessions,o=>(r(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Ag,[e("div",jg,[(r(),n("svg",Mg,[...t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])]))]),e("div",null,[e("p",Pg,a(o.device),1),e("p",Og,a(o.location)+" • "+a(s.formatRelativeTime(o.last_activity)),1)])]),e("div",Tg,[o.current?(r(),n("span",zg," Actuelle ")):(r(),n("button",{key:1,onClick:l=>s.revokeSession(o),class:"text-xs text-red-600 hover:text-red-800 px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Révoquer ",8,Fg))])]))),128))]),e("div",Ug,[e("button",{onClick:t[21]||(t[21]=(...o)=>s.logoutAllSessions&&s.logoutAllSessions(...o)),class:"w-full text-orange-600 hover:text-orange-800 py-2 px-4 bg-orange-100 hover:bg-orange-200 rounded-lg font-medium transition-colors duration-200"}," Déconnecter toutes les autres sessions "),e("button",{onClick:t[22]||(t[22]=(...o)=>s.downloadAccountData&&s.downloadAccountData(...o)),class:"w-full text-gray-600 hover:text-gray-800 py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200"}," Télécharger mes données ")])])]),s.showAvatarModal?(r(),n("div",Rg,[e("div",Dg,[t[51]||(t[51]=e("h3",{class:"text-lg font-bold mb-4",style:{color:"#272d63"}},"Changer la photo de profil",-1)),e("div",Eg,[e("div",Vg,a(s.getInitials(s.profile.name)),1),t[50]||(t[50]=e("p",{class:"text-sm text-gray-600 mt-2"},"Fonctionnalité à venir : upload d'image",-1))]),e("div",Bg,[e("button",{onClick:t[23]||(t[23]=o=>s.showAvatarModal=!1),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler "),e("button",{onClick:t[24]||(t[24]=o=>s.showAvatarModal=!1),class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[25]||(t[25]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[26]||(t[26]=o=>o.currentTarget.style.backgroundColor="#272d63")}," Fermer ",32)])])])):j("",!0)])}const qg=se(Wm,[["render",Ig],["__scopeId","data-v-baf281fd"]]),y2=Object.freeze(Object.defineProperty({__proto__:null,default:qg},Symbol.toStringTag,{value:"Module"})),$g={name:"CategoryManagement",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u([]),m=u(null),_=N({search:"",status:""}),o=N({name:"",description:"",color:"#272d63",status:"active"}),l=N({current_page:1,per_page:10,total:0,from:0,to:0}),v=ie(()=>{let d=s.value;return _.search&&(d=d.filter(x=>x.name.toLowerCase().includes(_.search.toLowerCase())||x.description?.toLowerCase().includes(_.search.toLowerCase()))),_.status&&(d=d.filter(x=>x.status===_.status)),d}),P=ie(()=>{const d=[],x=Math.ceil(l.total/l.per_page);for(let w=1;w<=x;w++)d.push(w);return d}),f=async(d=1)=>{h.value=!0;try{const x=new URLSearchParams({page:d,per_page:l.per_page,..._.search&&{search:_.search},..._.status&&{status:_.status}}),w=await fetch(`/api/v1/admin/categories?${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(w.ok){const E=await w.json();E.success&&(s.value=E.data.categories,Object.assign(l,E.data.pagination))}else U()}catch{console.log("API non disponible, utilisation des données simulées"),U()}finally{h.value=!1}},U=()=>{s.value=[{id:1,name:"Concerts",slug:"concerts",description:"Événements musicaux et concerts live",color:"#272d63",status:"active",events_count:25,created_at:new Date},{id:2,name:"Conférences",slug:"conferences",description:"Événements professionnels et éducatifs",color:"#fab511",status:"active",events_count:12,created_at:new Date(Date.now()-864e5)},{id:3,name:"Sport",slug:"sport",description:"Événements sportifs et compétitions",color:"#10b981",status:"active",events_count:8,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Culture",slug:"culture",description:"Événements culturels et artistiques",color:"#8b5cf6",status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}],Object.assign(l,{current_page:1,per_page:10,total:s.value.length,from:1,to:s.value.length})},F=async()=>{try{const d=await fetch("/api/v1/admin/categories",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(d.ok)(await d.json()).success&&(g(),f());else{const x={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(x),g()}}catch{console.log("API non disponible, ajout local simulé");const x={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(x),g()}},C=d=>{m.value=d,Object.assign(o,d),p.value=!0},B=async()=>{try{const d=await fetch(`/api/v1/admin/categories/${m.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(d.ok)(await d.json()).success&&(g(),f());else{const x=s.value.findIndex(w=>w.id===m.value.id);x!==-1&&(s.value[x]={...s.value[x],...o}),g()}}catch{console.log("API non disponible, mise à jour locale simulée");const x=s.value.findIndex(w=>w.id===m.value.id);x!==-1&&(s.value[x]={...s.value[x],...o}),g()}},G=async d=>{if(confirm(`Êtes-vous sûr de vouloir supprimer la catégorie "${d.name}" ?`))try{(await fetch(`/api/v1/admin/categories/${d.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?f():s.value=s.value.filter(w=>w.id!==d.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(w=>w.id!==d.id)}},b=d=>{l.current_page=d,f(d)},g=()=>{t.value=!1,p.value=!1,m.value=null,Object.assign(o,{name:"",description:"",color:"#272d63",status:"active"})},c=d=>new Date(d).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return te(()=>{f()}),{loading:h,showCreateModal:t,showEditModal:p,categories:s,filters:_,categoryForm:o,pagination:l,filteredCategories:v,paginationPages:P,loadCategories:f,createCategory:F,editCategory:C,updateCategory:B,deleteCategory:G,changePage:b,closeModals:g,formatDate:c}}},Ng={class:"category-management p-6"},Lg={class:"mb-6 flex justify-between items-center"},Xg={class:"bg-white rounded-lg shadow p-4 mb-6"},Hg={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Gg={class:"flex items-end"},Kg={key:0,class:"flex justify-center items-center h-64"},Wg={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},Jg={class:"overflow-x-auto"},Yg={class:"w-full"},Qg={class:"divide-y divide-gray-200"},Zg={class:"px-6 py-4"},e1={class:"flex items-center"},t1={class:"text-sm font-medium text-gray-900"},s1={class:"text-sm text-gray-500"},o1={class:"px-6 py-4"},a1={class:"text-sm text-gray-900"},n1={class:"px-6 py-4"},r1={class:"text-sm font-medium",style:{color:"#272d63"}},l1={class:"px-6 py-4"},i1={class:"px-6 py-4 text-sm text-gray-500"},d1={class:"px-6 py-4"},c1={class:"flex space-x-2"},u1=["onClick"],m1=["onClick"],g1={key:0,class:"text-center py-12"},p1={key:2,class:"mt-6 flex justify-between items-center"},f1={class:"text-sm text-gray-700"},x1={class:"flex space-x-2"},y1=["onClick"],v1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},b1={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},h1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},w1={class:"space-y-4"},_1={class:"flex space-x-3 mt-6"};function k1(h,t,p,s,m,_){return r(),n("div",Ng,[e("div",Lg,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Catégories"),e("p",{class:"text-gray-600 mt-1"},"Organisez et gérez les catégories d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Nouvelle Catégorie ",-1)])],32)]),e("div",Xg,[e("div",Hg,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Nom de catégorie...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[q,s.filters.status]])]),e("div",Gg,[e("button",{onClick:t[5]||(t[5]=(...o)=>s.loadCategories&&s.loadCategories(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(r(),n("div",Kg,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(r(),n("div",Wg,[e("div",Jg,[e("table",Yg,[t[25]||(t[25]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Qg,[(r(!0),n(R,null,D(s.filteredCategories,o=>(r(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Zg,[e("div",e1,[e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:ae({backgroundColor:o.color+"20",color:o.color})},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],4),e("div",null,[e("p",t1,a(o.name),1),e("p",s1,a(o.slug),1)])])]),e("td",o1,[e("p",a1,a(o.description||"Aucune description"),1)]),e("td",n1,[e("span",r1,a(o.events_count||0)+" événements",1)]),e("td",l1,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.status==="active"?"Actif":"Inactif"),3)]),e("td",i1,a(s.formatDate(o.created_at)),1),e("td",d1,[e("div",c1,[e("button",{onClick:l=>s.editCategory(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[8]||(t[8]=l=>{l.currentTarget.style.backgroundColor="#fab511",l.currentTarget.style.color="#fff"}),onMouseleave:t[9]||(t[9]=l=>{l.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",l.currentTarget.style.color="#272d63"})}," Modifier ",40,u1),e("button",{onClick:l=>s.deleteCategory(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,m1)])])]))),128))])])]),s.categories.length===0?(r(),n("div",g1,[...t[26]||(t[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucune catégorie",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre première catégorie.",-1)])])):j("",!0)])),s.pagination.total>s.pagination.per_page?(r(),n("div",p1,[e("div",f1," Affichage de "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" catégories ",1),e("div",x1,[(r(!0),n(R,null,D(s.paginationPages,o=>(r(),n("button",{key:o,onClick:l=>s.changePage(o),class:H(["px-3 py-2 text-sm rounded-lg transition-colors duration-200",o===s.pagination.current_page?"text-white":"text-gray-700 hover:bg-gray-100"]),style:ae(o===s.pagination.current_page?{backgroundColor:"#272d63"}:{})},a(o),15,y1))),128))])])):j("",!0),s.showCreateModal||s.showEditModal?(r(),n("div",v1,[e("div",b1,[e("h3",h1,a(s.showCreateModal?"Nouvelle Catégorie":"Modifier la Catégorie"),1),e("form",{onSubmit:t[17]||(t[17]=re(o=>s.showCreateModal?s.createCategory():s.updateCategory(),["prevent"]))},[e("div",w1,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.categoryForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.categoryForm.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),i(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.categoryForm.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.categoryForm.description]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),i(e("input",{type:"color","onUpdate:modelValue":t[12]||(t[12]=o=>s.categoryForm.color=o),class:"w-full h-10 border border-gray-300 rounded-lg"},null,512),[[S,s.categoryForm.color]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.categoryForm.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[q,s.categoryForm.status]])])]),e("div",_1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[15]||(t[15]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[16]||(t[16]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):j("",!0)])}const C1=se($g,[["render",k1],["__scopeId","data-v-115368d2"]]),v2=Object.freeze(Object.defineProperty({__proto__:null,default:C1},Symbol.toStringTag,{value:"Module"})),S1={name:"VenueManagement",setup(){const h=u(!1),t=u(!1),p=u(!1),s=u([]),m=u(null),_=u(null),o=N({search:"",city:"",status:""}),l=N({name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:"",status:"active"}),v=ie(()=>{let g=s.value;return o.search&&(g=g.filter(c=>c.name.toLowerCase().includes(o.search.toLowerCase())||c.address.toLowerCase().includes(o.search.toLowerCase()))),o.city&&(g=g.filter(c=>c.city===o.city)),o.status&&(g=g.filter(c=>c.status===o.status)),g}),P=ie(()=>!Array.isArray(s.value)||s.value.length===0?[]:[...new Set(s.value.map(g=>g.city))].sort()),f=async()=>{h.value=!0;try{const g=new URLSearchParams({...o.search&&{search:o.search},...o.city&&{city:o.city},...o.status&&{status:o.status}}),c=await fetch(`/api/v1/admin/venues?${g}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(c.ok){const d=await c.json();if(d.success){const x=d.data?.data||d.venues?.data||d.data||[];s.value=x,d.data?.total&&(_.value={total:d.data.total,per_page:d.data.per_page,current_page:d.data.current_page,last_page:d.data.last_page})}}else U()}catch{console.log("API non disponible, utilisation des données simulées"),U()}finally{h.value=!1}},U=()=>{s.value||(s.value=[]),s.value=[{id:1,name:"Centre de Conférences Mbolo",description:"Centre moderne pour événements d'entreprise",address:"Avenue de l'Indépendance",city:"Libreville",postal_code:"BP 123",country:"Gabon",capacity:500,phone:"+241 01 23 45 67",email:"contact@mbolo.ga",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",status:"active",events_count:15,created_at:new Date},{id:2,name:"Salle Polyvalente Akanda",description:"Espace polyvalent pour tous types d'événements",address:"Quartier Akanda",city:"Akanda",postal_code:"BP 456",country:"Gabon",capacity:300,phone:"+241 01 34 56 78",email:"akanda@venues.ga",image:"https://images.unsplash.com/photo-1511578314322-379afb476865?w=400",status:"active",events_count:8,created_at:new Date(Date.now()-864e5)},{id:3,name:"Stade Omnisports",description:"Grand stade pour événements sportifs et concerts",address:"Zone Industrielle Owendo",city:"Owendo",postal_code:"BP 789",country:"Gabon",capacity:5e3,phone:"+241 01 45 67 89",email:"stade@owendo.ga",image:"https://images.unsplash.com/photo-1459865264687-595d652de67e?w=400",status:"active",events_count:12,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Salle des Fêtes Port-Gentil",description:"Salle traditionnelle rénovée",address:"Centre-ville",city:"Port-Gentil",postal_code:"BP 012",country:"Gabon",capacity:200,phone:"+241 01 56 78 90",email:"fetes@portgentil.ga",image:null,status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}]},F=async()=>{try{const g=await fetch("/api/v1/admin/venues",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(l)});if(g.ok)(await g.json()).success&&(b(),f());else{const c={id:Date.now(),...l,events_count:0,created_at:new Date};s.value.unshift(c),b()}}catch{console.log("API non disponible, ajout local simulé");const c={id:Date.now(),...l,events_count:0,created_at:new Date};s.value.unshift(c),b()}},C=g=>{m.value=g,Object.assign(l,g),p.value=!0},B=async()=>{try{const g=await fetch(`/api/v1/admin/venues/${m.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(l)});if(g.ok)(await g.json()).success&&(b(),f());else{const c=s.value.findIndex(d=>d.id===m.value.id);c!==-1&&(s.value[c]={...s.value[c],...l}),b()}}catch{console.log("API non disponible, mise à jour locale simulée");const c=s.value.findIndex(d=>d.id===m.value.id);c!==-1&&(s.value[c]={...s.value[c],...l}),b()}},G=async g=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le lieu "${g.name}" ?`))try{(await fetch(`/api/v1/admin/venues/${g.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?f():s.value=s.value.filter(d=>d.id!==g.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(d=>d.id!==g.id)}},b=()=>{t.value=!1,p.value=!1,m.value=null,Object.assign(l,{name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:"",status:"active"})};return te(()=>{f()}),{loading:h,showCreateModal:t,showEditModal:p,venues:s,filters:o,venueForm:l,filteredVenues:v,cities:P,loadVenues:f,createVenue:F,editVenue:C,updateVenue:B,deleteVenue:G,closeModals:b}}},A1={class:"venue-management p-6"},j1={class:"mb-6 flex justify-between items-center"},M1={class:"bg-white rounded-lg shadow p-4 mb-6"},P1={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},O1=["value"],T1={class:"flex items-end"},z1={key:0,class:"flex justify-center items-center h-64"},F1={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},U1={class:"h-48 bg-gray-200 rounded-t-lg relative overflow-hidden"},R1=["src","alt"],D1={key:1,class:"w-full h-full flex items-center justify-center"},E1={class:"absolute top-3 right-3"},V1={class:"p-4"},B1={class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},I1={class:"space-y-2 text-sm text-gray-600"},q1={class:"flex items-center"},$1={class:"flex items-center"},N1={class:"flex items-center"},L1={class:"flex space-x-2 mt-4"},X1=["onClick"],H1=["onClick"],G1={key:2,class:"text-center py-12"},K1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},W1={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-90vh overflow-y-auto"},J1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},Y1={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q1={class:"md:col-span-2"},Z1={class:"md:col-span-2"},e2={class:"md:col-span-2"},t2={class:"flex space-x-3 mt-6"};function s2(h,t,p,s,m,_){return r(),n("div",A1,[e("div",j1,[t[27]||(t[27]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Lieux"),e("p",{class:"text-gray-600 mt-1"},"Gérez les lieux et salles d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Nouveau Lieu ",-1)])],32)]),e("div",M1,[e("div",P1,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Nom du lieu...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.filters.search]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.city=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[t[29]||(t[29]=e("option",{value:""},"Toutes les villes",-1)),(r(!0),n(R,null,D(s.cities,o=>(r(),n("option",{key:o,value:o},a(o),9,O1))),128))],512),[[q,s.filters.city]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[31]||(t[31]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[q,s.filters.status]])]),e("div",T1,[e("button",{onClick:t[6]||(t[6]=(...o)=>s.loadVenues&&s.loadVenues(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(r(),n("div",z1,[...t[33]||(t[33]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(r(),n("div",F1,[(r(!0),n(R,null,D(s.filteredVenues,o=>(r(),n("div",{key:o.id,class:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-200"},[e("div",U1,[o.image?(r(),n("img",{key:0,src:o.image,alt:o.name,class:"w-full h-full object-cover"},null,8,R1)):(r(),n("div",D1,[...t[34]||(t[34]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),e("div",E1,[e("span",{class:H(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.status==="active"?"Actif":"Inactif"),3)])]),e("div",V1,[e("h3",B1,a(o.name),1),e("div",I1,[e("div",q1,[t[35]||(t[35]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Z(" "+a(o.address)+", "+a(o.city),1)]),e("div",$1,[t[36]||(t[36]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),Z(" Capacité: "+a(o.capacity)+" personnes ",1)]),e("div",N1,[t[37]||(t[37]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Z(" "+a(o.events_count||0)+" événements ",1)])]),e("div",L1,[e("button",{onClick:l=>s.editVenue(o),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[9]||(t[9]=l=>{l.currentTarget.style.backgroundColor="#fab511",l.currentTarget.style.color="#fff"}),onMouseleave:t[10]||(t[10]=l=>{l.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",l.currentTarget.style.color="#272d63"})}," Modifier ",40,X1),e("button",{onClick:l=>s.deleteVenue(o),class:"flex-1 text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,H1)])])]))),128))])),s.venues.length===0&&!s.loading?(r(),n("div",G1,[...t[38]||(t[38]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun lieu",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par ajouter votre premier lieu.",-1)])])):j("",!0),s.showCreateModal||s.showEditModal?(r(),n("div",K1,[e("div",W1,[e("h3",J1,a(s.showCreateModal?"Nouveau Lieu":"Modifier le Lieu"),1),e("form",{onSubmit:t[25]||(t[25]=re(o=>s.showCreateModal?s.createVenue():s.updateVenue(),["prevent"]))},[e("div",Y1,[e("div",Q1,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du lieu *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=o=>s.venueForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.name]])]),e("div",Z1,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),i(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.venueForm.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.description]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=o=>s.venueForm.address=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.address]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville *",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=o=>s.venueForm.city=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.city]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=o=>s.venueForm.postal_code=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.postal_code]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),i(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=o=>s.venueForm.country=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.country]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Capacité *",-1)),i(e("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=o=>s.venueForm.capacity=o),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.capacity]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.venueForm.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[46]||(t[46]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[q,s.venueForm.status]])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),i(e("input",{type:"tel","onUpdate:modelValue":t[19]||(t[19]=o=>s.venueForm.phone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.phone]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),i(e("input",{type:"email","onUpdate:modelValue":t[20]||(t[20]=o=>s.venueForm.email=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.email]])]),e("div",e2,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL de l'image",-1)),i(e("input",{type:"url","onUpdate:modelValue":t[21]||(t[21]=o=>s.venueForm.image=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[S,s.venueForm.image]])])]),e("div",t2,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[22]||(t[22]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[23]||(t[23]=o=>o.currentTarget.style.backgroundColor="#272d63")},a(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[24]||(t[24]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):j("",!0)])}const o2=se(S1,[["render",s2],["__scopeId","data-v-aa61060e"]]),b2=Object.freeze(Object.defineProperty({__proto__:null,default:o2},Symbol.toStringTag,{value:"Module"}));export{l2 as A,v2 as C,c2 as E,d2 as O,m2 as P,f2 as R,x2 as S,i2 as U,b2 as V,u2 as a,g2 as b,p2 as c,y2 as d};
