import{j as n,o as l,k as e,t as a,G as U,H as D,q as R,P as re,X as pe,b as u,Y as X,d as xe,Z as ae,n as b,p as $,D as i,E as A,F,W as ne,_ as Q,O as fe,Q as ie,$ as de,N as ce,a0 as me,i as ue,l as S,w as J,a as L,J as ye,a1 as ve,a2 as he}from"./vue-vendor-Bz5bDQPC.js";import{_ as ee,C as ge}from"./account-Bc-zxAwJ.js";const _e={name:"AdminDashboard",setup(){const x=u(!1),t=X({total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,tickets_sold:0,failed_payments:0,successful_payments:0,pending_payments:0,payments_in_transit:0,platform_commission:0}),f=u([]),s=u([]),v=u([]),M=u([]),o=xe(()=>v.value.length===0?1:Math.max(...v.value.map(C=>C.amount))),r=async()=>{x.value=!0;try{const V=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(Object.assign(t,V.data.stats),f.value=V.data.recent_orders,s.value=V.data.recent_activity,v.value=V.data.revenue_data,M.value=V.data.top_events)}catch(C){console.error("Erreur chargement dashboard admin:",C)}finally{x.value=!1}},p=async()=>{try{const V=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(V.success){const z=V.data.balances.reduce((W,G)=>W+G.amount,0);alert(`Solde SHAP total: ${h(z)} XAF`)}}catch(C){console.error("Erreur vérification solde SHAP:",C)}},P=C=>{this.$router.push(`/admin/orders/${C.id}`)},h=C=>new Intl.NumberFormat("fr-FR").format(C),w=C=>new Date(C).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),O=C=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[C]||C,g=C=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[C]||"bg-gray-100 text-gray-800",T=C=>({order:"bg-blue-100 text-blue-600",payment:"bg-green-100 text-green-600",payout:"bg-yellow-100 text-yellow-600",user:"bg-purple-100 text-purple-600"})[C]||"bg-gray-100 text-gray-600",d=()=>{Object.assign(t,{total_users:1247,total_organizers:89,total_events:156,orders_today:23,revenue_today:285e4,successful_payments:142,pending_payments:8,failed_payments:3,payments_in_transit:475e4,platform_commission:285e3}),f.value=[{id:1,reference:"PMT-2025-001",customer_name:"Jean Dupont",customer_email:"jean@email.com",total_amount:15e3,status:"paid",created_at:new Date},{id:2,reference:"PMT-2025-002",customer_name:"Marie Martin",customer_email:"marie@email.com",total_amount:25e3,status:"pending",created_at:new Date(Date.now()-3e5)}]};return ae(()=>{r(),setTimeout(()=>{t.total_users===0&&d()},2e3)}),{loading:x,stats:t,recentOrders:f,recentActivity:s,revenueData:v,topEvents:M,maxRevenue:o,loadDashboardData:r,checkShapBalance:p,viewOrder:P,formatAmount:h,formatDate:w,getOrderStatusName:O,getOrderStatusClass:g,getActivityIconClass:T}}},we={class:"admin-dashboard p-6"},ke={key:0,class:"flex justify-center items-center h-64"},Ce={key:1},Se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},je={class:"flex items-center"},Ae={class:"text-left"},Me={class:"text-white opacity-80 text-sm"},Pe={class:"flex items-center"},Oe={class:"text-left"},ze={class:"text-white opacity-80 text-sm"},Ue={class:"flex items-center"},De={class:"text-left"},Te={class:"text-gray-200 text-sm"},Be={class:"flex items-center"},Ee={class:"text-left"},Ve={class:"text-gray-200 text-sm"},Fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},$e={class:"bg-white rounded-lg shadow p-6"},Ie={class:"flex items-center"},Re={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Ne={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Le={class:"ml-4"},qe={class:"text-2xl font-bold",style:{color:"#272d63"}},He={class:"bg-white rounded-lg shadow p-6"},Ge={class:"flex items-center"},Xe={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},Je={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},We={class:"ml-4"},Qe={class:"text-2xl font-bold",style:{color:"#fab511"}},Ye={class:"bg-white rounded-lg shadow p-6"},Ze={class:"flex items-center"},Ke={class:"ml-4"},et={class:"text-2xl font-bold text-green-600"},tt={class:"bg-white rounded-lg shadow p-6"},st={class:"flex items-center"},ot={class:"ml-4"},at={class:"text-2xl font-bold text-red-600"},nt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},lt={class:"lg:col-span-2"},rt={class:"bg-white rounded-lg shadow p-6"},it={class:"flex justify-between items-center mb-4"},dt={key:0,class:"text-center text-gray-500 py-8"},ct={key:1,class:"overflow-x-auto"},mt={class:"w-full"},ut={class:"divide-y divide-gray-200"},gt={class:"px-4 py-4 text-sm font-medium text-blue-600"},pt=["onClick"],xt={class:"px-4 py-4 text-sm text-gray-900"},bt={class:"px-4 py-4 text-sm font-medium text-gray-900"},ft={class:"px-4 py-4 text-sm"},yt={class:"px-4 py-4 text-sm text-gray-500"},vt={class:"lg:col-span-1 space-y-6"},ht={class:"bg-white rounded-lg shadow p-6"},_t={class:"space-y-3"},wt={class:"flex justify-between items-center"},kt={class:"bg-white rounded-lg shadow p-6"},Ct={class:"space-y-3"},St={class:"flex-1"},jt={class:"text-sm text-gray-900"},At={class:"text-xs text-gray-500"},Mt={class:"bg-white rounded-lg shadow p-6"},Pt={class:"space-y-3"},Ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},zt={class:"bg-white rounded-lg shadow p-6"},Ut={key:0,class:"text-center text-gray-500 py-8"},Dt={key:1,class:"space-y-3"},Tt={class:"text-sm text-gray-600"},Bt={class:"flex items-center"},Et={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},Vt={class:"text-sm font-medium"},Ft={class:"bg-white rounded-lg shadow p-6"},$t={key:0,class:"text-center text-gray-500 py-8"},It={key:1,class:"space-y-4"},Rt={class:"flex items-center"},Nt={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},Lt={class:"font-medium text-gray-900"},qt={class:"text-sm text-gray-600"},Ht={class:"text-right"},Gt={class:"font-medium text-gray-900"},Xt={class:"text-sm text-gray-600"};function Jt(x,t,f,s,v,M){return l(),n("div",we,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Tableau de Bord Primea"),e("p",{class:"text-white opacity-80"},"Supervision des paiements et transactions de la plateforme")])],-1)),s.loading?(l(),n("div",ke,[...t[15]||(t[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),n("div",Ce,[e("div",Se,[e("button",{onClick:t[0]||(t[0]=o=>x.$router.push("/admin/payments")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#272d63"}),onMouseleave:t[2]||(t[2]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#ffffff"})},[e("div",je,[t[17]||(t[17]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1)),e("div",Ae,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold"},"Paiements Transit",-1)),e("p",Me,a(s.formatAmount(s.stats.payments_in_transit||0))+" XAF",1)])])],32),e("button",{onClick:t[3]||(t[3]=o=>x.$router.push("/admin/payouts")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#fab511"},onMouseover:t[4]||(t[4]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511")},[e("div",Pe,[t[19]||(t[19]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),e("div",Oe,[t[18]||(t[18]=e("h3",{class:"text-lg font-bold"},"Revenus Journaliers",-1)),e("p",ze,a(s.formatAmount(s.stats.revenue_today||0))+" XAF",1)])])],32),e("button",{onClick:t[6]||(t[6]=o=>x.$router.push("/admin/orders")),class:"bg-gray-600 text-white p-6 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-105"},[e("div",Ue,[t[21]||(t[21]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",De,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold"},"Commandes",-1)),e("p",Te,a(s.stats.orders_today||0)+" aujourd'hui",1)])])]),e("button",{onClick:t[7]||(t[7]=o=>x.$router.push("/admin/users")),class:"bg-gray-700 text-white p-6 rounded-lg hover:bg-gray-800 transition-all transform hover:scale-105"},[e("div",Be,[t[23]||(t[23]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),e("div",Ee,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold"},"Utilisateurs",-1)),e("p",Ve,a(s.stats.total_users||0)+" total",1)])])])]),e("div",Fe,[e("div",$e,[e("div",Ie,[e("div",Re,[(l(),n("svg",Ne,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",Le,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Paiements Réussis",-1)),e("p",qe,a(s.stats.successful_payments||0),1)])])]),e("div",He,[e("div",Ge,[e("div",Xe,[(l(),n("svg",Je,[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),e("div",We,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Paiements En Attente",-1)),e("p",Qe,a(s.stats.pending_payments||0),1)])])]),e("div",Ye,[e("div",Ze,[t[29]||(t[29]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ke,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Commission Plateforme",-1)),e("p",et,a(s.formatAmount(s.stats.platform_commission||0))+" XAF",1)])])]),e("div",tt,[e("div",st,[t[31]||(t[31]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",ot,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",at,a(s.stats.failed_payments||0),1)])])])]),e("div",nt,[e("div",lt,[e("div",rt,[e("div",it,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold",style:{color:"#272d63"}},"Paiements Récents",-1)),e("button",{onClick:t[8]||(t[8]=o=>x.$router.push("/admin/payments")),class:"text-sm transition-colors duration-200",style:{color:"#272d63"},onMouseover:t[9]||(t[9]=o=>o.currentTarget.style.color="#fab511"),onMouseleave:t[10]||(t[10]=o=>o.currentTarget.style.color="#272d63")},"Voir tous",32)]),s.recentOrders.length===0?(l(),n("div",dt," Aucune commande récente ")):(l(),n("div",ct,[e("table",mt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",ut,[(l(!0),n(U,null,D(s.recentOrders,o=>(l(),n("tr",{key:o.id},[e("td",gt,[e("button",{onClick:r=>s.viewOrder(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,pt)]),e("td",xt,a(o.customer_name||o.customer_email),1),e("td",bt,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",ft,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getOrderStatusClass(o.status)])},a(s.getOrderStatusName(o.status)),3)]),e("td",yt,a(s.formatDate(o.created_at)),1)]))),128))])])]))])]),e("div",vt,[e("div",ht,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",_t,[t[35]||(t[35]=re('<div class="flex justify-between items-center" data-v-8191e77a><span class="text-sm text-gray-600" data-v-8191e77a>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8191e77a> Opérationnel </span></div><div class="flex justify-between items-center" data-v-8191e77a><span class="text-sm text-gray-600" data-v-8191e77a>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8191e77a> Opérationnel </span></div>',2)),e("div",wt,[t[34]||(t[34]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[11]||(t[11]=(...o)=>s.checkShapBalance&&s.checkShapBalance(...o)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",kt,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",Ct,[(l(!0),n(U,null,D(s.recentActivity,o=>(l(),n("div",{key:o.id,class:"flex items-start"},[e("div",{class:R(["p-1 rounded-full mr-3",s.getActivityIconClass(o.type)])},[...t[37]||(t[37]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",St,[e("p",jt,a(o.description),1),e("p",At,a(s.formatDate(o.created_at)),1)])]))),128))])]),e("div",Mt,[t[42]||(t[42]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",Pt,[e("button",{onClick:t[12]||(t[12]=o=>x.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[39]||(t[39]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[13]||(t[13]=o=>x.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[40]||(t[40]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[14]||(t[14]=o=>x.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[41]||(t[41]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",Ot,[e("div",zt,[t[43]||(t[43]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),s.revenueData.length===0?(l(),n("div",Ut," Aucune donnée disponible ")):(l(),n("div",Dt,[(l(!0),n(U,null,D(s.revenueData,o=>(l(),n("div",{key:o.date,class:"flex justify-between items-center"},[e("span",Tt,a(s.formatDate(o.date)),1),e("div",Bt,[e("div",Et,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:pe(`width: ${o.amount/s.maxRevenue*100}%`)},null,4)]),e("span",Vt,a(s.formatAmount(o.amount))+" XAF",1)])]))),128))]))]),e("div",Ft,[t[44]||(t[44]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),s.topEvents.length===0?(l(),n("div",$t," Aucun événement populaire ")):(l(),n("div",It,[(l(!0),n(U,null,D(s.topEvents,(o,r)=>(l(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Rt,[e("div",Nt,a(r+1),1),e("div",null,[e("h3",Lt,a(o.title),1),e("p",qt,a(o.organizer_name),1)])]),e("div",Ht,[e("p",Gt,a(o.tickets_sold)+" tickets",1),e("p",Xt,a(s.formatAmount(o.revenue))+" XAF",1)])]))),128))]))])])]))])}const Wt=ee(_e,[["render",Jt],["__scopeId","data-v-8191e77a"]]),W0=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),Qt={name:"UserManagement",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(null),M=u(null),o=u([]),r=X({search:"",role:"",status:""}),p=X({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0});let P=null;const h=async()=>{x.value=!0;try{const z=new URLSearchParams;r.search&&z.append("search",r.search),r.role&&z.append("role",r.role),r.status&&z.append("status",r.status);const G=await(await fetch(`/api/v1/admin/users?${z}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();G.success&&(o.value=G.data.users.data||G.data.users)}catch(z){console.error("Erreur chargement utilisateurs:",z)}finally{x.value=!1}},w=()=>{clearTimeout(P),P=setTimeout(()=>{h()},500)},O=()=>{v.value=null,Object.assign(p,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0}),f.value=!0},g=z=>{v.value=z,Object.assign(p,{name:z.name,email:z.email,password:"",is_admin:z.is_admin,is_organizer:z.is_organizer,is_active:!z.deleted_at}),f.value=!0},T=async()=>{t.value=!0;try{const z=v.value?`/api/v1/admin/users/${v.value.id}`:"/api/v1/admin/users",W=v.value?"PUT":"POST",Z=await(await fetch(z,{method:W,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(p)})).json();Z.success?(alert(v.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès"),f.value=!1,h()):alert(Z.message||"Erreur lors de la sauvegarde")}catch(z){console.error("Erreur sauvegarde utilisateur:",z),alert("Erreur technique")}finally{t.value=!1}},d=async z=>{if(confirm(`Êtes-vous sûr de vouloir ${z.deleted_at?"activer":"désactiver"} cet utilisateur ?`))try{const G=await(await fetch(`/api/v1/admin/users/${z.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();G.success?h():alert(G.message||"Erreur lors du changement de statut")}catch(W){console.error("Erreur toggle statut:",W),alert("Erreur technique")}},C=z=>{M.value=z,s.value=!0},V=()=>{Object.assign(r,{search:"",role:"",status:""}),h()},Y=z=>new Date(z).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return ae(()=>{h()}),{loading:x,saving:t,showModal:f,showDetailsModal:s,editingUser:v,selectedUser:M,users:o,filters:r,userForm:p,loadUsers:h,debouncedSearch:w,openCreateModal:O,editUser:g,saveUser:T,toggleUserStatus:d,viewUserDetails:C,resetFilters:V,formatDate:Y}}},Yt={class:"user-management p-6 bg-gray-50 min-h-screen"},Zt={class:"mb-8"},Kt={class:"flex items-center justify-between"},es={class:"bg-white rounded-lg shadow p-6 mb-8"},ts={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ss={class:"flex items-end"},os={class:"bg-white rounded-lg shadow"},as={key:0,class:"p-8 text-center"},ns={key:1,class:"p-8 text-center text-gray-500"},ls={key:2,class:"overflow-x-auto"},rs={class:"w-full"},is={class:"divide-y divide-gray-200"},ds={class:"px-6 py-4"},cs={class:"flex items-center"},ms={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},us={class:"ml-4"},gs={class:"text-sm font-medium text-gray-900"},ps={class:"text-sm text-gray-500"},xs={class:"px-6 py-4 text-sm text-gray-900"},bs={class:"px-6 py-4 text-sm"},fs={class:"space-y-1"},ys={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},vs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},hs={key:2,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},_s={class:"px-6 py-4 text-sm"},ws=["onClick"],ks={class:"px-6 py-4 text-sm text-gray-500"},Cs={class:"px-6 py-4 text-sm space-x-2"},Ss=["onClick"],js=["onClick"],As={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ms={class:"bg-white rounded-lg p-6 w-full max-w-md"},Ps={class:"text-lg font-bold mb-4"},Os={class:"space-y-4"},zs={key:0},Us={key:1},Ds={class:"space-y-2"},Ts={class:"flex items-center"},Bs={class:"flex items-center"},Es={key:2},Vs={class:"flex items-center"},Fs={class:"flex justify-end space-x-3 mt-6"},$s=["disabled"],Is={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Rs={class:"bg-white rounded-lg p-6 w-full max-w-lg"},Ns={class:"flex justify-between items-center mb-4"},Ls={key:0,class:"space-y-4"},qs={class:"grid grid-cols-2 gap-4"},Hs={class:"text-sm text-gray-900"},Gs={class:"text-sm text-gray-900"},Xs={class:"text-sm"},Js={class:"space-y-1"},Ws={key:0,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},Qs={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},Ys={key:2,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},Zs={class:"text-sm text-gray-900"},Ks={class:"text-sm text-gray-900"},eo={key:0},to={class:"text-sm text-gray-900"};function so(x,t,f,s,v,M){return l(),n("div",Yt,[e("div",Zt,[e("div",Kt,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),$(" Créer Utilisateur ",-1)])])])]),e("div",es,[t[25]||(t[25]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ts,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.role=o),onChange:t[4]||(t[4]=(...o)=>s.loadUsers&&s.loadUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[21]||(t[21]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[F,s.filters.role]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.status=o),onChange:t[6]||(t[6]=(...o)=>s.loadUsers&&s.loadUsers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[23]||(t[23]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[F,s.filters.status]])]),e("div",ss,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",os,[t[28]||(t[28]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),s.loading?(l(),n("div",as,[...t[26]||(t[26]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.users.length===0?(l(),n("div",ns," Aucun utilisateur trouvé ")):(l(),n("div",ls,[e("table",rs,[t[27]||(t[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",is,[(l(!0),n(U,null,D(s.users,o=>(l(),n("tr",{key:o.id},[e("td",ds,[e("div",cs,[e("div",ms,a(o.name.charAt(0).toUpperCase()),1),e("div",us,[e("div",gs,a(o.name),1),e("div",ps,"ID: "+a(o.id),1)])])]),e("td",xs,a(o.email),1),e("td",bs,[e("div",fs,[o.is_admin?(l(),n("span",ys," Admin ")):b("",!0),o.is_organizer?(l(),n("span",vs," Organisateur ")):b("",!0),!o.is_admin&&!o.is_organizer?(l(),n("span",hs," Client ")):b("",!0)])]),e("td",_s,[e("button",{onClick:r=>s.toggleUserStatus(o),class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",o.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(o.deleted_at?"Inactif":"Actif"),11,ws)]),e("td",ks,a(s.formatDate(o.created_at)),1),e("td",Cs,[e("button",{onClick:r=>s.editUser(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Ss),e("button",{onClick:r=>s.viewUserDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,js)])]))),128))])])]))]),s.showModal?(l(),n("div",As,[e("div",Ms,[e("h3",Ps,a(s.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[16]||(t[16]=ne((...o)=>s.saveUser&&s.saveUser(...o),["prevent"]))},[e("div",Os,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.userForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.userForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.userForm.email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.userForm.email]])]),s.editingUser?b("",!0):(l(),n("div",zs,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe *",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.userForm.password=o),type:"password",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.userForm.password]])])),s.editingUser?(l(),n("div",Us,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.userForm.password=o),type:"password",placeholder:"Laisser vide pour ne pas changer",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.userForm.password]])])):b("",!0),e("div",Ds,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",Ts,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=o=>s.userForm.is_admin=o),class:"rounded border-gray-300"},null,512),[[Q,s.userForm.is_admin]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",Bs,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=o=>s.userForm.is_organizer=o),class:"rounded border-gray-300"},null,512),[[Q,s.userForm.is_organizer]]),t[34]||(t[34]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),s.editingUser?(l(),n("div",Es,[e("label",Vs,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>s.userForm.is_active=o),class:"rounded border-gray-300"},null,512),[[Q,s.userForm.is_active]]),t[36]||(t[36]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):b("",!0)]),e("div",Fs,[e("button",{type:"button",onClick:t[15]||(t[15]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingUser?"Mettre à jour":"Créer"),9,$s)])],32)])])):b("",!0),s.showDetailsModal?(l(),n("div",Is,[e("div",Rs,[e("div",Ns,[t[38]||(t[38]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[37]||(t[37]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedUser?(l(),n("div",Ls,[e("div",qs,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Hs,a(s.selectedUser.name),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Gs,a(s.selectedUser.email),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",Xs,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(s.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",Js,[s.selectedUser.is_admin?(l(),n("span",Ws," Admin ")):b("",!0),s.selectedUser.is_organizer?(l(),n("span",Qs," Organisateur ")):b("",!0),!s.selectedUser.is_admin&&!s.selectedUser.is_organizer?(l(),n("span",Ys," Client ")):b("",!0)])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",Zs,a(s.formatDate(s.selectedUser.created_at)),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",Ks,a(s.selectedUser.email_verified_at?"Oui":"Non"),1)])]),s.selectedUser.is_organizer&&s.selectedUser.organizers_count>0?(l(),n("div",eo,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",to,a(s.selectedUser.organizers_count)+" organisateur(s)",1)])):b("",!0)])):b("",!0)])])):b("",!0)])}const oo=ee(Qt,[["render",so],["__scopeId","data-v-7bf4763f"]]),Q0=Object.freeze(Object.defineProperty({__proto__:null,default:oo},Symbol.toStringTag,{value:"Module"})),ao={name:"OrganizerManagement",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(!1),M=u(!1),o=u(null),r=u(null),p=u(null),P=u([]),h=u([]),w=X({search:"",status:"",verified:""}),O=X({name:"",description:"",contact_email:"",contact_phone:"",website_url:"",status:"active",user_ids:[]}),g=X({user_ids:[]});let T=null;const d=async()=>{x.value=!0;try{const c=new URLSearchParams;w.search&&c.append("search",w.search),w.status&&c.append("status",w.status),w.verified&&c.append("verified",w.verified);const se=await(await fetch(`/api/v1/admin/organizers?${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();se.success&&(P.value=se.data.organizers.data||se.data.organizers)}catch(c){console.error("Erreur chargement organisateurs:",c)}finally{x.value=!1}},C=async()=>{try{const j=await(await fetch("/api/v1/admin/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();j.success&&(h.value=j.data.users.data||j.data.users||[])}catch(c){console.error("Erreur chargement utilisateurs:",c)}},V=()=>{clearTimeout(T),T=setTimeout(()=>{d()},500)},Y=async()=>{o.value=null,Object.assign(O,{name:"",description:"",contact_email:"",contact_phone:"",website_url:"",status:"active",user_ids:[]}),await C(),s.value=!0},z=async c=>{o.value=c,Object.assign(O,{name:c.name,description:c.description||"",contact_email:c.contact_email,contact_phone:c.contact_phone||"",website_url:c.website_url||"",status:c.status,user_ids:c.users?c.users.map(j=>j.id):[]}),await C(),s.value=!0},W=async()=>{t.value=!0;try{const c=o.value?`/api/v1/admin/organizers/${o.value.id}`:"/api/v1/admin/organizers",j=o.value?"PUT":"POST",_=await(await fetch(c,{method:j,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(O)})).json();_.success?(alert(o.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès"),s.value=!1,d()):alert(_.message||"Erreur lors de la sauvegarde")}catch(c){console.error("Erreur sauvegarde organisateur:",c),alert("Erreur technique")}finally{t.value=!1}},G=c=>{r.value=c,v.value=!0},Z=async c=>{p.value=c,g.user_ids=c.users?c.users.map(j=>j.id):[],await C(),M.value=!0},oe=async()=>{f.value=!0;try{const j=await(await fetch(`/api/v1/admin/organizers/${p.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g)})).json();j.success?(alert("Utilisateurs mis à jour avec succès"),M.value=!1,d()):alert(j.message||"Erreur lors de la mise à jour")}catch(c){console.error("Erreur mise à jour utilisateurs:",c),alert("Erreur technique")}finally{f.value=!1}},te=()=>{Object.assign(w,{search:"",status:"",verified:""}),d()},k=c=>new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),B=c=>({active:"Actif",inactive:"Inactif",suspended:"Suspendu"})[c]||c,m=c=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"})[c]||"bg-gray-100 text-gray-800";return ae(()=>{d()}),{loading:x,saving:t,updatingUsers:f,showModal:s,showDetailsModal:v,showUserModal:M,editingOrganizer:o,selectedOrganizer:r,managingOrganizer:p,organizers:P,availableUsers:h,filters:w,organizerForm:O,userManagementForm:g,loadOrganizers:d,loadAvailableUsers:C,debouncedSearch:V,openCreateModal:Y,editOrganizer:z,saveOrganizer:W,viewOrganizerDetails:G,manageUsers:Z,updateOrganizerUsers:oe,resetFilters:te,formatDate:k,getStatusName:B,getStatusBadgeClass:m}}},no={class:"organizer-management p-6 bg-gray-50 min-h-screen"},lo={class:"mb-8"},ro={class:"flex items-center justify-between"},io={class:"bg-white rounded-lg shadow p-6 mb-8"},co={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},mo={class:"flex items-end"},uo={class:"bg-white rounded-lg shadow"},go={key:0,class:"p-8 text-center"},po={key:1,class:"p-8 text-center text-gray-500"},xo={key:2,class:"overflow-x-auto"},bo={class:"w-full"},fo={class:"divide-y divide-gray-200"},yo={class:"px-6 py-4"},vo={class:"flex items-center"},ho={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},_o={class:"ml-4"},wo={class:"text-sm font-medium text-gray-900"},ko={class:"text-sm text-gray-500"},Co={class:"px-6 py-4"},So={class:"text-sm text-gray-900"},jo={class:"text-sm text-gray-500"},Ao={class:"px-6 py-4 text-sm text-gray-900"},Mo={class:"flex flex-wrap gap-1"},Po={key:0,class:"text-gray-500 text-xs"},Oo={class:"px-6 py-4 text-sm text-gray-900"},zo={class:"px-6 py-4 text-sm"},Uo={class:"px-6 py-4 text-sm"},Do={class:"px-6 py-4 text-sm space-x-2"},To=["onClick"],Bo=["onClick"],Eo=["onClick"],Vo={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Fo={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},$o={class:"text-lg font-bold mb-4"},Io={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ro={class:"md:col-span-2"},No={class:"md:col-span-2"},Lo={class:"md:col-span-2"},qo={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},Ho=["value"],Go={class:"ml-2 text-sm"},Xo={key:0,class:"text-sm text-gray-500"},Jo={class:"flex justify-end space-x-3 mt-6"},Wo=["disabled"],Qo={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Yo={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},Zo={class:"flex justify-between items-center mb-4"},Ko={key:0,class:"space-y-4"},ea={class:"grid grid-cols-2 gap-4"},ta={class:"text-sm text-gray-900"},sa={class:"text-sm text-gray-900"},oa={class:"text-sm text-gray-900"},aa={class:"text-sm text-gray-900"},na={class:"text-sm"},la={class:"text-sm"},ra={class:"text-sm text-gray-900"},ia={class:"text-sm text-gray-900"},da={key:0},ca={class:"text-sm text-gray-900"},ma={key:1},ua=["href"],ga={key:2},pa={class:"flex flex-wrap gap-2"},xa={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ba={class:"bg-white rounded-lg p-6 w-full max-w-md"},fa={class:"flex justify-between items-center mb-4"},ya={key:0,class:"space-y-4"},va={class:"font-medium text-gray-900 mb-2"},ha={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},_a={class:"text-sm font-medium"},wa={class:"text-xs text-gray-500 block"},ka=["value"],Ca={class:"flex justify-end space-x-3"},Sa=["disabled"];function ja(x,t,f,s,v,M){return l(),n("div",no,[e("div",lo,[e("div",ro,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),$(" Créer Organisateur ",-1)])])])]),e("div",io,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",co,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],544),[[F,s.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Vérification",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.verified=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Vérifié",-1),e("option",{value:"false"},"Non vérifié",-1)])],544),[[F,s.filters.verified]])]),e("div",mo,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",uo,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),s.loading?(l(),n("div",go,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.organizers.length===0?(l(),n("div",po," Aucun organisateur trouvé ")):(l(),n("div",xo,[e("table",bo,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Vérification"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",fo,[(l(!0),n(U,null,D(s.organizers,o=>(l(),n("tr",{key:o.id},[e("td",yo,[e("div",vo,[e("div",ho,a(o.name.charAt(0).toUpperCase()),1),e("div",_o,[e("div",wo,a(o.name),1),e("div",ko,a(o.slug),1)])])]),e("td",Co,[e("div",So,a(o.contact_email),1),e("div",jo,a(o.contact_phone||"-"),1)]),e("td",Ao,[e("div",Mo,[(l(!0),n(U,null,D(o.users,r=>(l(),n("span",{key:r.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(r.name),1))),128)),o.users.length===0?(l(),n("span",Po," Aucun utilisateur ")):b("",!0)])]),e("td",Oo,a(o.events_count||0),1),e("td",zo,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",Uo,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(o.verified_at?"Vérifié":"En attente"),3)]),e("td",Do,[e("button",{onClick:r=>s.editOrganizer(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,To),e("button",{onClick:r=>s.viewOrganizerDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,Bo),e("button",{onClick:r=>s.manageUsers(o),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,Eo)])]))),128))])])]))]),s.showModal?(l(),n("div",Vo,[e("div",Fo,[e("h3",$o,a(s.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=ne((...o)=>s.saveOrganizer&&s.saveOrganizer(...o),["prevent"]))},[e("div",Io,[e("div",Ro,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.organizerForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.organizerForm.name]])]),e("div",No,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),i(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.organizerForm.description=o),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.organizerForm.description]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.organizerForm.contact_email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.organizerForm.contact_phone=o),type:"tel",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.organizerForm.contact_phone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Site web",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.organizerForm.website_url=o),type:"url",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.organizerForm.website_url]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),i(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.organizerForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[38]||(t[38]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1),e("option",{value:"suspended"},"Suspendu",-1)])],512),[[F,s.organizerForm.status]])]),e("div",Lo,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",qo,[(l(!0),n(U,null,D(s.availableUsers,o=>(l(),n("div",{key:o.id,class:"flex items-center mb-2"},[i(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[14]||(t[14]=r=>s.organizerForm.user_ids=r),class:"rounded border-gray-300"},null,8,Ho),[[Q,s.organizerForm.user_ids]]),e("span",Go,a(o.name)+" ("+a(o.email)+")",1)]))),128)),s.availableUsers.length===0?(l(),n("div",Xo," Aucun utilisateur disponible ")):b("",!0)])])]),e("div",Jo,[e("button",{type:"button",onClick:t[15]||(t[15]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingOrganizer?"Mettre à jour":"Créer"),9,Wo)])],32)])])):b("",!0),s.showDetailsModal?(l(),n("div",Qo,[e("div",Yo,[e("div",Zo,[t[42]||(t[42]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[41]||(t[41]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrganizer?(l(),n("div",Ko,[e("div",ea,[e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",ta,a(s.selectedOrganizer.name),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",sa,a(s.selectedOrganizer.slug),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",oa,a(s.selectedOrganizer.contact_email),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",aa,a(s.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",na,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrganizer.status)])},a(s.getStatusName(s.selectedOrganizer.status)),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Vérification",-1)),e("p",la,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedOrganizer.verified_at?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},a(s.selectedOrganizer.verified_at?"Vérifié":"En attente"),3)])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",ra,a(s.formatDate(s.selectedOrganizer.created_at)),1)]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",ia,a(s.selectedOrganizer.events_count||0)+" événement(s)",1)])]),s.selectedOrganizer.description?(l(),n("div",da,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",ca,a(s.selectedOrganizer.description),1)])):b("",!0),s.selectedOrganizer.website_url?(l(),n("div",ma,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Site web",-1)),e("a",{href:s.selectedOrganizer.website_url,target:"_blank",class:"text-sm text-blue-600 hover:text-blue-800"},a(s.selectedOrganizer.website_url),9,ua)])):b("",!0),s.selectedOrganizer.users&&s.selectedOrganizer.users.length>0?(l(),n("div",ga,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",pa,[(l(!0),n(U,null,D(s.selectedOrganizer.users,o=>(l(),n("span",{key:o.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},a(o.name),1))),128))])])):b("",!0)])):b("",!0)])])):b("",!0),s.showUserModal?(l(),n("div",xa,[e("div",ba,[e("div",fa,[t[55]||(t[55]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[54]||(t[54]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.managingOrganizer?(l(),n("div",ya,[e("div",null,[e("h4",va,a(s.managingOrganizer.name),1),t[56]||(t[56]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",ha,[(l(!0),n(U,null,D(s.availableUsers,o=>(l(),n("div",{key:o.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",_a,a(o.name),1),e("span",wa,a(o.email),1)]),i(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[19]||(t[19]=r=>s.userManagementForm.user_ids=r),class:"rounded border-gray-300"},null,8,ka),[[Q,s.userManagementForm.user_ids]])]))),128))]),e("div",Ca,[e("button",{onClick:t[20]||(t[20]=o=>s.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...o)=>s.updateOrganizerUsers&&s.updateOrganizerUsers(...o)),disabled:s.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.updatingUsers?"Mise à jour...":"Mettre à jour"),9,Sa)])])):b("",!0)])])):b("",!0)])}const Aa=ee(ao,[["render",ja],["__scopeId","data-v-5e090290"]]),Y0=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"})),Ma={name:"EventManagement",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(null),M=u(null),o=u([]),r=u([]),p=u([]),P=u([]),h=u(null),w=X({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),O=X({search:"",status:"",organizer_id:"",category_id:"",page:1}),g=X({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",schedules:[],ticket_types:[]});let T=null;const d=async()=>{x.value=!0;try{const y=new URLSearchParams;Object.keys(O).forEach(H=>{O[H]&&O[H]!==""&&y.append(H,O[H])});const q=await(await fetch(`/api/v1/admin/events?${y}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(q.success){o.value=q.data.events.data,h.value={current_page:q.data.events.current_page,last_page:q.data.events.last_page,from:q.data.events.from,to:q.data.events.to,total:q.data.events.total};const H=q.data.events.data;w.total_events=h.value.total,w.published_events=H.filter(le=>le.status==="published").length,w.draft_events=H.filter(le=>le.status==="draft").length,w.total_tickets_sold=H.reduce((le,be)=>le+(be.tickets_sold||0),0)}}catch(y){console.error("Erreur chargement événements:",y)}finally{x.value=!1}},C=async()=>{try{const N=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();N.success&&(r.value=N.data.organizers.data||N.data.organizers)}catch(y){console.error("Erreur chargement organisateurs:",y)}},V=async()=>{try{const N=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();N.success&&(p.value=N.data)}catch(y){console.error("Erreur chargement catégories:",y)}},Y=async()=>{try{const N=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();N.success&&(P.value=N.data)}catch(y){console.error("Erreur chargement lieux:",y)}},z=()=>{clearTimeout(T),T=setTimeout(()=>{O.page=1,d()},500)},W=y=>{y>=1&&y<=h.value.last_page&&(O.page=y,d())},G=()=>{Object.assign(O,{search:"",status:"",organizer_id:"",category_id:"",page:1}),d()},Z=()=>{v.value=null,Object.assign(g,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),f.value=!0},oe=async y=>{try{const q=await(await fetch(`/api/v1/admin/events/${y.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();q.success&&(v.value=q.data.event,Object.assign(g,{title:q.data.event.title,description:q.data.event.description,organizer_id:q.data.event.organizer_id,category_id:q.data.event.category_id,venue_id:q.data.event.venue_id,status:q.data.event.status,schedules:q.data.event.schedules?.map(H=>({starts_at:H.starts_at?H.starts_at.slice(0,16):"",ends_at:H.ends_at?H.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:q.data.event.ticketTypes?.map(H=>({name:H.name,price:H.price,capacity:H.capacity,description:H.description||""}))||[{name:"",price:0,capacity:0,description:""}]}),f.value=!0)}catch(N){console.error("Erreur chargement événement:",N)}},te=async()=>{t.value=!0;try{const y=v.value?`/api/v1/admin/events/${v.value.id}`:"/api/v1/admin/events",N=v.value?"PUT":"POST",H=await(await fetch(y,{method:N,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g)})).json();H.success?(alert(v.value?"Événement mis à jour avec succès":"Événement créé avec succès"),f.value=!1,d()):alert(H.message||"Erreur lors de la sauvegarde")}catch(y){console.error("Erreur sauvegarde événement:",y),alert("Erreur technique")}finally{t.value=!1}},k=async y=>{try{const q=await(await fetch(`/api/v1/admin/events/${y.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();q.success&&(M.value=q.data.event,s.value=!0)}catch(N){console.error("Erreur chargement détails événement:",N)}},B=y=>{v.value=null,Object.assign(g,{title:`${y.title} (Copie)`,description:y.description,organizer_id:y.organizer_id,category_id:y.category_id,venue_id:y.venue_id,status:"draft",schedules:[{starts_at:"",ends_at:""}],ticket_types:y.ticketTypes?.map(N=>({name:N.name,price:N.price,capacity:N.capacity,description:N.description||""}))||[{name:"",price:0,capacity:0,description:""}]}),f.value=!0},m=()=>{g.schedules.push({starts_at:"",ends_at:""})},c=y=>{g.schedules.splice(y,1)},j=()=>{g.ticket_types.push({name:"",price:0,capacity:0,description:""})},se=y=>{g.ticket_types.splice(y,1)},_=y=>new Intl.NumberFormat("fr-FR").format(y),I=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),E=y=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[y]||y,K=y=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[y]||"bg-gray-100 text-gray-800";return ae(()=>{d(),C(),V(),Y()}),{loading:x,saving:t,showModal:f,showDetailsModal:s,editingEvent:v,selectedEvent:M,events:o,organizers:r,categories:p,venues:P,pagination:h,stats:w,filters:O,eventForm:g,loadEvents:d,loadOrganizers:C,loadCategories:V,loadVenues:Y,debouncedSearch:z,changePage:W,resetFilters:G,openCreateModal:Z,editEvent:oe,saveEvent:te,viewEventDetails:k,duplicateEvent:B,addSchedule:m,removeSchedule:c,addTicketType:j,removeTicketType:se,formatAmount:_,formatDateTime:I,getStatusName:E,getStatusBadgeClass:K}}},Pa={class:"event-management p-6 bg-gray-50 min-h-screen"},Oa={class:"mb-8"},za={class:"flex items-center justify-between"},Ua={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Da={class:"bg-white rounded-lg shadow p-6"},Ta={class:"flex items-center"},Ba={class:"ml-4"},Ea={class:"text-2xl font-bold text-blue-600"},Va={class:"bg-white rounded-lg shadow p-6"},Fa={class:"flex items-center"},$a={class:"ml-4"},Ia={class:"text-2xl font-bold text-green-600"},Ra={class:"bg-white rounded-lg shadow p-6"},Na={class:"flex items-center"},La={class:"ml-4"},qa={class:"text-2xl font-bold text-yellow-600"},Ha={class:"bg-white rounded-lg shadow p-6"},Ga={class:"flex items-center"},Xa={class:"ml-4"},Ja={class:"text-2xl font-bold text-purple-600"},Wa={class:"bg-white rounded-lg shadow p-6 mb-8"},Qa={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Ya=["value"],Za=["value"],Ka={class:"flex items-end"},en={class:"bg-white rounded-lg shadow"},tn={key:0,class:"p-8 text-center"},sn={key:1,class:"p-8 text-center text-gray-500"},on={key:2,class:"overflow-x-auto"},an={class:"w-full"},nn={class:"divide-y divide-gray-200"},ln={class:"px-6 py-4"},rn={class:"flex items-center"},dn={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},cn={class:"ml-4"},mn={class:"text-sm font-medium text-gray-900"},un={class:"text-sm text-gray-500"},gn={class:"px-6 py-4 text-sm text-gray-900"},pn={class:"px-6 py-4 text-sm text-gray-900"},xn={class:"px-6 py-4 text-sm text-gray-900"},bn={class:"px-6 py-4 text-sm text-gray-900"},fn={class:"space-y-1"},yn={class:"text-gray-500"},vn={class:"px-6 py-4 text-sm"},hn={class:"px-6 py-4 text-sm space-x-2"},_n=["onClick"],wn=["onClick"],kn=["onClick"],Cn={key:3,class:"p-6 border-t"},Sn={class:"flex justify-between items-center"},jn={class:"text-sm text-gray-700"},An={class:"flex space-x-2"},Mn=["disabled"],Pn={class:"px-3 py-1 text-sm text-gray-600"},On=["disabled"],zn={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Un={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Dn={class:"text-lg font-bold mb-4"},Tn={class:"space-y-6"},Bn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},En={class:"md:col-span-2"},Vn={class:"md:col-span-2"},Fn=["value"],$n=["value"],In=["value"],Rn={class:"space-y-3"},Nn=["onUpdate:modelValue"],Ln=["onUpdate:modelValue"],qn={class:"flex items-end"},Hn=["onClick"],Gn={class:"space-y-3"},Xn=["onUpdate:modelValue"],Jn=["onUpdate:modelValue"],Wn=["onUpdate:modelValue"],Qn=["onUpdate:modelValue"],Yn={class:"flex items-end"},Zn=["onClick"],Kn={class:"flex justify-end space-x-3 mt-6"},el=["disabled"],tl={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},sl={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},ol={class:"flex justify-between items-center mb-4"},al={key:0,class:"space-y-6"},nl={class:"grid grid-cols-2 gap-6"},ll={class:"text-sm font-medium text-gray-900"},rl={class:"text-sm text-gray-900"},il={class:"text-sm text-gray-900"},dl={class:"text-sm text-gray-900"},cl={class:"text-sm text-gray-900"},ml={class:"text-sm text-gray-900"},ul={key:0},gl={class:"space-y-2"},pl={class:"text-sm"},xl={key:1},bl={class:"overflow-x-auto"},fl={class:"w-full text-sm"},yl={class:"divide-y divide-gray-200"},vl={class:"px-4 py-2 font-medium"},hl={class:"px-4 py-2"},_l={class:"px-4 py-2"},wl={class:"px-4 py-2"},kl={class:"px-4 py-2"};function Cl(x,t,f,s,v,M){return l(),n("div",Pa,[e("div",Oa,[e("div",za,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),$(" Créer Événement ",-1)])])])]),e("div",Ua,[e("div",Da,[e("div",Ta,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",Ba,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",Ea,a(s.stats.total_events||0),1)])])]),e("div",Va,[e("div",Fa,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",$a,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",Ia,a(s.stats.published_events||0),1)])])]),e("div",Ra,[e("div",Na,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",La,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",qa,a(s.stats.draft_events||0),1)])])]),e("div",Ha,[e("div",Ga,[t[32]||(t[32]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",Xa,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",Ja,a(s.stats.total_tickets_sold||0),1)])])])]),e("div",Wa,[t[40]||(t[40]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Qa,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.search]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[34]||(t[34]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[F,s.filters.status]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[36]||(t[36]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),n(U,null,D(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Ya))),128))],544),[[F,s.filters.organizer_id]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.category_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadEvents&&s.loadEvents(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Toutes les catégories",-1)),(l(!0),n(U,null,D(s.categories,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Za))),128))],544),[[F,s.filters.category_id]])]),e("div",Ka,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",en,[t[43]||(t[43]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),s.loading?(l(),n("div",tn,[...t[41]||(t[41]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.events.length===0?(l(),n("div",sn," Aucun événement trouvé ")):(l(),n("div",on,[e("table",an,[t[42]||(t[42]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",nn,[(l(!0),n(U,null,D(s.events,o=>(l(),n("tr",{key:o.id},[e("td",ln,[e("div",rn,[e("div",dn,a(o.title.charAt(0).toUpperCase()),1),e("div",cn,[e("div",mn,a(o.title),1),e("div",un,a(o.slug),1)])])]),e("td",gn,a(o.organizer?.name||"-"),1),e("td",pn,a(o.category?.name||"-"),1),e("td",xn,a(o.schedules?.[0]?s.formatDateTime(o.schedules[0].starts_at):"Non programmé"),1),e("td",bn,[e("div",fn,[e("div",null,"Vendus: "+a(o.tickets_sold||0),1),e("div",yn,"Total: "+a(o.total_capacity||0),1)])]),e("td",vn,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",hn,[e("button",{onClick:r=>s.editEvent(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,_n),e("button",{onClick:r=>s.viewEventDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,wn),e("button",{onClick:r=>s.duplicateEvent(o),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,kn)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),n("div",Cn,[e("div",Sn,[e("div",jn," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" événements ",1),e("div",An,[e("button",{onClick:t[10]||(t[10]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Mn),e("span",Pn," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,On)])])])):b("",!0)]),s.showModal?(l(),n("div",zn,[e("div",Un,[e("h3",Dn,a(s.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[21]||(t[21]=ne((...o)=>s.saveEvent&&s.saveEvent(...o),["prevent"]))},[e("div",Tn,[e("div",Bn,[e("div",En,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.eventForm.title=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.eventForm.title]])]),e("div",Vn,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),i(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.eventForm.description=o),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.eventForm.description]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),i(e("select",{"onUpdate:modelValue":t[14]||(t[14]=o=>s.eventForm.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[46]||(t[46]=e("option",{value:""},"Sélectionner un organisateur",-1)),(l(!0),n(U,null,D(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Fn))),128))],512),[[F,s.eventForm.organizer_id]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),i(e("select",{"onUpdate:modelValue":t[15]||(t[15]=o=>s.eventForm.category_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[48]||(t[48]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),n(U,null,D(s.categories,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,$n))),128))],512),[[F,s.eventForm.category_id]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),i(e("select",{"onUpdate:modelValue":t[16]||(t[16]=o=>s.eventForm.venue_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[50]||(t[50]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),n(U,null,D(s.venues,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name)+" - "+a(o.city),9,In))),128))],512),[[F,s.eventForm.venue_id]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),i(e("select",{"onUpdate:modelValue":t[17]||(t[17]=o=>s.eventForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[52]||(t[52]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[F,s.eventForm.status]])])]),e("div",null,[t[56]||(t[56]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",Rn,[(l(!0),n(U,null,D(s.eventForm.schedules,(o,r)=>(l(),n("div",{key:r,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),i(e("input",{"onUpdate:modelValue":p=>o.starts_at=p,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Nn),[[A,o.starts_at]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),i(e("input",{"onUpdate:modelValue":p=>o.ends_at=p,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Ln),[[A,o.ends_at]])]),e("div",qn,[e("button",{type:"button",onClick:p=>s.removeSchedule(r),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,Hn)])]))),128)),e("button",{type:"button",onClick:t[18]||(t[18]=(...o)=>s.addSchedule&&s.addSchedule(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",Gn,[(l(!0),n(U,null,D(s.eventForm.ticket_types,(o,r)=>(l(),n("div",{key:r,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":p=>o.name=p,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Xn),[[A,o.name]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),i(e("input",{"onUpdate:modelValue":p=>o.price=p,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Jn),[[A,o.price,void 0,{number:!0}]])]),e("div",null,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),i(e("input",{"onUpdate:modelValue":p=>o.capacity=p,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Wn),[[A,o.capacity,void 0,{number:!0}]])]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),i(e("input",{"onUpdate:modelValue":p=>o.description=p,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,Qn),[[A,o.description]])]),e("div",Yn,[e("button",{type:"button",onClick:p=>s.removeTicketType(r),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,Zn)])]))),128)),e("button",{type:"button",onClick:t[19]||(t[19]=(...o)=>s.addTicketType&&s.addTicketType(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",Kn,[e("button",{type:"button",onClick:t[20]||(t[20]=o=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.saving?"Enregistrement...":s.editingEvent?"Mettre à jour":"Créer"),9,el)])],32)])])):b("",!0),s.showDetailsModal?(l(),n("div",tl,[e("div",sl,[e("div",ol,[t[63]||(t[63]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[22]||(t[22]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[62]||(t[62]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedEvent?(l(),n("div",al,[e("div",nl,[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",ll,a(s.selectedEvent.title),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedEvent.status)])},a(s.getStatusName(s.selectedEvent.status)),3)]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",rl,a(s.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",il,a(s.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",dl,a(s.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",cl,a(s.formatDateTime(s.selectedEvent.created_at)),1)])]),e("div",null,[t[70]||(t[70]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",ml,a(s.selectedEvent.description),1)]),s.selectedEvent.schedules&&s.selectedEvent.schedules.length>0?(l(),n("div",ul,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",gl,[(l(!0),n(U,null,D(s.selectedEvent.schedules,o=>(l(),n("div",{key:o.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",pl,"Du "+a(s.formatDateTime(o.starts_at))+" au "+a(s.formatDateTime(o.ends_at)),1)]))),128))])])):b("",!0),s.selectedEvent.ticketTypes&&s.selectedEvent.ticketTypes.length>0?(l(),n("div",xl,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",bl,[e("table",fl,[t[72]||(t[72]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Nom"),e("th",{class:"px-4 py-2 text-left"},"Prix"),e("th",{class:"px-4 py-2 text-left"},"Capacité"),e("th",{class:"px-4 py-2 text-left"},"Vendus"),e("th",{class:"px-4 py-2 text-left"},"Description")])],-1)),e("tbody",yl,[(l(!0),n(U,null,D(s.selectedEvent.ticketTypes,o=>(l(),n("tr",{key:o.id},[e("td",vl,a(o.name),1),e("td",hl,a(s.formatAmount(o.price))+" XAF",1),e("td",_l,a(o.capacity),1),e("td",wl,a(o.sold||0),1),e("td",kl,a(o.description||"-"),1)]))),128))])])])])):b("",!0)])):b("",!0)])])):b("",!0)])}const Sl=ee(Ma,[["render",Cl],["__scopeId","data-v-f6213ad5"]]),Z0=Object.freeze(Object.defineProperty({__proto__:null,default:Sl},Symbol.toStringTag,{value:"Module"})),jl={name:"OrderManagement",setup(){const x=u(!1),t=u(!1),f=u(null),s=u([]),v=u([]),M=u([]),o=u(null),r=X({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),p=X({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let P=null;const h=async()=>{x.value=!0;try{const k=new URLSearchParams;Object.keys(p).forEach(c=>{p[c]&&p[c]!==""&&k.append(c,p[c])});const m=await(await fetch(`/api/v1/admin/orders?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(m.success){s.value=m.data.orders.data,o.value={current_page:m.data.orders.current_page,last_page:m.data.orders.last_page,from:m.data.orders.from,to:m.data.orders.to,total:m.data.orders.total};const c=m.data.orders.data;r.total_orders=o.value.total,r.confirmed_orders=c.filter(j=>j.status==="confirmed").length,r.pending_orders=c.filter(j=>j.status==="pending").length,r.total_revenue=c.filter(j=>j.status==="confirmed").reduce((j,se)=>j+se.total_amount,0)}}catch(k){console.error("Erreur chargement commandes:",k)}finally{x.value=!1}},w=async()=>{try{const B=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();B.success&&(v.value=B.data.organizers.data||B.data.organizers)}catch(k){console.error("Erreur chargement organisateurs:",k)}},O=async()=>{try{const B=await(await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();B.success&&(M.value=B.data.events.data||B.data.events)}catch(k){console.error("Erreur chargement événements:",k)}},g=()=>{clearTimeout(P),P=setTimeout(()=>{p.page=1,h()},500)},T=k=>{k>=1&&k<=o.value.last_page&&(p.page=k,h())},d=()=>{Object.assign(p,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),h()},C=async k=>{try{const m=await(await fetch(`/api/v1/admin/orders/${k.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();m.success&&(f.value=m.data.order,t.value=!0)}catch(B){console.error("Erreur chargement détails commande:",B)}},V=async(k,B)=>{if(confirm(`Êtes-vous sûr de vouloir ${B==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const c=await(await fetch(`/api/v1/admin/orders/${k.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:B})})).json();c.success?(alert(`Commande ${B==="confirmed"?"confirmée":"annulée"} avec succès`),h(),t.value&&(f.value.status=B)):alert(c.message||"Erreur lors de la mise à jour")}catch(m){console.error("Erreur mise à jour statut commande:",m),alert("Erreur technique")}},Y=async()=>{try{const k=new URLSearchParams;Object.keys(p).forEach(m=>{p[m]&&p[m]!==""&&m!=="page"&&k.append(m,p[m])});const B=await fetch(`/api/v1/admin/orders/export?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(B.ok){const m=await B.blob(),c=window.URL.createObjectURL(m),j=document.createElement("a");j.href=c,j.download=`commandes-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(j),j.click(),window.URL.revokeObjectURL(c),document.body.removeChild(j)}}catch(k){console.error("Erreur export:",k),alert("Erreur lors de l'export des données")}},z=k=>new Intl.NumberFormat("fr-FR").format(k),W=k=>new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),G=k=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[k]||k,Z=k=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[k]||"bg-gray-100 text-gray-800",oe=k=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[k]||k,te=k=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800";return ae(()=>{h(),w(),O()}),{loading:x,showDetailsModal:t,selectedOrder:f,orders:s,organizers:v,events:M,pagination:o,stats:r,filters:p,loadOrders:h,loadOrganizers:w,loadEvents:O,debouncedSearch:g,changePage:T,resetFilters:d,viewOrderDetails:C,updateOrderStatus:V,exportOrders:Y,formatAmount:z,formatDateTime:W,getStatusName:G,getStatusBadgeClass:Z,getTicketStatusName:oe,getTicketStatusClass:te}}},Al={class:"order-management p-6 bg-gray-50 min-h-screen"},Ml={class:"mb-8"},Pl={class:"flex items-center justify-between"},Ol={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},zl={class:"bg-white rounded-lg shadow p-6"},Ul={class:"flex items-center"},Dl={class:"ml-4"},Tl={class:"text-2xl font-bold text-blue-600"},Bl={class:"bg-white rounded-lg shadow p-6"},El={class:"flex items-center"},Vl={class:"ml-4"},Fl={class:"text-2xl font-bold text-green-600"},$l={class:"bg-white rounded-lg shadow p-6"},Il={class:"flex items-center"},Rl={class:"ml-4"},Nl={class:"text-2xl font-bold text-yellow-600"},Ll={class:"bg-white rounded-lg shadow p-6"},ql={class:"flex items-center"},Hl={class:"ml-4"},Gl={class:"text-2xl font-bold text-purple-600"},Xl={class:"bg-white rounded-lg shadow p-6 mb-8"},Jl={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Wl=["value"],Ql=["value"],Yl={class:"flex justify-between items-center mt-4"},Zl={class:"text-sm text-gray-600"},Kl={class:"bg-white rounded-lg shadow"},er={key:0,class:"p-8 text-center"},tr={key:1,class:"p-8 text-center text-gray-500"},sr={key:2,class:"overflow-x-auto"},or={class:"w-full"},ar={class:"divide-y divide-gray-200"},nr={class:"px-6 py-4 text-sm font-mono text-blue-600"},lr=["onClick"],rr={class:"px-6 py-4 text-sm text-gray-900"},ir={class:"font-medium"},dr={class:"text-gray-500"},cr={class:"px-6 py-4 text-sm text-gray-900"},mr={class:"font-medium"},ur={class:"text-gray-500"},gr={class:"px-6 py-4 text-sm text-gray-900"},pr={class:"space-y-1"},xr={class:"px-6 py-4 text-sm font-medium text-gray-900"},br={class:"px-6 py-4 text-sm"},fr={class:"px-6 py-4 text-sm text-gray-500"},yr={class:"px-6 py-4 text-sm space-x-2"},vr=["onClick"],hr=["onClick"],_r=["onClick"],wr={key:3,class:"p-6 border-t"},kr={class:"flex justify-between items-center"},Cr={class:"text-sm text-gray-700"},Sr={class:"flex space-x-2"},jr=["disabled"],Ar={class:"px-3 py-1 text-sm text-gray-600"},Mr=["disabled"],Pr={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Or={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},zr={class:"flex justify-between items-center mb-4"},Ur={key:0,class:"space-y-6"},Dr={class:"grid grid-cols-2 gap-6"},Tr={class:"space-y-4"},Br={class:"space-y-2"},Er={class:"text-sm font-mono text-gray-900"},Vr={class:"text-sm text-gray-900"},Fr={key:0},$r={class:"text-sm text-gray-900"},Ir={class:"space-y-4"},Rr={class:"space-y-2"},Nr={class:"text-sm text-gray-900"},Lr={class:"text-sm text-gray-900"},qr={key:0},Hr={class:"text-sm text-gray-900"},Gr={key:0,class:"border-t pt-6"},Xr={class:"grid grid-cols-2 gap-4"},Jr={class:"text-sm text-gray-900"},Wr={class:"text-sm text-gray-900"},Qr={class:"text-sm text-gray-900"},Yr={class:"text-sm text-gray-900"},Zr={class:"border-t pt-6"},Kr={class:"overflow-x-auto"},ei={class:"w-full text-sm"},ti={class:"divide-y divide-gray-200"},si={class:"px-4 py-2"},oi={class:"px-4 py-2"},ai={class:"px-4 py-2"},ni={class:"px-4 py-2 font-medium"},li={class:"bg-gray-50"},ri={class:"px-4 py-2 font-bold"},ii={key:1,class:"border-t pt-6"},di={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},ci={class:"flex justify-between items-start mb-2"},mi={class:"font-mono text-blue-600"},ui={class:"text-gray-600"},gi={key:0},pi={class:"border-t pt-6 flex justify-end space-x-3"};function xi(x,t,f,s,v,M){return l(),n("div",Al,[e("div",Ml,[e("div",Pl,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Commandes"),e("p",{class:"text-gray-600"},"Gérer et suivre toutes les commandes de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.exportOrders&&s.exportOrders(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),$(" Exporter ",-1)])])])]),e("div",Ol,[e("div",zl,[e("div",Ul,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Dl,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Commandes",-1)),e("p",Tl,a(s.stats.total_orders||0),1)])])]),e("div",Bl,[e("div",El,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Vl,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",Fl,a(s.stats.confirmed_orders||0),1)])])]),e("div",$l,[e("div",Il,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Rl,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",Nl,a(s.stats.pending_orders||0),1)])])]),e("div",Ll,[e("div",ql,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Hl,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",Gl,a(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])])]),e("div",Xl,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Jl,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[re('<option value="" data-v-e0d05b6e>Tous les statuts</option><option value="pending" data-v-e0d05b6e>En attente</option><option value="confirmed" data-v-e0d05b6e>Confirmée</option><option value="cancelled" data-v-e0d05b6e>Annulée</option><option value="refunded" data-v-e0d05b6e>Remboursée</option>',5)])],544),[[F,s.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),n(U,null,D(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,Wl))),128))],544),[[F,s.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.event_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(l(!0),n(U,null,D(s.events,o=>(l(),n("option",{key:o.id,value:o.id},a(o.title),9,Ql))),128))],544),[[F,s.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.filters.date_from=o),onChange:t[10]||(t[10]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filters.date_to=o),onChange:t[12]||(t[12]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.date_to]])])]),e("div",Yl,[e("button",{onClick:t[13]||(t[13]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Zl,a(s.pagination?`${s.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",Kl,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Commandes")],-1)),s.loading?(l(),n("div",er,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.orders.length===0?(l(),n("div",tr," Aucune commande trouvée ")):(l(),n("div",sr,[e("table",or,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",ar,[(l(!0),n(U,null,D(s.orders,o=>(l(),n("tr",{key:o.id},[e("td",nr,[e("button",{onClick:r=>s.viewOrderDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,lr)]),e("td",rr,[e("div",null,[e("div",ir,a(o.customer_name),1),e("div",dr,a(o.customer_email),1)])]),e("td",cr,[e("div",null,[e("div",mr,a(o.event?.title||"-"),1),e("div",ur,a(o.event?.organizer?.name||"-"),1)])]),e("td",gr,[e("div",pr,[(l(!0),n(U,null,D(o.items,r=>(l(),n("div",{key:r.id,class:"text-xs"},a(r.quantity)+"x "+a(r.ticket_type_name),1))),128))])]),e("td",xr,a(s.formatAmount(o.total_amount))+" XAF",1),e("td",br,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",fr,a(s.formatDateTime(o.created_at)),1),e("td",yr,[e("button",{onClick:r=>s.viewOrderDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,vr),o.status==="pending"?(l(),n("button",{key:0,onClick:r=>s.updateOrderStatus(o,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,hr)):b("",!0),["pending","confirmed"].includes(o.status)?(l(),n("button",{key:1,onClick:r=>s.updateOrderStatus(o,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,_r)):b("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),n("div",wr,[e("div",kr,[e("div",Cr," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" commandes ",1),e("div",Sr,[e("button",{onClick:t[14]||(t[14]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,jr),e("span",Ar," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Mr)])])])):b("",!0)]),s.showDetailsModal?(l(),n("div",Pr,[e("div",Or,[e("div",zr,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrder?(l(),n("div",Ur,[e("div",Dr,[e("div",Tr,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",Br,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Er,"#"+a(s.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrder.status)])},a(s.getStatusName(s.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Vr,a(s.formatDateTime(s.selectedOrder.created_at)),1)]),s.selectedOrder.confirmed_at?(l(),n("div",Fr,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",$r,a(s.formatDateTime(s.selectedOrder.confirmed_at)),1)])):b("",!0)])])]),e("div",Ir,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",Rr,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",Nr,a(s.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Lr,a(s.selectedOrder.customer_email),1)]),s.selectedOrder.customer_phone?(l(),n("div",qr,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",Hr,a(s.selectedOrder.customer_phone),1)])):b("",!0)])])])]),s.selectedOrder.event?(l(),n("div",Gr,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",Xr,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Jr,a(s.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Wr,a(s.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",Qr,a(s.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",Yr,a(s.selectedOrder.event.schedules?.[0]?s.formatDateTime(s.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):b("",!0),e("div",Zr,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",Kr,[e("table",ei,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",ti,[(l(!0),n(U,null,D(s.selectedOrder.items,o=>(l(),n("tr",{key:o.id},[e("td",si,a(o.ticket_type_name),1),e("td",oi,a(s.formatAmount(o.unit_price))+" XAF",1),e("td",ai,a(o.quantity),1),e("td",ni,a(s.formatAmount(o.total_price))+" XAF",1)]))),128))]),e("tfoot",li,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",ri,a(s.formatAmount(s.selectedOrder.total_amount))+" XAF",1)])])])])]),s.selectedOrder.tickets&&s.selectedOrder.tickets.length>0?(l(),n("div",ii,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",di,[(l(!0),n(U,null,D(s.selectedOrder.tickets,o=>(l(),n("div",{key:o.id,class:"border rounded-lg p-3 text-sm"},[e("div",ci,[e("span",mi,a(o.code),1),e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getTicketStatusClass(o.status)])},a(s.getTicketStatusName(o.status)),3)]),e("div",ui,[e("p",null,a(o.ticketType?.name),1),o.used_at?(l(),n("p",gi,"Utilisé: "+a(s.formatDateTime(o.used_at)),1)):b("",!0)])]))),128))])])):b("",!0),e("div",pi,[s.selectedOrder.status==="pending"?(l(),n("button",{key:0,onClick:t[17]||(t[17]=o=>s.updateOrderStatus(s.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):b("",!0),["pending","confirmed"].includes(s.selectedOrder.status)?(l(),n("button",{key:1,onClick:t[18]||(t[18]=o=>s.updateOrderStatus(s.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):b("",!0),e("button",{onClick:t[19]||(t[19]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):b("",!0)])])):b("",!0)])}const bi=ee(jl,[["render",xi],["__scopeId","data-v-e0d05b6e"]]),K0=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"})),fi={name:"PaymentTracking",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(null),v=u([]),M=u([]),o=u(null),r=X({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),p=u([]),P=u([]),h=X({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let w=null;const O=xe(()=>P.value.length===0?1:Math.max(...P.value.map(_=>_.volume))),g=async()=>{x.value=!0;try{const _=new URLSearchParams;Object.keys(h).forEach(K=>{h[K]&&h[K]!==""&&_.append(K,h[K])});const E=await(await fetch(`/api/v1/admin/payments?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success&&(v.value=E.data.payments.data,o.value={current_page:E.data.payments.current_page,last_page:E.data.payments.last_page,from:E.data.payments.from,to:E.data.payments.to,total:E.data.payments.total},Object.assign(r,E.data.stats),p.value=E.data.gateway_stats||[],P.value=E.data.daily_stats||[])}catch(_){console.error("Erreur chargement paiements:",_)}finally{x.value=!1}},T=async()=>{try{const I=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();I.success&&(M.value=I.data.organizers.data||I.data.organizers)}catch(_){console.error("Erreur chargement organisateurs:",_)}},d=()=>{clearTimeout(w),w=setTimeout(()=>{h.page=1,g()},500)},C=_=>{_>=1&&_<=o.value.last_page&&(h.page=_,g())},V=()=>{Object.assign(h,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),g()},Y=()=>{g()},z=async _=>{try{const E=await(await fetch(`/api/v1/admin/payments/${_.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success&&(s.value=E.data.payment,f.value=!0)}catch(I){console.error("Erreur chargement détails paiement:",I)}},W=async _=>{try{const E=await(await fetch(`/api/v1/admin/payments/${_.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();E.success?(alert(`Statut mis à jour: ${j(E.data.status)}`),g(),f.value&&(s.value.status=E.data.status)):alert(E.message||"Erreur lors de la vérification")}catch(I){console.error("Erreur vérification statut:",I),alert("Erreur technique")}},G=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const I=await(await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();I.success?(alert(`Vérification terminée. ${I.data.updated_count} paiement(s) mis à jour.`),g()):alert(I.message||"Erreur lors de la vérification")}catch(_){console.error("Erreur vérification paiements en attente:",_),alert("Erreur technique")}finally{t.value=!1}}},Z=async _=>{const I=prompt("Raison du remboursement:");if(I&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${te(_.amount)} XAF ?`))try{const K=await(await fetch(`/api/v1/admin/payments/${_.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:I})})).json();K.success?(alert("Remboursement initié avec succès"),g()):alert(K.message||"Erreur lors du remboursement")}catch(E){console.error("Erreur remboursement:",E),alert("Erreur technique")}},oe=async()=>{try{const _=new URLSearchParams;Object.keys(h).forEach(E=>{h[E]&&h[E]!==""&&E!=="page"&&_.append(E,h[E])});const I=await fetch(`/api/v1/admin/payments/export?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(I.ok){const E=await I.blob(),K=window.URL.createObjectURL(E),y=document.createElement("a");y.href=K,y.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(y),y.click(),window.URL.revokeObjectURL(K),document.body.removeChild(y)}}catch(_){console.error("Erreur export:",_),alert("Erreur lors de l'export des données")}},te=_=>new Intl.NumberFormat("fr-FR").format(_),k=_=>new Date(_).toLocaleDateString("fr-FR"),B=_=>new Date(_).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),m=_=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[_]||_,c=_=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[_]||"bg-gray-100 text-gray-800",j=_=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[_]||_,se=_=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[_]||"bg-gray-100 text-gray-800";return ae(()=>{g(),T()}),{loading:x,checkingPayments:t,showDetailsModal:f,selectedPayment:s,payments:v,organizers:M,pagination:o,stats:r,gatewayStats:p,dailyStats:P,filters:h,maxDailyVolume:O,loadPayments:g,loadOrganizers:T,debouncedSearch:d,changePage:C,resetFilters:V,refreshPayments:Y,viewPaymentDetails:z,checkPaymentStatus:W,checkPendingPayments:G,processRefund:Z,exportPayments:oe,formatAmount:te,formatDate:k,formatDateTime:B,getGatewayName:m,getGatewayBadgeClass:c,getStatusName:j,getStatusBadgeClass:se}}},yi={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},vi={class:"mb-8"},hi={class:"flex items-center justify-between"},_i={class:"flex space-x-3"},wi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},ki={class:"bg-white rounded-lg shadow p-6"},Ci={class:"flex items-center"},Si={class:"ml-4"},ji={class:"text-2xl font-bold text-blue-600"},Ai={class:"bg-white rounded-lg shadow p-6"},Mi={class:"flex items-center"},Pi={class:"ml-4"},Oi={class:"text-2xl font-bold text-green-600"},zi={class:"bg-white rounded-lg shadow p-6"},Ui={class:"flex items-center"},Di={class:"ml-4"},Ti={class:"text-2xl font-bold text-yellow-600"},Bi={class:"bg-white rounded-lg shadow p-6"},Ei={class:"flex items-center"},Vi={class:"ml-4"},Fi={class:"text-2xl font-bold text-red-600"},$i={class:"bg-white rounded-lg shadow p-6"},Ii={class:"flex items-center"},Ri={class:"ml-4"},Ni={class:"text-2xl font-bold text-purple-600"},Li={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},qi={class:"bg-white rounded-lg shadow p-6"},Hi={key:0,class:"text-center text-gray-500 py-8"},Gi={key:1,class:"space-y-4"},Xi={class:"flex items-center"},Ji={class:"font-medium text-gray-900"},Wi={class:"text-sm text-gray-600"},Qi={class:"text-right"},Yi={class:"font-bold text-gray-900"},Zi={class:"text-sm text-gray-600"},Ki={class:"bg-white rounded-lg shadow p-6"},ed={key:0,class:"text-center text-gray-500 py-8"},td={key:1,class:"space-y-3"},sd={class:"font-medium text-gray-900"},od={class:"text-sm text-gray-600"},ad={class:"text-right"},nd={class:"font-bold text-gray-900"},ld={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},rd={class:"bg-white rounded-lg shadow p-6 mb-8"},id={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},dd=["value"],cd={class:"flex justify-between items-center mt-4"},md={class:"flex space-x-3"},ud=["disabled"],gd={class:"bg-white rounded-lg shadow"},pd={class:"p-6 border-b"},xd={class:"flex justify-between items-center"},bd={class:"text-sm text-gray-600"},fd={key:0,class:"p-8 text-center"},yd={key:1,class:"p-8 text-center text-gray-500"},vd={key:2,class:"overflow-x-auto"},hd={class:"w-full"},_d={class:"divide-y divide-gray-200"},wd={class:"px-6 py-4 text-sm font-mono text-blue-600"},kd=["onClick"],Cd={class:"px-6 py-4 text-sm text-gray-900"},Sd={class:"font-medium"},jd={class:"text-gray-500"},Ad={class:"px-6 py-4 text-sm text-gray-900"},Md={class:"font-medium"},Pd={class:"text-gray-500"},Od={class:"px-6 py-4 text-sm font-medium text-gray-900"},zd={class:"px-6 py-4 text-sm"},Ud={class:"px-6 py-4 text-sm"},Dd={class:"px-6 py-4 text-sm text-gray-500"},Td={class:"px-6 py-4 text-sm space-x-2"},Bd=["onClick"],Ed=["onClick"],Vd=["onClick"],Fd={key:3,class:"p-6 border-t"},$d={class:"flex justify-between items-center"},Id={class:"text-sm text-gray-700"},Rd={class:"flex space-x-2"},Nd=["disabled"],Ld={class:"px-3 py-1 text-sm text-gray-600"},qd=["disabled"],Hd={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Gd={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Xd={class:"flex justify-between items-center mb-4"},Jd={key:0,class:"space-y-6"},Wd={class:"grid grid-cols-2 gap-6"},Qd={class:"space-y-4"},Yd={class:"space-y-2"},Zd={class:"text-sm font-mono text-gray-900"},Kd={class:"text-sm font-bold text-gray-900"},ec={class:"space-y-4"},tc={class:"space-y-2"},sc={class:"text-sm text-gray-900"},oc={key:0},ac={class:"text-sm text-gray-900"},nc={key:1},lc={class:"text-sm font-mono text-gray-900"},rc={key:0,class:"border-t pt-6"},ic={class:"grid grid-cols-2 gap-4"},dc={class:"text-sm font-mono text-gray-900"},cc={class:"text-sm text-gray-900"},mc={class:"text-sm text-gray-900"},uc={class:"text-sm text-gray-900"},gc={key:1,class:"border-t pt-6"},pc={class:"bg-gray-50 p-4 rounded-lg"},xc={class:"text-xs text-gray-700 whitespace-pre-wrap"},bc={class:"border-t pt-6 flex justify-end space-x-3"};function fc(x,t,f,s,v,M){return l(),n("div",yi,[e("div",vi,[e("div",hi,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",_i,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.refreshPayments&&s.refreshPayments(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),$(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.exportPayments&&s.exportPayments(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),$(" Exporter ",-1)])])])])]),e("div",wi,[e("div",ki,[e("div",Ci,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Si,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",ji,a(s.stats.total_payments||0),1)])])]),e("div",Ai,[e("div",Mi,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Pi,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Oi,a(s.stats.successful_payments||0),1)])])]),e("div",zi,[e("div",Ui,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Di,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",Ti,a(s.stats.pending_payments||0),1)])])]),e("div",Bi,[e("div",Ei,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Vi,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",Fi,a(s.stats.failed_payments||0),1)])])]),e("div",$i,[e("div",Ii,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Ri,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",Ni,a(s.formatAmount(s.stats.total_volume||0))+" XAF",1)])])])]),e("div",Li,[e("div",qi,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),s.gatewayStats.length===0?(l(),n("div",Hi," Aucune donnée disponible ")):(l(),n("div",Gi,[(l(!0),n(U,null,D(s.gatewayStats,o=>(l(),n("div",{key:o.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Xi,[e("div",{class:R(["p-2 rounded-lg mr-3",s.getGatewayBadgeClass(o.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",Ji,a(s.getGatewayName(o.gateway)),1),e("p",Wi,a(o.count)+" paiement(s)",1)])]),e("div",Qi,[e("p",Yi,a(s.formatAmount(o.volume))+" XAF",1),e("p",Zi,a(Math.round(o.count/s.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",Ki,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),s.dailyStats.length===0?(l(),n("div",ed," Aucune donnée disponible ")):(l(),n("div",td,[(l(!0),n(U,null,D(s.dailyStats,o=>(l(),n("div",{key:o.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",sd,a(s.formatDate(o.date)),1),e("p",od,a(o.count)+" paiement(s)",1)]),e("div",ad,[e("p",nd,a(s.formatAmount(o.volume))+" XAF",1),e("div",ld,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:pe(`width: ${Math.min(o.volume/s.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",rd,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",id,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.search=o),onInput:t[3]||(t[3]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),onChange:t[5]||(t[5]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[re('<option value="" data-v-fc273c00>Tous les statuts</option><option value="success" data-v-fc273c00>Réussi</option><option value="pending" data-v-fc273c00>En attente</option><option value="failed" data-v-fc273c00>Échoué</option><option value="cancelled" data-v-fc273c00>Annulé</option>',5)])],544),[[F,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.filters.gateway=o),onChange:t[7]||(t[7]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[F,s.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.filters.organizer_id=o),onChange:t[9]||(t[9]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),n(U,null,D(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,dd))),128))],544),[[F,s.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.filters.date_from=o),onChange:t[11]||(t[11]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.filters.date_to=o),onChange:t[13]||(t[13]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[A,s.filters.date_to]])])]),e("div",cd,[e("button",{onClick:t[14]||(t[14]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",md,[e("button",{onClick:t[15]||(t[15]=(...o)=>s.checkPendingPayments&&s.checkPendingPayments(...o)),disabled:s.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},a(s.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,ud)])])]),e("div",gd,[e("div",pd,[e("div",xd,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",bd,a(s.pagination?`${s.pagination.total} paiement(s) trouvé(s)`:""),1)])]),s.loading?(l(),n("div",fd,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payments.length===0?(l(),n("div",yd," Aucun paiement trouvé ")):(l(),n("div",vd,[e("table",hd,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",_d,[(l(!0),n(U,null,D(s.payments,o=>(l(),n("tr",{key:o.id},[e("td",wd,[e("button",{onClick:r=>s.viewPaymentDetails(o),class:"hover:text-blue-800"}," #"+a(o.reference),9,kd)]),e("td",Cd,[e("div",null,[e("div",Sd,"#"+a(o.order?.reference||"-"),1),e("div",jd,a(o.order?.event?.title||"-"),1)])]),e("td",Ad,[e("div",null,[e("div",Md,a(o.order?.customer_name||"-"),1),e("div",Pd,a(o.order?.customer_email||"-"),1)])]),e("td",Od,a(s.formatAmount(o.amount))+" XAF",1),e("td",zd,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Ud,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",Dd,a(s.formatDateTime(o.created_at)),1),e("td",Td,[e("button",{onClick:r=>s.viewPaymentDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Bd),o.status==="pending"?(l(),n("button",{key:0,onClick:r=>s.checkPaymentStatus(o),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,Ed)):b("",!0),o.status==="success"?(l(),n("button",{key:1,onClick:r=>s.processRefund(o),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,Vd)):b("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),n("div",Fd,[e("div",$d,[e("div",Id," Affichage "+a(s.pagination.from)+" à "+a(s.pagination.to)+" sur "+a(s.pagination.total)+" paiements ",1),e("div",Rd,[e("button",{onClick:t[16]||(t[16]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Nd),e("span",Ld," Page "+a(s.pagination.current_page)+" sur "+a(s.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,qd)])])])):b("",!0)]),s.showDetailsModal?(l(),n("div",Hd,[e("div",Gd,[e("div",Xd,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedPayment?(l(),n("div",Jd,[e("div",Wd,[e("div",Qd,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",Yd,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",Zd,"#"+a(s.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",Kd,a(s.formatAmount(s.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(s.selectedPayment.gateway)])},a(s.getGatewayName(s.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedPayment.status)])},a(s.getStatusName(s.selectedPayment.status)),3)])])])]),e("div",ec,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",tc,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",sc,a(s.formatDateTime(s.selectedPayment.created_at)),1)]),s.selectedPayment.processed_at?(l(),n("div",oc,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",ac,a(s.formatDateTime(s.selectedPayment.processed_at)),1)])):b("",!0),s.selectedPayment.gateway_transaction_id?(l(),n("div",nc,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",lc,a(s.selectedPayment.gateway_transaction_id),1)])):b("",!0)])])])]),s.selectedPayment.order?(l(),n("div",rc,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",ic,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",dc,a(s.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",cc,a(s.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",mc,a(s.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",uc,a(s.selectedPayment.order.customer_email),1)])])])):b("",!0),s.selectedPayment.gateway_response?(l(),n("div",gc,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",pc,[e("pre",xc,a(JSON.stringify(s.selectedPayment.gateway_response,null,2)),1)])])):b("",!0),e("div",bc,[s.selectedPayment.status==="pending"?(l(),n("button",{key:0,onClick:t[19]||(t[19]=o=>s.checkPaymentStatus(s.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):b("",!0),s.selectedPayment.status==="success"?(l(),n("button",{key:1,onClick:t[20]||(t[20]=o=>s.processRefund(s.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):b("",!0),e("button",{onClick:t[21]||(t[21]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):b("",!0)])])):b("",!0)])}const yc=ee(fi,[["render",fc],["__scopeId","data-v-fc273c00"]]),eg=Object.freeze(Object.defineProperty({__proto__:null,default:yc},Symbol.toStringTag,{value:"Module"})),vc={name:"PayoutDashboard",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(!1),v=u(!1),M=u([]),o=u([]),r=u([]),p=X({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),P=X({status:"",gateway:"",is_automatic:""}),h=X({organizer_id:"",gateway:"",amount:"",phone_number:""}),w=async()=>{x.value=!0;try{const m=new URLSearchParams;P.status&&m.append("status",P.status),P.gateway&&m.append("gateway",P.gateway),P.is_automatic&&m.append("is_automatic",P.is_automatic);const j=await(await fetch(`/api/v1/admin/payouts?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();j.success&&(M.value=j.data.payouts)}catch(m){console.error("Erreur chargement payouts:",m)}finally{x.value=!1}},O=async()=>{try{const c=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&Object.assign(p,c.data.stats)}catch(m){console.error("Erreur chargement stats:",m)}},g=async()=>{f.value=!0;try{const c=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&(r.value=c.data.balances)}catch(m){console.error("Erreur chargement solde SHAP:",m)}finally{f.value=!1}},T=async()=>{t.value=!0;try{const c=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&(alert(`Vérification terminée: ${c.data.results.length} payouts vérifiés`),w())}catch(m){console.error("Erreur vérification batch:",m)}finally{t.value=!1}},d=async m=>{m.checking=!0;try{const j=await(await fetch(`/api/v1/admin/payouts/${m.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();j.success&&(alert(`Statut: ${j.data.current_status}`),w())}catch(c){console.error("Erreur vérification payout:",c)}finally{m.checking=!1}},C=()=>{s.value=!0,V()},V=async()=>{try{const c=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();c.success&&(o.value=c.data.organizers)}catch(m){console.error("Erreur chargement organisateurs:",m)}},Y=async()=>{v.value=!0;try{const c=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(h)})).json();c.success?(alert("Payout créé avec succès"),s.value=!1,Object.assign(h,{organizer_id:"",gateway:"",amount:"",phone_number:""}),w(),O()):alert(c.message||"Erreur lors de la création")}catch(m){console.error("Erreur création payout:",m),alert("Erreur technique")}finally{v.value=!1}},z=()=>{Object.assign(P,{status:"",gateway:"",is_automatic:""}),w()},W=m=>{alert(`Détails du payout #${m.id}
Référence: ${m.reference}
Montant: ${G(m.amount)} XAF`)},G=m=>new Intl.NumberFormat("fr-FR").format(m),Z=m=>new Date(m).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),oe=m=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[m]||m,te=m=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[m]||"bg-gray-100 text-gray-800",k=m=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[m]||m,B=m=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[m]||"bg-gray-100 text-gray-800";return ae(()=>{w(),O()}),{loading:x,checkingAll:t,loadingShapBalance:f,showCreateModal:s,creatingPayout:v,payouts:M,organizers:o,shapBalance:r,stats:p,filters:P,newPayout:h,loadPayouts:w,loadStats:O,loadShapBalance:g,checkAllPending:T,checkPayoutStatus:d,openCreatePayoutModal:C,createPayout:Y,resetFilters:z,viewPayoutDetails:W,formatAmount:G,formatDate:Z,getStatusName:oe,getStatusBadgeClass:te,getGatewayName:k,getGatewayBadgeClass:B}}},hc={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},_c={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},wc={class:"bg-white rounded-lg shadow p-6"},kc={class:"flex items-center"},Cc={class:"ml-4"},Sc={class:"text-2xl font-bold text-gray-900"},jc={class:"bg-white rounded-lg shadow p-6"},Ac={class:"flex items-center"},Mc={class:"ml-4"},Pc={class:"text-2xl font-bold text-green-600"},Oc={class:"bg-white rounded-lg shadow p-6"},zc={class:"flex items-center"},Uc={class:"ml-4"},Dc={class:"text-2xl font-bold text-yellow-600"},Tc={class:"bg-white rounded-lg shadow p-6"},Bc={class:"flex items-center"},Ec={class:"ml-4"},Vc={class:"text-2xl font-bold text-purple-600"},Fc={class:"flex flex-wrap gap-4 mb-8"},$c=["disabled"],Ic=["disabled"],Rc={key:0,class:"mb-8"},Nc={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lc={class:"font-semibold text-gray-900"},qc={class:"text-2xl font-bold text-green-600"},Hc={class:"text-sm text-gray-500"},Gc={class:"bg-white rounded-lg shadow p-6 mb-8"},Xc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Jc={class:"flex items-end"},Wc={class:"bg-white rounded-lg shadow"},Qc={key:0,class:"p-8 text-center"},Yc={key:1,class:"p-8 text-center text-gray-500"},Zc={key:2,class:"overflow-x-auto"},Kc={class:"w-full"},em={class:"divide-y divide-gray-200"},tm={class:"px-6 py-4 text-sm text-gray-900"},sm={class:"px-6 py-4 text-sm text-gray-900"},om={class:"px-6 py-4 text-sm font-medium text-gray-900"},am={class:"px-6 py-4 text-sm text-gray-900"},nm={class:"px-6 py-4 text-sm"},lm={class:"px-6 py-4 text-sm text-gray-900"},rm={class:"px-6 py-4 text-sm text-gray-500"},im={class:"px-6 py-4 text-sm space-x-2"},dm=["onClick","disabled"],cm=["onClick"],mm={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},um={class:"bg-white rounded-lg p-6 w-full max-w-md"},gm={class:"space-y-4"},pm=["value"],xm={class:"flex justify-end space-x-3 mt-6"},bm=["disabled"];function fm(x,t,f,s,v,M){return l(),n("div",hc,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",_c,[e("div",wc,[e("div",kc,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Cc,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",Sc,a(s.stats.total_payouts||0),1)])])]),e("div",jc,[e("div",Ac,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",Mc,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Pc,a(s.stats.successful_payouts||0),1)])])]),e("div",Oc,[e("div",zc,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Uc,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",Dc,a(s.stats.pending_payouts||0),1)])])]),e("div",Tc,[e("div",Bc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Ec,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",Vc,a(s.stats.automatic_payouts||0),1)])])])]),e("div",Fc,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreatePayoutModal&&s.openCreatePayoutModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),$(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.checkAllPending&&s.checkAllPending(...o)),disabled:s.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),$(" "+a(s.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,$c),e("button",{onClick:t[2]||(t[2]=(...o)=>s.loadShapBalance&&s.loadShapBalance(...o)),disabled:s.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),$(" "+a(s.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,Ic)]),s.shapBalance.length>0?(l(),n("div",Rc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",Nc,[(l(!0),n(U,null,D(s.shapBalance,o=>(l(),n("div",{key:o.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",Lc,a(o.payment_system_displayed_name),1),e("p",qc,a(s.formatAmount(o.amount))+" XAF",1),e("p",Hc,"Dernière MAJ: "+a(o.last_updated),1)]))),128))])])):b("",!0),e("div",Gc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",Xc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[re('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[F,s.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.gateway=o),onChange:t[6]||(t[6]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[F,s.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.is_automatic=o),onChange:t[8]||(t[8]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[F,s.filters.is_automatic]])]),e("div",Jc,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Wc,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),s.loading?(l(),n("div",Qc,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payouts.length===0?(l(),n("div",Yc," Aucun payout trouvé ")):(l(),n("div",Zc,[e("table",Kc,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",em,[(l(!0),n(U,null,D(s.payouts,o=>(l(),n("tr",{key:o.id},[e("td",tm,"#"+a(o.id),1),e("td",sm,a(o.organizer?.name),1),e("td",om,a(s.formatAmount(o.amount))+" XAF",1),e("td",am,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",nm,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},a(s.getStatusName(o.status)),3)]),e("td",lm,[e("span",{class:R(["inline-flex px-2 py-1 text-xs rounded-full",o.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},a(o.is_automatic?"Auto":"Manuel"),3)]),e("td",rm,a(s.formatDate(o.created_at)),1),e("td",im,[e("button",{onClick:r=>s.checkPayoutStatus(o),disabled:o.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},a(o.checking?"Vérif...":"Vérifier"),9,dm),e("button",{onClick:r=>s.viewPayoutDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,cm)])]))),128))])])]))]),s.showCreateModal?(l(),n("div",mm,[e("div",um,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=ne((...o)=>s.createPayout&&s.createPayout(...o),["prevent"]))},[e("div",gm,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),i(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.newPayout.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(l(!0),n(U,null,D(s.organizers,o=>(l(),n("option",{key:o.id,value:o.id},a(o.name),9,pm))),128))],512),[[F,s.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.newPayout.gateway=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[F,s.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.newPayout.amount=o),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.newPayout.phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.newPayout.phone_number]])])]),e("div",xm,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>s.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.creatingPayout?"Création...":"Créer le Payout"),9,bm)])],32)])])):b("",!0)])}const ym=ee(vc,[["render",fm],["__scopeId","data-v-e96f5ab8"]]),tg=Object.freeze(Object.defineProperty({__proto__:null,default:ym},Symbol.toStringTag,{value:"Module"})),vm={name:"OrganizerBalanceConfig",setup(){const x=u(!1),t=u(!1),f=u(!1),s=u(null),v=u([]),M=X({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),o=X({gateway:"",auto_payout_enabled:""}),r=X({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),p=async()=>{x.value=!0;try{const d=new URLSearchParams;o.gateway&&d.append("gateway",o.gateway),o.auto_payout_enabled&&d.append("auto_payout_enabled",o.auto_payout_enabled);const V=await(await fetch(`/api/v1/admin/payouts/balances?${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(v.value=V.data.balances,Object.assign(M,V.data.stats))}catch(d){console.error("Erreur chargement balances:",d)}finally{x.value=!1}},P=d=>{s.value=d,Object.assign(r,{auto_payout_enabled:d.auto_payout_enabled,auto_payout_threshold:d.auto_payout_threshold,payout_phone_number:d.payout_phone_number||""}),t.value=!0},h=async()=>{f.value=!0;try{const C=await(await fetch(`/api/v1/admin/organizers/${s.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({gateway:s.value.gateway,...r})})).json();C.success?(alert("Configuration mise à jour avec succès"),t.value=!1,p()):alert(C.message||"Erreur lors de la mise à jour")}catch(d){console.error("Erreur sauvegarde config:",d),alert("Erreur technique")}finally{f.value=!1}},w=()=>{Object.assign(o,{gateway:"",auto_payout_enabled:""}),p()},O=d=>new Intl.NumberFormat("fr-FR").format(d),g=d=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[d]||d,T=d=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[d]||"bg-gray-100 text-gray-800";return ae(()=>{p()}),{loading:x,showConfigModal:t,savingConfig:f,editingBalance:s,balances:v,stats:M,filters:o,configForm:r,loadBalances:p,editBalance:P,saveConfiguration:h,resetFilters:w,formatAmount:O,getGatewayName:g,getGatewayBadgeClass:T}}},hm={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},_m={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},wm={class:"bg-white rounded-lg shadow p-6"},km={class:"flex items-center"},Cm={class:"ml-4"},Sm={class:"text-2xl font-bold text-gray-900"},jm={class:"bg-white rounded-lg shadow p-6"},Am={class:"flex items-center"},Mm={class:"ml-4"},Pm={class:"text-2xl font-bold text-green-600"},Om={class:"bg-white rounded-lg shadow p-6"},zm={class:"flex items-center"},Um={class:"ml-4"},Dm={class:"text-2xl font-bold text-yellow-600"},Tm={class:"bg-white rounded-lg shadow p-6"},Bm={class:"flex items-center"},Em={class:"ml-4"},Vm={class:"text-2xl font-bold text-purple-600"},Fm={class:"bg-white rounded-lg shadow p-6 mb-8"},$m={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Im={class:"flex items-end"},Rm={class:"bg-white rounded-lg shadow"},Nm={key:0,class:"p-8 text-center"},Lm={key:1,class:"p-8 text-center text-gray-500"},qm={key:2,class:"overflow-x-auto"},Hm={class:"w-full"},Gm={class:"divide-y divide-gray-200"},Xm={class:"px-6 py-4 text-sm font-medium text-gray-900"},Jm={class:"px-6 py-4 text-sm text-gray-900"},Wm={class:"px-6 py-4 text-sm font-medium text-gray-900"},Qm={class:"px-6 py-4 text-sm"},Ym={class:"px-6 py-4 text-sm text-gray-900"},Zm={class:"px-6 py-4 text-sm text-gray-900"},Km={class:"px-6 py-4 text-sm space-x-2"},eu=["onClick"],tu={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},su={class:"bg-white rounded-lg p-6 w-full max-w-md"},ou={class:"text-lg font-bold mb-4"},au={class:"space-y-4"},nu=["value"],lu=["value"],ru={class:"flex items-center space-x-2"},iu={key:0},du={class:"flex justify-end space-x-3 mt-6"},cu=["disabled"];function mu(x,t,f,s,v,M){return l(),n("div",hm,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",_m,[e("div",wm,[e("div",km,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",Cm,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",Sm,a(s.stats.total_organizers||0),1)])])]),e("div",jm,[e("div",Am,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Mm,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",Pm,a(s.stats.auto_payout_enabled||0),1)])])]),e("div",Om,[e("div",zm,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Um,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",Dm,a(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])]),e("div",Tm,[e("div",Bm,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Em,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",Vm,a(s.stats.active_configs||0),1)])])])]),e("div",Fm,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",$m,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),i(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filters.gateway=o),onChange:t[1]||(t[1]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[F,s.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.auto_payout_enabled=o),onChange:t[3]||(t[3]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[F,s.filters.auto_payout_enabled]])]),e("div",Im,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Rm,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),s.loading?(l(),n("div",Nm,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.balances.length===0?(l(),n("div",Lm," Aucune balance trouvée ")):(l(),n("div",qm,[e("table",Hm,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Gm,[(l(!0),n(U,null,D(s.balances,o=>(l(),n("tr",{key:`${o.organizer_id}-${o.gateway}`},[e("td",Xm,a(o.organizer?.name),1),e("td",Jm,[e("span",{class:R(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},a(s.getGatewayName(o.gateway)),3)]),e("td",Wm,a(s.formatAmount(o.balance))+" XAF",1),e("td",Qm,[e("span",{class:R(["inline-flex px-2 py-1 text-xs rounded-full",o.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(o.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",Ym,a(s.formatAmount(o.auto_payout_threshold))+" XAF",1),e("td",Zm,a(o.payout_phone_number||"-"),1),e("td",Km,[e("button",{onClick:r=>s.editBalance(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,eu)])]))),128))])])]))]),s.showConfigModal?(l(),n("div",tu,[e("div",su,[e("h3",ou,"Configuration Payout - "+a(s.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=ne((...o)=>s.saveConfiguration&&s.saveConfiguration(...o),["prevent"]))},[e("div",au,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:s.getGatewayName(s.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,nu)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:s.formatAmount(s.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,lu)]),e("div",null,[e("label",ru,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>s.configForm.auto_payout_enabled=o),class:"rounded border-gray-300"},null,512),[[Q,s.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),s.configForm.auto_payout_enabled?(l(),n("div",iu,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.configForm.auto_payout_threshold=o),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):b("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.configForm.payout_phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[A,s.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",du,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},a(s.savingConfig?"Enregistrement...":"Enregistrer"),9,cu)])],32)])])):b("",!0)])}const uu=ee(vm,[["render",mu],["__scopeId","data-v-4c3e0ab1"]]),sg=Object.freeze(Object.defineProperty({__proto__:null,default:uu},Symbol.toStringTag,{value:"Module"})),gu={name:"AdminReports",components:{HomeIcon:ue,UsersIcon:me,CalendarIcon:ge,CreditCardIcon:ce,ChartBarIcon:de,CogIcon:ie,CurrencyDollarIcon:fe},setup(){ye();const x=u(window.innerWidth>=1024),t=u([{id:1,type:"Rapport financier",period:"Août 2025",created_at:new Date("2025-09-01")},{id:2,type:"Rapport événements",period:"Juillet 2025",created_at:new Date("2025-08-01")},{id:3,type:"Rapport utilisateurs",period:"Juin 2025",created_at:new Date("2025-07-01")}]);return{sidebarOpen:x,reports:t,generateReport:o=>{console.log("Generating report:",o)},downloadReport:o=>{console.log("Downloading report:",o)},viewReport:o=>{console.log("Viewing report:",o)},formatDate:o=>o.toLocaleDateString("fr-FR")}}},pu={class:"admin-reports min-h-screen bg-gray-100 font-primea"},xu={class:"mt-6"},bu={class:"px-4"},fu={class:"lg:ml-64 transition-all duration-300"},yu={class:"p-6"},vu={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8"},hu={class:"bg-white rounded-lg shadow-sm p-6 text-center"},_u={class:"bg-primea-blue p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},wu={class:"bg-white rounded-lg shadow-sm p-6 text-center"},ku={class:"bg-primea-yellow p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},Cu={class:"bg-white rounded-lg shadow-sm p-6 text-center"},Su={class:"bg-green-500 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},ju={class:"bg-white rounded-lg shadow-sm overflow-hidden"},Au={class:"overflow-x-auto"},Mu={class:"min-w-full divide-y divide-gray-200"},Pu={class:"bg-white divide-y divide-gray-200"},Ou={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},zu={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Uu={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Du={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Tu=["onClick"],Bu=["onClick"];function Eu(x,t,f,s,v,M){const o=L("HomeIcon"),r=L("router-link"),p=L("UsersIcon"),P=L("CalendarIcon"),h=L("CreditCardIcon"),w=L("ChartBarIcon"),O=L("CogIcon"),g=L("CurrencyDollarIcon");return l(),n("div",pu,[e("div",{class:R(["fixed inset-y-0 left-0 w-64 bg-primea-blue text-white z-30",{"-translate-x-full":!s.sidebarOpen,"translate-x-0":s.sidebarOpen}])},[t[9]||(t[9]=e("div",{class:"flex items-center justify-between p-4 border-b border-primea-blue-dark"},[e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-8"}),e("span",{class:"font-bold text-lg font-primea"},"Administration")])],-1)),e("nav",xu,[e("div",bu,[S(r,{to:"/admin/dashboard",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(o,{class:"w-5 h-5 mr-3"}),t[3]||(t[3]=$(" Tableau de bord ",-1))]),_:1}),S(r,{to:"/admin/users",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(p,{class:"w-5 h-5 mr-3"}),t[4]||(t[4]=$(" Utilisateurs ",-1))]),_:1}),S(r,{to:"/admin/events",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(P,{class:"w-5 h-5 mr-3"}),t[5]||(t[5]=$(" Événements ",-1))]),_:1}),S(r,{to:"/admin/transactions",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(h,{class:"w-5 h-5 mr-3"}),t[6]||(t[6]=$(" Transactions ",-1))]),_:1}),S(r,{to:"/admin/reports",class:"flex items-center px-4 py-3 text-white bg-primea-yellow text-primea-blue rounded-primea-lg mb-2 font-primea font-semibold"},{default:J(()=>[S(w,{class:"w-5 h-5 mr-3"}),t[7]||(t[7]=$(" Rapports ",-1))]),_:1}),S(r,{to:"/admin/settings",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(O,{class:"w-5 h-5 mr-3"}),t[8]||(t[8]=$(" Paramètres ",-1))]),_:1})])])],2),e("div",fu,[t[19]||(t[19]=e("header",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"px-6 py-4"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Rapports et analytics")])],-1)),e("main",yu,[e("div",vu,[e("div",hu,[e("div",_u,[S(g,{class:"w-8 h-8 text-white"})]),t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-2"},"Rapport financier",-1)),t[11]||(t[11]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, remboursements",-1)),e("button",{onClick:t[0]||(t[0]=T=>s.generateReport("financial")),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Générer ")]),e("div",wu,[e("div",ku,[S(P,{class:"w-8 h-8 text-primea-blue"})]),t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-2"},"Rapport événements",-1)),t[13]||(t[13]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes, tendances",-1)),e("button",{onClick:t[1]||(t[1]=T=>s.generateReport("events")),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Générer ")]),e("div",Cu,[e("div",Su,[S(p,{class:"w-8 h-8 text-white"})]),t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-2"},"Rapport utilisateurs",-1)),t[15]||(t[15]=e("p",{class:"text-gray-600 text-sm mb-4"},"Croissance, activité, segments",-1)),e("button",{onClick:t[2]||(t[2]=T=>s.generateReport("users")),class:"bg-primea-blue text-white px-4 py-2 rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Générer ")])]),e("div",ju,[t[18]||(t[18]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-primea-blue font-primea"},"Historique des rapports")],-1)),e("div",Au,[e("table",Mu,[t[17]||(t[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Pu,[(l(!0),n(U,null,D(s.reports,T=>(l(),n("tr",{key:T.id},[e("td",Ou,a(T.type),1),e("td",zu,a(T.period),1),e("td",Uu,a(s.formatDate(T.created_at)),1),t[16]||(t[16]=e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},"Prêt")],-1)),e("td",Du,[e("button",{onClick:d=>s.downloadReport(T),class:"text-primea-blue hover:text-primea-yellow mr-3"},"Télécharger",8,Tu),e("button",{onClick:d=>s.viewReport(T),class:"text-green-600 hover:text-green-900"},"Voir",8,Bu)])]))),128))])])])])])])])}const Vu=ee(gu,[["render",Eu],["__scopeId","data-v-7e83088a"]]),og=Object.freeze(Object.defineProperty({__proto__:null,default:Vu},Symbol.toStringTag,{value:"Module"})),Fu={name:"AdminSettings",components:{HomeIcon:ue,UsersIcon:me,CalendarIcon:ge,CreditCardIcon:ce,ChartBarIcon:de,CogIcon:ie},setup(){const x=u(window.innerWidth>=1024),t=u({platformName:"Primea Ticketing",siteUrl:"https://primea.ga",contactEmail:"admin@primea.ga",timezone:"Africa/Libreville",paymentMethods:{airtel:!0,moov:!0,cards:!0},notifications:{email:!0,sms:!1,push:!0},maintenanceMode:!1});return{sidebarOpen:x,settings:t,saveSettings:()=>{console.log("Saving settings:",t.value)},resetSettings:()=>{t.value={platformName:"Primea Ticketing",siteUrl:"https://primea.ga",contactEmail:"admin@primea.ga",timezone:"Africa/Libreville",paymentMethods:{airtel:!0,moov:!0,cards:!0},notifications:{email:!0,sms:!1,push:!0},maintenanceMode:!1}}}}},$u={class:"admin-settings min-h-screen bg-gray-100 font-primea"},Iu={class:"mt-6"},Ru={class:"px-4"},Nu={class:"lg:ml-64 transition-all duration-300"},Lu={class:"p-6"},qu={class:"max-w-4xl mx-auto space-y-6"},Hu={class:"bg-white rounded-lg shadow-sm p-6"},Gu={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Xu={class:"bg-white rounded-lg shadow-sm p-6"},Ju={class:"space-y-4"},Wu={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Qu={class:"flex items-center"},Yu={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},Zu={class:"flex items-center"},Ku={class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},e0={class:"flex items-center"},t0={class:"bg-white rounded-lg shadow-sm p-6"},s0={class:"space-y-4"},o0={class:"flex items-center"},a0={class:"flex items-center"},n0={class:"flex items-center"},l0={class:"bg-white rounded-lg shadow-sm p-6"},r0={class:"flex items-center justify-between"},i0={class:"flex items-center"},d0={class:"flex justify-end space-x-4"};function c0(x,t,f,s,v,M){const o=L("HomeIcon"),r=L("router-link"),p=L("UsersIcon"),P=L("CalendarIcon"),h=L("CreditCardIcon"),w=L("ChartBarIcon"),O=L("CogIcon");return l(),n("div",$u,[e("div",{class:R(["fixed inset-y-0 left-0 w-64 bg-primea-blue text-white z-30",{"-translate-x-full":!s.sidebarOpen,"translate-x-0":s.sidebarOpen}])},[t[19]||(t[19]=e("div",{class:"flex items-center justify-between p-4 border-b border-primea-blue-dark"},[e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-8"}),e("span",{class:"font-bold text-lg font-primea"},"Administration")])],-1)),e("nav",Iu,[e("div",Ru,[S(r,{to:"/admin/dashboard",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(o,{class:"w-5 h-5 mr-3"}),t[13]||(t[13]=$("Tableau de bord",-1))]),_:1}),S(r,{to:"/admin/users",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(p,{class:"w-5 h-5 mr-3"}),t[14]||(t[14]=$("Utilisateurs",-1))]),_:1}),S(r,{to:"/admin/events",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(P,{class:"w-5 h-5 mr-3"}),t[15]||(t[15]=$("Événements",-1))]),_:1}),S(r,{to:"/admin/transactions",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(h,{class:"w-5 h-5 mr-3"}),t[16]||(t[16]=$("Transactions",-1))]),_:1}),S(r,{to:"/admin/reports",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(w,{class:"w-5 h-5 mr-3"}),t[17]||(t[17]=$("Rapports",-1))]),_:1}),S(r,{to:"/admin/settings",class:"flex items-center px-4 py-3 text-white bg-primea-yellow text-primea-blue rounded-primea-lg mb-2 font-primea font-semibold"},{default:J(()=>[S(O,{class:"w-5 h-5 mr-3"}),t[18]||(t[18]=$("Paramètres",-1))]),_:1})])])],2),e("div",Nu,[t[40]||(t[40]=e("header",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"px-6 py-4"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Paramètres système")])],-1)),e("main",Lu,[e("div",qu,[e("div",Hu,[t[25]||(t[25]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Configuration générale",-1)),e("div",Gu,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>s.settings.platformName=g),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.settings.platformName]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=g=>s.settings.siteUrl=g),type:"url",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.settings.siteUrl]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=g=>s.settings.contactEmail=g),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.settings.contactEmail]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=g=>s.settings.timezone=g),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},[...t[23]||(t[23]=[e("option",{value:"Africa/Libreville"},"Africa/Libreville (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Europe/Paris (GMT+1)",-1)])],512),[[F,s.settings.timezone]])])])]),e("div",Xu,[t[32]||(t[32]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Moyens de paiement",-1)),e("div",Ju,[e("div",Wu,[t[27]||(t[27]=e("div",{class:"flex items-center"},[e("img",{src:"/images/am.png",alt:"Airtel Money",class:"h-8 w-12 mr-3"}),e("div",null,[e("h4",{class:"font-medium"},"Airtel Money"),e("p",{class:"text-sm text-gray-600"},"Paiements mobile Airtel")])],-1)),e("label",Qu,[i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=g=>s.settings.paymentMethods.airtel=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.paymentMethods.airtel]]),t[26]||(t[26]=e("span",{class:"ml-2 text-sm"},"Actif",-1))])]),e("div",Yu,[t[29]||(t[29]=e("div",{class:"flex items-center"},[e("img",{src:"/images/mm.png",alt:"Moov Money",class:"h-8 w-12 mr-3"}),e("div",null,[e("h4",{class:"font-medium"},"Moov Money"),e("p",{class:"text-sm text-gray-600"},"Paiements mobile Moov")])],-1)),e("label",Zu,[i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=g=>s.settings.paymentMethods.moov=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.paymentMethods.moov]]),t[28]||(t[28]=e("span",{class:"ml-2 text-sm"},"Actif",-1))])]),e("div",Ku,[t[31]||(t[31]=e("div",{class:"flex items-center"},[e("img",{src:"/images/vm.png",alt:"Visa",class:"h-8 w-12 mr-3"}),e("div",null,[e("h4",{class:"font-medium"},"Cartes bancaires"),e("p",{class:"text-sm text-gray-600"},"Visa, Mastercard")])],-1)),e("label",e0,[i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=g=>s.settings.paymentMethods.cards=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.paymentMethods.cards]]),t[30]||(t[30]=e("span",{class:"ml-2 text-sm"},"Actif",-1))])])])]),e("div",t0,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Notifications",-1)),e("div",s0,[e("label",o0,[i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=g=>s.settings.notifications.email=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.notifications.email]]),t[33]||(t[33]=e("span",{class:"ml-3"},"Notifications par email",-1))]),e("label",a0,[i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=g=>s.settings.notifications.sms=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.notifications.sms]]),t[34]||(t[34]=e("span",{class:"ml-3"},"Notifications par SMS",-1))]),e("label",n0,[i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=g=>s.settings.notifications.push=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.notifications.push]]),t[35]||(t[35]=e("span",{class:"ml-3"},"Notifications push",-1))])])]),e("div",l0,[t[39]||(t[39]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Mode maintenance",-1)),e("div",r0,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium"},"Activer le mode maintenance"),e("p",{class:"text-sm text-gray-600"},"Le site sera temporairement indisponible pour les utilisateurs")],-1)),e("label",i0,[i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=g=>s.settings.maintenanceMode=g),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.settings.maintenanceMode]]),t[37]||(t[37]=e("span",{class:"ml-2 text-sm"},"Activé",-1))])])]),e("div",d0,[e("button",{onClick:t[11]||(t[11]=(...g)=>s.resetSettings&&s.resetSettings(...g)),class:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Réinitialiser "),e("button",{onClick:t[12]||(t[12]=(...g)=>s.saveSettings&&s.saveSettings(...g)),class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Sauvegarder ")])])])])])}const m0=ee(Fu,[["render",c0],["__scopeId","data-v-7db36a4d"]]),ag=Object.freeze(Object.defineProperty({__proto__:null,default:m0},Symbol.toStringTag,{value:"Module"})),u0={name:"AdminProfile",components:{HomeIcon:ue,UsersIcon:me,CalendarIcon:ge,CreditCardIcon:ce,ChartBarIcon:de,CogIcon:ie,CameraIcon:he,ComputerDesktopIcon:ve},setup(){const x=u(window.innerWidth>=1024),t=u({name:"Admin Primea",first_name:"Admin",last_name:"Primea",email:"admin@primea.ga",phone:"+241 07 12 34 56 78",role:"Super Administrateur",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=80&h=80&fit=crop&crop=face&auto=format",created_at:new Date("2023-01-15"),preferences:{email_notifications:!0,two_factor:!1,language:"fr"}}),f=u({current:"",new:"",confirm:""}),s=u([{id:1,device:"Chrome sur Windows",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]);return{sidebarOpen:x,profile:t,passwordForm:f,activeSessions:s,formatDate:w=>w.toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),formatRelativeTime:w=>{const g=Math.floor((new Date-w)/(1e3*60)),T=Math.floor(g/60);return g<5?"À l'instant":g<60?`Il y a ${g} minutes`:T<24?`Il y a ${T} heures`:w.toLocaleDateString("fr-FR")},changeAvatar:()=>{console.log("Change avatar")},updateProfile:()=>{console.log("Update profile:",t.value)},changePassword:()=>{if(f.value.new!==f.value.confirm){alert("Les mots de passe ne correspondent pas");return}console.log("Change password"),f.value={current:"",new:"",confirm:""}},updatePreferences:()=>{console.log("Update preferences:",t.value.preferences)},revokeSession:w=>{console.log("Revoke session:",w),s.value=s.value.filter(O=>O.id!==w.id)}}}},g0={class:"admin-profile min-h-screen bg-gray-100 font-primea"},p0={class:"mt-6"},x0={class:"px-4"},b0={class:"lg:ml-64 transition-all duration-300"},f0={class:"p-6"},y0={class:"max-w-4xl mx-auto space-y-6"},v0={class:"bg-white rounded-lg shadow-sm p-6"},h0={class:"flex items-center space-x-6"},_0={class:"relative"},w0=["src"],k0={class:"text-lg font-semibold text-primea-blue"},C0={class:"text-gray-600"},S0={class:"text-sm text-gray-500"},j0={class:"bg-white rounded-lg shadow-sm p-6"},A0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M0={class:"bg-white rounded-lg shadow-sm p-6"},P0={class:"bg-white rounded-lg shadow-sm p-6"},O0={class:"space-y-4"},z0={class:"flex items-center justify-between"},U0={class:"flex items-center"},D0={class:"flex items-center justify-between"},T0={class:"flex items-center"},B0={class:"flex justify-end"},E0={class:"bg-white rounded-lg shadow-sm p-6"},V0={class:"space-y-3"},F0={class:"flex items-center"},$0={class:"bg-primea-blue p-2 rounded-full mr-3"},I0={class:"font-medium"},R0={class:"text-sm text-gray-600"},N0={class:"flex items-center space-x-2"},L0={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},q0=["onClick"];function H0(x,t,f,s,v,M){const o=L("HomeIcon"),r=L("router-link"),p=L("UsersIcon"),P=L("CalendarIcon"),h=L("CreditCardIcon"),w=L("ChartBarIcon"),O=L("CogIcon"),g=L("CameraIcon"),T=L("ComputerDesktopIcon");return l(),n("div",g0,[e("div",{class:R(["fixed inset-y-0 left-0 w-64 bg-primea-blue text-white z-30",{"-translate-x-full":!s.sidebarOpen,"translate-x-0":s.sidebarOpen}])},[t[20]||(t[20]=e("div",{class:"flex items-center justify-between p-4 border-b border-primea-blue-dark"},[e("div",{class:"flex items-center space-x-3"},[e("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-8"}),e("span",{class:"font-bold text-lg font-primea"},"Administration")])],-1)),e("nav",p0,[e("div",x0,[S(r,{to:"/admin/dashboard",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(o,{class:"w-5 h-5 mr-3"}),t[14]||(t[14]=$("Tableau de bord",-1))]),_:1}),S(r,{to:"/admin/users",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(p,{class:"w-5 h-5 mr-3"}),t[15]||(t[15]=$("Utilisateurs",-1))]),_:1}),S(r,{to:"/admin/events",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(P,{class:"w-5 h-5 mr-3"}),t[16]||(t[16]=$("Événements",-1))]),_:1}),S(r,{to:"/admin/transactions",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(h,{class:"w-5 h-5 mr-3"}),t[17]||(t[17]=$("Transactions",-1))]),_:1}),S(r,{to:"/admin/reports",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(w,{class:"w-5 h-5 mr-3"}),t[18]||(t[18]=$("Rapports",-1))]),_:1}),S(r,{to:"/admin/settings",class:"flex items-center px-4 py-3 text-blue-200 hover:bg-primea-yellow hover:text-primea-blue rounded-primea-lg mb-2 transition-colors font-primea"},{default:J(()=>[S(O,{class:"w-5 h-5 mr-3"}),t[19]||(t[19]=$("Paramètres",-1))]),_:1})])])],2),e("div",b0,[t[38]||(t[38]=e("header",{class:"bg-white shadow-sm border-b border-gray-200"},[e("div",{class:"px-6 py-4"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon profil administrateur")])],-1)),e("main",f0,[e("div",y0,[e("div",v0,[e("div",h0,[e("div",_0,[e("img",{src:s.profile.avatar,alt:"Avatar",class:"w-20 h-20 rounded-full object-cover"},null,8,w0),e("button",{onClick:t[0]||(t[0]=(...d)=>s.changeAvatar&&s.changeAvatar(...d)),class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all"},[S(g,{class:"w-4 h-4"})])]),e("div",null,[e("h3",k0,a(s.profile.name),1),e("p",C0,a(s.profile.role),1),e("p",S0,"Membre depuis "+a(s.formatDate(s.profile.created_at)),1)])])]),e("div",j0,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Informations personnelles",-1)),e("form",{onSubmit:t[5]||(t[5]=ne((...d)=>s.updateProfile&&s.updateProfile(...d),["prevent"])),class:"space-y-4"},[e("div",A0,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Prénom",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>s.profile.first_name=d),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.profile.first_name]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=d=>s.profile.last_name=d),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.profile.last_name]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>s.profile.email=d),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.profile.email]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=d=>s.profile.phone=d),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.profile.phone]])])]),t[25]||(t[25]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Mettre à jour ")],-1))],32)]),e("div",M0,[t[31]||(t[31]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Changer le mot de passe",-1)),e("form",{onSubmit:t[9]||(t[9]=ne((...d)=>s.changePassword&&s.changePassword(...d),["prevent"])),class:"space-y-4"},[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=d=>s.passwordForm.current=d),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.passwordForm.current]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=d=>s.passwordForm.new=d),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.passwordForm.new]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le nouveau mot de passe",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=d=>s.passwordForm.confirm=d),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},null,512),[[A,s.passwordForm.confirm]])]),t[30]||(t[30]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Changer le mot de passe ")],-1))],32)]),e("div",P0,[t[36]||(t[36]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Préférences",-1)),e("div",O0,[e("div",z0,[t[32]||(t[32]=e("div",null,[e("h4",{class:"font-medium"},"Notifications email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications par email")],-1)),e("label",U0,[i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=d=>s.profile.preferences.email_notifications=d),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.profile.preferences.email_notifications]])])]),e("div",D0,[t[33]||(t[33]=e("div",null,[e("h4",{class:"font-medium"},"Authentification à deux facteurs"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée pour votre compte")],-1)),e("label",T0,[i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=d=>s.profile.preferences.two_factor=d),type:"checkbox",class:"form-checkbox h-5 w-5 text-primea-blue"},null,512),[[Q,s.profile.preferences.two_factor]])])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue",-1)),i(e("select",{"onUpdate:modelValue":t[12]||(t[12]=d=>s.profile.preferences.language=d),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primea-blue focus:border-primea-blue"},[...t[34]||(t[34]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[F,s.profile.preferences.language]])]),e("div",B0,[e("button",{onClick:t[13]||(t[13]=(...d)=>s.updatePreferences&&s.updatePreferences(...d)),class:"px-6 py-2 bg-primea-blue text-white rounded-lg hover:bg-primea-yellow hover:text-primea-blue transition-all"}," Sauvegarder les préférences ")])])]),e("div",E0,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold text-primea-blue mb-4"},"Sessions actives",-1)),e("div",V0,[(l(!0),n(U,null,D(s.activeSessions,d=>(l(),n("div",{key:d.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",F0,[e("div",$0,[S(T,{class:"w-4 h-4 text-white"})]),e("div",null,[e("p",I0,a(d.device),1),e("p",R0,a(d.location)+" - "+a(s.formatRelativeTime(d.last_activity)),1)])]),e("div",N0,[d.current?(l(),n("span",L0,"Session actuelle")):(l(),n("button",{key:1,onClick:C=>s.revokeSession(d),class:"text-red-600 hover:text-red-800 text-sm"},"Révoquer",8,q0))])]))),128))])])])])])])}const G0=ee(u0,[["render",H0],["__scopeId","data-v-549aaa0e"]]),ng=Object.freeze(Object.defineProperty({__proto__:null,default:G0},Symbol.toStringTag,{value:"Module"}));export{W0 as A,Z0 as E,Y0 as O,eg as P,og as R,ag as S,Q0 as U,K0 as a,tg as b,sg as c,ng as d};
