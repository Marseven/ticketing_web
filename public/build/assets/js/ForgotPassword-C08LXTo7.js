import{b as n,d,e as s,i as m,t as c,j as v,f as b,v as g,A as f,g as x,h as w,q as y,r as u}from"./vue-vendor-DP67WaqR.js";import{a as h}from"./vendor-14XLBY50.js";import{_}from"./account-CFnX3a8R.js";import"./pinia-vendor-Dwga0azm.js";const k={name:"ForgotPassword",setup(){const i=u(""),e=u(!1),o=u(""),r=u("");return{email:i,loading:e,error:o,success:r,handleSubmit:async()=>{try{if(e.value=!0,o.value="",r.value="",!i.value)throw new Error("Veuillez entrer votre adresse email");const a=await h.post("/api/v1/auth/forgot-password",{email:i.value});a.data.success?(r.value=a.data.message||"Un email de réinitialisation a été envoyé à votre adresse email.",i.value=""):o.value=a.data.message||"Une erreur est survenue"}catch(a){if(console.error("Erreur forgot password:",a),a.response){const l=a.response.status,t=a.response.data;l===422?t.errors&&t.errors.email?o.value=t.errors.email[0]:o.value=t.message||"Email invalide":l===404?o.value="Aucun compte associé à cette adresse email":l===429?o.value="Trop de tentatives. Veuillez réessayer dans quelques minutes.":l>=500?o.value="Erreur du serveur. Veuillez réessayer plus tard.":o.value=t.message||"Une erreur est survenue"}else a.request?o.value="Impossible de se connecter au serveur. Vérifiez votre connexion internet.":o.value=a.message||"Une erreur est survenue"}finally{e.value=!1}}}}},V={class:"forgot-password-page font-primea relative overflow-hidden min-h-screen"},C={class:"relative z-10 min-h-screen flex items-center justify-center px-4 py-12"},M={class:"max-w-md w-full"},z={class:"bg-white/95 backdrop-blur-sm rounded-primea-xl shadow-primea-lg p-8 animate-slide-up"},E={key:0,class:"bg-green-50 border border-green-200 rounded-primea-lg p-4 mb-6 animate-fade-in"},B={class:"flex items-center"},T={class:"text-green-700 text-sm font-primea"},j=["disabled"],q={key:0,class:"bg-red-50 border border-red-200 rounded-primea-lg p-4"},A={class:"text-red-600 text-sm font-primea"},D=["disabled"],S={key:0,class:"flex items-center justify-center pointer-events-none"},U={key:1,class:"pointer-events-none"},H={class:"text-center"};function N(i,e,o,r,p,a){const l=y("router-link");return d(),n("div",V,[e[10]||(e[10]=s("div",{class:"absolute inset-0"},[s("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Événements",class:"w-full h-full object-cover opacity-40"}),s("div",{class:"absolute inset-0 bg-primea-blue/60"})],-1)),s("div",C,[s("div",M,[e[9]||(e[9]=s("div",{class:"text-center mb-8 animate-fade-in"},[s("img",{src:"/images/logo_white.png",alt:"Primea",class:"h-16 mx-auto mb-6"})],-1)),s("div",z,[e[8]||(e[8]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-3xl font-bold text-primea-blue mb-2"}," Mot de passe oublié ? "),s("p",{class:"text-gray-600 font-primea"}," Entrez votre adresse email pour recevoir un lien de réinitialisation ")],-1)),r.success?(d(),n("div",E,[s("div",B,[e[4]||(e[4]=s("svg",{class:"w-5 h-5 text-green-500 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),s("p",T,c(r.success),1)])])):m("",!0),s("form",{onSubmit:e[3]||(e[3]=v((...t)=>r.handleSubmit&&r.handleSubmit(...t),["prevent"])),class:"space-y-6"},[s("div",null,[e[5]||(e[5]=s("label",{for:"email",class:"block text-sm font-semibold text-primea-blue mb-2 font-primea"}," Adresse email ",-1)),b(s("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>r.email=t),placeholder:"votre.email@exemple.com",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-primea-lg focus:ring-2 focus:ring-primea-yellow focus:border-primea-blue transition-all duration-200 font-primea bg-white/90",required:"",disabled:r.loading},null,8,j),[[g,r.email]])]),r.error?(d(),n("div",q,[s("p",A,c(r.error),1)])):m("",!0),s("button",{type:"submit",disabled:r.loading,class:"w-full text-white py-4 px-6 rounded-primea-lg text-lg font-bold transition-all duration-200 shadow-primea-lg transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none font-primea",style:{backgroundColor:"#272d63",color:"#ffffff"},onMouseover:e[1]||(e[1]=t=>!r.loading&&(t.currentTarget.style.backgroundColor="#fab511",t.currentTarget.style.color="#272d63")),onMouseleave:e[2]||(e[2]=t=>!r.loading&&(t.currentTarget.style.backgroundColor="#272d63",t.currentTarget.style.color="#ffffff"))},[r.loading?(d(),n("span",S,[...e[6]||(e[6]=[s("svg",{class:"w-5 h-5 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24"},[s("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"}),s("path",{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",class:"opacity-75"})],-1),f(" Envoi en cours... ",-1)])])):(d(),n("span",U,"Envoyer le lien"))],40,D),s("div",H,[x(l,{to:"/login",class:"text-sm text-primea-blue hover:text-primea-yellow font-semibold transition-colors duration-200 font-primea"},{default:w(()=>[...e[7]||(e[7]=[f(" ← Retour à la connexion ",-1)])]),_:1})])],32)])])])])}const L=_(k,[["render",N],["__scopeId","data-v-01bbcf9f"]]);export{L as default};
