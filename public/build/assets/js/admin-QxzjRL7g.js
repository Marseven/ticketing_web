import{g as r,o as l,h as e,t as n,F as E,q as B,n as N,U as re,$ as ne,b as c,a0 as H,d as le,e as se,w as pe,l as M,p as oe,i as u,v as j,A as Z,L,j as ue,a as ce,a1 as ee,a2 as ge}from"./vue-vendor-DkyC1Igy.js";import{_ as te}from"./account-DxvTQ8Ng.js";import{i as ve}from"./vendor-BvANJOFB.js";const xe={name:"AdminDashboard",setup(){const v=c(!1),t=H({total_users:0,total_organizers:0,total_events:0,total_balance:0,orders_today:0,revenue_today:0,tickets_sold:0,failed_payments:0,successful_payments:0,pending_payments:0,payments_in_transit:0,platform_commission:0}),x=c([]),s=c([]),p=c([]),w=c([]),o=le(()=>p.value.length===0?1:Math.max(...p.value.map(_=>_.amount))),a=async()=>{v.value=!0;try{const P=await(await fetch("/api/v1/admin/dashboard",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();P.success&&(Object.assign(t,P.data.stats),x.value=P.data.recent_orders,s.value=P.data.recent_activity,p.value=P.data.revenue_data,w.value=P.data.top_events)}catch(_){console.error("Erreur chargement dashboard admin:",_)}finally{v.value=!1}},g=async()=>{try{const P=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(P.success){const d=P.data.balances.reduce((m,D)=>m+D.amount,0);alert(`Solde SHAP total: ${y(d)} XAF`)}}catch(_){console.error("Erreur vérification solde SHAP:",_)}},A=_=>{this.$router.push(`/admin/orders/${_.id}`)},y=_=>new Intl.NumberFormat("fr-FR").format(_),z=_=>new Date(_).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),T=_=>({pending:"En attente",paid:"Payé",cancelled:"Annulé",refunded:"Remboursé"})[_]||_,S=_=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[_]||"bg-gray-100 text-gray-800",I=_=>({order:"bg-blue-100 text-blue-600",payment:"bg-green-100 text-green-600",payout:"bg-yellow-100 text-yellow-600",user:"bg-purple-100 text-purple-600"})[_]||"bg-gray-100 text-gray-600",G=()=>{Object.assign(t,{total_users:1247,total_organizers:89,total_events:156,orders_today:23,revenue_today:285e4,successful_payments:142,pending_payments:8,failed_payments:3,payments_in_transit:475e4,platform_commission:285e3}),x.value=[{id:1,reference:"PMT-2025-001",customer_name:"Jean Dupont",customer_email:"jean@email.com",total_amount:15e3,status:"paid",created_at:new Date},{id:2,reference:"PMT-2025-002",customer_name:"Marie Martin",customer_email:"marie@email.com",total_amount:25e3,status:"pending",created_at:new Date(Date.now()-3e5)}]};return se(()=>{a(),setTimeout(()=>{t.total_users===0&&G()},2e3)}),{loading:v,stats:t,recentOrders:x,recentActivity:s,revenueData:p,topEvents:w,maxRevenue:o,loadDashboardData:a,checkShapBalance:g,viewOrder:A,formatAmount:y,formatDate:z,getOrderStatusName:T,getOrderStatusClass:S,getActivityIconClass:I}}},ye={class:"admin-dashboard p-6"},be={key:0,class:"flex justify-center items-center h-64"},he={key:1},we={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},_e={class:"flex items-center"},ke={class:"text-left"},Ce={class:"text-white opacity-80 text-sm"},Se={class:"flex items-center"},Ae={class:"text-left"},Me={class:"text-white opacity-80 text-sm"},je={class:"flex items-center"},Pe={class:"text-left"},Te={class:"text-gray-200 text-sm"},Oe={class:"flex items-center"},Fe={class:"text-left"},ze={class:"text-gray-200 text-sm"},Ue={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Re={class:"bg-white rounded-lg shadow p-6"},De={class:"flex items-center"},Ve={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},Ee={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Be={class:"ml-4"},Ie={class:"text-2xl font-bold",style:{color:"#272d63"}},qe={class:"bg-white rounded-lg shadow p-6"},Le={class:"flex items-center"},Ne={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},$e={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Xe={class:"ml-4"},He={class:"text-2xl font-bold",style:{color:"#fab511"}},Ge={class:"bg-white rounded-lg shadow p-6"},Ke={class:"flex items-center"},We={class:"ml-4"},Je={class:"text-2xl font-bold text-green-600"},Ye={class:"bg-white rounded-lg shadow p-6"},Qe={class:"flex items-center"},Ze={class:"ml-4"},et={class:"text-2xl font-bold text-red-600"},tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},st={class:"lg:col-span-2"},ot={class:"bg-white rounded-lg shadow p-6"},at={class:"flex justify-between items-center mb-4"},nt={key:0,class:"text-center text-gray-500 py-8"},rt={key:1,class:"overflow-x-auto"},lt={class:"w-full"},it={class:"divide-y divide-gray-200"},dt={class:"px-4 py-4 text-sm font-medium text-blue-600"},ut=["onClick"],ct={class:"px-4 py-4 text-sm text-gray-900"},mt={class:"px-4 py-4 text-sm font-medium text-gray-900"},gt={class:"px-4 py-4 text-sm"},pt={class:"px-4 py-4 text-sm text-gray-500"},ft={class:"lg:col-span-1 space-y-6"},vt={class:"bg-white rounded-lg shadow p-6"},xt={class:"space-y-3"},yt={class:"flex justify-between items-center"},bt={class:"bg-white rounded-lg shadow p-6"},ht={class:"space-y-3"},wt={class:"flex-1"},_t={class:"text-sm text-gray-900"},kt={class:"text-xs text-gray-500"},Ct={class:"bg-white rounded-lg shadow p-6"},St={class:"space-y-3"},At={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Mt={class:"bg-white rounded-lg shadow p-6"},jt={key:0,class:"text-center text-gray-500 py-8"},Pt={key:1,class:"space-y-3"},Tt={class:"text-sm text-gray-600"},Ot={class:"flex items-center"},Ft={class:"w-32 bg-gray-200 rounded-full h-2 mr-3"},zt={class:"text-sm font-medium"},Ut={class:"bg-white rounded-lg shadow p-6"},Rt={key:0,class:"text-center text-gray-500 py-8"},Dt={key:1,class:"space-y-4"},Vt={class:"flex items-center"},Et={class:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},Bt={class:"font-medium text-gray-900"},It={class:"text-sm text-gray-600"},qt={class:"text-right"},Lt={class:"font-medium text-gray-900"},Nt={class:"text-sm text-gray-600"};function $t(v,t,x,s,p,w){return l(),r("div",ye,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("div",{class:"text-white rounded-lg p-6",style:{background:"linear-gradient(135deg, #272d63 0%, #1a1e47 100%)"}},[e("h2",{class:"text-2xl font-bold mb-2"},"Tableau de Bord Primea"),e("p",{class:"text-white opacity-80"},"Supervision des paiements et transactions de la plateforme")])],-1)),s.loading?(l(),r("div",be,[...t[15]||(t[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),r("div",he,[e("div",we,[e("button",{onClick:t[0]||(t[0]=o=>v.$router.push("/admin/payments")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#272d63"}),onMouseleave:t[2]||(t[2]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#ffffff"})},[e("div",_e,[t[17]||(t[17]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1)),e("div",ke,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold"},"Paiements Transit",-1)),e("p",Ce,n(s.formatAmount(s.stats.payments_in_transit||0))+" XAF",1)])])],32),e("button",{onClick:t[3]||(t[3]=o=>v.$router.push("/admin/payouts")),class:"text-white p-6 rounded-lg transition-all transform hover:scale-105",style:{"background-color":"#fab511"},onMouseover:t[4]||(t[4]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511")},[e("div",Se,[t[19]||(t[19]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),e("div",Ae,[t[18]||(t[18]=e("h3",{class:"text-lg font-bold"},"Revenus Journaliers",-1)),e("p",Me,n(s.formatAmount(s.stats.revenue_today||0))+" XAF",1)])])],32),e("button",{onClick:t[6]||(t[6]=o=>v.$router.push("/admin/orders")),class:"bg-gray-600 text-white p-6 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-105"},[e("div",je,[t[21]||(t[21]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("div",Pe,[t[20]||(t[20]=e("h3",{class:"text-lg font-bold"},"Commandes",-1)),e("p",Te,n(s.stats.orders_today||0)+" aujourd'hui",1)])])]),e("button",{onClick:t[7]||(t[7]=o=>v.$router.push("/admin/users")),class:"bg-gray-700 text-white p-6 rounded-lg hover:bg-gray-800 transition-all transform hover:scale-105"},[e("div",Oe,[t[23]||(t[23]=e("svg",{class:"w-8 h-8 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-.5a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),e("div",Fe,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold"},"Utilisateurs",-1)),e("p",ze,n(s.stats.total_users||0)+" total",1)])])])]),e("div",Ue,[e("div",Re,[e("div",De,[e("div",Ve,[(l(),r("svg",Ee,[...t[24]||(t[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])]))]),e("div",Be,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Paiements Réussis",-1)),e("p",Ie,n(s.stats.successful_payments||0),1)])])]),e("div",qe,[e("div",Le,[e("div",Ne,[(l(),r("svg",$e,[...t[26]||(t[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),e("div",Xe,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Paiements En Attente",-1)),e("p",He,n(s.stats.pending_payments||0),1)])])]),e("div",Ge,[e("div",Ke,[t[29]||(t[29]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",We,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Commission Plateforme",-1)),e("p",Je,n(s.formatAmount(s.stats.platform_commission||0))+" XAF",1)])])]),e("div",Ye,[e("div",Qe,[t[31]||(t[31]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",Ze,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Paiements Échoués",-1)),e("p",et,n(s.stats.failed_payments||0),1)])])])]),e("div",tt,[e("div",st,[e("div",ot,[e("div",at,[t[32]||(t[32]=e("h2",{class:"text-xl font-bold",style:{color:"#272d63"}},"Paiements Récents",-1)),e("button",{onClick:t[8]||(t[8]=o=>v.$router.push("/admin/payments")),class:"text-sm transition-colors duration-200",style:{color:"#272d63"},onMouseover:t[9]||(t[9]=o=>o.currentTarget.style.color="#fab511"),onMouseleave:t[10]||(t[10]=o=>o.currentTarget.style.color="#272d63")},"Voir tous",32)]),s.recentOrders.length===0?(l(),r("div",nt," Aucune commande récente ")):(l(),r("div",rt,[e("table",lt,[t[33]||(t[33]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date")])],-1)),e("tbody",it,[(l(!0),r(E,null,B(s.recentOrders,o=>(l(),r("tr",{key:o.id},[e("td",dt,[e("button",{onClick:a=>s.viewOrder(o),class:"hover:text-blue-800"}," #"+n(o.reference),9,ut)]),e("td",ct,n(o.customer_name||o.customer_email),1),e("td",mt,n(s.formatAmount(o.total_amount))+" XAF",1),e("td",gt,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getOrderStatusClass(o.status)])},n(s.getOrderStatusName(o.status)),3)]),e("td",pt,n(s.formatDate(o.created_at)),1)]))),128))])])]))])]),e("div",ft,[e("div",vt,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"État du Système",-1)),e("div",xt,[t[35]||(t[35]=re('<div class="flex justify-between items-center" data-v-8191e77a><span class="text-sm text-gray-600" data-v-8191e77a>Paiements SHAP</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8191e77a> Opérationnel </span></div><div class="flex justify-between items-center" data-v-8191e77a><span class="text-sm text-gray-600" data-v-8191e77a>Base de données</span><span class="inline-flex px-2 py-1 text-xs rounded-full bg-green-100 text-green-800" data-v-8191e77a> Opérationnel </span></div>',2)),e("div",yt,[t[34]||(t[34]=e("span",{class:"text-sm text-gray-600"},"Solde SHAP",-1)),e("button",{onClick:t[11]||(t[11]=(...o)=>s.checkShapBalance&&s.checkShapBalance(...o)),class:"text-blue-600 hover:text-blue-800 text-xs"}," Vérifier ")])])]),e("div",bt,[t[38]||(t[38]=e("h2",{class:"text-xl font-bold mb-4"},"Activité Récente",-1)),e("div",ht,[(l(!0),r(E,null,B(s.recentActivity,o=>(l(),r("div",{key:o.id,class:"flex items-start"},[e("div",{class:N(["p-1 rounded-full mr-3",s.getActivityIconClass(o.type)])},[...t[37]||(t[37]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("circle",{cx:"10",cy:"10",r:"3"})],-1)])],2),e("div",wt,[e("p",_t,n(o.description),1),e("p",kt,n(s.formatDate(o.created_at)),1)])]))),128))])]),e("div",Ct,[t[42]||(t[42]=e("h2",{class:"text-xl font-bold mb-4"},"Actions Rapides",-1)),e("div",St,[e("button",{onClick:t[12]||(t[12]=o=>v.$router.push("/admin/users/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[39]||(t[39]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})]),e("span",{class:"font-medium"},"Créer Utilisateur")],-1)])]),e("button",{onClick:t[13]||(t[13]=o=>v.$router.push("/admin/organizers/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[40]||(t[40]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})]),e("span",{class:"font-medium"},"Créer Organisateur")],-1)])]),e("button",{onClick:t[14]||(t[14]=o=>v.$router.push("/admin/events/create")),class:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"},[...t[41]||(t[41]=[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-gray-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})]),e("span",{class:"font-medium"},"Créer Événement")],-1)])])])])])]),e("div",At,[e("div",Mt,[t[43]||(t[43]=e("h2",{class:"text-xl font-bold mb-4"},"Revenus (7 derniers jours)",-1)),s.revenueData.length===0?(l(),r("div",jt," Aucune donnée disponible ")):(l(),r("div",Pt,[(l(!0),r(E,null,B(s.revenueData,o=>(l(),r("div",{key:o.date,class:"flex justify-between items-center"},[e("span",Tt,n(s.formatDate(o.date)),1),e("div",Ot,[e("div",Ft,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ne(`width: ${o.amount/s.maxRevenue*100}%`)},null,4)]),e("span",zt,n(s.formatAmount(o.amount))+" XAF",1)])]))),128))]))]),e("div",Ut,[t[44]||(t[44]=e("h2",{class:"text-xl font-bold mb-4"},"Événements Populaires",-1)),s.topEvents.length===0?(l(),r("div",Rt," Aucun événement populaire ")):(l(),r("div",Dt,[(l(!0),r(E,null,B(s.topEvents,(o,a)=>(l(),r("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",Vt,[e("div",Et,n(a+1),1),e("div",null,[e("h3",Bt,n(o.title),1),e("p",It,n(o.organizer_name),1)])]),e("div",qt,[e("p",Lt,n(o.tickets_sold)+" tickets",1),e("p",Nt,n(s.formatAmount(o.revenue))+" XAF",1)])]))),128))]))])])]))])}const Xt=te(xe,[["render",$t],["__scopeId","data-v-8191e77a"]]),Bp=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"})),Ht={name:"ImageUpload",props:{modelValue:{type:Object,default:()=>({})},entityType:{type:String,required:!0,validator:v=>["events","venues","users","organizers"].includes(v)},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1},altText:{type:String,default:"Image"}},emits:["update:modelValue","change"],setup(v,{emit:t}){const x=c("upload"),s=c(null),p=c(""),w=c(""),o=c(!1),a=c(!1),g=c(!1),A=c(!1),y=c(!1),z=c(!1),T=c(""),S=le(()=>v.modelValue?.url?v.modelValue.url:v.modelValue?.filename?`/storage/images/${v.entityType}/${v.size}_${v.modelValue.filename}`:null),I=le(()=>{const f="object-cover rounded-lg shadow-sm",C={thumbnail:"w-20 h-20",medium:"w-32 h-32",large:"w-48 h-48"};return`${f} ${C[v.size]||C.medium}`}),G=f=>{f.preventDefault(),g.value=!1;const C=f.dataTransfer.files;C.length>0&&P(C[0])},_=f=>{const C=f.target.files;C.length>0&&P(C[0])},P=f=>{if(T.value="",!f.type.startsWith("image/")){T.value="Veuillez sélectionner un fichier image valide.";return}if(f.size>5*1024*1024){T.value="L'image ne doit pas dépasser 5MB.";return}s.value=f;const C=new FileReader;C.onload=k=>{p.value=k.target.result},C.readAsDataURL(f)},i=async()=>{if(s.value){A.value=!0,z.value=!0,T.value="";try{const f=new FormData;f.append("image",s.value),f.append("type",v.entityType);const k=await(await fetch("/api/v1/images/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:f})).json();if(k.success){const V={filename:k.data.filename,urls:k.data.urls};t("update:modelValue",V),t("change",V),s.value=null,p.value=""}else T.value=k.message||"Erreur lors de l'upload"}catch{T.value="Erreur de connexion lors de l'upload"}finally{A.value=!1,z.value=!1}}},d=async()=>{if(w.value){y.value=!0,z.value=!0,T.value="",a.value=!1;try{const C=await(await fetch("/api/v1/images/validate-url",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({url:w.value,type:v.entityType})})).json();C.success?o.value=!0:(a.value=!0,T.value=C.message)}catch{a.value=!0,T.value="Erreur lors de la validation de l'URL"}finally{y.value=!1,z.value=!1}}},m=()=>{const f={url:w.value};t("update:modelValue",f),t("change",f),w.value="",o.value=!1},D=()=>{t("update:modelValue",{}),t("change",{})},b=f=>{if(f===0)return"0 Bytes";const C=1024,k=["Bytes","KB","MB","GB"],V=Math.floor(Math.log(f)/Math.log(C));return parseFloat((f/Math.pow(C,V)).toFixed(2))+" "+k[V]};return pe([x],()=>{T.value="",a.value=!1}),{activeTab:x,selectedFile:s,previewUrl:p,imageUrl:w,urlPreview:o,urlError:a,isDragOver:g,uploading:A,validating:y,loading:z,error:T,currentImageUrl:S,imageClasses:I,handleDrop:G,handleFileSelect:_,uploadFile:i,validateImageUrl:d,confirmUrl:m,removeImage:D,formatFileSize:b}}},Gt={class:"image-upload-component"},Kt={key:0,class:"current-image mb-4"},Wt=["src","alt"],Jt={key:1,class:"upload-options"},Yt={class:"option-tabs mb-4"},Qt={key:0,class:"upload-tab"},Zt={key:0,class:"file-preview mt-4"},es=["src"],ts={class:"file-info"},ss={class:"file-name"},os={class:"file-size"},as=["disabled"],ns={key:0},rs={key:1},ls={key:1,class:"url-tab"},is={class:"url-input-group"},ds=["disabled"],us={key:0},cs={key:1},ms={key:0,class:"url-preview mt-4"},gs=["src"],ps={key:1,class:"error-message mt-2"},fs={key:2,class:"error-message mt-2"},vs={key:3,class:"loading-overlay"};function xs(v,t,x,s,p,w){return l(),r("div",Gt,[s.currentImageUrl?(l(),r("div",Kt,[e("img",{src:s.currentImageUrl,alt:x.altText,class:N(s.imageClasses)},null,10,Wt),x.disabled?M("",!0):(l(),r("button",{key:0,type:"button",onClick:t[0]||(t[0]=(...o)=>s.removeImage&&s.removeImage(...o)),class:"remove-btn"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])]))])):M("",!0),x.disabled?M("",!0):(l(),r("div",Jt,[e("div",Yt,[e("button",{type:"button",onClick:t[1]||(t[1]=o=>s.activeTab="upload"),class:N(["tab-btn",s.activeTab==="upload"?"active":""])}," Uploader une image ",2),e("button",{type:"button",onClick:t[2]||(t[2]=o=>s.activeTab="url"),class:N(["tab-btn",s.activeTab==="url"?"active":""])}," Utiliser une URL ",2)]),s.activeTab==="upload"?(l(),r("div",Qt,[e("div",{class:N(["upload-area",{dragover:s.isDragOver}]),onDrop:t[5]||(t[5]=(...o)=>s.handleDrop&&s.handleDrop(...o)),onDragover:[t[6]||(t[6]=oe(()=>{},["prevent"])),t[9]||(t[9]=o=>s.isDragOver=!0)],onDragenter:t[7]||(t[7]=oe(()=>{},["prevent"])),onDragleave:t[8]||(t[8]=o=>s.isDragOver=!1)},[e("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:t[3]||(t[3]=(...o)=>s.handleFileSelect&&s.handleFileSelect(...o)),style:{display:"none"}},null,544),e("div",{class:"upload-content",onClick:t[4]||(t[4]=o=>v.$refs.fileInput.click())},[...t[17]||(t[17]=[e("svg",{class:"upload-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),e("p",{class:"upload-text"},"Cliquez pour sélectionner ou glissez-déposez une image",-1),e("p",{class:"upload-subtext"},"PNG, JPG, GIF jusqu'à 5MB",-1)])])],34),s.selectedFile?(l(),r("div",Zt,[e("img",{src:s.previewUrl,alt:"Prévisualisation",class:"preview-image"},null,8,es),e("div",ts,[e("p",ss,n(s.selectedFile.name),1),e("p",os,n(s.formatFileSize(s.selectedFile.size)),1)]),e("button",{type:"button",onClick:t[10]||(t[10]=(...o)=>s.uploadFile&&s.uploadFile(...o)),disabled:s.uploading,class:"upload-btn"},[s.uploading?(l(),r("span",ns,"Upload en cours...")):(l(),r("span",rs,"Confirmer l'upload"))],8,as)])):M("",!0)])):M("",!0),s.activeTab==="url"?(l(),r("div",ls,[e("div",is,[u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.imageUrl=o),type:"url",placeholder:"https://exemple.com/image.jpg",class:"url-input",onBlur:t[12]||(t[12]=(...o)=>s.validateImageUrl&&s.validateImageUrl(...o))},null,544),[[j,s.imageUrl]]),e("button",{type:"button",onClick:t[13]||(t[13]=(...o)=>s.validateImageUrl&&s.validateImageUrl(...o)),disabled:s.validating,class:"validate-btn"},[s.validating?(l(),r("span",us,"Validation...")):(l(),r("span",cs,"Valider"))],8,ds)]),s.urlPreview?(l(),r("div",ms,[e("img",{src:s.imageUrl,alt:"Prévisualisation URL",class:"preview-image",onError:t[14]||(t[14]=o=>s.urlError=!0)},null,40,gs),e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.confirmUrl&&s.confirmUrl(...o)),class:"confirm-btn"},"Utiliser cette image")])):M("",!0),s.urlError?(l(),r("div",ps," L'URL ne pointe pas vers une image valide ou accessible. ")):M("",!0)])):M("",!0)])),s.error?(l(),r("div",fs,n(s.error),1)):M("",!0),s.loading?(l(),r("div",vs,[...t[18]||(t[18]=[e("div",{class:"loading-spinner"},null,-1)])])):M("",!0)])}const me=te(Ht,[["render",xs],["__scopeId","data-v-15a93d0e"]]),ys={name:"UserManagement",components:{ImageUpload:me},setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(!1),p=c(null),w=c(null),o=c([]),a=H({search:"",role:"",status:""}),g=H({name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}});let A=null;const y=async()=>{v.value=!0;try{const b=new URLSearchParams;a.search&&b.append("search",a.search),a.role&&b.append("role",a.role),a.status&&b.append("status",a.status);const C=await(await fetch(`/api/v1/admin/users?${b}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();C.success&&(o.value=C.data.users.data||C.data.users)}catch(b){console.error("Erreur chargement utilisateurs:",b)}finally{v.value=!1}},z=()=>{clearTimeout(A),A=setTimeout(()=>{y()},500)},T=()=>{p.value=null,Object.assign(g,{name:"",email:"",password:"",is_admin:!1,is_organizer:!1,is_active:!0,avatar:{}}),x.value=!0},S=b=>{p.value=b;let f={};b.avatar_url?f.url=b.avatar_url:b.avatar_file&&(f.filename=b.avatar_file),Object.assign(g,{name:b.name,email:b.email,password:"",is_admin:b.roles?.some(C=>C.slug==="admin")||!1,is_organizer:b.roles?.some(C=>C.slug==="organizer")||!1,is_active:b.status==="active",avatar:f}),x.value=!0},I=async()=>{t.value=!0;try{const b=p.value?`/api/v1/admin/users/${p.value.id}`:"/api/v1/admin/users",f=p.value?"PUT":"POST",C={...g};delete C.password,g.avatar.url?(C.avatar_url=g.avatar.url,C.avatar_file=null):g.avatar.filename&&(C.avatar_file=g.avatar.filename,C.avatar_url=null),delete C.avatar;const V=await(await fetch(b,{method:f,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(C)})).json();V.success?(Toast.fire({icon:"success",title:V.message||(p.value?"Utilisateur mis à jour avec succès":"Utilisateur créé avec succès")}),x.value=!1,y()):Swal.fire({icon:"error",title:"Erreur",text:V.message||"Erreur lors de la sauvegarde"})}catch(b){console.error("Erreur sauvegarde utilisateur:",b),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},G=async b=>{if((await confirmAction("Changer le statut de l'utilisateur",`Êtes-vous sûr de vouloir ${b.status==="active"?"désactiver":"activer"} cet utilisateur ?`,b.status==="active"?"Désactiver":"Activer")).isConfirmed)try{const k=await(await fetch(`/api/v1/admin/users/${b.id}/toggle-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();k.success?(Toast.fire({icon:"success",title:k.message||"Statut mis à jour avec succès"}),y()):Swal.fire({icon:"error",title:"Erreur",text:k.message||"Erreur lors du changement de statut"})}catch(C){console.error("Erreur toggle statut:",C),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors du changement de statut"})}},_=b=>{w.value=b,s.value=!0},P=async b=>{if((await confirmAction("Réinitialiser le mot de passe",`Envoyer un email de réinitialisation à ${b.name} (${b.email}) ?`,"Envoyer l'email")).isConfirmed)try{const k=await(await fetch(`/api/v1/admin/users/${b.id}/reset-password`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();k.success?Toast.fire({icon:"success",title:k.message||"Email de réinitialisation envoyé avec succès"}):Swal.fire({icon:"error",title:"Erreur",text:k.message||"Erreur lors de l'envoi de l'email"})}catch(C){console.error("Erreur reset mot de passe:",C),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de l'envoi de l'email"})}},i=()=>{Object.assign(a,{search:"",role:"",status:""}),y()},d=b=>{g.avatar=b},m=b=>new Date(b).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),D=b=>({admin:"Administrateur",organizer:"Organisateur",client:"Client"})[b]||b;return se(()=>{y()}),{loading:v,saving:t,showModal:x,showDetailsModal:s,editingUser:p,selectedUser:w,users:o,filters:a,userForm:g,loadUsers:y,debouncedSearch:z,openCreateModal:T,editUser:S,saveUser:I,toggleUserStatus:G,viewUserDetails:_,resetUserPassword:P,resetFilters:i,handleImageChange:d,formatDate:m,getRoleName:D}}},bs={class:"user-management p-6 bg-gray-50 min-h-screen"},hs={class:"mb-8"},ws={class:"flex items-center justify-between"},_s={class:"bg-white rounded-lg shadow p-6 mb-8"},ks={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Cs={class:"flex items-end"},Ss={class:"bg-white rounded-lg shadow"},As={key:0,class:"p-8 text-center"},Ms={key:1,class:"p-8 text-center text-gray-500"},js={key:2,class:"overflow-x-auto"},Ps={class:"w-full"},Ts={class:"divide-y divide-gray-200"},Os={class:"px-6 py-4"},Fs={class:"flex items-center"},zs={class:"w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold"},Us={class:"ml-4"},Rs={class:"text-sm font-medium text-gray-900"},Ds={class:"text-sm text-gray-500"},Vs={class:"px-6 py-4 text-sm text-gray-900"},Es={class:"px-6 py-4 text-sm"},Bs={class:"space-y-1"},Is={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},qs={class:"px-6 py-4 text-sm"},Ls=["onClick"],Ns={class:"px-6 py-4 text-sm text-gray-500"},$s={class:"px-6 py-4 text-sm space-x-2"},Xs=["onClick"],Hs=["onClick"],Gs=["onClick"],Ks={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ws={class:"bg-white rounded-lg p-6 w-full max-w-md"},Js={class:"text-lg font-bold mb-4"},Ys={class:"space-y-4"},Qs={key:0,class:"bg-blue-50 p-4 rounded-lg"},Zs={class:"space-y-2"},eo={class:"flex items-center"},to={class:"flex items-center"},so={key:1},oo={class:"flex items-center"},ao={class:"flex justify-end space-x-3 mt-6"},no=["disabled"],ro={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},lo={class:"bg-white rounded-lg p-6 w-full max-w-lg"},io={class:"flex justify-between items-center mb-4"},uo={key:0,class:"space-y-4"},co={class:"grid grid-cols-2 gap-4"},mo={class:"text-sm text-gray-900"},go={class:"text-sm text-gray-900"},po={class:"text-sm"},fo={class:"space-y-1"},vo={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},xo={class:"text-sm text-gray-900"},yo={class:"text-sm text-gray-900"},bo={key:0},ho={class:"text-sm text-gray-900"};function wo(v,t,x,s,p,w){const o=ce("ImageUpload");return l(),r("div",bs,[e("div",hs,[e("div",ws,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Utilisateurs"),e("p",{class:"text-gray-600"},"Créer, modifier et gérer tous les utilisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...a)=>s.openCreateModal&&s.openCreateModal(...a)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[17]||(t[17]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Créer Utilisateur ",-1)])])])]),e("div",_s,[t[24]||(t[24]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",ks,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.filters.search=a),onInput:t[2]||(t[2]=(...a)=>s.debouncedSearch&&s.debouncedSearch(...a)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rôle",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.filters.role=a),onChange:t[4]||(t[4]=(...a)=>s.loadUsers&&s.loadUsers(...a)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous les rôles",-1),e("option",{value:"admin"},"Administrateur",-1),e("option",{value:"organizer"},"Organisateur",-1),e("option",{value:"client"},"Client",-1)])],544),[[L,s.filters.role]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.filters.status=a),onChange:t[6]||(t[6]=(...a)=>s.loadUsers&&s.loadUsers(...a)),class:"w-full border rounded-lg px-3 py-2"},[...t[22]||(t[22]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[L,s.filters.status]])]),e("div",Cs,[e("button",{onClick:t[7]||(t[7]=(...a)=>s.resetFilters&&s.resetFilters(...a)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",Ss,[t[27]||(t[27]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Utilisateurs")],-1)),s.loading?(l(),r("div",As,[...t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.users.length===0?(l(),r("div",Ms," Aucun utilisateur trouvé ")):(l(),r("div",js,[e("table",Ps,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Rôles"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Inscription"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ts,[(l(!0),r(E,null,B(s.users,a=>(l(),r("tr",{key:a.id},[e("td",Os,[e("div",Fs,[e("div",zs,n(a.name.charAt(0).toUpperCase()),1),e("div",Us,[e("div",Rs,n(a.name),1),e("div",Ds,"ID: "+n(a.id),1)])])]),e("td",Vs,n(a.email),1),e("td",Es,[e("div",Bs,[a.roles&&a.roles.length>0?(l(!0),r(E,{key:0},B(a.roles,g=>(l(),r("span",{key:g.id,class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":g.slug==="admin","bg-green-100 text-green-800":g.slug==="organizer","bg-gray-100 text-gray-800":g.slug==="client"}])},n(s.getRoleName(g.slug)),3))),128)):(l(),r("span",Is," Aucun rôle "))])]),e("td",qs,[e("button",{onClick:g=>s.toggleUserStatus(a),class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full cursor-pointer",a.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(a.status==="active"?"Actif":"Inactif"),11,Ls)]),e("td",Ns,n(s.formatDate(a.created_at)),1),e("td",$s,[e("button",{onClick:g=>s.editUser(a),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Xs),e("button",{onClick:g=>s.viewUserDetails(a),class:"text-green-600 hover:text-green-900"}," Détails ",8,Hs),e("button",{onClick:g=>s.resetUserPassword(a),class:"text-orange-600 hover:text-orange-900"}," Reset mot de passe ",8,Gs)])]))),128))])])]))]),s.showModal?(l(),r("div",Ks,[e("div",Ws,[e("h3",Js,n(s.editingUser?"Modifier":"Créer")+" Utilisateur",1),e("form",{onSubmit:t[15]||(t[15]=oe((...a)=>s.saveUser&&s.saveUser(...a),["prevent"]))},[e("div",Ys,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>s.userForm.name=a),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.userForm.name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>s.userForm.email=a),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.userForm.email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photo de profil",-1)),ue(o,{modelValue:s.userForm.avatar,"onUpdate:modelValue":t[10]||(t[10]=a=>s.userForm.avatar=a),"entity-type":"users",size:"medium","alt-text":"Photo de profil",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),s.editingUser?M("",!0):(l(),r("div",Qs,[...t[31]||(t[31]=[e("p",{class:"text-sm text-blue-800"},[e("svg",{class:"w-5 h-5 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})]),Z(" Un email sera envoyé à l'utilisateur pour qu'il définisse son mot de passe ")],-1)])])),e("div",Zs,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("label",eo,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=a=>s.userForm.is_admin=a),class:"rounded border-gray-300"},null,512),[[ee,s.userForm.is_admin]]),t[32]||(t[32]=e("span",{class:"ml-2 text-sm text-gray-700"},"Administrateur",-1))]),e("label",to,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=a=>s.userForm.is_organizer=a),class:"rounded border-gray-300"},null,512),[[ee,s.userForm.is_organizer]]),t[33]||(t[33]=e("span",{class:"ml-2 text-sm text-gray-700"},"Organisateur",-1))])]),s.editingUser?(l(),r("div",so,[e("label",oo,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=a=>s.userForm.is_active=a),class:"rounded border-gray-300"},null,512),[[ee,s.userForm.is_active]]),t[35]||(t[35]=e("span",{class:"ml-2 text-sm text-gray-700"},"Compte actif",-1))])])):M("",!0)]),e("div",ao,[e("button",{type:"button",onClick:t[14]||(t[14]=a=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},n(s.saving?"Enregistrement...":s.editingUser?"Mettre à jour":"Créer"),9,no)])],32)])])):M("",!0),s.showDetailsModal?(l(),r("div",ro,[e("div",lo,[e("div",io,[t[37]||(t[37]=e("h3",{class:"text-lg font-bold"},"Détails de l'utilisateur",-1)),e("button",{type:"button",onClick:t[16]||(t[16]=a=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[36]||(t[36]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedUser?(l(),r("div",uo,[e("div",co,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",mo,n(s.selectedUser.name),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",go,n(s.selectedUser.email),1)]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",po,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedUser.deleted_at?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},n(s.selectedUser.deleted_at?"Inactif":"Actif"),3)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700"},"Rôles",-1)),e("div",fo,[s.selectedUser.roles&&s.selectedUser.roles.length>0?(l(!0),r(E,{key:0},B(s.selectedUser.roles,a=>(l(),r("span",{key:a.id,class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full mr-1",{"bg-red-100 text-red-800":a.slug==="admin","bg-green-100 text-green-800":a.slug==="organizer","bg-gray-100 text-gray-800":a.slug==="client"}])},n(s.getRoleName(a.slug)),3))),128)):(l(),r("span",vo," Aucun rôle "))])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date d'inscription",-1)),e("p",xo,n(s.formatDate(s.selectedUser.created_at)),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email vérifié",-1)),e("p",yo,n(s.selectedUser.email_verified_at?"Oui":"Non"),1)])]),s.selectedUser.is_organizer&&s.selectedUser.organizers_count>0?(l(),r("div",bo,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateurs",-1)),e("p",ho,n(s.selectedUser.organizers_count)+" organisateur(s)",1)])):M("",!0)])):M("",!0)])])):M("",!0)])}const _o=te(ys,[["render",wo],["__scopeId","data-v-14f06e99"]]),Ip=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),ko={name:"OrganizerManagement",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(!1),p=c(!1),w=c(!1),o=c(null),a=c(null),g=c(null),A=c([]),y=c([]),z=c(null);let T=null;const S=H({search:"",status:"",verified:""}),I=H({name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),G=H({user_ids:[]});let _=null;const P=async()=>{v.value=!0;try{const F=new URLSearchParams;S.search&&F.append("search",S.search),S.status&&F.append("status",S.status),S.verified&&F.append("verified",S.verified);const ae=await(await fetch(`/api/v1/admin/organizers?${F}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();ae.success&&(A.value=ae.data.organizers.data||ae.data.organizers)}catch(F){console.error("Erreur chargement organisateurs:",F)}finally{v.value=!1}},i=async()=>{try{const Y=await(await fetch("/api/v1/admin/users?role=organizer",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(Y.success){const ae=Y.data.users.data||Y.data.users||[];y.value=ae.filter(de=>de.roles&&de.roles.some(O=>O.slug==="organizer"))}}catch(F){console.error("Erreur chargement utilisateurs:",F)}},d=()=>{clearTimeout(_),_=setTimeout(()=>{P()},500)},m=async()=>{o.value=null,Object.assign(I,{name:"",bio:"",contact_email:"",contact_phone:"",status:"active",user_ids:[]}),await i(),s.value=!0,await ge(),h()},D=async F=>{o.value=F,Object.assign(I,{name:F.name,bio:F.bio||"",contact_email:F.contact_email,contact_phone:F.contact_phone||"",status:F.status,user_ids:F.users?F.users.map(Y=>Y.id):[]}),await i(),s.value=!0,await ge(),h()},b=async()=>{t.value=!0;try{const F=o.value?`/api/v1/admin/organizers/${o.value.id}`:"/api/v1/admin/organizers",Y=o.value?"PUT":"POST",ae={...I};T&&T.isValidNumber()&&(ae.contact_phone=T.getNumber());const de=await fetch(F,{method:Y,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(ae)});if(de.status===404&&o.value){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),s.value=!1,U(),P();return}const O=await de.json();O.success?(Toast.fire({icon:"success",title:O.message||(o.value?"Organisateur mis à jour avec succès":"Organisateur créé avec succès")}),s.value=!1,U(),P()):Swal.fire({icon:"error",title:"Erreur",text:O.message||"Erreur lors de la sauvegarde"})}catch(F){console.error("Erreur sauvegarde organisateur:",F),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},f=F=>{a.value=F,p.value=!0},C=async F=>{g.value=F,G.user_ids=F.users?F.users.map(Y=>Y.id):[],await i(),w.value=!0},k=async()=>{x.value=!0;try{const F=await fetch(`/api/v1/admin/organizers/${g.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify(G)});if(F.status===404){Swal.fire({icon:"error",title:"Organisateur introuvable",text:"Cet organisateur n'existe plus. La liste va être actualisée."}),w.value=!1,P();return}const Y=await F.json();Y.success?(Toast.fire({icon:"success",title:"Utilisateurs mis à jour avec succès"}),w.value=!1,P()):Swal.fire({icon:"error",title:"Erreur",text:Y.message||"Erreur lors de la mise à jour"})}catch(F){console.error("Erreur mise à jour utilisateurs:",F),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la mise à jour"})}finally{x.value=!1}},V=()=>{Object.assign(S,{search:"",status:"",verified:""}),P()},h=()=>{z.value&&!T&&(T=ve(z.value,{initialCountry:"ga",preferredCountries:["ga","cm","cg","ci","sn"],separateDialCode:!0,utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@25.11.1/build/js/utils.js"}),z.value.addEventListener("input",()=>{T.isValidNumber()&&(I.contact_phone=T.getNumber())}),z.value.addEventListener("countrychange",()=>{I.contact_phone=T.getNumber()}))},U=()=>{T&&(T.destroy(),T=null)},W=()=>{U(),s.value=!1},ie=F=>new Date(F).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=F=>({active:"Actif",inactive:"Inactif"})[F]||F,K=F=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"})[F]||"bg-gray-100 text-gray-800",$=()=>{A.value=[],y.value=[],a.value=null,g.value=null,o.value=null,s.value=!1,p.value=!1,w.value=!1,P()};return se(()=>{$()}),{loading:v,saving:t,updatingUsers:x,showModal:s,showDetailsModal:p,showUserModal:w,editingOrganizer:o,selectedOrganizer:a,managingOrganizer:g,organizers:A,availableUsers:y,filters:S,organizerForm:I,userManagementForm:G,phoneInput:z,loadOrganizers:P,loadAvailableUsers:i,debouncedSearch:d,openCreateModal:m,editOrganizer:D,saveOrganizer:b,viewOrganizerDetails:f,manageUsers:C,updateOrganizerUsers:k,resetFilters:V,initPhoneInput:h,destroyPhoneInput:U,closeModal:W,forceRefresh:$,formatDate:ie,getStatusName:R,getStatusBadgeClass:K}}},Co={class:"organizer-management p-6 bg-gray-50 min-h-screen"},So={class:"mb-8"},Ao={class:"flex items-center justify-between"},Mo={class:"bg-white rounded-lg shadow p-6 mb-8"},jo={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Po={class:"flex items-end space-x-2"},To={class:"bg-white rounded-lg shadow"},Oo={key:0,class:"p-8 text-center"},Fo={key:1,class:"p-8 text-center text-gray-500"},zo={key:2,class:"overflow-x-auto"},Uo={class:"w-full"},Ro={class:"divide-y divide-gray-200"},Do={class:"px-6 py-4"},Vo={class:"flex items-center"},Eo={class:"w-10 h-10 bg-green-600 text-white rounded-full flex items-center justify-center font-bold"},Bo={class:"ml-4"},Io={class:"text-sm font-medium text-gray-900"},qo={class:"text-sm text-gray-500"},Lo={class:"px-6 py-4"},No={class:"text-sm text-gray-900"},$o={class:"text-sm text-gray-500"},Xo={class:"px-6 py-4 text-sm text-gray-900"},Ho={class:"flex flex-wrap gap-1"},Go={key:0,class:"text-gray-500 text-xs"},Ko={class:"px-6 py-4 text-sm text-gray-900"},Wo={class:"px-6 py-4 text-sm"},Jo={class:"px-6 py-4 text-sm"},Yo={class:"px-6 py-4 text-sm space-x-2"},Qo=["onClick"],Zo=["onClick"],ea=["onClick"],ta={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},sa={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto"},oa={class:"text-lg font-bold mb-4"},aa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},na={class:"md:col-span-2"},ra={class:"md:col-span-2"},la={class:"md:col-span-2"},ia={class:"border rounded-lg p-3 max-h-32 overflow-y-auto"},da=["value"],ua={class:"ml-2 text-sm"},ca={key:0,class:"text-sm text-gray-500"},ma={class:"flex justify-end space-x-3 mt-6"},ga=["disabled"],pa={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fa={class:"bg-white rounded-lg p-6 w-full max-w-2xl"},va={class:"flex justify-between items-center mb-4"},xa={key:0,class:"space-y-4"},ya={class:"grid grid-cols-2 gap-4"},ba={class:"text-sm text-gray-900"},ha={class:"text-sm text-gray-900"},wa={class:"text-sm text-gray-900"},_a={class:"text-sm text-gray-900"},ka={class:"text-sm"},Ca={class:"text-sm"},Sa={class:"text-sm text-gray-900"},Aa={class:"text-sm text-gray-900"},Ma={key:0},ja={class:"text-sm text-gray-900"},Pa={key:1},Ta={class:"flex flex-wrap gap-2"},Oa={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Fa={class:"bg-white rounded-lg p-6 w-full max-w-md"},za={class:"flex justify-between items-center mb-4"},Ua={key:0,class:"space-y-4"},Ra={class:"font-medium text-gray-900 mb-2"},Da={class:"border rounded-lg p-3 max-h-64 overflow-y-auto"},Va={class:"text-sm font-medium"},Ea={class:"text-xs text-gray-500 block"},Ba=["value"],Ia={class:"flex justify-end space-x-3"},qa=["disabled"];function La(v,t,x,s,p,w){return l(),r("div",Co,[e("div",So,[e("div",Ao,[t[23]||(t[23]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Organisateurs"),e("p",{class:"text-gray-600"},"Créer et gérer les organisateurs de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreateModal&&s.openCreateModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Créer Organisateur ",-1)])])])]),e("div",Mo,[t[29]||(t[29]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",jo,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Nom ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[25]||(t[25]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],544),[[L,s.filters.status]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut actif",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.verified=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrganizers&&s.loadOrganizers(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[27]||(t[27]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Actif",-1),e("option",{value:"false"},"Inactif",-1)])],544),[[L,s.filters.verified]])]),e("div",Po,[e("button",{onClick:t[7]||(t[7]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser "),e("button",{onClick:t[8]||(t[8]=(...o)=>s.forceRefresh&&s.forceRefresh(...o)),class:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600"}," Actualiser ")])])]),e("div",To,[t[32]||(t[32]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Organisateurs")],-1)),s.loading?(l(),r("div",Oo,[...t[30]||(t[30]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.organizers.length===0?(l(),r("div",Fo," Aucun organisateur trouvé ")):(l(),r("div",zo,[e("table",Uo,[t[31]||(t[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Utilisateurs"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actif"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ro,[(l(!0),r(E,null,B(s.organizers,o=>(l(),r("tr",{key:o.id},[e("td",Do,[e("div",Vo,[e("div",Eo,n(o.name.charAt(0).toUpperCase()),1),e("div",Bo,[e("div",Io,n(o.name),1),e("div",qo,n(o.slug),1)])])]),e("td",Lo,[e("div",No,n(o.contact_email),1),e("div",$o,n(o.contact_phone||"-"),1)]),e("td",Xo,[e("div",Ho,[(l(!0),r(E,null,B(o.users,a=>(l(),r("span",{key:a.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},n(a.name),1))),128)),o.users.length===0?(l(),r("span",Go," Aucun utilisateur ")):M("",!0)])]),e("td",Ko,n(o.events_count||0),1),e("td",Wo,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},n(s.getStatusName(o.status)),3)]),e("td",Jo,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(o.is_active?"Actif":"Inactif"),3)]),e("td",Yo,[e("button",{onClick:a=>s.editOrganizer(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Qo),e("button",{onClick:a=>s.viewOrganizerDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,Zo),e("button",{onClick:a=>s.manageUsers(o),class:"text-purple-600 hover:text-purple-900"}," Utilisateurs ",8,ea)])]))),128))])])]))]),s.showModal?(l(),r("div",ta,[e("div",sa,[e("h3",oa,n(s.editingOrganizer?"Modifier":"Créer")+" Organisateur",1),e("form",{onSubmit:t[16]||(t[16]=oe((...o)=>s.saveOrganizer&&s.saveOrganizer(...o),["prevent"]))},[e("div",aa,[e("div",na,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de l'organisation *",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.organizerForm.name=o),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.name]])]),e("div",ra,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Biographie",-1)),u(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.organizerForm.bio=o),rows:"3",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.bio]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.organizerForm.contact_email=o),type:"email",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.organizerForm.contact_email]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),u(e("input",{ref:"phoneInput","onUpdate:modelValue":t[12]||(t[12]=o=>s.organizerForm.contact_phone=o),type:"tel",class:"w-full border rounded-lg px-3 py-2",placeholder:"Téléphone"},null,512),[[j,s.organizerForm.contact_phone]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),u(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.organizerForm.status=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[37]||(t[37]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[L,s.organizerForm.status]])]),e("div",la,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Utilisateurs associés",-1)),e("div",ia,[(l(!0),r(E,null,B(s.availableUsers,o=>(l(),r("div",{key:o.id,class:"flex items-center mb-2"},[u(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[14]||(t[14]=a=>s.organizerForm.user_ids=a),class:"rounded border-gray-300"},null,8,da),[[ee,s.organizerForm.user_ids]]),e("span",ua,n(o.name)+" ("+n(o.email)+")",1)]))),128)),s.availableUsers.length===0?(l(),r("div",ca," Aucun utilisateur disponible ")):M("",!0)])])]),e("div",ma,[e("button",{type:"button",onClick:t[15]||(t[15]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},n(s.saving?"Enregistrement...":s.editingOrganizer?"Mettre à jour":"Créer"),9,ga)])],32)])])):M("",!0),s.showDetailsModal?(l(),r("div",pa,[e("div",fa,[e("div",va,[t[41]||(t[41]=e("h3",{class:"text-lg font-bold"},"Détails de l'organisateur",-1)),e("button",{onClick:t[17]||(t[17]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[40]||(t[40]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrganizer?(l(),r("div",xa,[e("div",ya,[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",ba,n(s.selectedOrganizer.name),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"Slug",-1)),e("p",ha,n(s.selectedOrganizer.slug),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",wa,n(s.selectedOrganizer.contact_email),1)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",_a,n(s.selectedOrganizer.contact_phone||"-"),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("p",ka,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrganizer.status)])},n(s.getStatusName(s.selectedOrganizer.status)),3)])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut actif",-1)),e("p",Ca,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.selectedOrganizer.is_active?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(s.selectedOrganizer.is_active?"Actif":"Inactif"),3)])]),e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Sa,n(s.formatDate(s.selectedOrganizer.created_at)),1)]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événements",-1)),e("p",Aa,n(s.selectedOrganizer.events_count||0)+" événement(s)",1)])]),s.selectedOrganizer.bio?(l(),r("div",Ma,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Biographie",-1)),e("p",ja,n(s.selectedOrganizer.bio),1)])):M("",!0),s.selectedOrganizer.users&&s.selectedOrganizer.users.length>0?(l(),r("div",Pa,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Utilisateurs associés",-1)),e("div",Ta,[(l(!0),r(E,null,B(s.selectedOrganizer.users,o=>(l(),r("span",{key:o.id,class:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full"},n(o.name),1))),128))])])):M("",!0)])):M("",!0)])])):M("",!0),s.showUserModal?(l(),r("div",Oa,[e("div",Fa,[e("div",za,[t[53]||(t[53]=e("h3",{class:"text-lg font-bold"},"Gérer les utilisateurs",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showUserModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[52]||(t[52]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.managingOrganizer?(l(),r("div",Ua,[e("div",null,[e("h4",Ra,n(s.managingOrganizer.name),1),t[54]||(t[54]=e("p",{class:"text-sm text-gray-600 mb-4"},"Sélectionnez les utilisateurs à associer à cet organisateur",-1))]),e("div",Da,[(l(!0),r(E,null,B(s.availableUsers,o=>(l(),r("div",{key:o.id,class:"flex items-center justify-between py-2"},[e("div",null,[e("span",Va,n(o.name),1),e("span",Ea,n(o.email),1)]),u(e("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[19]||(t[19]=a=>s.userManagementForm.user_ids=a),class:"rounded border-gray-300"},null,8,Ba),[[ee,s.userManagementForm.user_ids]])]))),128))]),e("div",Ia,[e("button",{onClick:t[20]||(t[20]=o=>s.showUserModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{onClick:t[21]||(t[21]=(...o)=>s.updateOrganizerUsers&&s.updateOrganizerUsers(...o)),disabled:s.updatingUsers,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},n(s.updatingUsers?"Mise à jour...":"Mettre à jour"),9,qa)])])):M("",!0)])])):M("",!0)])}const Na=te(ko,[["render",La],["__scopeId","data-v-21a8738d"]]),qp=Object.freeze(Object.defineProperty({__proto__:null,default:Na},Symbol.toStringTag,{value:"Module"})),$a={name:"EventManagement",components:{ImageUpload:me},setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(!1),p=c(null),w=c(null),o=c([]),a=c([]),g=c([]),A=c([]),y=c(null),z=H({total_events:0,published_events:0,draft_events:0,total_tickets_sold:0}),T=H({search:"",status:"",organizer_id:"",category_id:"",page:1}),S=H({title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},schedules:[],ticket_types:[],new_venue_name:"",new_venue_city:"",new_venue_address:""}),I=c(!1);let G=null;const _=async()=>{v.value=!0;try{const O=new URLSearchParams;Object.keys(T).forEach(Q=>{T[Q]&&T[Q]!==""&&O.append(Q,T[Q])});const q=await(await fetch(`/api/v1/admin/events?${O}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();if(q.success){o.value=q.data.events.data,y.value={current_page:q.data.events.current_page,last_page:q.data.events.last_page,from:q.data.events.from,to:q.data.events.to,total:q.data.events.total};const Q=q.data.events.data;z.total_events=y.value.total,z.published_events=Q.filter(X=>X.status==="published").length,z.draft_events=Q.filter(X=>X.status==="draft").length,z.total_tickets_sold=Q.reduce((X,fe)=>X+(fe.tickets_sold||0),0)}}catch(O){console.error("Erreur chargement événements:",O)}finally{v.value=!1}},P=async()=>{try{const J=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();J.success&&(a.value=J.data.organizers.data||J.data.organizers)}catch(O){console.error("Erreur chargement organisateurs:",O)}},i=async()=>{try{const J=await(await fetch("/api/v1/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();console.log("Categories response:",J),J.success&&(g.value=J.categories||J.data,console.log("Categories loaded:",g.value))}catch(O){console.error("Erreur chargement catégories:",O)}},d=async()=>{try{const J=await(await fetch("/api/v1/venues",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")}})).json();J.success&&(A.value=J.venues||J.data)}catch(O){console.error("Erreur chargement lieux:",O),A.value=[]}},m=()=>{clearTimeout(G),G=setTimeout(()=>{T.page=1,_()},500)},D=O=>{O>=1&&O<=y.value.last_page&&(T.page=O,_())},b=()=>{Object.assign(T,{search:"",status:"",organizer_id:"",category_id:"",page:1}),_()},f=()=>{p.value=null,Object.assign(S,{title:"",description:"",organizer_id:"",category_id:"",venue_id:"",status:"draft",image:{},new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:0,capacity:0,description:""}]}),I.value=!1,x.value=!0},C=async O=>{try{const q=await(await fetch(`/api/v1/admin/events/${O.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(q.success){p.value=q.data.event;let Q={};q.data.event.image_url?Q.url=q.data.event.image_url:q.data.event.image_file&&(Q.filename=q.data.event.image_file),Object.assign(S,{title:q.data.event.title,description:q.data.event.description,organizer_id:q.data.event.organizer_id,category_id:q.data.event.category_id,venue_id:q.data.event.venue_id,status:q.data.event.status,image:Q,schedules:q.data.event.schedules?.map(X=>({starts_at:X.starts_at?X.starts_at.slice(0,16):"",ends_at:X.ends_at?X.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(q.data.event.ticket_types||q.data.event.ticketTypes||[]).map(X=>({name:X.name,price:X.price,capacity:X.capacity||X.available_quantity||X.max_quantity||X.quantity||0,description:X.description||""}))}),(!S.ticket_types||S.ticket_types.length===0)&&(S.ticket_types=[{name:"",price:0,capacity:0,description:""}]),x.value=!0}}catch(J){console.error("Erreur chargement événement:",J)}},k=async()=>{t.value=!0;try{const O=p.value?`/api/v1/admin/events/${p.value.id}`:"/api/v1/admin/events",J=p.value?"PUT":"POST",q={...S};S.image.url?(q.image_url=S.image.url,q.image_file=null):S.image.filename&&(q.image_file=S.image.filename,q.image_url=null),delete q.image;const X=await(await fetch(O,{method:J,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(q)})).json();X.success?(Swal.fire({icon:"success",title:"Succès",text:p.value?"Événement mis à jour avec succès":"Événement créé avec succès"}),x.value=!1,_()):Swal.fire({icon:"error",title:"Erreur",text:X.message||"Erreur lors de la sauvegarde"})}catch(O){console.error("Erreur sauvegarde événement:",O),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la sauvegarde"})}finally{t.value=!1}},V=async O=>{try{const q=await(await fetch(`/api/v1/admin/events/${O.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();q.success&&(w.value=q.data.event,s.value=!0)}catch(J){console.error("Erreur chargement détails événement:",J)}},h=async O=>{try{const q=await(await fetch(`/api/v1/admin/events/${O.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).json();if(q.success){const Q=q.data.event;p.value=null,Object.assign(S,{title:`${Q.title} (Copie)`,description:Q.description||"",organizer_id:Q.organizer_id,category_id:Q.category_id,venue_id:Q.venue_id,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:Q.schedules?.map(X=>({starts_at:X.starts_at?X.starts_at.slice(0,16):"",ends_at:X.ends_at?X.ends_at.slice(0,16):""}))||[{starts_at:"",ends_at:""}],ticket_types:(Q.ticket_types||Q.ticketTypes||[]).map(X=>({name:X.name,price:X.price,capacity:X.capacity||X.available_quantity||X.max_quantity||X.quantity||0,description:X.description||""}))}),(!S.schedules||S.schedules.length===0)&&(S.schedules=[{starts_at:"",ends_at:""}]),(!S.ticket_types||S.ticket_types.length===0)&&(S.ticket_types=[{name:"",price:0,capacity:0,description:""}]),I.value=!1,x.value=!0}else Swal.fire({icon:"error",title:"Erreur",text:"Impossible de récupérer les détails de l'événement"})}catch(J){console.error("Erreur duplication événement:",J),Swal.fire({icon:"error",title:"Erreur technique",text:"Une erreur est survenue lors de la duplication"})}},U=()=>{S.schedules.push({starts_at:"",ends_at:""})},W=O=>{S.schedules.splice(O,1)},ie=()=>{S.ticket_types.push({name:"",price:0,capacity:0,description:""})},R=O=>{S.ticket_types.splice(O,1)},K=O=>new Intl.NumberFormat("fr-FR").format(O),$=O=>new Date(O).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),F=O=>({draft:"Brouillon",published:"Publié",cancelled:"Annulé"})[O]||O,Y=O=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[O]||"bg-gray-100 text-gray-800";pe(()=>S.venue_id,O=>{O==="new"&&(I.value=!0)});const ae=()=>{I.value=!1,S.venue_id="",S.new_venue_name="",S.new_venue_city="",S.new_venue_address=""},de=O=>{S.image=O};return se(()=>{_(),P(),i(),d()}),{loading:v,saving:t,showModal:x,showDetailsModal:s,editingEvent:p,selectedEvent:w,events:o,organizers:a,categories:g,venues:A,pagination:y,stats:z,filters:T,eventForm:S,showNewVenue:I,loadEvents:_,loadOrganizers:P,loadCategories:i,loadVenues:d,debouncedSearch:m,changePage:D,resetFilters:b,openCreateModal:f,editEvent:C,saveEvent:k,viewEventDetails:V,duplicateEvent:h,addSchedule:U,removeSchedule:W,addTicketType:ie,removeTicketType:R,cancelNewVenue:ae,handleImageChange:de,formatAmount:K,formatDateTime:$,getStatusName:F,getStatusBadgeClass:Y,getTicketCapacity:O=>O.capacity||O.available_quantity||O.max_quantity||O.quantity||0}}},Xa={class:"event-management p-6 bg-gray-50 min-h-screen"},Ha={class:"mb-8"},Ga={class:"flex items-center justify-between"},Ka={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Wa={class:"bg-white rounded-lg shadow p-6"},Ja={class:"flex items-center"},Ya={class:"ml-4"},Qa={class:"text-2xl font-bold text-blue-600"},Za={class:"bg-white rounded-lg shadow p-6"},en={class:"flex items-center"},tn={class:"ml-4"},sn={class:"text-2xl font-bold text-green-600"},on={class:"bg-white rounded-lg shadow p-6"},an={class:"flex items-center"},nn={class:"ml-4"},rn={class:"text-2xl font-bold text-yellow-600"},ln={class:"bg-white rounded-lg shadow p-6"},dn={class:"flex items-center"},un={class:"ml-4"},cn={class:"text-2xl font-bold text-purple-600"},mn={class:"bg-white rounded-lg shadow p-6 mb-8"},gn={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},pn=["value"],fn=["value"],vn={class:"flex items-end"},xn={class:"bg-white rounded-lg shadow"},yn={key:0,class:"p-8 text-center"},bn={key:1,class:"p-8 text-center text-gray-500"},hn={key:2,class:"overflow-x-auto"},wn={class:"w-full"},_n={class:"divide-y divide-gray-200"},kn={class:"px-6 py-4"},Cn={class:"flex items-center"},Sn={class:"w-12 h-12 bg-blue-600 text-white rounded-lg flex items-center justify-center font-bold text-lg"},An={class:"ml-4"},Mn={class:"text-sm font-medium text-gray-900"},jn={class:"text-sm text-gray-500"},Pn={class:"px-6 py-4 text-sm text-gray-900"},Tn={class:"px-6 py-4 text-sm text-gray-900"},On={class:"px-6 py-4 text-sm text-gray-900"},Fn={class:"px-6 py-4 text-sm text-gray-900"},zn={class:"space-y-1"},Un={class:"text-gray-500"},Rn={class:"px-6 py-4 text-sm"},Dn={class:"px-6 py-4 text-sm space-x-2"},Vn=["onClick"],En=["onClick"],Bn=["onClick"],In={key:3,class:"p-6 border-t"},qn={class:"flex justify-between items-center"},Ln={class:"text-sm text-gray-700"},Nn={class:"flex space-x-2"},$n=["disabled"],Xn={class:"px-3 py-1 text-sm text-gray-600"},Hn=["disabled"],Gn={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Kn={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Wn={class:"text-lg font-bold mb-4"},Jn={class:"space-y-6"},Yn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qn={class:"md:col-span-2"},Zn={class:"md:col-span-2"},er={class:"md:col-span-2"},tr=["value"],sr=["value"],or={key:0},ar=["value"],nr={key:1,class:"space-y-2"},rr={class:"space-y-3"},lr=["onUpdate:modelValue"],ir=["onUpdate:modelValue"],dr={class:"flex items-end"},ur=["onClick"],cr={class:"space-y-3"},mr=["onUpdate:modelValue"],gr=["onUpdate:modelValue"],pr=["onUpdate:modelValue"],fr=["onUpdate:modelValue"],vr={class:"flex items-end"},xr=["onClick"],yr={class:"flex justify-end space-x-3 mt-6"},br=["disabled"],hr={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},wr={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},_r={class:"flex justify-between items-center mb-4"},kr={key:0,class:"space-y-6"},Cr={class:"grid grid-cols-2 gap-6"},Sr={class:"text-sm font-medium text-gray-900"},Ar={class:"text-sm text-gray-900"},Mr={class:"text-sm text-gray-900"},jr={class:"text-sm text-gray-900"},Pr={class:"text-sm text-gray-900"},Tr={class:"text-sm text-gray-900"},Or={key:0},Fr={class:"space-y-2"},zr={class:"text-sm"},Ur={key:1},Rr={class:"overflow-x-auto"},Dr={class:"w-full text-sm border border-gray-200 rounded-lg"},Vr={class:"bg-white divide-y divide-gray-200"},Er={class:"px-4 py-3 font-medium text-gray-900"},Br={class:"px-4 py-3 text-gray-900"},Ir={class:"px-4 py-3 text-gray-900"},qr={class:"px-4 py-3"},Lr={class:"px-4 py-3 text-gray-600"},Nr={key:2};function $r(v,t,x,s,p,w){const o=ce("ImageUpload");return l(),r("div",Xa,[e("div",Ha,[e("div",Ga,[t[29]||(t[29]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Événements"),e("p",{class:"text-gray-600"},"Créer et gérer tous les événements de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...a)=>s.openCreateModal&&s.openCreateModal(...a)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Créer Événement ",-1)])])])]),e("div",Ka,[e("div",Wa,[e("div",Ja,[t[31]||(t[31]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",Ya,[t[30]||(t[30]=e("p",{class:"text-sm text-gray-600"},"Total Événements",-1)),e("p",Qa,n(s.stats.total_events||0),1)])])]),e("div",Za,[e("div",en,[t[33]||(t[33]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",tn,[t[32]||(t[32]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1)),e("p",sn,n(s.stats.published_events||0),1)])])]),e("div",on,[e("div",an,[t[35]||(t[35]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1)),e("div",nn,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1)),e("p",rn,n(s.stats.draft_events||0),1)])])]),e("div",ln,[e("div",dn,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})])],-1)),e("div",un,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",cn,n(s.stats.total_tickets_sold||0),1)])])])]),e("div",mn,[t[45]||(t[45]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",gn,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.filters.search=a),onInput:t[2]||(t[2]=(...a)=>s.debouncedSearch&&s.debouncedSearch(...a)),type:"text",placeholder:"Titre ou description...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.filters.status=a),onChange:t[4]||(t[4]=(...a)=>s.loadEvents&&s.loadEvents(...a)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],544),[[L,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.filters.organizer_id=a),onChange:t[6]||(t[6]=(...a)=>s.loadEvents&&s.loadEvents(...a)),class:"w-full border rounded-lg px-3 py-2"},[t[41]||(t[41]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),r(E,null,B(s.organizers,a=>(l(),r("option",{key:a.id,value:a.id},n(a.name),9,pn))),128))],544),[[L,s.filters.organizer_id]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie",-1)),u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.filters.category_id=a),onChange:t[8]||(t[8]=(...a)=>s.loadEvents&&s.loadEvents(...a)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Toutes les catégories",-1)),(l(!0),r(E,null,B(s.categories,a=>(l(),r("option",{key:a.id,value:a.id},n(a.name),9,fn))),128))],544),[[L,s.filters.category_id]])]),e("div",vn,[e("button",{onClick:t[9]||(t[9]=(...a)=>s.resetFilters&&s.resetFilters(...a)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",xn,[t[48]||(t[48]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Événements")],-1)),s.loading?(l(),r("div",yn,[...t[46]||(t[46]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.events.length===0?(l(),r("div",bn," Aucun événement trouvé ")):(l(),r("div",hn,[e("table",wn,[t[47]||(t[47]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",_n,[(l(!0),r(E,null,B(s.events,a=>(l(),r("tr",{key:a.id},[e("td",kn,[e("div",Cn,[e("div",Sn,n(a.title.charAt(0).toUpperCase()),1),e("div",An,[e("div",Mn,n(a.title),1),e("div",jn,n(a.slug),1)])])]),e("td",Pn,n(a.organizer?.name||"-"),1),e("td",Tn,n(a.category?.name||"-"),1),e("td",On,n(a.schedules?.[0]?s.formatDateTime(a.schedules[0].starts_at):"Non programmé"),1),e("td",Fn,[e("div",zn,[e("div",null,"Vendus: "+n(a.tickets_sold||0),1),e("div",Un,"Total: "+n(a.total_capacity||0),1)])]),e("td",Rn,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(a.status)])},n(s.getStatusName(a.status)),3)]),e("td",Dn,[e("button",{onClick:g=>s.editEvent(a),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,Vn),e("button",{onClick:g=>s.viewEventDetails(a),class:"text-green-600 hover:text-green-900"}," Détails ",8,En),e("button",{onClick:g=>s.duplicateEvent(a),class:"text-purple-600 hover:text-purple-900"}," Dupliquer ",8,Bn)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),r("div",In,[e("div",qn,[e("div",Ln," Affichage "+n(s.pagination.from)+" à "+n(s.pagination.to)+" sur "+n(s.pagination.total)+" événements ",1),e("div",Nn,[e("button",{onClick:t[10]||(t[10]=a=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,$n),e("span",Xn," Page "+n(s.pagination.current_page)+" sur "+n(s.pagination.last_page),1),e("button",{onClick:t[11]||(t[11]=a=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Hn)])])])):M("",!0)]),s.showModal?(l(),r("div",Gn,[e("div",Kn,[e("h3",Wn,n(s.editingEvent?"Modifier":"Créer")+" Événement",1),e("form",{onSubmit:t[26]||(t[26]=oe((...a)=>s.saveEvent&&s.saveEvent(...a),["prevent"]))},[e("div",Jn,[e("div",Yn,[e("div",Qn,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>s.eventForm.title=a),type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.eventForm.title]])]),e("div",Zn,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),u(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=a=>s.eventForm.description=a),rows:"4",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.eventForm.description]])]),e("div",er,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image de l'événement",-1)),ue(o,{modelValue:s.eventForm.image,"onUpdate:modelValue":t[14]||(t[14]=a=>s.eventForm.image=a),"entity-type":"events",size:"medium","alt-text":"Image de l'événement",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur *",-1)),u(e("select",{"onUpdate:modelValue":t[15]||(t[15]=a=>s.eventForm.organizer_id=a),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[52]||(t[52]=e("option",{value:""},"Sélectionner un organisateur",-1)),(l(!0),r(E,null,B(s.organizers,a=>(l(),r("option",{key:a.id,value:a.id},n(a.name),9,tr))),128))],512),[[L,s.eventForm.organizer_id]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Catégorie *",-1)),u(e("select",{"onUpdate:modelValue":t[16]||(t[16]=a=>s.eventForm.category_id=a),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[54]||(t[54]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),r(E,null,B(s.categories,a=>(l(),r("option",{key:a.id,value:a.id},n(a.name),9,sr))),128))],512),[[L,s.eventForm.category_id]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),s.showNewVenue?M("",!0):(l(),r("div",or,[u(e("select",{"onUpdate:modelValue":t[17]||(t[17]=a=>s.eventForm.venue_id=a),class:"w-full border rounded-lg px-3 py-2"},[t[56]||(t[56]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),r(E,null,B(s.venues,a=>(l(),r("option",{key:a.id,value:a.id},n(a.name)+" - "+n(a.city),9,ar))),128)),t[57]||(t[57]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],512),[[L,s.eventForm.venue_id]])])),s.showNewVenue||s.eventForm.venue_id==="new"?(l(),r("div",nr,[u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=a=>s.eventForm.new_venue_name=a),type:"text",placeholder:"Nom du lieu",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[j,s.eventForm.new_venue_name]]),u(e("input",{"onUpdate:modelValue":t[19]||(t[19]=a=>s.eventForm.new_venue_city=a),type:"text",placeholder:"Ville",class:"w-full border rounded-lg px-3 py-2",required:""},null,512),[[j,s.eventForm.new_venue_city]]),u(e("input",{"onUpdate:modelValue":t[20]||(t[20]=a=>s.eventForm.new_venue_address=a),type:"text",placeholder:"Adresse",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.eventForm.new_venue_address]]),e("button",{type:"button",onClick:t[21]||(t[21]=(...a)=>s.cancelNewVenue&&s.cancelNewVenue(...a)),class:"text-sm text-blue-600 hover:text-blue-800"}," Utiliser un lieu existant ")])):M("",!0)]),e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut *",-1)),u(e("select",{"onUpdate:modelValue":t[22]||(t[22]=a=>s.eventForm.status=a),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[59]||(t[59]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[L,s.eventForm.status]])])]),e("div",null,[t[63]||(t[63]=e("h4",{class:"text-md font-bold mb-3"},"Programmation",-1)),e("div",rr,[(l(!0),r(E,null,B(s.eventForm.schedules,(a,g)=>(l(),r("div",{key:g,class:"grid grid-cols-1 md:grid-cols-3 gap-3 p-3 border rounded-lg"},[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de début",-1)),u(e("input",{"onUpdate:modelValue":A=>a.starts_at=A,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,lr),[[j,a.starts_at]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date et heure de fin",-1)),u(e("input",{"onUpdate:modelValue":A=>a.ends_at=A,type:"datetime-local",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,ir),[[j,a.ends_at]])]),e("div",dr,[e("button",{type:"button",onClick:A=>s.removeSchedule(g),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,ur)])]))),128)),e("button",{type:"button",onClick:t[23]||(t[23]=(...a)=>s.addSchedule&&s.addSchedule(...a)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter une séance ")])]),e("div",null,[t[68]||(t[68]=e("h4",{class:"text-md font-bold mb-3"},"Types de Billets",-1)),e("div",cr,[(l(!0),r(E,null,B(s.eventForm.ticket_types,(a,g)=>(l(),r("div",{key:g,class:"grid grid-cols-1 md:grid-cols-5 gap-3 p-3 border rounded-lg"},[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nom",-1)),u(e("input",{"onUpdate:modelValue":A=>a.name=A,type:"text",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,mr),[[j,a.name]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Prix (XAF)",-1)),u(e("input",{"onUpdate:modelValue":A=>a.price=A,type:"number",min:"0",step:"0.01",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,gr),[[j,a.price,void 0,{number:!0}]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Capacité",-1)),u(e("input",{"onUpdate:modelValue":A=>a.capacity=A,type:"number",min:"1",required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,pr),[[j,a.capacity,void 0,{number:!0}]])]),e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),u(e("input",{"onUpdate:modelValue":A=>a.description=A,type:"text",class:"w-full border rounded-lg px-3 py-2"},null,8,fr),[[j,a.description]])]),e("div",vr,[e("button",{type:"button",onClick:A=>s.removeTicketType(g),class:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700"}," Supprimer ",8,xr)])]))),128)),e("button",{type:"button",onClick:t[24]||(t[24]=(...a)=>s.addTicketType&&s.addTicketType(...a)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Ajouter un type de billet ")])])]),e("div",yr,[e("button",{type:"button",onClick:t[25]||(t[25]=a=>s.showModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.saving,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},n(s.saving?"Enregistrement...":s.editingEvent?"Mettre à jour":"Créer"),9,br)])],32)])])):M("",!0),s.showDetailsModal?(l(),r("div",hr,[e("div",wr,[e("div",_r,[t[70]||(t[70]=e("h3",{class:"text-lg font-bold"},"Détails de l'événement",-1)),e("button",{onClick:t[27]||(t[27]=a=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[69]||(t[69]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedEvent?(l(),r("div",kr,[e("div",Cr,[e("div",null,[t[71]||(t[71]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",Sr,n(s.selectedEvent.title),1)]),e("div",null,[t[72]||(t[72]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedEvent.status)])},n(s.getStatusName(s.selectedEvent.status)),3)]),e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",Ar,n(s.selectedEvent.organizer?.name||"-"),1)]),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700"},"Catégorie",-1)),e("p",Mr,n(s.selectedEvent.category?.name||"-"),1)]),e("div",null,[t[75]||(t[75]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",jr,n(s.selectedEvent.venue?.name||"-"),1)]),e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",Pr,n(s.formatDateTime(s.selectedEvent.created_at)),1)])]),e("div",null,[t[77]||(t[77]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),e("p",Tr,n(s.selectedEvent.description),1)]),s.selectedEvent.schedules&&s.selectedEvent.schedules.length>0?(l(),r("div",Or,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Programmation",-1)),e("div",Fr,[(l(!0),r(E,null,B(s.selectedEvent.schedules,a=>(l(),r("div",{key:a.id,class:"bg-gray-50 p-3 rounded-lg"},[e("p",zr,"Du "+n(s.formatDateTime(a.starts_at))+" au "+n(s.formatDateTime(a.ends_at)),1)]))),128))])])):M("",!0),(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types)&&(s.selectedEvent.ticketTypes?.length>0||s.selectedEvent.ticket_types?.length>0)?(l(),r("div",Ur,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1)),e("div",Rr,[e("table",Dr,[t[79]||(t[79]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nom"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prix"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Capacité"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description")])],-1)),e("tbody",Vr,[(l(!0),r(E,null,B(s.selectedEvent.ticketTypes||s.selectedEvent.ticket_types,a=>(l(),r("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",Er,n(a.name),1),e("td",Br,n(s.formatAmount(a.price))+" XAF",1),e("td",Ir,n(s.getTicketCapacity(a)),1),e("td",qr,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(a.status==="active"?"Actif":"Inactif"),3)]),e("td",Lr,n(a.description||"-"),1)]))),128))])])])])):(l(),r("div",Nr,[...t[81]||(t[81]=[e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Types de billets",-1),e("div",{class:"bg-gray-50 p-4 rounded-lg text-center"},[e("p",{class:"text-gray-500"},"Aucun type de billet défini pour cet événement")],-1)])]))])):M("",!0)])])):M("",!0)])}const Xr=te($a,[["render",$r],["__scopeId","data-v-07caf94a"]]),Lp=Object.freeze(Object.defineProperty({__proto__:null,default:Xr},Symbol.toStringTag,{value:"Module"})),Hr={name:"OrderManagement",setup(){const v=c(!1),t=c(!1),x=c(null),s=c([]),p=c([]),w=c([]),o=c(null),a=H({total_orders:0,confirmed_orders:0,pending_orders:0,total_revenue:0}),g=H({search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1});let A=null;const y=async()=>{v.value=!0;try{const k=new URLSearchParams;Object.keys(g).forEach(U=>{g[U]&&g[U]!==""&&k.append(U,g[U])});const h=await(await fetch(`/api/v1/admin/orders?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();if(h.success){s.value=h.data.orders.data,o.value={current_page:h.data.orders.current_page,last_page:h.data.orders.last_page,from:h.data.orders.from,to:h.data.orders.to,total:h.data.orders.total};const U=h.data.orders.data;a.total_orders=o.value.total,a.confirmed_orders=U.filter(W=>W.status==="confirmed").length,a.pending_orders=U.filter(W=>W.status==="pending").length,a.total_revenue=U.filter(W=>W.status==="confirmed").reduce((W,ie)=>W+ie.total_amount,0)}}catch(k){console.error("Erreur chargement commandes:",k)}finally{v.value=!1}},z=async()=>{try{const V=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(p.value=V.data.organizers.data||V.data.organizers)}catch(k){console.error("Erreur chargement organisateurs:",k)}},T=async()=>{try{const V=await(await fetch("/api/v1/admin/events",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();V.success&&(w.value=V.data.events.data||V.data.events)}catch(k){console.error("Erreur chargement événements:",k)}},S=()=>{clearTimeout(A),A=setTimeout(()=>{g.page=1,y()},500)},I=k=>{k>=1&&k<=o.value.last_page&&(g.page=k,y())},G=()=>{Object.assign(g,{search:"",status:"",organizer_id:"",event_id:"",date_from:"",date_to:"",page:1}),y()},_=async k=>{try{const h=await(await fetch(`/api/v1/admin/orders/${k.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();h.success&&(x.value=h.data.order,t.value=!0)}catch(V){console.error("Erreur chargement détails commande:",V)}},P=async(k,V)=>{if(confirm(`Êtes-vous sûr de vouloir ${V==="confirmed"?"confirmer":"annuler"} cette commande ?`))try{const U=await(await fetch(`/api/v1/admin/orders/${k.id}/status`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:V})})).json();U.success?(alert(`Commande ${V==="confirmed"?"confirmée":"annulée"} avec succès`),y(),t.value&&(x.value.status=V)):alert(U.message||"Erreur lors de la mise à jour")}catch(h){console.error("Erreur mise à jour statut commande:",h),alert("Erreur technique")}},i=async()=>{try{const k=new URLSearchParams;Object.keys(g).forEach(h=>{g[h]&&g[h]!==""&&h!=="page"&&k.append(h,g[h])});const V=await fetch(`/api/v1/admin/orders/export?${k}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(V.ok){const h=await V.blob(),U=window.URL.createObjectURL(h),W=document.createElement("a");W.href=U,W.download=`commandes-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(W),W.click(),window.URL.revokeObjectURL(U),document.body.removeChild(W)}}catch(k){console.error("Erreur export:",k),alert("Erreur lors de l'export des données")}},d=k=>new Intl.NumberFormat("fr-FR").format(k),m=k=>new Date(k).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),D=k=>({pending:"En attente",confirmed:"Confirmée",cancelled:"Annulée",refunded:"Remboursée"})[k]||k,b=k=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",refunded:"bg-purple-100 text-purple-800"})[k]||"bg-gray-100 text-gray-800",f=k=>({issued:"Émis",used:"Utilisé",cancelled:"Annulé"})[k]||k,C=k=>({issued:"bg-blue-100 text-blue-800",used:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800";return se(()=>{y(),z(),T()}),{loading:v,showDetailsModal:t,selectedOrder:x,orders:s,organizers:p,events:w,pagination:o,stats:a,filters:g,loadOrders:y,loadOrganizers:z,loadEvents:T,debouncedSearch:S,changePage:I,resetFilters:G,viewOrderDetails:_,updateOrderStatus:P,exportOrders:i,formatAmount:d,formatDateTime:m,getStatusName:D,getStatusBadgeClass:b,getTicketStatusName:f,getTicketStatusClass:C}}},Gr={class:"order-management p-6 bg-gray-50 min-h-screen"},Kr={class:"mb-8"},Wr={class:"flex items-center justify-between"},Jr={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Yr={class:"bg-white rounded-lg shadow p-6"},Qr={class:"flex items-center"},Zr={class:"ml-4"},el={class:"text-2xl font-bold text-blue-600"},tl={class:"bg-white rounded-lg shadow p-6"},sl={class:"flex items-center"},ol={class:"ml-4"},al={class:"text-2xl font-bold text-green-600"},nl={class:"bg-white rounded-lg shadow p-6"},rl={class:"flex items-center"},ll={class:"ml-4"},il={class:"text-2xl font-bold text-yellow-600"},dl={class:"bg-white rounded-lg shadow p-6"},ul={class:"flex items-center"},cl={class:"ml-4"},ml={class:"text-2xl font-bold text-purple-600"},gl={class:"bg-white rounded-lg shadow p-6 mb-8"},pl={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},fl=["value"],vl=["value"],xl={class:"flex justify-between items-center mt-4"},yl={class:"text-sm text-gray-600"},bl={class:"bg-white rounded-lg shadow"},hl={key:0,class:"p-8 text-center"},wl={key:1,class:"p-8 text-center text-gray-500"},_l={key:2,class:"overflow-x-auto"},kl={class:"w-full"},Cl={class:"divide-y divide-gray-200"},Sl={class:"px-6 py-4 text-sm font-mono text-blue-600"},Al=["onClick"],Ml={class:"px-6 py-4 text-sm text-gray-900"},jl={class:"font-medium"},Pl={class:"text-gray-500"},Tl={class:"px-6 py-4 text-sm text-gray-900"},Ol={class:"font-medium"},Fl={class:"text-gray-500"},zl={class:"px-6 py-4 text-sm text-gray-900"},Ul={class:"space-y-1"},Rl={class:"px-6 py-4 text-sm font-medium text-gray-900"},Dl={class:"px-6 py-4 text-sm"},Vl={class:"px-6 py-4 text-sm text-gray-500"},El={class:"px-6 py-4 text-sm space-x-2"},Bl=["onClick"],Il=["onClick"],ql=["onClick"],Ll={key:3,class:"p-6 border-t"},Nl={class:"flex justify-between items-center"},$l={class:"text-sm text-gray-700"},Xl={class:"flex space-x-2"},Hl=["disabled"],Gl={class:"px-3 py-1 text-sm text-gray-600"},Kl=["disabled"],Wl={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Jl={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},Yl={class:"flex justify-between items-center mb-4"},Ql={key:0,class:"space-y-6"},Zl={class:"grid grid-cols-2 gap-6"},ei={class:"space-y-4"},ti={class:"space-y-2"},si={class:"text-sm font-mono text-gray-900"},oi={class:"text-sm text-gray-900"},ai={key:0},ni={class:"text-sm text-gray-900"},ri={class:"space-y-4"},li={class:"space-y-2"},ii={class:"text-sm text-gray-900"},di={class:"text-sm text-gray-900"},ui={key:0},ci={class:"text-sm text-gray-900"},mi={key:0,class:"border-t pt-6"},gi={class:"grid grid-cols-2 gap-4"},pi={class:"text-sm text-gray-900"},fi={class:"text-sm text-gray-900"},vi={class:"text-sm text-gray-900"},xi={class:"text-sm text-gray-900"},yi={class:"border-t pt-6"},bi={class:"overflow-x-auto"},hi={class:"w-full text-sm"},wi={class:"divide-y divide-gray-200"},_i={class:"px-4 py-2"},ki={class:"px-4 py-2"},Ci={class:"px-4 py-2"},Si={class:"px-4 py-2 font-medium"},Ai={class:"bg-gray-50"},Mi={class:"px-4 py-2 font-bold"},ji={key:1,class:"border-t pt-6"},Pi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},Ti={class:"flex justify-between items-start mb-2"},Oi={class:"font-mono text-blue-600"},Fi={class:"text-gray-600"},zi={key:0},Ui={class:"border-t pt-6 flex justify-end space-x-3"};function Ri(v,t,x,s,p,w){return l(),r("div",Gr,[e("div",Kr,[e("div",Wr,[t[21]||(t[21]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Commandes"),e("p",{class:"text-gray-600"},"Gérer et suivre toutes les commandes de la plateforme")],-1)),e("button",{onClick:t[0]||(t[0]=(...o)=>s.exportOrders&&s.exportOrders(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),Z(" Exporter ",-1)])])])]),e("div",Jr,[e("div",Yr,[e("div",Qr,[t[23]||(t[23]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Zr,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Total Commandes",-1)),e("p",el,n(s.stats.total_orders||0),1)])])]),e("div",tl,[e("div",sl,[t[25]||(t[25]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ol,[t[24]||(t[24]=e("p",{class:"text-sm text-gray-600"},"Confirmées",-1)),e("p",al,n(s.stats.confirmed_orders||0),1)])])]),e("div",nl,[e("div",rl,[t[27]||(t[27]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ll,[t[26]||(t[26]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",il,n(s.stats.pending_orders||0),1)])])]),e("div",dl,[e("div",ul,[t[29]||(t[29]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",cl,[t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",ml,n(s.formatAmount(s.stats.total_revenue||0))+" XAF",1)])])])]),e("div",gl,[t[39]||(t[39]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",pl,[e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.filters.search=o),onInput:t[2]||(t[2]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[31]||(t[31]=[re('<option value="" data-v-e0d05b6e>Tous les statuts</option><option value="pending" data-v-e0d05b6e>En attente</option><option value="confirmed" data-v-e0d05b6e>Confirmée</option><option value="cancelled" data-v-e0d05b6e>Annulée</option><option value="refunded" data-v-e0d05b6e>Remboursée</option>',5)])],544),[[L,s.filters.status]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.organizer_id=o),onChange:t[6]||(t[6]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[33]||(t[33]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),r(E,null,B(s.organizers,o=>(l(),r("option",{key:o.id,value:o.id},n(o.name),9,fl))),128))],544),[[L,s.filters.organizer_id]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Événement",-1)),u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.event_id=o),onChange:t[8]||(t[8]=(...o)=>s.loadOrders&&s.loadOrders(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[35]||(t[35]=e("option",{value:""},"Tous les événements",-1)),(l(!0),r(E,null,B(s.events,o=>(l(),r("option",{key:o.id,value:o.id},n(o.title),9,vl))),128))],544),[[L,s.filters.event_id]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.filters.date_from=o),onChange:t[10]||(t[10]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_from]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.filters.date_to=o),onChange:t[12]||(t[12]=(...o)=>s.loadOrders&&s.loadOrders(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_to]])])]),e("div",xl,[e("button",{onClick:t[13]||(t[13]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",yl,n(s.pagination?`${s.pagination.total} commande(s) trouvée(s)`:""),1)])]),e("div",bl,[t[42]||(t[42]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Commandes")],-1)),s.loading?(l(),r("div",hl,[...t[40]||(t[40]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.orders.length===0?(l(),r("div",wl," Aucune commande trouvée ")):(l(),r("div",_l,[e("table",kl,[t[41]||(t[41]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Tickets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Cl,[(l(!0),r(E,null,B(s.orders,o=>(l(),r("tr",{key:o.id},[e("td",Sl,[e("button",{onClick:a=>s.viewOrderDetails(o),class:"hover:text-blue-800"}," #"+n(o.reference),9,Al)]),e("td",Ml,[e("div",null,[e("div",jl,n(o.customer_name),1),e("div",Pl,n(o.customer_email),1)])]),e("td",Tl,[e("div",null,[e("div",Ol,n(o.event?.title||"-"),1),e("div",Fl,n(o.event?.organizer?.name||"-"),1)])]),e("td",zl,[e("div",Ul,[(l(!0),r(E,null,B(o.items,a=>(l(),r("div",{key:a.id,class:"text-xs"},n(a.quantity)+"x "+n(a.ticket_type_name),1))),128))])]),e("td",Rl,n(s.formatAmount(o.total_amount))+" XAF",1),e("td",Dl,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},n(s.getStatusName(o.status)),3)]),e("td",Vl,n(s.formatDateTime(o.created_at)),1),e("td",El,[e("button",{onClick:a=>s.viewOrderDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Bl),o.status==="pending"?(l(),r("button",{key:0,onClick:a=>s.updateOrderStatus(o,"confirmed"),class:"text-green-600 hover:text-green-900"}," Confirmer ",8,Il)):M("",!0),["pending","confirmed"].includes(o.status)?(l(),r("button",{key:1,onClick:a=>s.updateOrderStatus(o,"cancelled"),class:"text-red-600 hover:text-red-900"}," Annuler ",8,ql)):M("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),r("div",Ll,[e("div",Nl,[e("div",$l," Affichage "+n(s.pagination.from)+" à "+n(s.pagination.to)+" sur "+n(s.pagination.total)+" commandes ",1),e("div",Xl,[e("button",{onClick:t[14]||(t[14]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,Hl),e("span",Gl," Page "+n(s.pagination.current_page)+" sur "+n(s.pagination.last_page),1),e("button",{onClick:t[15]||(t[15]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,Kl)])])])):M("",!0)]),s.showDetailsModal?(l(),r("div",Wl,[e("div",Jl,[e("div",Yl,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold"},"Détails de la Commande",-1)),e("button",{onClick:t[16]||(t[16]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[43]||(t[43]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedOrder?(l(),r("div",Ql,[e("div",Zl,[e("div",ei,[e("div",null,[t[49]||(t[49]=e("h4",{class:"text-md font-bold mb-3"},"Informations Commande",-1)),e("div",ti,[e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",si,"#"+n(s.selectedOrder.reference),1)]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedOrder.status)])},n(s.getStatusName(s.selectedOrder.status)),3)]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de création",-1)),e("p",oi,n(s.formatDateTime(s.selectedOrder.created_at)),1)]),s.selectedOrder.confirmed_at?(l(),r("div",ai,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date de confirmation",-1)),e("p",ni,n(s.formatDateTime(s.selectedOrder.confirmed_at)),1)])):M("",!0)])])]),e("div",ri,[e("div",null,[t[53]||(t[53]=e("h4",{class:"text-md font-bold mb-3"},"Informations Client",-1)),e("div",li,[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Nom",-1)),e("p",ii,n(s.selectedOrder.customer_name),1)]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",di,n(s.selectedOrder.customer_email),1)]),s.selectedOrder.customer_phone?(l(),r("div",ui,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),e("p",ci,n(s.selectedOrder.customer_phone),1)])):M("",!0)])])])]),s.selectedOrder.event?(l(),r("div",mi,[t[58]||(t[58]=e("h4",{class:"text-md font-bold mb-3"},"Événement",-1)),e("div",gi,[e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Titre",-1)),e("p",pi,n(s.selectedOrder.event.title),1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Organisateur",-1)),e("p",fi,n(s.selectedOrder.event.organizer?.name||"-"),1)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Lieu",-1)),e("p",vi,n(s.selectedOrder.event.venue?.name||"-"),1)]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700"},"Date événement",-1)),e("p",xi,n(s.selectedOrder.event.schedules?.[0]?s.formatDateTime(s.selectedOrder.event.schedules[0].starts_at):"-"),1)])])])):M("",!0),e("div",yi,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Articles Commandés",-1)),e("div",bi,[e("table",hi,[t[60]||(t[60]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Type de billet"),e("th",{class:"px-4 py-2 text-left"},"Prix unitaire"),e("th",{class:"px-4 py-2 text-left"},"Quantité"),e("th",{class:"px-4 py-2 text-left"},"Total")])],-1)),e("tbody",wi,[(l(!0),r(E,null,B(s.selectedOrder.items,o=>(l(),r("tr",{key:o.id},[e("td",_i,n(o.ticket_type_name),1),e("td",ki,n(s.formatAmount(o.unit_price))+" XAF",1),e("td",Ci,n(o.quantity),1),e("td",Si,n(s.formatAmount(o.total_price))+" XAF",1)]))),128))]),e("tfoot",Ai,[e("tr",null,[t[59]||(t[59]=e("td",{colspan:"3",class:"px-4 py-2 font-bold text-right"},"Total",-1)),e("td",Mi,n(s.formatAmount(s.selectedOrder.total_amount))+" XAF",1)])])])])]),s.selectedOrder.tickets&&s.selectedOrder.tickets.length>0?(l(),r("div",ji,[t[62]||(t[62]=e("h4",{class:"text-md font-bold mb-3"},"Tickets Générés",-1)),e("div",Pi,[(l(!0),r(E,null,B(s.selectedOrder.tickets,o=>(l(),r("div",{key:o.id,class:"border rounded-lg p-3 text-sm"},[e("div",Ti,[e("span",Oi,n(o.code),1),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getTicketStatusClass(o.status)])},n(s.getTicketStatusName(o.status)),3)]),e("div",Fi,[e("p",null,n(o.ticketType?.name),1),o.used_at?(l(),r("p",zi,"Utilisé: "+n(s.formatDateTime(o.used_at)),1)):M("",!0)])]))),128))])])):M("",!0),e("div",Ui,[s.selectedOrder.status==="pending"?(l(),r("button",{key:0,onClick:t[17]||(t[17]=o=>s.updateOrderStatus(s.selectedOrder,"confirmed")),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"}," Confirmer la Commande ")):M("",!0),["pending","confirmed"].includes(s.selectedOrder.status)?(l(),r("button",{key:1,onClick:t[18]||(t[18]=o=>s.updateOrderStatus(s.selectedOrder,"cancelled")),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Annuler la Commande ")):M("",!0),e("button",{onClick:t[19]||(t[19]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):M("",!0)])])):M("",!0)])}const Di=te(Hr,[["render",Ri],["__scopeId","data-v-e0d05b6e"]]),Np=Object.freeze(Object.defineProperty({__proto__:null,default:Di},Symbol.toStringTag,{value:"Module"})),Vi={name:"PaymentTracking",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(null),p=c([]),w=c([]),o=c(null),a=H({total_payments:0,successful_payments:0,pending_payments:0,failed_payments:0,total_volume:0}),g=c([]),A=c([]),y=H({search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1});let z=null;const T=le(()=>A.value.length===0?1:Math.max(...A.value.map(R=>R.volume))),S=async()=>{v.value=!0;try{const R=new URLSearchParams;Object.keys(y).forEach(F=>{y[F]&&y[F]!==""&&R.append(F,y[F])});const $=await(await fetch(`/api/v1/admin/payments?${R}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success&&(p.value=$.data.payments.data,o.value={current_page:$.data.payments.current_page,last_page:$.data.payments.last_page,from:$.data.payments.from,to:$.data.payments.to,total:$.data.payments.total},Object.assign(a,$.data.stats),g.value=$.data.gateway_stats||[],A.value=$.data.daily_stats||[])}catch(R){console.error("Erreur chargement paiements:",R)}finally{v.value=!1}},I=async()=>{try{const K=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success&&(w.value=K.data.organizers.data||K.data.organizers)}catch(R){console.error("Erreur chargement organisateurs:",R)}},G=()=>{clearTimeout(z),z=setTimeout(()=>{y.page=1,S()},500)},_=R=>{R>=1&&R<=o.value.last_page&&(y.page=R,S())},P=()=>{Object.assign(y,{search:"",status:"",gateway:"",organizer_id:"",date_from:"",date_to:"",page:1}),S()},i=()=>{S()},d=async R=>{try{const $=await(await fetch(`/api/v1/admin/payments/${R.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success&&(s.value=$.data.payment,x.value=!0)}catch(K){console.error("Erreur chargement détails paiement:",K)}},m=async R=>{try{const $=await(await fetch(`/api/v1/admin/payments/${R.id}/status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();$.success?(alert(`Statut mis à jour: ${W($.data.status)}`),S(),x.value&&(s.value.status=$.data.status)):alert($.message||"Erreur lors de la vérification")}catch(K){console.error("Erreur vérification statut:",K),alert("Erreur technique")}},D=async()=>{if(confirm("Vérifier tous les paiements en attente ? Cette opération peut prendre du temps.")){t.value=!0;try{const K=await(await fetch("/api/v1/admin/payments/check-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();K.success?(alert(`Vérification terminée. ${K.data.updated_count} paiement(s) mis à jour.`),S()):alert(K.message||"Erreur lors de la vérification")}catch(R){console.error("Erreur vérification paiements en attente:",R),alert("Erreur technique")}finally{t.value=!1}}},b=async R=>{const K=prompt("Raison du remboursement:");if(K&&confirm(`Êtes-vous sûr de vouloir rembourser ce paiement de ${C(R.amount)} XAF ?`))try{const F=await(await fetch(`/api/v1/admin/payments/${R.id}/refund`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({reason:K})})).json();F.success?(alert("Remboursement initié avec succès"),S()):alert(F.message||"Erreur lors du remboursement")}catch($){console.error("Erreur remboursement:",$),alert("Erreur technique")}},f=async()=>{try{const R=new URLSearchParams;Object.keys(y).forEach($=>{y[$]&&y[$]!==""&&$!=="page"&&R.append($,y[$])});const K=await fetch(`/api/v1/admin/payments/export?${R}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(K.ok){const $=await K.blob(),F=window.URL.createObjectURL($),Y=document.createElement("a");Y.href=F,Y.download=`paiements-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(Y),Y.click(),window.URL.revokeObjectURL(F),document.body.removeChild(Y)}}catch(R){console.error("Erreur export:",R),alert("Erreur lors de l'export des données")}},C=R=>new Intl.NumberFormat("fr-FR").format(R),k=R=>new Date(R).toLocaleDateString("fr-FR"),V=R=>new Date(R).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),h=R=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money",card:"Carte bancaire"})[R]||R,U=R=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800",card:"bg-blue-100 text-blue-800"})[R]||"bg-gray-100 text-gray-800",W=R=>({success:"Réussi",pending:"En attente",failed:"Échoué",cancelled:"Annulé",refunded:"Remboursé"})[R]||R,ie=R=>({success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-purple-100 text-purple-800"})[R]||"bg-gray-100 text-gray-800";return se(()=>{S(),I()}),{loading:v,checkingPayments:t,showDetailsModal:x,selectedPayment:s,payments:p,organizers:w,pagination:o,stats:a,gatewayStats:g,dailyStats:A,filters:y,maxDailyVolume:T,loadPayments:S,loadOrganizers:I,debouncedSearch:G,changePage:_,resetFilters:P,refreshPayments:i,viewPaymentDetails:d,checkPaymentStatus:m,checkPendingPayments:D,processRefund:b,exportPayments:f,formatAmount:C,formatDate:k,formatDateTime:V,getGatewayName:h,getGatewayBadgeClass:U,getStatusName:W,getStatusBadgeClass:ie}}},Ei={class:"payment-tracking p-6 bg-gray-50 min-h-screen"},Bi={class:"mb-8"},Ii={class:"flex items-center justify-between"},qi={class:"flex space-x-3"},Li={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},Ni={class:"bg-white rounded-lg shadow p-6"},$i={class:"flex items-center"},Xi={class:"ml-4"},Hi={class:"text-2xl font-bold text-blue-600"},Gi={class:"bg-white rounded-lg shadow p-6"},Ki={class:"flex items-center"},Wi={class:"ml-4"},Ji={class:"text-2xl font-bold text-green-600"},Yi={class:"bg-white rounded-lg shadow p-6"},Qi={class:"flex items-center"},Zi={class:"ml-4"},ed={class:"text-2xl font-bold text-yellow-600"},td={class:"bg-white rounded-lg shadow p-6"},sd={class:"flex items-center"},od={class:"ml-4"},ad={class:"text-2xl font-bold text-red-600"},nd={class:"bg-white rounded-lg shadow p-6"},rd={class:"flex items-center"},ld={class:"ml-4"},id={class:"text-2xl font-bold text-purple-600"},dd={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},ud={class:"bg-white rounded-lg shadow p-6"},cd={key:0,class:"text-center text-gray-500 py-8"},md={key:1,class:"space-y-4"},gd={class:"flex items-center"},pd={class:"font-medium text-gray-900"},fd={class:"text-sm text-gray-600"},vd={class:"text-right"},xd={class:"font-bold text-gray-900"},yd={class:"text-sm text-gray-600"},bd={class:"bg-white rounded-lg shadow p-6"},hd={key:0,class:"text-center text-gray-500 py-8"},wd={key:1,class:"space-y-3"},_d={class:"font-medium text-gray-900"},kd={class:"text-sm text-gray-600"},Cd={class:"text-right"},Sd={class:"font-bold text-gray-900"},Ad={class:"w-16 bg-gray-200 rounded-full h-2 mt-1"},Md={class:"bg-white rounded-lg shadow p-6 mb-8"},jd={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Pd=["value"],Td={class:"flex justify-between items-center mt-4"},Od={class:"flex space-x-3"},Fd=["disabled"],zd={class:"bg-white rounded-lg shadow"},Ud={class:"p-6 border-b"},Rd={class:"flex justify-between items-center"},Dd={class:"text-sm text-gray-600"},Vd={key:0,class:"p-8 text-center"},Ed={key:1,class:"p-8 text-center text-gray-500"},Bd={key:2,class:"overflow-x-auto"},Id={class:"w-full"},qd={class:"divide-y divide-gray-200"},Ld={class:"px-6 py-4 text-sm font-mono text-blue-600"},Nd=["onClick"],$d={class:"px-6 py-4 text-sm text-gray-900"},Xd={class:"font-medium"},Hd={class:"text-gray-500"},Gd={class:"px-6 py-4 text-sm text-gray-900"},Kd={class:"font-medium"},Wd={class:"text-gray-500"},Jd={class:"px-6 py-4 text-sm font-medium text-gray-900"},Yd={class:"px-6 py-4 text-sm"},Qd={class:"px-6 py-4 text-sm"},Zd={class:"px-6 py-4 text-sm text-gray-500"},eu={class:"px-6 py-4 text-sm space-x-2"},tu=["onClick"],su=["onClick"],ou=["onClick"],au={key:3,class:"p-6 border-t"},nu={class:"flex justify-between items-center"},ru={class:"text-sm text-gray-700"},lu={class:"flex space-x-2"},iu=["disabled"],du={class:"px-3 py-1 text-sm text-gray-600"},uu=["disabled"],cu={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},mu={class:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-screen overflow-y-auto"},gu={class:"flex justify-between items-center mb-4"},pu={key:0,class:"space-y-6"},fu={class:"grid grid-cols-2 gap-6"},vu={class:"space-y-4"},xu={class:"space-y-2"},yu={class:"text-sm font-mono text-gray-900"},bu={class:"text-sm font-bold text-gray-900"},hu={class:"space-y-4"},wu={class:"space-y-2"},_u={class:"text-sm text-gray-900"},ku={key:0},Cu={class:"text-sm text-gray-900"},Su={key:1},Au={class:"text-sm font-mono text-gray-900"},Mu={key:0,class:"border-t pt-6"},ju={class:"grid grid-cols-2 gap-4"},Pu={class:"text-sm font-mono text-gray-900"},Tu={class:"text-sm text-gray-900"},Ou={class:"text-sm text-gray-900"},Fu={class:"text-sm text-gray-900"},zu={key:1,class:"border-t pt-6"},Uu={class:"bg-gray-50 p-4 rounded-lg"},Ru={class:"text-xs text-gray-700 whitespace-pre-wrap"},Du={class:"border-t pt-6 flex justify-end space-x-3"};function Vu(v,t,x,s,p,w){return l(),r("div",Ei,[e("div",Bi,[e("div",Ii,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Suivi des Paiements"),e("p",{class:"text-gray-600"},"Monitorer tous les paiements de la plateforme")],-1)),e("div",qi,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.refreshPayments&&s.refreshPayments(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"},[...t[22]||(t[22]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Z(" Actualiser ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.exportPayments&&s.exportPayments(...o)),class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"})],-1),Z(" Exporter ",-1)])])])])]),e("div",Li,[e("div",Ni,[e("div",$i,[t[26]||(t[26]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("div",Xi,[t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"},"Total Paiements",-1)),e("p",Hi,n(s.stats.total_payments||0),1)])])]),e("div",Gi,[e("div",Ki,[t[28]||(t[28]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Wi,[t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Ji,n(s.stats.successful_payments||0),1)])])]),e("div",Yi,[e("div",Qi,[t[30]||(t[30]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Zi,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"En Attente",-1)),e("p",ed,n(s.stats.pending_payments||0),1)])])]),e("div",td,[e("div",sd,[t[32]||(t[32]=e("div",{class:"p-2 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4.5c-.77-.833-2.694-.833-3.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",od,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Échoués",-1)),e("p",ad,n(s.stats.failed_payments||0),1)])])]),e("div",nd,[e("div",rd,[t[34]||(t[34]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",ld,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Volume Total",-1)),e("p",id,n(s.formatAmount(s.stats.total_volume||0))+" XAF",1)])])])]),e("div",dd,[e("div",ud,[t[36]||(t[36]=e("h2",{class:"text-xl font-bold mb-4"},"Répartition par Gateway",-1)),s.gatewayStats.length===0?(l(),r("div",cd," Aucune donnée disponible ")):(l(),r("div",md,[(l(!0),r(E,null,B(s.gatewayStats,o=>(l(),r("div",{key:o.gateway,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",gd,[e("div",{class:N(["p-2 rounded-lg mr-3",s.getGatewayBadgeClass(o.gateway)])},[...t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("p",pd,n(s.getGatewayName(o.gateway)),1),e("p",fd,n(o.count)+" paiement(s)",1)])]),e("div",vd,[e("p",xd,n(s.formatAmount(o.volume))+" XAF",1),e("p",yd,n(Math.round(o.count/s.stats.total_payments*100))+"%",1)])]))),128))]))]),e("div",bd,[t[37]||(t[37]=e("h2",{class:"text-xl font-bold mb-4"},"Tendances Récentes (7 derniers jours)",-1)),s.dailyStats.length===0?(l(),r("div",hd," Aucune donnée disponible ")):(l(),r("div",wd,[(l(!0),r(E,null,B(s.dailyStats,o=>(l(),r("div",{key:o.date,class:"flex justify-between items-center p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("p",_d,n(s.formatDate(o.date)),1),e("p",kd,n(o.count)+" paiement(s)",1)]),e("div",Cd,[e("p",Sd,n(s.formatAmount(o.volume))+" XAF",1),e("div",Ad,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:ne(`width: ${Math.min(o.volume/s.maxDailyVolume*100,100)}%`)},null,4)])])]))),128))]))])]),e("div",Md,[t[47]||(t[47]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",jd,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Recherche",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.search=o),onInput:t[3]||(t[3]=(...o)=>s.debouncedSearch&&s.debouncedSearch(...o)),type:"text",placeholder:"Référence ou email...",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.search]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),onChange:t[5]||(t[5]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[39]||(t[39]=[re('<option value="" data-v-fc273c00>Tous les statuts</option><option value="success" data-v-fc273c00>Réussi</option><option value="pending" data-v-fc273c00>En attente</option><option value="failed" data-v-fc273c00>Échoué</option><option value="cancelled" data-v-fc273c00>Annulé</option>',5)])],544),[[L,s.filters.status]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.filters.gateway=o),onChange:t[7]||(t[7]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[41]||(t[41]=[e("option",{value:""},"Tous les gateways",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1),e("option",{value:"card"},"Carte bancaire",-1)])],544),[[L,s.filters.gateway]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.filters.organizer_id=o),onChange:t[9]||(t[9]=(...o)=>s.loadPayments&&s.loadPayments(...o)),class:"w-full border rounded-lg px-3 py-2"},[t[43]||(t[43]=e("option",{value:""},"Tous les organisateurs",-1)),(l(!0),r(E,null,B(s.organizers,o=>(l(),r("option",{key:o.id,value:o.id},n(o.name),9,Pd))),128))],544),[[L,s.filters.organizer_id]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.filters.date_from=o),onChange:t[11]||(t[11]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_from]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.filters.date_to=o),onChange:t[13]||(t[13]=(...o)=>s.loadPayments&&s.loadPayments(...o)),type:"date",class:"w-full border rounded-lg px-3 py-2"},null,544),[[j,s.filters.date_to]])])]),e("div",Td,[e("button",{onClick:t[14]||(t[14]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser les filtres "),e("div",Od,[e("button",{onClick:t[15]||(t[15]=(...o)=>s.checkPendingPayments&&s.checkPendingPayments(...o)),disabled:s.checkingPayments,class:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50"},n(s.checkingPayments?"Vérification...":"Vérifier Paiements en Attente"),9,Fd)])])]),e("div",zd,[e("div",Ud,[e("div",Rd,[t[48]||(t[48]=e("h2",{class:"text-xl font-bold"},"Liste des Paiements",-1)),e("div",Dd,n(s.pagination?`${s.pagination.total} paiement(s) trouvé(s)`:""),1)])]),s.loading?(l(),r("div",Vd,[...t[49]||(t[49]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payments.length===0?(l(),r("div",Ed," Aucun paiement trouvé ")):(l(),r("div",Bd,[e("table",Id,[t[50]||(t[50]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Commande"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Client"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",qd,[(l(!0),r(E,null,B(s.payments,o=>(l(),r("tr",{key:o.id},[e("td",Ld,[e("button",{onClick:a=>s.viewPaymentDetails(o),class:"hover:text-blue-800"}," #"+n(o.reference),9,Nd)]),e("td",$d,[e("div",null,[e("div",Xd,"#"+n(o.order?.reference||"-"),1),e("div",Hd,n(o.order?.event?.title||"-"),1)])]),e("td",Gd,[e("div",null,[e("div",Kd,n(o.order?.customer_name||"-"),1),e("div",Wd,n(o.order?.customer_email||"-"),1)])]),e("td",Jd,n(s.formatAmount(o.amount))+" XAF",1),e("td",Yd,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},n(s.getGatewayName(o.gateway)),3)]),e("td",Qd,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},n(s.getStatusName(o.status)),3)]),e("td",Zd,n(s.formatDateTime(o.created_at)),1),e("td",eu,[e("button",{onClick:a=>s.viewPaymentDetails(o),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,tu),o.status==="pending"?(l(),r("button",{key:0,onClick:a=>s.checkPaymentStatus(o),class:"text-green-600 hover:text-green-900"}," Vérifier ",8,su)):M("",!0),o.status==="success"?(l(),r("button",{key:1,onClick:a=>s.processRefund(o),class:"text-red-600 hover:text-red-900"}," Rembourser ",8,ou)):M("",!0)])]))),128))])])])),s.pagination&&s.pagination.last_page>1?(l(),r("div",au,[e("div",nu,[e("div",ru," Affichage "+n(s.pagination.from)+" à "+n(s.pagination.to)+" sur "+n(s.pagination.total)+" paiements ",1),e("div",lu,[e("button",{onClick:t[16]||(t[16]=o=>s.changePage(s.pagination.current_page-1)),disabled:s.pagination.current_page<=1,class:"px-3 py-1 border rounded disabled:opacity-50"}," Précédent ",8,iu),e("span",du," Page "+n(s.pagination.current_page)+" sur "+n(s.pagination.last_page),1),e("button",{onClick:t[17]||(t[17]=o=>s.changePage(s.pagination.current_page+1)),disabled:s.pagination.current_page>=s.pagination.last_page,class:"px-3 py-1 border rounded disabled:opacity-50"}," Suivant ",8,uu)])])])):M("",!0)]),s.showDetailsModal?(l(),r("div",cu,[e("div",mu,[e("div",gu,[t[52]||(t[52]=e("h3",{class:"text-lg font-bold"},"Détails du Paiement",-1)),e("button",{onClick:t[18]||(t[18]=o=>s.showDetailsModal=!1),class:"text-gray-600 hover:text-gray-800"},[...t[51]||(t[51]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedPayment?(l(),r("div",pu,[e("div",fu,[e("div",vu,[e("div",null,[t[57]||(t[57]=e("h4",{class:"text-md font-bold mb-3"},"Informations Paiement",-1)),e("div",xu,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence",-1)),e("p",yu,"#"+n(s.selectedPayment.reference),1)]),e("div",null,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700"},"Montant",-1)),e("p",bu,n(s.formatAmount(s.selectedPayment.amount))+" XAF",1)]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700"},"Gateway",-1)),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(s.selectedPayment.gateway)])},n(s.getGatewayName(s.selectedPayment.gateway)),3)]),e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700"},"Statut",-1)),e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(s.selectedPayment.status)])},n(s.getStatusName(s.selectedPayment.status)),3)])])])]),e("div",hu,[e("div",null,[t[61]||(t[61]=e("h4",{class:"text-md font-bold mb-3"},"Horodatage",-1)),e("div",wu,[e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700"},"Créé le",-1)),e("p",_u,n(s.formatDateTime(s.selectedPayment.created_at)),1)]),s.selectedPayment.processed_at?(l(),r("div",ku,[t[59]||(t[59]=e("label",{class:"block text-sm font-medium text-gray-700"},"Traité le",-1)),e("p",Cu,n(s.formatDateTime(s.selectedPayment.processed_at)),1)])):M("",!0),s.selectedPayment.gateway_transaction_id?(l(),r("div",Su,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"ID Transaction Gateway",-1)),e("p",Au,n(s.selectedPayment.gateway_transaction_id),1)])):M("",!0)])])])]),s.selectedPayment.order?(l(),r("div",Mu,[t[66]||(t[66]=e("h4",{class:"text-md font-bold mb-3"},"Informations de la Commande",-1)),e("div",ju,[e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Référence commande",-1)),e("p",Pu,n(s.selectedPayment.order.reference),1)]),e("div",null,[t[63]||(t[63]=e("label",{class:"block text-sm font-medium text-gray-700"},"Événement",-1)),e("p",Tu,n(s.selectedPayment.order.event?.title||"-"),1)]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Client",-1)),e("p",Ou,n(s.selectedPayment.order.customer_name),1)]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("p",Fu,n(s.selectedPayment.order.customer_email),1)])])])):M("",!0),s.selectedPayment.gateway_response?(l(),r("div",zu,[t[67]||(t[67]=e("h4",{class:"text-md font-bold mb-3"},"Réponse Gateway",-1)),e("div",Uu,[e("pre",Ru,n(JSON.stringify(s.selectedPayment.gateway_response,null,2)),1)])])):M("",!0),e("div",Du,[s.selectedPayment.status==="pending"?(l(),r("button",{key:0,onClick:t[19]||(t[19]=o=>s.checkPaymentStatus(s.selectedPayment)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700"}," Vérifier le Statut ")):M("",!0),s.selectedPayment.status==="success"?(l(),r("button",{key:1,onClick:t[20]||(t[20]=o=>s.processRefund(s.selectedPayment)),class:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"}," Rembourser ")):M("",!0),e("button",{onClick:t[21]||(t[21]=o=>s.showDetailsModal=!1),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Fermer ")])])):M("",!0)])])):M("",!0)])}const Eu=te(Vi,[["render",Vu],["__scopeId","data-v-fc273c00"]]),$p=Object.freeze(Object.defineProperty({__proto__:null,default:Eu},Symbol.toStringTag,{value:"Module"})),Bu={name:"PayoutDashboard",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(!1),p=c(!1),w=c([]),o=c([]),a=c([]),g=H({total_payouts:0,successful_payouts:0,pending_payouts:0,automatic_payouts:0}),A=H({status:"",gateway:"",is_automatic:""}),y=H({organizer_id:"",gateway:"",amount:"",phone_number:""}),z=async()=>{v.value=!0;try{const h=new URLSearchParams;A.status&&h.append("status",A.status),A.gateway&&h.append("gateway",A.gateway),A.is_automatic&&h.append("is_automatic",A.is_automatic);const W=await(await fetch(`/api/v1/admin/payouts?${h}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();W.success&&(w.value=W.data.payouts)}catch(h){console.error("Erreur chargement payouts:",h)}finally{v.value=!1}},T=async()=>{try{const U=await(await fetch("/api/v1/admin/payouts/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();U.success&&Object.assign(g,U.data.stats)}catch(h){console.error("Erreur chargement stats:",h)}},S=async()=>{x.value=!0;try{const U=await(await fetch("/api/v1/admin/payouts/shap-balance",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();U.success&&(a.value=U.data.balances)}catch(h){console.error("Erreur chargement solde SHAP:",h)}finally{x.value=!1}},I=async()=>{t.value=!0;try{const U=await(await fetch("/api/v1/admin/payouts/check-all-pending",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();U.success&&(alert(`Vérification terminée: ${U.data.results.length} payouts vérifiés`),z())}catch(h){console.error("Erreur vérification batch:",h)}finally{t.value=!1}},G=async h=>{h.checking=!0;try{const W=await(await fetch(`/api/v1/admin/payouts/${h.id}/check-status`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();W.success&&(alert(`Statut: ${W.data.current_status}`),z())}catch(U){console.error("Erreur vérification payout:",U)}finally{h.checking=!1}},_=()=>{s.value=!0,P()},P=async()=>{try{const U=await(await fetch("/api/v1/admin/organizers",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).json();U.success&&(o.value=U.data.organizers)}catch(h){console.error("Erreur chargement organisateurs:",h)}},i=async()=>{p.value=!0;try{const U=await(await fetch("/api/v1/admin/payouts",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(y)})).json();U.success?(alert("Payout créé avec succès"),s.value=!1,Object.assign(y,{organizer_id:"",gateway:"",amount:"",phone_number:""}),z(),T()):alert(U.message||"Erreur lors de la création")}catch(h){console.error("Erreur création payout:",h),alert("Erreur technique")}finally{p.value=!1}},d=()=>{Object.assign(A,{status:"",gateway:"",is_automatic:""}),z()},m=h=>{alert(`Détails du payout #${h.id}
Référence: ${h.reference}
Montant: ${D(h.amount)} XAF`)},D=h=>new Intl.NumberFormat("fr-FR").format(h),b=h=>new Date(h).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=h=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[h]||h,C=h=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[h]||"bg-gray-100 text-gray-800",k=h=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[h]||h,V=h=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[h]||"bg-gray-100 text-gray-800";return se(()=>{z(),T()}),{loading:v,checkingAll:t,loadingShapBalance:x,showCreateModal:s,creatingPayout:p,payouts:w,organizers:o,shapBalance:a,stats:g,filters:A,newPayout:y,loadPayouts:z,loadStats:T,loadShapBalance:S,checkAllPending:I,checkPayoutStatus:G,openCreatePayoutModal:_,createPayout:i,resetFilters:d,viewPayoutDetails:m,formatAmount:D,formatDate:b,getStatusName:f,getStatusBadgeClass:C,getGatewayName:k,getGatewayBadgeClass:V}}},Iu={class:"payout-dashboard p-6 bg-gray-50 min-h-screen"},qu={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Lu={class:"bg-white rounded-lg shadow p-6"},Nu={class:"flex items-center"},$u={class:"ml-4"},Xu={class:"text-2xl font-bold text-gray-900"},Hu={class:"bg-white rounded-lg shadow p-6"},Gu={class:"flex items-center"},Ku={class:"ml-4"},Wu={class:"text-2xl font-bold text-green-600"},Ju={class:"bg-white rounded-lg shadow p-6"},Yu={class:"flex items-center"},Qu={class:"ml-4"},Zu={class:"text-2xl font-bold text-yellow-600"},ec={class:"bg-white rounded-lg shadow p-6"},tc={class:"flex items-center"},sc={class:"ml-4"},oc={class:"text-2xl font-bold text-purple-600"},ac={class:"flex flex-wrap gap-4 mb-8"},nc=["disabled"],rc=["disabled"],lc={key:0,class:"mb-8"},ic={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},dc={class:"font-semibold text-gray-900"},uc={class:"text-2xl font-bold text-green-600"},cc={class:"text-sm text-gray-500"},mc={class:"bg-white rounded-lg shadow p-6 mb-8"},gc={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},pc={class:"flex items-end"},fc={class:"bg-white rounded-lg shadow"},vc={key:0,class:"p-8 text-center"},xc={key:1,class:"p-8 text-center text-gray-500"},yc={key:2,class:"overflow-x-auto"},bc={class:"w-full"},hc={class:"divide-y divide-gray-200"},wc={class:"px-6 py-4 text-sm text-gray-900"},_c={class:"px-6 py-4 text-sm text-gray-900"},kc={class:"px-6 py-4 text-sm font-medium text-gray-900"},Cc={class:"px-6 py-4 text-sm text-gray-900"},Sc={class:"px-6 py-4 text-sm"},Ac={class:"px-6 py-4 text-sm text-gray-900"},Mc={class:"px-6 py-4 text-sm text-gray-500"},jc={class:"px-6 py-4 text-sm space-x-2"},Pc=["onClick","disabled"],Tc=["onClick"],Oc={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Fc={class:"bg-white rounded-lg p-6 w-full max-w-md"},zc={class:"space-y-4"},Uc=["value"],Rc={class:"flex justify-end space-x-3 mt-6"},Dc=["disabled"];function Vc(v,t,x,s,p,w){return l(),r("div",Iu,[t[45]||(t[45]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Gestion des Payouts"),e("p",{class:"text-gray-600"},"Administration des paiements automatiques et manuels")],-1)),e("div",qu,[e("div",Lu,[e("div",Nu,[t[17]||(t[17]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",$u,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",Xu,n(s.stats.total_payouts||0),1)])])]),e("div",Hu,[e("div",Gu,[t[19]||(t[19]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),e("div",Ku,[t[18]||(t[18]=e("p",{class:"text-sm text-gray-600"},"Réussis",-1)),e("p",Wu,n(s.stats.successful_payouts||0),1)])])]),e("div",Ju,[e("div",Yu,[t[21]||(t[21]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Qu,[t[20]||(t[20]=e("p",{class:"text-sm text-gray-600"},"En cours",-1)),e("p",Zu,n(s.stats.pending_payouts||0),1)])])]),e("div",ec,[e("div",tc,[t[23]||(t[23]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",sc,[t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Automatiques",-1)),e("p",oc,n(s.stats.automatic_payouts||0),1)])])])]),e("div",ac,[e("button",{onClick:t[0]||(t[0]=(...o)=>s.openCreatePayoutModal&&s.openCreatePayoutModal(...o)),class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors"},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Nouveau Payout Manuel ",-1)])]),e("button",{onClick:t[1]||(t[1]=(...o)=>s.checkAllPending&&s.checkAllPending(...o)),disabled:s.checkingAll,class:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"},[t[25]||(t[25]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)),Z(" "+n(s.checkingAll?"Vérification...":"Vérifier tous les payouts"),1)],8,nc),e("button",{onClick:t[2]||(t[2]=(...o)=>s.loadShapBalance&&s.loadShapBalance(...o)),disabled:s.loadingShapBalance,class:"bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50"},[t[26]||(t[26]=e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),Z(" "+n(s.loadingShapBalance?"Chargement...":"Solde SHAP"),1)],8,rc)]),s.shapBalance.length>0?(l(),r("div",lc,[t[27]||(t[27]=e("h2",{class:"text-xl font-bold mb-4"},"Solde SHAP par Opérateur",-1)),e("div",ic,[(l(!0),r(E,null,B(s.shapBalance,o=>(l(),r("div",{key:o.payment_system_name,class:"bg-white rounded-lg shadow p-4"},[e("h3",dc,n(o.payment_system_displayed_name),1),e("p",uc,n(s.formatAmount(o.amount))+" XAF",1),e("p",cc,"Dernière MAJ: "+n(o.last_updated),1)]))),128))])])):M("",!0),e("div",mc,[t[34]||(t[34]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",gc,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.status=o),onChange:t[4]||(t[4]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[28]||(t[28]=[re('<option value="" data-v-e96f5ab8>Tous</option><option value="pending" data-v-e96f5ab8>En attente</option><option value="processing" data-v-e96f5ab8>En cours</option><option value="success" data-v-e96f5ab8>Réussi</option><option value="failed" data-v-e96f5ab8>Échoué</option>',5)])],544),[[L,s.filters.status]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.filters.gateway=o),onChange:t[6]||(t[6]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[30]||(t[30]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[L,s.filters.gateway]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type",-1)),u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.filters.is_automatic=o),onChange:t[8]||(t[8]=(...o)=>s.loadPayouts&&s.loadPayouts(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Automatique",-1),e("option",{value:"false"},"Manuel",-1)])],544),[[L,s.filters.is_automatic]])]),e("div",pc,[e("button",{onClick:t[9]||(t[9]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",fc,[t[37]||(t[37]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Liste des Payouts")],-1)),s.loading?(l(),r("div",vc,[...t[35]||(t[35]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.payouts.length===0?(l(),r("div",xc," Aucun payout trouvé ")):(l(),r("div",yc,[e("table",bc,[t[36]||(t[36]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",hc,[(l(!0),r(E,null,B(s.payouts,o=>(l(),r("tr",{key:o.id},[e("td",wc,"#"+n(o.id),1),e("td",_c,n(o.organizer?.name),1),e("td",kc,n(s.formatAmount(o.amount))+" XAF",1),e("td",Cc,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},n(s.getGatewayName(o.gateway)),3)]),e("td",Sc,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getStatusBadgeClass(o.status)])},n(s.getStatusName(o.status)),3)]),e("td",Ac,[e("span",{class:N(["inline-flex px-2 py-1 text-xs rounded-full",o.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},n(o.is_automatic?"Auto":"Manuel"),3)]),e("td",Mc,n(s.formatDate(o.created_at)),1),e("td",jc,[e("button",{onClick:a=>s.checkPayoutStatus(o),disabled:o.checking,class:"text-blue-600 hover:text-blue-900 disabled:opacity-50"},n(o.checking?"Vérif...":"Vérifier"),9,Pc),e("button",{onClick:a=>s.viewPayoutDetails(o),class:"text-green-600 hover:text-green-900"}," Détails ",8,Tc)])]))),128))])])]))]),s.showCreateModal?(l(),r("div",Oc,[e("div",Fc,[t[44]||(t[44]=e("h3",{class:"text-lg font-bold mb-4"},"Nouveau Payout Manuel",-1)),e("form",{onSubmit:t[15]||(t[15]=oe((...o)=>s.createPayout&&s.createPayout(...o),["prevent"]))},[e("div",zc,[e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Organisateur",-1)),u(e("select",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.newPayout.organizer_id=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[t[38]||(t[38]=e("option",{value:""},"Sélectionner un organisateur",-1)),(l(!0),r(E,null,B(s.organizers,o=>(l(),r("option",{key:o.id,value:o.id},n(o.name),9,Uc))),128))],512),[[L,s.newPayout.organizer_id]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),u(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.newPayout.gateway=o),required:"",class:"w-full border rounded-lg px-3 py-2"},[...t[40]||(t[40]=[e("option",{value:""},"Sélectionner",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],512),[[L,s.newPayout.gateway]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant (XAF)",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>s.newPayout.amount=o),type:"number",min:"100",required:"",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.newPayout.amount,void 0,{number:!0}]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),u(e("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.newPayout.phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.newPayout.phone_number]])])]),e("div",Rc,[e("button",{type:"button",onClick:t[14]||(t[14]=o=>s.showCreateModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.creatingPayout,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},n(s.creatingPayout?"Création...":"Créer le Payout"),9,Dc)])],32)])])):M("",!0)])}const Ec=te(Bu,[["render",Vc],["__scopeId","data-v-e96f5ab8"]]),Xp=Object.freeze(Object.defineProperty({__proto__:null,default:Ec},Symbol.toStringTag,{value:"Module"})),Bc={name:"OrganizerBalanceConfig",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(null),p=c([]),w=H({total_organizers:0,auto_payout_enabled:0,total_balance:0,active_configs:0}),o=H({gateway:"",auto_payout_enabled:""}),a=H({auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:""}),g=async()=>{v.value=!0;try{const _=new URLSearchParams;o.gateway&&_.append("gateway",o.gateway),o.auto_payout_enabled&&_.append("auto_payout_enabled",o.auto_payout_enabled);const P=await fetch(`/api/v1/admin/payouts/balances?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"}});if(P.ok){const i=await P.json();i.success&&(p.value=i.data.balances,i.data.stats&&Object.assign(w,i.data.stats))}else A()}catch{console.log("API non disponible, utilisation des données simulées"),A()}finally{v.value=!1}},A=()=>{p.value=[{organizer_id:1,organizer:{name:"EventMaster Pro"},gateway:"airtelmoney",balance:25e4,auto_payout_enabled:!0,auto_payout_threshold:1e5,phone_number:"066123456"},{organizer_id:2,organizer:{name:"Gabon Events"},gateway:"moovmoney",balance:18e4,auto_payout_enabled:!1,auto_payout_threshold:5e4,phone_number:"065987654"},{organizer_id:3,organizer:{name:"Culture & Spectacles"},gateway:"airtelmoney",balance:42e4,auto_payout_enabled:!0,auto_payout_threshold:2e5,phone_number:"067789012"}],Object.assign(w,{total_organizers:15,auto_payout_enabled:8,total_balance:85e4,active_configs:12})},y=_=>{s.value=_,Object.assign(a,{auto_payout_enabled:_.auto_payout_enabled,auto_payout_threshold:_.auto_payout_threshold,payout_phone_number:_.phone_number||""}),t.value=!0},z=async()=>{x.value=!0;try{const P=await(await fetch(`/api/v1/admin/organizers/${s.value.organizer_id}/auto-payout-config`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({gateway:s.value.gateway,auto_payout_enabled:a.auto_payout_enabled,auto_payout_threshold:a.auto_payout_threshold,payout_phone_number:a.payout_phone_number})})).json();P.success?(alert("Configuration mise à jour avec succès"),t.value=!1,g()):alert(P.message||"Erreur lors de la mise à jour")}catch(_){console.error("Erreur sauvegarde config:",_),alert("Erreur technique")}finally{x.value=!1}},T=()=>{Object.assign(o,{gateway:"",auto_payout_enabled:""}),g()},S=_=>new Intl.NumberFormat("fr-FR").format(_),I=_=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[_]||_,G=_=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[_]||"bg-gray-100 text-gray-800";return se(()=>{g()}),{loading:v,showConfigModal:t,savingConfig:x,editingBalance:s,balances:p,stats:w,filters:o,configForm:a,loadBalances:g,editBalance:y,saveConfiguration:z,resetFilters:T,formatAmount:S,getGatewayName:I,getGatewayBadgeClass:G}}},Ic={class:"organizer-balance-config p-6 bg-gray-50 min-h-screen"},qc={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Lc={class:"bg-white rounded-lg shadow p-6"},Nc={class:"flex items-center"},$c={class:"ml-4"},Xc={class:"text-2xl font-bold text-gray-900"},Hc={class:"bg-white rounded-lg shadow p-6"},Gc={class:"flex items-center"},Kc={class:"ml-4"},Wc={class:"text-2xl font-bold text-green-600"},Jc={class:"bg-white rounded-lg shadow p-6"},Yc={class:"flex items-center"},Qc={class:"ml-4"},Zc={class:"text-2xl font-bold text-yellow-600"},e0={class:"bg-white rounded-lg shadow p-6"},t0={class:"flex items-center"},s0={class:"ml-4"},o0={class:"text-2xl font-bold text-purple-600"},a0={class:"bg-white rounded-lg shadow p-6 mb-8"},n0={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},r0={class:"flex items-end"},l0={class:"bg-white rounded-lg shadow"},i0={key:0,class:"p-8 text-center"},d0={key:1,class:"p-8 text-center text-gray-500"},u0={key:2,class:"overflow-x-auto"},c0={class:"w-full"},m0={class:"divide-y divide-gray-200"},g0={class:"px-6 py-4 text-sm font-medium text-gray-900"},p0={class:"px-6 py-4 text-sm text-gray-900"},f0={class:"px-6 py-4 text-sm font-medium text-gray-900"},v0={class:"px-6 py-4 text-sm"},x0={class:"px-6 py-4 text-sm text-gray-900"},y0={class:"px-6 py-4 text-sm text-gray-900"},b0={class:"px-6 py-4 text-sm space-x-2"},h0=["onClick"],w0={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},_0={class:"bg-white rounded-lg p-6 w-full max-w-md"},k0={class:"text-lg font-bold mb-4"},C0={class:"space-y-4"},S0=["value"],A0=["value"],M0={class:"flex items-center space-x-2"},j0={key:0},P0={class:"flex justify-end space-x-3 mt-6"},T0=["disabled"];function O0(v,t,x,s,p,w){return l(),r("div",Ic,[t[33]||(t[33]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Configuration des Soldes Organisateurs"),e("p",{class:"text-gray-600"},"Gestion des paramètres de payout automatique par organisateur")],-1)),e("div",qc,[e("div",Lc,[e("div",Nc,[t[11]||(t[11]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("div",$c,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600"},"Total Organisateurs",-1)),e("p",Xc,n(s.stats.total_organizers||0),1)])])]),e("div",Hc,[e("div",Gc,[t[13]||(t[13]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",Kc,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600"},"Payout Auto Activé",-1)),e("p",Wc,n(s.stats.auto_payout_enabled||0),1)])])]),e("div",Jc,[e("div",Yc,[t[15]||(t[15]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",Qc,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",Zc,n(s.formatAmount(s.stats.total_balance||0))+" XAF",1)])])]),e("div",e0,[e("div",t0,[t[17]||(t[17]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",s0,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-600"},"Configs Actives",-1)),e("p",o0,n(s.stats.active_configs||0),1)])])])]),e("div",a0,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold mb-4"},"Filtres",-1)),e("div",n0,[e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),u(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.filters.gateway=o),onChange:t[1]||(t[1]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[18]||(t[18]=[e("option",{value:""},"Tous",-1),e("option",{value:"airtelmoney"},"Airtel Money",-1),e("option",{value:"moovmoney"},"Moov Money",-1)])],544),[[L,s.filters.gateway]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payout Auto",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.filters.auto_payout_enabled=o),onChange:t[3]||(t[3]=(...o)=>s.loadBalances&&s.loadBalances(...o)),class:"w-full border rounded-lg px-3 py-2"},[...t[20]||(t[20]=[e("option",{value:""},"Tous",-1),e("option",{value:"true"},"Activé",-1),e("option",{value:"false"},"Désactivé",-1)])],544),[[L,s.filters.auto_payout_enabled]])]),e("div",r0,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.resetFilters&&s.resetFilters(...o)),class:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600"}," Réinitialiser ")])])]),e("div",l0,[t[25]||(t[25]=e("div",{class:"p-6 border-b"},[e("h2",{class:"text-xl font-bold"},"Balances des Organisateurs")],-1)),s.loading?(l(),r("div",i0,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Chargement...",-1)])])):s.balances.length===0?(l(),r("div",d0," Aucune balance trouvée ")):(l(),r("div",u0,[e("table",c0,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Organisateur"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Solde"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Payout Auto"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Seuil"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Téléphone"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",m0,[(l(!0),r(E,null,B(s.balances,o=>(l(),r("tr",{key:`${o.organizer_id}-${o.gateway}`},[e("td",g0,n(o.organizer?.name),1),e("td",p0,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.getGatewayBadgeClass(o.gateway)])},n(s.getGatewayName(o.gateway)),3)]),e("td",f0,n(s.formatAmount(o.balance))+" XAF",1),e("td",v0,[e("span",{class:N(["inline-flex px-2 py-1 text-xs rounded-full",o.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(o.auto_payout_enabled?"Activé":"Désactivé"),3)]),e("td",x0,n(s.formatAmount(o.auto_payout_threshold))+" XAF",1),e("td",y0,n(o.phone_number||"-"),1),e("td",b0,[e("button",{onClick:a=>s.editBalance(o),class:"text-blue-600 hover:text-blue-900"}," Modifier ",8,h0)])]))),128))])])]))]),s.showConfigModal?(l(),r("div",w0,[e("div",_0,[e("h3",k0,"Configuration Payout - "+n(s.editingBalance?.organizer?.name),1),e("form",{onSubmit:t[9]||(t[9]=oe((...o)=>s.saveConfiguration&&s.saveConfiguration(...o),["prevent"]))},[e("div",C0,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:s.getGatewayName(s.editingBalance?.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,S0)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Actuel",-1)),e("input",{value:s.formatAmount(s.editingBalance?.balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,A0)]),e("div",null,[e("label",M0,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>s.configForm.auto_payout_enabled=o),class:"rounded border-gray-300"},null,512),[[ee,s.configForm.auto_payout_enabled]]),t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Activer le payout automatique",-1))])]),s.configForm.auto_payout_enabled?(l(),r("div",j0,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seuil de payout (XAF)",-1)),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.configForm.auto_payout_threshold=o),type:"number",min:"1000",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.configForm.auto_payout_threshold,void 0,{number:!0}]]),t[30]||(t[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum pour déclencher un payout automatique",-1))])):M("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.configForm.payout_phone_number=o),type:"tel",maxlength:"9",pattern:"[0-9]{9}",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[j,s.configForm.payout_phone_number]]),t[32]||(t[32]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro pour recevoir les payouts (sans indicatif)",-1))])]),e("div",P0,[e("button",{type:"button",onClick:t[8]||(t[8]=o=>s.showConfigModal=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:s.savingConfig,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50"},n(s.savingConfig?"Enregistrement...":"Enregistrer"),9,T0)])],32)])])):M("",!0)])}const F0=te(Bc,[["render",O0],["__scopeId","data-v-f002e652"]]),Hp=Object.freeze(Object.defineProperty({__proto__:null,default:F0},Symbol.toStringTag,{value:"Module"})),z0={name:"Reports",setup(){const v=c(!1),t=c(!1),x=c([]),s=c(""),p=H({start:new Date().toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),w=H({total_revenue:0,total_tickets:0,active_events:0,active_users:0}),o=async()=>{v.value=!0;try{const i=new URLSearchParams({start_date:p.start,end_date:p.end}),d=await fetch(`/api/v1/admin/reports?${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(d.ok){const m=await d.json();m.success&&(x.value=m.data.reports,Object.assign(w,m.data.stats))}else a()}catch{console.log("API non disponible, utilisation des données simulées"),a()}finally{v.value=!1}},a=()=>{x.value=[{id:1,type:"financial",period:"Septembre 2025",created_at:new Date,file_size:"2.3 MB",format:"PDF",status:"ready",download_url:"/reports/financial-sep-2025.pdf"},{id:2,type:"events",period:"Août 2025",created_at:new Date(Date.now()-864e5),file_size:"1.8 MB",format:"Excel",status:"ready",download_url:"/reports/events-aug-2025.xlsx"},{id:3,type:"users",period:"Juillet 2025",created_at:new Date(Date.now()-1728e5),file_size:"980 KB",format:"PDF",status:"ready",download_url:"/reports/users-jul-2025.pdf"}],Object.assign(w,{total_revenue:125e5,total_tickets:3420,active_events:28,active_users:1875})},g=async i=>{t.value=!0;try{const d=await fetch("/api/v1/admin/reports/generate",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({type:i,start_date:p.start,end_date:p.end})});if(d.ok){const m=await d.json();m.success&&x.value.unshift(m.data.report)}else{const m={id:Date.now(),type:i,period:`${new Date(p.start).toLocaleDateString("fr-FR")} - ${new Date(p.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${i}-${Date.now()}.pdf`};x.value.unshift(m)}}catch{console.log("API non disponible, génération simulée");const m={id:Date.now(),type:i,period:`${new Date(p.start).toLocaleDateString("fr-FR")} - ${new Date(p.end).toLocaleDateString("fr-FR")}`,created_at:new Date,file_size:"1.2 MB",format:"PDF",status:"ready",download_url:`/reports/${i}-${Date.now()}.pdf`};x.value.unshift(m)}finally{t.value=!1}},A=async i=>{try{const d=await fetch(`/api/v1/admin/reports/${i.id}/download`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(d.ok){const m=await d.blob(),D=window.URL.createObjectURL(m),b=document.createElement("a");b.href=D,b.download=`rapport-${i.type}-${i.id}.pdf`,document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(D),document.body.removeChild(b)}else alert("Téléchargement simulé du rapport: "+i.type)}catch{alert("Téléchargement simulé du rapport: "+i.type)}},y=async i=>{if(confirm("Êtes-vous sûr de vouloir supprimer ce rapport ?"))try{(await fetch(`/api/v1/admin/reports/${i.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?x.value=x.value.filter(m=>m.id!==i.id):x.value=x.value.filter(m=>m.id!==i.id)}catch{x.value=x.value.filter(m=>m.id!==i.id)}},z=async()=>{if(confirm("Êtes-vous sûr de vouloir vider tout l'historique des rapports ?"))try{(await fetch("/api/v1/admin/reports/clear",{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?x.value=[]:x.value=[]}catch{x.value=[]}},T=()=>{const i=new Date,d={today:{start:i,end:i},week:{start:new Date(i.getTime()-10080*60*1e3),end:i},month:{start:new Date(i.getFullYear(),i.getMonth(),1),end:i},quarter:{start:new Date(i.getFullYear(),Math.floor(i.getMonth()/3)*3,1),end:i},year:{start:new Date(i.getFullYear(),0,1),end:i}};if(d[s.value]){const m=d[s.value];p.start=m.start.toISOString().split("T")[0],p.end=m.end.toISOString().split("T")[0]}},S=()=>{o()},I=i=>new Intl.NumberFormat("fr-FR").format(i),G=i=>new Date(i).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=i=>({financial:"Rapport Financier",events:"Rapport Événements",users:"Rapport Utilisateurs",performance:"Rapport Performance"})[i]||i,P=i=>({financial:"bg-blue-100 text-blue-600",events:"bg-yellow-100 text-yellow-600",users:"bg-green-100 text-green-600",performance:"bg-purple-100 text-purple-600"})[i]||"bg-gray-100 text-gray-600";return se(()=>{const i=new Date,d=new Date(i.getFullYear(),i.getMonth(),1);p.start=d.toISOString().split("T")[0],p.end=i.toISOString().split("T")[0],o()}),{loading:v,generating:t,reports:x,selectedPeriod:s,dateRange:p,stats:w,loadReports:o,generateReport:g,downloadReport:A,deleteReport:y,clearHistory:z,setPredefinedPeriod:T,refreshReports:S,formatAmount:I,formatDateTime:G,getReportTypeName:_,getReportTypeClass:P}}},U0={class:"reports-management p-6"},R0={class:"bg-white rounded-lg shadow p-4 mb-6"},D0={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},V0={class:"flex items-end"},E0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},B0={class:"bg-white rounded-lg shadow p-6 text-center"},I0={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},q0={class:"w-8 h-8",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},L0=["disabled"],N0={class:"bg-white rounded-lg shadow p-6 text-center"},$0={class:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},X0={class:"w-8 h-8",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},H0=["disabled"],G0={class:"bg-white rounded-lg shadow p-6 text-center"},K0=["disabled"],W0={class:"bg-white rounded-lg shadow p-6 text-center"},J0=["disabled"],Y0={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Q0={class:"bg-white rounded-lg shadow p-4"},Z0={class:"flex items-center"},em={class:"p-2 rounded-lg",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},tm={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},sm={class:"ml-4"},om={class:"text-xl font-bold",style:{color:"#272d63"}},am={class:"bg-white rounded-lg shadow p-4"},nm={class:"flex items-center"},rm={class:"p-2 rounded-lg",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},lm={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},im={class:"ml-4"},dm={class:"text-xl font-bold",style:{color:"#fab511"}},um={class:"bg-white rounded-lg shadow p-4"},cm={class:"flex items-center"},mm={class:"ml-4"},gm={class:"text-xl font-bold text-green-600"},pm={class:"bg-white rounded-lg shadow p-4"},fm={class:"flex items-center"},vm={class:"ml-4"},xm={class:"text-xl font-bold text-purple-600"},ym={class:"bg-white rounded-lg shadow overflow-hidden"},bm={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},hm={key:0,class:"p-8 text-center"},wm={key:1,class:"p-8 text-center"},_m={key:2,class:"overflow-x-auto"},km={class:"w-full"},Cm={class:"divide-y divide-gray-200"},Sm={class:"px-6 py-4"},Am={class:"flex items-center"},Mm={class:"text-sm font-medium text-gray-900"},jm={class:"text-sm text-gray-500"},Pm={class:"px-6 py-4 text-sm text-gray-900"},Tm={class:"px-6 py-4 text-sm text-gray-500"},Om={class:"px-6 py-4 text-sm text-gray-500"},Fm={class:"px-6 py-4"},zm={class:"px-6 py-4"},Um={class:"flex space-x-2"},Rm=["onClick"],Dm=["onClick"];function Vm(v,t,x,s,p,w){return l(),r("div",U0,[t[43]||(t[43]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Rapports et Analyses"),e("p",{class:"text-gray-600"},"Générez et consultez les rapports de performance de la plateforme")],-1)),e("div",R0,[e("div",D0,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de début",-1)),u(e("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=o=>s.dateRange.start=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.dateRange.start]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),u(e("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>s.dateRange.end=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.dateRange.end]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Période prédéfinie",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.selectedPeriod=o),onChange:t[3]||(t[3]=(...o)=>s.setPredefinedPeriod&&s.setPredefinedPeriod(...o)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[20]||(t[20]=[re('<option value="" data-v-04ad1860>Personnalisée</option><option value="today" data-v-04ad1860>Aujourd&#39;hui</option><option value="week" data-v-04ad1860>Cette semaine</option><option value="month" data-v-04ad1860>Ce mois</option><option value="quarter" data-v-04ad1860>Ce trimestre</option><option value="year" data-v-04ad1860>Cette année</option>',6)])],544),[[L,s.selectedPeriod]])]),e("div",V0,[e("button",{onClick:t[4]||(t[4]=(...o)=>s.refreshReports&&s.refreshReports(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Actualiser ",32)])])]),e("div",E0,[e("div",B0,[e("div",I0,[(l(),r("svg",q0,[...t[22]||(t[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),t[23]||(t[23]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Financier",-1)),t[24]||(t[24]=e("p",{class:"text-gray-600 text-sm mb-4"},"Revenus, commissions, paiements et remboursements",-1)),e("button",{onClick:t[7]||(t[7]=o=>s.generateReport("financial")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[9]||(t[9]=o=>o.currentTarget.style.backgroundColor="#272d63")},n(s.generating?"Génération...":"Générer"),41,L0)]),e("div",N0,[e("div",$0,[(l(),r("svg",X0,[...t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])]))]),t[26]||(t[26]=e("h3",{class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},"Rapport Événements",-1)),t[27]||(t[27]=e("p",{class:"text-gray-600 text-sm mb-4"},"Performances, ventes de tickets et tendances",-1)),e("button",{onClick:t[10]||(t[10]=o=>s.generateReport("events")),disabled:s.generating,class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[11]||(t[11]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#fab511")},n(s.generating?"Génération...":"Générer"),41,H0)]),e("div",G0,[t[28]||(t[28]=re('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-green-100" data-v-04ad1860><svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Utilisateurs</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Croissance, activité et segments d&#39;utilisateurs</p>',3)),e("button",{onClick:t[13]||(t[13]=o=>s.generateReport("users")),disabled:s.generating,class:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},n(s.generating?"Génération...":"Générer"),9,K0)]),e("div",W0,[t[29]||(t[29]=re('<div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center bg-purple-100" data-v-04ad1860><svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-04ad1860><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" data-v-04ad1860></path></svg></div><h3 class="text-lg font-semibold mb-2" style="color:#272d63;" data-v-04ad1860>Rapport Performance</h3><p class="text-gray-600 text-sm mb-4" data-v-04ad1860>Métriques de performance de la plateforme</p>',3)),e("button",{onClick:t[14]||(t[14]=o=>s.generateReport("performance")),disabled:s.generating,class:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},n(s.generating?"Génération...":"Générer"),9,J0)])]),e("div",Y0,[e("div",Q0,[e("div",Z0,[e("div",em,[(l(),r("svg",tm,[...t[30]||(t[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},null,-1)])]))]),e("div",sm,[t[31]||(t[31]=e("p",{class:"text-sm text-gray-600"},"Revenus Total",-1)),e("p",om,n(s.formatAmount(s.stats.total_revenue))+" XAF",1)])])]),e("div",am,[e("div",nm,[e("div",rm,[(l(),r("svg",lm,[...t[32]||(t[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"},null,-1)])]))]),e("div",im,[t[33]||(t[33]=e("p",{class:"text-sm text-gray-600"},"Tickets Vendus",-1)),e("p",dm,n(s.stats.total_tickets),1)])])]),e("div",um,[e("div",cm,[t[35]||(t[35]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",mm,[t[34]||(t[34]=e("p",{class:"text-sm text-gray-600"},"Événements Actifs",-1)),e("p",gm,n(s.stats.active_events),1)])])]),e("div",pm,[e("div",fm,[t[37]||(t[37]=e("div",{class:"p-2 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),e("div",vm,[t[36]||(t[36]=e("p",{class:"text-sm text-gray-600"},"Utilisateurs Actifs",-1)),e("p",xm,n(s.stats.active_users),1)])])])]),e("div",ym,[e("div",bm,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold",style:{color:"#272d63"}},"Historique des Rapports",-1)),e("button",{onClick:t[15]||(t[15]=(...o)=>s.clearHistory&&s.clearHistory(...o)),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Vider l'historique ")]),s.loading?(l(),r("div",hm,[...t[39]||(t[39]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{"border-color":"#272d63"}},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chargement...",-1)])])):s.reports.length===0?(l(),r("div",wm,[...t[40]||(t[40]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun rapport",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par générer votre premier rapport.",-1)])])):(l(),r("div",_m,[e("table",km,[t[42]||(t[42]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Période"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Généré le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Taille"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Cm,[(l(!0),r(E,null,B(s.reports,o=>(l(),r("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Sm,[e("div",Am,[e("div",{class:N(["w-8 h-8 rounded-full flex items-center justify-center mr-3",s.getReportTypeClass(o.type)])},[...t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1)])],2),e("div",null,[e("p",Mm,n(s.getReportTypeName(o.type)),1),e("p",jm,n(o.format),1)])])]),e("td",Pm,n(o.period),1),e("td",Tm,n(s.formatDateTime(o.created_at)),1),e("td",Om,n(o.file_size),1),e("td",Fm,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="ready"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},n(o.status==="ready"?"Prêt":"En cours"),3)]),e("td",zm,[e("div",Um,[o.status==="ready"?(l(),r("button",{key:0,onClick:a=>s.downloadReport(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[16]||(t[16]=a=>{a.currentTarget.style.backgroundColor="#fab511",a.currentTarget.style.color="#fff"}),onMouseleave:t[17]||(t[17]=a=>{a.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",a.currentTarget.style.color="#272d63"})}," Télécharger ",40,Rm)):M("",!0),e("button",{onClick:a=>s.deleteReport(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,Dm)])])]))),128))])])]))])])}const Em=te(z0,[["render",Vm],["__scopeId","data-v-04ad1860"]]),Gp=Object.freeze(Object.defineProperty({__proto__:null,default:Em},Symbol.toStringTag,{value:"Module"})),Bm={name:"Settings",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(!1),p=c(!1),w=H({platform_name:"",site_url:"",contact_email:"",timezone:"Africa/Libreville",currency:"XAF"}),o=H({airtel_money:!0,moov_money:!0,bank_cards:!1}),a=H({email_enabled:!0,sms_enabled:!1,push_enabled:!0}),g=H({maintenance_mode:!1,maintenance_message:""}),A=H({fixed_commission:500,percentage_commission:5}),y=async()=>{v.value=!0;try{const d=await fetch("/api/v1/admin/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(d.ok){const m=await d.json();m.success&&(Object.assign(w,m.data.general||{}),Object.assign(o,m.data.payment||{}),Object.assign(a,m.data.notification||{}),Object.assign(g,m.data.maintenance||{}),Object.assign(A,m.data.commission||{}))}else z()}catch{console.log("API non disponible, utilisation des données locales"),z()}finally{v.value=!1}},z=()=>{Object.assign(w,{platform_name:"Primea Ticketing",site_url:"https://primea.ga",contact_email:"contact@primea.ga",timezone:"Africa/Libreville",currency:"XAF"}),Object.assign(o,{airtel_money:!0,moov_money:!0,bank_cards:!1}),Object.assign(a,{email_enabled:!0,sms_enabled:!1,push_enabled:!0}),Object.assign(g,{maintenance_mode:!1,maintenance_message:"Le site est temporairement en maintenance pour amélioration. Nous reviendrons bientôt !"}),Object.assign(A,{fixed_commission:500,percentage_commission:5})},T=async()=>{t.value=!0;try{(await fetch("/api/v1/admin/settings/general",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(w)})).ok?alert("Paramètres généraux sauvegardés avec succès"):alert("Paramètres généraux sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres généraux sauvegardés avec succès (simulé)")}finally{t.value=!1}},S=async()=>{x.value=!0;try{(await fetch("/api/v1/admin/settings/payment",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).ok?alert("Paramètres de paiement sauvegardés avec succès"):alert("Paramètres de paiement sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de paiement sauvegardés avec succès (simulé)")}finally{x.value=!1}},I=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/settings/notifications",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)})).ok?alert("Paramètres de notification sauvegardés avec succès"):alert("Paramètres de notification sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de notification sauvegardés avec succès (simulé)")}finally{s.value=!1}},G=async()=>{p.value=!0;try{(await fetch("/api/v1/admin/settings/security",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...g,...A})})).ok?alert("Paramètres de sécurité sauvegardés avec succès"):alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Paramètres de sécurité sauvegardés avec succès (simulé)")}finally{p.value=!1}},_=()=>{const d={general:w,payment:o,notification:a,maintenance:g,commission:A,exported_at:new Date().toISOString()},m=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),D=window.URL.createObjectURL(m),b=document.createElement("a");b.href=D,b.download=`primea-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(b),b.click(),window.URL.revokeObjectURL(D),document.body.removeChild(b)},P=d=>{const m=d.target.files[0];if(!m)return;const D=new FileReader;D.onload=b=>{try{const f=JSON.parse(b.target.result);confirm("Êtes-vous sûr de vouloir importer cette configuration ? Cela remplacera tous les paramètres actuels.")&&(f.general&&Object.assign(w,f.general),f.payment&&Object.assign(o,f.payment),f.notification&&Object.assign(a,f.notification),f.maintenance&&Object.assign(g,f.maintenance),f.commission&&Object.assign(A,f.commission),alert("Configuration importée avec succès"))}catch{alert("Erreur lors de l'importation du fichier : format invalide")}},D.readAsText(m),d.target.value=""},i=()=>{confirm("Êtes-vous sûr de vouloir réinitialiser tous les paramètres ? Cette action est irréversible.")&&(z(),alert("Tous les paramètres ont été réinitialisés aux valeurs par défaut"))};return se(()=>{y()}),{loading:v,savingGeneral:t,savingPayment:x,savingNotifications:s,savingSecurity:p,generalForm:w,paymentForm:o,notificationForm:a,maintenanceForm:g,commissionForm:A,saveGeneralSettings:T,savePaymentSettings:S,saveNotificationSettings:I,saveSecuritySettings:G,exportSettings:_,importSettings:P,resetAllSettings:i}}},Im={class:"settings-management p-6"},qm={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Lm={class:"bg-white rounded-lg shadow p-6"},Nm=["disabled"],$m={class:"bg-white rounded-lg shadow p-6"},Xm={class:"space-y-4"},Hm={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},Gm={class:"relative inline-flex items-center cursor-pointer"},Km={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},Wm={class:"relative inline-flex items-center cursor-pointer"},Jm={class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},Ym={class:"relative inline-flex items-center cursor-pointer"},Qm=["disabled"],Zm={class:"bg-white rounded-lg shadow p-6"},eg={class:"space-y-4"},tg={class:"flex items-center justify-between"},sg={class:"relative inline-flex items-center cursor-pointer"},og={class:"flex items-center justify-between"},ag={class:"relative inline-flex items-center cursor-pointer"},ng={class:"flex items-center justify-between"},rg={class:"relative inline-flex items-center cursor-pointer"},lg=["disabled"],ig={class:"bg-white rounded-lg shadow p-6"},dg={class:"space-y-6"},ug={class:"p-4 border border-orange-200 bg-orange-50 rounded-lg"},cg={class:"flex items-center justify-between"},mg={class:"relative inline-flex items-center cursor-pointer"},gg={key:0,class:"mt-4"},pg={class:"grid grid-cols-2 gap-4"},fg=["disabled"],vg={class:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},xg={class:"bg-white rounded-lg shadow p-4 text-center"},yg={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},bg={class:"w-6 h-6",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},hg={class:"bg-white rounded-lg shadow p-4 text-center"},wg={class:"w-12 h-12 mx-auto mb-3 rounded-full flex items-center justify-center",style:{"background-color":"rgba(250, 181, 17, 0.1)"}},_g={class:"w-6 h-6",style:{color:"#fab511"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kg={class:"bg-white rounded-lg shadow p-4 text-center"};function Cg(v,t,x,s,p,w){return l(),r("div",Im,[t[62]||(t[62]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Paramètres Système"),e("p",{class:"text-gray-600"},"Configurez les paramètres généraux de la plateforme Primea")],-1)),e("div",qm,[e("div",Lm,[t[38]||(t[38]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Configuration Générale",-1)),e("form",{onSubmit:t[7]||(t[7]=oe((...o)=>s.saveGeneralSettings&&s.saveGeneralSettings(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom de la plateforme *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.generalForm.platform_name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.generalForm.platform_name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL du site *",-1)),u(e("input",{type:"url","onUpdate:modelValue":t[1]||(t[1]=o=>s.generalForm.site_url=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.generalForm.site_url]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email de contact *",-1)),u(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=o=>s.generalForm.contact_email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.generalForm.contact_email]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.generalForm.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[34]||(t[34]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1),e("option",{value:"Europe/Paris"},"Paris (GMT+1)",-1)])],512),[[L,s.generalForm.timezone]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Devise",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.generalForm.currency=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[36]||(t[36]=[e("option",{value:"XAF"},"Franc CFA (XAF)",-1),e("option",{value:"EUR"},"Euro (EUR)",-1),e("option",{value:"USD"},"Dollar US (USD)",-1)])],512),[[L,s.generalForm.currency]])]),e("button",{type:"submit",disabled:s.savingGeneral,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[5]||(t[5]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63")},n(s.savingGeneral?"Sauvegarde...":"Sauvegarder"),41,Nm)],32)]),e("div",$m,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Moyens de Paiement",-1)),e("div",Xm,[e("div",Hm,[t[39]||(t[39]=re('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-red-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-red-600 font-bold text-xs" data-v-b0f1a205>AM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Airtel Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Airtel</p></div></div>',1)),e("label",Gm,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=o=>s.paymentForm.airtel_money=o),class:"sr-only peer"},null,512),[[ee,s.paymentForm.airtel_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.paymentForm.airtel_money?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",Km,[t[40]||(t[40]=re('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-orange-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><span class="text-orange-600 font-bold text-xs" data-v-b0f1a205>MM</span></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Moov Money</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Paiements mobile Moov</p></div></div>',1)),e("label",Wm,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>s.paymentForm.moov_money=o),class:"sr-only peer"},null,512),[[ee,s.paymentForm.moov_money]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.paymentForm.moov_money?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",Jm,[t[42]||(t[42]=re('<div class="flex items-center" data-v-b0f1a205><div class="w-12 h-8 bg-blue-100 rounded flex items-center justify-center mr-3" data-v-b0f1a205><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-b0f1a205><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" data-v-b0f1a205></path></svg></div><div data-v-b0f1a205><h4 class="font-medium text-gray-900" data-v-b0f1a205>Cartes Bancaires</h4><p class="text-sm text-gray-600" data-v-b0f1a205>Visa, Mastercard, etc.</p></div></div>',1)),e("label",Ym,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>s.paymentForm.bank_cards=o),class:"sr-only peer"},null,512),[[ee,s.paymentForm.bank_cards]]),t[41]||(t[41]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"},null,-1))])]),e("button",{onClick:t[11]||(t[11]=(...o)=>s.savePaymentSettings&&s.savePaymentSettings(...o)),disabled:s.savingPayment,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[12]||(t[12]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#fab511")},n(s.savingPayment?"Sauvegarde...":"Sauvegarder les paiements"),41,Qm)])]),e("div",Zm,[t[48]||(t[48]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Paramètres de Notifications",-1)),e("div",eg,[e("div",tg,[t[44]||(t[44]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par email")],-1)),e("label",sg,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=o=>s.notificationForm.email_enabled=o),class:"sr-only peer"},null,512),[[ee,s.notificationForm.email_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.notificationForm.email_enabled?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",og,[t[45]||(t[45]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications SMS"),e("p",{class:"text-sm text-gray-600"},"Envoyer des notifications par SMS")],-1)),e("label",ag,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=o=>s.notificationForm.sms_enabled=o),class:"sr-only peer"},null,512),[[ee,s.notificationForm.sms_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:ne(s.notificationForm.sms_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",ng,[t[47]||(t[47]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Push"),e("p",{class:"text-sm text-gray-600"},"Notifications navigateur et mobile")],-1)),e("label",rg,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.notificationForm.push_enabled=o),class:"sr-only peer"},null,512),[[ee,s.notificationForm.push_enabled]]),t[46]||(t[46]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"},null,-1))])]),e("button",{onClick:t[17]||(t[17]=(...o)=>s.saveNotificationSettings&&s.saveNotificationSettings(...o)),disabled:s.savingNotifications,class:"w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},n(s.savingNotifications?"Sauvegarde...":"Sauvegarder les notifications"),9,lg)])]),e("div",ig,[t[55]||(t[55]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité et Maintenance",-1)),e("div",dg,[e("div",ug,[e("div",cg,[t[50]||(t[50]=e("div",null,[e("h4",{class:"font-medium text-gray-900 flex items-center"},[e("svg",{class:"w-5 h-5 text-orange-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),Z(" Mode Maintenance ")]),e("p",{class:"text-sm text-gray-600"},"Rendre le site temporairement indisponible")],-1)),e("label",mg,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=o=>s.maintenanceForm.maintenance_mode=o),class:"sr-only peer"},null,512),[[ee,s.maintenanceForm.maintenance_mode]]),t[49]||(t[49]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-600"},null,-1))])]),s.maintenanceForm.maintenance_mode?(l(),r("div",gg,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message de maintenance",-1)),u(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.maintenanceForm.maintenance_message=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"},placeholder:"Le site est temporairement en maintenance..."},null,512),[[j,s.maintenanceForm.maintenance_message]])])):M("",!0)]),e("div",null,[t[54]||(t[54]=e("h4",{class:"font-medium text-gray-900 mb-3"},"Commission Plateforme",-1)),e("div",pg,[e("div",null,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission fixe (XAF)",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=o=>s.commissionForm.fixed_commission=o),min:"0",step:"100",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.commissionForm.fixed_commission]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Commission % du ticket",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[21]||(t[21]=o=>s.commissionForm.percentage_commission=o),min:"0",max:"100",step:"0.1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.commissionForm.percentage_commission]])])])]),e("button",{onClick:t[22]||(t[22]=(...o)=>s.saveSecuritySettings&&s.saveSecuritySettings(...o)),disabled:s.savingSecurity,class:"w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},n(s.savingSecurity?"Sauvegarde...":"Sauvegarder la sécurité"),9,fg)])])]),e("div",vg,[e("div",xg,[e("div",yg,[(l(),r("svg",bg,[...t[56]||(t[56]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"},null,-1)])]))]),t[57]||(t[57]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Exporter Configuration",-1)),e("button",{onClick:t[23]||(t[23]=(...o)=>s.exportSettings&&s.exportSettings(...o)),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[24]||(t[24]=o=>{o.currentTarget.style.backgroundColor="#fab511",o.currentTarget.style.color="#fff"}),onMouseleave:t[25]||(t[25]=o=>{o.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",o.currentTarget.style.color="#272d63"})}," Exporter ",32)]),e("div",hg,[e("div",wg,[(l(),r("svg",_g,[...t[58]||(t[58]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])]))]),t[59]||(t[59]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Importer Configuration",-1)),e("input",{type:"file",ref:"importFile",onChange:t[26]||(t[26]=(...o)=>s.importSettings&&s.importSettings(...o)),accept:".json",class:"hidden"},null,544),e("button",{onClick:t[27]||(t[27]=o=>v.$refs.importFile.click()),class:"text-sm px-4 py-2 rounded transition-colors duration-200",style:{color:"#fab511","background-color":"rgba(250, 181, 17, 0.1)"},onMouseover:t[28]||(t[28]=o=>{o.currentTarget.style.backgroundColor="#272d63",o.currentTarget.style.color="#fff"}),onMouseleave:t[29]||(t[29]=o=>{o.currentTarget.style.backgroundColor="rgba(250, 181, 17, 0.1)",o.currentTarget.style.color="#fab511"})}," Importer ",32)]),e("div",kg,[t[60]||(t[60]=e("div",{class:"w-12 h-12 mx-auto mb-3 bg-gray-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})])],-1)),t[61]||(t[61]=e("h4",{class:"font-medium mb-2",style:{color:"#272d63"}},"Réinitialiser",-1)),e("button",{onClick:t[30]||(t[30]=(...o)=>s.resetAllSettings&&s.resetAllSettings(...o)),class:"text-sm text-red-600 hover:text-red-800 px-4 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Tout Réinitialiser ")])])])}const Sg=te(Bm,[["render",Cg],["__scopeId","data-v-b0f1a205"]]),Kp=Object.freeze(Object.defineProperty({__proto__:null,default:Sg},Symbol.toStringTag,{value:"Module"})),Ag={name:"Profile",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c(!1),p=c(!1),w=c(""),o=c({id:1,name:"",email:"",phone:"",position:"",created_at:new Date,login_count:0}),a=H({name:"",email:"",phone:"",position:""}),g=H({current_password:"",new_password:"",new_password_confirmation:""}),A=H({email_notifications:!0,two_factor_enabled:!1,language:"fr",timezone:"Africa/Libreville"}),y=c([]),z=async()=>{v.value=!0;try{const f=await fetch("/api/v1/admin/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}});if(f.ok){const C=await f.json();C.success&&(o.value=C.data.user,Object.assign(a,C.data.user),Object.assign(A,C.data.preferences||A),y.value=C.data.sessions||[])}else T()}catch{console.log("API non disponible, utilisation des données locales"),T()}finally{v.value=!1}},T=()=>{const f={id:1,name:localStorage.getItem("userName")||"Admin Primea",email:localStorage.getItem("userEmail")||"admin@primea.ga",phone:"+241 01 23 45 67",position:"Super Administrateur",created_at:new Date("2024-01-15"),login_count:127};o.value=f,Object.assign(a,f),y.value=[{id:1,device:"Chrome sur macOS",location:"Libreville, Gabon",last_activity:new Date,current:!0},{id:2,device:"Safari sur iPhone",location:"Libreville, Gabon",last_activity:new Date(Date.now()-7200*1e3),current:!1}]},S=async()=>{t.value=!0;try{const f=await fetch("/api/v1/admin/profile",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});f.ok?(await f.json()).success&&(o.value={...o.value,...a},localStorage.setItem("userName",a.name),localStorage.setItem("userEmail",a.email),alert("Profil mis à jour avec succès")):(o.value={...o.value,...a},localStorage.setItem("userName",a.name),localStorage.setItem("userEmail",a.email),alert("Profil mis à jour avec succès (simulé)"))}catch{console.log("API non disponible, mise à jour locale"),o.value={...o.value,...a},localStorage.setItem("userName",a.name),localStorage.setItem("userEmail",a.email),alert("Profil mis à jour avec succès (simulé)")}finally{t.value=!1}},I=async()=>{if(w.value="",g.new_password!==g.new_password_confirmation){w.value="Les mots de passe ne correspondent pas";return}if(g.new_password.length<8){w.value="Le mot de passe doit contenir au moins 8 caractères";return}x.value=!0;try{const f=await fetch("/api/v1/admin/profile/password",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g)});f.ok?(await f.json()).success&&(Object.assign(g,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès")):(Object.assign(g,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)"))}catch{console.log("API non disponible, changement simulé"),Object.assign(g,{current_password:"",new_password:"",new_password_confirmation:""}),alert("Mot de passe changé avec succès (simulé)")}finally{x.value=!1}},G=async()=>{s.value=!0;try{(await fetch("/api/v1/admin/profile/preferences",{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(A)})).ok?alert("Préférences sauvegardées avec succès"):alert("Préférences sauvegardées avec succès (simulé)")}catch{console.log("API non disponible, sauvegarde simulée"),alert("Préférences sauvegardées avec succès (simulé)")}finally{s.value=!1}},_=()=>{p.value=!0},P=async f=>{if(confirm("Êtes-vous sûr de vouloir révoquer cette session ?"))try{(await fetch(`/api/v1/admin/profile/sessions/${f.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?y.value=y.value.filter(k=>k.id!==f.id):y.value=y.value.filter(k=>k.id!==f.id)}catch{y.value=y.value.filter(k=>k.id!==f.id)}},i=async()=>{if(confirm("Cela déconnectera toutes les autres sessions. Continuer ?"))try{(await fetch("/api/v1/admin/profile/sessions/logout-all",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json"}})).ok?(y.value=y.value.filter(C=>C.current),alert("Toutes les autres sessions ont été déconnectées")):(y.value=y.value.filter(C=>C.current),alert("Toutes les autres sessions ont été déconnectées (simulé)"))}catch{y.value=y.value.filter(C=>C.current),alert("Toutes les autres sessions ont été déconnectées (simulé)")}},d=()=>{alert("Téléchargement des données du compte (fonctionnalité à venir)")},m=f=>f.split(" ").map(C=>C.charAt(0)).join("").toUpperCase().substring(0,2),D=f=>new Date(f).toLocaleDateString("fr-FR",{year:"numeric",month:"long"}),b=f=>{const k=new Date-new Date(f),V=Math.floor(k/6e4),h=Math.floor(k/36e5),U=Math.floor(k/864e5);return V<1?"À l'instant":V<60?`Il y a ${V} min`:h<24?`Il y a ${h}h`:`Il y a ${U}j`};return se(()=>{z()}),{loading:v,updatingProfile:t,changingPassword:x,updatingPreferences:s,showAvatarModal:p,passwordError:w,profile:o,profileForm:a,passwordForm:g,preferences:A,activeSessions:y,updateProfile:S,changePassword:I,updatePreferences:G,changeAvatar:_,revokeSession:P,logoutAllSessions:i,downloadAccountData:d,getInitials:m,formatDate:D,formatRelativeTime:b}}},Mg={class:"profile-management p-6"},jg={class:"bg-white rounded-lg shadow p-6 mb-6"},Pg={class:"flex items-center space-x-6"},Tg={class:"relative"},Og={class:"w-24 h-24 rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},Fg={class:"flex-1"},zg={class:"text-xl font-bold",style:{color:"#272d63"}},Ug={class:"text-gray-600 mb-1"},Rg={class:"flex items-center space-x-4 text-sm text-gray-500"},Dg={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Vg={class:"bg-white rounded-lg shadow p-6"},Eg=["disabled"],Bg={class:"bg-white rounded-lg shadow p-6"},Ig={key:0,class:"text-red-600 text-sm"},qg=["disabled"],Lg={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6"},Ng={class:"bg-white rounded-lg shadow p-6"},$g={class:"space-y-4"},Xg={class:"flex items-center justify-between"},Hg={class:"relative inline-flex items-center cursor-pointer"},Gg={class:"flex items-center justify-between"},Kg={class:"relative inline-flex items-center cursor-pointer"},Wg=["disabled"],Jg={class:"bg-white rounded-lg shadow p-6"},Yg={class:"grid grid-cols-2 gap-4 mb-6"},Qg={class:"text-center p-3 bg-gray-50 rounded-lg"},Zg={class:"text-xl font-bold",style:{color:"#272d63"}},e1={class:"text-center p-3 bg-gray-50 rounded-lg"},t1={class:"text-xl font-bold",style:{color:"#fab511"}},s1={class:"space-y-3"},o1={class:"flex items-center"},a1={class:"w-8 h-8 rounded-full flex items-center justify-center mr-3",style:{"background-color":"rgba(39, 45, 99, 0.1)"}},n1={class:"w-4 h-4",style:{color:"#272d63"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},r1={class:"text-sm font-medium text-gray-900"},l1={class:"text-xs text-gray-500"},i1={class:"flex items-center space-x-2"},d1={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full"},u1=["onClick"],c1={class:"mt-6 space-y-2"},m1={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},g1={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},p1={class:"text-center mb-4"},f1={class:"w-24 h-24 mx-auto rounded-full flex items-center justify-center text-white text-2xl font-bold",style:{"background-color":"#272d63"}},v1={class:"flex space-x-3"};function x1(v,t,x,s,p,w){return l(),r("div",Mg,[t[52]||(t[52]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold mb-2",style:{color:"#272d63"}},"Mon Profil"),e("p",{class:"text-gray-600"},"Gérez vos informations personnelles et préférences")],-1)),e("div",jg,[e("div",Pg,[e("div",Tg,[e("div",Og,n(s.getInitials(s.profile.name)),1),e("button",{onClick:t[0]||(t[0]=(...o)=>s.changeAvatar&&s.changeAvatar(...o)),class:"absolute bottom-0 right-0 text-white p-2 rounded-full transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#fab511")},[...t[27]||(t[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],32)]),e("div",Fg,[e("h3",zg,n(s.profile.name),1),e("p",Ug,n(s.profile.email),1),e("div",Rg,[t[28]||(t[28]=e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),Z(" Administrateur ")],-1)),e("span",null,"Membre depuis "+n(s.formatDate(s.profile.created_at)),1)])])])]),e("div",Dg,[e("div",Vg,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Informations Personnelles",-1)),e("form",{onSubmit:t[9]||(t[9]=oe((...o)=>s.updateProfile&&s.updateProfile(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom complet *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.profileForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.profileForm.name]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email *",-1)),u(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=o=>s.profileForm.email=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.profileForm.email]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),u(e("input",{type:"tel","onUpdate:modelValue":t[5]||(t[5]=o=>s.profileForm.phone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.profileForm.phone]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Poste",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.profileForm.position=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.profileForm.position]])]),e("button",{type:"submit",disabled:s.updatingProfile,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[8]||(t[8]=o=>o.currentTarget.style.backgroundColor="#272d63")},n(s.updatingProfile?"Mise à jour...":"Mettre à jour"),41,Eg)],32)]),e("div",Bg,[t[37]||(t[37]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Changer le Mot de Passe",-1)),e("form",{onSubmit:t[15]||(t[15]=oe((...o)=>s.changePassword&&s.changePassword(...o),["prevent"])),class:"space-y-4"},[e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mot de passe actuel *",-1)),u(e("input",{type:"password","onUpdate:modelValue":t[10]||(t[10]=o=>s.passwordForm.current_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.passwordForm.current_password]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nouveau mot de passe *",-1)),u(e("input",{type:"password","onUpdate:modelValue":t[11]||(t[11]=o=>s.passwordForm.new_password=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.passwordForm.new_password]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Confirmer le mot de passe *",-1)),u(e("input",{type:"password","onUpdate:modelValue":t[12]||(t[12]=o=>s.passwordForm.new_password_confirmation=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.passwordForm.new_password_confirmation]])]),s.passwordError?(l(),r("div",Ig,n(s.passwordError),1)):M("",!0),e("button",{type:"submit",disabled:s.changingPassword,class:"w-full text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[13]||(t[13]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511")},n(s.changingPassword?"Changement...":"Changer le mot de passe"),41,qg)],32)])]),e("div",Lg,[e("div",Ng,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Préférences",-1)),e("div",$g,[e("div",Xg,[t[38]||(t[38]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Notifications Email"),e("p",{class:"text-sm text-gray-600"},"Recevoir les notifications importantes par email")],-1)),e("label",Hg,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=o=>s.preferences.email_notifications=o),class:"sr-only peer"},null,512),[[ee,s.preferences.email_notifications]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ne(s.preferences.email_notifications?{backgroundColor:"#272d63"}:{})},null,4)])]),e("div",Gg,[t[39]||(t[39]=e("div",null,[e("h4",{class:"font-medium text-gray-900"},"Authentification 2FA"),e("p",{class:"text-sm text-gray-600"},"Sécurité renforcée avec un code à usage unique")],-1)),e("label",Kg,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>s.preferences.two_factor_enabled=o),class:"sr-only peer"},null,512),[[ee,s.preferences.two_factor_enabled]]),e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600",style:ne(s.preferences.two_factor_enabled?{backgroundColor:"#fab511"}:{})},null,4)])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Langue de l'interface",-1)),u(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>s.preferences.language=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[40]||(t[40]=[e("option",{value:"fr"},"Français",-1),e("option",{value:"en"},"English",-1)])],512),[[L,s.preferences.language]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fuseau horaire",-1)),u(e("select",{"onUpdate:modelValue":t[19]||(t[19]=o=>s.preferences.timezone=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[42]||(t[42]=[e("option",{value:"Africa/Libreville"},"Libreville (GMT+1)",-1),e("option",{value:"Africa/Lagos"},"Lagos (GMT+1)",-1),e("option",{value:"UTC"},"UTC (GMT+0)",-1)])],512),[[L,s.preferences.timezone]])]),e("button",{onClick:t[20]||(t[20]=(...o)=>s.updatePreferences&&s.updatePreferences(...o)),disabled:s.updatingPreferences,class:"w-full bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200"},n(s.updatingPreferences?"Sauvegarde...":"Sauvegarder les préférences"),9,Wg)])]),e("div",Jg,[t[49]||(t[49]=e("h3",{class:"text-lg font-semibold mb-4",style:{color:"#272d63"}},"Sécurité & Sessions",-1)),e("div",Yg,[e("div",Qg,[e("div",Zg,n(s.profile.login_count||0),1),t[45]||(t[45]=e("div",{class:"text-sm text-gray-600"},"Connexions",-1))]),e("div",e1,[e("div",t1,n(s.activeSessions.length),1),t[46]||(t[46]=e("div",{class:"text-sm text-gray-600"},"Sessions actives",-1))])]),e("div",s1,[t[48]||(t[48]=e("h4",{class:"font-medium text-gray-900"},"Sessions Actives",-1)),(l(!0),r(E,null,B(s.activeSessions,o=>(l(),r("div",{key:o.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",o1,[e("div",a1,[(l(),r("svg",n1,[...t[47]||(t[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])]))]),e("div",null,[e("p",r1,n(o.device),1),e("p",l1,n(o.location)+" • "+n(s.formatRelativeTime(o.last_activity)),1)])]),e("div",i1,[o.current?(l(),r("span",d1," Actuelle ")):(l(),r("button",{key:1,onClick:a=>s.revokeSession(o),class:"text-xs text-red-600 hover:text-red-800 px-2 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Révoquer ",8,u1))])]))),128))]),e("div",c1,[e("button",{onClick:t[21]||(t[21]=(...o)=>s.logoutAllSessions&&s.logoutAllSessions(...o)),class:"w-full text-orange-600 hover:text-orange-800 py-2 px-4 bg-orange-100 hover:bg-orange-200 rounded-lg font-medium transition-colors duration-200"}," Déconnecter toutes les autres sessions "),e("button",{onClick:t[22]||(t[22]=(...o)=>s.downloadAccountData&&s.downloadAccountData(...o)),class:"w-full text-gray-600 hover:text-gray-800 py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors duration-200"}," Télécharger mes données ")])])]),s.showAvatarModal?(l(),r("div",m1,[e("div",g1,[t[51]||(t[51]=e("h3",{class:"text-lg font-bold mb-4",style:{color:"#272d63"}},"Changer la photo de profil",-1)),e("div",p1,[e("div",f1,n(s.getInitials(s.profile.name)),1),t[50]||(t[50]=e("p",{class:"text-sm text-gray-600 mt-2"},"Fonctionnalité à venir : upload d'image",-1))]),e("div",v1,[e("button",{onClick:t[23]||(t[23]=o=>s.showAvatarModal=!1),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler "),e("button",{onClick:t[24]||(t[24]=o=>s.showAvatarModal=!1),class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[25]||(t[25]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[26]||(t[26]=o=>o.currentTarget.style.backgroundColor="#272d63")}," Fermer ",32)])])])):M("",!0)])}const y1=te(Ag,[["render",x1],["__scopeId","data-v-baf281fd"]]),Wp=Object.freeze(Object.defineProperty({__proto__:null,default:y1},Symbol.toStringTag,{value:"Module"})),b1={name:"CategoryManagement",setup(){const v=c(!1),t=c(!1),x=c(!1),s=c([]),p=c(null),w=H({search:"",status:""}),o=H({name:"",description:"",color:"#272d63",status:"active"}),a=H({current_page:1,per_page:10,total:0,from:0,to:0}),g=le(()=>{if(!Array.isArray(s.value))return[];let d=s.value;return w.search&&(d=d.filter(m=>m.name.toLowerCase().includes(w.search.toLowerCase())||m.description?.toLowerCase().includes(w.search.toLowerCase()))),w.status&&(d=d.filter(m=>m.status===w.status)),d}),A=le(()=>{const d=[];if(!a.total||!a.per_page)return[1];const m=Math.ceil(a.total/a.per_page);for(let D=1;D<=m;D++)d.push(D);return d}),y=async(d=1)=>{v.value=!0;try{const m=new URLSearchParams({page:d,per_page:a.per_page,...w.search&&{search:w.search},...w.status&&{status:w.status}}),D=await fetch(`/api/v1/admin/categories?${m}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(D.ok){const b=await D.json();if(b.success){const f=b.data?.data||b.categories?.data||b.data||[];s.value=f,b.data?.total&&Object.assign(a,{current_page:b.data.current_page||1,per_page:b.data.per_page||20,total:b.data.total||0,from:b.data.from||0,to:b.data.to||0,last_page:b.data.last_page||1})}}else z()}catch{console.log("API non disponible, utilisation des données simulées"),z()}finally{v.value=!1}},z=()=>{s.value=[{id:1,name:"Concerts",slug:"concerts",description:"Événements musicaux et concerts live",color:"#272d63",status:"active",events_count:25,created_at:new Date},{id:2,name:"Conférences",slug:"conferences",description:"Événements professionnels et éducatifs",color:"#fab511",status:"active",events_count:12,created_at:new Date(Date.now()-864e5)},{id:3,name:"Sport",slug:"sport",description:"Événements sportifs et compétitions",color:"#10b981",status:"active",events_count:8,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Culture",slug:"culture",description:"Événements culturels et artistiques",color:"#8b5cf6",status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}],Object.assign(a,{current_page:1,per_page:10,total:s.value.length,from:1,to:s.value.length})},T=async()=>{try{const d=await fetch("/api/v1/admin/categories",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(d.ok)(await d.json()).success&&(P(),y());else{const m={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(m),P()}}catch{console.log("API non disponible, ajout local simulé");const m={id:Date.now(),...o,slug:o.name.toLowerCase().replace(/\s+/g,"-"),events_count:0,created_at:new Date};s.value.unshift(m),P()}},S=d=>{p.value=d,Object.assign(o,d),x.value=!0},I=async()=>{try{const d=await fetch(`/api/v1/admin/categories/${p.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)});if(d.ok)(await d.json()).success&&(P(),y());else{const m=s.value.findIndex(D=>D.id===p.value.id);m!==-1&&(s.value[m]={...s.value[m],...o}),P()}}catch{console.log("API non disponible, mise à jour locale simulée");const m=s.value.findIndex(D=>D.id===p.value.id);m!==-1&&(s.value[m]={...s.value[m],...o}),P()}},G=async d=>{if(confirm(`Êtes-vous sûr de vouloir supprimer la catégorie "${d.name}" ?`))try{(await fetch(`/api/v1/admin/categories/${d.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?y():s.value=s.value.filter(D=>D.id!==d.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(D=>D.id!==d.id)}},_=d=>{a.current_page=d,y(d)},P=()=>{t.value=!1,x.value=!1,p.value=null,Object.assign(o,{name:"",description:"",color:"#272d63",status:"active"})},i=d=>new Date(d).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return se(()=>{y()}),{loading:v,showCreateModal:t,showEditModal:x,categories:s,filters:w,categoryForm:o,pagination:a,filteredCategories:g,paginationPages:A,loadCategories:y,createCategory:T,editCategory:S,updateCategory:I,deleteCategory:G,changePage:_,closeModals:P,formatDate:i}}},h1={class:"category-management p-6"},w1={class:"mb-6 flex justify-between items-center"},_1={class:"bg-white rounded-lg shadow p-4 mb-6"},k1={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},C1={class:"flex items-end"},S1={key:0,class:"flex justify-center items-center h-64"},A1={key:1,class:"bg-white rounded-lg shadow overflow-hidden"},M1={class:"overflow-x-auto"},j1={class:"w-full"},P1={class:"divide-y divide-gray-200"},T1={class:"px-6 py-4"},O1={class:"flex items-center"},F1={class:"text-sm font-medium text-gray-900"},z1={class:"text-sm text-gray-500"},U1={class:"px-6 py-4"},R1={class:"text-sm text-gray-900"},D1={class:"px-6 py-4"},V1={class:"text-sm font-medium",style:{color:"#272d63"}},E1={class:"px-6 py-4"},B1={class:"px-6 py-4 text-sm text-gray-500"},I1={class:"px-6 py-4"},q1={class:"flex space-x-2"},L1=["onClick"],N1=["onClick"],$1={key:0,class:"text-center py-12"},X1={key:2,class:"mt-6 flex justify-between items-center"},H1={class:"text-sm text-gray-700"},G1={class:"flex space-x-2"},K1=["onClick"],W1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},J1={class:"bg-white rounded-lg p-6 w-full max-w-md mx-4"},Y1={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},Q1={class:"space-y-4"},Z1={class:"flex space-x-3 mt-6"};function ep(v,t,x,s,p,w){return l(),r("div",h1,[e("div",w1,[t[19]||(t[19]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Catégories"),e("p",{class:"text-gray-600 mt-1"},"Organisez et gérez les catégories d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=o=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=o=>o.currentTarget.style.backgroundColor="#272d63")},[...t[18]||(t[18]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Nouvelle Catégorie ",-1)])],32)]),e("div",_1,[e("div",k1,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.filters.search=o),placeholder:"Nom de catégorie...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.filters.search]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.filters.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[21]||(t[21]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[L,s.filters.status]])]),e("div",C1,[e("button",{onClick:t[5]||(t[5]=(...o)=>s.loadCategories&&s.loadCategories(...o)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[6]||(t[6]=o=>o.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[7]||(t[7]=o=>o.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(l(),r("div",S1,[...t[23]||(t[23]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(l(),r("div",A1,[e("div",M1,[e("table",j1,[t[25]||(t[25]=e("thead",{style:{"background-color":"#f8f9fa"}},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Catégorie"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Description"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événements"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Créé le"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",P1,[(l(!0),r(E,null,B(s.filteredCategories,o=>(l(),r("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",T1,[e("div",O1,[e("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:ne({backgroundColor:o.color+"20",color:o.color})},[...t[24]||(t[24]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"})],-1)])],4),e("div",null,[e("p",F1,n(o.name),1),e("p",z1,n(o.slug),1)])])]),e("td",U1,[e("p",R1,n(o.description||"Aucune description"),1)]),e("td",D1,[e("span",V1,n(o.events_count||0)+" événements",1)]),e("td",E1,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",o.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(o.status==="active"?"Actif":"Inactif"),3)]),e("td",B1,n(s.formatDate(o.created_at)),1),e("td",I1,[e("div",q1,[e("button",{onClick:a=>s.editCategory(o),class:"text-sm px-3 py-1 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[8]||(t[8]=a=>{a.currentTarget.style.backgroundColor="#fab511",a.currentTarget.style.color="#fff"}),onMouseleave:t[9]||(t[9]=a=>{a.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",a.currentTarget.style.color="#272d63"})}," Modifier ",40,L1),e("button",{onClick:a=>s.deleteCategory(o),class:"text-sm text-red-600 hover:text-red-800 px-3 py-1 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,N1)])])]))),128))])])]),s.categories.length===0?(l(),r("div",$1,[...t[26]||(t[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucune catégorie",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par créer votre première catégorie.",-1)])])):M("",!0)])),s.pagination.total>s.pagination.per_page?(l(),r("div",X1,[e("div",H1," Affichage de "+n(s.pagination.from)+" à "+n(s.pagination.to)+" sur "+n(s.pagination.total)+" catégories ",1),e("div",G1,[(l(!0),r(E,null,B(s.paginationPages,o=>(l(),r("button",{key:o,onClick:a=>s.changePage(o),class:N(["px-3 py-2 text-sm rounded-lg transition-colors duration-200",o===s.pagination.current_page?"text-white":"text-gray-700 hover:bg-gray-100"]),style:ne(o===s.pagination.current_page?{backgroundColor:"#272d63"}:{})},n(o),15,K1))),128))])])):M("",!0),s.showCreateModal||s.showEditModal?(l(),r("div",W1,[e("div",J1,[e("h3",Y1,n(s.showCreateModal?"Nouvelle Catégorie":"Modifier la Catégorie"),1),e("form",{onSubmit:t[17]||(t[17]=oe(o=>s.showCreateModal?s.createCategory():s.updateCategory(),["prevent"]))},[e("div",Q1,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.categoryForm.name=o),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.categoryForm.name]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),u(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.categoryForm.description=o),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.categoryForm.description]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Couleur",-1)),u(e("input",{type:"color","onUpdate:modelValue":t[12]||(t[12]=o=>s.categoryForm.color=o),class:"w-full h-10 border border-gray-300 rounded-lg"},null,512),[[j,s.categoryForm.color]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>s.categoryForm.status=o),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[30]||(t[30]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[L,s.categoryForm.status]])])]),e("div",Z1,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[14]||(t[14]=o=>o.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[15]||(t[15]=o=>o.currentTarget.style.backgroundColor="#272d63")},n(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[16]||(t[16]=(...o)=>s.closeModals&&s.closeModals(...o)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):M("",!0)])}const tp=te(b1,[["render",ep],["__scopeId","data-v-a15d9acb"]]),Jp=Object.freeze(Object.defineProperty({__proto__:null,default:tp},Symbol.toStringTag,{value:"Module"})),sp={name:"VenueManagement",components:{ImageUpload:me},setup(){const v=c(!1),t=c(!1),x=c(!1),s=c([]),p=c(null),w=c(null),o=H({search:"",city:"",status:""}),a=H({name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},status:"active"}),g=le(()=>{let i=s.value;return o.search&&(i=i.filter(d=>d.name.toLowerCase().includes(o.search.toLowerCase())||d.address.toLowerCase().includes(o.search.toLowerCase()))),o.city&&(i=i.filter(d=>d.city===o.city)),o.status&&(i=i.filter(d=>d.status===o.status)),i}),A=le(()=>!Array.isArray(s.value)||s.value.length===0?[]:[...new Set(s.value.map(i=>i.city))].sort()),y=async()=>{v.value=!0;try{const i=new URLSearchParams({...o.search&&{search:o.search},...o.city&&{city:o.city},...o.status&&{status:o.status}}),d=await fetch(`/api/v1/admin/venues?${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}});if(d.ok){const m=await d.json();if(m.success){const D=m.data?.data||m.venues?.data||m.data||[];s.value=D,m.data?.total&&(w.value={total:m.data.total,per_page:m.data.per_page,current_page:m.data.current_page,last_page:m.data.last_page})}}else z()}catch{console.log("API non disponible, utilisation des données simulées"),z()}finally{v.value=!1}},z=()=>{s.value||(s.value=[]),s.value=[{id:1,name:"Centre de Conférences Mbolo",description:"Centre moderne pour événements d'entreprise",address:"Avenue de l'Indépendance",city:"Libreville",postal_code:"BP 123",country:"Gabon",capacity:500,phone:"+241 01 23 45 67",email:"contact@mbolo.ga",image:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=400",status:"active",events_count:15,created_at:new Date},{id:2,name:"Salle Polyvalente Akanda",description:"Espace polyvalent pour tous types d'événements",address:"Quartier Akanda",city:"Akanda",postal_code:"BP 456",country:"Gabon",capacity:300,phone:"+241 01 34 56 78",email:"akanda@venues.ga",image:"https://images.unsplash.com/photo-1511578314322-379afb476865?w=400",status:"active",events_count:8,created_at:new Date(Date.now()-864e5)},{id:3,name:"Stade Omnisports",description:"Grand stade pour événements sportifs et concerts",address:"Zone Industrielle Owendo",city:"Owendo",postal_code:"BP 789",country:"Gabon",capacity:5e3,phone:"+241 01 45 67 89",email:"stade@owendo.ga",image:"https://images.unsplash.com/photo-1459865264687-595d652de67e?w=400",status:"active",events_count:12,created_at:new Date(Date.now()-1728e5)},{id:4,name:"Salle des Fêtes Port-Gentil",description:"Salle traditionnelle rénovée",address:"Centre-ville",city:"Port-Gentil",postal_code:"BP 012",country:"Gabon",capacity:200,phone:"+241 01 56 78 90",email:"fetes@portgentil.ga",image:null,status:"inactive",events_count:3,created_at:new Date(Date.now()-2592e5)}]},T=async()=>{try{const i={...a};a.image.url?(i.image_url=a.image.url,i.image_file=null):a.image.filename&&(i.image_file=a.image.filename,i.image_url=null),delete i.image;const d=await fetch("/api/v1/admin/venues",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(i)});if(d.ok)(await d.json()).success&&(_(),y());else{const m={id:Date.now(),...a,events_count:0,created_at:new Date};s.value.unshift(m),_()}}catch{console.log("API non disponible, ajout local simulé");const d={id:Date.now(),...a,events_count:0,created_at:new Date};s.value.unshift(d),_()}},S=i=>{p.value=i;let d={};i.image_url?d.url=i.image_url:i.image_file&&(d.filename=i.image_file),Object.assign(a,{...i,image:d}),x.value=!0},I=async()=>{try{const i={...a};a.image.url?(i.image_url=a.image.url,i.image_file=null):a.image.filename&&(i.image_file=a.image.filename,i.image_url=null),delete i.image;const d=await fetch(`/api/v1/admin/venues/${p.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(i)});if(d.ok)(await d.json()).success&&(_(),y());else{const m=s.value.findIndex(D=>D.id===p.value.id);m!==-1&&(s.value[m]={...s.value[m],...a}),_()}}catch{console.log("API non disponible, mise à jour locale simulée");const d=s.value.findIndex(m=>m.id===p.value.id);d!==-1&&(s.value[d]={...s.value[d],...a}),_()}},G=async i=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le lieu "${i.name}" ?`))try{(await fetch(`/api/v1/admin/venues/${i.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content"),"X-Requested-With":"XMLHttpRequest"}})).ok?y():s.value=s.value.filter(m=>m.id!==i.id)}catch{console.log("API non disponible, suppression locale simulée"),s.value=s.value.filter(m=>m.id!==i.id)}},_=()=>{t.value=!1,x.value=!1,p.value=null,Object.assign(a,{name:"",description:"",address:"",city:"",postal_code:"",country:"Gabon",capacity:100,phone:"",email:"",image:{},status:"active"})},P=i=>{a.image=i};return se(()=>{y()}),{loading:v,showCreateModal:t,showEditModal:x,venues:s,filters:o,venueForm:a,filteredVenues:g,cities:A,loadVenues:y,createVenue:T,editVenue:S,updateVenue:I,deleteVenue:G,closeModals:_,handleImageChange:P}}},op={class:"venue-management p-6"},ap={class:"mb-6 flex justify-between items-center"},np={class:"bg-white rounded-lg shadow p-4 mb-6"},rp={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},lp=["value"],ip={class:"flex items-end"},dp={key:0,class:"flex justify-center items-center h-64"},up={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},cp={class:"h-48 bg-gray-200 rounded-t-lg relative overflow-hidden"},mp=["src","alt"],gp={key:1,class:"w-full h-full flex items-center justify-center"},pp={class:"absolute top-3 right-3"},fp={class:"p-4"},vp={class:"text-lg font-semibold mb-2",style:{color:"#272d63"}},xp={class:"space-y-2 text-sm text-gray-600"},yp={class:"flex items-center"},bp={class:"flex items-center"},hp={class:"flex items-center"},wp={class:"flex space-x-2 mt-4"},_p=["onClick"],kp=["onClick"],Cp={key:2,class:"text-center py-12"},Sp={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ap={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4 max-h-90vh overflow-y-auto"},Mp={class:"text-lg font-bold mb-4",style:{color:"#272d63"}},jp={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pp={class:"md:col-span-2"},Tp={class:"md:col-span-2"},Op={class:"md:col-span-2"},Fp={class:"md:col-span-2"},zp={class:"flex space-x-3 mt-6"};function Up(v,t,x,s,p,w){const o=ce("ImageUpload");return l(),r("div",op,[e("div",ap,[t[28]||(t[28]=e("div",null,[e("h1",{class:"text-2xl font-bold",style:{color:"#272d63"}},"Gestion des Lieux"),e("p",{class:"text-gray-600 mt-1"},"Gérez les lieux et salles d'événements")],-1)),e("button",{onClick:t[0]||(t[0]=a=>s.showCreateModal=!0),class:"text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[1]||(t[1]=a=>a.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[2]||(t[2]=a=>a.currentTarget.style.backgroundColor="#272d63")},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Z(" Nouveau Lieu ",-1)])],32)]),e("div",np,[e("div",rp,[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Rechercher",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=a=>s.filters.search=a),placeholder:"Nom du lieu...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.filters.search]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.filters.city=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[t[30]||(t[30]=e("option",{value:""},"Toutes les villes",-1)),(l(!0),r(E,null,B(s.cities,a=>(l(),r("option",{key:a,value:a},n(a),9,lp))),128))],512),[[L,s.filters.city]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.filters.status=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[32]||(t[32]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[L,s.filters.status]])]),e("div",ip,[e("button",{onClick:t[6]||(t[6]=(...a)=>s.loadVenues&&s.loadVenues(...a)),class:"w-full text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#fab511"},onMouseover:t[7]||(t[7]=a=>a.currentTarget.style.backgroundColor="#272d63"),onMouseleave:t[8]||(t[8]=a=>a.currentTarget.style.backgroundColor="#fab511")}," Filtrer ",32)])])]),s.loading?(l(),r("div",dp,[...t[34]||(t[34]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2",style:{"border-color":"#272d63"}},null,-1)])])):(l(),r("div",up,[(l(!0),r(E,null,B(s.filteredVenues,a=>(l(),r("div",{key:a.id,class:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow duration-200"},[e("div",cp,[a.image?(l(),r("img",{key:0,src:a.image,alt:a.name,class:"w-full h-full object-cover"},null,8,mp)):(l(),r("div",gp,[...t[35]||(t[35]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),e("div",pp,[e("span",{class:N(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},n(a.status==="active"?"Actif":"Inactif"),3)])]),e("div",fp,[e("h3",vp,n(a.name),1),e("div",xp,[e("div",yp,[t[36]||(t[36]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Z(" "+n(a.address)+", "+n(a.city),1)]),e("div",bp,[t[37]||(t[37]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),Z(" Capacité: "+n(a.capacity)+" personnes ",1)]),e("div",hp,[t[38]||(t[38]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Z(" "+n(a.events_count||0)+" événements ",1)])]),e("div",wp,[e("button",{onClick:g=>s.editVenue(a),class:"flex-1 text-sm px-3 py-2 rounded transition-colors duration-200",style:{color:"#272d63","background-color":"rgba(39, 45, 99, 0.1)"},onMouseover:t[9]||(t[9]=g=>{g.currentTarget.style.backgroundColor="#fab511",g.currentTarget.style.color="#fff"}),onMouseleave:t[10]||(t[10]=g=>{g.currentTarget.style.backgroundColor="rgba(39, 45, 99, 0.1)",g.currentTarget.style.color="#272d63"})}," Modifier ",40,_p),e("button",{onClick:g=>s.deleteVenue(a),class:"flex-1 text-sm text-red-600 hover:text-red-800 px-3 py-2 bg-red-100 hover:bg-red-200 rounded transition-colors duration-200"}," Supprimer ",8,kp)])])]))),128))])),s.venues.length===0&&!s.loading?(l(),r("div",Cp,[...t[39]||(t[39]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"Aucun lieu",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Commencez par ajouter votre premier lieu.",-1)])])):M("",!0),s.showCreateModal||s.showEditModal?(l(),r("div",Sp,[e("div",Ap,[e("h3",Mp,n(s.showCreateModal?"Nouveau Lieu":"Modifier le Lieu"),1),e("form",{onSubmit:t[26]||(t[26]=oe(a=>s.showCreateModal?s.createVenue():s.updateVenue(),["prevent"]))},[e("div",jp,[e("div",Pp,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du lieu *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=a=>s.venueForm.name=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.name]])]),e("div",Tp,[t[41]||(t[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),u(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=a=>s.venueForm.description=a),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.description]])]),e("div",Op,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image du lieu",-1)),ue(o,{modelValue:s.venueForm.image,"onUpdate:modelValue":t[13]||(t[13]=a=>s.venueForm.image=a),"entity-type":"venues",size:"medium","alt-text":"Image du lieu",onChange:s.handleImageChange},null,8,["modelValue","onChange"])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=a=>s.venueForm.address=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.address]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ville *",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=a=>s.venueForm.city=a),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.city]])]),e("div",null,[t[45]||(t[45]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Code postal",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=a=>s.venueForm.postal_code=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.postal_code]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Pays",-1)),u(e("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=a=>s.venueForm.country=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.country]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Capacité *",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=a=>s.venueForm.capacity=a),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.capacity]])]),e("div",null,[t[49]||(t[49]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Statut",-1)),u(e("select",{"onUpdate:modelValue":t[19]||(t[19]=a=>s.venueForm.status=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},[...t[48]||(t[48]=[e("option",{value:"active"},"Actif",-1),e("option",{value:"inactive"},"Inactif",-1)])],512),[[L,s.venueForm.status]])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Téléphone",-1)),u(e("input",{type:"tel","onUpdate:modelValue":t[20]||(t[20]=a=>s.venueForm.phone=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.phone]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email",-1)),u(e("input",{type:"email","onUpdate:modelValue":t[21]||(t[21]=a=>s.venueForm.email=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.email]])]),e("div",Fp,[t[52]||(t[52]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"URL de l'image",-1)),u(e("input",{type:"url","onUpdate:modelValue":t[22]||(t[22]=a=>s.venueForm.image=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#272d63"}},null,512),[[j,s.venueForm.image]])])]),e("div",zp,[e("button",{type:"submit",class:"flex-1 text-white py-2 px-4 rounded-lg font-medium transition-colors duration-200",style:{"background-color":"#272d63"},onMouseover:t[23]||(t[23]=a=>a.currentTarget.style.backgroundColor="#fab511"),onMouseleave:t[24]||(t[24]=a=>a.currentTarget.style.backgroundColor="#272d63")},n(s.showCreateModal?"Créer":"Modifier"),33),e("button",{type:"button",onClick:t[25]||(t[25]=(...a)=>s.closeModals&&s.closeModals(...a)),class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors duration-200"}," Annuler ")])],32)])])):M("",!0)])}const Rp=te(sp,[["render",Up],["__scopeId","data-v-84b4dffa"]]),Yp=Object.freeze(Object.defineProperty({__proto__:null,default:Rp},Symbol.toStringTag,{value:"Module"}));export{Bp as A,Jp as C,Lp as E,qp as O,$p as P,Gp as R,Kp as S,Ip as U,Yp as V,Np as a,Xp as b,Hp as c,Wp as d};
