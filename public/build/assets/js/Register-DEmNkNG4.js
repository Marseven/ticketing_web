import{b as m,d as p,e,g as x,h as g,q as w,j as h,i as k,f as u,A as l,v as f,a1 as V,t as C,r as v,N as q}from"./vue-vendor-DP67WaqR.js";import{_,P as j,c as z}from"./account-CFnX3a8R.js";import"./vendor-14XLBY50.js";import"./pinia-vendor-Dwga0azm.js";const M={name:"Register",components:{PhoneInput:j},setup(){const c=q(),s=v(!1),r=v(""),o=v({name:"",email:"",phone:"",password:"",password_confirmation:"",terms:!1});return{form:o,loading:s,error:r,register:async()=>{if(r.value="",!o.value.name||o.value.name.trim().length<2){r.value="Le nom complet doit contenir au moins 2 caractères";return}if(!o.value.phone){r.value="Le numéro de téléphone est obligatoire";return}if(!o.value.password||o.value.password.length<8){r.value="Le mot de passe doit contenir au moins 8 caractères";return}if(o.value.password!==o.value.password_confirmation){r.value="Les mots de passe ne correspondent pas";return}if(!o.value.terms){r.value="Vous devez accepter les conditions d'utilisation";return}s.value=!0;try{const n={name:o.value.name,email:o.value.email||void 0,phone:o.value.phone,password:o.value.password,password_confirmation:o.value.password_confirmation,role:"client"};(await z.register(n)).data.email_verification_required?c.push({name:"email-verification"}):c.push({name:"login",query:{message:"Inscription réussie ! Vous pouvez maintenant vous connecter."}})}catch(n){if(console.error("Erreur d'inscription:",n),n.response){const a=n.response.status,i=n.response.data;if(a===422)if(i.errors){const t=i.errors,d=[];if(t.name&&d.push(`Nom: ${t.name[0]}`),t.email&&d.push(`Email: ${t.email[0]}`),t.phone&&d.push(`Téléphone: ${t.phone[0]}`),t.password&&d.push(`Mot de passe: ${t.password[0]}`),d.length>0)r.value=d.join(" • ");else{const b=Object.values(t)[0];r.value=Array.isArray(b)?b[0]:b}}else i.message?r.value=i.message:r.value="Données invalides. Veuillez vérifier vos informations.";else a===409?r.value=i.message||"Cet email ou ce numéro de téléphone est déjà utilisé":a===429?r.value="Trop de tentatives. Veuillez réessayer dans quelques minutes.":a>=500?r.value="Erreur du serveur. Veuillez réessayer plus tard.":r.value=i.message||"Une erreur est survenue lors de l'inscription"}else n.request?r.value="Impossible de se connecter au serveur. Vérifiez votre connexion internet.":r.value=n.message||"Une erreur est survenue. Veuillez réessayer."}finally{s.value=!1}}}}},A={class:"register-page relative overflow-hidden min-h-screen bg-white md:bg-transparent"},D={class:"md:hidden bg-blue-900 px-4 py-6"},N={class:"flex items-center justify-between"},U={class:"relative z-10 min-h-screen md:flex md:items-center md:justify-center px-4 py-8 md:py-12"},X={class:"max-w-md w-full mx-auto"},B={class:"bg-white md:bg-white/95 md:backdrop-blur-sm rounded-2xl md:rounded-3xl shadow-lg md:shadow-2xl p-6 md:p-8"},I={class:"flex items-start pt-2"},L={key:0,class:"bg-red-50 border-2 border-red-200 rounded-xl p-4"},E={class:"text-red-600 text-sm font-medium"},P=["disabled"],H={key:0,class:"flex items-center justify-center"},S={key:1},T={class:"text-center pt-2"},G={class:"text-sm text-gray-600"};function R(c,s,r,o,y,n){const a=w("router-link"),i=w("PhoneInput");return p(),m("div",A,[s[22]||(s[22]=e("div",{class:"hidden md:block absolute inset-0"},[e("img",{src:"https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Événements",class:"w-full h-full object-cover opacity-40"}),e("div",{class:"absolute inset-0 bg-blue-900/60"})],-1)),e("div",D,[e("div",N,[x(a,{to:"/login",class:"text-white hover:text-yellow-500 transition-colors"},{default:g(()=>[...s[7]||(s[7]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),s[8]||(s[8]=e("img",{src:"/images/logo_white.png",alt:"Logo",class:"h-10"},null,-1)),s[9]||(s[9]=e("div",{class:"w-6"},null,-1))])]),e("div",U,[e("div",X,[s[21]||(s[21]=e("div",{class:"hidden md:block text-center mb-8 animate-fade-in"},[e("img",{src:"/images/logo_white.png",alt:"Logo",class:"h-16 mx-auto mb-6"})],-1)),e("div",B,[s[20]||(s[20]=e("div",{class:"text-center mb-6 md:mb-8"},[e("h1",{class:"text-2xl md:text-3xl font-bold text-blue-900 mb-2"}," Créer un compte "),e("p",{class:"text-gray-600 text-sm md:text-base"}," Pour suivre vos achats de tickets ")],-1)),e("form",{class:"space-y-4 md:space-y-5",onSubmit:s[6]||(s[6]=h((...t)=>o.register&&o.register(...t),["prevent"]))},[e("div",null,[s[10]||(s[10]=e("label",{for:"name",class:"block text-sm font-semibold text-blue-900 mb-2"},[l(" Nom complet "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>o.form.name=t),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Votre nom complet"},null,512),[[f,o.form.name]])]),e("div",null,[s[11]||(s[11]=e("label",{for:"email",class:"block text-sm font-semibold text-blue-900 mb-2"},[l(" Adresse email "),e("span",{class:"text-gray-400 text-xs font-normal"},"(optionnel)")],-1)),u(e("input",{id:"email","onUpdate:modelValue":s[1]||(s[1]=t=>o.form.email=t),type:"email",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"votre@email.com"},null,512),[[f,o.form.email]])]),e("div",null,[s[12]||(s[12]=e("label",{for:"phone",class:"block text-sm font-semibold text-blue-900 mb-2"},[l(" Numéro de téléphone "),e("span",{class:"text-red-500"},"*")],-1)),x(i,{id:"phone",modelValue:o.form.phone,"onUpdate:modelValue":s[2]||(s[2]=t=>o.form.phone=t),placeholder:"XX XX XX XX",required:!0,"default-country":"GA"},null,8,["modelValue"])]),e("div",null,[s[13]||(s[13]=e("label",{for:"password",class:"block text-sm font-semibold text-blue-900 mb-2"},[l(" Mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=t=>o.form.password=t),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Votre mot de passe"},null,512),[[f,o.form.password]])]),e("div",null,[s[14]||(s[14]=e("label",{for:"password_confirmation",class:"block text-sm font-semibold text-blue-900 mb-2"},[l(" Confirmer le mot de passe "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{id:"password_confirmation","onUpdate:modelValue":s[4]||(s[4]=t=>o.form.password_confirmation=t),type:"password",required:"",class:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-blue-900 transition-all duration-200 bg-white text-base",placeholder:"Confirmer votre mot de passe"},null,512),[[f,o.form.password_confirmation]])]),s[19]||(s[19]=e("div",{class:"text-xs text-gray-500"},[e("span",{class:"text-red-500"},"*"),l(" Champs obligatoires ")],-1)),e("div",I,[u(e("input",{id:"terms","onUpdate:modelValue":s[5]||(s[5]=t=>o.form.terms=t),type:"checkbox",required:"",class:"h-4 w-4 mt-0.5 text-blue-900 focus:ring-yellow-500 border-gray-300 rounded flex-shrink-0"},null,512),[[V,o.form.terms]]),s[15]||(s[15]=e("label",{for:"terms",class:"ml-2 block text-sm text-gray-700"},[l(" J'accepte les "),e("a",{href:"#",class:"text-blue-900 hover:text-yellow-500 font-semibold transition-colors"},"conditions d'utilisation"),l(" et la "),e("a",{href:"#",class:"text-blue-900 hover:text-yellow-500 font-semibold transition-colors"},"politique de confidentialité"),e("span",{class:"text-red-500"},"*")],-1))]),o.error?(p(),m("div",L,[e("p",E,C(o.error),1)])):k("",!0),e("button",{type:"submit",disabled:o.loading,class:"w-full bg-blue-900 text-white py-4 px-6 rounded-xl text-base md:text-lg font-bold transition-all duration-200 shadow-lg hover:bg-yellow-500 hover:text-blue-900 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-900 disabled:hover:text-white transform hover:scale-105 disabled:transform-none"},[o.loading?(p(),m("span",H,[...s[16]||(s[16]=[e("svg",{class:"animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),l(" Inscription en cours... ",-1)])])):(p(),m("span",S,"Créer mon compte"))],8,P),e("div",T,[e("p",G,[s[18]||(s[18]=l(" Vous avez déjà un compte ? ",-1)),x(a,{to:"/login",class:"font-bold text-blue-900 hover:text-yellow-500 transition-colors duration-200"},{default:g(()=>[...s[17]||(s[17]=[l(" Se connecter ",-1)])]),_:1})])])],32)])])])])}const F=_(M,[["render",R],["__scopeId","data-v-a264687a"]]);export{F as default};
