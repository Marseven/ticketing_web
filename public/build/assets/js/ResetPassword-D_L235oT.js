import{g as a,o as l,h as e,A as c,j as g,k as x,a as C,p as z,l as f,i as w,v as y,t as v,b as u,e as V,B as L,N as M}from"./vue-vendor-DkyC1Igy.js";import{_ as B,c as h}from"./account-DZ8dCkH4.js";import"./pinia-vendor-T35r7xXn.js";import"./vendor-BvANJOFB.js";const R={name:"ResetPassword",setup(){const p=L(),s=M(),n=u({token:"",email:"",password:"",password_confirmation:""}),o=u(!0),m=u(!1),i=u(""),d=u(""),t=u(!1),b=async()=>{try{(await h.post("/verify-reset-token",{token:n.value.token,email:n.value.email})).data.success||(t.value=!0)}catch{t.value=!0}finally{o.value=!1}},k=async()=>{i.value="",d.value="",m.value=!0;try{const r=await h.post("/reset-password",n.value);r.data.success?(d.value=r.data.message,setTimeout(()=>{s.push("/login")},2e3)):i.value=r.data.message}catch(r){if(r.response?.data?.message)i.value=r.response.data.message;else if(r.response?.data?.errors){const _=Object.values(r.response.data.errors).flat();i.value=_.join(", ")}else i.value="Une erreur est survenue. Veuillez réessayer."}finally{m.value=!1}};return V(()=>{n.value.token=p.query.token||"",n.value.email=p.query.email||"",!n.value.token||!n.value.email?(t.value=!0,o.value=!1):b()}),{form:n,loading:o,submitting:m,error:i,success:d,tokenInvalid:t,resetPassword:k}}},N={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},P={class:"max-w-md w-full space-y-8"},j={key:0,class:"text-center"},q={key:1,class:"rounded-md bg-red-50 p-4"},T={class:"flex"},A={class:"ml-3"},D={class:"mt-4"},U={class:"-mx-2 -my-1.5 flex"},H={class:"rounded-md shadow-sm -space-y-px"},I={key:0,class:"rounded-md bg-red-50 p-4"},S={class:"flex"},E={class:"ml-3"},O={class:"text-sm font-medium text-red-800"},F={key:1,class:"rounded-md bg-green-50 p-4"},G={class:"flex"},J={class:"ml-3"},K={class:"text-sm font-medium text-green-800"},Q=["disabled"],W={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},X={class:"text-center"};function Y(p,s,n,o,m,i){const d=C("router-link");return l(),a("div",N,[e("div",P,[s[15]||(s[15]=e("div",null,[e("img",{class:"mx-auto h-12 w-auto",src:"/images/logo.png",alt:"Primea"}),e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Réinitialiser votre mot de passe ")],-1)),o.loading?(l(),a("div",j,[...s[3]||(s[3]=[e("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-white bg-indigo-500 transition ease-in-out duration-150"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),c(" Vérification en cours... ")],-1)])])):o.tokenInvalid?(l(),a("div",q,[e("div",T,[s[7]||(s[7]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",A,[s[5]||(s[5]=e("h3",{class:"text-sm font-medium text-red-800"}," Lien invalide ou expiré ",-1)),s[6]||(s[6]=e("div",{class:"mt-2 text-sm text-red-700"},[e("p",null,"Ce lien de réinitialisation est invalide ou a expiré. Veuillez demander un nouveau lien.")],-1)),e("div",D,[e("div",U,[g(d,{to:"/forgot-password",class:"bg-red-50 px-2 py-1.5 rounded-md text-sm font-medium text-red-800 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-red-50 focus:ring-red-600"},{default:x(()=>[...s[4]||(s[4]=[c(" Demander un nouveau lien ",-1)])]),_:1})])])])])])):(l(),a("form",{key:2,class:"mt-8 space-y-6",onSubmit:s[2]||(s[2]=z((...t)=>o.resetPassword&&o.resetPassword(...t),["prevent"]))},[s[14]||(s[14]=e("input",{type:"hidden",name:"remember",value:"true"},null,-1)),e("div",H,[e("div",null,[s[8]||(s[8]=e("label",{for:"password",class:"sr-only"},"Nouveau mot de passe",-1)),w(e("input",{id:"password",name:"password",type:"password",autocomplete:"new-password",required:"","onUpdate:modelValue":s[0]||(s[0]=t=>o.form.password=t),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Nouveau mot de passe"},null,512),[[y,o.form.password]])]),e("div",null,[s[9]||(s[9]=e("label",{for:"password_confirmation",class:"sr-only"},"Confirmer le mot de passe",-1)),w(e("input",{id:"password_confirmation",name:"password_confirmation",type:"password",autocomplete:"new-password",required:"","onUpdate:modelValue":s[1]||(s[1]=t=>o.form.password_confirmation=t),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirmer le mot de passe"},null,512),[[y,o.form.password_confirmation]])])]),o.error?(l(),a("div",I,[e("div",S,[s[10]||(s[10]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",E,[e("h3",O,v(o.error),1)])])])):f("",!0),o.success?(l(),a("div",F,[e("div",G,[s[11]||(s[11]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",J,[e("h3",K,v(o.success),1)])])])):f("",!0),e("div",null,[e("button",{type:"submit",disabled:o.submitting,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[o.submitting?(l(),a("span",W,[...s[12]||(s[12]=[e("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):f("",!0),c(" "+v(o.submitting?"Réinitialisation...":"Réinitialiser le mot de passe"),1)],8,Q)]),e("div",X,[g(d,{to:"/login",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:x(()=>[...s[13]||(s[13]=[c(" Retour à la connexion ",-1)])]),_:1})])],32))])])}const oe=B(R,[["render",Y]]);export{oe as default};
