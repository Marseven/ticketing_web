import{b as A,a0 as Z,d as te,e as ne,g as n,o as l,h as e,t as i,a3 as C,j as h,a4 as re,a5 as ke,x as ue,S as xe,k as J,a6 as ae,a as oe,G as ye,R as Ee,s as Ce,a7 as je,F as q,q as G,n as X,A as L,l as R,i as D,v as z,L as ie,U as De,$ as Ve,w as Ue,N as ce,O as _e,a8 as fe,W as ge,Y as he,a9 as Se,P as Ae,aa as Ie,B as we,p as de,ab as me,a1 as pe,ac as be,Z as Be,K as ze,X as Pe}from"./vue-vendor-CGc-1SHl.js";import{_ as le,u as $e,o as M,P as ve}from"./account-D9D2Jch1.js";import{S as j}from"./vendor-BvANJOFB.js";const Fe={class:"organizer-dashboard min-h-screen"},Me={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Te={class:"mb-8"},Oe={class:"flex items-center justify-between"},Re={class:"flex items-center space-x-4"},Le={class:"text-right"},Ne={class:"text-sm font-semibold text-primea-blue font-primea"},qe={key:0,class:"w-12 h-12 rounded-full overflow-hidden"},Xe=["src","alt"],Ge={key:1,class:"w-12 h-12 bg-primea-blue text-white rounded-full flex items-center justify-center"},We={class:"text-lg font-bold font-primea"},He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Je={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-blue"},Qe={class:"flex items-center"},Ke={class:"p-2 bg-primea-blue/10 rounded-lg"},Ye={class:"ml-4"},Ze={class:"text-2xl font-bold text-primea-blue font-primea"},et={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-green-500"},tt={class:"flex items-center"},st={class:"p-2 bg-green-100 rounded-lg"},rt={class:"ml-4"},ot={class:"text-2xl font-bold text-green-600 font-primea"},at={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-primea-yellow"},nt={class:"flex items-center"},lt={class:"p-2 bg-primea-yellow/10 rounded-lg"},it={class:"ml-4"},dt={class:"text-2xl font-bold text-primea-yellow font-primea"},ut={class:"bg-white rounded-primea shadow-primea p-6 border-l-4 border-purple-500"},mt={class:"flex items-center"},pt={class:"p-2 bg-purple-100 rounded-lg"},ct={class:"ml-4"},gt={class:"text-2xl font-bold text-purple-600 font-primea"},ft={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8"},bt={class:"lg:col-span-2"},vt={class:"bg-white rounded-primea shadow-primea p-6"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yt={class:"bg-white rounded-primea shadow-primea p-6"},_t={class:"space-y-4"},ht={key:0,class:"text-center text-gray-500 py-8"},wt={class:"text-sm font-medium font-primea"},$t={class:"text-xs text-gray-600 mt-1"},kt={class:"text-xs text-gray-400 mt-2"},Et={class:"bg-white rounded-primea shadow-primea overflow-hidden"},Ct={class:"p-6 border-b border-gray-200"},jt={class:"flex items-center justify-between"},Dt={key:0,class:"p-8 text-center text-gray-500"},Vt={key:1,class:"overflow-x-auto"},Ut={class:"w-full"},St={class:"divide-y divide-gray-200"},At={class:"px-6 py-4"},It={class:"text-sm font-medium text-gray-900 font-primea"},Bt={class:"text-sm text-gray-500"},zt={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Pt={class:"px-6 py-4"},Ft={class:"px-6 py-4 text-sm text-gray-900 font-primea"},Mt={class:"px-6 py-4 text-sm"},Tt={__name:"OrganizerDashboard",setup(ee){const b=$e(),T=A(!1),m=Z({total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),V=A([]),g=A([]),y=te(()=>{const E=b.user;return E?.name?E.name.split(" ").map($=>$[0]).join("").toUpperCase().slice(0,2):"U"}),B=te(()=>b.user?.avatar_url||null),d=async()=>{T.value=!0;try{const[E,$,N]=await Promise.all([M.getDashboardStats(),M.getRecentEvents(),M.getNotifications()]);Object.assign(m,E.data.data||{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),V.value=$.data.data||[],g.value=N.data.data||[]}catch(E){console.error("Erreur lors du chargement du dashboard:",E),Object.assign(m,{total_events:0,active_events:0,tickets_sold:0,total_revenue:0}),V.value=[],g.value=[]}finally{T.value=!1}},x=E=>new Intl.NumberFormat("fr-FR").format(E),I=E=>new Date(E).toLocaleDateString("fr-FR"),p=E=>new Date(E).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),H=E=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[E]||E,O=E=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[E]||"bg-gray-100 text-gray-800",P=E=>({success:"border-green-500",warning:"border-yellow-500",error:"border-red-500",info:"border-blue-500"})[E]||"border-gray-300";return ne(()=>{d()}),(E,$)=>{const N=oe("router-link");return l(),n("div",Fe,[e("div",Me,[e("div",Te,[e("div",Oe,[$[1]||($[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Tableau de Bord Organisateur"),e("p",{class:"text-gray-600 font-primea"},"Bienvenue dans votre espace de gestion d'événements")],-1)),e("div",Re,[e("div",Le,[$[0]||($[0]=e("p",{class:"text-sm text-gray-500 font-primea"},"Dernière connexion",-1)),e("p",Ne,i(I(new Date)),1)]),B.value?(l(),n("div",qe,[e("img",{src:B.value,alt:C(b).user?.name,class:"w-full h-full object-cover"},null,8,Xe)])):(l(),n("div",Ge,[e("span",We,i(y.value),1)]))])])]),e("div",He,[e("div",Je,[e("div",Qe,[e("div",Ke,[h(C(re),{class:"w-6 h-6 text-primea-blue"})]),e("div",Ye,[$[2]||($[2]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Total",-1)),e("p",Ze,i(m.total_events),1)])])]),e("div",et,[e("div",tt,[e("div",st,[h(C(ke),{class:"w-6 h-6 text-green-600"})]),e("div",rt,[$[3]||($[3]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements Actifs",-1)),e("p",ot,i(m.active_events),1)])])]),e("div",at,[e("div",nt,[e("div",lt,[h(C(ue),{class:"w-6 h-6 text-primea-yellow"})]),e("div",it,[$[4]||($[4]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets Vendus",-1)),e("p",dt,i(m.tickets_sold),1)])])]),e("div",ut,[e("div",mt,[e("div",pt,[h(C(xe),{class:"w-6 h-6 text-purple-600"})]),e("div",ct,[$[5]||($[5]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",gt,i(x(m.total_revenue))+" XAF",1)])])])]),e("div",ft,[e("div",bt,[e("div",vt,[$[10]||($[10]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Actions Rapides",-1)),e("div",xt,[h(N,{to:{name:"organizer-event-create"},class:"flex items-center p-4 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:J(()=>[h(C(ae),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),$[6]||($[6]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Créer un Événement"),e("p",{class:"text-sm opacity-90"},"Nouveau projet d'événement")],-1))]),_:1}),h(N,{to:{name:"organizer-events"},class:"flex items-center p-4 border-2 border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 group"},{default:J(()=>[h(C(ye),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),$[7]||($[7]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-white"},"Gérer les Événements"),e("p",{class:"text-sm opacity-70 group-hover:text-white group-hover:opacity-90"},"Voir et modifier")],-1))]),_:1}),h(N,{to:{name:"organizer-balance"},class:"flex items-center p-4 border-2 border-primea-yellow text-primea-yellow rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 group"},{default:J(()=>[h(C(Ee),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),$[8]||($[8]=e("div",null,[e("p",{class:"font-semibold font-primea group-hover:text-primea-blue"},"Gestion Financière"),e("p",{class:"text-sm opacity-70 group-hover:text-primea-blue group-hover:opacity-90"},"Soldes et payouts")],-1))]),_:1}),h(N,{to:{name:"organizer-profile"},class:"flex items-center p-4 border-2 border-gray-400 text-gray-600 rounded-primea hover:bg-gray-400 hover:text-white transition-all duration-200 group"},{default:J(()=>[h(C(Ce),{class:"w-6 h-6 mr-3 group-hover:scale-110 transition-transform"}),$[9]||($[9]=e("div",null,[e("p",{class:"font-semibold font-primea"},"Mon Profil"),e("p",{class:"text-sm opacity-70"},"Informations personnelles")],-1))]),_:1})])])]),e("div",yt,[$[12]||($[12]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Notifications",-1)),e("div",_t,[g.value.length===0?(l(),n("div",ht,[h(C(je),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),$[11]||($[11]=e("p",{class:"font-primea"},"Aucune notification",-1))])):(l(!0),n(q,{key:1},G(g.value,F=>(l(),n("div",{key:F.id,class:X(["p-3 bg-gray-50 rounded-primea border-l-4",P(F.type)])},[e("p",wt,i(F.title),1),e("p",$t,i(F.message),1),e("p",kt,i(p(F.created_at)),1)],2))),128))])])]),e("div",Et,[e("div",Ct,[e("div",jt,[$[14]||($[14]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Événements Récents",-1)),h(N,{to:{name:"organizer-events"},class:"text-primea-blue hover:text-primea-yellow transition-colors font-primea text-sm"},{default:J(()=>[...$[13]||($[13]=[L(" Voir tous ",-1)])]),_:1})])]),V.value.length===0?(l(),n("div",Dt,[h(C(re),{class:"w-16 h-16 mx-auto text-gray-300 mb-4"}),$[16]||($[16]=e("p",{class:"font-primea text-lg"},"Aucun événement créé",-1)),$[17]||($[17]=e("p",{class:"font-primea text-sm mt-2"},"Commencez par créer votre premier événement",-1)),h(N,{to:{name:"organizer-event-create"},class:"inline-flex items-center mt-4 px-4 py-2 bg-primea-blue text-white rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[h(C(ae),{class:"w-4 h-4 mr-2"}),$[15]||($[15]=L(" Créer un événement ",-1))]),_:1})])):(l(),n("div",Vt,[e("table",Ut,[$[19]||($[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Actions")])],-1)),e("tbody",St,[(l(!0),n(q,null,G(V.value,F=>(l(),n("tr",{key:F.id,class:"hover:bg-gray-50"},[e("td",At,[e("div",null,[e("p",It,i(F.title),1),e("p",Bt,i(F.venue_name),1)])]),e("td",zt,i(I(F.event_date)),1),e("td",Pt,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",O(F.status)])},i(H(F.status)),3)]),e("td",Ft,i(F.tickets_sold||0),1),e("td",Mt,[h(N,{to:{name:"organizer-event-detail",params:{slug:F.slug}},class:"text-primea-blue hover:text-primea-yellow font-primea"},{default:J(()=>[...$[18]||($[18]=[L(" Gérer ",-1)])]),_:1},8,["to"])])]))),128))])])]))])])])}}},Ot=le(Tt,[["__scopeId","data-v-1685f411"]]),dd=Object.freeze(Object.defineProperty({__proto__:null,default:Ot},Symbol.toStringTag,{value:"Module"})),Rt={name:"OrganizerEvents",components:{PlusIcon:ae,CalendarIcon:re},setup(){const ee=ce(),b=A(""),T=A(""),m=A("grid"),V=A(!1),g=A([]),y=Z({current:1,total:1,perPage:15}),B=async()=>{V.value=!0;try{const _=(await M.getEvents({page:y.current,status:T.value,search:b.value})).data.data.events;g.value=_.data.map(u=>(console.log("EVENT DATA:",{title:u.title,image:u.image,image_url:u.image_url,image_file:u.image_file,revenue_from_api:u.revenue}),{...u,tickets_sold:u.tickets_sold_count||u.tickets?.filter(t=>["issued","used"].includes(t.status)).length||0,total_tickets:u.total_capacity||u.ticket_types?.reduce((t,s)=>t+s.capacity,0)||0,revenue:u.revenue||0,venue:u.venue?.name||"",date:u.event_date||u.schedules?.[0]?.starts_at,isFavorite:!1})),y.current=_.current_page,y.total=_.last_page,y.perPage=_.per_page}catch(o){console.error("Erreur chargement événements:",o),j.fire({icon:"error",title:"Erreur",text:"Impossible de charger les événements"})}finally{V.value=!1}},d=te(()=>{let o=[...g.value];if(b.value){const _=b.value.toLowerCase();o=o.filter(u=>u.title.toLowerCase().includes(_)||u.venue.toLowerCase().includes(_))}return T.value&&(o=o.filter(_=>_.status===T.value)),o}),x=te(()=>{const o=g.value.filter(s=>s.is_active&&s.status!=="cancelled").length,_=g.value.filter(s=>!s.is_active).length,u=g.value.reduce((s,f)=>s+(f.tickets_sold||0),0),t=g.value.reduce((s,f)=>s+(f.revenue||0),0);return{published:o,draft:_,totalTicketsSold:u,totalRevenue:t}}),I=o=>new Intl.NumberFormat("fr-FR").format(o),p=(o,_="full")=>{const u=new Date(o);return _==="short"?u.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}):u.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})},H=o=>o.is_active?o.status==="cancelled"?"bg-red-100 text-red-800":new Date(o.date)<new Date?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",O=o=>o.is_active?o.status==="cancelled"?"Annulé":new Date(o.date)<new Date?"Terminé":"Actif":"Brouillon",P=o=>{o.isFavorite=!o.isFavorite},E=async o=>{try{const _={title:`${o.title} (Copie)`,description:o.description,event_date:o.date,venue_id:o.venue_id,category_id:o.category_id,is_active:!1};await M.createEvent(_),await B(),j.fire({icon:"success",title:"Succès",text:"Événement dupliqué avec succès"})}catch{j.fire({icon:"error",title:"Erreur",text:"Impossible de dupliquer l'événement"})}},$=o=>{ee.push({name:"organizer-event-edit",params:{slug:o.slug}})},N=async o=>{if((await j.fire({title:"Êtes-vous sûr ?",text:`Voulez-vous vraiment supprimer l'événement "${o.title}" ?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed)try{await B(),j.fire("Supprimé !","L'événement a été supprimé.","success")}catch{j.fire({icon:"error",title:"Erreur",text:"Impossible de supprimer l'événement"})}};Ue([b,T],()=>{y.current=1,B()},{debounce:300});const F=o=>{y.current=o,B()},K=o=>{if(!o)return!1;const _=o.image_url||o.image||o.image_file;return _&&_.trim()!==""},Q=(o,_="400")=>{let u=o.image_url||o.image||o.image_file;return console.log("Image URL pour événement:",o.title,"URL brute:",u),u&&u.trim()!==""?u.startsWith("http://")||u.startsWith("https://")?(console.log("URL complète détectée:",u),u):u.startsWith("/")?(u=window.location.origin+u,console.log("URL construite depuis chemin relatif:",u),u):(u.includes("/")||(u=`${window.location.origin}/storage/images/events/${u}`,console.log("URL construite depuis nom de fichier:",u)),u):(console.log("Aucune image trouvée pour:",o.title),"")},Y=o=>{console.log("Erreur de chargement d'image:",o.target.src),o.target.style.display="none"},w=o=>{console.log("Image chargée avec succès:",o.target.src)};return ne(()=>{B()}),{searchQuery:b,statusFilter:T,viewMode:m,loading:V,events:g,filteredEvents:d,stats:x,pagination:y,formatPrice:I,formatEventDate:p,getStatusClass:H,getStatusText:O,toggleFavorite:P,duplicateEvent:E,editEvent:$,deleteEvent:N,loadEvents:B,changePage:F,hasEventImage:K,getEventImageUrl:Q,handleImageError:Y,handleImageLoad:w}}},Lt={class:"organizer-events min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Nt={class:"bg-white shadow-sm border-b border-gray-200"},qt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Xt={class:"flex items-center justify-between"},Gt={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Wt={class:"bg-white rounded-lg shadow-md p-6 mb-8"},Ht={class:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6"},Jt={class:"flex items-center space-x-4"},Qt={class:"relative"},Kt={class:"flex items-center space-x-4"},Yt={class:"text-sm text-gray-600"},Zt={class:"flex bg-gray-100 rounded-lg p-1"},es={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ts={class:"text-center"},ss={class:"text-2xl font-bold text-blue-600"},rs={class:"text-center"},os={class:"text-2xl font-bold text-yellow-600"},as={class:"text-center"},ns={class:"text-2xl font-bold text-green-600"},ls={class:"text-center"},is={class:"text-2xl font-bold text-purple-600"},ds={key:0},us={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ms={class:"relative"},ps=["src","alt"],cs={key:1,class:"w-full h-48 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},gs={class:"absolute top-4 left-4"},fs={class:"absolute top-4 right-4"},bs=["onClick"],vs={class:"p-6"},xs={class:"text-lg font-bold text-gray-800 mb-2"},ys={class:"text-gray-600 text-sm mb-4"},_s={class:"flex items-center justify-between mb-4"},hs={class:"text-sm text-gray-600 font-primea"},ws={class:"font-medium font-primea"},$s={class:"text-sm font-bold text-green-600 font-primea"},ks={class:"w-full bg-gray-200 rounded-full h-2 mb-4"},Es={class:"flex space-x-2"},Cs=["onClick"],js={key:1,class:"bg-white rounded-lg shadow-md overflow-hidden"},Ds={class:"w-full"},Vs={class:"bg-white divide-y divide-gray-200"},Us={class:"px-6 py-4 whitespace-nowrap"},Ss={class:"flex items-center"},As=["src","alt"],Is={key:1,class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center rounded-lg mr-4"},Bs={class:"text-sm font-medium text-gray-900"},zs={class:"text-sm text-gray-500"},Ps={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Fs={class:"px-6 py-4 whitespace-nowrap"},Ms={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-primea"},Ts={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 font-primea"},Os={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Rs=["onClick"],Ls=["onClick"],Ns={key:1,class:"text-center py-16"},qs={class:"text-gray-600 mb-6"},Xs={key:0},Gs={key:1},Ws={key:2,class:"mt-8 flex justify-center"},Hs={class:"flex items-center space-x-2"},Js=["disabled"],Qs=["onClick"],Ks={key:1,class:"px-2 text-gray-500"},Ys=["disabled"];function Zs(ee,b,T,m,V,g){const y=oe("PlusIcon"),B=oe("router-link"),d=oe("CalendarIcon");return l(),n("div",Lt,[e("div",Nt,[e("div",qt,[e("div",Xt,[b[11]||(b[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mes Événements"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez tous vos événements en un seul endroit")],-1)),h(B,{to:{name:"organizer-event-create"},class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 shadow-primea"},{default:J(()=>[h(y,{class:"w-4 h-4 inline mr-2"}),b[10]||(b[10]=L(" Nouvel événement ",-1))]),_:1})])])]),e("div",Gt,[e("div",Wt,[e("div",Ht,[e("div",Jt,[e("div",Qt,[b[12]||(b[12]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),D(e("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=x=>m.searchQuery=x),placeholder:"Rechercher un événement...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[z,m.searchQuery]])]),D(e("select",{"onUpdate:modelValue":b[1]||(b[1]=x=>m.statusFilter=x),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...b[13]||(b[13]=[De('<option value="" data-v-dadd728c>Tous les statuts</option><option value="draft" data-v-dadd728c>Brouillons</option><option value="published" data-v-dadd728c>Publiés</option><option value="completed" data-v-dadd728c>Terminés</option><option value="cancelled" data-v-dadd728c>Annulés</option>',5)])],512),[[ie,m.statusFilter]])]),e("div",Kt,[e("div",Yt,i(m.filteredEvents.length)+" événement"+i(m.filteredEvents.length>1?"s":""),1),e("div",Zt,[e("button",{onClick:b[2]||(b[2]=x=>m.viewMode="grid"),class:X(["px-3 py-2 rounded-lg transition-colors",m.viewMode==="grid"?"bg-white shadow-sm":""])},[...b[14]||(b[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)])],2),e("button",{onClick:b[3]||(b[3]=x=>m.viewMode="list"),class:X(["px-3 py-2 rounded-lg transition-colors",m.viewMode==="list"?"bg-white shadow-sm":""])},[...b[15]||(b[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),e("div",es,[e("div",ts,[e("p",ss,i(m.stats.published),1),b[16]||(b[16]=e("p",{class:"text-sm text-gray-600"},"Publiés",-1))]),e("div",rs,[e("p",os,i(m.stats.draft),1),b[17]||(b[17]=e("p",{class:"text-sm text-gray-600"},"Brouillons",-1))]),e("div",as,[e("p",ns,i(m.stats.totalTicketsSold),1),b[18]||(b[18]=e("p",{class:"text-sm text-gray-600"},"Tickets vendus",-1))]),e("div",ls,[e("p",is,i(m.formatPrice(m.stats.totalRevenue))+" XAF",1),b[19]||(b[19]=e("p",{class:"text-sm text-gray-600"},"Revenus",-1))])])]),m.filteredEvents.length>0?(l(),n("div",ds,[m.viewMode==="grid"?(l(),n("div",us,[(l(!0),n(q,null,G(m.filteredEvents,x=>(l(),n("div",{key:x.id,class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},[e("div",ms,[m.hasEventImage(x)?(l(),n("img",{key:0,src:m.getEventImageUrl(x),alt:x.title,class:"w-full h-48 object-cover",onError:b[4]||(b[4]=(...I)=>m.handleImageError&&m.handleImageError(...I)),onLoad:b[5]||(b[5]=(...I)=>m.handleImageLoad&&m.handleImageLoad(...I))},null,40,ps)):(l(),n("div",cs,[h(d,{class:"w-16 h-16 text-gray-400"})])),e("div",gs,[e("span",{class:X(["px-3 py-1 rounded-full text-xs font-semibold",m.getStatusClass(x.status)])},i(m.getStatusText(x.status)),3)]),e("div",fs,[e("button",{onClick:I=>m.toggleFavorite(x),class:"bg-white/90 p-2 rounded-full hover:bg-white transition-colors"},[(l(),n("svg",{class:X(["w-4 h-4",x.isFavorite?"text-red-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 20 20"},[...b[20]||(b[20]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)])],2))],8,bs)])]),e("div",vs,[e("h3",xs,i(x.title),1),e("p",ys,i(m.formatEventDate(x.date)),1),e("div",_s,[e("div",hs,[e("span",ws,i(x.tickets_sold||0),1),L(" / "+i(x.total_tickets||0)+" tickets vendus ",1)]),e("div",$s,i(m.formatPrice(x.revenue||0))+" XAF ",1)]),e("div",ks,[e("div",{class:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:Ve({width:`${Math.min((x.ticketsSold||0)/(x.totalTickets||100)*100,100)}%`})},null,4)]),e("div",Es,[h(B,{to:{name:"organizer-event-detail",params:{slug:x.slug}},class:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg text-center text-sm font-medium hover:bg-blue-700 transition-colors"},{default:J(()=>[...b[21]||(b[21]=[L(" Voir détails ",-1)])]),_:1},8,["to"]),e("button",{onClick:I=>m.duplicateEvent(x),class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300 transition-colors"}," Dupliquer ",8,Cs)])])]))),128))])):(l(),n("div",js,[e("table",Ds,[b[23]||(b[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Événement"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ventes"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Revenus"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Vs,[(l(!0),n(q,null,G(m.filteredEvents,x=>(l(),n("tr",{key:x.id,class:"hover:bg-gray-50"},[e("td",Us,[e("div",Ss,[m.hasEventImage(x)?(l(),n("img",{key:0,src:m.getEventImageUrl(x,"60"),alt:x.title,class:"w-12 h-12 object-cover rounded-lg mr-4",onError:b[6]||(b[6]=(...I)=>m.handleImageError&&m.handleImageError(...I)),onLoad:b[7]||(b[7]=(...I)=>m.handleImageLoad&&m.handleImageLoad(...I))},null,40,As)):(l(),n("div",Is,[h(d,{class:"w-6 h-6 text-gray-400"})])),e("div",null,[e("div",Bs,i(x.title),1),e("div",zs,i(x.venue),1)])])]),e("td",Ps,i(m.formatEventDate(x.date,"short")),1),e("td",Fs,[e("span",{class:X(["px-2 py-1 rounded-full text-xs font-medium font-primea",m.getStatusClass(x)])},i(m.getStatusText(x)),3)]),e("td",Ms,i(x.tickets_sold||0)+" / "+i(x.total_tickets||0),1),e("td",Ts,i(m.formatPrice(x.revenue||0))+" XAF ",1),e("td",Os,[h(B,{to:{name:"organizer-event-detail",params:{slug:x.slug}},class:"text-blue-600 hover:text-blue-900"},{default:J(()=>[...b[22]||(b[22]=[L(" Voir ",-1)])]),_:1},8,["to"]),e("button",{onClick:I=>m.editEvent(x),class:"text-yellow-600 hover:text-yellow-900"}," Modifier ",8,Rs),e("button",{onClick:I=>m.deleteEvent(x),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Ls)])]))),128))])])]))])):(l(),n("div",Ns,[b[25]||(b[25]=e("div",{class:"inline-block p-6 bg-gray-100 rounded-full mb-6"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),b[26]||(b[26]=e("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"Aucun événement trouvé",-1)),e("p",qs,[m.searchQuery||m.statusFilter?(l(),n("span",Xs," Aucun événement ne correspond à vos critères de recherche. ")):(l(),n("span",Gs," Commencez par créer votre premier événement ! "))]),h(B,{to:"/organizer/events/create",class:"bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors inline-block"},{default:J(()=>[...b[24]||(b[24]=[L(" + Créer mon premier événement ",-1)])]),_:1})])),m.events.length>0&&m.pagination.total>1?(l(),n("div",Ws,[e("nav",Hs,[e("button",{onClick:b[8]||(b[8]=x=>m.changePage(m.pagination.current-1)),disabled:m.pagination.current===1,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Précédent ",8,Js),(l(!0),n(q,null,G(m.pagination.total,x=>(l(),n(q,{key:x},[x===1||x===m.pagination.total||x>=m.pagination.current-1&&x<=m.pagination.current+1?(l(),n("button",{key:0,onClick:I=>m.changePage(x),class:X(["px-3 py-2 text-sm font-medium rounded-lg font-primea",x===m.pagination.current?"bg-primea-blue text-white":"text-gray-700 bg-white border border-gray-300 hover:bg-gray-50"])},i(x),11,Qs)):x===m.pagination.current-2||x===m.pagination.current+2?(l(),n("span",Ks," ... ")):R("",!0)],64))),128)),e("button",{onClick:b[9]||(b[9]=x=>m.changePage(m.pagination.current+1)),disabled:m.pagination.current===m.pagination.total,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed font-primea"}," Suivant ",8,Ys)])])):R("",!0)])])}const er=le(Rt,[["render",Zs],["__scopeId","data-v-dadd728c"]]),ud=Object.freeze(Object.defineProperty({__proto__:null,default:er},Symbol.toStringTag,{value:"Module"})),tr={class:"event-detail min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},sr={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},rr={key:0,class:"flex justify-center items-center h-64"},or={key:1,class:"text-center py-16"},ar={class:"mb-4"},nr={class:"text-gray-600 mb-6"},lr={key:2},ir={class:"mb-8"},dr={class:"flex items-center justify-between"},ur={class:"flex items-center space-x-4"},mr={class:"text-3xl font-bold text-primea-blue font-primea"},pr={class:"flex items-center space-x-3"},cr={class:"flex space-x-2"},gr={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},fr={class:"bg-white rounded-primea shadow-primea p-6"},br={class:"flex items-center"},vr={class:"p-2 bg-blue-100 rounded-lg"},xr={class:"ml-4"},yr={class:"text-2xl font-bold text-blue-600 font-primea"},_r={class:"bg-white rounded-primea shadow-primea p-6"},hr={class:"flex items-center"},wr={class:"p-2 bg-green-100 rounded-lg"},$r={class:"ml-4"},kr={class:"text-2xl font-bold text-green-600 font-primea"},Er={class:"bg-white rounded-primea shadow-primea p-6"},Cr={class:"flex items-center"},jr={class:"p-2 bg-yellow-100 rounded-lg"},Dr={class:"ml-4"},Vr={class:"text-2xl font-bold text-yellow-600 font-primea"},Ur={class:"bg-white rounded-primea shadow-primea p-6"},Sr={class:"flex items-center"},Ar={class:"p-2 bg-purple-100 rounded-lg"},Ir={class:"ml-4"},Br={class:"text-lg font-bold text-purple-600 font-primea"},zr={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Pr={class:"lg:col-span-2 space-y-6"},Fr={class:"bg-white rounded-primea shadow-primea p-6"},Mr={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Tr={class:"mt-1 text-gray-900 font-primea"},Or={class:"mt-1 text-gray-900 font-primea"},Rr={class:"mt-1 text-gray-900 font-primea"},Lr={class:"md:col-span-2"},Nr={class:"mt-1 text-gray-900 font-primea leading-relaxed"},qr={class:"bg-white rounded-primea shadow-primea p-6"},Xr={key:0,class:"space-y-4"},Gr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Wr={class:"mt-1 text-gray-900 font-primea"},Hr={class:"mt-1 text-gray-900 font-primea"},Jr={class:"mt-1 text-gray-900 font-primea"},Qr={key:1,class:"text-center py-8 text-gray-500"},Kr={class:"bg-white rounded-primea shadow-primea p-6"},Yr={key:0,class:"space-y-4"},Zr={class:"grid grid-cols-1 md:grid-cols-4 gap-4 items-start"},eo={class:"md:col-span-2"},to={class:"flex items-center justify-between mb-2"},so={class:"font-semibold text-gray-900 font-primea"},ro={class:"text-gray-600 text-sm font-primea"},oo={class:"text-center"},ao={class:"text-lg font-bold text-primea-blue font-primea"},no={class:"text-center"},lo={class:"text-sm font-primea"},io={class:"font-medium text-gray-900"},uo={class:"font-medium text-gray-900"},mo={class:"text-xs text-gray-500 mt-1"},po={key:1,class:"text-center py-8 text-gray-500"},co={class:"bg-white rounded-primea shadow-primea p-6"},go={key:0,class:"overflow-x-auto"},fo={class:"w-full"},bo={class:"divide-y divide-gray-200"},vo={class:"px-4 py-3 text-sm text-gray-900 font-primea"},xo={class:"px-4 py-3 text-sm text-gray-900 font-primea"},yo={class:"px-4 py-3 text-sm font-medium text-gray-900 font-primea"},_o={class:"px-4 py-3 text-sm text-gray-500 font-primea"},ho={key:1,class:"text-center py-8 text-gray-500"},wo={class:"space-y-6"},$o={class:"bg-white rounded-primea shadow-primea p-6"},ko={class:"space-y-3"},Eo={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Co={class:"w-full h-48 rounded-primea overflow-hidden"},jo=["src","alt"],Do={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Vo={class:"bg-white rounded-primea shadow-primea p-6"},Uo={class:"space-y-3"},So={class:"flex items-center justify-between"},Ao={class:"flex items-center justify-between"},Io={class:"flex items-center justify-between"},Bo={class:"text-sm text-gray-600 font-primea"},zo={__name:"EventDetail",setup(ee){const b=we(),T=ce(),m=A(!0),V=A(null),g=A(null),y=A([]),B=async()=>{m.value=!0,V.value=null;try{let t=b.params.slug,s;if(/^\d+$/.test(t))s=(await M.getEvent(t)).data.data;else try{const c=await M.getEvents();if(s=(c.data.data.events.data||c.data.data.events).find(U=>U.slug===t),!s)throw new Error(`Événement avec le slug "${t}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${t}" non trouvé`)}if(!s)throw new Error("Événement introuvable");g.value={...s,venue_name:s.venue?.name||"Lieu non spécifié",venue_address:s.venue?.address||"",category_name:s.category?.name||"Non spécifiée",tickets_sold:s.tickets?.filter(c=>["issued","used"].includes(c.status)).length||0,total_revenue:s.tickets?.filter(c=>["issued","used"].includes(c.status)).reduce((c,r)=>c+(r.ticket_type?.price||0),0)||0,is_public:s.is_active||!1,sales_active:s.is_active||!1,ticket_types:s.ticket_types||s.ticketTypes||[]};const f=s.ticket_types||s.ticketTypes||[];if(f.length>0&&(g.value.ticket_types=f.map(c=>({...c,sold:s.tickets?.filter(r=>r.ticket_type_id===c.id&&["issued","used"].includes(r.status)).length||0}))),s.tickets&&s.tickets.length>0){const c={};s.tickets.forEach(r=>{r.order_id&&["issued","used"].includes(r.status)&&(c[r.order_id]||(c[r.order_id]={id:r.order_id,tickets:[],customer_name:r.order?.buyer?.name||r.order?.guest_name||"Client",created_at:r.order?.created_at||r.created_at}),c[r.order_id].tickets.push(r))}),y.value=Object.values(c).map(r=>({id:r.id,customer_name:r.customer_name,ticket_quantity:r.tickets.length,total_amount:r.tickets.reduce((U,v)=>U+(v.ticket_type?.price||0),0),created_at:r.created_at})).sort((r,U)=>new Date(U.created_at)-new Date(r.created_at)).slice(0,10)}else y.value=[]}catch(t){console.error("Erreur lors du chargement de l'événement:",t),t.response?.status===404?V.value=`Événement avec l'identifiant "${b.params.slug}" non trouvé`:t.message?V.value=t.message:V.value="Erreur lors du chargement de l'événement"}finally{m.value=!1}},d=()=>{T.push({name:"organizer-event-edit",params:{slug:g.value.slug}})},x=async()=>{if((await j.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await M.updateEvent(g.value.id,{status:"published",is_active:!0}),g.value.status="published",g.value.is_active=!0,j.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(s){console.error("Erreur publication:",s),j.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},I=async()=>{const t=`${window.location.origin}/events/${g.value.slug}`;try{await navigator.clipboard.writeText(t),j.fire({title:"Lien copié !",text:"Le lien de l'événement a été copié dans le presse-papiers",icon:"success",timer:2e3,showConfirmButton:!1})}catch{j.fire({title:"Lien de l'événement",html:`<input type="text" value="${t}" class="w-full p-2 border rounded" readonly onclick="this.select()">`,showConfirmButton:!1,showCloseButton:!0})}},p=()=>{const t=`/events/${g.value.slug}`;window.open(t,"_blank")},H=()=>{j.fire({title:"Export des données",text:"Fonctionnalité d'export en cours de développement",icon:"info",confirmButtonColor:"#272d63"})},O=t=>new Intl.NumberFormat("fr-FR").format(t),P=t=>new Date(t).toLocaleDateString("fr-FR"),E=t=>new Date(t).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),$=t=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[t]||t,N=t=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[t]||"bg-gray-100 text-gray-800",F=t=>{const s=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return s==null?"Illimité":typeof s=="number"?new Intl.NumberFormat("fr-FR").format(s):s},K=t=>{const s=t.sold||0,f=t.capacity??t.available_quantity??t.max_quantity??t.quantity;return f==null||f<=0?0:Math.round(s/f*100)},Q=t=>{console.log("Erreur de chargement d'image:",t.target.src),t.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},Y=t=>{console.log("Image chargée avec succès:",t.target.src)},w=()=>{if(!g.value||!g.value.ticket_types)return"Non définie";const t=g.value.ticket_types.reduce((s,f)=>{const c=f.capacity||f.available_quantity||f.max_quantity||f.quantity||0;return s+(typeof c=="number"?c:0)},0);return t>0?new Intl.NumberFormat("fr-FR").format(t):"Non définie"},o=()=>{if(!g.value)return"Non définie";if(g.value.event_date&&g.value.event_date!=="Invalid Date")return P(g.value.event_date);if(g.value.schedules&&g.value.schedules.length>0){const t=g.value.schedules[0];if(t.starts_at)return P(t.starts_at)}return"Non définie"},_=()=>{if(!g.value)return!1;const t=g.value.image_url||g.value.image||g.value.image_file;return t&&t.trim()!==""},u=()=>{if(!g.value)return"";let t=g.value.image_url||g.value.image||g.value.image_file;return console.log("EventDetail - Image URL pour événement:",g.value.title,"URL brute:",t),t&&t.trim()!==""?t.startsWith("http://")||t.startsWith("https://")?(console.log("EventDetail - URL complète détectée:",t),t):t.startsWith("/")?(t=window.location.origin+t,console.log("EventDetail - URL construite depuis chemin relatif:",t),t):(t.includes("/")||(t=`${window.location.origin}/storage/images/events/${t}`,console.log("EventDetail - URL construite depuis nom de fichier:",t)),t):(console.log("EventDetail - Aucune image trouvée pour:",g.value.title),"")};return ne(()=>{B()}),(t,s)=>{const f=oe("router-link");return l(),n("div",tr,[e("div",sr,[m.value?(l(),n("div",rr,[...s[1]||(s[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):V.value?(l(),n("div",or,[e("div",ar,[h(C(_e),{class:"w-16 h-16 mx-auto text-red-500"})]),s[3]||(s[3]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Événement introuvable",-1)),e("p",nr,i(V.value),1),h(f,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[...s[2]||(s[2]=[L(" Retour aux événements ",-1)])]),_:1})])):g.value?(l(),n("div",lr,[e("div",ir,[e("div",dr,[e("div",ur,[e("button",{onClick:s[0]||(s[0]=c=>t.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(C(fe),{class:"w-6 h-6"})]),e("div",null,[e("h1",mr,i(g.value.title),1),s[4]||(s[4]=e("p",{class:"text-gray-600 font-primea mt-1"},"Gestion de l'événement",-1))])]),e("div",pr,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",N(g.value.status)])},i($(g.value.status)),3),e("div",cr,[e("button",{onClick:d,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(C(ge),{class:"w-4 h-4 inline mr-2"}),s[5]||(s[5]=L(" Modifier ",-1))]),g.value.status==="draft"?(l(),n("button",{key:0,onClick:x,class:"bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[h(C(he),{class:"w-4 h-4 inline mr-2"}),s[6]||(s[6]=L(" Publier ",-1))])):R("",!0)])])])]),e("div",gr,[e("div",fr,[e("div",br,[e("div",vr,[h(C(ue),{class:"w-6 h-6 text-blue-600"})]),e("div",xr,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1)),e("p",yr,i(g.value.tickets_sold||0),1)])])]),e("div",_r,[e("div",hr,[e("div",wr,[h(C(xe),{class:"w-6 h-6 text-green-600"})]),e("div",$r,[s[8]||(s[8]=e("p",{class:"text-sm text-gray-600 font-primea"},"Revenus",-1)),e("p",kr,i(O(g.value.total_revenue||0))+" XAF",1)])])]),e("div",Er,[e("div",Cr,[e("div",jr,[h(C(Se),{class:"w-6 h-6 text-yellow-600"})]),e("div",Dr,[s[9]||(s[9]=e("p",{class:"text-sm text-gray-600 font-primea"},"Capacité",-1)),e("p",Vr,i(w()),1)])])]),e("div",Ur,[e("div",Sr,[e("div",Ar,[h(C(re),{class:"w-6 h-6 text-purple-600"})]),e("div",Ir,[s[10]||(s[10]=e("p",{class:"text-sm text-gray-600 font-primea"},"Date",-1)),e("p",Br,i(o()),1)])])])]),e("div",zr,[e("div",Pr,[e("div",Fr,[s[15]||(s[15]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations générales",-1)),e("div",Mr,[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Titre",-1)),e("p",Tr,i(g.value.title),1)]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Lieu",-1)),e("p",Or,i(g.value.venue_name),1)]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Catégorie",-1)),e("p",Rr,i(g.value.category_name||"Non spécifiée"),1)]),e("div",Lr,[s[14]||(s[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Description",-1)),e("p",Nr,i(g.value.description||"Aucune description"),1)])])]),e("div",qr,[s[20]||(s[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Programmation",-1)),g.value.schedules&&g.value.schedules.length>0?(l(),n("div",Xr,[(l(!0),n(q,null,G(g.value.schedules,c=>(l(),n("div",{key:c.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Gr,[e("div",null,[s[16]||(s[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Début",-1)),e("p",Wr,i(E(c.starts_at)),1)]),e("div",null,[s[17]||(s[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Fin",-1)),e("p",Hr,i(E(c.ends_at)),1)]),e("div",null,[s[18]||(s[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea"},"Ouverture des portes",-1)),e("p",Jr,i(c.door_time?E(c.door_time):"Non spécifiée"),1)])])]))),128))])):(l(),n("div",Qr,[h(C(re),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s[19]||(s[19]=e("p",{class:"font-primea"},"Aucune programmation définie",-1))]))]),e("div",Kr,[s[25]||(s[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Types de billets",-1)),g.value.ticket_types&&g.value.ticket_types.length>0?(l(),n("div",Yr,[(l(!0),n(q,null,G(g.value.ticket_types,c=>(l(),n("div",{key:c.id,class:"border border-gray-200 rounded-primea p-4"},[e("div",Zr,[e("div",eo,[e("div",to,[e("h3",so,i(c.name),1),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",c.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},i(c.is_active?"Actif":"Inactif"),3)]),e("p",ro,i(c.description||"Aucune description"),1)]),e("div",oo,[s[21]||(s[21]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Prix",-1)),e("span",ao,i(O(c.price))+" XAF ",1)]),e("div",no,[s[23]||(s[23]=e("label",{class:"block text-xs text-gray-500 font-primea mb-1"},"Disponibilité",-1)),e("div",lo,[e("span",io,i(c.sold||0),1),s[22]||(s[22]=e("span",{class:"text-gray-500"}," / ",-1)),e("span",uo,i(F(c)),1)]),e("div",mo,i(K(c))+"% vendus ",1)])])]))),128))])):(l(),n("div",po,[h(C(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s[24]||(s[24]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1))]))]),e("div",co,[s[28]||(s[28]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Achats récents",-1)),y.value.length>0?(l(),n("div",go,[e("table",fo,[s[26]||(s[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Client"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Billets"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Montant"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase font-primea"},"Date")])],-1)),e("tbody",bo,[(l(!0),n(q,null,G(y.value,c=>(l(),n("tr",{key:c.id},[e("td",vo,i(c.customer_name),1),e("td",xo,i(c.ticket_quantity),1),e("td",yo,i(O(c.total_amount))+" XAF",1),e("td",_o,i(P(c.created_at)),1)]))),128))])])])):(l(),n("div",ho,[h(C(Ae),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),s[27]||(s[27]=e("p",{class:"font-primea"},"Aucune commande pour cet événement",-1))]))])]),e("div",wo,[e("div",$o,[s[32]||(s[32]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions rapides",-1)),e("div",ko,[e("button",{onClick:I,class:"w-full flex items-center justify-center px-4 py-2 border border-primea-blue text-primea-blue rounded-primea hover:bg-primea-blue hover:text-white transition-all duration-200 font-primea"},[h(C(Ie),{class:"w-4 h-4 mr-2"}),s[29]||(s[29]=L(" Partager l'événement ",-1))]),e("button",{onClick:p,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[h(C(ye),{class:"w-4 h-4 mr-2"}),s[30]||(s[30]=L(" Voir la page publique ",-1))]),e("button",{onClick:H,class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},[...s[31]||(s[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),L(" Exporter les données ",-1)])])])]),g.value?(l(),n("div",Eo,[s[33]||(s[33]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image de l'événement",-1)),e("div",Co,[_()?(l(),n("img",{key:0,src:u(),alt:g.value.title,class:"w-full h-full object-cover",onError:Q,onLoad:Y},null,40,jo)):(l(),n("div",Do,[h(C(re),{class:"w-16 h-16 text-gray-400"})]))])])):R("",!0),e("div",Vo,[s[37]||(s[37]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Uo,[e("div",So,[s[34]||(s[34]=e("span",{class:"text-sm text-gray-700 font-primea"},"Événement public",-1)),e("span",{class:X(["text-sm font-medium",g.value.is_public?"text-green-600":"text-red-600"])},i(g.value.is_public?"Oui":"Non"),3)]),e("div",Ao,[s[35]||(s[35]=e("span",{class:"text-sm text-gray-700 font-primea"},"Ventes actives",-1)),e("span",{class:X(["text-sm font-medium",g.value.sales_active?"text-green-600":"text-red-600"])},i(g.value.sales_active?"Oui":"Non"),3)]),e("div",Io,[s[36]||(s[36]=e("span",{class:"text-sm text-gray-700 font-primea"},"Créé le",-1)),e("span",Bo,i(P(g.value.created_at)),1)])])])])])])):R("",!0)])])}}},Po=le(zo,[["__scopeId","data-v-19a892d9"]]),md=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Fo={class:"event-edit min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Mo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},To={key:0,class:"flex justify-center items-center h-64"},Oo={key:1,class:"text-center py-16"},Ro={class:"mb-4"},Lo={class:"text-gray-600 mb-6"},No={key:2},qo={class:"mb-8"},Xo={class:"flex items-center justify-between"},Go={class:"flex items-center space-x-4"},Wo={class:"text-gray-600 font-primea mt-1"},Ho={class:"flex items-center space-x-3"},Jo={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Qo={class:"lg:col-span-2 space-y-6"},Ko={class:"bg-white rounded-primea shadow-primea p-6"},Yo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zo={class:"md:col-span-2"},ea={class:"md:col-span-2"},ta=["value"],sa={key:0},ra=["value"],oa={key:1,class:"space-y-2"},aa={class:"md:col-span-2"},na={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},la={key:0,class:"mb-4"},ia=["src"],da={key:1},ua={class:"bg-white rounded-primea shadow-primea p-6"},ma={class:"flex items-center justify-between mb-6"},pa={class:"space-y-4"},ca=["onUpdate:modelValue"],ga=["onUpdate:modelValue"],fa=["onUpdate:modelValue"],ba={class:"flex items-end"},va=["onClick"],xa={class:"bg-white rounded-primea shadow-primea p-6"},ya={class:"flex items-center justify-between mb-6"},_a={key:0,class:"text-center py-8 text-gray-500"},ha={key:1,class:"space-y-4"},wa=["onUpdate:modelValue"],$a=["onUpdate:modelValue"],ka=["onUpdate:modelValue"],Ea=["onUpdate:modelValue"],Ca={class:"flex items-center space-x-2"},ja={class:"flex items-center space-x-2"},Da=["onUpdate:modelValue"],Va=["onClick"],Ua={class:"space-y-6"},Sa={class:"bg-white rounded-primea shadow-primea p-6"},Aa={class:"space-y-4"},Ia={class:"flex items-center space-x-2"},Ba={class:"bg-white rounded-primea shadow-primea p-6"},za={class:"space-y-3"},Pa=["disabled"],Fa={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Ma={class:"w-full h-48 rounded-primea overflow-hidden"},Ta=["src","alt"],Oa={key:1,class:"w-full h-full bg-gradient-to-br from-blue-100 to-yellow-100 flex items-center justify-center"},Ra={__name:"EventEdit",setup(ee){const b=we(),T=ce(),m=A(!0),V=A(!1),g=A(null),y=A(null),B=A([]),d=A([]),x=A(!1),I=A(null),p=Z({title:"",description:"",category_id:"",venue_id:"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:"",image_preview:"",image_file:null,is_active:!1,schedules:[{starts_at:"",ends_at:"",door_time:""}],ticket_types:[]}),H=async()=>{try{const v=await M.getCategories();B.value=v.data.categories||[]}catch(v){console.error("Erreur chargement catégories:",v)}},O=async()=>{try{const v=await M.getVenues();d.value=v.data.venues||v.data.data||[]}catch(v){console.error("Erreur chargement lieux:",v)}},P=async()=>{m.value=!0,g.value=null;try{let v=b.params.slug,a;if(/^\d+$/.test(v))a=(await M.getEvent(v)).data.data;else try{const S=await M.getEvents();if(a=(S.data.data.events.data||S.data.data.events).find(se=>se.slug===v),!a)throw new Error(`Événement avec le slug "${v}" non trouvé`)}catch{throw new Error(`Événement avec le slug "${v}" non trouvé`)}if(!a)throw new Error("Événement introuvable");y.value={...a,venue_name:a.venue?.name||a.venue_name||"",venue_address:a.venue?.address||a.venue_address||"",category_name:a.category?.name||a.category_name||""},Object.assign(p,{title:y.value.title||"",description:y.value.description||"",category_id:y.value.category_id||"",venue_id:y.value.venue_id||"",new_venue_name:"",new_venue_city:"",new_venue_address:"",image_url:y.value.image_url||"",image_preview:y.value.image_url||"",is_active:y.value.is_active??!1,schedules:y.value.schedules&&y.value.schedules.length>0?y.value.schedules.map(S=>({starts_at:S.starts_at?new Date(S.starts_at).toISOString().slice(0,16):"",ends_at:S.ends_at?new Date(S.ends_at).toISOString().slice(0,16):"",door_time:S.door_time?new Date(S.door_time).toISOString().slice(0,16):""})):[{starts_at:"",ends_at:"",door_time:""}],ticket_types:(y.value.ticket_types||y.value.ticketTypes||[]).map(S=>({id:S.id,name:S.name||"",description:S.description||"",price:S.price||0,capacity:S.capacity||S.available_quantity||S.max_quantity||S.quantity||0,is_active:S.is_active??S.status==="active"}))})}catch(v){console.error("Erreur lors du chargement de l'événement:",v),v.response?.status===404?g.value=`Événement avec l'identifiant "${b.params.slug}" non trouvé`:v.message?g.value=v.message:g.value="Erreur lors du chargement de l'événement"}finally{m.value=!1}},E=async()=>{V.value=!0;try{if(!y.value)throw new Error("Aucun événement à mettre à jour");const v={title:p.title,description:p.description,category_id:p.category_id,venue_id:p.venue_id||null,new_venue_name:p.venue_id==="new"?p.new_venue_name:null,new_venue_city:p.venue_id==="new"?p.new_venue_city:null,new_venue_address:p.venue_id==="new"?p.new_venue_address:null,is_active:p.is_active,schedules:p.schedules,ticket_types:p.ticket_types.map(a=>({id:a.id||null,name:a.name,description:a.description,price:a.price,capacity:a.capacity,is_active:a.is_active}))};if(p.image_file){const a=new FormData;console.log("EventEdit - Upload de fichier détecté:",p.image_file),console.log("EventEdit - Données à envoyer:",v),Object.keys(v).forEach(S=>{v[S]!==null&&v[S]!==void 0&&(S==="schedules"||S==="ticket_types"?(a.append(S,JSON.stringify(v[S])),console.log(`EventEdit - Ajout ${S} (JSON):`,JSON.stringify(v[S]))):(a.append(S,v[S]),console.log(`EventEdit - Ajout ${S}:`,v[S])))}),a.append("image_file",p.image_file),console.log("EventEdit - Fichier ajouté à FormData:",p.image_file.name);for(let[S,k]of a.entries())console.log(`EventEdit - FormData ${S}:`,k);await M.updateEventWithFile(y.value.id,a)}else v.image_url=p.image_url||null,v.image_file=null,console.log("EventEdit - Envoi sans fichier, avec URL:",v.image_url),await M.updateEvent(y.value.id,v);await j.fire({title:"Succès !",text:"Événement mis à jour avec succès !",icon:"success",confirmButtonColor:"#272d63"}),T.push({name:"organizer-event-detail",params:{slug:y.value.slug}})}catch(v){console.error("Erreur lors de la mise à jour:",v),await j.fire({title:"Erreur",text:v.response?.data?.message||"Erreur lors de la mise à jour de l'événement",icon:"error",confirmButtonColor:"#272d63"})}finally{V.value=!1}},$=async()=>{if((await j.fire({title:"Publier l'événement",text:"Êtes-vous sûr de vouloir publier cet événement ?",icon:"question",showCancelButton:!0,confirmButtonColor:"#272d63",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, publier",cancelButtonText:"Annuler"})).isConfirmed)try{await M.updateEvent(y.value.id,{status:"published",is_active:!0}),y.value.status="published",y.value.is_active=!0,await j.fire({title:"Succès !",text:"Événement publié avec succès !",icon:"success",confirmButtonColor:"#272d63"})}catch(a){console.error("Erreur publication:",a),await j.fire({title:"Erreur",text:"Erreur lors de la publication de l'événement",icon:"error",confirmButtonColor:"#272d63"})}},N=()=>{p.ticket_types.push({name:"",description:"",price:"",capacity:"",is_active:!0})},F=async v=>{(await j.fire({title:"Supprimer le type de billet",text:"Êtes-vous sûr de vouloir supprimer ce type de billet ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6b7280",confirmButtonText:"Oui, supprimer",cancelButtonText:"Annuler"})).isConfirmed&&p.ticket_types.splice(v,1)},K=()=>{p.schedules.push({starts_at:"",ends_at:"",door_time:""})},Q=v=>{p.schedules.length>1&&p.schedules.splice(v,1)},Y=()=>{p.venue_id==="new"&&(x.value=!0)},w=()=>{x.value=!1,p.venue_id="",p.new_venue_name="",p.new_venue_city="",p.new_venue_address=""},o=v=>{const a=v.target.files[0];if(a){p.image_file=a,p.image_url="";const S=new FileReader;S.onload=k=>{p.image_preview=k.target.result},S.readAsDataURL(a)}},_=()=>{p.image_url&&(p.image_preview=p.image_url,p.image_file=null)},u=()=>{p.image_url="",p.image_preview="",p.image_file=null,I.value&&(I.value.value="")},t=()=>{if(p.image_preview&&p.image_preview.trim()!=="")return!0;if(!y.value)return!1;const v=y.value.image_url||y.value.image||y.value.image_file;return v&&v.trim()!==""},s=()=>{if(p.image_preview)return p.image_preview;if(!y.value)return"";let v=y.value.image_url||y.value.image||y.value.image_file;return v&&v.trim()!==""?v.startsWith("http://")||v.startsWith("https://")?v:v.startsWith("/")?window.location.origin+v:v.includes("/")?v:`${window.location.origin}/storage/images/events/${v}`:""},f=v=>{console.log("Erreur de chargement d'image:",v.target.src),v.target.src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400&h=300&fit=crop&crop=center"},c=v=>{console.log("Image chargée avec succès:",v.target.src)},r=v=>({active:"Actif",draft:"Brouillon",published:"Publié",cancelled:"Annulé",completed:"Terminé"})[v]||v,U=v=>({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800",completed:"bg-purple-100 text-purple-800"})[v]||"bg-gray-100 text-gray-800";return ne(async()=>{await Promise.all([H(),O(),P()])}),(v,a)=>{const S=oe("router-link");return l(),n("div",Fo,[e("div",Mo,[m.value?(l(),n("div",To,[...a[11]||(a[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):g.value?(l(),n("div",Oo,[e("div",Ro,[h(C(_e),{class:"w-16 h-16 mx-auto text-red-500"})]),a[13]||(a[13]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",Lo,i(g.value),1),h(S,{to:{name:"organizer-events"},class:"bg-primea-blue text-white px-6 py-3 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},{default:J(()=>[...a[12]||(a[12]=[L(" Retour aux événements ",-1)])]),_:1})])):y.value?(l(),n("div",No,[e("div",qo,[e("div",Xo,[e("div",Go,[e("button",{onClick:a[0]||(a[0]=k=>v.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(C(fe),{class:"w-6 h-6"})]),e("div",null,[a[14]||(a[14]=e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Modifier l'événement",-1)),e("p",Wo,i(y.value.title),1)])]),e("div",Ho,[e("span",{class:X(["inline-flex px-3 py-1 text-sm font-semibold rounded-full",U(y.value.status)])},i(r(y.value.status)),3)])])]),e("form",{onSubmit:de(E,["prevent"]),class:"space-y-8"},[e("div",Jo,[e("div",Qo,[e("div",Ko,[a[24]||(a[24]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Yo,[e("div",Zo,[a[15]||(a[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement *",-1)),D(e("input",{"onUpdate:modelValue":a[1]||(a[1]=k=>p.title=k),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[z,p.title]])]),e("div",ea,[a[16]||(a[16]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=k=>p.description=k),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[z,p.description]])]),e("div",null,[a[18]||(a[18]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),D(e("select",{"onUpdate:modelValue":a[3]||(a[3]=k=>p.category_id=k),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[17]||(a[17]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),n(q,null,G(B.value,k=>(l(),n("option",{key:k.id,value:k.id},i(k.name),9,ta))),128))],512),[[ie,p.category_id]])]),e("div",null,[a[21]||(a[21]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),x.value?R("",!0):(l(),n("div",sa,[D(e("select",{"onUpdate:modelValue":a[4]||(a[4]=k=>p.venue_id=k),onChange:Y,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[a[19]||(a[19]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),n(q,null,G(d.value,k=>(l(),n("option",{key:k.id,value:k.id},i(k.name)+" - "+i(k.city),9,ra))),128)),a[20]||(a[20]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[ie,p.venue_id]])])),x.value||p.venue_id==="new"?(l(),n("div",oa,[D(e("input",{"onUpdate:modelValue":a[5]||(a[5]=k=>p.new_venue_name=k),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,p.new_venue_name]]),D(e("input",{"onUpdate:modelValue":a[6]||(a[6]=k=>p.new_venue_city=k),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,p.new_venue_city]]),D(e("input",{"onUpdate:modelValue":a[7]||(a[7]=k=>p.new_venue_address=k),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[z,p.new_venue_address]]),e("button",{type:"button",onClick:w,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):R("",!0)]),e("div",aa,[a[23]||(a[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",na,[p.image_preview?(l(),n("div",la,[e("img",{src:p.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea",onError:f,onLoad:c},null,40,ia),e("button",{type:"button",onClick:u,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(l(),n("div",da,[e("input",{ref_key:"imageInput",ref:I,type:"file",accept:"image/*",onChange:o,class:"hidden"},null,544),e("button",{type:"button",onClick:a[8]||(a[8]=k=>v.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),a[22]||(a[22]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),D(e("input",{"onUpdate:modelValue":a[9]||(a[9]=k=>p.image_url=k),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:_},null,544),[[z,p.image_url]])]))])])])]),e("div",ua,[e("div",ma,[a[26]||(a[26]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:K,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(C(ae),{class:"w-4 h-4 inline mr-2"}),a[25]||(a[25]=L(" Ajouter une séance ",-1))])]),e("div",pa,[(l(!0),n(q,null,G(p.schedules,(k,se)=>(l(),n("div",{key:se,class:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[27]||(a[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),D(e("input",{"onUpdate:modelValue":W=>k.starts_at=W,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ca),[[z,k.starts_at]])]),e("div",null,[a[28]||(a[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),D(e("input",{"onUpdate:modelValue":W=>k.ends_at=W,type:"datetime-local",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,ga),[[z,k.ends_at]])]),e("div",null,[a[29]||(a[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Ouverture des portes",-1)),D(e("input",{"onUpdate:modelValue":W=>k.door_time=W,type:"datetime-local",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,fa),[[z,k.door_time]])]),e("div",ba,[p.schedules.length>1?(l(),n("button",{key:0,type:"button",onClick:W=>Q(se),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[h(C(me),{class:"w-4 h-4"})],8,va)):R("",!0)])]))),128))])]),e("div",xa,[e("div",ya,[a[31]||(a[31]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:N,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(C(ae),{class:"w-4 h-4 inline mr-2"}),a[30]||(a[30]=L(" Ajouter un type ",-1))])]),p.ticket_types.length===0?(l(),n("div",_a,[h(C(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),a[32]||(a[32]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),a[33]||(a[33]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(l(),n("div",ha,[(l(!0),n(q,null,G(p.ticket_types,(k,se)=>(l(),n("div",{key:se,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[a[34]||(a[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),D(e("input",{"onUpdate:modelValue":W=>k.name=W,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,wa),[[z,k.name]])]),e("div",null,[a[35]||(a[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),D(e("input",{"onUpdate:modelValue":W=>k.price=W,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,$a),[[z,k.price,void 0,{number:!0}]])]),e("div",null,[a[36]||(a[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),D(e("input",{"onUpdate:modelValue":W=>k.capacity=W,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,ka),[[z,k.capacity,void 0,{number:!0}]])]),e("div",null,[a[37]||(a[37]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":W=>k.description=W,rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Description du billet..."},null,8,Ea),[[z,k.description]])]),e("div",Ca,[e("label",ja,[D(e("input",{"onUpdate:modelValue":W=>k.is_active=W,type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,8,Da),[[pe,k.is_active]]),a[38]||(a[38]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Actif",-1))]),e("button",{type:"button",onClick:W=>F(se),class:"text-red-600 hover:text-red-800 p-1"},[h(C(me),{class:"w-4 h-4"})],8,Va)])]))),128))]))])]),e("div",Ua,[e("div",Sa,[a[41]||(a[41]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Aa,[e("div",null,[e("label",Ia,[D(e("input",{"onUpdate:modelValue":a[10]||(a[10]=k=>p.is_active=k),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[pe,p.is_active]]),a[39]||(a[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement actif",-1))]),a[40]||(a[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Publier l'événement et activer les ventes",-1))])])]),e("div",Ba,[a[44]||(a[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",za,[e("button",{type:"submit",disabled:V.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},i(V.value?"Enregistrement...":"Enregistrer les modifications"),9,Pa),h(S,{to:{name:"organizer-event-detail",params:{slug:y.value?.slug||C(b).params.slug}},class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:J(()=>[...a[42]||(a[42]=[L(" Annuler les modifications ",-1)])]),_:1},8,["to"]),y.value&&!y.value.is_active?(l(),n("button",{key:0,type:"button",onClick:$,class:"w-full bg-green-600 text-white px-4 py-2 rounded-primea hover:bg-green-700 transition-all duration-200 font-primea"},[h(C(he),{class:"w-4 h-4 inline mr-2"}),a[43]||(a[43]=L(" Publier l'événement ",-1))])):R("",!0)])]),y.value?(l(),n("div",Fa,[a[45]||(a[45]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Image actuelle",-1)),e("div",Ma,[t()?(l(),n("img",{key:0,src:s(),alt:y.value.title,class:"w-full h-full object-cover",onError:f,onLoad:c},null,40,Ta)):(l(),n("div",Oa,[h(C(re),{class:"w-16 h-16 text-gray-400"})]))])])):R("",!0)])])],32)])):R("",!0)])])}}},La=le(Ra,[["__scopeId","data-v-a5121c89"]]),pd=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),Na={class:"event-create min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},qa={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Xa={class:"mb-8"},Ga={class:"flex items-center justify-between"},Wa={class:"flex items-center space-x-4"},Ha={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ja={class:"lg:col-span-2 space-y-6"},Qa={class:"bg-white rounded-primea shadow-primea p-6"},Ka={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ya={class:"md:col-span-2"},Za={class:"md:col-span-2"},en=["value"],tn={key:0},sn=["value"],rn={key:1,class:"space-y-2"},on={class:"md:col-span-2"},an={class:"border-2 border-dashed border-gray-300 rounded-primea p-4 text-center"},nn={key:0,class:"mb-4"},ln=["src"],dn={key:1},un={class:"bg-white rounded-primea shadow-primea p-6"},mn={class:"flex items-center justify-between mb-6"},pn={class:"space-y-4"},cn=["onUpdate:modelValue","onChange"],gn=["onUpdate:modelValue","min"],fn={class:"flex items-end"},bn=["onClick"],vn={class:"bg-white rounded-primea shadow-primea p-6"},xn={class:"flex items-center justify-between mb-6"},yn={key:0,class:"text-center py-8 text-gray-500"},_n={key:1,class:"space-y-4"},hn=["onUpdate:modelValue"],wn=["onUpdate:modelValue"],$n=["onUpdate:modelValue"],kn=["onUpdate:modelValue"],En={class:"flex items-end"},Cn=["onClick"],jn={class:"space-y-6"},Dn={class:"bg-white rounded-primea shadow-primea p-6"},Vn={class:"space-y-4"},Un={class:"flex items-center space-x-2"},Sn={class:"flex items-center space-x-2"},An={class:"bg-white rounded-primea shadow-primea p-6"},In={class:"space-y-3"},Bn=["disabled"],zn={key:0,class:"bg-white rounded-primea shadow-primea p-6"},Pn=["src","alt"],Fn={class:"bg-white rounded-primea shadow-primea p-6"},Mn={class:"space-y-2 text-sm"},Tn={class:"flex justify-between"},On={class:"font-medium font-primea"},Rn={class:"flex justify-between"},Ln={class:"font-medium font-primea"},Nn={key:0,class:"flex justify-between"},qn={class:"font-medium font-primea"},Xn={key:1,class:"flex justify-between"},Gn={class:"font-medium font-primea"},Wn={__name:"EventCreate",setup(ee){const b=ce(),T=A(!1),m=A([]),V=A([]),g=A(!1),y=A(!1),B=A(null),d=Z({title:"",description:"",category_id:"",venue_id:"",image_url:"",image_preview:"",image_file:null,status:"draft",new_venue_name:"",new_venue_city:"",new_venue_address:"",schedules:[{starts_at:"",ends_at:""}],ticket_types:[{name:"",price:"",capacity:"",description:""}]}),x=te(()=>d.ticket_types.reduce((u,t)=>u+(parseInt(t.capacity)||0),0)),I=te(()=>{if(d.ticket_types.length===0)return 0;const u=d.ticket_types.map(t=>parseInt(t.price)||0).filter(t=>t>0);return u.length>0?Math.min(...u):0}),p=te(()=>{if(d.ticket_types.length===0)return 0;const u=d.ticket_types.map(t=>parseInt(t.price)||0);return u.length>0?Math.max(...u):0}),H=()=>{d.ticket_types.push({name:"",description:"",price:"",capacity:""})},O=()=>{d.schedules.push({starts_at:"",ends_at:""})},P=u=>{d.schedules.length>1&&d.schedules.splice(u,1)},E=()=>{d.venue_id==="new"?y.value=!0:y.value=!1},$=()=>{y.value=!1,d.venue_id="",d.new_venue_name="",d.new_venue_city="",d.new_venue_address=""},N=u=>{const t=u.target.files[0];if(t){d.image_file=t;const s=new FileReader;s.onload=f=>{d.image_preview=f.target.result,d.image_url=""},s.readAsDataURL(t)}},F=()=>{d.image_url&&(d.image_preview=d.image_url,d.image_file=null)},K=()=>{d.image_url="",d.image_preview="",d.image_file=null,B.value&&(B.value.value="")},Q=u=>{d.ticket_types.length>1&&d.ticket_types.splice(u,1)},Y=u=>{if(u.starts_at&&(!u.ends_at||new Date(u.ends_at)<new Date(u.starts_at))){const t=new Date(u.starts_at);t.setHours(t.getHours()+2),u.ends_at=t.toISOString().slice(0,16)}},w=async()=>{if(d.ticket_types.length===0){j.fire({title:"Erreur",text:"Veuillez ajouter au moins un type de billet",icon:"error",confirmButtonColor:"#272d63"});return}if(!d.title){j.fire({title:"Erreur",text:"Veuillez remplir le titre de l'événement",icon:"error",confirmButtonColor:"#272d63"});return}T.value=!0;try{if(!d.category_id){j.fire({title:"Erreur",text:"Veuillez sélectionner une catégorie",icon:"error",confirmButtonColor:"#272d63"});return}if(!d.venue_id&&!d.new_venue_name){j.fire({title:"Erreur",text:"Veuillez sélectionner un lieu ou créer un nouveau lieu",icon:"error",confirmButtonColor:"#272d63"});return}if(d.schedules.some(s=>!s.starts_at||!s.ends_at)){j.fire({title:"Erreur",text:"Veuillez remplir toutes les dates et heures de programmation",icon:"error",confirmButtonColor:"#272d63"});return}if(d.schedules.some(s=>new Date(s.ends_at)<new Date(s.starts_at))){j.fire({title:"Erreur",text:"La date de fin doit être égale ou postérieure à la date de début",icon:"error",confirmButtonColor:"#272d63"});return}const u={title:d.title,description:d.description,category_id:d.category_id,venue_id:d.venue_id!=="new"?d.venue_id:null,venue_name:d.venue_id==="new"?d.new_venue_name:null,venue_city:d.venue_id==="new"?d.new_venue_city:"Abidjan",venue_address:d.venue_id==="new"?d.new_venue_address:null,is_active:d.status==="published"?1:0,schedules:d.schedules.map(s=>({starts_at:s.starts_at,ends_at:s.ends_at,door_time:s.starts_at})),ticket_types:d.ticket_types.map(s=>({name:s.name,description:s.description,price:parseFloat(s.price),capacity:parseInt(s.capacity),is_active:!0}))};let t;if(d.image_file){const s=new FormData;Object.keys(u).forEach(f=>{u[f]!==null&&u[f]!==void 0&&(f==="schedules"||f==="ticket_types"?s.append(f,JSON.stringify(u[f])):s.append(f,u[f]))}),s.append("image_file",d.image_file),t=await M.createEventWithFile(s)}else u.image_url=d.image_url||null,t=await M.createEvent(u);if(t.data.success)j.fire({title:"Succès !",text:"Événement créé avec succès !",icon:"success",confirmButtonColor:"#272d63"}).then(()=>{b.push(`/organizer/events/${t.data.data.id}`)});else throw new Error(t.data.message||"Erreur lors de la création")}catch(u){console.error("Erreur création événement:",u),console.error("Détails erreur:",u.response?.data);let t=u.response?.data?.message||"Erreur lors de la création de l'événement";if(u.response?.data?.errors){const s=u.response.data.errors,f=Object.keys(s).map(c=>`${c}: ${s[c].join(", ")}`).join(`
`);t+=`

Détails:
`+f}j.fire({title:"Erreur de validation",text:t,icon:"error",confirmButtonColor:"#272d63"})}finally{T.value=!1}},o=async()=>{g.value=!0;try{const u=await M.getCategories();u.data.success&&(m.value=u.data.categories||u.data.data);const t=await M.getVenues();t.data.success&&(V.value=t.data.venues||t.data.data)}catch(u){console.error("Erreur chargement données initiales:",u)}finally{g.value=!1}},_=u=>new Intl.NumberFormat("fr-FR").format(u);return ne(()=>{o()}),(u,t)=>{const s=oe("router-link");return l(),n("div",Na,[e("div",qa,[e("div",Xa,[e("div",Ga,[e("div",Wa,[e("button",{onClick:t[0]||(t[0]=f=>u.$router.go(-1)),class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(C(fe),{class:"w-6 h-6"})]),t[13]||(t[13]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea"},"Créer un événement"),e("p",{class:"text-gray-600 font-primea mt-1"},"Configurez tous les détails de votre événement")],-1))])])]),e("form",{onSubmit:de(w,["prevent"]),class:"space-y-8"},[e("div",Ha,[e("div",Ja,[e("div",Qa,[t[23]||(t[23]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Informations de base",-1)),e("div",Ka,[e("div",Ya,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Titre de l'événement",-1)),D(e("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>d.title=f),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nom de votre événement"},null,512),[[z,d.title]])]),e("div",Za,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=f=>d.description=f),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea resize-none",placeholder:"Décrivez votre événement..."},null,512),[[z,d.description]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Catégorie *",-1)),D(e("select",{"onUpdate:modelValue":t[3]||(t[3]=f=>d.category_id=f),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[16]||(t[16]=e("option",{value:""},"Sélectionner une catégorie",-1)),(l(!0),n(q,null,G(m.value,f=>(l(),n("option",{key:f.id,value:f.id},i(f.name),9,en))),128))],512),[[ie,d.category_id]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Lieu *",-1)),y.value?R("",!0):(l(),n("div",tn,[D(e("select",{"onUpdate:modelValue":t[4]||(t[4]=f=>d.venue_id=f),onChange:E,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[t[18]||(t[18]=e("option",{value:""},"Sélectionner un lieu",-1)),(l(!0),n(q,null,G(V.value,f=>(l(),n("option",{key:f.id,value:f.id},i(f.name)+" - "+i(f.city),9,sn))),128)),t[19]||(t[19]=e("option",{value:"new"},"+ Ajouter un nouveau lieu",-1))],544),[[ie,d.venue_id]])])),y.value||d.venue_id==="new"?(l(),n("div",rn,[D(e("input",{"onUpdate:modelValue":t[5]||(t[5]=f=>d.new_venue_name=f),type:"text",placeholder:"Nom du lieu",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,d.new_venue_name]]),D(e("input",{"onUpdate:modelValue":t[6]||(t[6]=f=>d.new_venue_city=f),type:"text",placeholder:"Ville",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",required:""},null,512),[[z,d.new_venue_city]]),D(e("input",{"onUpdate:modelValue":t[7]||(t[7]=f=>d.new_venue_address=f),type:"text",placeholder:"Adresse",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,512),[[z,d.new_venue_address]]),e("button",{type:"button",onClick:$,class:"text-sm text-primea-blue hover:text-primea-yellow font-primea"}," Utiliser un lieu existant ")])):R("",!0)]),e("div",on,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Image de l'événement",-1)),e("div",an,[d.image_preview?(l(),n("div",nn,[e("img",{src:d.image_preview,alt:"Aperçu",class:"max-h-32 mx-auto rounded-primea"},null,8,ln),e("button",{type:"button",onClick:K,class:"mt-2 text-sm text-red-600 hover:text-red-800"}," Supprimer l'image ")])):(l(),n("div",dn,[e("input",{ref_key:"imageInput",ref:B,type:"file",accept:"image/*",onChange:N,class:"hidden"},null,544),e("button",{type:"button",onClick:t[8]||(t[8]=f=>u.$refs.imageInput.click()),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"}," Choisir une image "),t[21]||(t[21]=e("p",{class:"text-sm text-gray-500 mt-2 font-primea"},"ou",-1)),D(e("input",{"onUpdate:modelValue":t[9]||(t[9]=f=>d.image_url=f),type:"url",class:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"URL de l'image (https://exemple.com/image.jpg)",onInput:F},null,544),[[z,d.image_url]])]))])])])]),e("div",un,[e("div",mn,[t[25]||(t[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Programmation",-1)),e("button",{type:"button",onClick:O,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(C(ae),{class:"w-4 h-4 inline mr-2"}),t[24]||(t[24]=L(" Ajouter une séance ",-1))])]),e("div",pn,[(l(!0),n(q,null,G(d.schedules,(f,c)=>(l(),n("div",{key:c,class:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de début *",-1)),D(e("input",{"onUpdate:modelValue":r=>f.starts_at=r,type:"datetime-local",required:"",onChange:r=>Y(f),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,40,cn),[[z,f.starts_at]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Date et heure de fin *",-1)),D(e("input",{"onUpdate:modelValue":r=>f.ends_at=r,type:"datetime-local",required:"",min:f.starts_at,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},null,8,gn),[[z,f.ends_at]]),t[28]||(t[28]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"La date de fin doit être égale ou postérieure à la date de début",-1))]),e("div",fn,[d.schedules.length>1?(l(),n("button",{key:0,type:"button",onClick:r=>P(c),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[h(C(me),{class:"w-4 h-4"})],8,bn)):R("",!0)])]))),128))])]),e("div",vn,[e("div",xn,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Types de billets",-1)),e("button",{type:"button",onClick:H,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[h(C(ae),{class:"w-4 h-4 inline mr-2"}),t[29]||(t[29]=L(" Ajouter un type ",-1))])]),d.ticket_types.length===0?(l(),n("div",yn,[h(C(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-2"}),t[31]||(t[31]=e("p",{class:"font-primea"},"Aucun type de billet configuré",-1)),t[32]||(t[32]=e("p",{class:"text-sm font-primea mt-1"},'Cliquez sur "Ajouter un type" pour commencer',-1))])):(l(),n("div",_n,[(l(!0),n(q,null,G(d.ticket_types,(f,c)=>(l(),n("div",{key:c,class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-4 border border-gray-200 rounded-primea"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom *",-1)),D(e("input",{"onUpdate:modelValue":r=>f.name=r,type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Ex: Billet Standard"},null,8,hn),[[z,f.name]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Prix (XAF) *",-1)),D(e("input",{"onUpdate:modelValue":r=>f.price=r,type:"number",min:"0",step:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"25000"},null,8,wn),[[z,f.price,void 0,{number:!0}]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Capacité *",-1)),D(e("input",{"onUpdate:modelValue":r=>f.capacity=r,type:"number",min:"1",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"100"},null,8,$n),[[z,f.capacity,void 0,{number:!0}]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),D(e("input",{"onUpdate:modelValue":r=>f.description=r,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Description du billet"},null,8,kn),[[z,f.description]])]),e("div",En,[d.ticket_types.length>1?(l(),n("button",{key:0,type:"button",onClick:r=>Q(c),class:"bg-red-600 text-white px-3 py-2 rounded-primea hover:bg-red-700 font-primea"},[h(C(me),{class:"w-4 h-4"})],8,Cn)):R("",!0)])]))),128))]))])]),e("div",jn,[e("div",Dn,[t[44]||(t[44]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Paramètres",-1)),e("div",Vn,[e("div",null,[e("label",Un,[D(e("input",{"onUpdate:modelValue":t[10]||(t[10]=f=>d.is_public=f),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[pe,d.is_public]]),t[37]||(t[37]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Événement public",-1))]),t[38]||(t[38]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Visible dans la liste publique des événements",-1))]),e("div",null,[e("label",Sn,[D(e("input",{"onUpdate:modelValue":t[11]||(t[11]=f=>d.sales_active=f),type:"checkbox",class:"rounded border-gray-300 text-primea-blue focus:ring-primea-blue"},null,512),[[pe,d.sales_active]]),t[39]||(t[39]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Ventes actives",-1))]),t[40]||(t[40]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Permettre l'achat de billets",-1))]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-2"},"Statut *",-1)),D(e("select",{"onUpdate:modelValue":t[12]||(t[12]=f=>d.status=f),class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea"},[...t[41]||(t[41]=[e("option",{value:"draft"},"Brouillon",-1),e("option",{value:"published"},"Publié",-1),e("option",{value:"cancelled"},"Annulé",-1)])],512),[[ie,d.status]]),t[43]||(t[43]=e("p",{class:"text-xs text-gray-500 mt-1 font-primea"},"Les brouillons ne sont pas visibles par le public",-1))])])]),e("div",An,[t[46]||(t[46]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Actions",-1)),e("div",In,[e("button",{type:"submit",disabled:T.value,class:"w-full bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},i(T.value?"Création en cours...":"Créer l'événement"),9,Bn),h(s,{to:"/organizer/dashboard",class:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 text-gray-700 rounded-primea hover:bg-gray-50 transition-all duration-200 font-primea"},{default:J(()=>[...t[45]||(t[45]=[L(" Annuler ",-1)])]),_:1})])]),d.image_url||d.image_preview?(l(),n("div",zn,[t[47]||(t[47]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Aperçu de l'image",-1)),e("img",{src:d.image_preview||d.image_url,alt:d.title,class:"w-full h-48 object-cover rounded-primea"},null,8,Pn)])):R("",!0),e("div",Fn,[t[52]||(t[52]=e("h3",{class:"text-lg font-semibold text-primea-blue font-primea mb-4"},"Résumé",-1)),e("div",Mn,[e("div",Tn,[t[48]||(t[48]=e("span",{class:"text-gray-600 font-primea"},"Types de billets:",-1)),e("span",On,i(d.ticket_types.length),1)]),e("div",Rn,[t[49]||(t[49]=e("span",{class:"text-gray-600 font-primea"},"Capacité totale:",-1)),e("span",Ln,i(x.value||"Illimitée"),1)]),I.value>0?(l(),n("div",Nn,[t[50]||(t[50]=e("span",{class:"text-gray-600 font-primea"},"Prix minimum:",-1)),e("span",qn,i(_(I.value))+" XAF",1)])):R("",!0),p.value>0?(l(),n("div",Xn,[t[51]||(t[51]=e("span",{class:"text-gray-600 font-primea"},"Prix maximum:",-1)),e("span",Gn,i(_(p.value))+" XAF",1)])):R("",!0)])])])])],32)])])}}},Hn=le(Wn,[["__scopeId","data-v-9749d093"]]),cd=Object.freeze(Object.defineProperty({__proto__:null,default:Hn},Symbol.toStringTag,{value:"Module"})),Jn={class:"balance-management min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},Qn={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Kn={class:"mb-8"},Yn={class:"flex items-center justify-between"},Zn={key:0,class:"flex justify-center items-center h-64"},el={key:1},tl={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},sl={class:"bg-white rounded-lg shadow p-6"},rl={class:"flex items-center"},ol={class:"ml-4"},al={class:"text-2xl font-bold text-green-600"},nl={class:"bg-white rounded-lg shadow p-6"},ll={class:"flex items-center"},il={class:"ml-4"},dl={class:"text-2xl font-bold text-yellow-600"},ul={class:"bg-white rounded-lg shadow p-6"},ml={class:"flex items-center"},pl={class:"ml-4"},cl={class:"text-2xl font-bold text-blue-600"},gl={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},fl={class:"flex items-center justify-between mb-4"},bl={class:"flex items-center"},vl={class:"text-lg font-semibold text-gray-900"},xl={class:"text-right"},yl={class:"text-2xl font-bold text-green-600"},_l={class:"mb-4 p-3 bg-gray-50 rounded-primea"},hl={class:"flex items-center justify-between mb-2"},wl={key:0,class:"text-sm text-gray-600 font-primea"},$l={key:0},kl={key:1,class:"text-sm text-gray-600 font-primea"},El={class:"space-y-3"},Cl=["onClick","disabled"],jl={class:"mt-6 pt-6 border-t"},Dl={key:0,class:"text-sm text-gray-500"},Vl={key:1,class:"space-y-2"},Ul={class:"font-medium"},Sl={class:"text-gray-500 ml-2"},Al={class:"bg-white rounded-lg shadow"},Il={class:"p-6 border-b"},Bl={class:"flex justify-between items-center"},zl={key:0,class:"p-8 text-center text-gray-500"},Pl={key:1,class:"overflow-x-auto"},Fl={class:"w-full"},Ml={class:"divide-y divide-gray-200"},Tl={class:"px-6 py-4 text-sm font-mono text-gray-900"},Ol={class:"px-6 py-4 text-sm"},Rl={class:"px-6 py-4 text-sm font-medium text-gray-900"},Ll={class:"px-6 py-4 text-sm"},Nl={class:"px-6 py-4 text-sm"},ql={class:"px-6 py-4 text-sm text-gray-500"},Xl={class:"px-6 py-4 text-sm"},Gl=["onClick"],Wl={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Hl={class:"bg-white rounded-primea p-6 w-full max-w-md"},Jl={class:"space-y-4"},Ql=["value"],Kl=["value"],Yl=["max"],Zl={class:"flex justify-end space-x-3 mt-6"},ei=["disabled"],ti={__name:"BalanceManagement",setup(ee){const b=A(!1),T=A(!1),m=A(!1),V=A([]),g=A([]),y=Z({pending_payouts:0,total_payouts:0}),B=Z({gateway:"",available_balance:0,amount:"",phone_number:""}),d=te(()=>V.value.reduce((w,o)=>w+(parseFloat(o.balance)||0),0)),x=async()=>{b.value=!0;try{const w=await M.getBalance();console.log("Balance API Response:",w.data),w.data.success?(V.value=w.data.data.balances||[],console.log("Balances loaded:",V.value),V.value.length===0&&(V.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],console.log("Default balances created:",V.value))):console.error("Balance API Error:",w.data.message)}catch(w){console.error("Erreur chargement soldes:",w),console.error("Error details:",w.response?.data),V.value=[{gateway:"airtelmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null},{gateway:"moovmoney",balance:0,auto_payout_enabled:!1,auto_payout_threshold:1e4,payout_phone_number:null}],j.fire({title:"Erreur",text:"Impossible de charger les soldes. Affichage des valeurs par défaut.",icon:"warning",confirmButtonColor:"#272d63"})}finally{b.value=!1}},I=async()=>{try{const w=await M.getPaymentHistory();console.log("Payment History API Response:",w.data),w.data.success?(g.value=w.data.data.payouts?.data||w.data.data.payouts||[],console.log("Recent payouts loaded:",g.value),y.pending_payouts=g.value.filter(o=>["pending","processing"].includes(o.status)).length,y.total_payouts=g.value.reduce((o,_)=>o+(_.amount||0),0),console.log("Stats calculated:",y)):console.error("Payment History API Error:",w.data.message)}catch(w){console.error("Erreur chargement payouts récents:",w),console.error("Error details:",w.response?.data)}},p=w=>{Object.assign(B,{gateway:w.gateway,available_balance:w.balance,amount:"",phone_number:w.payout_phone_number||""}),m.value=!0},H=async()=>{T.value=!0;try{const w=await M.requestPayout(B);w.data.success?(j.fire({title:"Succès !",text:"Demande de versement envoyée avec succès",icon:"success",confirmButtonColor:"#272d63"}),m.value=!1,x(),I()):j.fire({title:"Erreur",text:w.data.message||"Erreur lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}catch(w){console.error("Erreur demande payout:",w),j.fire({title:"Erreur technique",text:"Une erreur est survenue lors de la demande",icon:"error",confirmButtonColor:"#272d63"})}finally{T.value=!1}},O=w=>g.value.filter(o=>o.gateway===w).slice(0,3),P=w=>{j.fire({title:`Versement #${w.reference}`,html:`
      <div class="text-left">
        <p><strong>Montant:</strong> ${E(w.amount)} XAF</p>
        <p><strong>Statut:</strong> ${Q(w.status)}</p>
        <p><strong>Gateway:</strong> ${F(w.gateway)}</p>
        <p><strong>Date:</strong> ${N(w.created_at)}</p>
      </div>
    `,icon:"info",confirmButtonColor:"#272d63"})},E=w=>new Intl.NumberFormat("fr-FR").format(w||0),$=w=>new Date(w).toLocaleDateString("fr-FR"),N=w=>new Date(w).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),F=w=>({airtelmoney:"Airtel Money",moovmoney:"Moov Money"})[w]||w,K=w=>({airtelmoney:"bg-red-100 text-red-800",moovmoney:"bg-orange-100 text-orange-800"})[w]||"bg-gray-100 text-gray-800",Q=w=>({pending:"En attente",processing:"En cours",success:"Réussi",failed:"Échoué",cancelled:"Annulé"})[w]||w,Y=w=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800";return ne(()=>{x(),I()}),(w,o)=>(l(),n("div",Jn,[e("div",Qn,[e("div",Kn,[e("div",Yn,[o[6]||(o[6]=e("div",null,[e("h1",{class:"text-3xl font-bold text-primea-blue font-primea mb-2"},"Mon Solde"),e("p",{class:"text-gray-600 font-primea"},"Consultez votre solde et effectuez des demandes de versement")],-1)),e("button",{onClick:o[0]||(o[0]=_=>w.$router.push("/organizer/payouts/history")),class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea"},[...o[5]||(o[5]=[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),L(" Historique Versements ",-1)])])])]),b.value?(l(),n("div",Zn,[...o[7]||(o[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):(l(),n("div",el,[e("div",tl,[e("div",sl,[e("div",rl,[o[9]||(o[9]=e("div",{class:"p-2 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",ol,[o[8]||(o[8]=e("p",{class:"text-sm text-gray-600"},"Solde Total",-1)),e("p",al,i(E(d.value))+" XAF",1)])])]),e("div",nl,[e("div",ll,[o[11]||(o[11]=e("div",{class:"p-2 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",il,[o[10]||(o[10]=e("p",{class:"text-sm text-gray-600"},"Payouts en Cours",-1)),e("p",dl,i(y.pending_payouts||0),1)])])]),e("div",ul,[e("div",ml,[o[13]||(o[13]=e("div",{class:"p-2 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",pl,[o[12]||(o[12]=e("p",{class:"text-sm text-gray-600"},"Total Payouts",-1)),e("p",cl,i(E(y.total_payouts||0))+" XAF",1)])])])]),e("div",gl,[(l(!0),n(q,null,G(V.value,_=>(l(),n("div",{key:_.gateway,class:"bg-white rounded-lg shadow p-6"},[e("div",fl,[e("div",bl,[e("div",{class:X(["p-2 rounded-lg mr-4",K(_.gateway)])},[...o[14]||(o[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)])],2),e("div",null,[e("h3",vl,i(F(_.gateway)),1),o[15]||(o[15]=e("p",{class:"text-sm text-gray-600"},"Solde disponible",-1))])]),e("div",xl,[e("p",yl,i(E(_.balance))+" XAF",1)])]),e("div",_l,[e("div",hl,[o[16]||(o[16]=e("span",{class:"text-sm font-medium text-gray-700 font-primea"},"Versement Automatique",-1)),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",_.auto_payout_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(_.auto_payout_enabled?"Activé":"Désactivé"),3)]),_.auto_payout_enabled?(l(),n("div",wl,[e("p",null,"Seuil: "+i(E(_.auto_payout_threshold))+" XAF",1),_.payout_phone_number?(l(),n("p",$l,"Téléphone: "+i(_.payout_phone_number),1)):R("",!0),o[17]||(o[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Configuration gérée par l'administrateur",-1))])):(l(),n("div",kl,[...o[18]||(o[18]=[e("p",{class:"text-xs text-gray-500"},"Pour activer le versement automatique, contactez l'administrateur",-1)])]))]),e("div",El,[e("button",{onClick:u=>p(_),disabled:_.balance<1e3,class:"w-full bg-primea-blue text-white py-2 px-4 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50 disabled:cursor-not-allowed"},[o[19]||(o[19]=e("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1)),L(" "+i(_.balance<1e3?"Solde insuffisant (min 1000 XAF)":"Demander un Versement"),1)],8,Cl)]),e("div",jl,[o[20]||(o[20]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Dernières transactions",-1)),O(_.gateway).length===0?(l(),n("div",Dl," Aucune transaction récente ")):(l(),n("div",Vl,[(l(!0),n(q,null,G(O(_.gateway),u=>(l(),n("div",{key:u.id,class:"flex justify-between items-center text-sm"},[e("div",null,[e("span",Ul,i(E(u.amount))+" XAF",1),e("span",Sl,i($(u.created_at)),1)]),e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(u.status)])},i(Q(u.status)),3)]))),128))]))])]))),128))]),e("div",Al,[e("div",Il,[e("div",Bl,[o[21]||(o[21]=e("h2",{class:"text-xl font-bold"},"Payouts Récents",-1)),e("button",{onClick:o[1]||(o[1]=_=>w.$router.push("/organizer/payouts/history")),class:"text-blue-600 hover:text-blue-800 text-sm"},"Voir tout")])]),g.value.length===0?(l(),n("div",zl," Aucun payout récent ")):(l(),n("div",Pl,[e("table",Fl,[o[22]||(o[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Référence"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Gateway"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Montant"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Statut"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),e("tbody",Ml,[(l(!0),n(q,null,G(g.value,_=>(l(),n("tr",{key:_.id},[e("td",Tl,"#"+i(_.reference),1),e("td",Ol,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",K(_.gateway)])},i(F(_.gateway)),3)]),e("td",Rl,i(E(_.amount))+" XAF",1),e("td",Ll,[e("span",{class:X(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",Y(_.status)])},i(Q(_.status)),3)]),e("td",Nl,[e("span",{class:X(["inline-flex px-2 py-1 text-xs rounded-full",_.is_automatic?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},i(_.is_automatic?"Auto":"Manuel"),3)]),e("td",ql,i(N(_.created_at)),1),e("td",Xl,[e("button",{onClick:u=>P(_),class:"text-blue-600 hover:text-blue-900"}," Détails ",8,Gl)])]))),128))])])]))])])),m.value?(l(),n("div",Wl,[e("div",Hl,[o[29]||(o[29]=e("h3",{class:"text-lg font-bold text-primea-blue font-primea mb-4"},"Demande de Versement",-1)),e("form",{onSubmit:de(H,["prevent"])},[e("div",Jl,[e("div",null,[o[23]||(o[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gateway",-1)),e("input",{value:F(B.gateway),disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Ql)]),e("div",null,[o[24]||(o[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Solde Disponible",-1)),e("input",{value:E(B.available_balance)+" XAF",disabled:"",class:"w-full border rounded-lg px-3 py-2 bg-gray-100"},null,8,Kl)]),e("div",null,[o[25]||(o[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Montant à retirer (XAF)",-1)),D(e("input",{"onUpdate:modelValue":o[2]||(o[2]=_=>B.amount=_),type:"number",min:1e3,max:B.available_balance,required:"",class:"w-full border rounded-lg px-3 py-2"},null,8,Yl),[[z,B.amount,void 0,{number:!0}]]),o[26]||(o[26]=e("p",{class:"text-xs text-gray-500 mt-1"},"Montant minimum: 1,000 XAF",-1))]),e("div",null,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Numéro de téléphone",-1)),D(e("input",{"onUpdate:modelValue":o[3]||(o[3]=_=>B.phone_number=_),type:"tel",maxlength:"9",pattern:"[0-9]{9}",required:"",placeholder:"074123456",class:"w-full border rounded-lg px-3 py-2"},null,512),[[z,B.phone_number]]),o[28]||(o[28]=e("p",{class:"text-xs text-gray-500 mt-1"},"Numéro sans indicatif pays",-1))])]),e("div",Zl,[e("button",{type:"button",onClick:o[4]||(o[4]=_=>m.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Annuler "),e("button",{type:"submit",disabled:T.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 font-primea disabled:opacity-50"},i(T.value?"Demande en cours...":"Demander le Versement"),9,ei)])],32)])])):R("",!0)])]))}},si=le(ti,[["__scopeId","data-v-1db6fa0a"]]),gd=Object.freeze(Object.defineProperty({__proto__:null,default:si},Symbol.toStringTag,{value:"Module"})),ri={class:"organizer-profile min-h-screen",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"}},oi={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ai={key:0,class:"flex justify-center items-center h-64"},ni={key:1,class:"space-y-8"},li={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},ii={class:"bg-white rounded-primea shadow-primea p-6"},di={class:"flex flex-col items-center space-y-4"},ui={class:"relative"},mi={class:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg"},pi=["src","alt"],ci={key:1,class:"w-full h-full flex items-center justify-center bg-primea-blue text-white text-3xl font-bold font-primea"},gi=["disabled"],fi={class:"text-center"},bi={class:"text-sm text-gray-600 font-primea"},vi={key:0,class:"text-center"},xi={class:"bg-white rounded-primea shadow-primea p-6"},yi={class:"flex flex-col items-center space-y-4"},_i={class:"relative"},hi={class:"w-32 h-32 rounded-primea overflow-hidden bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center"},wi=["src","alt"],$i={key:1,class:"text-center"},ki=["disabled"],Ei={class:"text-center"},Ci={class:"text-sm text-gray-600 font-primea"},ji={key:0,class:"text-center"},Di={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Vi={class:"bg-white rounded-primea shadow-primea p-6"},Ui={class:"flex items-center justify-between mb-6"},Si=["disabled"],Ai=["disabled"],Ii={key:0,class:"flex space-x-3 pt-4"},Bi=["disabled"],zi={class:"bg-white rounded-primea shadow-primea p-6"},Pi={class:"flex items-center justify-between mb-6"},Fi=["disabled"],Mi=["disabled"],Ti=["disabled"],Oi=["disabled"],Ri={key:0,class:"flex space-x-3 pt-4"},Li=["disabled"],Ni={class:"bg-white rounded-primea shadow-primea p-6"},qi=["disabled"],Xi={class:"bg-white rounded-primea shadow-primea p-6"},Gi={class:"space-y-4"},Wi={class:"flex items-center justify-between p-3 bg-green-50 rounded-primea"},Hi={class:"flex items-center space-x-3"},Ji={class:"text-xs text-green-600 font-primea"},Qi={key:0,class:"flex items-center justify-between p-3 bg-blue-50 rounded-primea"},Ki={class:"flex items-center space-x-3"},Yi={class:"text-xs text-blue-600 font-primea"},Zi={class:"grid grid-cols-2 gap-4 pt-4"},ed={class:"text-center p-3 border rounded-primea"},td={class:"text-2xl font-bold text-primea-blue font-primea"},sd={class:"text-center p-3 border rounded-primea"},rd={class:"text-2xl font-bold text-primea-yellow font-primea"},od={__name:"OrganizerProfile",setup(ee){const b=$e(),T=A(!1),m=A(!1),V=A(!1),g=A(!1),y=A(!1),B=A(!1),d=A(!1),x=A(!1),I=A(null),p=A(null),H=A({events:0,tickets:0}),O=Z({name:"",email:"",phone:""}),P=Z({name:"",description:"",website_url:"",contact_email:"",contact_phone:""}),E=Z({current_password:"",password:"",password_confirmation:""}),$=Z({}),N=Z({}),F=()=>{m.value||Object.assign($,O),m.value=!m.value},K=()=>{V.value||Object.assign(N,P),V.value=!V.value},Q=()=>{Object.assign(O,$),m.value=!1},Y=()=>{Object.assign(P,N),V.value=!1},w=async()=>{g.value=!0;try{const c=await M.updateProfile({type:"personal",...O});c.data.success&&(j.fire({title:"Succès !",text:"Informations personnelles mises à jour",icon:"success",confirmButtonColor:"#272d63"}),m.value=!1,c.data.data.user&&(I.value={...I.value,...c.data.data.user}))}catch(c){console.error("Erreur lors de la mise à jour:",c),j.fire({title:"Erreur",text:"Impossible de mettre à jour les informations",icon:"error",confirmButtonColor:"#272d63"})}finally{g.value=!1}},o=async()=>{y.value=!0;try{const c=await M.updateProfile({type:"organization",...P});c.data.success&&(j.fire({title:"Succès !",text:"Informations de l'organisation mises à jour",icon:"success",confirmButtonColor:"#272d63"}),V.value=!1,c.data.data.organization&&(p.value={...p.value,...c.data.data.organization}))}catch(c){console.error("Erreur lors de la mise à jour:",c),j.fire({title:"Erreur",text:"Impossible de mettre à jour les informations de l'organisation",icon:"error",confirmButtonColor:"#272d63"})}finally{y.value=!1}},_=async()=>{if(E.password!==E.password_confirmation){j.fire({title:"Erreur",text:"Les mots de passe ne correspondent pas",icon:"error",confirmButtonColor:"#272d63"});return}B.value=!0;try{(await M.updateProfile({type:"password",...E})).data.success&&(j.fire({title:"Succès !",text:"Mot de passe mis à jour avec succès",icon:"success",confirmButtonColor:"#272d63"}),Object.assign(E,{current_password:"",password:"",password_confirmation:""}))}catch(c){console.error("Erreur lors du changement de mot de passe:",c),j.fire({title:"Erreur",text:"Impossible de changer le mot de passe",icon:"error",confirmButtonColor:"#272d63"})}finally{B.value=!1}},u=async c=>{const r=c.target.files[0];if(r){if(!r.type.startsWith("image/")){j.fire({title:"Erreur",text:"Veuillez sélectionner un fichier image",icon:"error",confirmButtonColor:"#272d63"});return}if(r.size>5*1024*1024){j.fire({title:"Erreur",text:"L'image ne doit pas dépasser 5MB",icon:"error",confirmButtonColor:"#272d63"});return}d.value=!0;try{const U=new FormData;U.append("avatar",r),U.append("type","user");const v=await M.uploadAvatar(U);if(v.data.success){I.value.avatar_url=v.data.data.avatar_url,b.updateUser({avatar_url:v.data.data.avatar_url});const a=document.querySelector(`img[alt="${I.value?.name}"]`);a&&(a.src=v.data.data.avatar_url+"?t="+new Date().getTime()),j.fire({title:"Succès !",text:"Photo de profil mise à jour",icon:"success",confirmButtonColor:"#272d63"}),setTimeout(()=>{f()},1e3)}}catch(U){console.error("Erreur upload avatar:",U),j.fire({title:"Erreur",text:"Impossible de télécharger la photo",icon:"error",confirmButtonColor:"#272d63"})}finally{d.value=!1,c.target.value=""}}},t=async c=>{const r=c.target.files[0];if(r){if(!r.type.startsWith("image/")){j.fire({title:"Erreur",text:"Veuillez sélectionner un fichier image",icon:"error",confirmButtonColor:"#272d63"});return}if(r.size>5*1024*1024){j.fire({title:"Erreur",text:"L'image ne doit pas dépasser 5MB",icon:"error",confirmButtonColor:"#272d63"});return}x.value=!0;try{const U=new FormData;U.append("logo",r),U.append("type","organization");const v=await M.uploadAvatar(U);if(v.data.success){p.value.logo_url=v.data.data.logo_url;const a=document.querySelector(`img[alt="${p.value?.name}"]`);a&&(a.src=v.data.data.logo_url+"?t="+new Date().getTime()),j.fire({title:"Succès !",text:"Logo de l'organisation mis à jour",icon:"success",confirmButtonColor:"#272d63"}),setTimeout(()=>{f()},1e3)}}catch(U){console.error("Erreur upload logo:",U),j.fire({title:"Erreur",text:"Impossible de télécharger le logo",icon:"error",confirmButtonColor:"#272d63"})}finally{x.value=!1,c.target.value=""}}},s=c=>c?new Date(c).toLocaleDateString("fr-FR"):"Non disponible",f=async()=>{T.value=!0;try{const c=await M.getProfile();if(console.log("Profile API Response:",c.data),c.data.success){const r=c.data.data;r.user&&(I.value=r.user,Object.assign(O,{name:r.user.name||"",email:r.user.email||"",phone:r.user.phone||""}),b.updateUser({name:r.user.name,email:r.user.email,phone:r.user.phone,avatar_url:r.user.avatar_url})),r.organization&&(p.value=r.organization,Object.assign(P,{name:r.organization.name||"",description:r.organization.description||"",website_url:r.organization.website_url||"",contact_email:r.organization.contact_email||"",contact_phone:r.organization.contact_phone||""})),r.stats&&(H.value={events:r.stats.events||0,tickets:r.stats.tickets||0})}else console.error("Profile API Error:",c.data.message),j.fire({title:"Erreur",text:"Impossible de charger le profil",icon:"error",confirmButtonColor:"#272d63"})}catch(c){console.error("Erreur lors du chargement du profil:",c),j.fire({title:"Erreur",text:"Impossible de charger le profil",icon:"error",confirmButtonColor:"#272d63"})}finally{T.value=!1}};return ne(()=>{f()}),(c,r)=>(l(),n("div",ri,[e("div",oi,[r[40]||(r[40]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-primea-blue font-primea"},"Mon Profil Organisateur"),e("p",{class:"text-gray-600 mt-1 font-primea"},"Gérez vos informations personnelles et celles de votre organisation")],-1)),T.value?(l(),n("div",ai,[...r[13]||(r[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primea-blue"},null,-1)])])):(l(),n("div",ni,[e("div",li,[e("div",ii,[r[16]||(r[16]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Photo de Profil",-1)),e("div",di,[e("div",ui,[e("div",mi,[I.value?.avatar_url?(l(),n("img",{key:0,src:I.value.avatar_url,alt:I.value?.name,class:"w-full h-full object-cover"},null,8,pi)):(l(),n("div",ci,i(I.value?.name?.charAt(0)?.toUpperCase()||"U"),1))]),e("button",{onClick:r[0]||(r[0]=U=>c.$refs.avatarInput.click()),disabled:d.value,class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 disabled:opacity-50"},[h(C(be),{class:"w-4 h-4"})],8,gi)]),e("div",fi,[e("p",bi,i(I.value?.name||"Utilisateur"),1),r[14]||(r[14]=e("p",{class:"text-xs text-gray-500 font-primea"},"Cliquez sur l'icône pour changer",-1))]),e("input",{ref:"avatarInput",type:"file",accept:"image/*",onChange:u,class:"hidden"},null,544),d.value?(l(),n("div",vi,[...r[15]||(r[15]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 font-primea mt-2"},"Upload en cours...",-1)])])):R("",!0)])]),e("div",xi,[r[20]||(r[20]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Logo de l'Organisation",-1)),e("div",yi,[e("div",_i,[e("div",hi,[p.value?.logo_url?(l(),n("img",{key:0,src:p.value.logo_url,alt:p.value?.name,class:"w-full h-full object-contain"},null,8,wi)):(l(),n("div",$i,[h(C(Be),{class:"w-8 h-8 text-gray-400 mx-auto mb-2"}),r[17]||(r[17]=e("p",{class:"text-xs text-gray-500 font-primea"},"Aucun logo",-1))]))]),e("button",{onClick:r[1]||(r[1]=U=>c.$refs.logoInput.click()),disabled:x.value,class:"absolute bottom-0 right-0 bg-primea-blue text-white p-2 rounded-full hover:bg-primea-yellow hover:text-primea-blue transition-all duration-200 disabled:opacity-50"},[h(C(be),{class:"w-4 h-4"})],8,ki)]),e("div",Ei,[e("p",Ci,i(p.value?.name||"Organisation"),1),r[18]||(r[18]=e("p",{class:"text-xs text-gray-500 font-primea"},"Logo de votre organisation",-1))]),e("input",{ref:"logoInput",type:"file",accept:"image/*",onChange:t,class:"hidden"},null,544),x.value?(l(),n("div",ji,[...r[19]||(r[19]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-primea-blue mx-auto"},null,-1),e("p",{class:"text-sm text-gray-600 font-primea mt-2"},"Upload en cours...",-1)])])):R("",!0)])])]),e("div",Di,[e("div",Vi,[e("div",Ui,[r[21]||(r[21]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Informations Personnelles",-1)),e("button",{onClick:F,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(C(ge),{class:"w-5 h-5"})])]),e("form",{onSubmit:de(w,["prevent"]),class:"space-y-4"},[e("div",null,[r[22]||(r[22]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom complet",-1)),D(e("input",{"onUpdate:modelValue":r[2]||(r[2]=U=>O.name=U),type:"text",disabled:!m.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Votre nom complet"},null,8,Si),[[z,O.name]])]),e("div",null,[r[23]||(r[23]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email",-1)),D(e("input",{"onUpdate:modelValue":r[3]||(r[3]=U=>O.email=U),type:"email",disabled:!m.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"votre@email.com"},null,8,Ai),[[z,O.email]])]),e("div",null,[r[24]||(r[24]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone",-1)),h(ve,{modelValue:O.phone,"onUpdate:modelValue":r[4]||(r[4]=U=>O.phone=U),id:"personal-phone",disabled:!m.value,"input-class":m.value?"":"disabled:bg-gray-50",placeholder:"Numéro de téléphone","default-country":"GA"},null,8,["modelValue","disabled","input-class"])]),m.value?(l(),n("div",Ii,[e("button",{type:"submit",disabled:g.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},i(g.value?"Enregistrement...":"Enregistrer"),9,Bi),e("button",{type:"button",onClick:Q,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):R("",!0)],32)]),e("div",zi,[e("div",Pi,[r[25]||(r[25]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea"},"Mon Organisation",-1)),e("button",{onClick:K,class:"text-primea-blue hover:text-primea-yellow transition-colors"},[h(C(ge),{class:"w-5 h-5"})])]),e("form",{onSubmit:de(o,["prevent"]),class:"space-y-4"},[e("div",null,[r[26]||(r[26]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nom de l'organisation",-1)),D(e("input",{"onUpdate:modelValue":r[5]||(r[5]=U=>P.name=U),type:"text",disabled:!V.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"Nom de votre organisation"},null,8,Fi),[[z,P.name]])]),e("div",null,[r[27]||(r[27]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Description",-1)),D(e("textarea",{"onUpdate:modelValue":r[6]||(r[6]=U=>P.description=U),disabled:!V.value,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea resize-none",placeholder:"Décrivez votre organisation..."},null,8,Mi),[[z,P.description]])]),e("div",null,[r[28]||(r[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Site web",-1)),D(e("input",{"onUpdate:modelValue":r[7]||(r[7]=U=>P.website_url=U),type:"url",disabled:!V.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"https://votresite.com"},null,8,Ti),[[z,P.website_url]])]),e("div",null,[r[29]||(r[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Email de contact",-1)),D(e("input",{"onUpdate:modelValue":r[8]||(r[8]=U=>P.contact_email=U),type:"email",disabled:!V.value,class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue disabled:bg-gray-50 font-primea",placeholder:"contact@organisation.com"},null,8,Oi),[[z,P.contact_email]])]),e("div",null,[r[30]||(r[30]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Téléphone de contact",-1)),h(ve,{modelValue:P.contact_phone,"onUpdate:modelValue":r[9]||(r[9]=U=>P.contact_phone=U),id:"organization-phone",disabled:!V.value,"input-class":V.value?"":"disabled:bg-gray-50",placeholder:"Numéro de téléphone de contact","default-country":"GA"},null,8,["modelValue","disabled","input-class"])]),V.value?(l(),n("div",Ri,[e("button",{type:"submit",disabled:y.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},i(y.value?"Enregistrement...":"Enregistrer"),9,Li),e("button",{type:"button",onClick:Y,class:"border border-gray-300 text-gray-700 px-4 py-2 rounded-primea hover:bg-gray-50 font-primea transition-colors"}," Annuler ")])):R("",!0)],32)]),e("div",Ni,[r[34]||(r[34]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Sécurité",-1)),e("form",{onSubmit:de(_,["prevent"]),class:"space-y-4"},[e("div",null,[r[31]||(r[31]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Mot de passe actuel",-1)),D(e("input",{"onUpdate:modelValue":r[10]||(r[10]=U=>E.current_password=U),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Votre mot de passe actuel"},null,512),[[z,E.current_password]])]),e("div",null,[r[32]||(r[32]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Nouveau mot de passe",-1)),D(e("input",{"onUpdate:modelValue":r[11]||(r[11]=U=>E.password=U),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Nouveau mot de passe"},null,512),[[z,E.password]])]),e("div",null,[r[33]||(r[33]=e("label",{class:"block text-sm font-medium text-gray-700 font-primea mb-1"},"Confirmer le mot de passe",-1)),D(e("input",{"onUpdate:modelValue":r[12]||(r[12]=U=>E.password_confirmation=U),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-primea focus:ring-2 focus:ring-primea-blue focus:border-primea-blue font-primea",placeholder:"Confirmer le nouveau mot de passe"},null,512),[[z,E.password_confirmation]])]),e("button",{type:"submit",disabled:B.value,class:"bg-primea-blue text-white px-4 py-2 rounded-primea hover:bg-primea-yellow hover:text-primea-blue font-semibold font-primea transition-all duration-200 disabled:opacity-50"},i(B.value?"Mise à jour...":"Changer le mot de passe"),9,qi)],32)]),e("div",Xi,[r[39]||(r[39]=e("h2",{class:"text-xl font-semibold text-primea-blue font-primea mb-6"},"Statut du Compte",-1)),e("div",Gi,[e("div",Wi,[e("div",Hi,[h(C(ze),{class:"w-5 h-5 text-green-600"}),r[35]||(r[35]=e("span",{class:"text-sm font-medium text-green-800 font-primea"},"Compte vérifié",-1))]),e("span",Ji,i(s(I.value?.email_verified_at)),1)]),p.value?.verified_at?(l(),n("div",Qi,[e("div",Ki,[h(C(Pe),{class:"w-5 h-5 text-blue-600"}),r[36]||(r[36]=e("span",{class:"text-sm font-medium text-blue-800 font-primea"},"Organisation certifiée",-1))]),e("span",Yi,i(s(p.value.verified_at)),1)])):R("",!0),e("div",Zi,[e("div",ed,[e("p",td,i(H.value.events||0),1),r[37]||(r[37]=e("p",{class:"text-sm text-gray-600 font-primea"},"Événements créés",-1))]),e("div",sd,[e("p",rd,i(H.value.tickets||0),1),r[38]||(r[38]=e("p",{class:"text-sm text-gray-600 font-primea"},"Billets vendus",-1))])])])])])]))])]))}},ad=le(od,[["__scopeId","data-v-ab2c2018"]]),fd=Object.freeze(Object.defineProperty({__proto__:null,default:ad},Symbol.toStringTag,{value:"Module"}));export{gd as B,ud as E,dd as O,md as a,pd as b,cd as c,fd as d};
