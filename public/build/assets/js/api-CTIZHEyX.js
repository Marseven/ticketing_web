import{a as r}from"./vendor-NIGUFBhG.js";const s=r.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json",Accept:"application/json"}});s.interceptors.request.use(e=>{const t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));s.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)));const u={getTicket(e){return s.get(`/tickets/${e}`)},retrieveTickets(e){return s.get(`/tickets/retrieve/${e}`)},validateTicket(e,t="validate"){return s.post("/tickets/validate",{qr_code:e,action:t})},searchTickets(e){const{reference:t,phone:n,email:i}=e;return t?this.getTicket(t):i||n?new Promise((a,o)=>{setTimeout(()=>{i?.includes("test")||n?.includes("123")||t?.includes("TKT")?a({data:{tickets:[{id:1,code:"TKT-2024-ABC123",status:"issued",event:{id:1,title:"L'OISEAU RARE",slug:"oiseau-rare",image_url:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800",venue_name:"Entre Nous Bar"},ticket_type:{id:1,name:"Standard",description:"Accès standard"},buyer:{name:"John Doe",email:i||"john@example.com"},issued_at:"27/07/2025 10:00:00",used_at:null,schedule:{starts_at:"27/07/2025 20:00:00",ends_at:"27/07/2025 23:00:00",door_time:"27/07/2025 19:30:00"}}]}}):o(new Error("Aucun ticket trouvé avec ces informations"))},1500)}):Promise.reject(new Error("Veuillez fournir au moins un critère de recherche"))}},p={createGuestOrder(e){return r.post("/api/guest/orders",e,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestOrder(e){return r.get(`/api/guest/orders/${e}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},getGuestTicket(e){return r.get(`/api/guest/tickets/${e}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})},retrieveGuestTickets(e){return r.get(`/api/guest/tickets/retrieve/${encodeURIComponent(e)}`,{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})}};export{p as g,u as t};
